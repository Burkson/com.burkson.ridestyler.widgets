/*! nouislider - 10.1.0 - 2017-07-28 17:11:18 */

(function (factory) {

    if ( typeof define === 'function' && define.amd ) {

        // AMD. Register as an anonymous module.
        define([], factory);

    } else if ( typeof exports === 'object' ) {

        // Node/CommonJS
        module.exports = factory();

    } else {

        // Browser globals
        window.noUiSlider = factory();
    }

}(function( ){

	'use strict';

	var VERSION = '10.1.0';


	function isValidFormatter ( entry ) {
		return typeof entry === 'object' && typeof entry.to === 'function' && typeof entry.from === 'function';
	}

	function removeElement ( el ) {
		el.parentElement.removeChild(el);
	}

	// Bindable version
	function preventDefault ( e ) {
		e.preventDefault();
	}

	// Removes duplicates from an array.
	function unique ( array ) {
		return array.filter(function(a){
			return !this[a] ? this[a] = true : false;
		}, {});
	}

	// Round a value to the closest 'to'.
	function closest ( value, to ) {
		return Math.round(value / to) * to;
	}

	// Current position of an element relative to the document.
	function offset ( elem, orientation ) {

		var rect = elem.getBoundingClientRect();
		var doc = elem.ownerDocument;
		var docElem = doc.documentElement;
		var pageOffset = getPageOffset(doc);

		// getBoundingClientRect contains left scroll in Chrome on Android.
		// I haven't found a feature detection that proves this. Worst case
		// scenario on mis-match: the 'tap' feature on horizontal sliders breaks.
		if ( /webkit.*Chrome.*Mobile/i.test(navigator.userAgent) ) {
			pageOffset.x = 0;
		}

		return orientation ? (rect.top + pageOffset.y - docElem.clientTop) : (rect.left + pageOffset.x - docElem.clientLeft);
	}

	// Checks whether a value is numerical.
	function isNumeric ( a ) {
		return typeof a === 'number' && !isNaN( a ) && isFinite( a );
	}

	// Sets a class and removes it after [duration] ms.
	function addClassFor ( element, className, duration ) {
		if (duration > 0) {
		addClass(element, className);
			setTimeout(function(){
				removeClass(element, className);
			}, duration);
		}
	}

	// Limits a value to 0 - 100
	function limit ( a ) {
		return Math.max(Math.min(a, 100), 0);
	}

	// Wraps a variable as an array, if it isn't one yet.
	// Note that an input array is returned by reference!
	function asArray ( a ) {
		return Array.isArray(a) ? a : [a];
	}

	// Counts decimals
	function countDecimals ( numStr ) {
		numStr = String(numStr);
		var pieces = numStr.split(".");
		return pieces.length > 1 ? pieces[1].length : 0;
	}

	// http://youmightnotneedjquery.com/#add_class
	function addClass ( el, className ) {
		if ( el.classList ) {
			el.classList.add(className);
		} else {
			el.className += ' ' + className;
		}
	}

	// http://youmightnotneedjquery.com/#remove_class
	function removeClass ( el, className ) {
		if ( el.classList ) {
			el.classList.remove(className);
		} else {
			el.className = el.className.replace(new RegExp('(^|\\b)' + className.split(' ').join('|') + '(\\b|$)', 'gi'), ' ');
		}
	}

	// https://plainjs.com/javascript/attributes/adding-removing-and-testing-for-classes-9/
	function hasClass ( el, className ) {
		return el.classList ? el.classList.contains(className) : new RegExp('\\b' + className + '\\b').test(el.className);
	}

	// https://developer.mozilla.org/en-US/docs/Web/API/Window/scrollY#Notes
	function getPageOffset ( doc ) {

		var supportPageOffset = window.pageXOffset !== undefined;
		var isCSS1Compat = ((doc.compatMode || "") === "CSS1Compat");
		var x = supportPageOffset ? window.pageXOffset : isCSS1Compat ? doc.documentElement.scrollLeft : doc.body.scrollLeft;
		var y = supportPageOffset ? window.pageYOffset : isCSS1Compat ? doc.documentElement.scrollTop : doc.body.scrollTop;

		return {
			x: x,
			y: y
		};
	}

	// we provide a function to compute constants instead
	// of accessing window.* as soon as the module needs it
	// so that we do not compute anything if not needed
	function getActions ( ) {

		// Determine the events to bind. IE11 implements pointerEvents without
		// a prefix, which breaks compatibility with the IE10 implementation.
		return window.navigator.pointerEnabled ? {
			start: 'pointerdown',
			move: 'pointermove',
			end: 'pointerup'
		} : window.navigator.msPointerEnabled ? {
			start: 'MSPointerDown',
			move: 'MSPointerMove',
			end: 'MSPointerUp'
		} : {
			start: 'mousedown touchstart',
			move: 'mousemove touchmove',
			end: 'mouseup touchend'
		};
	}

	// https://github.com/WICG/EventListenerOptions/blob/gh-pages/explainer.md
	// Issue #785
	function getSupportsPassive ( ) {

		var supportsPassive = false;

		try {

			var opts = Object.defineProperty({}, 'passive', {
				get: function() {
					supportsPassive = true;
				}
			});

			window.addEventListener('test', null, opts);

		} catch (e) {}

		return supportsPassive;
	}

	function getSupportsTouchActionNone ( ) {
		return window.CSS && CSS.supports && CSS.supports('touch-action', 'none');
	}


// Value calculation

	// Determine the size of a sub-range in relation to a full range.
	function subRangeRatio ( pa, pb ) {
		return (100 / (pb - pa));
	}

	// (percentage) How many percent is this value of this range?
	function fromPercentage ( range, value ) {
		return (value * 100) / ( range[1] - range[0] );
	}

	// (percentage) Where is this value on this range?
	function toPercentage ( range, value ) {
		return fromPercentage( range, range[0] < 0 ?
			value + Math.abs(range[0]) :
				value - range[0] );
	}

	// (value) How much is this percentage on this range?
	function isPercentage ( range, value ) {
		return ((value * ( range[1] - range[0] )) / 100) + range[0];
	}


// Range conversion

	function getJ ( value, arr ) {

		var j = 1;

		while ( value >= arr[j] ){
			j += 1;
		}

		return j;
	}

	// (percentage) Input a value, find where, on a scale of 0-100, it applies.
	function toStepping ( xVal, xPct, value ) {

		if ( value >= xVal.slice(-1)[0] ){
			return 100;
		}

		var j = getJ( value, xVal ), va, vb, pa, pb;

		va = xVal[j-1];
		vb = xVal[j];
		pa = xPct[j-1];
		pb = xPct[j];

		return pa + (toPercentage([va, vb], value) / subRangeRatio (pa, pb));
	}

	// (value) Input a percentage, find where it is on the specified range.
	function fromStepping ( xVal, xPct, value ) {

		// There is no range group that fits 100
		if ( value >= 100 ){
			return xVal.slice(-1)[0];
		}

		var j = getJ( value, xPct ), va, vb, pa, pb;

		va = xVal[j-1];
		vb = xVal[j];
		pa = xPct[j-1];
		pb = xPct[j];

		return isPercentage([va, vb], (value - pa) * subRangeRatio (pa, pb));
	}

	// (percentage) Get the step that applies at a certain value.
	function getStep ( xPct, xSteps, snap, value ) {

		if ( value === 100 ) {
			return value;
		}

		var j = getJ( value, xPct ), a, b;

		// If 'snap' is set, steps are used as fixed points on the slider.
		if ( snap ) {

			a = xPct[j-1];
			b = xPct[j];

			// Find the closest position, a or b.
			if ((value - a) > ((b-a)/2)){
				return b;
			}

			return a;
		}

		if ( !xSteps[j-1] ){
			return value;
		}

		return xPct[j-1] + closest(
			value - xPct[j-1],
			xSteps[j-1]
		);
	}


// Entry parsing

	function handleEntryPoint ( index, value, that ) {

		var percentage;

		// Wrap numerical input in an array.
		if ( typeof value === "number" ) {
			value = [value];
		}

		// Reject any invalid input, by testing whether value is an array.
		if ( Object.prototype.toString.call( value ) !== '[object Array]' ){
			throw new Error("noUiSlider (" + VERSION + "): 'range' contains invalid value.");
		}

		// Covert min/max syntax to 0 and 100.
		if ( index === 'min' ) {
			percentage = 0;
		} else if ( index === 'max' ) {
			percentage = 100;
		} else {
			percentage = parseFloat( index );
		}

		// Check for correct input.
		if ( !isNumeric( percentage ) || !isNumeric( value[0] ) ) {
			throw new Error("noUiSlider (" + VERSION + "): 'range' value isn't numeric.");
		}

		// Store values.
		that.xPct.push( percentage );
		that.xVal.push( value[0] );

		// NaN will evaluate to false too, but to keep
		// logging clear, set step explicitly. Make sure
		// not to override the 'step' setting with false.
		if ( !percentage ) {
			if ( !isNaN( value[1] ) ) {
				that.xSteps[0] = value[1];
			}
		} else {
			that.xSteps.push( isNaN(value[1]) ? false : value[1] );
		}

		that.xHighestCompleteStep.push(0);
	}

	function handleStepPoint ( i, n, that ) {

		// Ignore 'false' stepping.
		if ( !n ) {
			return true;
		}

		// Factor to range ratio
		that.xSteps[i] = fromPercentage([
			 that.xVal[i]
			,that.xVal[i+1]
		], n) / subRangeRatio (
			that.xPct[i],
			that.xPct[i+1] );

		var totalSteps = (that.xVal[i+1] - that.xVal[i]) / that.xNumSteps[i];
		var highestStep = Math.ceil(Number(totalSteps.toFixed(3)) - 1);
		var step = that.xVal[i] + (that.xNumSteps[i] * highestStep);

		that.xHighestCompleteStep[i] = step;
	}


// Interface

	function Spectrum ( entry, snap, singleStep ) {

		this.xPct = [];
		this.xVal = [];
		this.xSteps = [ singleStep || false ];
		this.xNumSteps = [ false ];
		this.xHighestCompleteStep = [];

		this.snap = snap;

		var index, ordered = [ /* [0, 'min'], [1, '50%'], [2, 'max'] */ ];

		// Map the object keys to an array.
		for ( index in entry ) {
			if ( entry.hasOwnProperty(index) ) {
				ordered.push([entry[index], index]);
			}
		}

		// Sort all entries by value (numeric sort).
		if ( ordered.length && typeof ordered[0][0] === "object" ) {
			ordered.sort(function(a, b) { return a[0][0] - b[0][0]; });
		} else {
			ordered.sort(function(a, b) { return a[0] - b[0]; });
		}


		// Convert all entries to subranges.
		for ( index = 0; index < ordered.length; index++ ) {
			handleEntryPoint(ordered[index][1], ordered[index][0], this);
		}

		// Store the actual step values.
		// xSteps is sorted in the same order as xPct and xVal.
		this.xNumSteps = this.xSteps.slice(0);

		// Convert all numeric steps to the percentage of the subrange they represent.
		for ( index = 0; index < this.xNumSteps.length; index++ ) {
			handleStepPoint(index, this.xNumSteps[index], this);
		}
	}

	Spectrum.prototype.getMargin = function ( value ) {

		var step = this.xNumSteps[0];

		if ( step && ((value / step) % 1) !== 0 ) {
			throw new Error("noUiSlider (" + VERSION + "): 'limit', 'margin' and 'padding' must be divisible by step.");
		}

		return this.xPct.length === 2 ? fromPercentage(this.xVal, value) : false;
	};

	Spectrum.prototype.toStepping = function ( value ) {

		value = toStepping( this.xVal, this.xPct, value );

		return value;
	};

	Spectrum.prototype.fromStepping = function ( value ) {

		return fromStepping( this.xVal, this.xPct, value );
	};

	Spectrum.prototype.getStep = function ( value ) {

		value = getStep(this.xPct, this.xSteps, this.snap, value );

		return value;
	};

	Spectrum.prototype.getNearbySteps = function ( value ) {

		var j = getJ(value, this.xPct);

		return {
			stepBefore: { startValue: this.xVal[j-2], step: this.xNumSteps[j-2], highestStep: this.xHighestCompleteStep[j-2] },
			thisStep: { startValue: this.xVal[j-1], step: this.xNumSteps[j-1], highestStep: this.xHighestCompleteStep[j-1] },
			stepAfter: { startValue: this.xVal[j-0], step: this.xNumSteps[j-0], highestStep: this.xHighestCompleteStep[j-0] }
		};
	};

	Spectrum.prototype.countStepDecimals = function () {
		var stepDecimals = this.xNumSteps.map(countDecimals);
		return Math.max.apply(null, stepDecimals);
 	};

	// Outside testing
	Spectrum.prototype.convert = function ( value ) {
		return this.getStep(this.toStepping(value));
	};

/*	Every input option is tested and parsed. This'll prevent
	endless validation in internal methods. These tests are
	structured with an item for every option available. An
	option can be marked as required by setting the 'r' flag.
	The testing function is provided with three arguments:
		- The provided value for the option;
		- A reference to the options object;
		- The name for the option;

	The testing function returns false when an error is detected,
	or true when everything is OK. It can also modify the option
	object, to make sure all values can be correctly looped elsewhere. */

	var defaultFormatter = { 'to': function( value ){
		return value !== undefined && value.toFixed(2);
	}, 'from': Number };

	function validateFormat ( entry ) {

		// Any object with a to and from method is supported.
		if ( isValidFormatter(entry) ) {
			return true;
		}

		throw new Error("noUiSlider (" + VERSION + "): 'format' requires 'to' and 'from' methods.");
	}

	function testStep ( parsed, entry ) {

		if ( !isNumeric( entry ) ) {
			throw new Error("noUiSlider (" + VERSION + "): 'step' is not numeric.");
		}

		// The step option can still be used to set stepping
		// for linear sliders. Overwritten if set in 'range'.
		parsed.singleStep = entry;
	}

	function testRange ( parsed, entry ) {

		// Filter incorrect input.
		if ( typeof entry !== 'object' || Array.isArray(entry) ) {
			throw new Error("noUiSlider (" + VERSION + "): 'range' is not an object.");
		}

		// Catch missing start or end.
		if ( entry.min === undefined || entry.max === undefined ) {
			throw new Error("noUiSlider (" + VERSION + "): Missing 'min' or 'max' in 'range'.");
		}

		// Catch equal start or end.
		if ( entry.min === entry.max ) {
			throw new Error("noUiSlider (" + VERSION + "): 'range' 'min' and 'max' cannot be equal.");
		}

		parsed.spectrum = new Spectrum(entry, parsed.snap, parsed.singleStep);
	}

	function testStart ( parsed, entry ) {

		entry = asArray(entry);

		// Validate input. Values aren't tested, as the public .val method
		// will always provide a valid location.
		if ( !Array.isArray( entry ) || !entry.length ) {
			throw new Error("noUiSlider (" + VERSION + "): 'start' option is incorrect.");
		}

		// Store the number of handles.
		parsed.handles = entry.length;

		// When the slider is initialized, the .val method will
		// be called with the start options.
		parsed.start = entry;
	}

	function testSnap ( parsed, entry ) {

		// Enforce 100% stepping within subranges.
		parsed.snap = entry;

		if ( typeof entry !== 'boolean' ){
			throw new Error("noUiSlider (" + VERSION + "): 'snap' option must be a boolean.");
		}
	}

	function testAnimate ( parsed, entry ) {

		// Enforce 100% stepping within subranges.
		parsed.animate = entry;

		if ( typeof entry !== 'boolean' ){
			throw new Error("noUiSlider (" + VERSION + "): 'animate' option must be a boolean.");
		}
	}

	function testAnimationDuration ( parsed, entry ) {

		parsed.animationDuration = entry;

		if ( typeof entry !== 'number' ){
			throw new Error("noUiSlider (" + VERSION + "): 'animationDuration' option must be a number.");
		}
	}

	function testConnect ( parsed, entry ) {

		var connect = [false];
		var i;

		// Map legacy options
		if ( entry === 'lower' ) {
			entry = [true, false];
		}

		else if ( entry === 'upper' ) {
			entry = [false, true];
		}

		// Handle boolean options
		if ( entry === true || entry === false ) {

			for ( i = 1; i < parsed.handles; i++ ) {
				connect.push(entry);
			}

			connect.push(false);
		}

		// Reject invalid input
		else if ( !Array.isArray( entry ) || !entry.length || entry.length !== parsed.handles + 1 ) {
			throw new Error("noUiSlider (" + VERSION + "): 'connect' option doesn't match handle count.");
		}

		else {
			connect = entry;
		}

		parsed.connect = connect;
	}

	function testOrientation ( parsed, entry ) {

		// Set orientation to an a numerical value for easy
		// array selection.
		switch ( entry ){
		  case 'horizontal':
			parsed.ort = 0;
			break;
		  case 'vertical':
			parsed.ort = 1;
			break;
		  default:
			throw new Error("noUiSlider (" + VERSION + "): 'orientation' option is invalid.");
		}
	}

	function testMargin ( parsed, entry ) {

		if ( !isNumeric(entry) ){
			throw new Error("noUiSlider (" + VERSION + "): 'margin' option must be numeric.");
		}

		// Issue #582
		if ( entry === 0 ) {
			return;
		}

		parsed.margin = parsed.spectrum.getMargin(entry);

		if ( !parsed.margin ) {
			throw new Error("noUiSlider (" + VERSION + "): 'margin' option is only supported on linear sliders.");
		}
	}

	function testLimit ( parsed, entry ) {

		if ( !isNumeric(entry) ){
			throw new Error("noUiSlider (" + VERSION + "): 'limit' option must be numeric.");
		}

		parsed.limit = parsed.spectrum.getMargin(entry);

		if ( !parsed.limit || parsed.handles < 2 ) {
			throw new Error("noUiSlider (" + VERSION + "): 'limit' option is only supported on linear sliders with 2 or more handles.");
		}
	}

	function testPadding ( parsed, entry ) {

		if ( !isNumeric(entry) ){
			throw new Error("noUiSlider (" + VERSION + "): 'padding' option must be numeric.");
		}

		if ( entry === 0 ) {
			return;
		}

		parsed.padding = parsed.spectrum.getMargin(entry);

		if ( !parsed.padding ) {
			throw new Error("noUiSlider (" + VERSION + "): 'padding' option is only supported on linear sliders.");
		}

		if ( parsed.padding < 0 ) {
			throw new Error("noUiSlider (" + VERSION + "): 'padding' option must be a positive number.");
		}

		if ( parsed.padding >= 50 ) {
			throw new Error("noUiSlider (" + VERSION + "): 'padding' option must be less than half the range.");
		}
	}

	function testDirection ( parsed, entry ) {

		// Set direction as a numerical value for easy parsing.
		// Invert connection for RTL sliders, so that the proper
		// handles get the connect/background classes.
		switch ( entry ) {
		  case 'ltr':
			parsed.dir = 0;
			break;
		  case 'rtl':
			parsed.dir = 1;
			break;
		  default:
			throw new Error("noUiSlider (" + VERSION + "): 'direction' option was not recognized.");
		}
	}

	function testBehaviour ( parsed, entry ) {

		// Make sure the input is a string.
		if ( typeof entry !== 'string' ) {
			throw new Error("noUiSlider (" + VERSION + "): 'behaviour' must be a string containing options.");
		}

		// Check if the string contains any keywords.
		// None are required.
		var tap = entry.indexOf('tap') >= 0;
		var drag = entry.indexOf('drag') >= 0;
		var fixed = entry.indexOf('fixed') >= 0;
		var snap = entry.indexOf('snap') >= 0;
		var hover = entry.indexOf('hover') >= 0;

		if ( fixed ) {

			if ( parsed.handles !== 2 ) {
				throw new Error("noUiSlider (" + VERSION + "): 'fixed' behaviour must be used with 2 handles");
			}

			// Use margin to enforce fixed state
			testMargin(parsed, parsed.start[1] - parsed.start[0]);
		}

		parsed.events = {
			tap: tap || snap,
			drag: drag,
			fixed: fixed,
			snap: snap,
			hover: hover
		};
	}

	function testMultitouch ( parsed, entry ) {
		parsed.multitouch = entry;

		if ( typeof entry !== 'boolean' ){
			throw new Error("noUiSlider (" + VERSION + "): 'multitouch' option must be a boolean.");
		}
	}

	function testTooltips ( parsed, entry ) {

		if ( entry === false ) {
			return;
		}

		else if ( entry === true ) {

			parsed.tooltips = [];

			for ( var i = 0; i < parsed.handles; i++ ) {
				parsed.tooltips.push(true);
			}
		}

		else {

			parsed.tooltips = asArray(entry);

			if ( parsed.tooltips.length !== parsed.handles ) {
				throw new Error("noUiSlider (" + VERSION + "): must pass a formatter for all handles.");
			}

			parsed.tooltips.forEach(function(formatter){
				if ( typeof formatter !== 'boolean' && (typeof formatter !== 'object' || typeof formatter.to !== 'function') ) {
					throw new Error("noUiSlider (" + VERSION + "): 'tooltips' must be passed a formatter or 'false'.");
				}
			});
		}
	}

	function testAriaFormat ( parsed, entry ) {
		parsed.ariaFormat = entry;
		validateFormat(entry);
	}

	function testFormat ( parsed, entry ) {
		parsed.format = entry;
		validateFormat(entry);
	}

	function testCssPrefix ( parsed, entry ) {

		if ( entry !== undefined && typeof entry !== 'string' && entry !== false ) {
			throw new Error("noUiSlider (" + VERSION + "): 'cssPrefix' must be a string or `false`.");
		}

		parsed.cssPrefix = entry;
	}

	function testCssClasses ( parsed, entry ) {

		if ( entry !== undefined && typeof entry !== 'object' ) {
			throw new Error("noUiSlider (" + VERSION + "): 'cssClasses' must be an object.");
		}

		if ( typeof parsed.cssPrefix === 'string' ) {
			parsed.cssClasses = {};

			for ( var key in entry ) {
				if ( !entry.hasOwnProperty(key) ) { continue; }

				parsed.cssClasses[key] = parsed.cssPrefix + entry[key];
			}
		} else {
			parsed.cssClasses = entry;
		}
	}

	function testUseRaf ( parsed, entry ) {
		if ( entry === true || entry === false ) {
			parsed.useRequestAnimationFrame = entry;
		} else {
			throw new Error("noUiSlider (" + VERSION + "): 'useRequestAnimationFrame' option should be true (default) or false.");
		}
	}

	// Test all developer settings and parse to assumption-safe values.
	function testOptions ( options ) {

		// To prove a fix for #537, freeze options here.
		// If the object is modified, an error will be thrown.
		// Object.freeze(options);

		var parsed = {
			margin: 0,
			limit: 0,
			padding: 0,
			animate: true,
			animationDuration: 300,
			ariaFormat: defaultFormatter,
			format: defaultFormatter
		};

		// Tests are executed in the order they are presented here.
		var tests = {
			'step': { r: false, t: testStep },
			'start': { r: true, t: testStart },
			'connect': { r: true, t: testConnect },
			'direction': { r: true, t: testDirection },
			'snap': { r: false, t: testSnap },
			'animate': { r: false, t: testAnimate },
			'animationDuration': { r: false, t: testAnimationDuration },
			'range': { r: true, t: testRange },
			'orientation': { r: false, t: testOrientation },
			'margin': { r: false, t: testMargin },
			'limit': { r: false, t: testLimit },
			'padding': { r: false, t: testPadding },
			'behaviour': { r: true, t: testBehaviour },
			'multitouch': { r: true, t: testMultitouch },
			'ariaFormat': { r: false, t: testAriaFormat },
			'format': { r: false, t: testFormat },
			'tooltips': { r: false, t: testTooltips },
			'cssPrefix': { r: false, t: testCssPrefix },
			'cssClasses': { r: false, t: testCssClasses },
			'useRequestAnimationFrame': { r: false, t: testUseRaf }
		};

		var defaults = {
			'connect': false,
			'direction': 'ltr',
			'behaviour': 'tap',
			'multitouch': false,
			'orientation': 'horizontal',
			'cssPrefix' : 'noUi-',
			'cssClasses': {
				target: 'target',
				base: 'base',
				origin: 'origin',
				handle: 'handle',
				handleLower: 'handle-lower',
				handleUpper: 'handle-upper',
				horizontal: 'horizontal',
				vertical: 'vertical',
				background: 'background',
				connect: 'connect',
				ltr: 'ltr',
				rtl: 'rtl',
				draggable: 'draggable',
				drag: 'state-drag',
				tap: 'state-tap',
				active: 'active',
				tooltip: 'tooltip',
				pips: 'pips',
				pipsHorizontal: 'pips-horizontal',
				pipsVertical: 'pips-vertical',
				marker: 'marker',
				markerHorizontal: 'marker-horizontal',
				markerVertical: 'marker-vertical',
				markerNormal: 'marker-normal',
				markerLarge: 'marker-large',
				markerSub: 'marker-sub',
				value: 'value',
				valueHorizontal: 'value-horizontal',
				valueVertical: 'value-vertical',
				valueNormal: 'value-normal',
				valueLarge: 'value-large',
				valueSub: 'value-sub'
			},
			'useRequestAnimationFrame': true
		};

		// AriaFormat defaults to regular format, if any.
		if ( options.format && !options.ariaFormat ) {
			options.ariaFormat = options.format;
		}

		// Run all options through a testing mechanism to ensure correct
		// input. It should be noted that options might get modified to
		// be handled properly. E.g. wrapping integers in arrays.
		Object.keys(tests).forEach(function( name ){

			// If the option isn't set, but it is required, throw an error.
			if ( options[name] === undefined && defaults[name] === undefined ) {

				if ( tests[name].r ) {
					throw new Error("noUiSlider (" + VERSION + "): '" + name + "' is required.");
				}

				return true;
			}

			tests[name].t( parsed, options[name] === undefined ? defaults[name] : options[name] );
		});

		// Forward pips options
		parsed.pips = options.pips;

		var styles = [['left', 'top'], ['right', 'bottom']];

		// Pre-define the styles.
		parsed.style = styles[parsed.dir][parsed.ort];
		parsed.styleOposite = styles[parsed.dir?0:1][parsed.ort];

		return parsed;
	}


function closure ( target, options, originalOptions ){

	var actions = getActions();
	var supportsTouchActionNone = getSupportsTouchActionNone();
	var supportsPassive = supportsTouchActionNone && getSupportsPassive();

	// All variables local to 'closure' are prefixed with 'scope_'
	var scope_Target = target;
	var scope_Locations = [];
	var scope_Base;
	var scope_Handles;
	var scope_HandleNumbers = [];
	var scope_ActiveHandlesCount = 0;
	var scope_Connects;
	var scope_Spectrum = options.spectrum;
	var scope_Values = [];
	var scope_Events = {};
	var scope_Self;
	var scope_Pips;
	var scope_Document = target.ownerDocument;
	var scope_DocumentElement = scope_Document.documentElement;
	var scope_Body = scope_Document.body;


	// Creates a node, adds it to target, returns the new node.
	function addNodeTo ( target, className ) {

		var div = scope_Document.createElement('div');

		if ( className ) {
			addClass(div, className);
		}

		target.appendChild(div);

		return div;
	}

	// Append a origin to the base
	function addOrigin ( base, handleNumber ) {

		var origin = addNodeTo(base, options.cssClasses.origin);
		var handle = addNodeTo(origin, options.cssClasses.handle);

		handle.setAttribute('data-handle', handleNumber);

		// https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/tabindex
		// 0 = focusable and reachable
		handle.setAttribute('tabindex', '0');
		handle.setAttribute('role', 'slider');
		handle.setAttribute('aria-orientation', options.ort ? 'vertical' : 'horizontal');

		if ( handleNumber === 0 ) {
			addClass(handle, options.cssClasses.handleLower);
		}

		else if ( handleNumber === options.handles - 1 ) {
			addClass(handle, options.cssClasses.handleUpper);
		}

		return origin;
	}

	// Insert nodes for connect elements
	function addConnect ( base, add ) {

		if ( !add ) {
			return false;
		}

		return addNodeTo(base, options.cssClasses.connect);
	}

	// Add handles to the slider base.
	function addElements ( connectOptions, base ) {

		scope_Handles = [];
		scope_Connects = [];

		scope_Connects.push(addConnect(base, connectOptions[0]));

		// [::::O====O====O====]
		// connectOptions = [0, 1, 1, 1]

		for ( var i = 0; i < options.handles; i++ ) {
			// Keep a list of all added handles.
			scope_Handles.push(addOrigin(base, i));
			scope_HandleNumbers[i] = i;
			scope_Connects.push(addConnect(base, connectOptions[i + 1]));
		}
	}

	// Initialize a single slider.
	function addSlider ( target ) {

		// Apply classes and data to the target.
		addClass(target, options.cssClasses.target);

		if ( options.dir === 0 ) {
			addClass(target, options.cssClasses.ltr);
		} else {
			addClass(target, options.cssClasses.rtl);
		}

		if ( options.ort === 0 ) {
			addClass(target, options.cssClasses.horizontal);
		} else {
			addClass(target, options.cssClasses.vertical);
		}

		scope_Base = addNodeTo(target, options.cssClasses.base);
	}


	function addTooltip ( handle, handleNumber ) {

		if ( !options.tooltips[handleNumber] ) {
			return false;
		}

		return addNodeTo(handle.firstChild, options.cssClasses.tooltip);
	}

	// The tooltips option is a shorthand for using the 'update' event.
	function tooltips ( ) {

		// Tooltips are added with options.tooltips in original order.
		var tips = scope_Handles.map(addTooltip);

		bindEvent('update', function(values, handleNumber, unencoded) {

			if ( !tips[handleNumber] ) {
				return;
			}

			var formattedValue = values[handleNumber];

			if ( options.tooltips[handleNumber] !== true ) {
				formattedValue = options.tooltips[handleNumber].to(unencoded[handleNumber]);
			}

			tips[handleNumber].innerHTML = formattedValue;
		});
	}


	function aria ( ) {

		bindEvent('update', function ( values, handleNumber, unencoded, tap, positions ) {

			// Update Aria Values for all handles, as a change in one changes min and max values for the next.
			scope_HandleNumbers.forEach(function( handleNumber ){

				var handle = scope_Handles[handleNumber];

				var min = checkHandlePosition(scope_Locations, handleNumber, 0, true, true, true);
				var max = checkHandlePosition(scope_Locations, handleNumber, 100, true, true, true);

				var now = positions[handleNumber];
				var text = options.ariaFormat.to(unencoded[handleNumber]);

				handle.children[0].setAttribute('aria-valuemin', min.toFixed(1));
				handle.children[0].setAttribute('aria-valuemax', max.toFixed(1));
				handle.children[0].setAttribute('aria-valuenow', now.toFixed(1));
				handle.children[0].setAttribute('aria-valuetext', text);
			});
		});
	}


	function getGroup ( mode, values, stepped ) {

		// Use the range.
		if ( mode === 'range' || mode === 'steps' ) {
			return scope_Spectrum.xVal;
		}

		if ( mode === 'count' ) {

			if ( !values ) {
				throw new Error("noUiSlider (" + VERSION + "): 'values' required for mode 'count'.");
			}

			// Divide 0 - 100 in 'count' parts.
			var spread = ( 100 / (values - 1) );
			var v;
			var i = 0;

			values = [];

			// List these parts and have them handled as 'positions'.
			while ( (v = i++ * spread) <= 100 ) {
				values.push(v);
			}

			mode = 'positions';
		}

		if ( mode === 'positions' ) {

			// Map all percentages to on-range values.
			return values.map(function( value ){
				return scope_Spectrum.fromStepping( stepped ? scope_Spectrum.getStep( value ) : value );
			});
		}

		if ( mode === 'values' ) {

			// If the value must be stepped, it needs to be converted to a percentage first.
			if ( stepped ) {

				return values.map(function( value ){

					// Convert to percentage, apply step, return to value.
					return scope_Spectrum.fromStepping( scope_Spectrum.getStep( scope_Spectrum.toStepping( value ) ) );
				});

			}

			// Otherwise, we can simply use the values.
			return values;
		}
	}

	function generateSpread ( density, mode, group ) {

		function safeIncrement(value, increment) {
			// Avoid floating point variance by dropping the smallest decimal places.
			return (value + increment).toFixed(7) / 1;
		}

		var indexes = {};
		var firstInRange = scope_Spectrum.xVal[0];
		var lastInRange = scope_Spectrum.xVal[scope_Spectrum.xVal.length-1];
		var ignoreFirst = false;
		var ignoreLast = false;
		var prevPct = 0;

		// Create a copy of the group, sort it and filter away all duplicates.
		group = unique(group.slice().sort(function(a, b){ return a - b; }));

		// Make sure the range starts with the first element.
		if ( group[0] !== firstInRange ) {
			group.unshift(firstInRange);
			ignoreFirst = true;
		}

		// Likewise for the last one.
		if ( group[group.length - 1] !== lastInRange ) {
			group.push(lastInRange);
			ignoreLast = true;
		}

		group.forEach(function ( current, index ) {

			// Get the current step and the lower + upper positions.
			var step;
			var i;
			var q;
			var low = current;
			var high = group[index+1];
			var newPct;
			var pctDifference;
			var pctPos;
			var type;
			var steps;
			var realSteps;
			var stepsize;

			// When using 'steps' mode, use the provided steps.
			// Otherwise, we'll step on to the next subrange.
			if ( mode === 'steps' ) {
				step = scope_Spectrum.xNumSteps[ index ];
			}

			// Default to a 'full' step.
			if ( !step ) {
				step = high-low;
			}

			// Low can be 0, so test for false. If high is undefined,
			// we are at the last subrange. Index 0 is already handled.
			if ( low === false || high === undefined ) {
				return;
			}

			// Make sure step isn't 0, which would cause an infinite loop (#654)
			step = Math.max(step, 0.0000001);

			// Find all steps in the subrange.
			for ( i = low; i <= high; i = safeIncrement(i, step) ) {

				// Get the percentage value for the current step,
				// calculate the size for the subrange.
				newPct = scope_Spectrum.toStepping( i );
				pctDifference = newPct - prevPct;

				steps = pctDifference / density;
				realSteps = Math.round(steps);

				// This ratio represents the ammount of percentage-space a point indicates.
				// For a density 1 the points/percentage = 1. For density 2, that percentage needs to be re-devided.
				// Round the percentage offset to an even number, then divide by two
				// to spread the offset on both sides of the range.
				stepsize = pctDifference/realSteps;

				// Divide all points evenly, adding the correct number to this subrange.
				// Run up to <= so that 100% gets a point, event if ignoreLast is set.
				for ( q = 1; q <= realSteps; q += 1 ) {

					// The ratio between the rounded value and the actual size might be ~1% off.
					// Correct the percentage offset by the number of points
					// per subrange. density = 1 will result in 100 points on the
					// full range, 2 for 50, 4 for 25, etc.
					pctPos = prevPct + ( q * stepsize );
					indexes[pctPos.toFixed(5)] = ['x', 0];
				}

				// Determine the point type.
				type = (group.indexOf(i) > -1) ? 1 : ( mode === 'steps' ? 2 : 0 );

				// Enforce the 'ignoreFirst' option by overwriting the type for 0.
				if ( !index && ignoreFirst ) {
					type = 0;
				}

				if ( !(i === high && ignoreLast)) {
					// Mark the 'type' of this point. 0 = plain, 1 = real value, 2 = step value.
					indexes[newPct.toFixed(5)] = [i, type];
				}

				// Update the percentage count.
				prevPct = newPct;
			}
		});

		return indexes;
	}

	function addMarking ( spread, filterFunc, formatter ) {

		var element = scope_Document.createElement('div');

		var valueSizeClasses = [
			options.cssClasses.valueNormal,
			options.cssClasses.valueLarge,
			options.cssClasses.valueSub
		];
		var markerSizeClasses = [
			options.cssClasses.markerNormal,
			options.cssClasses.markerLarge,
			options.cssClasses.markerSub
		];
		var valueOrientationClasses = [
			options.cssClasses.valueHorizontal,
			options.cssClasses.valueVertical
		];
		var markerOrientationClasses = [
			options.cssClasses.markerHorizontal,
			options.cssClasses.markerVertical
		];

		addClass(element, options.cssClasses.pips);
		addClass(element, options.ort === 0 ? options.cssClasses.pipsHorizontal : options.cssClasses.pipsVertical);

		function getClasses( type, source ){
			var a = source === options.cssClasses.value;
			var orientationClasses = a ? valueOrientationClasses : markerOrientationClasses;
			var sizeClasses = a ? valueSizeClasses : markerSizeClasses;

			return source + ' ' + orientationClasses[options.ort] + ' ' + sizeClasses[type];
		}

		function addSpread ( offset, values ){

			// Apply the filter function, if it is set.
			values[1] = (values[1] && filterFunc) ? filterFunc(values[0], values[1]) : values[1];

			// Add a marker for every point
			var node = addNodeTo(element, false);
				node.className = getClasses(values[1], options.cssClasses.marker);
				node.style[options.style] = offset + '%';

			// Values are only appended for points marked '1' or '2'.
			if ( values[1] ) {
				node = addNodeTo(element, false);
				node.className = getClasses(values[1], options.cssClasses.value);
				node.style[options.style] = offset + '%';
				node.innerText = formatter.to(values[0]);
			}
		}

		// Append all points.
		Object.keys(spread).forEach(function(a){
			addSpread(a, spread[a]);
		});

		return element;
	}

	function removePips ( ) {
		if ( scope_Pips ) {
			removeElement(scope_Pips);
			scope_Pips = null;
		}
	}

	function pips ( grid ) {

		// Fix #669
		removePips();

		var mode = grid.mode;
		var density = grid.density || 1;
		var filter = grid.filter || false;
		var values = grid.values || false;
		var stepped = grid.stepped || false;
		var group = getGroup( mode, values, stepped );
		var spread = generateSpread( density, mode, group );
		var format = grid.format || {
			to: Math.round
		};

		scope_Pips = scope_Target.appendChild(addMarking(
			spread,
			filter,
			format
		));

		return scope_Pips;
	}


	// Shorthand for base dimensions.
	function baseSize ( ) {
		var rect = scope_Base.getBoundingClientRect(), alt = 'offset' + ['Width', 'Height'][options.ort];
		return options.ort === 0 ? (rect.width||scope_Base[alt]) : (rect.height||scope_Base[alt]);
	}

	// Handler for attaching events trough a proxy.
	function attachEvent ( events, element, callback, data ) {

		// This function can be used to 'filter' events to the slider.
		// element is a node, not a nodeList

		var method = function ( e ){

			if ( scope_Target.hasAttribute('disabled') ) {
				return false;
			}

			// Stop if an active 'tap' transition is taking place.
			if ( hasClass(scope_Target, options.cssClasses.tap) ) {
				return false;
			}

			e = fixEvent(e, data.pageOffset, data.target || element);

			// Handle reject of multitouch
			if ( !e ) {
				return false;
			}

			// Ignore right or middle clicks on start #454
			if ( events === actions.start && e.buttons !== undefined && e.buttons > 1 ) {
				return false;
			}

			// Ignore right or middle clicks on start #454
			if ( data.hover && e.buttons ) {
				return false;
			}

			// 'supportsPassive' is only true if a browser also supports touch-action: none in CSS.
			// iOS safari does not, so it doesn't get to benefit from passive scrolling. iOS does support
			// touch-action: manipulation, but that allows panning, which breaks
			// sliders after zooming/on non-responsive pages.
			// See: https://bugs.webkit.org/show_bug.cgi?id=133112
			if ( !supportsPassive ) {
				e.preventDefault();
			}

			e.calcPoint = e.points[ options.ort ];

			// Call the event handler with the event [ and additional data ].
			callback ( e, data );
		};

		var methods = [];

		// Bind a closure on the target for every event type.
		events.split(' ').forEach(function( eventName ){
			element.addEventListener(eventName, method, supportsPassive ? { passive: true } : false);
			methods.push([eventName, method]);
		});

		return methods;
	}

	// Provide a clean event with standardized offset values.
	function fixEvent ( e, pageOffset, target ) {

		// Filter the event to register the type, which can be
		// touch, mouse or pointer. Offset changes need to be
		// made on an event specific basis.
		var touch = e.type.indexOf('touch') === 0;
		var mouse = e.type.indexOf('mouse') === 0;
		var pointer = e.type.indexOf('pointer') === 0;

		var x;
		var y;

		// IE10 implemented pointer events with a prefix;
		if ( e.type.indexOf('MSPointer') === 0 ) {
			pointer = true;
		}


		// In the event that multitouch is activated, the only thing one handle should be concerned
		// about is the touches that originated on top of it.
		if ( touch && options.multitouch ) {
			// Returns true if a touch originated on the target.
			var isTouchOnTarget = function (touch) {
				return touch.target === target || target.contains(touch.target);
			};
			// In the case of touchstart events, we need to make sure there is still no more than one
			// touch on the target so we look amongst all touches.
			if (e.type === 'touchstart') {
				var targetTouches = Array.prototype.filter.call(e.touches, isTouchOnTarget);
				// Do not support more than one touch per handle.
				if ( targetTouches.length > 1 ) {
					return false;
				}
				x = targetTouches[0].pageX;
				y = targetTouches[0].pageY;
			} else {
			// In the other cases, find on changedTouches is enough.
				var targetTouch = Array.prototype.find.call(e.changedTouches, isTouchOnTarget);
				// Cancel if the target touch has not moved.
				if ( !targetTouch ) {
					return false;
				}
				x = targetTouch.pageX;
				y = targetTouch.pageY;
			}
		} else if ( touch ) {
			// Fix bug when user touches with two or more fingers on mobile devices.
			// It's useful when you have two or more sliders on one page,
			// that can be touched simultaneously.
			// #649, #663, #668
			if ( e.touches.length > 1 ) {
				return false;
			}

			// noUiSlider supports one movement at a time,
			// so we can select the first 'changedTouch'.
			x = e.changedTouches[0].pageX;
			y = e.changedTouches[0].pageY;
		}

		pageOffset = pageOffset || getPageOffset(scope_Document);

		if ( mouse || pointer ) {
			x = e.clientX + pageOffset.x;
			y = e.clientY + pageOffset.y;
		}

		e.pageOffset = pageOffset;
		e.points = [x, y];
		e.cursor = mouse || pointer; // Fix #435

		return e;
	}

	// Translate a coordinate in the document to a percentage on the slider
	function calcPointToPercentage ( calcPoint ) {
		var location = calcPoint - offset(scope_Base, options.ort);
		var proposal = ( location * 100 ) / baseSize();
		return options.dir ? 100 - proposal : proposal;
	}

	// Find handle closest to a certain percentage on the slider
	function getClosestHandle ( proposal ) {

		var closest = 100;
		var handleNumber = false;

		scope_Handles.forEach(function(handle, index){

			// Disabled handles are ignored
			if ( handle.hasAttribute('disabled') ) {
				return;
			}

			var pos = Math.abs(scope_Locations[index] - proposal);

			if ( pos < closest ) {
				handleNumber = index;
				closest = pos;
			}
		});

		return handleNumber;
	}

	// Moves handle(s) by a percentage
	// (bool, % to move, [% where handle started, ...], [index in scope_Handles, ...])
	function moveHandles ( upward, proposal, locations, handleNumbers ) {

		var proposals = locations.slice();

		var b = [!upward, upward];
		var f = [upward, !upward];

		// Copy handleNumbers so we don't change the dataset
		handleNumbers = handleNumbers.slice();

		// Check to see which handle is 'leading'.
		// If that one can't move the second can't either.
		if ( upward ) {
			handleNumbers.reverse();
		}

		// Step 1: get the maximum percentage that any of the handles can move
		if ( handleNumbers.length > 1 ) {

			handleNumbers.forEach(function(handleNumber, o) {

				var to = checkHandlePosition(proposals, handleNumber, proposals[handleNumber] + proposal, b[o], f[o], false);

				// Stop if one of the handles can't move.
				if ( to === false ) {
					proposal = 0;
				} else {
					proposal = to - proposals[handleNumber];
					proposals[handleNumber] = to;
				}
			});
		}

		// If using one handle, check backward AND forward
		else {
			b = f = [true];
		}

		var state = false;

		// Step 2: Try to set the handles with the found percentage
		handleNumbers.forEach(function(handleNumber, o) {
			state = setHandle(handleNumber, locations[handleNumber] + proposal, b[o], f[o]) || state;
		});

		// Step 3: If a handle moved, fire events
		if ( state ) {
			handleNumbers.forEach(function(handleNumber){
				fireEvent('update', handleNumber);
				fireEvent('slide', handleNumber);
			});
		}
	}

	// External event handling
	function fireEvent ( eventName, handleNumber, tap ) {

		Object.keys(scope_Events).forEach(function( targetEvent ) {

			var eventType = targetEvent.split('.')[0];

			if ( eventName === eventType ) {
				scope_Events[targetEvent].forEach(function( callback ) {

					callback.call(
						// Use the slider public API as the scope ('this')
						scope_Self,
						// Return values as array, so arg_1[arg_2] is always valid.
						scope_Values.map(options.format.to),
						// Handle index, 0 or 1
						handleNumber,
						// Unformatted slider values
						scope_Values.slice(),
						// Event is fired by tap, true or false
						tap || false,
						// Left offset of the handle, in relation to the slider
						scope_Locations.slice()
					);
				});
			}
		});
	}


	// Fire 'end' when a mouse or pen leaves the document.
	function documentLeave ( event, data ) {
		if ( event.type === "mouseout" && event.target.nodeName === "HTML" && event.relatedTarget === null ){
			eventEnd (event, data);
		}
	}

	// Handle movement on document for handle and range drag.
	function eventMove ( event, data ) {

		// Fix #498
		// Check value of .buttons in 'start' to work around a bug in IE10 mobile (data.buttonsProperty).
		// https://connect.microsoft.com/IE/feedback/details/927005/mobile-ie10-windows-phone-buttons-property-of-pointermove-event-always-zero
		// IE9 has .buttons and .which zero on mousemove.
		// Firefox breaks the spec MDN defines.
		if ( navigator.appVersion.indexOf("MSIE 9") === -1 && event.buttons === 0 && data.buttonsProperty !== 0 ) {
			return eventEnd(event, data);
		}

		// Check if we are moving up or down
		var movement = (options.dir ? -1 : 1) * (event.calcPoint - data.startCalcPoint);

		// Convert the movement into a percentage of the slider width/height
		var proposal = (movement * 100) / data.baseSize;

		moveHandles(movement > 0, proposal, data.locations, data.handleNumbers);
	}

	// Unbind move events on document, call callbacks.
	function eventEnd ( event, data ) {

		// The handle is no longer active, so remove the class.
		if ( data.handle ) {
			removeClass(data.handle, options.cssClasses.active);
			scope_ActiveHandlesCount -= 1;
		}

		// Unbind the move and end events, which are added on 'start'.
		data.listeners.forEach(function( c ) {
			scope_DocumentElement.removeEventListener(c[0], c[1]);
		});

		if ( scope_ActiveHandlesCount === 0 ) {
			// Remove dragging class.
			removeClass(scope_Target, options.cssClasses.drag);
			setZindex();

			// Remove cursor styles and text-selection events bound to the body.
			if ( event.cursor ) {
				scope_Body.style.cursor = '';
				scope_Body.removeEventListener('selectstart', preventDefault);
			}
		}

		data.handleNumbers.forEach(function(handleNumber){
			fireEvent('change', handleNumber);
			fireEvent('set', handleNumber);
			fireEvent('end', handleNumber);
		});
	}

	// Bind move events on document.
	function eventStart ( event, data ) {

		var handle;
		if ( data.handleNumbers.length === 1 ) {

			var handleOrigin = scope_Handles[data.handleNumbers[0]];

			// Ignore 'disabled' handles
			if ( handleOrigin.hasAttribute('disabled') ) {
				return false;
			}

			handle = handleOrigin.children[0];
			scope_ActiveHandlesCount += 1;

			// Mark the handle as 'active' so it can be styled.
			addClass(handle, options.cssClasses.active);
		}

		// A drag should never propagate up to the 'tap' event.
		event.stopPropagation();

		// Record the event listeners.
		var listeners = [];

		// Attach the move and end events.
		var moveEvent = attachEvent(actions.move, scope_DocumentElement, eventMove, {
			// The event target has changed so we need to propagate the original one so that we keep
			// relying on it to extract target touches.
			target: event.target,
			handle: handle,
			listeners: listeners,
			startCalcPoint: event.calcPoint,
			baseSize: baseSize(),
			pageOffset: event.pageOffset,
			handleNumbers: data.handleNumbers,
			buttonsProperty: event.buttons,
			locations: scope_Locations.slice()
		});

		var endEvent = attachEvent(actions.end, scope_DocumentElement, eventEnd, {
			target: event.target,
			handle: handle,
			listeners: listeners,
			handleNumbers: data.handleNumbers
		});

		var outEvent = attachEvent("mouseout", scope_DocumentElement, documentLeave, {
			target: event.target,
			handle: handle,
			listeners: listeners,
			handleNumbers: data.handleNumbers
		});

		// We want to make sure we pushed the listeners in the listener list rather than creating
		// a new one as it has already been passed to the event handlers.
		listeners.push.apply(listeners, moveEvent.concat(endEvent, outEvent));

		// Text selection isn't an issue on touch devices,
		// so adding cursor styles can be skipped.
		if ( event.cursor ) {

			// Prevent the 'I' cursor and extend the range-drag cursor.
			scope_Body.style.cursor = getComputedStyle(event.target).cursor;

			// Mark the target with a dragging state.
			if ( scope_Handles.length > 1 ) {
				addClass(scope_Target, options.cssClasses.drag);
			}

			// Prevent text selection when dragging the handles.
			// In noUiSlider <= 9.2.0, this was handled by calling preventDefault on mouse/touch start/move,
			// which is scroll blocking. The selectstart event is supported by FireFox starting from version 52,
			// meaning the only holdout is iOS Safari. This doesn't matter: text selection isn't triggered there.
			// The 'cursor' flag is false.
			// See: http://caniuse.com/#search=selectstart
			scope_Body.addEventListener('selectstart', preventDefault, false);
		}

		data.handleNumbers.forEach(function(handleNumber){
			fireEvent('start', handleNumber);
		});
	}

	// Move closest handle to tapped location.
	function eventTap ( event ) {

		// The tap event shouldn't propagate up
		event.stopPropagation();

		var proposal = calcPointToPercentage(event.calcPoint);
		var handleNumber = getClosestHandle(proposal);

		// Tackle the case that all handles are 'disabled'.
		if ( handleNumber === false ) {
			return false;
		}

		// Flag the slider as it is now in a transitional state.
		// Transition takes a configurable amount of ms (default 300). Re-enable the slider after that.
		if ( !options.events.snap ) {
			addClassFor(scope_Target, options.cssClasses.tap, options.animationDuration);
		}

		setHandle(handleNumber, proposal, true, true);

		setZindex();

		fireEvent('slide', handleNumber, true);
		fireEvent('update', handleNumber, true);
		fireEvent('change', handleNumber, true);
		fireEvent('set', handleNumber, true);

		if ( options.events.snap ) {
			eventStart(event, { handleNumbers: [handleNumber] });
		}
	}

	// Fires a 'hover' event for a hovered mouse/pen position.
	function eventHover ( event ) {

		var proposal = calcPointToPercentage(event.calcPoint);

		var to = scope_Spectrum.getStep(proposal);
		var value = scope_Spectrum.fromStepping(to);

		Object.keys(scope_Events).forEach(function( targetEvent ) {
			if ( 'hover' === targetEvent.split('.')[0] ) {
				scope_Events[targetEvent].forEach(function( callback ) {
					callback.call( scope_Self, value );
				});
			}
		});
	}

	// Attach events to several slider parts.
	function bindSliderEvents ( behaviour ) {

		// Attach the standard drag event to the handles.
		if ( !behaviour.fixed ) {

			scope_Handles.forEach(function( handle, index ){

				// These events are only bound to the visual handle
				// element, not the 'real' origin element.
				attachEvent ( actions.start, handle.children[0], eventStart, {
					handleNumbers: [index]
				});
			});
		}

		// Attach the tap event to the slider base.
		if ( behaviour.tap ) {
			attachEvent (actions.start, scope_Base, eventTap, {});
		}

		// Fire hover events
		if ( behaviour.hover ) {
			attachEvent (actions.move, scope_Base, eventHover, { hover: true });
		}

		// Make the range draggable.
		if ( behaviour.drag ){

			scope_Connects.forEach(function( connect, index ){

				if ( connect === false || index === 0 || index === scope_Connects.length - 1 ) {
					return;
				}

				var handleBefore = scope_Handles[index - 1];
				var handleAfter = scope_Handles[index];
				var eventHolders = [connect];

				addClass(connect, options.cssClasses.draggable);

				// When the range is fixed, the entire range can
				// be dragged by the handles. The handle in the first
				// origin will propagate the start event upward,
				// but it needs to be bound manually on the other.
				if ( behaviour.fixed ) {
					eventHolders.push(handleBefore.children[0]);
					eventHolders.push(handleAfter.children[0]);
				}

				eventHolders.forEach(function( eventHolder ) {
					attachEvent ( actions.start, eventHolder, eventStart, {
						handles: [handleBefore, handleAfter],
						handleNumbers: [index - 1, index]
					});
				});
			});
		}
	}


	// Split out the handle positioning logic so the Move event can use it, too
	function checkHandlePosition ( reference, handleNumber, to, lookBackward, lookForward, getValue ) {

		// For sliders with multiple handles, limit movement to the other handle.
		// Apply the margin option by adding it to the handle positions.
		if ( scope_Handles.length > 1 ) {

			if ( lookBackward && handleNumber > 0 ) {
				to = Math.max(to, reference[handleNumber - 1] + options.margin);
			}

			if ( lookForward && handleNumber < scope_Handles.length - 1 ) {
				to = Math.min(to, reference[handleNumber + 1] - options.margin);
			}
		}

		// The limit option has the opposite effect, limiting handles to a
		// maximum distance from another. Limit must be > 0, as otherwise
		// handles would be unmoveable.
		if ( scope_Handles.length > 1 && options.limit ) {

			if ( lookBackward && handleNumber > 0 ) {
				to = Math.min(to, reference[handleNumber - 1] + options.limit);
			}

			if ( lookForward && handleNumber < scope_Handles.length - 1 ) {
				to = Math.max(to, reference[handleNumber + 1] - options.limit);
			}
		}

		// The padding option keeps the handles a certain distance from the
		// edges of the slider. Padding must be > 0.
		if ( options.padding ) {

			if ( handleNumber === 0 ) {
				to = Math.max(to, options.padding);
			}

			if ( handleNumber === scope_Handles.length - 1 ) {
				to = Math.min(to, 100 - options.padding);
			}
		}

		to = scope_Spectrum.getStep(to);

		// Limit percentage to the 0 - 100 range
		to = limit(to);

		// Return false if handle can't move
		if ( to === reference[handleNumber] && !getValue ) {
			return false;
		}

		return to;
	}

	function toPct ( pct ) {
		return pct + '%';
	}

	// Updates scope_Locations and scope_Values, updates visual state
	function updateHandlePosition ( handleNumber, to ) {

		// Update locations.
		scope_Locations[handleNumber] = to;

		// Convert the value to the slider stepping/range.
		scope_Values[handleNumber] = scope_Spectrum.fromStepping(to);

		// Called synchronously or on the next animationFrame
		var stateUpdate = function() {
			scope_Handles[handleNumber].style[options.style] = toPct(to);
			updateConnect(handleNumber);
			updateConnect(handleNumber + 1);
		};

		// Set the handle to the new position.
		// Use requestAnimationFrame for efficient painting.
		// No significant effect in Chrome, Edge sees dramatic performace improvements.
		// Option to disable is useful for unit tests, and single-step debugging.
		if ( window.requestAnimationFrame && options.useRequestAnimationFrame ) {
			window.requestAnimationFrame(stateUpdate);
		} else {
			stateUpdate();
		}
	}

	function setZindex ( ) {

		scope_HandleNumbers.forEach(function(handleNumber){
			// Handles before the slider middle are stacked later = higher,
			// Handles after the middle later is lower
			// [[7] [8] .......... | .......... [5] [4]
			var dir = (scope_Locations[handleNumber] > 50 ? -1 : 1);
			var zIndex = 3 + (scope_Handles.length + (dir * handleNumber));
			scope_Handles[handleNumber].childNodes[0].style.zIndex = zIndex;
		});
	}

	// Test suggested values and apply margin, step.
	function setHandle ( handleNumber, to, lookBackward, lookForward ) {

		to = checkHandlePosition(scope_Locations, handleNumber, to, lookBackward, lookForward, false);

		if ( to === false ) {
			return false;
		}

		updateHandlePosition(handleNumber, to);

		return true;
	}

	// Updates style attribute for connect nodes
	function updateConnect ( index ) {

		// Skip connects set to false
		if ( !scope_Connects[index] ) {
			return;
		}

		var l = 0;
		var h = 100;

		if ( index !== 0 ) {
			l = scope_Locations[index - 1];
		}

		if ( index !== scope_Connects.length - 1 ) {
			h = scope_Locations[index];
		}

		scope_Connects[index].style[options.style] = toPct(l);
		scope_Connects[index].style[options.styleOposite] = toPct(100 - h);
	}

	// ...
	function setValue ( to, handleNumber ) {

		// Setting with null indicates an 'ignore'.
		// Inputting 'false' is invalid.
		if ( to === null || to === false ) {
			return;
		}

		// If a formatted number was passed, attemt to decode it.
		if ( typeof to === 'number' ) {
			to = String(to);
		}

		to = options.format.from(to);

		// Request an update for all links if the value was invalid.
		// Do so too if setting the handle fails.
		if ( to !== false && !isNaN(to) ) {
			setHandle(handleNumber, scope_Spectrum.toStepping(to), false, false);
		}
	}

	// Set the slider value.
	function valueSet ( input, fireSetEvent ) {

		var values = asArray(input);
		var isInit = scope_Locations[0] === undefined;

		// Event fires by default
		fireSetEvent = (fireSetEvent === undefined ? true : !!fireSetEvent);

		values.forEach(setValue);

		// Animation is optional.
		// Make sure the initial values were set before using animated placement.
		if ( options.animate && !isInit ) {
			addClassFor(scope_Target, options.cssClasses.tap, options.animationDuration);
		}

		// Now that all base values are set, apply constraints
		scope_HandleNumbers.forEach(function(handleNumber){
			setHandle(handleNumber, scope_Locations[handleNumber], true, false);
		});

		setZindex();

		scope_HandleNumbers.forEach(function(handleNumber){

			fireEvent('update', handleNumber);

			// Fire the event only for handles that received a new value, as per #579
			if ( values[handleNumber] !== null && fireSetEvent ) {
				fireEvent('set', handleNumber);
			}
		});
	}

	// Reset slider to initial values
	function valueReset ( fireSetEvent ) {
		valueSet(options.start, fireSetEvent);
	}

	// Get the slider value.
	function valueGet ( ) {

		var values = scope_Values.map(options.format.to);

		// If only one handle is used, return a single value.
		if ( values.length === 1 ){
			return values[0];
		}

		return values;
	}

	// Removes classes from the root and empties it.
	function destroy ( ) {

		for ( var key in options.cssClasses ) {
			if ( !options.cssClasses.hasOwnProperty(key) ) { continue; }
			removeClass(scope_Target, options.cssClasses[key]);
		}

		while (scope_Target.firstChild) {
			scope_Target.removeChild(scope_Target.firstChild);
		}

		delete scope_Target.noUiSlider;
	}

	// Get the current step size for the slider.
	function getCurrentStep ( ) {

		// Check all locations, map them to their stepping point.
		// Get the step point, then find it in the input list.
		return scope_Locations.map(function( location, index ){

			var nearbySteps = scope_Spectrum.getNearbySteps( location );
			var value = scope_Values[index];
			var increment = nearbySteps.thisStep.step;
			var decrement = null;

			// If the next value in this step moves into the next step,
			// the increment is the start of the next step - the current value
			if ( increment !== false ) {
				if ( value + increment > nearbySteps.stepAfter.startValue ) {
					increment = nearbySteps.stepAfter.startValue - value;
				}
			}


			// If the value is beyond the starting point
			if ( value > nearbySteps.thisStep.startValue ) {
				decrement = nearbySteps.thisStep.step;
			}

			else if ( nearbySteps.stepBefore.step === false ) {
				decrement = false;
			}

			// If a handle is at the start of a step, it always steps back into the previous step first
			else {
				decrement = value - nearbySteps.stepBefore.highestStep;
			}


			// Now, if at the slider edges, there is not in/decrement
			if ( location === 100 ) {
				increment = null;
			}

			else if ( location === 0 ) {
				decrement = null;
			}

			// As per #391, the comparison for the decrement step can have some rounding issues.
			var stepDecimals = scope_Spectrum.countStepDecimals();

			// Round per #391
			if ( increment !== null && increment !== false ) {
				increment = Number(increment.toFixed(stepDecimals));
			}

			if ( decrement !== null && decrement !== false ) {
				decrement = Number(decrement.toFixed(stepDecimals));
			}

			return [decrement, increment];
		});
	}

	// Attach an event to this slider, possibly including a namespace
	function bindEvent ( namespacedEvent, callback ) {
		scope_Events[namespacedEvent] = scope_Events[namespacedEvent] || [];
		scope_Events[namespacedEvent].push(callback);

		// If the event bound is 'update,' fire it immediately for all handles.
		if ( namespacedEvent.split('.')[0] === 'update' ) {
			scope_Handles.forEach(function(a, index){
				fireEvent('update', index);
			});
		}
	}

	// Undo attachment of event
	function removeEvent ( namespacedEvent ) {

		var event = namespacedEvent && namespacedEvent.split('.')[0];
		var namespace = event && namespacedEvent.substring(event.length);

		Object.keys(scope_Events).forEach(function( bind ){

			var tEvent = bind.split('.')[0],
				tNamespace = bind.substring(tEvent.length);

			if ( (!event || event === tEvent) && (!namespace || namespace === tNamespace) ) {
				delete scope_Events[bind];
			}
		});
	}

	// Updateable: margin, limit, padding, step, range, animate, snap
	function updateOptions ( optionsToUpdate, fireSetEvent ) {

		// Spectrum is created using the range, snap, direction and step options.
		// 'snap' and 'step' can be updated.
		// If 'snap' and 'step' are not passed, they should remain unchanged.
		var v = valueGet();

		var updateAble = ['margin', 'limit', 'padding', 'range', 'animate', 'snap', 'step', 'format'];

		// Only change options that we're actually passed to update.
		updateAble.forEach(function(name){
			if ( optionsToUpdate[name] !== undefined ) {
				originalOptions[name] = optionsToUpdate[name];
			}
		});

		var newOptions = testOptions(originalOptions);

		// Load new options into the slider state
		updateAble.forEach(function(name){
			if ( optionsToUpdate[name] !== undefined ) {
				options[name] = newOptions[name];
			}
		});

		scope_Spectrum = newOptions.spectrum;

		// Limit, margin and padding depend on the spectrum but are stored outside of it. (#677)
		options.margin = newOptions.margin;
		options.limit = newOptions.limit;
		options.padding = newOptions.padding;

		// Update pips, removes existing.
		if ( options.pips ) {
			pips(options.pips);
		}

		// Invalidate the current positioning so valueSet forces an update.
		scope_Locations = [];
		valueSet(optionsToUpdate.start || v, fireSetEvent);
	}

	// Throw an error if the slider was already initialized.
	if ( scope_Target.noUiSlider ) {
		throw new Error("noUiSlider (" + VERSION + "): Slider was already initialized.");
	}

	// Create the base element, initialise HTML and set classes.
	// Add handles and connect elements.
	addSlider(scope_Target);
	addElements(options.connect, scope_Base);

	scope_Self = {
		destroy: destroy,
		steps: getCurrentStep,
		on: bindEvent,
		off: removeEvent,
		get: valueGet,
		set: valueSet,
		reset: valueReset,
		// Exposed for unit testing, don't use this in your application.
		__moveHandles: function(a, b, c) { moveHandles(a, b, scope_Locations, c); },
		options: originalOptions, // Issue #600, #678
		updateOptions: updateOptions,
		target: scope_Target, // Issue #597
		removePips: removePips,
		pips: pips // Issue #594
	};

	// Attach user events.
	bindSliderEvents(options.events);

	// Use the public value method to set the start values.
	valueSet(options.start);

	if ( options.pips ) {
		pips(options.pips);
	}

	if ( options.tooltips ) {
		tooltips();
	}

	aria();

	return scope_Self;

}


	// Run the standard initializer
	function initialize ( target, originalOptions ) {

		if ( !target || !target.nodeName ) {
			throw new Error("noUiSlider (" + VERSION + "): create requires a single element, got: " + target);
		}

		// Test the options and create the slider environment;
		var options = testOptions( originalOptions, target );
		var api = closure( target, options, originalOptions );

		target.noUiSlider = api;

		return api;
	}

	// Use an object instead of a function for future expansibility;
	return {
		version: VERSION,
		create: initialize
	};

}));
/**
 * @fileoverview
 * - Using the 'QRCode for Javascript library'
 * - Fixed dataset of 'QRCode for Javascript library' for support full-spec.
 * - this library has no dependencies.
 * 
 * @author davidshimjs
 * @see <a href="http://www.d-project.com/" target="_blank">http://www.d-project.com/</a>
 * @see <a href="http://jeromeetienne.github.com/jquery-qrcode/" target="_blank">http://jeromeetienne.github.com/jquery-qrcode/</a>
 */
var QRCode;

(function () {
	//---------------------------------------------------------------------
	// QRCode for JavaScript
	//
	// Copyright (c) 2009 Kazuhiko Arase
	//
	// URL: http://www.d-project.com/
	//
	// Licensed under the MIT license:
	//   http://www.opensource.org/licenses/mit-license.php
	//
	// The word "QR Code" is registered trademark of 
	// DENSO WAVE INCORPORATED
	//   http://www.denso-wave.com/qrcode/faqpatent-e.html
	//
	//---------------------------------------------------------------------
	function QR8bitByte(data) {
		this.mode = QRMode.MODE_8BIT_BYTE;
		this.data = data;
		this.parsedData = [];

		// Added to support UTF-8 Characters
		for (var i = 0, l = this.data.length; i < l; i++) {
			var byteArray = [];
			var code = this.data.charCodeAt(i);

			if (code > 0x10000) {
				byteArray[0] = 0xF0 | ((code & 0x1C0000) >>> 18);
				byteArray[1] = 0x80 | ((code & 0x3F000) >>> 12);
				byteArray[2] = 0x80 | ((code & 0xFC0) >>> 6);
				byteArray[3] = 0x80 | (code & 0x3F);
			} else if (code > 0x800) {
				byteArray[0] = 0xE0 | ((code & 0xF000) >>> 12);
				byteArray[1] = 0x80 | ((code & 0xFC0) >>> 6);
				byteArray[2] = 0x80 | (code & 0x3F);
			} else if (code > 0x80) {
				byteArray[0] = 0xC0 | ((code & 0x7C0) >>> 6);
				byteArray[1] = 0x80 | (code & 0x3F);
			} else {
				byteArray[0] = code;
			}

			this.parsedData.push(byteArray);
		}

		this.parsedData = Array.prototype.concat.apply([], this.parsedData);

		if (this.parsedData.length != this.data.length) {
			this.parsedData.unshift(191);
			this.parsedData.unshift(187);
			this.parsedData.unshift(239);
		}
	}

	QR8bitByte.prototype = {
		getLength: function (buffer) {
			return this.parsedData.length;
		},
		write: function (buffer) {
			for (var i = 0, l = this.parsedData.length; i < l; i++) {
				buffer.put(this.parsedData[i], 8);
			}
		}
	};

	function QRCodeModel(typeNumber, errorCorrectLevel) {
		this.typeNumber = typeNumber;
		this.errorCorrectLevel = errorCorrectLevel;
		this.modules = null;
		this.moduleCount = 0;
		this.dataCache = null;
		this.dataList = [];
	}

	QRCodeModel.prototype={addData:function(data){var newData=new QR8bitByte(data);this.dataList.push(newData);this.dataCache=null;},isDark:function(row,col){if(row<0||this.moduleCount<=row||col<0||this.moduleCount<=col){throw new Error(row+","+col);}
	return this.modules[row][col];},getModuleCount:function(){return this.moduleCount;},make:function(){this.makeImpl(false,this.getBestMaskPattern());},makeImpl:function(test,maskPattern){this.moduleCount=this.typeNumber*4+17;this.modules=new Array(this.moduleCount);for(var row=0;row<this.moduleCount;row++){this.modules[row]=new Array(this.moduleCount);for(var col=0;col<this.moduleCount;col++){this.modules[row][col]=null;}}
	this.setupPositionProbePattern(0,0);this.setupPositionProbePattern(this.moduleCount-7,0);this.setupPositionProbePattern(0,this.moduleCount-7);this.setupPositionAdjustPattern();this.setupTimingPattern();this.setupTypeInfo(test,maskPattern);if(this.typeNumber>=7){this.setupTypeNumber(test);}
	if(this.dataCache==null){this.dataCache=QRCodeModel.createData(this.typeNumber,this.errorCorrectLevel,this.dataList);}
	this.mapData(this.dataCache,maskPattern);},setupPositionProbePattern:function(row,col){for(var r=-1;r<=7;r++){if(row+r<=-1||this.moduleCount<=row+r)continue;for(var c=-1;c<=7;c++){if(col+c<=-1||this.moduleCount<=col+c)continue;if((0<=r&&r<=6&&(c==0||c==6))||(0<=c&&c<=6&&(r==0||r==6))||(2<=r&&r<=4&&2<=c&&c<=4)){this.modules[row+r][col+c]=true;}else{this.modules[row+r][col+c]=false;}}}},getBestMaskPattern:function(){var minLostPoint=0;var pattern=0;for(var i=0;i<8;i++){this.makeImpl(true,i);var lostPoint=QRUtil.getLostPoint(this);if(i==0||minLostPoint>lostPoint){minLostPoint=lostPoint;pattern=i;}}
	return pattern;},createMovieClip:function(target_mc,instance_name,depth){var qr_mc=target_mc.createEmptyMovieClip(instance_name,depth);var cs=1;this.make();for(var row=0;row<this.modules.length;row++){var y=row*cs;for(var col=0;col<this.modules[row].length;col++){var x=col*cs;var dark=this.modules[row][col];if(dark){qr_mc.beginFill(0,100);qr_mc.moveTo(x,y);qr_mc.lineTo(x+cs,y);qr_mc.lineTo(x+cs,y+cs);qr_mc.lineTo(x,y+cs);qr_mc.endFill();}}}
	return qr_mc;},setupTimingPattern:function(){for(var r=8;r<this.moduleCount-8;r++){if(this.modules[r][6]!=null){continue;}
	this.modules[r][6]=(r%2==0);}
	for(var c=8;c<this.moduleCount-8;c++){if(this.modules[6][c]!=null){continue;}
	this.modules[6][c]=(c%2==0);}},setupPositionAdjustPattern:function(){var pos=QRUtil.getPatternPosition(this.typeNumber);for(var i=0;i<pos.length;i++){for(var j=0;j<pos.length;j++){var row=pos[i];var col=pos[j];if(this.modules[row][col]!=null){continue;}
	for(var r=-2;r<=2;r++){for(var c=-2;c<=2;c++){if(r==-2||r==2||c==-2||c==2||(r==0&&c==0)){this.modules[row+r][col+c]=true;}else{this.modules[row+r][col+c]=false;}}}}}},setupTypeNumber:function(test){var bits=QRUtil.getBCHTypeNumber(this.typeNumber);for(var i=0;i<18;i++){var mod=(!test&&((bits>>i)&1)==1);this.modules[Math.floor(i/3)][i%3+this.moduleCount-8-3]=mod;}
	for(var i=0;i<18;i++){var mod=(!test&&((bits>>i)&1)==1);this.modules[i%3+this.moduleCount-8-3][Math.floor(i/3)]=mod;}},setupTypeInfo:function(test,maskPattern){var data=(this.errorCorrectLevel<<3)|maskPattern;var bits=QRUtil.getBCHTypeInfo(data);for(var i=0;i<15;i++){var mod=(!test&&((bits>>i)&1)==1);if(i<6){this.modules[i][8]=mod;}else if(i<8){this.modules[i+1][8]=mod;}else{this.modules[this.moduleCount-15+i][8]=mod;}}
	for(var i=0;i<15;i++){var mod=(!test&&((bits>>i)&1)==1);if(i<8){this.modules[8][this.moduleCount-i-1]=mod;}else if(i<9){this.modules[8][15-i-1+1]=mod;}else{this.modules[8][15-i-1]=mod;}}
	this.modules[this.moduleCount-8][8]=(!test);},mapData:function(data,maskPattern){var inc=-1;var row=this.moduleCount-1;var bitIndex=7;var byteIndex=0;for(var col=this.moduleCount-1;col>0;col-=2){if(col==6)col--;while(true){for(var c=0;c<2;c++){if(this.modules[row][col-c]==null){var dark=false;if(byteIndex<data.length){dark=(((data[byteIndex]>>>bitIndex)&1)==1);}
	var mask=QRUtil.getMask(maskPattern,row,col-c);if(mask){dark=!dark;}
	this.modules[row][col-c]=dark;bitIndex--;if(bitIndex==-1){byteIndex++;bitIndex=7;}}}
	row+=inc;if(row<0||this.moduleCount<=row){row-=inc;inc=-inc;break;}}}}};QRCodeModel.PAD0=0xEC;QRCodeModel.PAD1=0x11;QRCodeModel.createData=function(typeNumber,errorCorrectLevel,dataList){var rsBlocks=QRRSBlock.getRSBlocks(typeNumber,errorCorrectLevel);var buffer=new QRBitBuffer();for(var i=0;i<dataList.length;i++){var data=dataList[i];buffer.put(data.mode,4);buffer.put(data.getLength(),QRUtil.getLengthInBits(data.mode,typeNumber));data.write(buffer);}
	var totalDataCount=0;for(var i=0;i<rsBlocks.length;i++){totalDataCount+=rsBlocks[i].dataCount;}
	if(buffer.getLengthInBits()>totalDataCount*8){throw new Error("code length overflow. ("
	+buffer.getLengthInBits()
	+">"
	+totalDataCount*8
	+")");}
	if(buffer.getLengthInBits()+4<=totalDataCount*8){buffer.put(0,4);}
	while(buffer.getLengthInBits()%8!=0){buffer.putBit(false);}
	while(true){if(buffer.getLengthInBits()>=totalDataCount*8){break;}
	buffer.put(QRCodeModel.PAD0,8);if(buffer.getLengthInBits()>=totalDataCount*8){break;}
	buffer.put(QRCodeModel.PAD1,8);}
	return QRCodeModel.createBytes(buffer,rsBlocks);};QRCodeModel.createBytes=function(buffer,rsBlocks){var offset=0;var maxDcCount=0;var maxEcCount=0;var dcdata=new Array(rsBlocks.length);var ecdata=new Array(rsBlocks.length);for(var r=0;r<rsBlocks.length;r++){var dcCount=rsBlocks[r].dataCount;var ecCount=rsBlocks[r].totalCount-dcCount;maxDcCount=Math.max(maxDcCount,dcCount);maxEcCount=Math.max(maxEcCount,ecCount);dcdata[r]=new Array(dcCount);for(var i=0;i<dcdata[r].length;i++){dcdata[r][i]=0xff&buffer.buffer[i+offset];}
	offset+=dcCount;var rsPoly=QRUtil.getErrorCorrectPolynomial(ecCount);var rawPoly=new QRPolynomial(dcdata[r],rsPoly.getLength()-1);var modPoly=rawPoly.mod(rsPoly);ecdata[r]=new Array(rsPoly.getLength()-1);for(var i=0;i<ecdata[r].length;i++){var modIndex=i+modPoly.getLength()-ecdata[r].length;ecdata[r][i]=(modIndex>=0)?modPoly.get(modIndex):0;}}
	var totalCodeCount=0;for(var i=0;i<rsBlocks.length;i++){totalCodeCount+=rsBlocks[i].totalCount;}
	var data=new Array(totalCodeCount);var index=0;for(var i=0;i<maxDcCount;i++){for(var r=0;r<rsBlocks.length;r++){if(i<dcdata[r].length){data[index++]=dcdata[r][i];}}}
	for(var i=0;i<maxEcCount;i++){for(var r=0;r<rsBlocks.length;r++){if(i<ecdata[r].length){data[index++]=ecdata[r][i];}}}
	return data;};var QRMode={MODE_NUMBER:1<<0,MODE_ALPHA_NUM:1<<1,MODE_8BIT_BYTE:1<<2,MODE_KANJI:1<<3};var QRErrorCorrectLevel={L:1,M:0,Q:3,H:2};var QRMaskPattern={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};var QRUtil={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:(1<<10)|(1<<8)|(1<<5)|(1<<4)|(1<<2)|(1<<1)|(1<<0),G18:(1<<12)|(1<<11)|(1<<10)|(1<<9)|(1<<8)|(1<<5)|(1<<2)|(1<<0),G15_MASK:(1<<14)|(1<<12)|(1<<10)|(1<<4)|(1<<1),getBCHTypeInfo:function(data){var d=data<<10;while(QRUtil.getBCHDigit(d)-QRUtil.getBCHDigit(QRUtil.G15)>=0){d^=(QRUtil.G15<<(QRUtil.getBCHDigit(d)-QRUtil.getBCHDigit(QRUtil.G15)));}
	return((data<<10)|d)^QRUtil.G15_MASK;},getBCHTypeNumber:function(data){var d=data<<12;while(QRUtil.getBCHDigit(d)-QRUtil.getBCHDigit(QRUtil.G18)>=0){d^=(QRUtil.G18<<(QRUtil.getBCHDigit(d)-QRUtil.getBCHDigit(QRUtil.G18)));}
	return(data<<12)|d;},getBCHDigit:function(data){var digit=0;while(data!=0){digit++;data>>>=1;}
	return digit;},getPatternPosition:function(typeNumber){return QRUtil.PATTERN_POSITION_TABLE[typeNumber-1];},getMask:function(maskPattern,i,j){switch(maskPattern){case QRMaskPattern.PATTERN000:return(i+j)%2==0;case QRMaskPattern.PATTERN001:return i%2==0;case QRMaskPattern.PATTERN010:return j%3==0;case QRMaskPattern.PATTERN011:return(i+j)%3==0;case QRMaskPattern.PATTERN100:return(Math.floor(i/2)+Math.floor(j/3))%2==0;case QRMaskPattern.PATTERN101:return(i*j)%2+(i*j)%3==0;case QRMaskPattern.PATTERN110:return((i*j)%2+(i*j)%3)%2==0;case QRMaskPattern.PATTERN111:return((i*j)%3+(i+j)%2)%2==0;default:throw new Error("bad maskPattern:"+maskPattern);}},getErrorCorrectPolynomial:function(errorCorrectLength){var a=new QRPolynomial([1],0);for(var i=0;i<errorCorrectLength;i++){a=a.multiply(new QRPolynomial([1,QRMath.gexp(i)],0));}
	return a;},getLengthInBits:function(mode,type){if(1<=type&&type<10){switch(mode){case QRMode.MODE_NUMBER:return 10;case QRMode.MODE_ALPHA_NUM:return 9;case QRMode.MODE_8BIT_BYTE:return 8;case QRMode.MODE_KANJI:return 8;default:throw new Error("mode:"+mode);}}else if(type<27){switch(mode){case QRMode.MODE_NUMBER:return 12;case QRMode.MODE_ALPHA_NUM:return 11;case QRMode.MODE_8BIT_BYTE:return 16;case QRMode.MODE_KANJI:return 10;default:throw new Error("mode:"+mode);}}else if(type<41){switch(mode){case QRMode.MODE_NUMBER:return 14;case QRMode.MODE_ALPHA_NUM:return 13;case QRMode.MODE_8BIT_BYTE:return 16;case QRMode.MODE_KANJI:return 12;default:throw new Error("mode:"+mode);}}else{throw new Error("type:"+type);}},getLostPoint:function(qrCode){var moduleCount=qrCode.getModuleCount();var lostPoint=0;for(var row=0;row<moduleCount;row++){for(var col=0;col<moduleCount;col++){var sameCount=0;var dark=qrCode.isDark(row,col);for(var r=-1;r<=1;r++){if(row+r<0||moduleCount<=row+r){continue;}
	for(var c=-1;c<=1;c++){if(col+c<0||moduleCount<=col+c){continue;}
	if(r==0&&c==0){continue;}
	if(dark==qrCode.isDark(row+r,col+c)){sameCount++;}}}
	if(sameCount>5){lostPoint+=(3+sameCount-5);}}}
	for(var row=0;row<moduleCount-1;row++){for(var col=0;col<moduleCount-1;col++){var count=0;if(qrCode.isDark(row,col))count++;if(qrCode.isDark(row+1,col))count++;if(qrCode.isDark(row,col+1))count++;if(qrCode.isDark(row+1,col+1))count++;if(count==0||count==4){lostPoint+=3;}}}
	for(var row=0;row<moduleCount;row++){for(var col=0;col<moduleCount-6;col++){if(qrCode.isDark(row,col)&&!qrCode.isDark(row,col+1)&&qrCode.isDark(row,col+2)&&qrCode.isDark(row,col+3)&&qrCode.isDark(row,col+4)&&!qrCode.isDark(row,col+5)&&qrCode.isDark(row,col+6)){lostPoint+=40;}}}
	for(var col=0;col<moduleCount;col++){for(var row=0;row<moduleCount-6;row++){if(qrCode.isDark(row,col)&&!qrCode.isDark(row+1,col)&&qrCode.isDark(row+2,col)&&qrCode.isDark(row+3,col)&&qrCode.isDark(row+4,col)&&!qrCode.isDark(row+5,col)&&qrCode.isDark(row+6,col)){lostPoint+=40;}}}
	var darkCount=0;for(var col=0;col<moduleCount;col++){for(var row=0;row<moduleCount;row++){if(qrCode.isDark(row,col)){darkCount++;}}}
	var ratio=Math.abs(100*darkCount/moduleCount/moduleCount-50)/5;lostPoint+=ratio*10;return lostPoint;}};var QRMath={glog:function(n){if(n<1){throw new Error("glog("+n+")");}
	return QRMath.LOG_TABLE[n];},gexp:function(n){while(n<0){n+=255;}
	while(n>=256){n-=255;}
	return QRMath.EXP_TABLE[n];},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)};for(var i=0;i<8;i++){QRMath.EXP_TABLE[i]=1<<i;}
	for(var i=8;i<256;i++){QRMath.EXP_TABLE[i]=QRMath.EXP_TABLE[i-4]^QRMath.EXP_TABLE[i-5]^QRMath.EXP_TABLE[i-6]^QRMath.EXP_TABLE[i-8];}
	for(var i=0;i<255;i++){QRMath.LOG_TABLE[QRMath.EXP_TABLE[i]]=i;}
	function QRPolynomial(num,shift){if(num.length==undefined){throw new Error(num.length+"/"+shift);}
	var offset=0;while(offset<num.length&&num[offset]==0){offset++;}
	this.num=new Array(num.length-offset+shift);for(var i=0;i<num.length-offset;i++){this.num[i]=num[i+offset];}}
	QRPolynomial.prototype={get:function(index){return this.num[index];},getLength:function(){return this.num.length;},multiply:function(e){var num=new Array(this.getLength()+e.getLength()-1);for(var i=0;i<this.getLength();i++){for(var j=0;j<e.getLength();j++){num[i+j]^=QRMath.gexp(QRMath.glog(this.get(i))+QRMath.glog(e.get(j)));}}
	return new QRPolynomial(num,0);},mod:function(e){if(this.getLength()-e.getLength()<0){return this;}
	var ratio=QRMath.glog(this.get(0))-QRMath.glog(e.get(0));var num=new Array(this.getLength());for(var i=0;i<this.getLength();i++){num[i]=this.get(i);}
	for(var i=0;i<e.getLength();i++){num[i]^=QRMath.gexp(QRMath.glog(e.get(i))+ratio);}
	return new QRPolynomial(num,0).mod(e);}};function QRRSBlock(totalCount,dataCount){this.totalCount=totalCount;this.dataCount=dataCount;}
	QRRSBlock.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]];QRRSBlock.getRSBlocks=function(typeNumber,errorCorrectLevel){var rsBlock=QRRSBlock.getRsBlockTable(typeNumber,errorCorrectLevel);if(rsBlock==undefined){throw new Error("bad rs block @ typeNumber:"+typeNumber+"/errorCorrectLevel:"+errorCorrectLevel);}
	var length=rsBlock.length/3;var list=[];for(var i=0;i<length;i++){var count=rsBlock[i*3+0];var totalCount=rsBlock[i*3+1];var dataCount=rsBlock[i*3+2];for(var j=0;j<count;j++){list.push(new QRRSBlock(totalCount,dataCount));}}
	return list;};QRRSBlock.getRsBlockTable=function(typeNumber,errorCorrectLevel){switch(errorCorrectLevel){case QRErrorCorrectLevel.L:return QRRSBlock.RS_BLOCK_TABLE[(typeNumber-1)*4+0];case QRErrorCorrectLevel.M:return QRRSBlock.RS_BLOCK_TABLE[(typeNumber-1)*4+1];case QRErrorCorrectLevel.Q:return QRRSBlock.RS_BLOCK_TABLE[(typeNumber-1)*4+2];case QRErrorCorrectLevel.H:return QRRSBlock.RS_BLOCK_TABLE[(typeNumber-1)*4+3];default:return undefined;}};function QRBitBuffer(){this.buffer=[];this.length=0;}
	QRBitBuffer.prototype={get:function(index){var bufIndex=Math.floor(index/8);return((this.buffer[bufIndex]>>>(7-index%8))&1)==1;},put:function(num,length){for(var i=0;i<length;i++){this.putBit(((num>>>(length-i-1))&1)==1);}},getLengthInBits:function(){return this.length;},putBit:function(bit){var bufIndex=Math.floor(this.length/8);if(this.buffer.length<=bufIndex){this.buffer.push(0);}
	if(bit){this.buffer[bufIndex]|=(0x80>>>(this.length%8));}
	this.length++;}};var QRCodeLimitLength=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]];
	
	function _isSupportCanvas() {
		return typeof CanvasRenderingContext2D != "undefined";
	}
	
	// android 2.x doesn't support Data-URI spec
	function _getAndroid() {
		var android = false;
		var sAgent = navigator.userAgent;
		
		if (/android/i.test(sAgent)) { // android
			android = true;
			var aMat = sAgent.toString().match(/android ([0-9]\.[0-9])/i);
			
			if (aMat && aMat[1]) {
				android = parseFloat(aMat[1]);
			}
		}
		
		return android;
	}
	
	var svgDrawer = (function() {

		var Drawing = function (el, htOption) {
			this._el = el;
			this._htOption = htOption;
		};

		Drawing.prototype.draw = function (oQRCode) {
			var _htOption = this._htOption;
			var _el = this._el;
			var nCount = oQRCode.getModuleCount();
			var nWidth = Math.floor(_htOption.width / nCount);
			var nHeight = Math.floor(_htOption.height / nCount);

			this.clear();

			function makeSVG(tag, attrs) {
				var el = document.createElementNS('http://www.w3.org/2000/svg', tag);
				for (var k in attrs)
					if (attrs.hasOwnProperty(k)) el.setAttribute(k, attrs[k]);
				return el;
			}

			var svg = makeSVG("svg" , {'viewBox': '0 0 ' + String(nCount) + " " + String(nCount), 'width': '100%', 'height': '100%', 'fill': _htOption.colorLight});
			svg.setAttributeNS("http://www.w3.org/2000/xmlns/", "xmlns:xlink", "http://www.w3.org/1999/xlink");
			_el.appendChild(svg);

			svg.appendChild(makeSVG("rect", {"fill": _htOption.colorLight, "width": "100%", "height": "100%"}));
			svg.appendChild(makeSVG("rect", {"fill": _htOption.colorDark, "width": "1", "height": "1", "id": "template"}));

			for (var row = 0; row < nCount; row++) {
				for (var col = 0; col < nCount; col++) {
					if (oQRCode.isDark(row, col)) {
						var child = makeSVG("use", {"x": String(col), "y": String(row)});
						child.setAttributeNS("http://www.w3.org/1999/xlink", "href", "#template")
						svg.appendChild(child);
					}
				}
			}
		};
		Drawing.prototype.clear = function () {
			while (this._el.hasChildNodes())
				this._el.removeChild(this._el.lastChild);
		};
		return Drawing;
	})();

	var useSVG = document.documentElement.tagName.toLowerCase() === "svg";

	// Drawing in DOM by using Table tag
	var Drawing = useSVG ? svgDrawer : !_isSupportCanvas() ? (function () {
		var Drawing = function (el, htOption) {
			this._el = el;
			this._htOption = htOption;
		};
			
		/**
		 * Draw the QRCode
		 * 
		 * @param {QRCode} oQRCode
		 */
		Drawing.prototype.draw = function (oQRCode) {
            var _htOption = this._htOption;
            var _el = this._el;
			var nCount = oQRCode.getModuleCount();
			var nWidth = Math.floor(_htOption.width / nCount);
			var nHeight = Math.floor(_htOption.height / nCount);
			var aHTML = ['<table style="border:0;border-collapse:collapse;">'];
			
			for (var row = 0; row < nCount; row++) {
				aHTML.push('<tr>');
				
				for (var col = 0; col < nCount; col++) {
					aHTML.push('<td style="border:0;border-collapse:collapse;padding:0;margin:0;width:' + nWidth + 'px;height:' + nHeight + 'px;background-color:' + (oQRCode.isDark(row, col) ? _htOption.colorDark : _htOption.colorLight) + ';"></td>');
				}
				
				aHTML.push('</tr>');
			}
			
			aHTML.push('</table>');
			_el.innerHTML = aHTML.join('');
			
			// Fix the margin values as real size.
			var elTable = _el.childNodes[0];
			var nLeftMarginTable = (_htOption.width - elTable.offsetWidth) / 2;
			var nTopMarginTable = (_htOption.height - elTable.offsetHeight) / 2;
			
			if (nLeftMarginTable > 0 && nTopMarginTable > 0) {
				elTable.style.margin = nTopMarginTable + "px " + nLeftMarginTable + "px";	
			}
		};
		
		/**
		 * Clear the QRCode
		 */
		Drawing.prototype.clear = function () {
			this._el.innerHTML = '';
		};
		
		return Drawing;
	})() : (function () { // Drawing in Canvas
		function _onMakeImage() {
			this._elImage.src = this._elCanvas.toDataURL("image/png");
			this._elImage.style.display = "block";
			this._elCanvas.style.display = "none";			
		}
		
		// Android 2.1 bug workaround
		// http://code.google.com/p/android/issues/detail?id=5141
		if (this._android && this._android <= 2.1) {
	    	var factor = 1 / window.devicePixelRatio;
	        var drawImage = CanvasRenderingContext2D.prototype.drawImage; 
	    	CanvasRenderingContext2D.prototype.drawImage = function (image, sx, sy, sw, sh, dx, dy, dw, dh) {
	    		if (("nodeName" in image) && /img/i.test(image.nodeName)) {
		        	for (var i = arguments.length - 1; i >= 1; i--) {
		            	arguments[i] = arguments[i] * factor;
		        	}
	    		} else if (typeof dw == "undefined") {
	    			arguments[1] *= factor;
	    			arguments[2] *= factor;
	    			arguments[3] *= factor;
	    			arguments[4] *= factor;
	    		}
	    		
	        	drawImage.apply(this, arguments); 
	    	};
		}
		
		/**
		 * Check whether the user's browser supports Data URI or not
		 * 
		 * @private
		 * @param {Function} fSuccess Occurs if it supports Data URI
		 * @param {Function} fFail Occurs if it doesn't support Data URI
		 */
		function _safeSetDataURI(fSuccess, fFail) {
            var self = this;
            self._fFail = fFail;
            self._fSuccess = fSuccess;

            // Check it just once
            if (self._bSupportDataURI === null) {
                var el = document.createElement("img");
                var fOnError = function() {
                    self._bSupportDataURI = false;

                    if (self._fFail) {
                        self._fFail.call(self);
                    }
                };
                var fOnSuccess = function() {
                    self._bSupportDataURI = true;

                    if (self._fSuccess) {
                        self._fSuccess.call(self);
                    }
                };

                el.onabort = fOnError;
                el.onerror = fOnError;
                el.onload = fOnSuccess;
                el.src = "data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO9TXL0Y4OHwAAAABJRU5ErkJggg=="; // the Image contains 1px data.
                return;
            } else if (self._bSupportDataURI === true && self._fSuccess) {
                self._fSuccess.call(self);
            } else if (self._bSupportDataURI === false && self._fFail) {
                self._fFail.call(self);
            }
		};
		
		/**
		 * Drawing QRCode by using canvas
		 * 
		 * @constructor
		 * @param {HTMLElement} el
		 * @param {Object} htOption QRCode Options 
		 */
		var Drawing = function (el, htOption) {
    		this._bIsPainted = false;
    		this._android = _getAndroid();
		
			this._htOption = htOption;
			this._elCanvas = document.createElement("canvas");
			this._elCanvas.width = htOption.width;
			this._elCanvas.height = htOption.height;
			el.appendChild(this._elCanvas);
			this._el = el;
			this._oContext = this._elCanvas.getContext("2d");
			this._bIsPainted = false;
			this._elImage = document.createElement("img");
			this._elImage.alt = "Scan me!";
			this._elImage.style.display = "none";
			this._el.appendChild(this._elImage);
			this._bSupportDataURI = null;
		};
			
		/**
		 * Draw the QRCode
		 * 
		 * @param {QRCode} oQRCode 
		 */
		Drawing.prototype.draw = function (oQRCode) {
            var _elImage = this._elImage;
            var _oContext = this._oContext;
            var _htOption = this._htOption;
            
			var nCount = oQRCode.getModuleCount();
			var nWidth = _htOption.width / nCount;
			var nHeight = _htOption.height / nCount;
			var nRoundedWidth = Math.round(nWidth);
			var nRoundedHeight = Math.round(nHeight);

			_elImage.style.display = "none";
			this.clear();
			
			for (var row = 0; row < nCount; row++) {
				for (var col = 0; col < nCount; col++) {
					var bIsDark = oQRCode.isDark(row, col);
					var nLeft = col * nWidth;
					var nTop = row * nHeight;
					_oContext.strokeStyle = bIsDark ? _htOption.colorDark : _htOption.colorLight;
					_oContext.lineWidth = 1;
					_oContext.fillStyle = bIsDark ? _htOption.colorDark : _htOption.colorLight;					
					_oContext.fillRect(nLeft, nTop, nWidth, nHeight);
					
					// 안티 앨리어싱 방지 처리
					_oContext.strokeRect(
						Math.floor(nLeft) + 0.5,
						Math.floor(nTop) + 0.5,
						nRoundedWidth,
						nRoundedHeight
					);
					
					_oContext.strokeRect(
						Math.ceil(nLeft) - 0.5,
						Math.ceil(nTop) - 0.5,
						nRoundedWidth,
						nRoundedHeight
					);
				}
			}
			
			this._bIsPainted = true;
		};
			
		/**
		 * Make the image from Canvas if the browser supports Data URI.
		 */
		Drawing.prototype.makeImage = function () {
			if (this._bIsPainted) {
				_safeSetDataURI.call(this, _onMakeImage);
			}
		};
			
		/**
		 * Return whether the QRCode is painted or not
		 * 
		 * @return {Boolean}
		 */
		Drawing.prototype.isPainted = function () {
			return this._bIsPainted;
		};
		
		/**
		 * Clear the QRCode
		 */
		Drawing.prototype.clear = function () {
			this._oContext.clearRect(0, 0, this._elCanvas.width, this._elCanvas.height);
			this._bIsPainted = false;
		};
		
		/**
		 * @private
		 * @param {Number} nNumber
		 */
		Drawing.prototype.round = function (nNumber) {
			if (!nNumber) {
				return nNumber;
			}
			
			return Math.floor(nNumber * 1000) / 1000;
		};
		
		return Drawing;
	})();
	
	/**
	 * Get the type by string length
	 * 
	 * @private
	 * @param {String} sText
	 * @param {Number} nCorrectLevel
	 * @return {Number} type
	 */
	function _getTypeNumber(sText, nCorrectLevel) {			
		var nType = 1;
		var length = _getUTF8Length(sText);
		
		for (var i = 0, len = QRCodeLimitLength.length; i <= len; i++) {
			var nLimit = 0;
			
			switch (nCorrectLevel) {
				case QRErrorCorrectLevel.L :
					nLimit = QRCodeLimitLength[i][0];
					break;
				case QRErrorCorrectLevel.M :
					nLimit = QRCodeLimitLength[i][1];
					break;
				case QRErrorCorrectLevel.Q :
					nLimit = QRCodeLimitLength[i][2];
					break;
				case QRErrorCorrectLevel.H :
					nLimit = QRCodeLimitLength[i][3];
					break;
			}
			
			if (length <= nLimit) {
				break;
			} else {
				nType++;
			}
		}
		
		if (nType > QRCodeLimitLength.length) {
			throw new Error("Too long data");
		}
		
		return nType;
	}

	function _getUTF8Length(sText) {
		var replacedText = encodeURI(sText).toString().replace(/\%[0-9a-fA-F]{2}/g, 'a');
		return replacedText.length + (replacedText.length != sText ? 3 : 0);
	}
	
	/**
	 * @class QRCode
	 * @constructor
	 * @example 
	 * new QRCode(document.getElementById("test"), "http://jindo.dev.naver.com/collie");
	 *
	 * @example
	 * var oQRCode = new QRCode("test", {
	 *    text : "http://naver.com",
	 *    width : 128,
	 *    height : 128
	 * });
	 * 
	 * oQRCode.clear(); // Clear the QRCode.
	 * oQRCode.makeCode("http://map.naver.com"); // Re-create the QRCode.
	 *
	 * @param {HTMLElement|String} el target element or 'id' attribute of element.
	 * @param {Object|String} vOption
	 * @param {String} vOption.text QRCode link data
	 * @param {Number} [vOption.width=256]
	 * @param {Number} [vOption.height=256]
	 * @param {String} [vOption.colorDark="#000000"]
	 * @param {String} [vOption.colorLight="#ffffff"]
	 * @param {QRCode.CorrectLevel} [vOption.correctLevel=QRCode.CorrectLevel.H] [L|M|Q|H] 
	 */
	QRCode = function (el, vOption) {
		this._htOption = {
			width : 256, 
			height : 256,
			typeNumber : 4,
			colorDark : "#000000",
			colorLight : "#ffffff",
			correctLevel : QRErrorCorrectLevel.H
		};
		
		if (typeof vOption === 'string') {
			vOption	= {
				text : vOption
			};
		}
		
		// Overwrites options
		if (vOption) {
			for (var i in vOption) {
				this._htOption[i] = vOption[i];
			}
		}
		
		if (typeof el == "string") {
			el = document.getElementById(el);
		}

		if (this._htOption.useSVG) {
			Drawing = svgDrawer;
		}
		
		this._android = _getAndroid();
		this._el = el;
		this._oQRCode = null;
		this._oDrawing = new Drawing(this._el, this._htOption);
		
		if (this._htOption.text) {
			this.makeCode(this._htOption.text);	
		}
	};
	
	/**
	 * Make the QRCode
	 * 
	 * @param {String} sText link data
	 */
	QRCode.prototype.makeCode = function (sText) {
		this._oQRCode = new QRCodeModel(_getTypeNumber(sText, this._htOption.correctLevel), this._htOption.correctLevel);
		this._oQRCode.addData(sText);
		this._oQRCode.make();
		this._el.title = sText;
		this._oDrawing.draw(this._oQRCode);			
		this.makeImage();
	};
	
	/**
	 * Make the Image from Canvas element
	 * - It occurs automatically
	 * - Android below 3 doesn't support Data-URI spec.
	 * 
	 * @private
	 */
	QRCode.prototype.makeImage = function () {
		if (typeof this._oDrawing.makeImage == "function" && (!this._android || this._android >= 3)) {
			this._oDrawing.makeImage();
		}
	};
	
	/**
	 * Clear the QRCode
	 */
	QRCode.prototype.clear = function () {
		this._oDrawing.clear();
	};
	
	/**
	 * @name QRCode.CorrectLevel
	 */
	QRCode.CorrectLevel = QRErrorCorrectLevel;
})();
/**
 * TinyAnimate
 *  version 0.3.0
 *
 * Source:  https://github.com/branneman/TinyAnimate
 * Author:  Bran van der Meer <branmovic@gmail.com> (http://bran.name/)
 * License: MIT
 *
 * Functions:
 *  TinyAnimate.animate(from, to, duration, update, easing, done)
 *  TinyAnimate.animateCSS(element, property, unit, from, to, duration, easing, done)
 *  TinyAnimate.cancel(animation)
 *
 * Parameters:
 *  element   HTMLElement        A dom node
 *  property  string             Property name, as available in element.style, i.e. 'borderRadius', not 'border-radius'
 *  unit      string             Property unit, like 'px'
 *  from      int                Property value to animate from
 *  to        int                Property value to animate to
 *  duration  int                Duration in milliseconds
 *  update    function           Function to implement updating the DOM, get's called with a value between `from` and `to`
 *  easing    string | function  Optional: A string when the easing function is available in TinyAnimate.easings,
 *                                or a function with the signature: function(t, b, c, d) {...}
 *  done      function           Optional: To be executed when the animation has completed.
 *
 * Returns:
 *  animation object             Animation object that can be canceled.
 */

/**
 * Universal Module Dance
 *  config: CommonJS Strict, exports Global, supports circular dependencies
 *  https://github.com/umdjs/umd/
 */
(function(root, factory) {
    if (typeof define === 'function' && define.amd) {
        define(['exports'], function(exports) {
            factory((root.TinyAnimate = exports));
        });
    } else if (typeof exports === 'object') {
        factory(exports);
    } else {
        factory((root.TinyAnimate = {}));
    }
}(this, function(exports) {

    /**
     * TinyAnimate.animate()
     */
    exports.animate = function(from, to, duration, update, easing, done) {

        // Early bail out if called incorrectly
        if (typeof from !== 'number' ||
            typeof to !== 'number' ||
            typeof duration !== 'number' ||
            typeof update !== 'function')
            return;

        // Determine easing
        if (typeof easing === 'string' && easings[easing]) {
            easing = easings[easing];
        }
        if (typeof easing !== 'function') {
            easing = easings.linear;
        }

        // Create mock done() function if necessary
        if (typeof done !== 'function') {
            done = function() {};
        }

        // Pick implementation (requestAnimationFrame | setTimeout)
        var rAF = window.requestAnimationFrame || function(callback) {
            window.setTimeout(callback, 1000 / 60);
        };

        // Animation loop
        var canceled = false;
        var change = to - from;
        function loop(timestamp) {
            if (canceled) {
                return;
            }
            var time = (timestamp || +new Date()) - start;
            if (time >= 0) {
                update(easing(time, from, change, duration));
            }
            if (time >= 0 && time >= duration) {
                update(to);
                done();
            } else {
                rAF(loop);
            }
        }
        update(from);

        // Start animation loop
        var start = window.performance && window.performance.now ? window.performance.now() : +new Date();

        rAF(loop);

        return {
            cancel: function() {
                canceled = true;
            }
        };
    };

    /**
     * TinyAnimate.animateCSS()
     *  Shortcut method for animating css properties
     */
    exports.animateCSS = function(element, property, unit, from, to, duration, easing, done) {

        var update = function(value) {
            element.style[property] = value + unit;
        };
        return exports.animate(from, to, duration, update, easing, done);
    };

    /**
     * TinyAnimate.cancel()
     *  Method for canceling animations
     */
    exports.cancel = function(animation) {
        if (!animation) {
            return;
        }
        animation.cancel();
    };

    /**
     * TinyAnimate.easings
     *  Adapted from jQuery Easing
     */
    var easings = exports.easings = {};
    easings.linear = function(t, b, c, d) {
        return c * t / d + b;
    };
    easings.easeInQuad = function(t, b, c, d) {
        return c * (t /= d) * t + b;
    };
    easings.easeOutQuad = function(t, b, c, d) {
        return -c * (t /= d) * (t - 2) + b;
    };
    easings.easeInOutQuad = function(t, b, c, d) {
        if ((t /= d / 2) < 1) return c / 2 * t * t + b;
        return -c / 2 * ((--t) * (t - 2) - 1) + b;
    };
    easings.easeInCubic = function(t, b, c, d) {
        return c * (t /= d) * t * t + b;
    };
    easings.easeOutCubic = function(t, b, c, d) {
        return c * ((t = t / d - 1) * t * t + 1) + b;
    };
    easings.easeInOutCubic = function(t, b, c, d) {
        if ((t /= d / 2) < 1) return c / 2 * t * t * t + b;
        return c / 2 * ((t -= 2) * t * t + 2) + b;
    };
    easings.easeInQuart = function(t, b, c, d) {
        return c * (t /= d) * t * t * t + b;
    };
    easings.easeOutQuart = function(t, b, c, d) {
        return -c * ((t = t / d - 1) * t * t * t - 1) + b;
    };
    easings.easeInOutQuart = function(t, b, c, d) {
        if ((t /= d / 2) < 1) return c / 2 * t * t * t * t + b;
        return -c / 2 * ((t -= 2) * t * t * t - 2) + b;
    };
    easings.easeInQuint = function(t, b, c, d) {
        return c * (t /= d) * t * t * t * t + b;
    };
    easings.easeOutQuint = function(t, b, c, d) {
        return c * ((t = t / d - 1) * t * t * t * t + 1) + b;
    };
    easings.easeInOutQuint = function(t, b, c, d) {
        if ((t /= d / 2) < 1) return c / 2 * t * t * t * t * t + b;
        return c / 2 * ((t -= 2) * t * t * t * t + 2) + b;
    };
    easings.easeInSine = function(t, b, c, d) {
        return -c * Math.cos(t / d * (Math.PI / 2)) + c + b;
    };
    easings.easeOutSine = function(t, b, c, d) {
        return c * Math.sin(t / d * (Math.PI / 2)) + b;
    };
    easings.easeInOutSine = function(t, b, c, d) {
        return -c / 2 * (Math.cos(Math.PI * t / d) - 1) + b;
    };
    easings.easeInExpo = function(t, b, c, d) {
        return (t == 0) ? b : c * Math.pow(2, 10 * (t / d - 1)) + b;
    };
    easings.easeOutExpo = function(t, b, c, d) {
        return (t == d) ? b + c : c * (-Math.pow(2, -10 * t / d) + 1) + b;
    };
    easings.easeInOutExpo = function(t, b, c, d) {
        if (t == 0) return b;
        if (t == d) return b + c;
        if ((t /= d / 2) < 1) return c / 2 * Math.pow(2, 10 * (t - 1)) + b;
        return c / 2 * (-Math.pow(2, -10 * --t) + 2) + b;
    };
    easings.easeInCirc = function(t, b, c, d) {
        return -c * (Math.sqrt(1 - (t /= d) * t) - 1) + b;
    };
    easings.easeOutCirc = function(t, b, c, d) {
        return c * Math.sqrt(1 - (t = t / d - 1) * t) + b;
    };
    easings.easeInOutCirc = function(t, b, c, d) {
        if ((t /= d / 2) < 1) return -c / 2 * (Math.sqrt(1 - t * t) - 1) + b;
        return c / 2 * (Math.sqrt(1 - (t -= 2) * t) + 1) + b;
    };
    easings.easeInElastic = function(t, b, c, d) {
        var p = 0;
        var a = c;
        if (t == 0) return b;
        if ((t /= d) == 1) return b + c;
        if (!p) p = d * .3;
        if (a < Math.abs(c)) {
            a = c;
            var s = p / 4;
        }
        else var s = p / (2 * Math.PI) * Math.asin(c / a);
        return -(a * Math.pow(2, 10 * (t -= 1)) * Math.sin((t * d - s) * (2 * Math.PI) / p)) + b;
    };
    easings.easeOutElastic = function(t, b, c, d) {
        var p = 0;
        var a = c;
        if (t == 0) return b;
        if ((t /= d) == 1) return b + c;
        if (!p) p = d * .3;
        if (a < Math.abs(c)) {
            a = c;
            var s = p / 4;
        }
        else var s = p / (2 * Math.PI) * Math.asin(c / a);
        return a * Math.pow(2, -10 * t) * Math.sin((t * d - s) * (2 * Math.PI) / p) + c + b;
    };
    easings.easeInOutElastic = function(t, b, c, d) {
        var p = 0;
        var a = c;
        if (t == 0) return b;
        if ((t /= d / 2) == 2) return b + c;
        if (!p) p = d * (.3 * 1.5);
        if (a < Math.abs(c)) {
            a = c;
            var s = p / 4;
        }
        else var s = p / (2 * Math.PI) * Math.asin(c / a);
        if (t < 1) return -.5 * (a * Math.pow(2, 10 * (t -= 1)) * Math.sin((t * d - s) * (2 * Math.PI) / p)) + b;
        return a * Math.pow(2, -10 * (t -= 1)) * Math.sin((t * d - s) * (2 * Math.PI) / p) * .5 + c + b;
    };
    easings.easeInBack = function(t, b, c, d, s) {
        if (s == undefined) s = 1.70158;
        return c * (t /= d) * t * ((s + 1) * t - s) + b;
    };
    easings.easeOutBack = function(t, b, c, d, s) {
        if (s == undefined) s = 1.70158;
        return c * ((t = t / d - 1) * t * ((s + 1) * t + s) + 1) + b;
    };
    easings.easeInOutBack = function(t, b, c, d, s) {
        if (s == undefined) s = 1.70158;
        if ((t /= d / 2) < 1) return c / 2 * (t * t * (((s *= (1.525)) + 1) * t - s)) + b;
        return c / 2 * ((t -= 2) * t * (((s *= (1.525)) + 1) * t + s) + 2) + b;
    };
    easings.easeInBounce = function(t, b, c, d) {
        return c - easings.easeOutBounce(d - t, 0, c, d) + b;
    };
    easings.easeOutBounce = function(t, b, c, d) {
        if ((t /= d) < (1 / 2.75)) {
            return c * (7.5625 * t * t) + b;
        } else if (t < (2 / 2.75)) {
            return c * (7.5625 * (t -= (1.5 / 2.75)) * t + .75) + b;
        } else if (t < (2.5 / 2.75)) {
            return c * (7.5625 * (t -= (2.25 / 2.75)) * t + .9375) + b;
        } else {
            return c * (7.5625 * (t -= (2.625 / 2.75)) * t + .984375) + b;
        }
    };
    easings.easeInOutBounce = function(t, b, c, d) {
        if (t < d / 2) return easings.easeInBounce(t * 2, 0, c, d) * .5 + b;
        return easings.easeOutBounce(t * 2 - d, 0, c, d) * .5 + c * .5 + b;
    };

}));

(function (global, factory) {
    if (typeof define === 'function' && define.amd) {
        define(['exports', 'module'], factory);
    } else if (typeof exports !== 'undefined' && typeof module !== 'undefined') {
        factory(exports, module);
    } else {
        var mod = {
            exports: {}
        };
        factory(mod.exports, mod);
        global.Impetus = mod.exports;
    }
})(this, function (exports, module) {
    'use strict';

    function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

    var stopThresholdDefault = 0.3;
    var bounceDeceleration = 0.04;
    var bounceAcceleration = 0.11;

    // fixes weird safari 10 bug where preventDefault is prevented
    // @see https://github.com/metafizzy/flickity/issues/457#issuecomment-254501356
    window.addEventListener('touchmove', function () {});

    var Impetus = function Impetus(_ref) {
        var _ref$source = _ref.source;
        var sourceEl = _ref$source === undefined ? document : _ref$source;
        var updateCallback = _ref.update;
        var _ref$multiplier = _ref.multiplier;
        var multiplier = _ref$multiplier === undefined ? 1 : _ref$multiplier;
        var _ref$friction = _ref.friction;
        var friction = _ref$friction === undefined ? 0.92 : _ref$friction;
        var initialValues = _ref.initialValues;
        var boundX = _ref.boundX;
        var boundY = _ref.boundY;
        var _ref$bounce = _ref.bounce;
        var bounce = _ref$bounce === undefined ? true : _ref$bounce;

        _classCallCheck(this, Impetus);

        var boundXmin, boundXmax, boundYmin, boundYmax, pointerLastX, pointerLastY, pointerCurrentX, pointerCurrentY, pointerId, decVelX, decVelY;
        var targetX = 0;
        var targetY = 0;
        var stopThreshold = stopThresholdDefault * multiplier;
        var ticking = false;
        var pointerActive = false;
        var paused = false;
        var decelerating = false;
        var trackingPoints = [];

        /**
         * Initialize instance
         */
        (function init() {
            sourceEl = typeof sourceEl === 'string' ? document.querySelector(sourceEl) : sourceEl;
            if (!sourceEl) {
                throw new Error('IMPETUS: source not found.');
            }

            if (!updateCallback) {
                throw new Error('IMPETUS: update function not defined.');
            }

            if (initialValues) {
                if (initialValues[0]) {
                    targetX = initialValues[0];
                }
                if (initialValues[1]) {
                    targetY = initialValues[1];
                }
                callUpdateCallback();
            }

            // Initialize bound values
            if (boundX) {
                boundXmin = boundX[0];
                boundXmax = boundX[1];
            }
            if (boundY) {
                boundYmin = boundY[0];
                boundYmax = boundY[1];
            }

            sourceEl.addEventListener('touchstart', onDown);
            sourceEl.addEventListener('mousedown', onDown);
        })();

        /**
         * In edge cases where you may need to
         * reinstanciate Impetus on the same sourceEl
         * this will remove the previous event listeners
         */
        this.destroy = function () {
            sourceEl.removeEventListener('touchstart', onDown);
            sourceEl.removeEventListener('mousedown', onDown);
            // however it won't "destroy" a reference
            // to instance if you'd like to do that
            // it returns null as a convinience.
            // ex: `instance = instance.destroy();`
            return null;
        };

        /**
         * Disable movement processing
         * @public
         */
        this.pause = function () {
            pointerActive = false;
            paused = true;
        };

        /**
         * Enable movement processing
         * @public
         */
        this.resume = function () {
            paused = false;
        };

        /**
         * Update the current x and y values
         * @public
         * @param {Number} x
         * @param {Number} y
         */
        this.setValues = function (x, y) {
            if (typeof x === 'number') {
                targetX = x;
            }
            if (typeof y === 'number') {
                targetY = y;
            }
        };

        /**
         * Update the multiplier value
         * @public
         * @param {Number} val
         */
        this.setMultiplier = function (val) {
            multiplier = val;
            stopThreshold = stopThresholdDefault * multiplier;
        };

        /**
         * Update boundX value
         * @public
         * @param {Number[]} boundX
         */
        this.setBoundX = function (boundX) {
            boundXmin = boundX[0];
            boundXmax = boundX[1];
        };

        /**
         * Update boundY value
         * @public
         * @param {Number[]} boundY
         */
        this.setBoundY = function (boundY) {
            boundYmin = boundY[0];
            boundYmax = boundY[1];
        };

        /**
         * Executes the update function
         */
        function callUpdateCallback() {
            updateCallback.call(sourceEl, targetX, targetY);
        }

        /**
         * Creates a custom normalized event object from touch and mouse events
         * @param  {Event} ev
         * @returns {Object} with x, y, and id properties
         */
        function normalizeEvent(ev) {
            if (ev.type === 'touchmove' || ev.type === 'touchstart' || ev.type === 'touchend') {
                var touch = ev.targetTouches[0] || ev.changedTouches[0];
                return {
                    x: touch.clientX,
                    y: touch.clientY,
                    id: touch.identifier
                };
            } else {
                // mouse events
                return {
                    x: ev.clientX,
                    y: ev.clientY,
                    id: null
                };
            }
        }

        /**
         * Initializes movement tracking
         * @param  {Object} ev Normalized event
         */
        function onDown(ev) {
            var event = normalizeEvent(ev);
            if (!pointerActive && !paused) {
                pointerActive = true;
                decelerating = false;
                pointerId = event.id;

                pointerLastX = pointerCurrentX = event.x;
                pointerLastY = pointerCurrentY = event.y;
                trackingPoints = [];
                addTrackingPoint(pointerLastX, pointerLastY);

                // @see https://developers.google.com/web/updates/2017/01/scrolling-intervention
                document.addEventListener('touchmove', onMove, getPassiveSupported() ? { passive: false } : false);
                document.addEventListener('touchend', onUp);
                document.addEventListener('touchcancel', stopTracking);
                document.addEventListener('mousemove', onMove, getPassiveSupported() ? { passive: false } : false);
                document.addEventListener('mouseup', onUp);
            }
        }

        /**
         * Handles move events
         * @param  {Object} ev Normalized event
         */
        function onMove(ev) {
            ev.preventDefault();
            var event = normalizeEvent(ev);

            if (pointerActive && event.id === pointerId) {
                pointerCurrentX = event.x;
                pointerCurrentY = event.y;
                addTrackingPoint(pointerLastX, pointerLastY);
                requestTick();
            }
        }

        /**
         * Handles up/end events
         * @param {Object} ev Normalized event
         */
        function onUp(ev) {
            var event = normalizeEvent(ev);

            if (pointerActive && event.id === pointerId) {
                stopTracking();
            }
        }

        /**
         * Stops movement tracking, starts animation
         */
        function stopTracking() {
            pointerActive = false;
            addTrackingPoint(pointerLastX, pointerLastY);
            startDecelAnim();

            document.removeEventListener('touchmove', onMove);
            document.removeEventListener('touchend', onUp);
            document.removeEventListener('touchcancel', stopTracking);
            document.removeEventListener('mouseup', onUp);
            document.removeEventListener('mousemove', onMove);
        }

        /**
         * Records movement for the last 100ms
         * @param {number} x
         * @param {number} y [description]
         */
        function addTrackingPoint(x, y) {
            var time = Date.now();
            while (trackingPoints.length > 0) {
                if (time - trackingPoints[0].time <= 100) {
                    break;
                }
                trackingPoints.shift();
            }

            trackingPoints.push({ x: x, y: y, time: time });
        }

        /**
         * Calculate new values, call update function
         */
        function updateAndRender() {
            var pointerChangeX = pointerCurrentX - pointerLastX;
            var pointerChangeY = pointerCurrentY - pointerLastY;

            targetX += pointerChangeX * multiplier;
            targetY += pointerChangeY * multiplier;

            if (bounce) {
                var diff = checkBounds();
                if (diff.x !== 0) {
                    targetX -= pointerChangeX * dragOutOfBoundsMultiplier(diff.x) * multiplier;
                }
                if (diff.y !== 0) {
                    targetY -= pointerChangeY * dragOutOfBoundsMultiplier(diff.y) * multiplier;
                }
            } else {
                checkBounds(true);
            }

            callUpdateCallback();

            pointerLastX = pointerCurrentX;
            pointerLastY = pointerCurrentY;
            ticking = false;
        }

        /**
         * Returns a value from around 0.5 to 1, based on distance
         * @param {Number} val
         */
        function dragOutOfBoundsMultiplier(val) {
            return 0.000005 * Math.pow(val, 2) + 0.0001 * val + 0.55;
        }

        /**
         * prevents animating faster than current framerate
         */
        function requestTick() {
            if (!ticking) {
                requestAnimFrame(updateAndRender);
            }
            ticking = true;
        }

        /**
         * Determine position relative to bounds
         * @param {Boolean} restrict Whether to restrict target to bounds
         */
        function checkBounds(restrict) {
            var xDiff = 0;
            var yDiff = 0;

            if (boundXmin !== undefined && targetX < boundXmin) {
                xDiff = boundXmin - targetX;
            } else if (boundXmax !== undefined && targetX > boundXmax) {
                xDiff = boundXmax - targetX;
            }

            if (boundYmin !== undefined && targetY < boundYmin) {
                yDiff = boundYmin - targetY;
            } else if (boundYmax !== undefined && targetY > boundYmax) {
                yDiff = boundYmax - targetY;
            }

            if (restrict) {
                if (xDiff !== 0) {
                    targetX = xDiff > 0 ? boundXmin : boundXmax;
                }
                if (yDiff !== 0) {
                    targetY = yDiff > 0 ? boundYmin : boundYmax;
                }
            }

            return {
                x: xDiff,
                y: yDiff,
                inBounds: xDiff === 0 && yDiff === 0
            };
        }

        /**
         * Initialize animation of values coming to a stop
         */
        function startDecelAnim() {
            var firstPoint = trackingPoints[0];
            var lastPoint = trackingPoints[trackingPoints.length - 1];

            var xOffset = lastPoint.x - firstPoint.x;
            var yOffset = lastPoint.y - firstPoint.y;
            var timeOffset = lastPoint.time - firstPoint.time;

            var D = timeOffset / 15 / multiplier;

            decVelX = xOffset / D || 0; // prevent NaN
            decVelY = yOffset / D || 0;

            var diff = checkBounds();

            if (Math.abs(decVelX) > 1 || Math.abs(decVelY) > 1 || !diff.inBounds) {
                decelerating = true;
                requestAnimFrame(stepDecelAnim);
            }
        }

        /**
         * Animates values slowing down
         */
        function stepDecelAnim() {
            if (!decelerating) {
                return;
            }

            decVelX *= friction;
            decVelY *= friction;

            targetX += decVelX;
            targetY += decVelY;

            var diff = checkBounds();

            if (Math.abs(decVelX) > stopThreshold || Math.abs(decVelY) > stopThreshold || !diff.inBounds) {

                if (bounce) {
                    var reboundAdjust = 2.5;

                    if (diff.x !== 0) {
                        if (diff.x * decVelX <= 0) {
                            decVelX += diff.x * bounceDeceleration;
                        } else {
                            var adjust = diff.x > 0 ? reboundAdjust : -reboundAdjust;
                            decVelX = (diff.x + adjust) * bounceAcceleration;
                        }
                    }
                    if (diff.y !== 0) {
                        if (diff.y * decVelY <= 0) {
                            decVelY += diff.y * bounceDeceleration;
                        } else {
                            var adjust = diff.y > 0 ? reboundAdjust : -reboundAdjust;
                            decVelY = (diff.y + adjust) * bounceAcceleration;
                        }
                    }
                } else {
                    if (diff.x !== 0) {
                        if (diff.x > 0) {
                            targetX = boundXmin;
                        } else {
                            targetX = boundXmax;
                        }
                        decVelX = 0;
                    }
                    if (diff.y !== 0) {
                        if (diff.y > 0) {
                            targetY = boundYmin;
                        } else {
                            targetY = boundYmax;
                        }
                        decVelY = 0;
                    }
                }

                callUpdateCallback();

                requestAnimFrame(stepDecelAnim);
            } else {
                decelerating = false;
            }
        }
    }

    /**
     * @see http://www.paulirish.com/2011/requestanimationframe-for-smart-animating/
     */
    ;

    module.exports = Impetus;
    var requestAnimFrame = (function () {
        return window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || function (callback) {
            window.setTimeout(callback, 1000 / 60);
        };
    })();

    function getPassiveSupported() {
        var passiveSupported = false;

        try {
            var options = Object.defineProperty({}, "passive", {
                get: function get() {
                    passiveSupported = true;
                }
            });

            window.addEventListener("test", null, options);
        } catch (err) {}

        getPassiveSupported = function () {
            return passiveSupported;
        };
        return passiveSupported;
    }
});

//Template HTML
var vsm_template = '<div id="vsm_modal_base" class="vsm-modal vsm-hide vsm-fade" style="z-index: 9999;" tabindex="-1" role="dialog"> <div class="vsm-modal-dialog"> <div class="vsm-modal-content"> <div class="vsm-modal-header"> <button type="button" class="vsm-close"> </button> </div><div class="vsm-modal-body vsm-option-body vsm-list-body"> <a href="javascript:void(0);" class="vsm-back-link vsm-back-step"> <i class="vsm-back-arrow"></i> </a> <div class="vsm-in-progress"> <p class="vsm-header vsm-center"></p><div class="vsm-line-step center-piece vsm-columns"> </div><div class="vsm-list-container"> <i class="vsm-loaderIcon" alt="Loading options"></i> </div></div><div class="vsm-final"> <div class="center-piece vsm-line-step vsm-columns vehicle-result-wrap"> <div class="vsm-column-2 vsm-before"></div><div class="vsm-column-2 no-style"><i class="dot-style dot-before active"></i></div><p class="vehicle-result-name"></p><p class="vehicle-result-size"></p></div> <div class="center-piece vehicle-image-wrap"> <div style="position: relative; text-align: center; min-height: 120px;"> <i class="vsm-loaderIcon" alt="Loading an image of your vehicle"></i> <img src="" alt="" class="vsm-vehicle-display" style="display: none;"> </div><a href="javascript:void(0);" class="vsm-btn vsm-btn-gray vsm-full-width vsm-find"></a> </div></div></div></div></div></div>';

var _vsmModalIDCounter = 0;
function RideStylerVehicleSelectionModal(options) {
    var infoArray = [], //Keep track of selected options info
    dataArray = [], //Keep track of selected options data (data sent to Vehicle/Select endpoint)
    modalArray = [], //Keep track of modal screen generated by this instance
    disCountinued = false; //Decide whether or not continue to next modal screen

    //Similar to $.extend
    function extend(out) {
        out = out || {};

        for (var i = 1; i < arguments.length; i++) {
            if (!arguments[i])
                continue;

            for (var key in arguments[i]) {
                if (arguments[i].hasOwnProperty(key))
                out[key] = arguments[i][key];
            }
        }

        return out;
    };

    // Extend default settings
    options = extend({
        ConfirmButtonText: 'Confirm Vehicle',
        GroupOptions: false,
        IncludeOETireOption: false,
        YearScreenColumns: 3,
        MakeScreenColumns: 2,

        container: document.body,

        afterBackClicked: null,
        afterOptionSelected: null,
        callback: null
    }, options);

    //Check if transition is supported, Boolean
    var transitionSupport = (function(){
        var thisBody = document.body || document.documentElement,
        thisStyle = thisBody.style,
        support = thisStyle.WebkitTransition !== undefined || thisStyle.MozTransition !== undefined || thisStyle.OTransition !== undefined || thisStyle.transition !== undefined;

        return support;
    })();

    // add onTransitionEndOnce to HTMLElement
    (function() {
        var i,
        el = document.createElement('div'),
        transitions = {
            'transition':'transitionend',
            'OTransition':'otransitionend',
            'MozTransition':'transitionend',
            'WebkitTransition':'webkitTransitionEnd'
        };

        var transitionEnd = '';
        for (i in transitions) {
            if (transitions.hasOwnProperty(i) && el.style[i] !== undefined) {
                transitionEnd = transitions[i];
                break;
            }
        }

        HTMLElement.prototype.onTransitionEndOnce = function(callback) {
            if (transitionEnd === '') {
                callback();
                return this;
            }
            var transitionEndWrap = function(e) {
                callback();
                e.target.removeEventListener(e.type, transitionEndWrap);
            };
            this.addEventListener(transitionEnd, transitionEndWrap, false);
            return this;
        };
    }());

    /**
     * Add certain class to elements
     * @private
     * @param  {Element|[Element]} elements - Element(s) to search
     * @param  {String}  myClass - Class name to add
     * @return void
     */
    function addClass(elements, myClass) {
        if (!elements) { return; }
        if (typeof(elements) === 'string') elements = document.querySelectorAll(elements);
        else if (elements.tagName) elements=[elements];
        // add class to all chosen elements
        for (var i=0; i<elements.length; i++) {
            if (elements[i].className.trim() == '') elements[i].className = myClass;
            else if ((' '+elements[i].className+' ').indexOf(' '+myClass+' ') < 0) {
                // add class
                elements[i].className += ' ' + myClass;
            }
        }
    }

    /**
     * Remove certain class from elements
     * @private
     * @param  {Element|[Element]} elements - Element(s) to search
     * @param  {String}  myClass - Class name to match against
     * @return void
     */
    function removeClass(elements, myClass) {
        if (!elements) { return; }
        if (typeof(elements) === 'string') elements = document.querySelectorAll(elements);
        else if (elements.tagName) elements=[elements];
        var reg1 = new RegExp(' '+myClass+' ','g');
        var reg2 = new RegExp('(^)'+myClass+'($| )','g');
        var reg3 = new RegExp('(^| )'+myClass+'($)','g');
        // remove class from all chosen elements
        for (var i=0; i<elements.length; i++) {
            elements[i].className = elements[i].className.replace(reg1,' ');
            elements[i].className = elements[i].className.replace(reg2,'');
            elements[i].className = elements[i].className.replace(reg3,'');

            if (elements[i].className.trim() == '') elements[i].removeAttribute('class');
        }
    }

    /**
     * Get the closest matching element up the DOM tree.
     * @private
     * @param  {Element} element - Starting element
     * @param  {String}  selector Selector to match against
     * @return {Boolean|Element}  Returns null if no match found
     */
    function getClosest(element, selector) {
        // Element.matches() polyfill
        if (!Element.prototype.matches) {
            Element.prototype.matches =
            Element.prototype.matchesSelector ||
            Element.prototype.mozMatchesSelector ||
            Element.prototype.msMatchesSelector ||
            Element.prototype.oMatchesSelector ||
            Element.prototype.webkitMatchesSelector ||
            function(s) {
                var matches = (this.document || this.ownerDocument).querySelectorAll(s),
                    i = matches.length;
                while (--i >= 0 && matches.item(i) !== this) {}
                return i > -1;
            };
        }

        // Get closest match
        for ( ; element && element !== document; element = element.parentNode ) {
            if ( element.matches( selector ) ) return element;
        }

        return null;
    };

    function createBackdrop() {
        var existingBackdrop = document.getElementById('vsm-backdrop');
        if (!existingBackdrop) {
            var backDrop = document.createElement('div');
            backDrop.id = 'vsm-backdrop';
            backDrop.style.opacity = 0;
            backDrop.style.transition = 'opacity linear .3s';
            getModalContainer().appendChild(backDrop);

            showBackdrop();
        }
    }

    function showBackdrop() {
        var existingBackdrop = document.getElementById('vsm-backdrop');
        if (!existingBackdrop) {
            createBackdrop();
        }
        setTimeout(function(){
            existingBackdrop.style.opacity = 0.55
            existingBackdrop.onTransitionEndOnce(function(){});
        }, 0);
    }

    function hideBackdrop() {
        var existingBackdrop = document.getElementById('vsm-backdrop');
        if (existingBackdrop) {
            existingBackdrop.style.opacity = 0;
            existingBackdrop.onTransitionEndOnce(function(){
                existingBackdrop.parentNode.removeChild(existingBackdrop);
            });
        }
    }

    function hideModals() {
        var allModals = document.querySelectorAll('.vsm-modal:not(#vsm_modal_base)'),
        currentBase = document.querySelectorAll('.vsm-modal.in')[0];

        var copyOfArray = infoArray.slice(0), copyOfDataArray = dataArray.slice(0);

        infoArray = [];
        dataArray = [];
        disCountinued = true;

        if (modalArray.indexOf(currentBase.getAttribute('id')) > -1) {
            currentBase.style.opacity = 0;
            currentBase.onTransitionEndOnce(function(){
                [].forEach.call(allModals, function (thisModal) {
                    var thisID = thisModal.getAttribute('id');
                    if (modalArray.indexOf(thisID) > -1) {
                        thisModal.parentNode.removeChild(thisModal);
                    }
                });

                var infoBaseObj = {};

                for (var i = 0; i < copyOfArray.length; i++) {
                  var splittedArray = copyOfArray[i].split(':');
                  if (splittedArray.length == 2) {
                      infoBaseObj[splittedArray[0]] = splittedArray[1];
                  }
                }

                if (options.callback && typeof options.callback == 'function') {
                    var outObj = {
                        FinalSelectionMade: false,
                        Vehicle: infoBaseObj,
                        FullSelectionData: copyOfDataArray
                    }
                    options.callback(outObj);
                }
                else {
                    console.warn('No callback function provided.');
                }
            });
            hideBackdrop();
            removeClass(document.body, 'vsm-modal-open');
        }
        else {
            console.warn('This vsm instance is not shown yet.');
        }
    }

    /**
     * Return the container that modals should be appended to
     */
    function getModalContainer() {
        if (typeof options.container === 'function') return options.container();

        if (options.container) return options.container;

        return document.body;
    }

    /*Load HTML code and append to body*/
    function loadBase() {
        var existingModal = document.getElementById('vsm_modal_base');
        if (!existingModal) {
            var divEle = document.createElement('div');
            divEle.innerHTML = vsm_template;
            getModalContainer().appendChild(divEle.firstChild);
        }
    }

    /**
     * Generate and prepare modal screen
     * @private
     * @param  {Function} prepareFunction - The function to prepare the modal
     * @param  {Object} prepareFunctionOptions - Options to pass in
     * @param  {Object} transitionModal - The modal screen to transition to
     * @return {Element}  Returns the prepared modal
     */
    function base(prepareFunction, prepareFunctionOptions, transitionModal) {
        var modalBase = document.getElementById('vsm_modal_base');
        if (!modalBase) return undefined;
        //Make a copy of #vsm_modal_base
        var modalBaseCopy = modalBase.cloneNode(true);

        //Override id of modalBaseCopy and append to body
        modalBaseCopy.id = 'vsm_modal_' + _vsmModalIDCounter;
        modalArray.push('vsm_modal_' + _vsmModalIDCounter);
        modalBaseCopy.className += ' vsm_modal_' + _vsmModalIDCounter;
        getModalContainer().appendChild(modalBaseCopy);

        //Setup transition
        if (typeof(transitionModal) !== 'undefined') {
            prepareFunctionOptions = extend({
                backModal: transitionModal,
                thisModal: modalBaseCopy
            }, prepareFunctionOptions);

            var backLinks = modalBaseCopy.querySelectorAll('.vsm-back-step');
            [].forEach.call(backLinks, function (backLink) {
                var backHandler = function(e){
                    e.target.removeEventListener(e.type, backHandler);
                    var bm = prepareFunctionOptions.backModal,
                    bc = prepareFunctionOptions.thisModal;
                    transitionToModal(bm, bc, true)
                    .done(
                        function(){
                            if (infoArray.length) infoArray.pop();
                            if (dataArray.length) dataArray.pop();
                            if (bc.parentNode) bc.parentNode.removeChild(bc);

                            if (options.afterBackClicked && typeof options.afterBackClicked == 'function') {
                                var infoBaseObj = {};

                                for (var i = 0; i < infoArray.length; i++) {
                                  var splittedArray = infoArray[i].split(':');
                                  if (splittedArray.length == 2) {
                                      infoBaseObj[splittedArray[0]] = splittedArray[1];
                                  }
                                }

                                var outInfoObj = {
                                    FullSelection: infoBaseObj,
                                    FullSelectionData: dataArray
                                }

                                options.afterBackClicked(outInfoObj);
                            }
                        }
                    )
                }
                backLink.addEventListener('click', backHandler, false);
            });
        }

        //Call the prepare function to initialize the new modal
        if (typeof prepareFunction === "function") prepareFunction(modalBaseCopy, prepareFunctionOptions);

        //bind click event to close the modal
        var closeButtons = modalBaseCopy.querySelectorAll('.vsm-close');
        [].forEach.call(closeButtons, function (closeButton) {
            closeButton.onclick = function(){
                hideModals();
            };
        });

        _vsmModalIDCounter++;

        return modalBaseCopy;
    }

    /**
     * Transition between modal
     * @private
     * @param  {Element} toModal - The modal to transition to
     * @param  {Element} fromModal - The current modal to transition from
     * @param  {Boolean} backwards - set to true, if transition from higher index to lower index
     * @return {RideStylerPromise} - Returns a promise that will resolve when the transition is complete
     */
    function transitionToModal(toModal, fromModal, backwards) {
        backwards = !! backwards;

        if (!toModal || !fromModal)
            return;

        /** @type {RideStylerPromise} */
        var fromAnimatePromise = ridestyler.promise(),
            toAnimatePromise = ridestyler.promise();

        if (!backwards) {
            var fromZ = parseInt(fromModal.style.zIndex, 10) || 0,
                toZ = parseInt(toModal.style.zIndex, 10) || 0;
            if (toZ <= fromZ) toZ = fromZ + 1;
            toModal.style.zIndex = toZ;
        }

        if (transitionSupport) {
            if (backwards) {
                toModal.style.display = 'block';
                addClass(toModal, 'in');

                toAnimatePromise.resolve();

                setTimeout(function() {
                    removeClass(fromModal, 'in');
                    fromModal.onTransitionEndOnce(function(){
                        fromModal.style.display = 'none';
                        fromAnimatePromise.resolve();
                    })
                }, 50);
            }
            else {
                toModal.style.display = 'block';

                setTimeout(function() {
                    addClass(toModal, 'in');
                    toModal.onTransitionEndOnce(function(){
                        fromModal.style.display = 'none';
                        removeClass(fromModal, 'in');

                        toAnimatePromise.resolve();
                        fromAnimatePromise.resolve();
                    })
                }, 50);
            }
        }
        else {
            if (backwards) {
                toModal.style.display = 'block';
                addClass(toModal, 'in');

                removeClass(fromModal, 'in');
                fromModal.style.display = 'none';
            }
            else {
                toModal.style.display = 'block';
                addClass(toModal, 'in');

                fromModal.style.display = 'none';
                removeClass(fromModal, 'in');
            }

            toAnimatePromise.resolve();
            fromAnimatePromise.resolve();
        }

        var allPromise = ridestyler.promise();
        var onPromiseChange = function () {
            var toState = toAnimatePromise.state(),
                fromState = fromAnimatePromise.state();

            // Still waiting for resolution
            if (toState === 0 || fromState === 0) return;

            // One promise has been rejected but the other is resolved
            if (toState === 2 || fromState === 2) return allPromise.reject();

            // Both promises are resolved
            allPromise.resolve();
        };

        toAnimatePromise.always(onPromiseChange);
        fromAnimatePromise.always(onPromiseChange);

        return allPromise;
    }

    /**
     * Modal preparation: Process the vehicle select request
     * @private
     * @param  {Element} modal - The modal to prepare
     * @return void
     */
    function requestStep(modal, stepOptions) {
        var request = {
            Selection: dataArray
        };

        if (stepOptions && stepOptions.bestConfiguration) {
            showSelection(modal, stepOptions.bestConfiguration);
        }
        else
            ridestyler.ajax.send({
                action: 'Vehicle/Select',
                data: request,
                callback: function (response) {
                    if (response.Success) {
                        if (response.BestConfiguration) {
                            if (options.IncludeOETireOption) {
                                ridestyler.ajax.send({
                                    action: 'Vehicle/GetTireOptionDetails',
                                    data: {'VehicleConfiguration': response.BestConfiguration.Value},
                                    bestConfiguration: response.BestConfiguration,
                                    callback: function (detailResponse) {
                                        if (detailResponse.Success) {
                                            var details = detailResponse.Details,
                                            bestConfiguration = this.bestConfiguration;
                                            if (details.length == 1) {
                                                var detailString = (function (detail) {
                                                    var f = detail.Front['Description'], r = detail.Rear['Description'];
                                                    if (f==r) return f;
                                                    else return "F: " + f + " R: " + r;
                                                })(details[0]);
                                                bestConfiguration.TireOptionBasic = {TireOptionID: details[0]['TireOptionID'], TireOptionString: detailString};
                                                showSelection(modal, bestConfiguration);
                                            }
                                            else {
                                                var optionMenu = {
                                                    Groups: null,
                                                    Description: 'Select Your Tire Size',
                                                    Title: 'Tire Size',
                                                    Key: 'tireoption',
                                                    Options: []
                                                }
                                                for (var i = 0; i < details.length; i++) {
                                                    var detailString = (function (detail) {
                                                        var f = detail.Front['Description'], r = detail.Rear['Description'];
                                                        if (f==r) return f;
                                                        else return "F: " + f + " R: " + r;
                                                    })(details[i]);
                                                    optionMenu.Options.push({Group: null, Label: detailString, Value: details[i]['TireOptionID']});
                                                }
                                                updateModal(modal, optionMenu, bestConfiguration);
                                            }
                                        }
                                        else showSelection(modal, bestConfiguration);
                                    }
                                });
                            }
                            else
                                showSelection(modal, response.BestConfiguration);
                        }
                        else {
                            updateModal(modal, response.Menu);
                        }
                    }
                }
            });
    }

    /**
     * Modal preparation: Update modal content
     * @private
     * @param  {Element} modal - The modal to prepare
     * @param  {Object} menu - Menu object to pass in for modal content update
     * @return void
     */
    function updateModal(modal, menu, bestConfiguration) {
        var itemListContainer = modal.querySelectorAll('.vsm-list-container')[0],
        headerElement = modal.querySelectorAll('.vsm-header')[0],
        bodyElement = modal.querySelectorAll('.vsm-modal-body')[0],
        vsmLinkStyle = modal.querySelectorAll('.vsm-line-step')[0],
        finalScreen = modal.querySelectorAll('.vsm-final')[0];
        var menuOptions = menu.Options,
        menuKey = menu.Key,
        menuTitle = menu.Title,
        menuGroups = menu.Groups;

        var onListItemSelected = function(o) {
            var optionValue = o.getAttribute('data-optionvalue');
            var optionKey = o.getAttribute('data-optionkey');
            var optionLabel = o.getAttribute('data-optionlabel');
            var optionTitle = o.getAttribute('data-menutitle');
            dataArray.push(optionKey + ':' + optionValue);
            infoArray.push(optionTitle + ':' + optionLabel);

            if (options.afterOptionSelected && typeof options.afterOptionSelected == 'function') {
                var infoBaseObj = {};

                for (var i = 0; i < infoArray.length; i++) {
                    var splittedArray = infoArray[i].split(':');
                    if (splittedArray.length == 2) {
                        infoBaseObj[splittedArray[0]] = splittedArray[1];
                    }
                }

                var outInfoObj = {
                    CurrentSelection: {},
                    FullSelection: infoBaseObj,
                    FullSelectionData: dataArray
                }

                outInfoObj.CurrentSelection[optionTitle] = optionLabel;

                options.afterOptionSelected(outInfoObj);
            }

            if (!disCountinued) {
                var transitionOption = {};
                if (optionKey == 'tireoption' && bestConfiguration) {
                    bestConfiguration.TireOptionBasic = {
                        TireOptionID: optionValue,
                        TireOptionString: optionLabel
                    };
                    transitionOption.bestConfiguration = bestConfiguration;
                }
                transitionToModal(
                    base(requestStep, transitionOption, modal),
                    modal
                );
            }
            else {
                return;
            }
        },
        buildListItem = function(optObj) {
            var optionLabel = optObj.Label,
            optionValue = optObj.Value;
            if (typeof optionLabel === 'undefined' || typeof optionValue === 'undefined') {
                return undefined;
            }

            var optionBtn = document.createElement('a'),
            optionText = document.createTextNode(optionLabel);
            optionBtn.className = 'vsm-option-item vsm-btn vsm-btn-gray';
            optionBtn.href = 'javascript:void(0)';
            optionBtn.setAttribute('data-optionvalue', optionValue);
            optionBtn.setAttribute('data-optionlabel', optionLabel);
            optionBtn.appendChild(optionText);

            optionBtn.onclick = function(){
                onListItemSelected(this);
            };
            return optionBtn;
        },
        buildListHeader = function(headerText) {
            var menuSubHeader = document.createElement('p'),
            menuSubHeaderText = document.createTextNode(headerText);
            menuSubHeader.className = 'vsm-group-title';
            menuSubHeader.appendChild(menuSubHeaderText);

            return menuSubHeader;
        };

        //In progress, removing the final screen element from loaded modal
        finalScreen.parentNode.removeChild(finalScreen);
        addClass(vsmLinkStyle, 'vsm-single-step');

        
        //Create right-side progress bar
        var divELe = document.createElement('div'),
        dotEle = document.createElement('i'),
        spanEle = document.createElement('span');
        divELe.className = 'vsm-column-2';
        dotEle.className = 'dot-style dot-before active';
        spanEle.className = 'dot-info dot-info-before active';
        //spanEle.innerHTML = menuTitle;
        divELe.appendChild(dotEle);
        divELe.appendChild(spanEle);

        //Create left-side progress info
        if (!dataArray.length) {
            var notStyleDiv = document.createElement('div');
            notStyleDiv.className = 'vsm-column-2 no-style';
            vsmLinkStyle.appendChild(notStyleDiv);
            vsmLinkStyle.appendChild(divELe);
        }
        else {
            addClass(bodyElement, 'vsm-has-back');
            var notStyleDiv = document.createElement('div');
            /*cellEle = document.createElement('span'),*/
            /*infoEle = document.createElement('span');*/
            notStyleDiv.className = 'vsm-column-2 vsm-before';
            /*cellEle.className = 'vsm-table-cell';
            infoEle.className = 'vsm-selected-info';
            cellEle.appendChild(infoEle);
            notStyleDiv.appendChild(cellEle);*/
            var infoBaseArray = infoArray.map(function (ele) {
                return ele && ele.split(':').length === 2 ? ele.split(':')[1] : '';
            });
            /*infoEle.innerHTML = infoBaseArray.join(' ');*/
            spanEle.innerHTML = infoBaseArray.join(' ');
            vsmLinkStyle.appendChild(notStyleDiv);
            vsmLinkStyle.appendChild(divELe);

        }

        let headerEnd = menu.Description.split(' ').slice(-1)[0].replace(/\b\w/g, function(t){ return t.toUpperCase() });
        let headerStart = menu.Description.split(' '). slice(0,2).join(" ");
        
        // // let letterChecker = menu.Description.split(' ')[1];

        // if ( letterChecker.charAt(0) === 'y') {
        //     // let letterChecker = menu.Description.split(' ').slice(-2)[0].replace(/\b\w/g, function(t){ return t.toUpperCase() });
        // }

        headerElement.innerHTML = headerStart + ' ' + headerEnd;

        //Clear the container
        while (itemListContainer.firstChild) {
            itemListContainer.removeChild(itemListContainer.firstChild);
        }

        if (menuOptions.length) {
            var groupWrap = document.createElement('div');
            groupWrap.className = 'vsm-group-wrap center-piece';
            itemListContainer.appendChild(groupWrap);

            if (options.GroupOptions && menuGroups) {
                var menuGroupedOptions = {};
                for (var i = 0; i < menuOptions.length; i++) {
                    var thisMenuOption = menuOptions[i],
                    thisMenuOptionGroup = thisMenuOption.Group;
                    if (thisMenuOptionGroup) {
                        //If Group value of this option is not null or undefined
                        if (!menuGroupedOptions[thisMenuOptionGroup]) {
                            menuGroupedOptions[thisMenuOptionGroup] = [thisMenuOption];
                        }
                        else {
                            menuGroupedOptions[thisMenuOptionGroup].push(thisMenuOption);
                        }
                    }
                    else {
                        //If Group value of this option is null or undefined, put them in Ungrouped array
                        //May never happen, more like an error handling
                        if (!menuGroupedOptions['_ungrouped']) {
                            menuGroupedOptions['_ungrouped'] = [thisMenuOption];
                        }
                        else {
                            menuGroupedOptions['_ungrouped'].push(thisMenuOption);
                        }
                    }
                }
                //Go through known Groups before checking ungrouped options
                for (var j = 0; j < menuGroups.length; j++) {
                    var menuGroup = menuGroups[j];
                    var subGroup = menuGroupedOptions[menuGroup];
                    if (subGroup) {
                        var groupList = document.createElement('div'),
                        columnClass = 'vsm-one-container';
                        if (menu.Key == 'year' && menuOptions.length > 10) {
                            if (options.YearScreenColumns == 2) columnClass = 'vsm-half-container';
                            if (options.YearScreenColumns >= 3) columnClass = 'vsm-third-container';
                        }
                        if (menu.Key == 'make' && menuOptions.length > 10) {
                            if (options.MakeScreenColumns >= 2) columnClass = 'vsm-half-container';
                        }
                        groupList.className = 'vsm-group-list ' + columnClass;
                        groupWrap.appendChild(buildListHeader(menuGroup));
                        groupWrap.appendChild(groupList);

                        for (var i = 0; i < subGroup.length; i++) {
                            var listItem = buildListItem(subGroup[i]);
                            if (typeof listItem !== 'undefined') {
                                listItem.setAttribute('data-optionkey', menuKey);
                                listItem.setAttribute('data-menutitle', menuTitle);
                                groupList.appendChild(listItem);
                            }
                        }
                    }
                }
                //Check if Ungrouped options exist
                if (menuGroupedOptions['_ungrouped']) {
                    var groupList = document.createElement('div'),
                    columnClass = 'vsm-one-container';
                    if (menu.Key == 'year' && menuOptions.length > 10) {
                        if (options.YearScreenColumns == 2) columnClass = 'vsm-half-container';
                        if (options.YearScreenColumns >= 3) columnClass = 'vsm-third-container';
                    }
                    if (menu.Key == 'make' && menuOptions.length > 10) {
                        if (options.MakeScreenColumns >= 2) columnClass = 'vsm-half-container';
                    }
                    groupList.className = 'vsm-group-list ' + columnClass;
                    groupWrap.appendChild(buildListHeader('Ungrouped'));
                    groupWrap.appendChild(groupList);

                    var subGroup = menuGroupedOptions['_ungrouped'];
                    for (var i = 0; i < subGroup.length; i++) {
                        var listItem = buildListItem(subGroup[i]);
                        if (typeof listItem !== 'undefined') {
                            listItem.setAttribute('data-optionkey', menuKey);
                            listItem.setAttribute('data-menutitle', menuTitle);
                            groupList.appendChild(listItem);
                        }
                    }
                }
            }
            else {
                var groupList = document.createElement('div'),
                columnClass = 'vsm-one-container';
                if (menu.Key == 'year' && menuOptions.length > 10) {
                    if (options.YearScreenColumns == 2) columnClass = 'vsm-half-container';
                    if (options.YearScreenColumns >= 3) columnClass = 'vsm-third-container';
                }
                if (menu.Key == 'make' && menuOptions.length > 10) {
                    if (options.MakeScreenColumns >= 2) columnClass = 'vsm-half-container';
                }
                groupList.className = 'vsm-group-list ' + columnClass;
                groupWrap.appendChild(groupList);

                for (var i = 0; i < menuOptions.length; i++) {
                    var listItem = buildListItem(menuOptions[i]);
                    if (typeof listItem !== 'undefined') {
                        listItem.setAttribute('data-optionkey', menuKey);
                        listItem.setAttribute('data-menutitle', menuTitle);
                        groupList.appendChild(listItem);
                    }
                }
            }
        }
    }

    /**
     * Modal preparation: Show final vehicle selection
     * @private
     * @param  {Element} modal - The modal to prepare
     * @param  {Object} bestConfiguration - bestConfiguration object to pass in for modal content update
     * @return void
     */
    function showSelection(modal, bestConfiguration) {
        var vehicleImage = modal.querySelectorAll('.vsm-vehicle-display')[0],
        vehicleLoader = modal.querySelectorAll('.vsm-final .vsm-loaderIcon')[0],
        nameElement = modal.querySelectorAll('.vehicle-result-name')[0],
        sizeElement = modal.querySelectorAll('.vehicle-result-size')[0],
        confirmButton = modal.querySelectorAll('.vsm-find')[0],
        bodyElement = modal.querySelectorAll('.vsm-modal-body')[0],
        inProgressScreen = modal.querySelectorAll('.vsm-in-progress')[0];

        addClass(bodyElement, 'vsm-has-back');
        confirmButton.innerHTML = options.ConfirmButtonText;

        var infoBaseArray = [], infoBaseObj = {};

        for (var i = 0; i < infoArray.length; i++) {
          var splittedArray = infoArray[i].split(':');
          if (splittedArray.length == 2 && splittedArray[0] != 'Tire Size') {
              infoBaseArray.push(splittedArray[1]);
              infoBaseObj[splittedArray[0]] = splittedArray[1];
          }
        }

        var mainPartString = infoBaseArray[0],
        lastItem = infoBaseArray.pop();

        for (var i = 1; i < infoBaseArray.length; i++) {
            if (i >= 3) break;
            mainPartString += ' ' + infoBaseArray[i];
        }

        var vehicleDesc = mainPartString + ' ' + lastItem;

        nameElement.innerHTML = vehicleDesc;

        addClass(modal.querySelectorAll('.vsm-modal-body')[0], 'vsm-final-screen');
        inProgressScreen.parentNode.removeChild(inProgressScreen);

        var imageSettings = {
            Width: 260,
            Height: 120,
            PositionX: 1,
            PositionY: 1
        };

        if (options.ImageSettings) {
            extend(imageSettings, 
                   typeof options.ImageSettings === "function" ?
                        options.ImageSettings.call(this, options) :
                        options.ImageSettings);
        }

        imageSettings.VehicleConfiguration = bestConfiguration.Value;

        var imageUrl = ridestyler.ajax.url("Vehicle/Render", imageSettings);

        vehicleImage.src = imageUrl;
        vehicleImage.style.display = 'inline-block';
        vehicleImage.onload = function(){
            vehicleLoader.style.display = 'none';
        }

        var confirmHandler = function (e) {
            e.target.removeEventListener(e.type, confirmHandler);
            //Hide modal
            var allModals = document.querySelectorAll('.vsm-modal:not(#vsm_modal_base)'),
            parentBase = getClosest(this, '.vsm-modal');

            var copyOfDataArray = dataArray.slice(0);

            infoArray = [];
            dataArray = [];

            parentBase.style.opacity = 0;
            parentBase.onTransitionEndOnce(function(){
                [].forEach.call(allModals, function (thisModal) {thisModal.parentNode.removeChild(thisModal);});

                var vehicleInfo = {
                    ImageUrl: imageUrl,
                    VehicleDescription: vehicleDesc,
                    VehicleConfiguration: bestConfiguration.Value
                };

                extend(vehicleInfo, infoBaseObj);
                if (bestConfiguration.TireOptionBasic) extend(vehicleInfo, bestConfiguration.TireOptionBasic);
                if (options.callback && typeof options.callback == 'function') {
                    var outObj = {
                        FinalSelectionMade: true,
                        Vehicle: vehicleInfo,
                        FullSelectionData: copyOfDataArray
                    }
                    options.callback(outObj);
                }
                else {
                    hideModals();
                    console.warn('No callback function provided.');
                }
            });
            hideBackdrop();
        }

        confirmButton.addEventListener('click', confirmHandler, false);
    }

    this.Show = function () {
        loadBase();
        //Check for any existing modals
        var allModals = document.querySelectorAll('.vsm-modal:not(#vsm_modal_base)');
        if (allModals.length) {
            console.warn('There is currently another vsm instance running.');
            return;
        }
        var modal = base();
        createBackdrop();
        modal.style.display = 'block';
        disCountinued = false;
        setTimeout(function(){
            addClass(modal, 'in');
            addClass(document.body, 'vsm-modal-open');
            modal.onTransitionEndOnce(function(){
                requestStep(modal);
            })
        }, 50);
    }

    this.Hide = hideModals;
}
/* exported RideStylerViewport */
function RideStylerViewport(elem, options) {
    // UI resources
    var loaderData = 'data:image/gif;base64,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ODwvYj48YnIgLz4KPGJyIC8+CjxiPldhcm5pbmc8L2I+OiAgbXlzcWxfcXVlcnkoKSBbPGEgaHJlZj0nZnVuY3Rpb24ubXlzcWwtcXVlcnknPmZ1bmN0aW9uLm15c3FsLXF1ZXJ5PC9hPl06IENhbid0IGNvbm5lY3QgdG8gbG9jYWwgTXlTUUwgc2VydmVyIHRocm91Z2ggc29ja2V0ICcvdmFyL3J1bi9teXNxbGQvbXlzcWxkLnNvY2snICgyKSBpbiA8Yj4vaG9tZS9hamF4bG9hZC93d3cvbGlicmFpcmllcy9jbGFzcy5teXNxbC5waHA8L2I+IG9uIGxpbmUgPGI+Njg8L2I+PGJyIC8+CjxiciAvPgo8Yj5XYXJuaW5nPC9iPjogIG15c3FsX3F1ZXJ5KCkgWzxhIGhyZWY9J2Z1bmN0aW9uLm15c3FsLXF1ZXJ5Jz5mdW5jdGlvbi5teXNxbC1xdWVyeTwvYT5dOiBBIGxpbmsgdG8gdGhlIHNlcnZlciBjb3VsZCBub3QgYmUgZXN0YWJsaXNoZWQgaW4gPGI+L2hvbWUvYWpheGxvYWQvd3d3L2xpYnJhaXJpZXMvY2xhc3MubXlzcWwucGhwPC9iPiBvbiBsaW5lIDxiPjY4PC9iPjxiciAvPgo8YnIgLz4KPGI+V2FybmluZzwvYj46ICBteXNxbF9xdWVyeSgpIFs8YSBocmVmPSdmdW5jdGlvbi5teXNxbC1xdWVyeSc+ZnVuY3Rpb24ubXlzcWwtcXVlcnk8L2E+XTogQ2FuJ3QgY29ubmVjdCB0byBsb2NhbCBNeVNRTCBzZXJ2ZXIgdGhyb3VnaCBzb2NrZXQgJy92YXIvcnVuL215c3FsZC9teXNxbGQuc29jaycgKDIpIGluIDxiPi9ob21lL2FqYXhsb2FkL3d3dy9saWJyYWlyaWVzL2NsYXNzLm15c3FsLnBocDwvYj4gb24gbGluZSA8Yj42ODwvYj48YnIgLz4KPGJyIC8+CjxiPldhcm5pbmc8L2I+OiAgbXlzcWxfcXVlcnkoKSBbPGEgaHJlZj0nZnVuY3Rpb24ubXlzcWwtcXVlcnknPmZ1bmN0aW9uLm15c3FsLXF1ZXJ5PC9hPl06IEEgbGluayB0byB0aGUgc2VydmVyIGNvdWxkIG5vdCBiZSBlc3RhYmxpc2hlZCBpbiA8Yj4vaG9tZS9hamF4bG9hZC93d3cvbGlicmFpcmllcy9jbGFzcy5teXNxbC5waHA8L2I+IG9uIGxpbmUgPGI+Njg8L2I+PGJyIC8+Cg==';

    // Viewport elements
    /** @type {HTMLElement} */
    var container  = null;
    var loader = null;
    var renderer = null;

    // Stores the current vehicle state for the vehicle
    var active = false;
    var state = { };

    // Make sure our options object is initialized
    options = options || {};

    if (options.state) {
        state = options.state;
    }

    // Attempt to find our container based on the selection string if we can
    if (typeof elem === 'string') {
        if (typeof document.querySelector === 'function') {
            container = document.querySelector(elem);
        } else if (elem[0] === '.') {
            container = document.getElementsByClassName(elem.substring(1));
        } else if (elem[0] === '#') {
            container = document.getElementById(elem.substring(1));
        }
    } else if (typeof elem === 'object') {
        // Is this a DOM element
        if (elem.tagName) {
            container = elem;
        }
    }

    // Make sure we can find our element that we are trying to use for this viewer
    if (!container) console.error('Could not find element specified for: ' + elem);

    // Prepare the container so it can properly wrap the contents
    var isOffsetPositioned = function () {
        var position = container.style.position;
        var isOffsetPositionValue = function (value) {
            return value === 'fixed' || value === 'absolute' || value === 'relative';
        };

        if (isOffsetPositionValue(position)) return true;

        /** @type {CSSStyleDeclaration} */
        var calculatedStyle = 'getComputedStyle' in window ? getComputedStyle(container) : container.runtimeStyle;

        if (!calculatedStyle) return false;

        return isOffsetPositionValue(calculatedStyle.position);
    }();

    // If we're not positioned using offset positioning, set relative positioning on the container
    if (!isOffsetPositioned)
        container.style.position = 'relative';

    // Create our other required elements
    createLoaderElement();

    // Figure out which version of our viewer we want to use
    /*
    if (isCanvasSupported() == false) { // TODO: NEED TO REMOVE THE FALSE REQUIREMENT - WE ARE FLIPPING FOR DEBUG

    } else {
        renderer = new RideStylerImageRenderer(container);
    }
    */

    // We are always using the image renderer since that is all that is supported currently
    renderer = new RideStylerImageRenderer(container);

    var desiredAspectHeight = null;
    if (typeof options.containerAspectRatio === 'number') {
        desiredAspectHeight = options.containerAspectRatio;
    }

    var lastClientWidth = 0;
    var refreshTimeout = 0;
    this.ResizeRenderArea = function() {
        if (container.clientWidth != lastClientWidth) {
            lastClientWidth = container.clientWidth;
            state['width'] = lastClientWidth;

            // If we are maintaining the aspect ratio we need to update that
            if (desiredAspectHeight != null) {
                var height = Math.round(lastClientWidth * desiredAspectHeight);
                container.style.height = height - 200 + 'px';
                state['height'] = height;
            }

            // Make sure our renderer is active before attempt to redraw
            if (active) {
                clearTimeout(refreshTimeout);
                refreshTimeout = setTimeout(function() {
                    // Trigger a refresh on the renderer
                    renderer.Render(state);
                }, 150);
            }
        }
    };

    // Check to see if we should be controlling the container aspect ratio
    if (options.responsive !== false) {
        setInterval(this.ResizeRenderArea, 100);
        this.ResizeRenderArea();
    }

    this.Update = function(instructions) {
        // Let our system know that we are ready to rock
        active = true;
       
        // Make sure our instructions are in an object format
        instructions = prepareArguments(instructions);

        // Inject our variables based on global params
        instructions['width'] = container.clientWidth;
        instructions['height'] = container.clientHeight;

        // Update our internal state and watch for changes
        var hasChanges = false;
        for(var x in instructions) {
            var v1 = state[x];
            var v2 = instructions[x];
            if (v1 != v2) {
                state[x] = v2;
                hasChanges = true;
            }
        }
        // If we didn't make any changes to our internal state we don't need to perform an update
        if (hasChanges == false) {
            var promise = ridestyler.promise();

            promise.resolve();

            return promise;
        }
        return renderer.Render(state);
    };


    this.Reset = function() {
        state = {};
        if (typeof renderer.Reset === 'function') renderer.Reset();
    };


    function prepareArguments(args) {
        var values = {};

        if (typeof args === 'string') {
            var tokens = args.split('?');
            tokens = (tokens.length == 1 ? tokens[0] : tokens[1]).split('&');
            for(var i = 0; i < tokens.length; i++) {
                var kv = tokens[i].split('=');
                var key = decodeURIComponent(kv[0]).toLowerCase();
            
                // Skip over variables that are not used for rendering
                if (key == 'key' || key == 'token') continue;

                values[key] = decodeURIComponent(kv[1]);
            }
        } else {
            // Make sure all keys are in lower case
            for(var k in args) {
                values[k.toLowerCase()] = args[k];
            }
        }

        return values;
    }

    function isCanvasSupported() {
        var elem = document.createElement('canvas');
        return !!(elem.getContext && elem.getContext('2d'));
    } 

    function RideStylerImageRenderer(container) {
        var activeImage = null;
        var retiredImages = [];

        /**
         * @return {RideStylerPromise}
         */
        this.Render = function(instructions) {
            return createNewLayer(instructions);
        };

        this.Reset = function () {
            if (activeImage != null) {
                container.removeChild(activeImage);
                activeImage = null;
            }
        };

        /**
         * @return {RideStylerPromise}
         */
        function createNewLayer(instructions) {
            var promise = ridestyler.promise();
            // Show our loader since we are creating a new layer
            showLoaderElement();


            // Retire our active image if it is available
            if (activeImage != null) {
                // hideOldVehicle();
                retiredImages.push(activeImage);
                activeImage = null;
            }

            // Find all of our old images and fade them to half transparent (if they are visible)
            for(var i = retiredImages.length - 1; i >= 0; i--) {
                var oimg = retiredImages[i];

                // Partially fade out our retired images
                if (oimg.style.opacity > 0.5) oimg.style.opacity = 0.5;
            }
            
            var imageUrl = ridestyler.ajax.url('Vehicle/Render', instructions);


            // Create a new image element for the current render result
            var img = document.createElement('img');
            img.style.position = 'absolute';
            img.style.left = 0;
            img.style.top = 0;
            img.style.opacity = 0;
            img.style.transition = 'opacity linear 300ms';

            // Add our new image layer to the DOM
            container.appendChild(activeImage = img);

            // Listen for our new layer to become ready and display it to the user. Also, cleanup any legacy layers.
            img.onload = function() {
                // Only fade in this IMG if it hasn't already been replaced.
                if (img == activeImage) {
                    hideLoaderElement();
                    img.style.opacity = 1;

                    var removedImages = retiredImages.splice(0, retiredImages.length);
                    // Fade all of our old images out of view
                    for(var i = 0; i < removedImages.length; i++) {
                        removedImages[i].style.opacity = 0;
                    }

                    // Remove the elements after they have had a chance to fade out
                    setTimeout(function() {
                        for(var i = 0; i < removedImages.length; i++) {
                            container.removeChild(removedImages[i]);
                        }
                        promise.resolve();
                    }, 300);
                }
            };

            img.onerror = function () {
                promise.reject();
            };

            // Start loading our image
            img.src = imageUrl;

            return promise;
        }
    }

    function createLoaderElement() {
        loader = document.createElement('img');

        // Set our image
        loader.src = loaderData;

        // Setup style of the element
        loader.style.padding = '5px';
        loader.style.borderRadius = '21px';
        loader.style.background = '#fff';
        loader.style.opacity = 0;
        loader.style.transition = 'opacity linear 300ms';

        // Position in our container
        loader.style.position = 'absolute';
        loader.style.left = '50%';
        loader.style.top = '50%';
        loader.style.zIndex = '50';

        // Offset for size
        loader.style.marginLeft = '-21px';
        loader.style.marginTop = '-21px';

        container.appendChild(loader);
        showLoaderElement();
    }

    function showLoaderElement() {
        loader.style.opacity = 0.75;
    }

    function hideLoaderElement() {
        loader.style.opacity = 0;
    }
}


/*
 * classList.js: Cross-browser full element.classList implementation.
 * 1.1.20170427
 *
 * By Eli Grey, http://eligrey.com
 * License: Dedicated to the public domain.
 *   See https://github.com/eligrey/classList.js/blob/master/LICENSE.md
 */

/*global self, document, DOMException */

/*! @source http://purl.eligrey.com/github/classList.js/blob/master/classList.js */

if ("document" in window.self) {

// Full polyfill for browsers with no classList support
// Including IE < Edge missing SVGElement.classList
if (!("classList" in document.createElement("_")) 
	|| document.createElementNS && !("classList" in document.createElementNS("http://www.w3.org/2000/svg","g"))) {

(function (view) {

"use strict";

if (!('Element' in view)) return;

var
	  classListProp = "classList"
	, protoProp = "prototype"
	, elemCtrProto = view.Element[protoProp]
	, objCtr = Object
	, strTrim = String[protoProp].trim || function () {
		return this.replace(/^\s+|\s+$/g, "");
	}
	, arrIndexOf = Array[protoProp].indexOf || function (item) {
		var
			  i = 0
			, len = this.length
		;
		for (; i < len; i++) {
			if (i in this && this[i] === item) {
				return i;
			}
		}
		return -1;
	}
	// Vendors: please allow content code to instantiate DOMExceptions
	, DOMEx = function (type, message) {
		this.name = type;
		this.code = DOMException[type];
		this.message = message;
	}
	, checkTokenAndGetIndex = function (classList, token) {
		if (token === "") {
			throw new DOMEx(
				  "SYNTAX_ERR"
				, "An invalid or illegal string was specified"
			);
		}
		if (/\s/.test(token)) {
			throw new DOMEx(
				  "INVALID_CHARACTER_ERR"
				, "String contains an invalid character"
			);
		}
		return arrIndexOf.call(classList, token);
	}
	, ClassList = function (elem) {
		var
			  trimmedClasses = strTrim.call(elem.getAttribute("class") || "")
			, classes = trimmedClasses ? trimmedClasses.split(/\s+/) : []
			, i = 0
			, len = classes.length
		;
		for (; i < len; i++) {
			this.push(classes[i]);
		}
		this._updateClassName = function () {
			elem.setAttribute("class", this.toString());
		};
	}
	, classListProto = ClassList[protoProp] = []
	, classListGetter = function () {
		return new ClassList(this);
	}
;
// Most DOMException implementations don't allow calling DOMException's toString()
// on non-DOMExceptions. Error's toString() is sufficient here.
DOMEx[protoProp] = Error[protoProp];
classListProto.item = function (i) {
	return this[i] || null;
};
classListProto.contains = function (token) {
	token += "";
	return checkTokenAndGetIndex(this, token) !== -1;
};
classListProto.add = function () {
	var
		  tokens = arguments
		, i = 0
		, l = tokens.length
		, token
		, updated = false
	;
	do {
		token = tokens[i] + "";
		if (checkTokenAndGetIndex(this, token) === -1) {
			this.push(token);
			updated = true;
		}
	}
	while (++i < l);

	if (updated) {
		this._updateClassName();
	}
};
classListProto.remove = function () {
	var
		  tokens = arguments
		, i = 0
		, l = tokens.length
		, token
		, updated = false
		, index
	;
	do {
		token = tokens[i] + "";
		index = checkTokenAndGetIndex(this, token);
		while (index !== -1) {
			this.splice(index, 1);
			updated = true;
			index = checkTokenAndGetIndex(this, token);
		}
	}
	while (++i < l);

	if (updated) {
		this._updateClassName();
	}
};
classListProto.toggle = function (token, force) {
	token += "";

	var
		  result = this.contains(token)
		, method = result ?
			force !== true && "remove"
		:
			force !== false && "add"
	;

	if (method) {
		this[method](token);
	}

	if (force === true || force === false) {
		return force;
	} else {
		return !result;
	}
};
classListProto.toString = function () {
	return this.join(" ");
};

if (objCtr.defineProperty) {
	var classListPropDesc = {
		  get: classListGetter
		, enumerable: true
		, configurable: true
	};
	try {
		objCtr.defineProperty(elemCtrProto, classListProp, classListPropDesc);
	} catch (ex) { // IE 8 doesn't support enumerable:true
		// adding undefined to fight this issue https://github.com/eligrey/classList.js/issues/36
		// modernie IE8-MSW7 machine has IE8 8.0.6001.18702 and is affected
		if (ex.number === undefined || ex.number === -0x7FF5EC54) {
			classListPropDesc.enumerable = false;
			objCtr.defineProperty(elemCtrProto, classListProp, classListPropDesc);
		}
	}
} else if (objCtr[protoProp].__defineGetter__) {
	elemCtrProto.__defineGetter__(classListProp, classListGetter);
}

}(window.self));

}

// There is full or partial native classList support, so just check if we need
// to normalize the add/remove and toggle APIs.

(function () {
	"use strict";

	var testElement = document.createElement("_");

	testElement.classList.add("c1", "c2");

	// Polyfill for IE 10/11 and Firefox <26, where classList.add and
	// classList.remove exist but support only one argument at a time.
	if (!testElement.classList.contains("c2")) {
		var createMethod = function(method) {
			var original = DOMTokenList.prototype[method];

			DOMTokenList.prototype[method] = function(token) {
				var i, len = arguments.length;

				for (i = 0; i < len; i++) {
					token = arguments[i];
					original.call(this, token);
				}
			};
		};
		createMethod('add');
		createMethod('remove');
	}

	testElement.classList.toggle("c3", false);

	// Polyfill for IE 10 and Firefox <24, where classList.toggle does not
	// support the second argument.
	if (testElement.classList.contains("c3")) {
		var _toggle = DOMTokenList.prototype.toggle;

		DOMTokenList.prototype.toggle = function(token, force) {
			if (1 in arguments && !this.contains(token) === !force) {
				return force;
			} else {
				return _toggle.call(this, token);
			}
		};

	}

	testElement = null;
}());

}

/*!
Copyright (C) 2013-2015 by WebReflection

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.

*/
(function(window){
  /*! (C) WebReflection Mit Style License */
  if (document.createEvent) return;
  var
    DUNNOABOUTDOMLOADED = true,
    READYEVENTDISPATCHED = false,
    ONREADYSTATECHANGE = 'onreadystatechange',
    DOMCONTENTLOADED = 'DOMContentLoaded',
    SECRET = '__IE8__' + Math.random(),
    // Object = window.Object,
    defineProperty = Object.defineProperty ||
    // just in case ...
    function (object, property, descriptor) {
      object[property] = descriptor.value;
    },
    defineProperties = Object.defineProperties ||
    // IE8 implemented defineProperty but not the plural...
    function (object, descriptors) {
      for(var key in descriptors) {
        if (hasOwnProperty.call(descriptors, key)) {
          try {
            defineProperty(object, key, descriptors[key]);
          } catch(o_O) {
            if (window.console) {
              console.log(key + ' failed on object:', object, o_O.message);
            }
          }
        }
      }
    },
    getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor,
    hasOwnProperty = Object.prototype.hasOwnProperty,
    // here IE7 will break like a charm
    ElementPrototype = window.Element.prototype,
    TextPrototype = window.Text.prototype,
    // none of above native constructors exist/are exposed
    possiblyNativeEvent = /^[a-z]+$/,
    // ^ actually could probably be just /^[a-z]+$/
    readyStateOK = /loaded|complete/,
    types = {},
    div = document.createElement('div'),
    html = document.documentElement,
    removeAttribute = html.removeAttribute,
    setAttribute = html.setAttribute,
    valueDesc = function (value) {
      return {
        enumerable: true,
        writable: true,
        configurable: true,
        value: value
      };
    }
  ;

  function commonEventLoop(currentTarget, e, $handlers, synthetic) {
    for(var
      handler,
      continuePropagation,
      handlers = $handlers.slice(),
      evt = enrich(e, currentTarget),
      i = 0, length = handlers.length; i < length; i++
    ) {
      handler = handlers[i];
      if (typeof handler === 'object') {
        if (typeof handler.handleEvent === 'function') {
          handler.handleEvent(evt);
        }
      } else {
        handler.call(currentTarget, evt);
      }
      if (evt.stoppedImmediatePropagation) break;
    }
    continuePropagation = !evt.stoppedPropagation;
    /*
    if (continuePropagation && !synthetic && !live(currentTarget)) {
      evt.cancelBubble = true;
    }
    */
    return (
      synthetic &&
      continuePropagation &&
      currentTarget.parentNode
    ) ?
      currentTarget.parentNode.dispatchEvent(evt) :
      !evt.defaultPrevented
    ;
  }

  function commonDescriptor(get, set) {
    return {
      // if you try with enumerable: true
      // IE8 will miserably fail
      configurable: true,
      get: get,
      set: set
    };
  }

  function commonTextContent(protoDest, protoSource, property) {
    var descriptor = getOwnPropertyDescriptor(
      protoSource || protoDest, property
    );
    defineProperty(
      protoDest,
      'textContent',
      commonDescriptor(
        function () {
          return descriptor.get.call(this);
        },
        function (textContent) {
          descriptor.set.call(this, textContent);
        }
      )
    );
  }

  function enrich(e, currentTarget) {
    e.currentTarget = currentTarget;
    e.eventPhase = (
      // AT_TARGET : BUBBLING_PHASE
      e.target === e.currentTarget ? 2 : 3
    );
    return e;
  }

  function find(array, value) {
    var i = array.length;
    while(i-- && array[i] !== value);
    return i;
  }

  function getTextContent() {
    if (this.tagName === 'BR') return '\n';
    var
      textNode = this.firstChild,
      arrayContent = []
    ;
    while(textNode) {
      if (textNode.nodeType !== 8 && textNode.nodeType !== 7) {
        arrayContent.push(textNode.textContent);
      }
      textNode = textNode.nextSibling;
    }
    return arrayContent.join('');
  }

  function live(self) {
    return self.nodeType !== 9 && html.contains(self);
  }

  function onkeyup(e) {
    var evt = document.createEvent('Event');
    evt.initEvent('input', true, true);
    (e.srcElement || e.fromElement || document).dispatchEvent(evt);
  }

  function onReadyState(e) {
    if (!READYEVENTDISPATCHED && readyStateOK.test(
      document.readyState
    )) {
      READYEVENTDISPATCHED = !READYEVENTDISPATCHED;
      document.detachEvent(ONREADYSTATECHANGE, onReadyState);
      e = document.createEvent('Event');
      e.initEvent(DOMCONTENTLOADED, true, true);
      document.dispatchEvent(e);
    }
  }
  
  function getter(attr) {
    return function() {
      return html[attr] || (document.body && document.body[attr]) || 0;
    };
  }

  function setTextContent(textContent) {
    var node;
    while ((node = this.lastChild)) {
      this.removeChild(node);
    }
    /*jshint eqnull:true */
    if (textContent != null) {
      this.appendChild(document.createTextNode(textContent));
    }
  }

  function verify(self, e) {
    if (!e) {
      e = window.event;
    }
    if (!e.target) {
      e.target = e.srcElement || e.fromElement || document;
    }
    if (!e.timeStamp) {
      e.timeStamp = (new Date()).getTime();
    }
    return e;
  }

  // normalized textContent for:
  //  comment, script, style, text, title
  commonTextContent(
    window.HTMLCommentElement.prototype,
    ElementPrototype,
    'nodeValue'
  );

  commonTextContent(
    window.HTMLScriptElement.prototype,
    null,
    'text'
  );

  commonTextContent(
    TextPrototype,
    null,
    'nodeValue'
  );

  commonTextContent(
    window.HTMLTitleElement.prototype,
    null,
    'text'
  );

  defineProperty(
    window.HTMLStyleElement.prototype,
    'textContent',
    (function(descriptor){
      return commonDescriptor(
        function () {
          return descriptor.get.call(this.styleSheet);
        },
        function (textContent) {
          descriptor.set.call(this.styleSheet, textContent);
        }
      );
    }(getOwnPropertyDescriptor(window.CSSStyleSheet.prototype, 'cssText')))
  );

  var opacityre = /\b\s*alpha\s*\(\s*opacity\s*=\s*(\d+)\s*\)/;
  defineProperty(
    window.CSSStyleDeclaration.prototype,
    'opacity', {
      get: function() {
        var m = this.filter.match(opacityre);
        return m ? (m[1] / 100).toString() : '';
      },
      set: function(value) {
        this.zoom = 1;
        var found = false;
        if (value < 1) {
          value = ' alpha(opacity=' + Math.round(value * 100) + ')';
        }
        else {
          value = '';
        }
        this.filter = this.filter.replace(opacityre,
                        function() { found = true; return value; });
        if (!found && value) {
          this.filter += value;
        }
      }
    }
  );

  defineProperties(
    ElementPrototype,
    {
      // bonus
      textContent: {
        get: getTextContent,
        set: setTextContent
      },
      // http://www.w3.org/TR/ElementTraversal/#interface-elementTraversal
      firstElementChild: {
        get: function () {
          for(var
            childNodes = this.childNodes || [],
            i = 0, length = childNodes.length;
            i < length; i++
          ) {
            if (childNodes[i].nodeType == 1) return childNodes[i];
          }
        }
      },
      lastElementChild: {
        get: function () {
          for(var
            childNodes = this.childNodes || [],
            i = childNodes.length;
            i--;
          ) {
            if (childNodes[i].nodeType == 1) return childNodes[i];
          }
        }
      },
      oninput: {
        get: function () {
          return this._oninput || null;
        },
        set: function (oninput) {
          if (this._oninput) {
            this.removeEventListener('input', this._oninput);
            this._oninput = oninput;
            if (oninput) {
              this.addEventListener('input', oninput);
            }
          }
        }
      },
      previousElementSibling: {
        get: function () {
          var previousElementSibling = this.previousSibling;
          while (previousElementSibling && previousElementSibling.nodeType != 1) {
            previousElementSibling = previousElementSibling.previousSibling;
          }
          return previousElementSibling;
        }
      },
      nextElementSibling: {
        get: function () {
          var nextElementSibling = this.nextSibling;
          while (nextElementSibling && nextElementSibling.nodeType != 1) {
            nextElementSibling = nextElementSibling.nextSibling;
          }
          return nextElementSibling;
        }
      },
      childElementCount: {
        get: function () {
          for(var
            count = 0,
            childNodes = this.childNodes || [],
            i = childNodes.length; i--; count += childNodes[i].nodeType == 1
          );
          return count;
        }
      },
      /*
      // children would be an override
      // IE8 already supports them but with comments too
      // not just nodeType 1
      children: {
        get: function () {
          for(var
            children = [],
            childNodes = this.childNodes || [],
            i = 0, length = childNodes.length;
            i < length; i++
          ) {
            if (childNodes[i].nodeType == 1) {
              children.push(childNodes[i]);
            }
          }
          return children;
        }
      },
      */
      // DOM Level 2 EventTarget methods and events
      addEventListener: valueDesc(function (type, handler, capture) {
        if (typeof handler !== 'function' && typeof handler !== 'object') return;
        var
          self = this,
          ontype = 'on' + type,
          temple =  self[SECRET] ||
                      defineProperty(
                        self, SECRET, {value: {}}
                      )[SECRET],
          currentType = temple[ontype] || (temple[ontype] = {}),
          handlers  = currentType.h || (currentType.h = []),
          e, attr
        ;
        if (!hasOwnProperty.call(currentType, 'w')) {
          currentType.w = function (e) {
            // e[SECRET] is a silent notification needed to avoid
            // fired events during live test
            return e[SECRET] || commonEventLoop(self, verify(self, e), handlers, false);
          };
          // if not detected yet
          if (!hasOwnProperty.call(types, ontype)) {
            // and potentially a native event
            if(possiblyNativeEvent.test(type)) {
              // do this heavy thing
              try {
                // TODO:  should I consider tagName too so that
                //        INPUT[ontype] could be different ?
                e = document.createEventObject();
                // do not clone ever a node
                // specially a document one ...
                // use the secret to ignore them all
                e[SECRET] = true;
                // document a part if a node has never been
                // added to any other node, fireEvent might
                // behave very weirdly (read: trigger unspecified errors)
                if (self.nodeType != 9) {
                  /*jshint eqnull:true */
                  if (self.parentNode == null) {
                    div.appendChild(self);
                  }
                  if ((attr = self.getAttribute(ontype))) {
                    removeAttribute.call(self, ontype);
                  }
                }
                self.fireEvent(ontype, e);
                types[ontype] = true;
              } catch(meh) {
                types[ontype] = false;
                while (div.hasChildNodes()) {
                  div.removeChild(div.firstChild);
                }
              }
              if (attr != null) {
                setAttribute.call(self, ontype, attr);
              }
            } else {
              // no need to bother since
              // 'x-event' ain't native for sure
              types[ontype] = false;
            }
          }
          if ((currentType.n = types[ontype])) {
            self.attachEvent(ontype, currentType.w);
          }
        }
        if (find(handlers, handler) < 0) {
          handlers[capture ? 'unshift' : 'push'](handler);
        }
        if (type === 'input') {
          self.attachEvent('onkeyup', onkeyup);
        }
      }),
      dispatchEvent: valueDesc(function (e) {
        var
          self = this,
          ontype = 'on' + e.type,
          temple =  self[SECRET],
          currentType = temple && temple[ontype],
          valid = !!currentType,
          parentNode
        ;
        if (!e.target) e.target = self;
        return (valid ? (
          currentType.n /* && live(self) */ ?
            self.fireEvent(ontype, e) :
            commonEventLoop(
              self,
              e,
              currentType.h,
              true
            )
        ) : (
          (parentNode = self.parentNode) /* && live(self) */ ?
            parentNode.dispatchEvent(e) :
            true
        )), !e.defaultPrevented;
      }),
      removeEventListener: valueDesc(function (type, handler, capture) {
        if (typeof handler !== 'function' && typeof handler !== 'object') return;
        var
          self = this,
          ontype = 'on' + type,
          temple =  self[SECRET],
          currentType = temple && temple[ontype],
          handlers = currentType && currentType.h,
          i = handlers ? find(handlers, handler) : -1
        ;
        if (-1 < i) handlers.splice(i, 1);
      })
    }
  );

  /* this is not needed in IE8
  defineProperties(window.HTMLSelectElement.prototype, {
    value: {
      get: function () {
        return this.options[this.selectedIndex].value;
      }
    }
  });
  //*/

  // EventTarget methods for Text nodes too
  defineProperties(TextPrototype, {
    addEventListener: valueDesc(ElementPrototype.addEventListener),
    dispatchEvent: valueDesc(ElementPrototype.dispatchEvent),
    removeEventListener: valueDesc(ElementPrototype.removeEventListener)
  });

  defineProperties(
    window.XMLHttpRequest.prototype,
    {
      addEventListener: valueDesc(function (type, handler, capture) {
        var
          self = this,
          ontype = 'on' + type,
          temple =  self[SECRET] ||
                      defineProperty(
                        self, SECRET, {value: {}}
                      )[SECRET],
          currentType = temple[ontype] || (temple[ontype] = {}),
          handlers  = currentType.h || (currentType.h = [])
        ;
        if (find(handlers, handler) < 0) {
          if (!self[ontype]) {
            self[ontype] = function () {
              var e = document.createEvent('Event');
              e.initEvent(type, true, true);
              self.dispatchEvent(e);
            };
          }
          handlers[capture ? 'unshift' : 'push'](handler);
        }
      }),
      dispatchEvent: valueDesc(function (e) {
        var
          self = this,
          ontype = 'on' + e.type,
          temple =  self[SECRET],
          currentType = temple && temple[ontype],
          valid = !!currentType
        ;
        return valid && (
          currentType.n /* && live(self) */ ?
            self.fireEvent(ontype, e) :
            commonEventLoop(
              self,
              e,
              currentType.h,
              true
            )
        );
      }),
      removeEventListener: valueDesc(ElementPrototype.removeEventListener)
    }
  );

  var buttonGetter = getOwnPropertyDescriptor(Event.prototype, 'button').get;
  defineProperties(
    window.Event.prototype,
    {
      bubbles: valueDesc(true),
      cancelable: valueDesc(true),
      preventDefault: valueDesc(function () {
        if (this.cancelable) {
          this.returnValue = false;
        }
      }),
      stopPropagation: valueDesc(function () {
        this.stoppedPropagation = true;
        this.cancelBubble = true;
      }),
      stopImmediatePropagation: valueDesc(function () {
        this.stoppedImmediatePropagation = true;
        this.stopPropagation();
      }),
      initEvent: valueDesc(function(type, bubbles, cancelable){
        this.type = type;
        this.bubbles = !!bubbles;
        this.cancelable = !!cancelable;
        if (!this.bubbles) {
          this.stopPropagation();
        }
      }),
      pageX: {get: function(){ return this._pageX || (this._pageX = this.clientX + window.scrollX - (html.clientLeft || 0)); }},
      pageY: {get: function(){ return this._pageY || (this._pageY = this.clientY + window.scrollY - (html.clientTop || 0)); }},
      which: {get: function(){ return this.keyCode ? this.keyCode : (isNaN(this.button) ? undefined : this.button + 1); }},
      charCode: {get: function(){ return (this.keyCode && this.type == 'keypress') ? this.keyCode : 0; }},
      buttons: {get: function(){ return buttonGetter.call(this); }},
      button: {get: function() {
        var buttons = this.buttons;
        return (buttons & 1 ? 0 : (buttons & 2 ? 2 : (buttons & 4 ? 1 : undefined)));
      }},
      defaultPrevented: {get: function() {
        // if preventDefault() was never called, or returnValue not given a value
        // then returnValue is undefined
        var returnValue = this.returnValue, undef;
        return !(returnValue === undef || returnValue);
      }},
      relatedTarget: {get: function() {
        var type = this.type;
        if (type === 'mouseover') {
          return this.fromElement;
        } else if (type === 'mouseout') {
          return this.toElement;
        } else {
          return null;
        }
      }}
    }
  );

  defineProperties(
    window.HTMLDocument.prototype,
    {
      defaultView: {
        get: function () {
          return this.parentWindow;
        }
      },
      textContent: {
        get: function () {
          return this.nodeType === 11 ? getTextContent.call(this) : null;
        },
        set: function (textContent) {
          if (this.nodeType === 11) {
            setTextContent.call(this, textContent);
          }
        }
      },
      addEventListener: valueDesc(function(type, handler, capture) {
        var self = this;
        ElementPrototype.addEventListener.call(self, type, handler, capture);
        // NOTE:  it won't fire if already loaded, this is NOT a $.ready() shim!
        //        this behaves just like standard browsers
        if (
          DUNNOABOUTDOMLOADED &&
          type === DOMCONTENTLOADED &&
          !readyStateOK.test(
            self.readyState
          )
        ) {
          DUNNOABOUTDOMLOADED = false;
          self.attachEvent(ONREADYSTATECHANGE, onReadyState);
          /* global top */
          if (window == top) {
            (function gonna(e){try{
              self.documentElement.doScroll('left');
              onReadyState();
              }catch(o_O){
              setTimeout(gonna, 50);
            }}());
          }
        }
      }),
      dispatchEvent: valueDesc(ElementPrototype.dispatchEvent),
      removeEventListener: valueDesc(ElementPrototype.removeEventListener),
      createEvent: valueDesc(function(Class){
        var e;
        if (Class !== 'Event') throw new Error('unsupported ' + Class);
        e = document.createEventObject();
        e.timeStamp = (new Date()).getTime();
        return e;
      })
    }
  );

  defineProperties(
    window.Window.prototype,
    {
      getComputedStyle: valueDesc(function(){

        var // partially grabbed from jQuery and Dean's hack
          notpixel = /^(?:[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|))(?!px)[a-z%]+$/,
          position = /^(top|right|bottom|left)$/,
          re = /\-([a-z])/g,
          place = function (match, $1) {
            return $1.toUpperCase();
          }
        ;

        function ComputedStyle(_) {
          this._ = _;
        }

        ComputedStyle.prototype.getPropertyValue = function (name) {
          var
            el = this._,
            style = el.style,
            currentStyle = el.currentStyle,
            runtimeStyle = el.runtimeStyle,
            result,
            left,
            rtLeft
          ;
          if (name == 'opacity') {
            return style.opacity || '1';
          }
          name = (name === 'float' ? 'style-float' : name).replace(re, place);
          result = currentStyle ? currentStyle[name] : style[name];
          if (notpixel.test(result) && !position.test(name)) {
            left = style.left;
            rtLeft = runtimeStyle && runtimeStyle.left;
            if (rtLeft) {
              runtimeStyle.left = currentStyle.left;
            }
            style.left = name === 'fontSize' ? '1em' : result;
            result = style.pixelLeft + 'px';
            style.left = left;
            if (rtLeft) {
              runtimeStyle.left = rtLeft;
            }
          }
          /*jshint eqnull:true */
          return result == null ?
            result : ((result + '') || 'auto');
        };

        // unsupported
        function PseudoComputedStyle() {}
        PseudoComputedStyle.prototype.getPropertyValue = function () {
          return null;
        };

        return function (el, pseudo) {
          return pseudo ?
            new PseudoComputedStyle(el) :
            new ComputedStyle(el);
        };

      }()),

      addEventListener: valueDesc(function (type, handler, capture) {
        var
          self = window,
          ontype = 'on' + type,
          handlers
        ;
        if (!self[ontype]) {
          self[ontype] = function(e) {
            return commonEventLoop(self, verify(self, e), handlers, false) && undefined;
          };
        }
        handlers = self[ontype][SECRET] || (
          self[ontype][SECRET] = []
        );
        if (find(handlers, handler) < 0) {
          handlers[capture ? 'unshift' : 'push'](handler);
        }
      }),
      dispatchEvent: valueDesc(function (e) {
        var method = window['on' + e.type];
        return method ? method.call(window, e) !== false && !e.defaultPrevented : true;
      }),
      removeEventListener: valueDesc(function (type, handler, capture) {
        var
          ontype = 'on' + type,
          handlers = (window[ontype] || Object)[SECRET],
          i = handlers ? find(handlers, handler) : -1
         ;
        if (-1 < i) handlers.splice(i, 1);
      }),
      pageXOffset: {get: getter('scrollLeft')},
      pageYOffset: {get: getter('scrollTop')},
      scrollX: {get: getter('scrollLeft')},
      scrollY: {get: getter('scrollTop')},
      innerWidth: {get: getter('clientWidth')},
      innerHeight: {get: getter('clientHeight')}
    }
  );

  window.HTMLElement = window.Element;

  (function (styleSheets, HTML5Element, i) {
    for (i = 0; i < HTML5Element.length; i++) document.createElement(HTML5Element[i]);
    if (!styleSheets.length) document.createStyleSheet('');
    styleSheets[0].addRule(HTML5Element.join(','), 'display:block;');
  }(document.styleSheets, ['header', 'nav', 'section', 'article', 'aside', 'footer']));
}(this.window || global));
//
// requestAnimationFrame polyfill by Erik Möller.
//  With fixes from Paul Irish and Tino Zijdel
//
//  http://paulirish.com/2011/requestanimationframe-for-smart-animating/
//  http://my.opera.com/emoller/blog/2011/12/20/requestanimationframe-for-smart-er-animating
//
//  MIT license
//
(function() {
    var lastTime = 0;
    var vendors = ['webkit', 'moz'];
    for (var x = 0; x < vendors.length && !window.requestAnimationFrame; ++x) {
        window.requestAnimationFrame = window[vendors[x] + 'RequestAnimationFrame'];
        window.cancelAnimationFrame =
            window[vendors[x] + 'CancelAnimationFrame'] || window[vendors[x] + 'CancelRequestAnimationFrame'];
    }

    if (!window.requestAnimationFrame)
        window.requestAnimationFrame = function(callback) {
            var currTime = new Date().getTime();
            var timeToCall = Math.max(0, 16 - (currTime - lastTime));
            var id = window.setTimeout(function() {
                callback(currTime + timeToCall);
            }, timeToCall);
            lastTime = currTime + timeToCall;
            return id;
        };

    if (!window.cancelAnimationFrame)
        window.cancelAnimationFrame = function(id) {
            clearTimeout(id);
        };
}());
var RideStylerShowcase;
(function (RideStylerShowcase) {
    var api;
    (function (api) {
        var auth;
        (function (auth) {
            function validate() {
                return api.request("auth/validate");
            }
            auth.validate = validate;
        })(auth = api.auth || (api.auth = {}));
    })(api = RideStylerShowcase.api || (RideStylerShowcase.api = {}));
})(RideStylerShowcase || (RideStylerShowcase = {}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9zY3JpcHRzL1JpZGVTdHlsZXJTaG93Y2FzZS5hcGkuYXV0aC50cyJdLCJuYW1lcyI6WyJSaWRlU3R5bGVyU2hvd2Nhc2UiLCJhcGkiLCJhdXRoIiwidmFsaWRhdGUiLCJyZXF1ZXN0Il0sIm1hcHBpbmdzIjoiQUFBQSxJQUFVQSxrQkFBVjtBQUFBLENBQUEsVUFBVUEsa0JBQVYsRUFBNEI7QUFBQyxRQUFBQyxHQUFBO0FBQUEsS0FBQSxVQUFBQSxHQUFBLEVBQUc7QUFBQyxZQUFBQyxJQUFBO0FBQUEsU0FBQSxVQUFBQSxJQUFBLEVBQUk7QUFDakMscUJBQUFDLFFBQUEsR0FBQTtBQUNJLHVCQUFPRixJQUFJRyxPQUFKLENBQVksZUFBWixDQUFQO0FBQ0g7QUFGZUYsaUJBQUFDLFFBQUEsR0FBUUEsUUFBUjtBQUduQixTQUpnQyxFQUFBRCxPQUFBRCxJQUFBQyxJQUFBLEtBQUFELElBQUFDLElBQUEsR0FBSSxFQUFKLENBQUE7QUFJaEMsS0FKNEIsRUFBQUQsTUFBQUQsbUJBQUFDLEdBQUEsS0FBQUQsbUJBQUFDLEdBQUEsR0FBRyxFQUFILENBQUE7QUFJNUIsQ0FKRCxFQUFVRCx1QkFBQUEscUJBQWtCLEVBQWxCLENBQVYiLCJmaWxlIjoic2NyaXB0cy9SaWRlU3R5bGVyU2hvd2Nhc2UuYXBpLmF1dGguanMiLCJzb3VyY2VzQ29udGVudCI6WyJuYW1lc3BhY2UgUmlkZVN0eWxlclNob3djYXNlLmFwaS5hdXRoIHtcbiAgICBleHBvcnQgZnVuY3Rpb24gdmFsaWRhdGUoKSB7XG4gICAgICAgIHJldHVybiBhcGkucmVxdWVzdChcImF1dGgvdmFsaWRhdGVcIik7XG4gICAgfVxufSJdfQ==

var RideStylerShowcase;
(function (RideStylerShowcase) {
    var api;
    (function (api) {
        var settings;
        (function (settings_1) {
            var defaultSettings = {
                EnableSharing: true,
                SuspensionRanges: {
                    Default: {
                        Min: -4,
                        Max: 0
                    },
                    Truck4WD: {
                        Min: -4,
                        Max: 4
                    },
                    Van4WD: {
                        Min: -4,
                        Max: 4
                    }
                },
                UseRawTireDescription: false
            };
            function getSettings() {
                return RideStylerShowcase.PromiseHelper.then(api.request("organization/getsettings", {
                    Keys: ['ENABLE_SHARING', 'SUSPENSION_RANGES', 'RAWTIREDESC']
                }), function (response) {
                    var settings = response.Settings;
                    if (!settings) return defaultSettings;
                    return {
                        EnableSharing: parseBoolean(settings["ENABLE_SHARING"] || defaultSettings.EnableSharing),
                        SuspensionRanges: parseSuspensionRanges(settings["SUSPENSION_RANGES"]),
                        UseRawTireDescription: parseBoolean(settings["RAWTIREDESC"] || defaultSettings.UseRawTireDescription)
                    };
                });
            }
            settings_1.getSettings = getSettings;
            function parseBoolean(boolean) {
                // Not a string, or an empty string, return true or false
                if (typeof boolean !== 'string' || !boolean) return !!boolean;
                var firstChar = boolean[0];
                // True is: the first char being uppercase/lowercase T or Y
                if (firstChar === 'y' || firstChar === 'Y' || firstChar === 't' || firstChar === 'T') return true;
                // False is everything else
                return false;
            }
            function parseSuspensionRanges(suspensionRangesSetting) {
                if (!suspensionRangesSetting) return defaultSettings.SuspensionRanges;
                try {
                    var suspensionRanges = JSON.parse(suspensionRangesSetting);
                    return suspensionRanges;
                } catch (e) {
                    console.error(e);
                    return defaultSettings.SuspensionRanges;
                }
            }
        })(settings = api.settings || (api.settings = {}));
    })(api = RideStylerShowcase.api || (RideStylerShowcase.api = {}));
})(RideStylerShowcase || (RideStylerShowcase = {}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9zY3JpcHRzL1JpZGVTdHlsZXJTaG93Y2FzZS5hcGkuc2V0dGluZ3MudHMiXSwibmFtZXMiOlsiUmlkZVN0eWxlclNob3djYXNlIiwiYXBpIiwic2V0dGluZ3MiLCJzZXR0aW5nc18xIiwiZGVmYXVsdFNldHRpbmdzIiwiRW5hYmxlU2hhcmluZyIsIlN1c3BlbnNpb25SYW5nZXMiLCJEZWZhdWx0IiwiTWluIiwiTWF4IiwiVHJ1Y2s0V0QiLCJWYW40V0QiLCJVc2VSYXdUaXJlRGVzY3JpcHRpb24iLCJnZXRTZXR0aW5ncyIsIlByb21pc2VIZWxwZXIiLCJ0aGVuIiwicmVxdWVzdCIsIktleXMiLCJyZXNwb25zZSIsIlNldHRpbmdzIiwicGFyc2VCb29sZWFuIiwicGFyc2VTdXNwZW5zaW9uUmFuZ2VzIiwiYm9vbGVhbiIsImZpcnN0Q2hhciIsInN1c3BlbnNpb25SYW5nZXNTZXR0aW5nIiwic3VzcGVuc2lvblJhbmdlcyIsIkpTT04iLCJwYXJzZSIsImUiLCJjb25zb2xlIiwiZXJyb3IiXSwibWFwcGluZ3MiOiJBQUFBLElBQVVBLGtCQUFWO0FBQUEsQ0FBQSxVQUFVQSxrQkFBVixFQUE0QjtBQUFDLFFBQUFDLEdBQUE7QUFBQSxLQUFBLFVBQUFBLEdBQUEsRUFBRztBQUFDLFlBQUFDLFFBQUE7QUFBQSxTQUFBLFVBQUFDLFVBQUEsRUFBUTtBQVlyQyxnQkFBSUMsa0JBQW9EO0FBQ3BEQywrQkFBZSxJQURxQztBQUVwREMsa0NBQWtCO0FBQ2RDLDZCQUFTO0FBQ0xDLDZCQUFLLENBQUMsQ0FERDtBQUVMQyw2QkFBSztBQUZBLHFCQURLO0FBS2RDLDhCQUFVO0FBQ05GLDZCQUFLLENBQUMsQ0FEQTtBQUVOQyw2QkFBSztBQUZDLHFCQUxJO0FBU2RFLDRCQUFRO0FBQ0pILDZCQUFLLENBQUMsQ0FERjtBQUVKQyw2QkFBSztBQUZEO0FBVE0saUJBRmtDO0FBZ0JwREcsdUNBQXVCO0FBaEI2QixhQUF4RDtBQW1CQSxxQkFBQUMsV0FBQSxHQUFBO0FBQ0ksdUJBQU9iLG1CQUFBYyxhQUFBLENBQWNDLElBQWQsQ0FBbUJkLElBQUllLE9BQUosQ0FBWSwwQkFBWixFQUF3QztBQUM5REMsMEJBQU0sQ0FDRixnQkFERSxFQUVGLG1CQUZFLEVBR0YsYUFIRTtBQUR3RCxpQkFBeEMsQ0FBbkIsRUFNSCxvQkFBVztBQUNYLHdCQUFJZixXQUFXZ0IsU0FBU0MsUUFBeEI7QUFFQSx3QkFBSSxDQUFDakIsUUFBTCxFQUFlLE9BQU9FLGVBQVA7QUFFZiwyQkFBTztBQUNIQyx1Q0FBZWUsYUFBYWxCLFNBQVMsZ0JBQVQsS0FBOEJFLGdCQUFnQkMsYUFBM0QsQ0FEWjtBQUVIQywwQ0FBa0JlLHNCQUFzQm5CLFNBQVMsbUJBQVQsQ0FBdEIsQ0FGZjtBQUdIVSwrQ0FBdUJRLGFBQWFsQixTQUFTLGFBQVQsS0FBMkJFLGdCQUFnQlEscUJBQXhEO0FBSHBCLHFCQUFQO0FBS0gsaUJBaEJNLENBQVA7QUFrQkg7QUFuQmVULHVCQUFBVSxXQUFBLEdBQVdBLFdBQVg7QUFxQmhCLHFCQUFBTyxZQUFBLENBQXNCRSxPQUF0QixFQUE0QztBQUN4QztBQUNBLG9CQUFJLE9BQU9BLE9BQVAsS0FBbUIsUUFBbkIsSUFBK0IsQ0FBQ0EsT0FBcEMsRUFBNkMsT0FBTyxDQUFDLENBQUNBLE9BQVQ7QUFFN0Msb0JBQUlDLFlBQVlELFFBQVEsQ0FBUixDQUFoQjtBQUVBO0FBQ0Esb0JBQUlDLGNBQWMsR0FBZCxJQUFxQkEsY0FBYyxHQUFuQyxJQUEwQ0EsY0FBYyxHQUF4RCxJQUErREEsY0FBYyxHQUFqRixFQUFzRixPQUFPLElBQVA7QUFFdEY7QUFDQSx1QkFBTyxLQUFQO0FBQ0g7QUFFRCxxQkFBQUYscUJBQUEsQ0FBK0JHLHVCQUEvQixFQUE2RDtBQUN6RCxvQkFBSSxDQUFDQSx1QkFBTCxFQUE4QixPQUFPcEIsZ0JBQWdCRSxnQkFBdkI7QUFFOUIsb0JBQUk7QUFDQSx3QkFBSW1CLG1CQUF5RUMsS0FBS0MsS0FBTCxDQUFXSCx1QkFBWCxDQUE3RTtBQUVBLDJCQUFPQyxnQkFBUDtBQUNILGlCQUpELENBSUUsT0FBT0csQ0FBUCxFQUFVO0FBQ1JDLDRCQUFRQyxLQUFSLENBQWNGLENBQWQ7QUFFQSwyQkFBT3hCLGdCQUFnQkUsZ0JBQXZCO0FBQ0g7QUFDSjtBQUNKLFNBOUVnQyxFQUFBSixXQUFBRCxJQUFBQyxRQUFBLEtBQUFELElBQUFDLFFBQUEsR0FBUSxFQUFSLENBQUE7QUE4RWhDLEtBOUU0QixFQUFBRCxNQUFBRCxtQkFBQUMsR0FBQSxLQUFBRCxtQkFBQUMsR0FBQSxHQUFHLEVBQUgsQ0FBQTtBQThFNUIsQ0E5RUQsRUFBVUQsdUJBQUFBLHFCQUFrQixFQUFsQixDQUFWIiwiZmlsZSI6InNjcmlwdHMvUmlkZVN0eWxlclNob3djYXNlLmFwaS5zZXR0aW5ncy5qcyIsInNvdXJjZXNDb250ZW50IjpbIm5hbWVzcGFjZSBSaWRlU3R5bGVyU2hvd2Nhc2UuYXBpLnNldHRpbmdzIHtcbiAgICBleHBvcnQgaW50ZXJmYWNlIFJpZGVTdHlsZXJTaG93Y2FzZVNldHRpbmdzRnJvbUFQSSB7XG4gICAgICAgIEVuYWJsZVNoYXJpbmc6IGJvb2xlYW47XG4gICAgICAgIFN1c3BlbnNpb25SYW5nZXM6IHtcbiAgICAgICAgICAgIFtzdHlsZVR5cGVEcml2ZVR5cGU6c3RyaW5nXTp7XG4gICAgICAgICAgICAgICAgTWluOiBudW1iZXIsXG4gICAgICAgICAgICAgICAgTWF4OiBudW1iZXJcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgVXNlUmF3VGlyZURlc2NyaXB0aW9uOiBib29sZWFuO1xuICAgIH1cblxuICAgIGxldCBkZWZhdWx0U2V0dGluZ3M6UmlkZVN0eWxlclNob3djYXNlU2V0dGluZ3NGcm9tQVBJID0ge1xuICAgICAgICBFbmFibGVTaGFyaW5nOiB0cnVlLFxuICAgICAgICBTdXNwZW5zaW9uUmFuZ2VzOiB7XG4gICAgICAgICAgICBEZWZhdWx0OiB7XG4gICAgICAgICAgICAgICAgTWluOiAtNCxcbiAgICAgICAgICAgICAgICBNYXg6IDBcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBUcnVjazRXRDoge1xuICAgICAgICAgICAgICAgIE1pbjogLTQsXG4gICAgICAgICAgICAgICAgTWF4OiA0XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgVmFuNFdEOiB7XG4gICAgICAgICAgICAgICAgTWluOiAtNCxcbiAgICAgICAgICAgICAgICBNYXg6IDRcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgVXNlUmF3VGlyZURlc2NyaXB0aW9uOiBmYWxzZVxuICAgIH07XG5cbiAgICBleHBvcnQgZnVuY3Rpb24gZ2V0U2V0dGluZ3MoKTpSaWRlU3R5bGVyUHJvbWlzZTxSaWRlU3R5bGVyU2hvd2Nhc2VTZXR0aW5nc0Zyb21BUEksIHJpZGVzdHlsZXIuUmlkZVN0eWxlckFQSVJlc3BvbnNlPiB7XG4gICAgICAgIHJldHVybiBQcm9taXNlSGVscGVyLnRoZW4oYXBpLnJlcXVlc3QoXCJvcmdhbml6YXRpb24vZ2V0c2V0dGluZ3NcIiwge1xuICAgICAgICAgICAgS2V5czogW1xuICAgICAgICAgICAgICAgICdFTkFCTEVfU0hBUklORycsXG4gICAgICAgICAgICAgICAgJ1NVU1BFTlNJT05fUkFOR0VTJyxcbiAgICAgICAgICAgICAgICAnUkFXVElSRURFU0MnXG4gICAgICAgICAgICBdXG4gICAgICAgIH0pLCByZXNwb25zZSA9PiB7XG4gICAgICAgICAgICBsZXQgc2V0dGluZ3MgPSByZXNwb25zZS5TZXR0aW5ncztcblxuICAgICAgICAgICAgaWYgKCFzZXR0aW5ncykgcmV0dXJuIGRlZmF1bHRTZXR0aW5ncztcblxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBFbmFibGVTaGFyaW5nOiBwYXJzZUJvb2xlYW4oc2V0dGluZ3NbXCJFTkFCTEVfU0hBUklOR1wiXSB8fCBkZWZhdWx0U2V0dGluZ3MuRW5hYmxlU2hhcmluZyksXG4gICAgICAgICAgICAgICAgU3VzcGVuc2lvblJhbmdlczogcGFyc2VTdXNwZW5zaW9uUmFuZ2VzKHNldHRpbmdzW1wiU1VTUEVOU0lPTl9SQU5HRVNcIl0pLFxuICAgICAgICAgICAgICAgIFVzZVJhd1RpcmVEZXNjcmlwdGlvbjogcGFyc2VCb29sZWFuKHNldHRpbmdzW1wiUkFXVElSRURFU0NcIl0gfHwgZGVmYXVsdFNldHRpbmdzLlVzZVJhd1RpcmVEZXNjcmlwdGlvbilcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBwYXJzZUJvb2xlYW4oYm9vbGVhbjpzdHJpbmd8Ym9vbGVhbik6Ym9vbGVhbiB7XG4gICAgICAgIC8vIE5vdCBhIHN0cmluZywgb3IgYW4gZW1wdHkgc3RyaW5nLCByZXR1cm4gdHJ1ZSBvciBmYWxzZVxuICAgICAgICBpZiAodHlwZW9mIGJvb2xlYW4gIT09ICdzdHJpbmcnIHx8ICFib29sZWFuKSByZXR1cm4gISFib29sZWFuO1xuXG4gICAgICAgIGxldCBmaXJzdENoYXIgPSBib29sZWFuWzBdO1xuXG4gICAgICAgIC8vIFRydWUgaXM6IHRoZSBmaXJzdCBjaGFyIGJlaW5nIHVwcGVyY2FzZS9sb3dlcmNhc2UgVCBvciBZXG4gICAgICAgIGlmIChmaXJzdENoYXIgPT09ICd5JyB8fCBmaXJzdENoYXIgPT09ICdZJyB8fCBmaXJzdENoYXIgPT09ICd0JyB8fCBmaXJzdENoYXIgPT09ICdUJykgcmV0dXJuIHRydWU7XG5cbiAgICAgICAgLy8gRmFsc2UgaXMgZXZlcnl0aGluZyBlbHNlXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgXG4gICAgZnVuY3Rpb24gcGFyc2VTdXNwZW5zaW9uUmFuZ2VzKHN1c3BlbnNpb25SYW5nZXNTZXR0aW5nOnN0cmluZyk6UmlkZVN0eWxlclNob3djYXNlU2V0dGluZ3NGcm9tQVBJW1wiU3VzcGVuc2lvblJhbmdlc1wiXSB7XG4gICAgICAgIGlmICghc3VzcGVuc2lvblJhbmdlc1NldHRpbmcpIHJldHVybiBkZWZhdWx0U2V0dGluZ3MuU3VzcGVuc2lvblJhbmdlcztcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgbGV0IHN1c3BlbnNpb25SYW5nZXM6UmlkZVN0eWxlclNob3djYXNlU2V0dGluZ3NGcm9tQVBJW1wiU3VzcGVuc2lvblJhbmdlc1wiXSA9IEpTT04ucGFyc2Uoc3VzcGVuc2lvblJhbmdlc1NldHRpbmcpO1xuXG4gICAgICAgICAgICByZXR1cm4gc3VzcGVuc2lvblJhbmdlcztcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlKTtcblxuICAgICAgICAgICAgcmV0dXJuIGRlZmF1bHRTZXR0aW5ncy5TdXNwZW5zaW9uUmFuZ2VzO1xuICAgICAgICB9XG4gICAgfVxufSJdfQ==

var RideStylerShowcase;
(function (RideStylerShowcase) {
    var api = void 0;
    (function (api) {
        /**
         * Initialize the RideStyler API by passing in a user/password combination, a user token, or a key.
         * @param settings The API initialization settings
         * @returns A promise that is resolved (or rejected) when the API is authenticated (or fails authentication)
         */
        function initialize(settings) {
            // If authentication information was passed in, let's use that
            if (settings) {
                if ('username' in settings && 'password' in settings) {
                    // Login using a username and password
                    settings = settings;
                    ridestyler.auth.start({
                        data: {
                            Username: settings.username,
                            Password: settings.password
                        },
                        callback: function callback(response) {
                            if (response.Success) api.authenticated.resolve();else api.authenticated.reject();
                        }
                    });
                    this.getURL();
                    // Skip calling validate below
                    return;
                } else if ('token' in settings || 'key' in settings) {
                    // Login using a key or token
                    ridestyler.auth.set(settings);
                }
            }
            // Validate the user's key or token
            api.auth.validate().done(function () {
                var url = ridestyler.ajax.url('', undefined);
                if (/\/api-alpha\./i.test(url)) api.environment = Environment.Alpha;else if (/\/api-beta\./i.test(url)) api.environment = Environment.Beta;else if (/\/api\./i.test(url)) api.environment = Environment.Live;else api.environment = Environment.Other;
                api.authenticated.resolve();
            }).fail(function () {
                return api.authenticated.reject();
            });
            return api.authenticated;
        }
        api.initialize = initialize;
        api.authenticated = ridestyler.promise();
        function isAuthenticated() {
            return api.authenticated.state() === 1 /* Resolved */;
        }
        api.isAuthenticated = isAuthenticated;
        function afterAuthenticated(callback) {
            if (isAuthenticated()) callback();else api.authenticated.done(function () {
                return callback();
            });
        }
        api.afterAuthenticated = afterAuthenticated;
        function request(action, data) {
            var promise = ridestyler.promise();
            ridestyler.ajax.send({
                action: action,
                data: data,
                callback: function callback(response) {
                    if (response.Success) promise.resolve(response);else promise.reject(response);
                }
            });
            return promise;
        }
        api.request = request;
        function getURL(action, data) {
            return ridestyler.ajax.url(action, data);
        }
        api.getURL = getURL;
        var Environment = void 0;
        (function (Environment) {
            Environment[Environment["Alpha"] = 0] = "Alpha";
            Environment[Environment["Beta"] = 1] = "Beta";
            Environment[Environment["Live"] = 2] = "Live";
            Environment[Environment["Other"] = 3] = "Other";
        })(Environment = api.Environment || (api.Environment = {}));
    })(api = RideStylerShowcase.api || (RideStylerShowcase.api = {}));
})(RideStylerShowcase || (RideStylerShowcase = {}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9zY3JpcHRzL1JpZGVTdHlsZXJTaG93Y2FzZS5hcGkudHMiXSwibmFtZXMiOlsiUmlkZVN0eWxlclNob3djYXNlIiwiYXBpIiwiaW5pdGlhbGl6ZSIsInNldHRpbmdzIiwicmlkZXN0eWxlciIsImF1dGgiLCJzdGFydCIsImRhdGEiLCJVc2VybmFtZSIsInVzZXJuYW1lIiwiUGFzc3dvcmQiLCJwYXNzd29yZCIsImNhbGxiYWNrIiwicmVzcG9uc2UiLCJTdWNjZXNzIiwiYXV0aGVudGljYXRlZCIsInJlc29sdmUiLCJyZWplY3QiLCJnZXRVUkwiLCJzZXQiLCJ2YWxpZGF0ZSIsImRvbmUiLCJ1cmwiLCJhamF4IiwidW5kZWZpbmVkIiwidGVzdCIsImVudmlyb25tZW50IiwiRW52aXJvbm1lbnQiLCJBbHBoYSIsIkJldGEiLCJMaXZlIiwiT3RoZXIiLCJmYWlsIiwicHJvbWlzZSIsImlzQXV0aGVudGljYXRlZCIsInN0YXRlIiwiYWZ0ZXJBdXRoZW50aWNhdGVkIiwicmVxdWVzdCIsImFjdGlvbiIsInNlbmQiXSwibWFwcGluZ3MiOiJBQUFBLElBQVVBLGtCQUFWO0FBQUEsQ0FBQSxVQUFVQSxrQkFBVixFQUE0QjtBQVd4QixRQUFpQkMsWUFBakI7QUFBQSxLQUFBLFVBQWlCQSxHQUFqQixFQUFvQjtBQUNoQjs7Ozs7QUFLQSxpQkFBQUMsVUFBQSxDQUEyQkMsUUFBM0IsRUFBZ0k7QUFDNUg7QUFDQSxnQkFBSUEsUUFBSixFQUFjO0FBQ1Ysb0JBQUksY0FBY0EsUUFBZCxJQUEwQixjQUFjQSxRQUE1QyxFQUFzRDtBQUNsRDtBQUNBQSwrQkFBV0EsUUFBWDtBQUVBQywrQkFBV0MsSUFBWCxDQUFnQkMsS0FBaEIsQ0FBc0I7QUFDbEJDLDhCQUFNO0FBQ0ZDLHNDQUFVTCxTQUFTTSxRQURqQjtBQUVGQyxzQ0FBVVAsU0FBU1E7QUFGakIseUJBRFk7QUFLbEJDLGtDQUFVLGtCQUFTQyxRQUFULEVBQWlCO0FBQ3ZCLGdDQUFJQSxTQUFTQyxPQUFiLEVB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QUFDQUEsd0JBQUFBLFlBQUEsTUFBQSxJQUFBLENBQUEsSUFBQSxNQUFBO0FBQ0FBLHdCQUFBQSxZQUFBLE9BQUEsSUFBQSxDQUFBLElBQUEsT0FBQTtBQUNILFNBTEQsRUFBWUEsY0FBQTFCLElBQUEwQixXQUFBLEtBQUExQixJQUFBMEIsV0FBQSxHQUFXLEVBQVgsQ0FBWjtBQVFILEtBdkZELEVBQWlCMUIsTUFBQUQsbUJBQUFDLEdBQUEsS0FBQUQsbUJBQUFDLEdBQUEsR0FBRyxFQUFILENBQWpCO0FBd0ZILENBbkdELEVBQVVELHVCQUFBQSxxQkFBa0IsRUFBbEIsQ0FBViIsImZpbGUiOiJzY3JpcHRzL1JpZGVTdHlsZXJTaG93Y2FzZS5hcGkuanMiLCJzb3VyY2VzQ29udGVudCI6WyJuYW1lc3BhY2UgUmlkZVN0eWxlclNob3djYXNlIHtcclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgUmlkZVN0eWxlclNob3djYXNlQVBJSW5pdGlhbGl6ZVNldHRpbmdze31cclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgUmlkZVN0eWxlclNob3djYXNlQVBJSW5pdGlhbGl6ZVNldHRpbmdzS2V5VG9rZW4gZXh0ZW5kcyBSaWRlU3R5bGVyU2hvd2Nhc2VBUElJbml0aWFsaXplU2V0dGluZ3Mge1xyXG4gICAgICAgIHRva2VuPzpzdHJpbmc7XHJcbiAgICAgICAga2V5PzpzdHJpbmc7XHJcbiAgICB9XHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIFJpZGVTdHlsZXJTaG93Y2FzZUFQSUluaXRpYWxpemVTZXR0aW5nc1VzZXIgZXh0ZW5kcyBSaWRlU3R5bGVyU2hvd2Nhc2VBUElJbml0aWFsaXplU2V0dGluZ3Mge1xyXG4gICAgICAgIHVzZXJuYW1lOiBzdHJpbmc7XHJcbiAgICAgICAgcGFzc3dvcmQ6IHN0cmluZztcclxuICAgIH1cclxuXHJcbiAgICBleHBvcnQgbmFtZXNwYWNlIGFwaSB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogSW5pdGlhbGl6ZSB0aGUgUmlkZVN0eWxlciBBUEkgYnkgcGFzc2luZyBpbiBhIHVzZXIvcGFzc3dvcmQgY29tYmluYXRpb24sIGEgdXNlciB0b2tlbiwgb3IgYSBrZXkuXHJcbiAgICAgICAgICogQHBhcmFtIHNldHRpbmdzIFRoZSBBUEkgaW5pdGlhbGl6YXRpb24gc2V0dGluZ3NcclxuICAgICAgICAgKiBAcmV0dXJucyBBIHByb21pc2UgdGhhdCBpcyByZXNvbHZlZCAob3IgcmVqZWN0ZWQpIHdoZW4gdGhlIEFQSSBpcyBhdXRoZW50aWNhdGVkIChvciBmYWlscyBhdXRoZW50aWNhdGlvbilcclxuICAgICAgICAgKi9cclxuICAgICAgICBleHBvcnQgZnVuY3Rpb24gaW5pdGlhbGl6ZShzZXR0aW5ncz86UmlkZVN0eWxlclNob3djYXNlQVBJSW5pdGlhbGl6ZVNldHRpbmdzS2V5VG9rZW58UmlkZVN0eWxlclNob3djYXNlQVBJSW5pdGlhbGl6ZVNldHRpbmdzVXNlcik6UmlkZVN0eWxlclByb21pc2Uge1xyXG4gICAgICAgICAgICAvLyBJZiBhdXRoZW50aWNhdGlvbiBpbmZvcm1hdGlvbiB3YXMgcGFzc2VkIGluLCBsZXQncyB1c2UgdGhhdFxyXG4gICAgICAgICAgICBpZiAoc2V0dGluZ3MpIHtcclxuICAgICAgICAgICAgICAgIGlmICgndXNlcm5hbWUnIGluIHNldHRpbmdzICYmICdwYXNzd29yZCcgaW4gc2V0dGluZ3MpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBMb2dpbiB1c2luZyBhIHVzZXJuYW1lIGFuZCBwYXNzd29yZFxyXG4gICAgICAgICAgICAgICAgICAgIHNldHRpbmdzID0gc2V0dGluZ3MgYXMgUmlkZVN0eWxlclNob3djYXNlQVBJSW5pdGlhbGl6ZVNldHRpbmdzVXNlcjtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmlkZXN0eWxlci5hdXRoLnN0YXJ0KHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgVXNlcm5hbWU6IHNldHRpbmdzLnVzZXJuYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgUGFzc3dvcmQ6IHNldHRpbmdzLnBhc3N3b3JkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrOiBmdW5jdGlvbihyZXNwb25zZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLlN1Y2Nlc3MpIGF1dGhlbnRpY2F0ZWQucmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBhdXRoZW50aWNhdGVkLnJlamVjdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0VVJMKClcclxuICAgICAgICAgICAgICAgICAgICAvLyBTa2lwIGNhbGxpbmcgdmFsaWRhdGUgYmVsb3dcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCd0b2tlbicgaW4gc2V0dGluZ3MgfHwgJ2tleScgaW4gc2V0dGluZ3MpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBMb2dpbiB1c2luZyBhIGtleSBvciB0b2tlblxyXG4gICAgICAgICAgICAgICAgICAgIHJpZGVzdHlsZXIuYXV0aC5zZXQoc2V0dGluZ3MgYXMgUmlkZVN0eWxlclNob3djYXNlQVBJSW5pdGlhbGl6ZVNldHRpbmdzS2V5VG9rZW4pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBWYWxpZGF0ZSB0aGUgdXNlcidzIGtleSBvciB0b2tlblxyXG4gICAgICAgICAgICBhdXRoLnZhbGlkYXRlKClcclxuICAgICAgICAgICAgICAgIC5kb25lKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB1cmwgPSByaWRlc3R5bGVyLmFqYXgudXJsKCcnLCB1bmRlZmluZWQpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoL1xcL2FwaS1hbHBoYVxcLi9pLnRlc3QodXJsKSkgZW52aXJvbm1lbnQgPSBFbnZpcm9ubWVudC5BbHBoYTtcclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICgvXFwvYXBpLWJldGFcXC4vaS50ZXN0KHVybCkpIGVudmlyb25tZW50ID0gRW52aXJvbm1lbnQuQmV0YTtcclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICgvXFwvYXBpXFwuL2kudGVzdCh1cmwpKSBlbnZpcm9ubWVudCA9IEVudmlyb25tZW50LkxpdmU7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBlbnZpcm9ubWVudCA9IEVudmlyb25tZW50Lk90aGVyO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBhdXRoZW50aWNhdGVkLnJlc29sdmUoKTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAuZmFpbCgoKSA9PiBhdXRoZW50aWNhdGVkLnJlamVjdCgpKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBhdXRoZW50aWNhdGVkO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZXhwb3J0IGxldCBhdXRoZW50aWNhdGVkID0gcmlkZXN0eWxlci5wcm9taXNlKCk7XHJcbiAgICAgICAgZXhwb3J0IGZ1bmN0aW9uIGlzQXV0aGVudGljYXRlZCgpOmJvb2xlYW4ge1xyXG4gICAgICAgICAgICByZXR1cm4gYXV0aGVudGljYXRlZC5zdGF0ZSgpID09PSByaWRlc3R5bGVyLlJpZGVTdHlsZXJQcm9taXNlU3RhdGUuUmVzb2x2ZWQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGV4cG9ydCBmdW5jdGlvbiBhZnRlckF1dGhlbnRpY2F0ZWQoY2FsbGJhY2s6IEZ1bmN0aW9uKSB7XHJcbiAgICAgICAgICAgIGlmIChpc0F1dGhlbnRpY2F0ZWQoKSkgY2FsbGJhY2soKTtcclxuICAgICAgICAgICAgZWxzZSBhdXRoZW50aWNhdGVkLmRvbmUoKCkgPT4gY2FsbGJhY2soKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBleHBvcnQgZnVuY3Rpb24gcmVxdWVzdDxBY3Rpb24gZXh0ZW5kcyBrZXlvZiByaWRlc3R5bGVyLlJpZGVzdHlsZXJBUElBY3Rpb25SZXNwb25zZU1hcHBpbmc+KGFjdGlvbjpBY3Rpb24sIGRhdGE/OnJpZGVzdHlsZXIuUmlkZXN0eWxlckFQSUFjdGlvblJlcXVlc3RNYXBwaW5nW0FjdGlvbl0pIDogUmlkZVN0eWxlclByb21pc2U8cmlkZXN0eWxlci5SaWRlc3R5bGVyQVBJQWN0aW9uUmVzcG9uc2VNYXBwaW5nW0FjdGlvbl0+IHtcclxuICAgICAgICAgICAgdHlwZSBSZXNwb25zZSA9IHJpZGVzdHlsZXIuUmlkZXN0eWxlckFQSUFjdGlvblJlc3BvbnNlTWFwcGluZ1tBY3Rpb25dO1xyXG4gICAgICAgICAgICB2YXIgcHJvbWlzZSA9IHJpZGVzdHlsZXIucHJvbWlzZTxSZXNwb25zZT4oKTtcclxuXHJcbiAgICAgICAgICAgIHJpZGVzdHlsZXIuYWpheC5zZW5kPEFjdGlvbj4oe1xyXG4gICAgICAgICAgICAgICAgYWN0aW9uOiBhY3Rpb24sXHJcbiAgICAgICAgICAgICAgICBkYXRhOiBkYXRhLFxyXG4gICAgICAgICAgICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uIChyZXNwb25zZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5TdWNjZXNzKSBwcm9taXNlLnJlc29sdmUocmVzcG9uc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgcHJvbWlzZS5yZWplY3QocmVzcG9uc2UpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBwcm9taXNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZXhwb3J0IGZ1bmN0aW9uIGdldFVSTDxBY3Rpb24gZXh0ZW5kcyByaWRlc3R5bGVyLlJpZGVTdHlsZXJBUElFbmRwb2ludD4oYWN0aW9uOkFjdGlvbiwgZGF0YT86cmlkZXN0eWxlci5SaWRlc3R5bGVyQVBJQWN0aW9uUmVxdWVzdE1hcHBpbmdbQWN0aW9uXSkgOiBzdHJpbmcge1xyXG4gICAgICAgICAgICByZXR1cm4gcmlkZXN0eWxlci5hamF4LnVybChhY3Rpb24sIGRhdGEpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZXhwb3J0IGVudW0gRW52aXJvbm1lbnQge1xyXG4gICAgICAgICAgICBBbHBoYSxcclxuICAgICAgICAgICAgQmV0YSxcclxuICAgICAgICAgICAgTGl2ZSxcclxuICAgICAgICAgICAgT3RoZXJcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGV4cG9ydCBsZXQgZW52aXJvbm1lbnQ6RW52aXJvbm1lbnQ7XHJcbiAgICB9XHJcbn0iXX0=


//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzY3JpcHRzL1JpZGVTdHlsZXJTaG93Y2FzZS5kYXRhLmpzIiwic291cmNlc0NvbnRlbnQiOltdfQ==

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var RideStylerShowcase;
(function (RideStylerShowcase) {
    var events;
    (function (events) {
        ;

        var EventHandler = function () {
            function EventHandler() {
                _classCallCheck(this, EventHandler);

                this.eventHandlers = {};
            }
            /**
             * Listen for an event
             * @param eventName The name of the event to listen for
             * @param callback  The callback to run when the event is triggered
             */


            _createClass(EventHandler, [{
                key: 'on',
                value: function on(eventName, callback) {
                    if (eventName in this.eventHandlers === false) this.eventHandlers[eventName] = [];
                    this.eventHandlers[eventName].push(callback);
                }
                /**
                 * Stop listening for an event
                 * @param eventName The name of the event to stop listening to
                 * @param callback The callback that was originally registered
                 */

            }, {
                key: 'off',
                value: function off(eventName, callback) {
                    if (eventName in this.eventHandlers === false) return;
                    this.eventHandlers[eventName] = RideStylerShowcase.ArrayHelper.remove(this.eventHandlers[eventName], callback);
                }
                /**
                 * Trigger an event
                 * @param eventName The name of the event to trigger
                 * @param ev        The data to send to the event handlers
                 * @returns         false, if the event has been cancelled by a handler, otherwise true
                 */

            }, {
                key: 'trigger',
                value: function trigger(eventName, ev) {
                    if (typeof this.debugCallback === 'function') this.debugCallback(eventName, ev, this.eventHandlers[eventName] || []);
                    if (eventName in this.eventHandlers === false) return true;
                    var _iteratorNormalCompletion = true;
                    var _didIteratorError = false;
                    var _iteratorError = undefined;

                    try {
                        for (var _iterator = this.eventHandlers[eventName][Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
                            var eventHandler = _step.value;

                            if (eventHandler(ev) === false) return false;
                        }
                    } catch (err) {
                        _didIteratorError = true;
                        _iteratorError = err;
                    } finally {
                        try {
                            if (!_iteratorNormalCompletion && _iterator.return) {
                                _iterator.return();
                            }
                        } finally {
                            if (_didIteratorError) {
                                throw _iteratorError;
                            }
                        }
                    }

                    return true;
                }
            }]);

            return EventHandler;
        }();

        events.EventHandler = EventHandler;
    })(events = RideStylerShowcase.events || (RideStylerShowcase.events = {}));
})(RideStylerShowcase || (RideStylerShowcase = {}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9zY3JpcHRzL1JpZGVTdHlsZXJTaG93Y2FzZS5ldmVudHMudHMiXSwibmFtZXMiOlsiUmlkZVN0eWxlclNob3djYXNlIiwiZXZlbnRzIiwiRXZlbnRIYW5kbGVyIiwiZXZlbnRIYW5kbGVycyIsImV2ZW50TmFtZSIsImNhbGxiYWNrIiwicHVzaCIsIkFycmF5SGVscGVyIiwicmVtb3ZlIiwiZXYiLCJkZWJ1Z0NhbGxiYWNrIiwiZXZlbnRIYW5kbGVyIl0sIm1hcHBpbmdzIjoiOzs7O0FBQUEsSUFBVUEsa0JBQVY7QUFBQSxDQUFBLFVBQVVBLGtCQUFWLEVBQTRCO0FBQUMsUUFBQUMsTUFBQTtBQUFBLEtBQUEsVUFBQUEsTUFBQSxFQUFNO0FBc0I5Qjs7QUF0QjhCLFlBNEIvQkMsWUE1QitCO0FBNEIvQixvQ0FBQTtBQUFBOztBQUNZLHFCQUFBQyxhQUFBLEdBQWtILEVBQWxIO0FBNkNYO0FBM0NHOzs7Ozs7O0FBL0IyQjtBQUFBO0FBQUEsbUNBb0N3Q0MsU0FwQ3hDLEVBb0NzREMsUUFwQ3RELEVBb0MwSTtBQUNqSyx3QkFBSUQsYUFBYSxLQUFLRCxhQUFsQixLQUFvQyxLQUF4QyxFQUErQyxLQUFLQSxhQUFMLENBQW1CQyxTQUFuQixJQUFnQyxFQUFoQztBQUMvQyx5QkFBS0QsYUFBTCxDQUFtQkMsU0FBbkIsRUFBOEJFLElBQTlCLENBQW1DRCxRQUFuQztBQUNIO0FBRUQ7Ozs7OztBQXpDMkI7QUFBQTtBQUFBLG9DQThDeUNELFNBOUN6QyxFQThDdURDLFFBOUN2RCxFQThDMkk7QUFDbEssd0JBQUlELGFBQWEsS0FBS0QsYUFBbEIsS0FBb0MsS0FBeEMsRUFBK0M7QUFDL0MseUJBQUtBLGFBQUwsQ0FBbUJDLFNBQW5CLElBQWdDSixtQkFBQU8sV0FBQSxDQUFZQyxNQUFaLENBQW1CLEtBQUtMLGFBQUwsQ0FBbUJDLFNBQW5CLENBQW5CLEVBQWtEQyxRQUFsRCxDQUFoQztBQUNIO0FBRUQ7Ozs7Ozs7QUFuRDJCO0FBQUE7QUFBQSx3Q0F5RDZDRCxTQXpEN0MsRUF5RDJESyxFQXpEM0QsRUF5RHlHO0FBQ2hJLHdCQUFJLE9BQU8sS0FBS0MsYUFBWixLQUE4QixVQUFsQyxFQUNJLEtBQUtBLGFBQUwsQ0FBbUJOLFNBQW5CLEVBQThCSyxFQUE5QixFQUFrQyxLQUFLTixhQUFMLENBQW1CQyxTQUFuQixLQUFpQyxFQUFuRTtBQUVKLHdCQUFJQSxhQUFhLEtBQUtELGFBQWxCLEtBQW9DLEtBQXhDLEVBQStDLE9BQU8sSUFBUDtBQUppRjtBQUFBO0FBQUE7O0FBQUE7QUFNaEksNkNBQXlCLEtBQUtBLGFBQUwsQ0FBbUJDLFNBQW5CLENBQXpCLDhIQUF3RDtBQUFBLGdDQUEvQ08sWUFBK0M7O0FBQ3BELGdDQUFJQSxhQUFhRixFQUFiLE1BQXFCLEtBQXpCLEVBQWdDLE9BQU8sS0FBUDtBQUNuQztBQVIrSDtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOztBQVVoSSwyQkFBTyxJQUFQO0FBQ0g7QUFwRTBCOztBQUFBO0FBQUE7O0FBNEJsQlIsZUFBQUMsWUFBQSxHQUFZQSxZQUFaO0FBK0NoQixLQTNFNEIsRUFBQUQsU0FBQUQsbUJBQUFDLE1BQUEsS0FBQUQsbUJBQUFDLE1BQUEsR0FBTSxFQUFOLENBQUE7QUEyRTVCLENBM0VELEVBQVVELHVCQUFBQSxxQkFBa0IsRUFBbEIsQ0FBViIsImZpbGUiOiJzY3JpcHRzL1JpZGVTdHlsZXJTaG93Y2FzZS5ldmVudHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJuYW1lc3BhY2UgUmlkZVN0eWxlclNob3djYXNlLmV2ZW50cyB7XHJcbiAgICAvKipcclxuICAgICAqIEEgbWFwcGluZyBvZiBldmVudHMgdGhhdCBjYW4gYmUgdHJpZ2dlcmVkLCBtYXBwZWQgdG8gdGhlaXIgZXZlbnQgcGFyYW1ldGVyIHR5cGVcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGludGVyZmFjZSBSaWRlU3R5bGVyU2hvd2Nhc2VFdmVudFBhcmFtZXRlck1hcHBpbmcge1xyXG4gICAgICAgIFwic3RhdGUtY2hhbmdlZFwiOiBzdGF0ZS5TdGF0ZUNoYW5nZWRFdmVudDtcclxuICAgICAgICBcImluaXRpYWxpemVkXCI6IHVuZGVmaW5lZDtcclxuICAgICAgICBcInZlaGljbGUtc2VsZWN0ZWRcIjogUmlkZVN0eWxlclZlaGljbGVTZWxlY3Rpb25Nb2RhbC5TZWxlY3RlZFZlaGljbGVEYXRhO1xyXG4gICAgICAgIFwibW9kYWwtc2hvd1wiOiB7IG1vZGFsOiBSaWRlU3R5bGVyU2hvd2Nhc2VNb2RhbCB9O1xyXG4gICAgICAgIFwibW9kYWwtaGlkZVwiOiB7IG1vZGFsOiBSaWRlU3R5bGVyU2hvd2Nhc2VNb2RhbCB9O1xyXG4gICAgICAgIFwicmVzaXplXCI6IHVuZGVmaW5lZDtcclxuICAgICAgICBcInJlc2l6ZWRcIjogdW5kZWZpbmVkO1xyXG4gICAgICAgIFwiYnJlYWtwb2ludC1jaGFuZ2VkXCI6IFJpZGVTdHlsZXJTaG93Y2FzZS5zdHlsZXMuQnJlYWtwb2ludDtcclxuICAgICAgICBcInZlaGljbGUtZGVzY3JpcHRpb24tbG9hZGVkXCI6IHJpZGVzdHlsZXIuRGVzY3JpcHRpb25zLlZlaGljbGVEZXNjcmlwdGlvbk1vZGVsO1xyXG4gICAgfVxyXG5cclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgUmlkZVN0eWxlclNob3djYXNlRXZlbnRIYW5kbGVyPERhdGFUeXBlID0gYW55PiB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQHBhcmFtIGV2IFRoZSBldmVudCBkYXRhXHJcbiAgICAgICAgICogQHJldHVybiAgIGZhbHNlIHRvIGNhbmNlbCB0aGUgZXZlbnQgc3RvcCBwcm9jZXNzaW5nIGV2ZW50c1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIChldjogRGF0YVR5cGUpOiBib29sZWFufHZvaWRcclxuICAgIH07XHJcblxyXG4gICAgZXhwb3J0IGludGVyZmFjZSBEZWJ1Z0NhbGxiYWNrIHtcclxuICAgICAgICA8SyBleHRlbmRzIGtleW9mIFJpZGVTdHlsZXJTaG93Y2FzZUV2ZW50UGFyYW1ldGVyTWFwcGluZz4oZXZlbnROYW1lOkssIGV2ZW50RGF0YTogUmlkZVN0eWxlclNob3djYXNlRXZlbnRQYXJhbWV0ZXJNYXBwaW5nW0tdLCBldmVudEhhbmRsZXJzOiBSaWRlU3R5bGVyU2hvd2Nhc2VFdmVudEhhbmRsZXJbXSk6dm9pZDtcclxuICAgIH1cclxuXHJcbiAgICBleHBvcnQgY2xhc3MgRXZlbnRIYW5kbGVyIHtcclxuICAgICAgICBwcml2YXRlIGV2ZW50SGFuZGxlcnM6IHtbZXZlbnROYW1lIGluIGtleW9mIFJpZGVTdHlsZXJTaG93Y2FzZUV2ZW50UGFyYW1ldGVyTWFwcGluZ10/OlJpZGVTdHlsZXJTaG93Y2FzZUV2ZW50SGFuZGxlcltdfSA9IHt9O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBMaXN0ZW4gZm9yIGFuIGV2ZW50XHJcbiAgICAgICAgICogQHBhcmFtIGV2ZW50TmFtZSBUaGUgbmFtZSBvZiB0aGUgZXZlbnQgdG8gbGlzdGVuIGZvclxyXG4gICAgICAgICAqIEBwYXJhbSBjYWxsYmFjayAgVGhlIGNhbGxiYWNrIHRvIHJ1biB3aGVuIHRoZSBldmVudCBpcyB0cmlnZ2VyZWRcclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgb248SyBleHRlbmRzIGtleW9mIFJpZGVTdHlsZXJTaG93Y2FzZUV2ZW50UGFyYW1ldGVyTWFwcGluZz4oZXZlbnROYW1lOiBLLCBjYWxsYmFjazogUmlkZVN0eWxlclNob3djYXNlRXZlbnRIYW5kbGVyPFJpZGVTdHlsZXJTaG93Y2FzZUV2ZW50UGFyYW1ldGVyTWFwcGluZ1tLXT4pOiB2b2lkIHtcclxuICAgICAgICAgICAgaWYgKGV2ZW50TmFtZSBpbiB0aGlzLmV2ZW50SGFuZGxlcnMgPT09IGZhbHNlKSB0aGlzLmV2ZW50SGFuZGxlcnNbZXZlbnROYW1lXSA9IFtdO1xyXG4gICAgICAgICAgICB0aGlzLmV2ZW50SGFuZGxlcnNbZXZlbnROYW1lXS5wdXNoKGNhbGxiYWNrKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFN0b3AgbGlzdGVuaW5nIGZvciBhbiBldmVudFxyXG4gICAgICAgICAqIEBwYXJhbSBldmVudE5hbWUgVGhlIG5hbWUgb2YgdGhlIGV2ZW50IHRvIHN0b3AgbGlzdGVuaW5nIHRvXHJcbiAgICAgICAgICogQHBhcmFtIGNhbGxiYWNrIFRoZSBjYWxsYmFjayB0aGF0IHdhcyBvcmlnaW5hbGx5IHJlZ2lzdGVyZWRcclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgb2ZmPEsgZXh0ZW5kcyBrZXlvZiBSaWRlU3R5bGVyU2hvd2Nhc2VFdmVudFBhcmFtZXRlck1hcHBpbmc+KGV2ZW50TmFtZTogSywgY2FsbGJhY2s6IFJpZGVTdHlsZXJTaG93Y2FzZUV2ZW50SGFuZGxlcjxSaWRlU3R5bGVyU2hvd2Nhc2VFdmVudFBhcmFtZXRlck1hcHBpbmdbS10+KTogdm9pZCB7XHJcbiAgICAgICAgICAgIGlmIChldmVudE5hbWUgaW4gdGhpcy5ldmVudEhhbmRsZXJzID09PSBmYWxzZSkgcmV0dXJuO1xyXG4gICAgICAgICAgICB0aGlzLmV2ZW50SGFuZGxlcnNbZXZlbnROYW1lXSA9IEFycmF5SGVscGVyLnJlbW92ZSh0aGlzLmV2ZW50SGFuZGxlcnNbZXZlbnROYW1lXSwgY2FsbGJhY2spO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVHJpZ2dlciBhbiBldmVudFxyXG4gICAgICAgICAqIEBwYXJhbSBldmVudE5hbWUgVGhlIG5hbWUgb2YgdGhlIGV2ZW50IHRvIHRyaWdnZXJcclxuICAgICAgICAgKiBAcGFyYW0gZXYgICAgICAgIFRoZSBkYXRhIHRvIHNlbmQgdG8gdGhlIGV2ZW50IGhhbmRsZXJzXHJcbiAgICAgICAgICogQHJldHVybnMgICAgICAgICBmYWxzZSwgaWYgdGhlIGV2ZW50IGhhcyBiZWVuIGNhbmNlbGxlZCBieSBhIGhhbmRsZXIsIG90aGVyd2lzZSB0cnVlXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIHRyaWdnZXI8SyBleHRlbmRzIGtleW9mIFJpZGVTdHlsZXJTaG93Y2FzZUV2ZW50UGFyYW1ldGVyTWFwcGluZz4oZXZlbnROYW1lOiBLLCBldjogUmlkZVN0eWxlclNob3djYXNlRXZlbnRQYXJhbWV0ZXJNYXBwaW5nW0tdKTogYm9vbGVhbiB7XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgdGhpcy5kZWJ1Z0NhbGxiYWNrID09PSAnZnVuY3Rpb24nKVxyXG4gICAgICAgICAgICAgICAgdGhpcy5kZWJ1Z0NhbGxiYWNrKGV2ZW50TmFtZSwgZXYsIHRoaXMuZXZlbnRIYW5kbGVyc1tldmVudE5hbWVdIHx8IFtdKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChldmVudE5hbWUgaW4gdGhpcy5ldmVudEhhbmRsZXJzID09PSBmYWxzZSkgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgXHJcbiAgICAgICAgICAgIGZvciAobGV0IGV2ZW50SGFuZGxlciBvZiB0aGlzLmV2ZW50SGFuZGxlcnNbZXZlbnROYW1lXSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGV2ZW50SGFuZGxlcihldikgPT09IGZhbHNlKSByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQWxsb3dzIHRoZSBkZWZpbml0aW9uIG9mIGEgZnVuY3Rpb24gdG8gY2FsbCBmb3IgZGVidWdnaW5nIHRyaWdnZXJlZCBldmVudHNcclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgZGVidWdDYWxsYmFjazogRGVidWdDYWxsYmFjaztcclxuICAgIH1cclxufSJdfQ==

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var RideStylerShowcase;
(function (RideStylerShowcase) {
    var filters;
    (function (filters_1) {
        var FilterController = function () {
            function FilterController() {
                _classCallCheck(this, FilterController);

                this.globalFilters = new GlobalFilterProvider();
                this.tireFilters = new TireFilterProvider(this.globalFilters);
                this.wheelFilters = new WheelFilterProvider(this.globalFilters);
            }

            _createClass(FilterController, [{
                key: 'setVehicle',
                value: function setVehicle(vehicle) {
                    this.clearFilters(false);
                    this.globalFilters.setVehicle(vehicle);
                }
            }, {
                key: 'setVehicleDescription',
                value: function setVehicleDescription(vehicleDescription) {
                    this.wheelFilters.setVehicleDescription(vehicleDescription);
                    this.globalFilters.setVehicleDescription(vehicleDescription);
                }
            }, {
                key: 'clearFilters',
                value: function clearFilters(triggerChange) {
                    this.globalFilters.clear(triggerChange);
                    this.tireFilters.clear(triggerChange);
                    this.wheelFilters.clear(triggerChange);
                }
            }]);

            return FilterController;
        }();

        filters_1.FilterController = FilterController;

        var FilterProvider = function () {
            function FilterProvider(type, globalFilterProvider) {
                _classCallCheck(this, FilterProvider);

                this.type = type;
                this.currentFilters = {};
                this.globalFilterProvider = globalFilterProvider;
            }
            /**
             * Trigger the filter changed callback
             */


            _createClass(FilterProvider, [{
                key: 'triggerFilterChange',
                value: function triggerFilterChange() {
                    if (typeof this.onFiltersChanged === 'function') this.onFiltersChanged(this.getFilters());
                }
                /**
                 * Returns a filter model with the specified filter values set,
                 * without actually setting them
                 */

            }, {
                key: 'previewFilters',
                value: function previewFilters(filterValues) {
                    var globalFilters = this.globalFilterProvider ? this.globalFilterProvider.getFilters() : {};
                    var filters = {};
                    var baseFilters = this.baseFilters;
                    var _iteratorNormalCompletion = true;
                    var _didIteratorError = false;
                    var _iteratorError = undefined;

                    try {
                        for (var _iterator = filterValues[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
                            var filterValue = _step.value;
                            var key = filterValue.key,
                                value = filterValue.value;

                            this.setFilter(key, value, filters);
                        }
                    } catch (err) {
                        _didIteratorError = true;
                        _iteratorError = err;
                    } finally {
                        try {
                            if (!_iteratorNormalCompletion && _iterator.return) {
                                _iterator.return();
                            }
                        } finally {
                            if (_didIteratorError) {
                                throw _iteratorError;
                            }
                        }
                    }

                    return RideStylerShowcase.ObjectHelper.assign({}, this.baseFilters, globalFilters, filters);
                }
                /**
                 * Returns the currently applied filters
                 */

            }, {
                key: 'getFilters',
                value: function getFilters() {
                    var globalFilters = this.globalFilterProvider ? this.globalFilterProvider.getFilters() : {};
                    return RideStylerShowcase.ObjectHelper.assign({}, this.baseFilters, globalFilters, this.currentFilters);
                }
                /**
                 * Retrieve the options for a filter
                 * @param filter The filter
                 */

            }, {
                key: 'retrieveOptions',
                value: function retrieveOptions(filter) {
                    return filter.retrieveOptions(this.globalFilterProvider.getFilters());
                }
                /**
                 * Set a filter option, on a specific filter model
                 * @param key The filter key to apply
                 * @param value The value to apply to the filter
                 * @param filters The filters to apply them to
                 */

            }, {
                key: 'setFilter',
                value: function setFilter(key, value) {
                    var filters = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : this.currentFilters;

                    var filterOption = this.findFilterOption(key);
                    if (filterOption) {
                        filterOption.apply(filters, value);
                    }
                }
                /**
                 * Returns the filter option for the specified key
                 * @param key The filter key
                 */

            }, {
                key: 'findFilterOption',
                value: function findFilterOption(key) {
                    var _iteratorNormalCompletion2 = true;
                    var _didIteratorError2 = false;
                    var _iteratorError2 = undefined;

                    try {
                        for (var _iterator2 = this.filterOptions[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {
                            var filter = _step2.value;

                            if (filter.key === key) {
                                return filter;
                            }
                        }
                    } catch (err) {
                        _didIteratorError2 = true;
                        _iteratorError2 = err;
                    } finally {
                        try {
                            if (!_iteratorNormalCompletion2 && _iterator2.return) {
                                _iterator2.return();
                            }
                        } finally {
                            if (_didIteratorError2) {
                                throw _iteratorError2;
                            }
                        }
                    }

                    return undefined;
                }
            }, {
                key: 'setFilters',
                value: function setFilters(selectedFiltersOrKey, value, triggerChange) {
                    var newFilters = {};
                    var selectedFilters = void 0;
                    if (typeof selectedFiltersOrKey === 'string') {
                        selectedFilters = [{
                            key: selectedFiltersOrKey,
                            value: value
                        }];
                    } else {
                        selectedFilters = selectedFiltersOrKey;
                        if (typeof value === 'boolean') triggerChange = value;
                    }
                    var _iteratorNormalCompletion3 = true;
                    var _didIteratorError3 = false;
                    var _iteratorError3 = undefined;

                    try {
                        for (var _iterator3 = selectedFilters[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {
                            var selectedFilter = _step3.value;
                            var key = selectedFilter.key,
                                _value = selectedFilter.value;

                            this.setFilter(key, _value, newFilters);
                        }
                    } catch (err) {
                        _didIteratorError3 = true;
                        _iteratorError3 = err;
                    } finally {
                        try {
                            if (!_iteratorNormalCompletion3 && _iterator3.return) {
                                _iterator3.return();
                            }
                        } finally {
                            if (_didIteratorError3) {
                                throw _iteratorError3;
                            }
                        }
                    }

                    var hasChanged = false;
                    for (var key in newFilters) {
                        if (newFilters.hasOwnProperty(key)) {
                            var newFilterValue = newFilters[key];
                            var currentFilterValue = this.currentFilters[key];
                            if (newFilterValue !== currentFilterValue) {
                                this.currentFilters[key] = newFilterValue;
                                hasChanged = true;
                            }
                        }
                    }
                    if (typeof triggerChange === 'undefined') triggerChange = true;
                    if (hasChanged && triggerChange) this.triggerFilterChange();
                    return hasChanged;
                }
            }, {
                key: 'clear',
                value: function clear() {
                    var triggerChange = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;

                    this.currentFilters = {};
                    if (triggerChange) this.triggerFilterChange();
                }
            }]);

            return FilterProvider;
        }();

        filters_1.FilterProvider = FilterProvider;
        var vehicleConfigFilterKey = 'vehicle-config';

        var GlobalFilterProvider = function (_FilterProvider) {
            _inherits(GlobalFilterProvider, _FilterProvider);

            function GlobalFilterProvider() {
                _classCallCheck(this, GlobalFilterProvider);

                var _this = _possibleConstructorReturn(this, (GlobalFilterProvider.__proto__ || Object.getPrototypeOf(GlobalFilterProvider)).call(this, 'global', undefined));

                _this.baseFilters = {
                    HasFitments: true,
                    HasCatalogImage: true
                };
                _this.currentFilters = {};
                _this.filterOptions = [
                // VehicleConfiguration & VehicleTireOption
                {
                    key: vehicleConfigFilterKey,
                    visible: false,
                    apply: function apply(filters, vehicle) {
                        var vehicleConfigurationID = vehicle.vehicleConfigurationID,
                            vehicleTireOptionID = vehicle.vehicleTireOptionID;

                        if (vehicleConfigurationID) filters.VehicleConfiguration = vehicleConfigurationID;
                        if (vehicleTireOptionID) filters.VehicleTireOption = vehicleTireOptionID;
                    }
                }, {
                    key: 'globalWheel',
                    apply: function apply(filters, vehicleDescription) {
                        if (vehicleDescription.HasSideImage && !vehicleDescription.HasAngledImage) filters.HasSideImage = true;
                        if (vehicleDescription.HasAngledImage && !vehicleDescription.HasSideImage) filters.HasAngledImage = true;
                    }
                }];
                return _this;
            }
            /**
            * Applies a vehicle selection to all
            * @param vehicle The vehicle to apply to filter queries
            */


            _createClass(GlobalFilterProvider, [{
                key: 'setVehicleDescription',
                value: function setVehicleDescription(vehicleDescription) {
                    this.setFilter('globalWheel', vehicleDescription);
                }
            }, {
                key: 'setVehicle',
                value: function setVehicle(vehicle) {
                    this.setFilter(vehicleConfigFilterKey, vehicle);
                }
            }, {
                key: 'getCount',
                value: function getCount() {
                    // We'll never call getCount on the GlobalFilterModel
                    throw 'Cannot count GlobalFilterModel';
                }
            }]);

            return GlobalFilterProvider;
        }(FilterProvider);

        filters_1.GlobalFilterProvider = GlobalFilterProvider;

        var TireFilterProvider = function (_FilterProvider2) {
            _inherits(TireFilterProvider, _FilterProvider2);

            function TireFilterProvider(globalFilterProvider) {
                _classCallCheck(this, TireFilterProvider);

                var _this2 = _possibleConstructorReturn(this, (TireFilterProvider.__proto__ || Object.getPrototypeOf(TireFilterProvider)).call(this, 'tire', globalFilterProvider));

                _this2.baseFilters = {
                    RequiredFitmentResourceTypes: [2 /* Catalog */
                    ]
                };
                _this2.filterOptions = [
                // Brand
                {
                    label: RideStylerShowcase.strings.getString('brands'),
                    unselectedOptionLabel: RideStylerShowcase.strings.getString('all-brands'),
                    key: 'tire-brand',
                    retrieveOptions: function retrieveOptions(globalFilters) {
                        // Request Brands
                        return RideStylerShowcase.PromiseHelper.then(RideStylerShowcase.api.request('tire/getbrands', globalFilters), function (response) {
                            // Map brands to IFilterOptions
                            return RideStylerShowcase.ArrayHelper.map(response.Brands, function (brand) {
                                return {
                                    label: brand.TireBrandName,
                                    value: brand.TireBrandID
                                };
                            });
                        });
                    },
                    getValueFromFilters: function getValueFromFilters(filters) {
                        return filters.TireBrand;
                    },
                    apply: function apply(filters, tireBrandID) {
                        filters.TireBrand = tireBrandID;
                    }
                },
                // Attributes
                {
                    label: RideStylerShowcase.strings.getString('features'),
                    unselectedOptionLabel: RideStylerShowcase.strings.getString('any-features'),
                    key: 'tire-model-attribute',
                    retrieveOptions: function retrieveOptions(globalFilters) {
                        // Request Speed Ratings
                        return RideStylerShowcase.PromiseHelper.then(RideStylerShowcase.api.request('tire/getmodelattributes', globalFilters), function (response) {
                            // Map brands to IFilterOptions
                            return RideStylerShowcase.ArrayHelper.map(response.Attributes, function (attribute) {
                                return {
                                    label: attribute.TireModelAttributeName,
                                    value: attribute.TireModelAttributeID
                                };
                            });
                        });
                    },
                    getValueFromFilters: function getValueFromFilters(filters) {
                        return filters.RequiredTireModelAttribute;
                    },
                    apply: function apply(filters, attributeID) {
                        filters.RequiredTireModelAttribute = attributeID;
                    }
                },
                // Speed Rating
                {
                    label: RideStylerShowcase.strings.getString('speed-rating'),
                    unselectedOptionLabel: RideStylerShowcase.strings.getString('any-speed-ratings'),
                    key: 'tire-speed-rating',
                    retrieveOptions: function retrieveOptions(globalFilters) {
                        // Request Speed Ratings
                        return RideStylerShowcase.PromiseHelper.then(RideStylerShowcase.api.request('tire/getspeedratings', globalFilters), function (response) {
                            // Map brands to IFilterOptions
                            return RideStylerShowcase.ArrayHelper.map(response.SpeedRatings, function (brand) {
                                return {
                                    label: brand.TireSpeedRatingCode,
                                    value: brand.TireSpeedRatingID
                                };
                            });
                        });
                    },
                    getValueFromFilters: function getValueFromFilters(filters) {
                        return filters.SpeedRating;
                    },
                    apply: function apply(filters, speedRatingID) {
                        filters.SpeedRating = speedRatingID;
                    }
                }];
                return _this2;
            }

            _createClass(TireFilterProvider, [{
                key: 'getCount',
                value: function getCount(filters) {
                    return RideStylerShowcase.PromiseHelper.then(RideStylerShowcase.api.request("tire/countmodels", filters), function (response) {
                        return response.Count;
                    });
                }
            }]);

            return TireFilterProvider;
        }(FilterProvider);

        filters_1.TireFilterProvider = TireFilterProvider;

        var WheelFilterProvider = function (_FilterProvider3) {
            _inherits(WheelFilterProvider, _FilterProvider3);

            function WheelFilterProvider(globalFilterProvider) {
                _classCallCheck(this, WheelFilterProvider);

                var _this3 = _possibleConstructorReturn(this, (WheelFilterProvider.__proto__ || Object.getPrototypeOf(WheelFilterProvider)).call(this, 'wheel', globalFilterProvider));

                _this3.filterOptions = [
                // Brand
                {
                    label: RideStylerShowcase.strings.getString('brands'),
                    unselectedOptionLabel: RideStylerShowcase.strings.getString('all-brands'),
                    key: 'wheel-brand',
                    retrieveOptions: function retrieveOptions(globalFilters) {
                        // Request Brands
                        return RideStylerShowcase.PromiseHelper.then(RideStylerShowcase.api.request('wheel/getbrands', globalFilters), function (response) {
                            // Map brands to IFilterOptions
                            return RideStylerShowcase.ArrayHelper.map(response.Brands, function (brand) {
                                return {
                                    label: brand.WheelBrandName,
                                    value: brand.WheelBrandID
                                };
                            });
                        });
                    },
                    getValueFromFilters: function getValueFromFilters(filters) {
                        return filters.WheelBrand;
                    },
                    apply: function apply(filters, wheelBrandID) {
                        filters.WheelBrand = wheelBrandID;
                    }
                },
                // Finish
                {
                    label: RideStylerShowcase.strings.getString('finishes'),
                    unselectedOptionLabel: RideStylerShowcase.strings.getString('all-finishes'),
                    key: 'wheel-finish',
                    retrieveOptions: function retrieveOptions(globalFilters) {
                        // Request finishes
                        return RideStylerShowcase.PromiseHelper.then(RideStylerShowcase.api.request('wheel/getfinishes', globalFilters), function (response) {
                            // Map finishes to IFilterOptions
                            return RideStylerShowcase.ArrayHelper.map(response.Finishes, function (finishCategory) {
                                return {
                                    label: finishCategory.WheelFinishCategoryName,
                                    value: finishCategory.WheelFinishCategoryID
                                };
                            });
                        });
                    },
                    getValueFromFilters: function getValueFromFilters(filters) {
                        return filters.WheelFinishCategory;
                    },
                    apply: function apply(filters, wheelFinishCategoryID) {
                        filters.WheelFinishCategory = wheelFinishCategoryID;
                    }
                },
                // Diameter
                {
                    label: RideStylerShowcase.strings.getString('sizes'),
                    unselectedOptionLabel: RideStylerShowcase.strings.getString('all-sizes'),
                    key: 'wheel-size',
                    retrieveOptions: function retrieveOptions(globalFilters) {
                        // Request diameters
                        return RideStylerShowcase.PromiseHelper.then(RideStylerShowcase.api.request('wheel/getdiameters', globalFilters), function (response) {
                            // Map diameters to IFilterOptions
                            return RideStylerShowcase.ArrayHelper.map(response.Diameters, function (diameter) {
                                return {
                                    label: diameter.toString(),
                                    value: diameter
                                };
                            });
                        });
                    },
                    getValueFromFilters: function getValueFromFilters(filters) {
                        return getFitmentFilterValue(filters, 'Diameter');
                    },
                    apply: function apply(filters, diameter) {
                        if (!filters.FitmentFilters) filters.FitmentFilters = [];
                        applyFitmentFilter(filters, {
                            Diameter: diameter
                        });
                    }
                }, {
                    key: 'wheel',
                    apply: function apply(filters, vehicleDescription) {
                        if (vehicleDescription.HasSideImage && !vehicleDescription.HasAngledImage) filters.HasSideImage = true;
                        if (vehicleDescription.HasAngledImage && !vehicleDescription.HasSideImage) filters.HasAngledImage = true;
                    }
                }];
                return _this3;
            }

            _createClass(WheelFilterProvider, [{
                key: 'setVehicleDescription',
                value: function setVehicleDescription(vehicleDescription) {
                    this.setFilter('wheel', vehicleDescription);
                }
            }, {
                key: 'getCount',
                value: function getCount(filters) {
                    return RideStylerShowcase.PromiseHelper.then(RideStylerShowcase.api.request("wheel/countmodels", filters), function (response) {
                        return response.Count;
                    });
                }
            }]);

            return WheelFilterProvider;
        }(FilterProvider);

        filters_1.WheelFilterProvider = WheelFilterProvider;
        function getFitmentFilterValue(filters, key) {
            var _iteratorNormalCompletion4 = true;
            var _didIteratorError4 = false;
            var _iteratorError4 = undefined;

            try {
                for (var _iterator4 = (filters.FitmentFilters || [])[Symbol.iterator](), _step4; !(_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done); _iteratorNormalCompletion4 = true) {
                    var fitmentFilter = _step4.value;

                    if (fitmentFilter.GroupKey === fitmentFilterGroupKey) {
                        return fitmentFilter[key];
                    }
                }
            } catch (err) {
                _didIteratorError4 = true;
                _iteratorError4 = err;
            } finally {
                try {
                    if (!_iteratorNormalCompletion4 && _iterator4.return) {
                        _iterator4.return();
                    }
                } finally {
                    if (_didIteratorError4) {
                        throw _iteratorError4;
                    }
                }
            }

            return undefined;
        }
        var fitmentFilterGroupKey = "ridestyler-showcase-filters";
        function applyFitmentFilter(filters, fitmentFilter) {
            var fitmentFilters = filters.FitmentFilters || [];
            var existingFitmentFilterGroup = void 0;
            var _iteratorNormalCompletion5 = true;
            var _didIteratorError5 = false;
            var _iteratorError5 = undefined;

            try {
                for (var _iterator5 = fitmentFilters[Symbol.iterator](), _step5; !(_iteratorNormalCompletion5 = (_step5 = _iterator5.next()).done); _iteratorNormalCompletion5 = true) {
                    var appliedFitmentFilter = _step5.value;

                    if (appliedFitmentFilter.GroupKey === fitmentFilterGroupKey) {
                        existingFitmentFilterGroup = appliedFitmentFilter;
                        break;
                    }
                }
            } catch (err) {
                _didIteratorError5 = true;
                _iteratorError5 = err;
            } finally {
                try {
                    if (!_iteratorNormalCompletion5 && _iterator5.return) {
                        _iterator5.return();
                    }
                } finally {
                    if (_didIteratorError5) {
                        throw _iteratorError5;
                    }
                }
            }

            if (!existingFitmentFilterGroup) {
                fitmentFilter.GroupKey = fitmentFilterGroupKey;
                fitmentFilters.push(fitmentFilter);
                // We've modified the array so update the array in the filters
                filters.FitmentFilters = fitmentFilters;
            } else {
                RideStylerShowcase.ObjectHelper.assign(existingFitmentFilterGroup, fitmentFilter);
                existingFitmentFilterGroup.GroupKey = fitmentFilterGroupKey;
            }
        }
    })(filters = RideStylerShowcase.filters || (RideStylerShowcase.filters = {}));
})(RideStylerShowcase || (RideStylerShowcase = {}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9zY3JpcHRzL1JpZGVTdHlsZXJTaG93Y2FzZS5maWx0ZXJzLnRzIiwic2NyaXB0cy9SaWRlU3R5bGVyU2hvd2Nhc2UuZmlsdGVycy5qcyJdLCJuYW1lcyI6WyJSaWRlU3R5bGVyU2hvd2Nhc2UiLCJmaWx0ZXJzIiwiZmlsdGVyc18xIiwiRmlsdGVyQ29udHJvbGxlciIsImdsb2JhbEZpbHRlcnMiLCJHbG9iYWxGaWx0ZXJQcm92aWRlciIsInRpcmVGaWx0ZXJzIiwiVGlyZUZpbHRlclByb3ZpZGVyIiwid2hlZWxGaWx0ZXJzIiwiV2hlZWxGaWx0ZXJQcm92aWRlciIsInZlaGljbGUiLCJjbGVhckZpbHRlcnMiLCJzZXRWZWhpY2xlIiwidmVoaWNsZURlc2NyaXB0aW9uIiwic2V0VmVoaWNsZURlc2NyaXB0aW9uIiwidHJpZ2dlckNoYW5nZSIsImNsZWFyIiwiRmlsdGVyUHJvdmlkZXIiLCJ0eXBlIiwiZ2xvYmFsRmlsdGVyUHJvdmlkZXIiLCJjdXJyZW50RmlsdGVycyIsIm9uRmlsdGVyc0NoYW5nZWQiLCJnZXRGaWx0ZXJzIiwiZmlsdGVyVmFsdWVzIiwiYmFzZUZpbHRlcnMiLCJmaWx0ZXJWYWx1ZSIsImtleSIsInZhbHVlIiwic2V0RmlsdGVyIiwiT2JqZWN0SGVscGVyIiwiYXNzaWduIiwiZmlsdGVyIiwicmV0cmlldmVPcHRpb25zIiwiZmlsdGVyT3B0aW9uIiwiZmluZEZpbHRlck9wdGlvbiIsImFwcGx5IiwiZmlsdGVyT3B0aW9ucyIsInVuZGVmaW5lZCIsInNlbGVjdGVkRmlsdGVyc09yS2V5IiwibmV3RmlsdGVycyIsInNlbGVjdGVkRmlsdGVycyIsInNlbGVjdGVkRmlsdGVyIiwiaGFzQ2hhbmdlZCIsImhhc093blByb3BlcnR5IiwibmV3RmlsdGVyVmFsdWUiLCJjdXJyZW50RmlsdGVyVmFsdWUiLCJ0cmlnZ2VyRmlsdGVyQ2hhbmdlIiwidmVoaWNsZUNvbmZpZ0ZpbHRlcktleSIsIkhhc0ZpdG1lbnRzIiwiSGFzQ2F0YWxvZ0ltYWdlIiwidmlzaWJsZSIsInZlaGljbGVDb25maWd1cmF0aW9uSUQiLCJ2ZWhpY2xlVGlyZU9wdGlvbklEIiwiVmVoaWNsZUNvbmZpZ3VyYXRpb24iLCJWZWhpY2xlVGlyZU9wdGlvbiIsIkhhc1NpZGVJbWFnZSIsIkhhc0FuZ2xlZEltYWdlIiwiUmVxdWlyZWRGaXRtZW50UmVzb3VyY2VUeXBlcyIsImxhYmVsIiwic3RyaW5ncyIsImdldFN0cmluZyIsInVuc2VsZWN0ZWRPcHRpb25MYWJlbCIsIlByb21pc2VIZWxwZXIiLCJ0aGVuIiwiYXBpIiwicmVxdWVzdCIsIkFycmF5SGVscGVyIiwibWFwIiwicmVzcG9uc2UiLCJCcmFuZHMiLCJicmFuZCIsIlRpcmVCcmFuZE5hbWUiLCJUaXJlQnJhbmRJRCIsImdldFZhbHVlRnJvbUZpbHRlcnMiLCJUaXJlQnJhbmQiLCJ0aXJlQnJhbmRJRCIsIkF0dHJpYnV0ZXMiLCJhdHRyaWJ1dGUiLCJUaXJlTW9kZWxBdHRyaWJ1dGVOYW1lIiwiVGlyZU1vZGVsQXR0cmlidXRlSUQiLCJSZXF1aXJlZFRpcmVNb2RlbEF0dHJpYnV0ZSIsImF0dHJpYnV0ZUlEIiwiU3BlZWRSYXRpbmdzIiwiVGlyZVNwZWVkUmF0aW5nQ29kZSIsIlRpcmVTcGVlZFJhdGluZ0lEIiwiU3BlZWRSYXRpbmciLCJzcGVlZFJhdGluZ0lEIiwiQ291bnQiLCJXaGVlbEJyYW5kTmFtZSIsIldoZWVsQnJhbmRJRCIsIldoZWVsQnJhbmQiLCJ3aGVlbEJyYW5kSUQiLCJGaW5pc2hlcyIsImZpbmlzaENhdGVnb3J5IiwiV2hlZWxGaW5pc2hDYXRlZ29yeU5hbWUiLCJXaGVlbEZpbmlzaENhdGVnb3J5SUQiLCJXaGVlbEZpbmlzaENhdGVnb3J5Iiwid2hlZWxGaW5pc2hDYXRlZ29yeUlEIiwiRGlhbWV0ZXJzIiwiZGlhbWV0ZXIiLCJ0b1N0cmluZyIsImdldEZpdG1lbnRGaWx0ZXJWYWx1ZSIsIkZpdG1lbnRGaWx0ZXJzIiwiYXBwbHlGaXRtZW50RmlsdGVyIiwiRGlhbWV0ZXIiLCJmaXRtZW50RmlsdGVyIiwiR3JvdXBLZXkiLCJmaXRtZW50RmlsdGVyR3JvdXBLZXkiLCJmaXRtZW50RmlsdGVycyIsImV4aXN0aW5nRml0bWVudEZpbHRlckdyb3VwIiwiYXBwbGllZEZpdG1lbnRGaWx0ZXIiLCJwdXNoIl0sIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFBLElBQVVBLGtCQUFWO0FBQUEsQ0FBQSxVQUFVQSxrQkFBVixFQUE0QjtBQUFDLFFBQUFDLE9BQUE7QUFBQSxLQUFBLFVBQUFDLFNBQUEsRUFBTztBQUFBLFlBU2hDQyxnQkFUZ0M7QUFjNUIsd0NBQUE7QUFBQTs7QUFDSSxxQkFBS0MsYUFBTCxHQUFxQixJQUFJQyxvQkFBSixFQUFyQjtBQUNBLHFCQUFLQyxXQUFMLEdBQW1CLElBQUlDLGtCQUFKLENBQXVCLEtBQUtILGFBQTVCLENBQW5CO0FBQ0EscUJBQUtJLFlBQUwsR0FBb0IsSUFBSUMsbUJBQUosQ0FBd0IsS0FBS0wsYUFBN0IsQ0FBcEI7QUFDSDs7QUFsQjJCO0FBQUE7QUFBQSwyQ0FvQlZNLE9BcEJVLEVBb0JLO0FBQzdCLHlCQUFLQyxZQUFMLENBQWtCLEtBQWxCO0FBQ0EseUJBQUtQLGFBQUwsQ0FBbUJRLFVBQW5CLENBQThCRixPQUE5QjtBQUNIO0FBdkIyQjtBQUFBO0FBQUEsc0RBeUJDRyxrQkF6QkQsRUF5QnNDO0FBQzlELHlCQUFLTCxZQUFMLENBQWtCTSxxQkFBbEIsQ0FBd0NELGtCQUF4QztBQUNBLHlCQUFLVCxhQUFMLENBQW1CVSxxQkFBbkIsQ0FBeUNELGtCQUF6QztBQUNIO0FBNUIyQjtBQUFBO0FBQUEsNkNBOEJSRSxhQTlCUSxFQThCZTtBQUN2Qyx5QkFBS1gsYUFBTCxDQUFtQlksS0FBbkIsQ0FBeUJELGFBQXpCO0FBQ0EseUJBQUtULFdBQUwsQ0FBaUJVLEtBQWpCLENBQXVCRCxhQUF2QjtBQUNBLHlCQUFLUCxZQUFMLENBQWtCUSxLQUFsQixDQUF3QkQsYUFBeEI7QUFDSDtBQWxDMkI7O0FBQUE7QUFBQTs7QUFTbkJiLGtCQUFBQyxnQkFBQSxHQUFnQkEsZ0JBQWhC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QTtBQUNBeEcsd0JBQVFxRyxjQUFSLEdBQXlCTSxjQUF6QjtBQUNILGFBTkQsTUFNTztBQUNINUcsbUNBQUE2QixZQUFBLENBQWFDLE1BQWIsQ0FBd0MrRSwwQkFBeEMsRUFBb0VKLGFBQXBFO0FBQ0FJLDJDQUEyQkgsUUFBM0IsR0FBc0NDLHFCQUF0QztBQUNIO0FBQ0o7QUFDSixLQXRnQjRCLEVBQUExRyxVQUFBRCxtQkFBQUMsT0FBQSxLQUFBRCxtQkFBQUMsT0FBQSxHQUFPLEVBQVAsQ0FBQTtBQXNnQjVCLENBdGdCRCxFQUFVRCx1QkFBQUEscUJBQWtCLEVBQWxCLENBQVYiLCJmaWxlIjoic2NyaXB0cy9SaWRlU3R5bGVyU2hvd2Nhc2UuZmlsdGVycy5qcyIsInNvdXJjZXNDb250ZW50IjpbIm5hbWVzcGFjZSBSaWRlU3R5bGVyU2hvd2Nhc2UuZmlsdGVycyB7XHJcbiAgICBleHBvcnQgdHlwZSBGaWx0ZXJQcm92aWRlclR5cGUgPSAndGlyZSd8J3doZWVsJ3wnZ2xvYmFsJztcclxuXHJcbiAgICBpbXBvcnQgV2hlZWxGaWx0ZXJNb2RlbCA9IHJpZGVzdHlsZXIuUmVxdWVzdHMuV2hlZWxGaWx0ZXJNb2RlbDtcclxuICAgIGltcG9ydCBUaXJlRmlsdGVyTW9kZWwgPSByaWRlc3R5bGVyLlJlcXVlc3RzLlRpcmVGaWx0ZXJNb2RlbDtcclxuICAgIGV4cG9ydCB0eXBlIEdsb2JhbEZpbHRlck1vZGVsID0gV2hlZWxGaWx0ZXJNb2RlbCAmIFRpcmVGaWx0ZXJNb2RlbDtcclxuXHJcbiAgICBpbXBvcnQgRml0bWVudEZpbHRlck1vZGVsID0gcmlkZXN0eWxlci5SZXF1ZXN0cy5GaXRtZW50RmlsdGVyTW9kZWw7XHJcblxyXG4gICAgZXhwb3J0IGNsYXNzIEZpbHRlckNvbnRyb2xsZXIge1xyXG4gICAgICAgIHB1YmxpYyByZWFkb25seSBnbG9iYWxGaWx0ZXJzOkdsb2JhbEZpbHRlclByb3ZpZGVyO1xyXG4gICAgICAgIHB1YmxpYyByZWFkb25seSB0aXJlRmlsdGVyczpUaXJlRmlsdGVyUHJvdmlkZXI7XHJcbiAgICAgICAgcHVibGljIHJlYWRvbmx5IHdoZWVsRmlsdGVyczpXaGVlbEZpbHRlclByb3ZpZGVyO1xyXG5cclxuICAgICAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICAgICAgdGhpcy5nbG9iYWxGaWx0ZXJzID0gbmV3IEdsb2JhbEZpbHRlclByb3ZpZGVyKCk7XHJcbiAgICAgICAgICAgIHRoaXMudGlyZUZpbHRlcnMgPSBuZXcgVGlyZUZpbHRlclByb3ZpZGVyKHRoaXMuZ2xvYmFsRmlsdGVycyk7XHJcbiAgICAgICAgICAgIHRoaXMud2hlZWxGaWx0ZXJzID0gbmV3IFdoZWVsRmlsdGVyUHJvdmlkZXIodGhpcy5nbG9iYWxGaWx0ZXJzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzZXRWZWhpY2xlKHZlaGljbGU6VmVoaWNsZSkge1xyXG4gICAgICAgICAgICB0aGlzLmNsZWFyRmlsdGVycyhmYWxzZSk7XHJcbiAgICAgICAgICAgIHRoaXMuZ2xvYmFsRmlsdGVycy5zZXRWZWhpY2xlKHZlaGljbGUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHNldFZlaGljbGVEZXNjcmlwdGlvbih2ZWhpY2xlRGVzY3JpcHRpb246VmVoaWNsZURlc2NyaXB0aW9uKSB7XHJcbiAgICAgICAgICAgIHRoaXMud2hlZWxGaWx0ZXJzLnNldFZlaGljbGVEZXNjcmlwdGlvbih2ZWhpY2xlRGVzY3JpcHRpb24pO1xyXG4gICAgICAgICAgICB0aGlzLmdsb2JhbEZpbHRlcnMuc2V0VmVoaWNsZURlc2NyaXB0aW9uKHZlaGljbGVEZXNjcmlwdGlvbik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgY2xlYXJGaWx0ZXJzKHRyaWdnZXJDaGFuZ2U/OiBib29sZWFuKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZ2xvYmFsRmlsdGVycy5jbGVhcih0cmlnZ2VyQ2hhbmdlKTtcclxuICAgICAgICAgICAgdGhpcy50aXJlRmlsdGVycy5jbGVhcih0cmlnZ2VyQ2hhbmdlKTtcclxuICAgICAgICAgICAgdGhpcy53aGVlbEZpbHRlcnMuY2xlYXIodHJpZ2dlckNoYW5nZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgVmVoaWNsZSB7XHJcbiAgICAgICAgdmVoaWNsZUNvbmZpZ3VyYXRpb25JRDogc3RyaW5nO1xyXG4gICAgICAgIHZlaGljbGVUaXJlT3B0aW9uSUQ6IHN0cmluZztcclxuICAgIH1cclxuXHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIFZlaGljbGVEZXNjcmlwdGlvbiB7XHJcbiAgICAgICAgSGFzU2lkZUltYWdlOiBib29sZWFuO1xyXG4gICAgICAgIEhhc0FuZ2xlZEltYWdlOiBib29sZWFuO1xyXG4gICAgfVxyXG5cclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgRmlsdGVyVmFsdWUge1xyXG4gICAgICAgIGtleTogc3RyaW5nO1xyXG4gICAgICAgIHZhbHVlOiBhbnk7XHJcbiAgICB9XHJcblxyXG4gICAgZXhwb3J0IGludGVyZmFjZSBJRmlsdGVyPFZhbHVlVHlwZSwgRmlsdGVyVHlwZT4ge1xyXG4gICAgICAgIGtleTogc3RyaW5nO1xyXG4gICAgICAgIGxhYmVsPzogc3RyaW5nO1xyXG4gICAgICAgIHVuc2VsZWN0ZWRPcHRpb25MYWJlbD86IHN0cmluZztcclxuICAgICAgICB2aXNpYmxlPzogYm9vbGVhbjtcclxuXHJcbiAgICAgICAgcmV0cmlldmVPcHRpb25zPzogKGdsb2JhbEZpbHRlcnM6R2xvYmFsRmlsdGVyTW9kZWwpID0+IFJpZGVTdHlsZXJQcm9taXNlPElGaWx0ZXJPcHRpb248VmFsdWVUeXBlPltdLCByaWRlc3R5bGVyLlJpZGVTdHlsZXJBUElSZXNwb25zZT47XHJcbiAgICAgICAgZ2V0VmFsdWVGcm9tRmlsdGVycz86IChmaWx0ZXJzOkZpbHRlclR5cGUpID0+IGFueTtcclxuICAgICAgICBhcHBseTogKGZpbHRlcnM6RmlsdGVyVHlwZSwgdmFsdWU6VmFsdWVUeXBlKSA9PiB2b2lkO1xyXG4gICAgfVxyXG5cclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgSUZpbHRlck9wdGlvbjxWYWx1ZVR5cGU+IHtcclxuICAgICAgICBsYWJlbDogc3RyaW5nO1xyXG4gICAgICAgIHZhbHVlOiBWYWx1ZVR5cGU7XHJcbiAgICB9XHJcblxyXG4gICAgZXhwb3J0IGFic3RyYWN0IGNsYXNzIEZpbHRlclByb3ZpZGVyPEZpbHRlclR5cGUgZXh0ZW5kcyBvYmplY3Q+IHtcclxuICAgICAgICBwdWJsaWMgcmVhZG9ubHkgdHlwZTpGaWx0ZXJQcm92aWRlclR5cGU7XHJcbiAgICAgICAgcHVibGljIHJlYWRvbmx5IGZpbHRlck9wdGlvbnM6SUZpbHRlcjxhbnksIEZpbHRlclR5cGU+W107XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFRoZSBjdXJyZW50bHkgYXBwbGllZCBmaWx0ZXJzXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHJvdGVjdGVkIGN1cnJlbnRGaWx0ZXJzOkZpbHRlclR5cGU7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIE92ZXJyaWRhYmxlIGluIGRlcml2aW5nIGNsYXNzZXMgdG8gc2V0IGJhc2UgZmlsdGVycyBmb3IgcmVxdWVzdHNcclxuICAgICAgICAgKi9cclxuICAgICAgICBwcm90ZWN0ZWQgcmVhZG9ubHkgYmFzZUZpbHRlcnM6RmlsdGVyVHlwZTtcclxuICAgICAgICBcclxuICAgICAgICBwcm90ZWN0ZWQgcmVhZG9ubHkgZ2xvYmFsRmlsdGVyUHJvdmlkZXI6IEdsb2JhbEZpbHRlclByb3ZpZGVyO1xyXG5cclxuICAgICAgICBjb25zdHJ1Y3Rvcih0eXBlOkZpbHRlclByb3ZpZGVyVHlwZSwgZ2xvYmFsRmlsdGVyUHJvdmlkZXI6R2xvYmFsRmlsdGVyUHJvdmlkZXIpIHtcclxuICAgICAgICAgICAgdGhpcy50eXBlID0gdHlwZTtcclxuICAgICAgICAgICAgdGhpcy5jdXJyZW50RmlsdGVycyA9IHt9IGFzIEZpbHRlclR5cGU7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmdsb2JhbEZpbHRlclByb3ZpZGVyID0gZ2xvYmFsRmlsdGVyUHJvdmlkZXI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBJZiBzcGVjaWZpZWQsIHRoaXMgZnVuY3Rpb24gaXMgY2FsbGVkIGVhY2ggdGltZSB0aGUgZmlsdGVycyBjaGFuZ2VcclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgb25GaWx0ZXJzQ2hhbmdlZDooZmlsdGVyczpGaWx0ZXJUeXBlKSA9PiB2b2lkO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBUcmlnZ2VyIHRoZSBmaWx0ZXIgY2hhbmdlZCBjYWxsYmFja1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHByb3RlY3RlZCB0cmlnZ2VyRmlsdGVyQ2hhbmdlKCkge1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mIHRoaXMub25GaWx0ZXJzQ2hhbmdlZCA9PT0gJ2Z1bmN0aW9uJylcclxuICAgICAgICAgICAgICAgIHRoaXMub25GaWx0ZXJzQ2hhbmdlZCh0aGlzLmdldEZpbHRlcnMoKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBSZXR1cm5zIGEgZmlsdGVyIG1vZGVsIHdpdGggdGhlIHNwZWNpZmllZCBmaWx0ZXIgdmFsdWVzIHNldCwgXHJcbiAgICAgICAgICogd2l0aG91dCBhY3R1YWxseSBzZXR0aW5nIHRoZW1cclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgcHJldmlld0ZpbHRlcnMoZmlsdGVyVmFsdWVzOkZpbHRlclZhbHVlW10pOkZpbHRlclR5cGUge1xyXG4gICAgICAgICAgICBjb25zdCBnbG9iYWxGaWx0ZXJzOkZpbHRlclR5cGUgPSAodGhpcy5nbG9iYWxGaWx0ZXJQcm92aWRlciA/IFxyXG4gICAgICAgICAgICAgICAgdGhpcy5nbG9iYWxGaWx0ZXJQcm92aWRlci5nZXRGaWx0ZXJzKCkgOiBcclxuICAgICAgICAgICAgICAgIHt9XHJcbiAgICAgICAgICAgICkgYXMgRmlsdGVyVHlwZTtcclxuICAgICAgICAgICAgY29uc3QgZmlsdGVyczpGaWx0ZXJUeXBlID0ge30gYXMgRmlsdGVyVHlwZTtcclxuICAgICAgICAgICAgY29uc3QgYmFzZUZpbHRlcnM6RmlsdGVyVHlwZSA9IHRoaXMuYmFzZUZpbHRlcnM7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGZpbHRlclZhbHVlIG9mIGZpbHRlclZhbHVlcykge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qge2tleSwgdmFsdWV9ID0gZmlsdGVyVmFsdWU7XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRGaWx0ZXIoa2V5LCB2YWx1ZSwgZmlsdGVycyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBPYmplY3RIZWxwZXIuYXNzaWduPEZpbHRlclR5cGU+KFxyXG4gICAgICAgICAgICAgICAge30gYXMgRmlsdGVyVHlwZSxcclxuICAgICAgICAgICAgICAgIHRoaXMuYmFzZUZpbHRlcnMsIFxyXG4gICAgICAgICAgICAgICAgZ2xvYmFsRmlsdGVycyBhcyBGaWx0ZXJUeXBlLCBcclxuICAgICAgICAgICAgICAgIGZpbHRlcnNcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFJldHVybnMgdGhlIGN1cnJlbnRseSBhcHBsaWVkIGZpbHRlcnNcclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgZ2V0RmlsdGVycygpOkZpbHRlclR5cGUge1xyXG4gICAgICAgICAgICBjb25zdCBnbG9iYWxGaWx0ZXJzOkZpbHRlclR5cGUgPSAodGhpcy5nbG9iYWxGaWx0ZXJQcm92aWRlciA/IFxyXG4gICAgICAgICAgICAgICAgdGhpcy5nbG9iYWxGaWx0ZXJQcm92aWRlci5nZXRGaWx0ZXJzKCkgOiBcclxuICAgICAgICAgICAgICAgIHt9XHJcbiAgICAgICAgICAgICkgYXMgRmlsdGVyVHlwZTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBPYmplY3RIZWxwZXIuYXNzaWduPEZpbHRlclR5cGU+KFxyXG4gICAgICAgICAgICAgICAge30gYXMgRmlsdGVyVHlwZSxcclxuICAgICAgICAgICAgICAgIHRoaXMuYmFzZUZpbHRlcnMsXHJcbiAgICAgICAgICAgICAgICBnbG9iYWxGaWx0ZXJzLFxyXG4gICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50RmlsdGVyc1xyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogUmV0cmlldmUgdGhlIG9wdGlvbnMgZm9yIGEgZmlsdGVyXHJcbiAgICAgICAgICogQHBhcmFtIGZpbHRlciBUaGUgZmlsdGVyXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIHJldHJpZXZlT3B0aW9uczxWYWx1ZVR5cGU+KGZpbHRlcjpJRmlsdGVyPFZhbHVlVHlwZSwgRmlsdGVyVHlwZT4pOlJpZGVTdHlsZXJQcm9taXNlPElGaWx0ZXJPcHRpb248VmFsdWVUeXBlPltdLCByaWRlc3R5bGVyLlJpZGVTdHlsZXJBUElSZXNwb25zZT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gZmlsdGVyLnJldHJpZXZlT3B0aW9ucyh0aGlzLmdsb2JhbEZpbHRlclByb3ZpZGVyLmdldEZpbHRlcnMoKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFNldCBhIGZpbHRlciBvcHRpb24sIG9uIGEgc3BlY2lmaWMgZmlsdGVyIG1vZGVsXHJcbiAgICAgICAgICogQHBhcmFtIGtleSBUaGUgZmlsdGVyIGtleSB0byBhcHBseVxyXG4gICAgICAgICAqIEBwYXJhbSB2YWx1ZSBUaGUgdmFsdWUgdG8gYXBwbHkgdG8gdGhlIGZpbHRlclxyXG4gICAgICAgICAqIEBwYXJhbSBmaWx0ZXJzIFRoZSBmaWx0ZXJzIHRvIGFwcGx5IHRoZW0gdG9cclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgc2V0RmlsdGVyPFZhbHVlVHlwZSA9IGFueT4oa2V5OnN0cmluZywgdmFsdWU6VmFsdWVUeXBlLCBmaWx0ZXJzOkZpbHRlclR5cGUgPSB0aGlzLmN1cnJlbnRGaWx0ZXJzKTp2b2lkIHtcclxuICAgICAgICAgICAgY29uc3QgZmlsdGVyT3B0aW9uID0gdGhpcy5maW5kRmlsdGVyT3B0aW9uKGtleSk7XHJcblxyXG4gICAgICAgICAgICBpZiAoZmlsdGVyT3B0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICBmaWx0ZXJPcHRpb24uYXBwbHkoZmlsdGVycywgdmFsdWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBSZXR1cm5zIHRoZSBmaWx0ZXIgb3B0aW9uIGZvciB0aGUgc3BlY2lmaWVkIGtleVxyXG4gICAgICAgICAqIEBwYXJhbSBrZXkgVGhlIGZpbHRlciBrZXlcclxuICAgICAgICAgKi9cclxuICAgICAgICBwcm90ZWN0ZWQgZmluZEZpbHRlck9wdGlvbihrZXk6c3RyaW5nKTogSUZpbHRlcjxhbnksIEZpbHRlclR5cGU+IHtcclxuICAgICAgICAgICAgZm9yIChjb25zdCBmaWx0ZXIgb2YgdGhpcy5maWx0ZXJPcHRpb25zKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZmlsdGVyLmtleSA9PT0ga2V5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZpbHRlcjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEFwcGx5IGEgbGlzdCBvZiBzZWxlY3RlZCBmaWx0ZXIga2V5LXZhbHVlIHBhaXJzXHJcbiAgICAgICAgICogQHBhcmFtIHNlbGVjdGVkRmlsdGVycyBBIGxpc3Qgb2Ygc2VsZWN0ZWQgZmlsdGVyIGtleS12YWx1ZSBwYWlycyB0byBhcHBseVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBzZXRGaWx0ZXJzKHNlbGVjdGVkRmlsdGVyczpGaWx0ZXJWYWx1ZVtdLCB0cmlnZ2VyQ2hhbmdlPzogYm9vbGVhbik6Ym9vbGVhbjtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBBcHBseSBhIGZpbHRlclxyXG4gICAgICAgICAqIEBwYXJhbSBrZXkgVGhlIGtleSBvZiB0aGUgZmlsdGVyIHRvIGFwcGx5XHJcbiAgICAgICAgICogQHBhcmFtIHZhbHVlIFRoZSB2YWx1ZSB0byBhcHBseSB0byB0aGUgZmlsdGVyXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIHNldEZpbHRlcnMoa2V5OiBzdHJpbmcsIHZhbHVlOiBhbnksIHRyaWdnZXJDaGFuZ2U/OmJvb2xlYW4pOmJvb2xlYW47XHJcbiAgICAgICAgcHVibGljIHNldEZpbHRlcnMoc2VsZWN0ZWRGaWx0ZXJzT3JLZXk6RmlsdGVyVmFsdWVbXXxzdHJpbmcsIHZhbHVlPzphbnksIHRyaWdnZXJDaGFuZ2U/OiBib29sZWFuKTpib29sZWFuIHtcclxuICAgICAgICAgICAgY29uc3QgbmV3RmlsdGVyczpGaWx0ZXJUeXBlID0ge30gYXMgRmlsdGVyVHlwZTtcclxuXHJcbiAgICAgICAgICAgIGxldCBzZWxlY3RlZEZpbHRlcnM6IEZpbHRlclZhbHVlW107XHJcblxyXG4gICAgICAgICAgICBpZiAodHlwZW9mIHNlbGVjdGVkRmlsdGVyc09yS2V5ID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICAgICAgc2VsZWN0ZWRGaWx0ZXJzID0gW3tcclxuICAgICAgICAgICAgICAgICAgICBrZXk6IHNlbGVjdGVkRmlsdGVyc09yS2V5LFxyXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiB2YWx1ZVxyXG4gICAgICAgICAgICAgICAgfV07XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBzZWxlY3RlZEZpbHRlcnMgPSBzZWxlY3RlZEZpbHRlcnNPcktleTtcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdib29sZWFuJykgdHJpZ2dlckNoYW5nZSA9IHZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IHNlbGVjdGVkRmlsdGVyIG9mIHNlbGVjdGVkRmlsdGVycykge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qge2tleSwgdmFsdWV9ID0gc2VsZWN0ZWRGaWx0ZXI7XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRGaWx0ZXIoa2V5LCB2YWx1ZSwgbmV3RmlsdGVycyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGxldCBoYXNDaGFuZ2VkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIG5ld0ZpbHRlcnMpIHtcclxuICAgICAgICAgICAgICAgIGlmIChuZXdGaWx0ZXJzLmhhc093blByb3BlcnR5KGtleSkpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdGaWx0ZXJWYWx1ZSA9IG5ld0ZpbHRlcnNba2V5XTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50RmlsdGVyVmFsdWUgPSB0aGlzLmN1cnJlbnRGaWx0ZXJzW2tleV07XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5ld0ZpbHRlclZhbHVlICE9PSBjdXJyZW50RmlsdGVyVmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50RmlsdGVyc1trZXldID0gbmV3RmlsdGVyVmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhhc0NoYW5nZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHR5cGVvZiB0cmlnZ2VyQ2hhbmdlID09PSAndW5kZWZpbmVkJykgdHJpZ2dlckNoYW5nZSA9IHRydWU7XHJcbiAgICAgICAgICAgIGlmIChoYXNDaGFuZ2VkICYmIHRyaWdnZXJDaGFuZ2UpIHRoaXMudHJpZ2dlckZpbHRlckNoYW5nZSgpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGhhc0NoYW5nZWQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYWJzdHJhY3QgZ2V0Q291bnQoZmlsdGVyczpGaWx0ZXJUeXBlKTpSaWRlU3R5bGVyUHJvbWlzZTxudW1iZXIsIHJpZGVzdHlsZXIuUmlkZVN0eWxlckFQSVJlc3BvbnNlPjtcclxuXHJcbiAgICAgICAgcHVibGljIGNsZWFyKHRyaWdnZXJDaGFuZ2U6IGJvb2xlYW4gPSB0cnVlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY3VycmVudEZpbHRlcnMgPSB7fSBhcyBGaWx0ZXJUeXBlO1xyXG4gICAgICAgICAgICBpZiAodHJpZ2dlckNoYW5nZSkgdGhpcy50cmlnZ2VyRmlsdGVyQ2hhbmdlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHZlaGljbGVDb25maWdGaWx0ZXJLZXkgPSAndmVoaWNsZS1jb25maWcnO1xyXG4gICAgZXhwb3J0IGNsYXNzIEdsb2JhbEZpbHRlclByb3ZpZGVyIGV4dGVuZHMgRmlsdGVyUHJvdmlkZXI8R2xvYmFsRmlsdGVyTW9kZWw+IHtcclxuICAgICAgICBwdWJsaWMgcmVhZG9ubHkgZmlsdGVyT3B0aW9uczpJRmlsdGVyPGFueSwgR2xvYmFsRmlsdGVyTW9kZWw+W107XHJcbiAgICAgICAgcHJvdGVjdGVkIHJlYWRvbmx5IGJhc2VGaWx0ZXJzOiBHbG9iYWxGaWx0ZXJNb2RlbCA9IHtcclxuICAgICAgICAgICAgSGFzRml0bWVudHM6IHRydWUsXHJcbiAgICAgICAgICAgIEhhc0NhdGFsb2dJbWFnZTogdHJ1ZVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgICAgICBzdXBlcignZ2xvYmFsJywgdW5kZWZpbmVkKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuY3VycmVudEZpbHRlcnMgPSB7fTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuZmlsdGVyT3B0aW9ucyA9IFtcclxuICAgICAgICAgICAgICAgIC8vIFZlaGljbGVDb25maWd1cmF0aW9uICYgVmVoaWNsZVRpcmVPcHRpb25cclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBrZXk6IHZlaGljbGVDb25maWdGaWx0ZXJLZXksXHJcbiAgICAgICAgICAgICAgICAgICAgdmlzaWJsZTogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgYXBwbHk6IChmaWx0ZXJzLCB2ZWhpY2xlOlZlaGljbGUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZlaGljbGVDb25maWd1cmF0aW9uSUQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ZWhpY2xlVGlyZU9wdGlvbklEXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gPSB2ZWhpY2xlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZlaGljbGVDb25maWd1cmF0aW9uSUQpIGZpbHRlcnMuVmVoaWNsZUNvbmZpZ3VyYXRpb24gPSB2ZWhpY2xlQ29uZmlndXJhdGlvbklEO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodmVoaWNsZVRpcmVPcHRpb25JRCkgZmlsdGVycy5WZWhpY2xlVGlyZU9wdGlvbiA9IHZlaGljbGVUaXJlT3B0aW9uSUQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBrZXk6ICdnbG9iYWxXaGVlbCcsXHJcbiAgICAgICAgICAgICAgICAgICAgYXBwbHk6IChmaWx0ZXJzLCB2ZWhpY2xlRGVzY3JpcHRpb246VmVoaWNsZURlc2NyaXB0aW9uKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2ZWhpY2xlRGVzY3JpcHRpb24uSGFzU2lkZUltYWdlICYmICF2ZWhpY2xlRGVzY3JpcHRpb24uSGFzQW5nbGVkSW1hZ2UpIGZpbHRlcnMuSGFzU2lkZUltYWdlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZlaGljbGVEZXNjcmlwdGlvbi5IYXNBbmdsZWRJbWFnZSAmJiAhdmVoaWNsZURlc2NyaXB0aW9uLkhhc1NpZGVJbWFnZSkgZmlsdGVycy5IYXNBbmdsZWRJbWFnZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICogQXBwbGllcyBhIHZlaGljbGUgc2VsZWN0aW9uIHRvIGFsbCBcclxuICAgICAgICAqIEBwYXJhbSB2ZWhpY2xlIFRoZSB2ZWhpY2xlIHRvIGFwcGx5IHRvIGZpbHRlciBxdWVyaWVzXHJcbiAgICAgICAgKi9cclxuICAgICAgICBcclxuICAgICAgICBwdWJsaWMgc2V0VmVoaWNsZURlc2NyaXB0aW9uKHZlaGljbGVEZXNjcmlwdGlvbjpWZWhpY2xlRGVzY3JpcHRpb24pIHtcclxuICAgICAgICAgICB0aGlzLnNldEZpbHRlcignZ2xvYmFsV2hlZWwnLCB2ZWhpY2xlRGVzY3JpcHRpb24pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHNldFZlaGljbGUodmVoaWNsZTpWZWhpY2xlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0RmlsdGVyKHZlaGljbGVDb25maWdGaWx0ZXJLZXksIHZlaGljbGUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGdldENvdW50KCk6bmV2ZXIge1xyXG4gICAgICAgICAgICAvLyBXZSdsbCBuZXZlciBjYWxsIGdldENvdW50IG9uIHRoZSBHbG9iYWxGaWx0ZXJNb2RlbFxyXG4gICAgICAgICAgICB0aHJvdyAnQ2Fubm90IGNvdW50IEdsb2JhbEZpbHRlck1vZGVsJztcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZXhwb3J0IGNsYXNzIFRpcmVGaWx0ZXJQcm92aWRlciBleHRlbmRzIEZpbHRlclByb3ZpZGVyPFRpcmVGaWx0ZXJNb2RlbD4ge1xyXG4gICAgICAgIHB1YmxpYyByZWFkb25seSBmaWx0ZXJPcHRpb25zOklGaWx0ZXI8YW55LCBUaXJlRmlsdGVyTW9kZWw+W107XHJcbiAgICAgICAgcHJvdGVjdGVkIHJlYWRvbmx5IGJhc2VGaWx0ZXJzOlRpcmVGaWx0ZXJNb2RlbCA9IHtcclxuICAgICAgICAgICAgUmVxdWlyZWRGaXRtZW50UmVzb3VyY2VUeXBlczogW1xyXG4gICAgICAgICAgICAgICAgcmlkZXN0eWxlci5EYXRhT2JqZWN0cy5UaXJlRml0bWVudFJlc291cmNlVHlwZS5DYXRhbG9nXHJcbiAgICAgICAgICAgIF1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBjb25zdHJ1Y3RvcihnbG9iYWxGaWx0ZXJQcm92aWRlcjpHbG9iYWxGaWx0ZXJQcm92aWRlcikge1xyXG4gICAgICAgICAgICBzdXBlcigndGlyZScsIGdsb2JhbEZpbHRlclByb3ZpZGVyKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHRoaXMuZmlsdGVyT3B0aW9ucyA9IFtcclxuICAgICAgICAgICAgICAgIC8vIEJyYW5kXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw6IHN0cmluZ3MuZ2V0U3RyaW5nKCdicmFuZHMnKSxcclxuICAgICAgICAgICAgICAgICAgICB1bnNlbGVjdGVkT3B0aW9uTGFiZWw6IHN0cmluZ3MuZ2V0U3RyaW5nKCdhbGwtYnJhbmRzJyksXHJcbiAgICAgICAgICAgICAgICAgICAga2V5OiAndGlyZS1icmFuZCcsXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0cmlldmVPcHRpb25zOiBnbG9iYWxGaWx0ZXJzID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVxdWVzdCBCcmFuZHNcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2VIZWxwZXIudGhlbihhcGkucmVxdWVzdCgndGlyZS9nZXRicmFuZHMnLCBnbG9iYWxGaWx0ZXJzKSwgcmVzcG9uc2UgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTWFwIGJyYW5kcyB0byBJRmlsdGVyT3B0aW9uc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEFycmF5SGVscGVyLm1hcChyZXNwb25zZS5CcmFuZHMsIGJyYW5kID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogYnJhbmQuVGlyZUJyYW5kTmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGJyYW5kLlRpcmVCcmFuZElEXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgZ2V0VmFsdWVGcm9tRmlsdGVyczogZmlsdGVycyA9PiBmaWx0ZXJzLlRpcmVCcmFuZCxcclxuICAgICAgICAgICAgICAgICAgICBhcHBseTogKGZpbHRlcnMsIHRpcmVCcmFuZElEOnN0cmluZykgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmaWx0ZXJzLlRpcmVCcmFuZCA9IHRpcmVCcmFuZElEO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAvLyBBdHRyaWJ1dGVzXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw6IHN0cmluZ3MuZ2V0U3RyaW5nKCdmZWF0dXJlcycpLFxyXG4gICAgICAgICAgICAgICAgICAgIHVuc2VsZWN0ZWRPcHRpb25MYWJlbDogc3RyaW5ncy5nZXRTdHJpbmcoJ2FueS1mZWF0dXJlcycpLFxyXG4gICAgICAgICAgICAgICAgICAgIGtleTogJ3RpcmUtbW9kZWwtYXR0cmlidXRlJyxcclxuICAgICAgICAgICAgICAgICAgICByZXRyaWV2ZU9wdGlvbnM6IGdsb2JhbEZpbHRlcnMgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBSZXF1ZXN0IFNwZWVkIFJhdGluZ3NcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2VIZWxwZXIudGhlbihhcGkucmVxdWVzdCgndGlyZS9nZXRtb2RlbGF0dHJpYnV0ZXMnLCBnbG9iYWxGaWx0ZXJzKSwgcmVzcG9uc2UgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTWFwIGJyYW5kcyB0byBJRmlsdGVyT3B0aW9uc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEFycmF5SGVscGVyLm1hcChyZXNwb25zZS5BdHRyaWJ1dGVzLCBhdHRyaWJ1dGUgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiBhdHRyaWJ1dGUuVGlyZU1vZGVsQXR0cmlidXRlTmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGF0dHJpYnV0ZS5UaXJlTW9kZWxBdHRyaWJ1dGVJRFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGdldFZhbHVlRnJvbUZpbHRlcnM6IGZpbHRlcnMgPT4gZmlsdGVycy5SZXF1aXJlZFRpcmVNb2RlbEF0dHJpYnV0ZSxcclxuICAgICAgICAgICAgICAgICAgICBhcHBseTogKGZpbHRlcnMsIGF0dHJpYnV0ZUlEOiBudW1iZXIpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmlsdGVycy5SZXF1aXJlZFRpcmVNb2RlbEF0dHJpYnV0ZSA9IGF0dHJpYnV0ZUlEO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAvLyBTcGVlZCBSYXRpbmdcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBsYWJlbDogc3RyaW5ncy5nZXRTdHJpbmcoJ3NwZWVkLXJhdGluZycpLFxyXG4gICAgICAgICAgICAgICAgICAgIHVuc2VsZWN0ZWRPcHRpb25MYWJlbDogc3RyaW5ncy5nZXRTdHJpbmcoJ2FueS1zcGVlZC1yYXRpbmdzJyksXHJcbiAgICAgICAgICAgICAgICAgICAga2V5OiAndGlyZS1zcGVlZC1yYXRpbmcnLFxyXG4gICAgICAgICAgICAgICAgICAgIHJldHJpZXZlT3B0aW9uczogZ2xvYmFsRmlsdGVycyA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJlcXVlc3QgU3BlZWQgUmF0aW5nc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZUhlbHBlci50aGVuKGFwaS5yZXF1ZXN0KCd0aXJlL2dldHNwZWVkcmF0aW5ncycsIGdsb2JhbEZpbHRlcnMpLCByZXNwb25zZSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBNYXAgYnJhbmRzIHRvIElGaWx0ZXJPcHRpb25zXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gQXJyYXlIZWxwZXIubWFwKHJlc3BvbnNlLlNwZWVkUmF0aW5ncywgYnJhbmQgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiBicmFuZC5UaXJlU3BlZWRSYXRpbmdDb2RlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogYnJhbmQuVGlyZVNwZWVkUmF0aW5nSURcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBnZXRWYWx1ZUZyb21GaWx0ZXJzOiBmaWx0ZXJzID0+IGZpbHRlcnMuU3BlZWRSYXRpbmcsXHJcbiAgICAgICAgICAgICAgICAgICAgYXBwbHk6IChmaWx0ZXJzLCBzcGVlZFJhdGluZ0lEOiBudW1iZXIpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmlsdGVycy5TcGVlZFJhdGluZyA9IHNwZWVkUmF0aW5nSUQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBdO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGdldENvdW50KGZpbHRlcnM6VGlyZUZpbHRlck1vZGVsKTpSaWRlU3R5bGVyUHJvbWlzZTxudW1iZXIsIHJpZGVzdHlsZXIuUmlkZVN0eWxlckFQSVJlc3BvbnNlPiB7XHJcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlSGVscGVyLnRoZW4oYXBpLnJlcXVlc3QoXCJ0aXJlL2NvdW50bW9kZWxzXCIsIGZpbHRlcnMpLCByZXNwb25zZSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuQ291bnRcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGV4cG9ydCBjbGFzcyBXaGVlbEZpbHRlclByb3ZpZGVyIGV4dGVuZHMgRmlsdGVyUHJvdmlkZXI8V2hlZWxGaWx0ZXJNb2RlbD4ge1xyXG4gICAgICAgIHB1YmxpYyByZWFkb25seSBmaWx0ZXJPcHRpb25zOklGaWx0ZXI8YW55LCBXaGVlbEZpbHRlck1vZGVsPltdO1xyXG5cclxuICAgICAgICBjb25zdHJ1Y3RvcihnbG9iYWxGaWx0ZXJQcm92aWRlcjpHbG9iYWxGaWx0ZXJQcm92aWRlcikge1xyXG4gICAgICAgICAgICBzdXBlcignd2hlZWwnLCBnbG9iYWxGaWx0ZXJQcm92aWRlcik7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmZpbHRlck9wdGlvbnMgPSBbXHJcbiAgICAgICAgICAgICAgICAvLyBCcmFuZFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsOiBzdHJpbmdzLmdldFN0cmluZygnYnJhbmRzJyksXHJcbiAgICAgICAgICAgICAgICAgICAgdW5zZWxlY3RlZE9wdGlvbkxhYmVsOiBzdHJpbmdzLmdldFN0cmluZygnYWxsLWJyYW5kcycpLFxyXG4gICAgICAgICAgICAgICAgICAgIGtleTogJ3doZWVsLWJyYW5kJyxcclxuICAgICAgICAgICAgICAgICAgICByZXRyaWV2ZU9wdGlvbnM6IGdsb2JhbEZpbHRlcnMgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBSZXF1ZXN0IEJyYW5kc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZUhlbHBlci50aGVuKGFwaS5yZXF1ZXN0KCd3aGVlbC9nZXRicmFuZHMnLCBnbG9iYWxGaWx0ZXJzKSwgcmVzcG9uc2UgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTWFwIGJyYW5kcyB0byBJRmlsdGVyT3B0aW9uc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEFycmF5SGVscGVyLm1hcChyZXNwb25zZS5CcmFuZHMsIGJyYW5kID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogYnJhbmQuV2hlZWxCcmFuZE5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBicmFuZC5XaGVlbEJyYW5kSURcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBnZXRWYWx1ZUZyb21GaWx0ZXJzOiBmaWx0ZXJzID0+IGZpbHRlcnMuV2hlZWxCcmFuZCxcclxuICAgICAgICAgICAgICAgICAgICBhcHBseTogKGZpbHRlcnMsIHdoZWVsQnJhbmRJRDpzdHJpbmcpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmlsdGVycy5XaGVlbEJyYW5kID0gd2hlZWxCcmFuZElEO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAvLyBGaW5pc2hcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBsYWJlbDogc3RyaW5ncy5nZXRTdHJpbmcoJ2ZpbmlzaGVzJyksXHJcbiAgICAgICAgICAgICAgICAgICAgdW5zZWxlY3RlZE9wdGlvbkxhYmVsOiBzdHJpbmdzLmdldFN0cmluZygnYWxsLWZpbmlzaGVzJyksXHJcbiAgICAgICAgICAgICAgICAgICAga2V5OiAnd2hlZWwtZmluaXNoJyxcclxuICAgICAgICAgICAgICAgICAgICByZXRyaWV2ZU9wdGlvbnM6IGdsb2JhbEZpbHRlcnMgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBSZXF1ZXN0IGZpbmlzaGVzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlSGVscGVyLnRoZW4oYXBpLnJlcXVlc3QoJ3doZWVsL2dldGZpbmlzaGVzJywgZ2xvYmFsRmlsdGVycyksIHJlc3BvbnNlID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE1hcCBmaW5pc2hlcyB0byBJRmlsdGVyT3B0aW9uc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEFycmF5SGVscGVyLm1hcChyZXNwb25zZS5GaW5pc2hlcywgZmluaXNoQ2F0ZWdvcnkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiBmaW5pc2hDYXRlZ29yeS5XaGVlbEZpbmlzaENhdGVnb3J5TmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGZpbmlzaENhdGVnb3J5LldoZWVsRmluaXNoQ2F0ZWdvcnlJRFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGdldFZhbHVlRnJvbUZpbHRlcnM6IGZpbHRlcnMgPT4gZmlsdGVycy5XaGVlbEZpbmlzaENhdGVnb3J5LFxyXG4gICAgICAgICAgICAgICAgICAgIGFwcGx5OiAoZmlsdGVycywgd2hlZWxGaW5pc2hDYXRlZ29yeUlEOnN0cmluZykgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmaWx0ZXJzLldoZWVsRmluaXNoQ2F0ZWdvcnkgPSB3aGVlbEZpbmlzaENhdGVnb3J5SUQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIC8vIERpYW1ldGVyXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw6IHN0cmluZ3MuZ2V0U3RyaW5nKCdzaXplcycpLFxyXG4gICAgICAgICAgICAgICAgICAgIHVuc2VsZWN0ZWRPcHRpb25MYWJlbDogc3RyaW5ncy5nZXRTdHJpbmcoJ2FsbC1zaXplcycpLFxyXG4gICAgICAgICAgICAgICAgICAgIGtleTogJ3doZWVsLXNpemUnLFxyXG4gICAgICAgICAgICAgICAgICAgIHJldHJpZXZlT3B0aW9uczogZ2xvYmFsRmlsdGVycyA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJlcXVlc3QgZGlhbWV0ZXJzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlSGVscGVyLnRoZW4oYXBpLnJlcXVlc3QoJ3doZWVsL2dldGRpYW1ldGVycycsIGdsb2JhbEZpbHRlcnMpLCByZXNwb25zZSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBNYXAgZGlhbWV0ZXJzIHRvIElGaWx0ZXJPcHRpb25zXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gQXJyYXlIZWxwZXIubWFwKHJlc3BvbnNlLkRpYW1ldGVycywgZGlhbWV0ZXIgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiBkaWFtZXRlci50b1N0cmluZygpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogZGlhbWV0ZXJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBnZXRWYWx1ZUZyb21GaWx0ZXJzOiBmaWx0ZXJzID0+IGdldEZpdG1lbnRGaWx0ZXJWYWx1ZShmaWx0ZXJzLCAnRGlhbWV0ZXInKSxcclxuICAgICAgICAgICAgICAgICAgICBhcHBseTogKGZpbHRlcnMsIGRpYW1ldGVyOm51bWJlcikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWZpbHRlcnMuRml0bWVudEZpbHRlcnMpIGZpbHRlcnMuRml0bWVudEZpbHRlcnMgPSBbXTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFwcGx5Rml0bWVudEZpbHRlcihmaWx0ZXJzLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBEaWFtZXRlcjogZGlhbWV0ZXJcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBrZXk6ICd3aGVlbCcsXHJcbiAgICAgICAgICAgICAgICAgICAgYXBwbHk6IChmaWx0ZXJzLCB2ZWhpY2xlRGVzY3JpcHRpb246VmVoaWNsZURlc2NyaXB0aW9uKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2ZWhpY2xlRGVzY3JpcHRpb24uSGFzU2lkZUltYWdlICYmICF2ZWhpY2xlRGVzY3JpcHRpb24uSGFzQW5nbGVkSW1hZ2UpIGZpbHRlcnMuSGFzU2lkZUltYWdlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZlaGljbGVEZXNjcmlwdGlvbi5IYXNBbmdsZWRJbWFnZSAmJiAhdmVoaWNsZURlc2NyaXB0aW9uLkhhc1NpZGVJbWFnZSkgZmlsdGVycy5IYXNBbmdsZWRJbWFnZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBdO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHNldFZlaGljbGVEZXNjcmlwdGlvbih2ZWhpY2xlRGVzY3JpcHRpb246VmVoaWNsZURlc2NyaXB0aW9uKSB7XHJcbiAgICAgICAgICAgdGhpcy5zZXRGaWx0ZXIoJ3doZWVsJywgdmVoaWNsZURlc2NyaXB0aW9uKTtcclxuICAgICAgICB9XHJcbiAgICAgIFxyXG4gICAgICAgIHB1YmxpYyBnZXRDb3VudChmaWx0ZXJzOldoZWVsRmlsdGVyTW9kZWwpOlJpZGVTdHlsZXJQcm9taXNlPG51bWJlciwgcmlkZXN0eWxlci5SaWRlU3R5bGVyQVBJUmVzcG9uc2U+IHtcclxuICAgICAgICAgICAgcmV0dXJuIFByb21pc2VIZWxwZXIudGhlbihhcGkucmVxdWVzdChcIndoZWVsL2NvdW50bW9kZWxzXCIsIGZpbHRlcnMpLCByZXNwb25zZSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuQ291bnQ7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBnZXRGaXRtZW50RmlsdGVyVmFsdWU8Rml0bWVudEZpbHRlcktleSBleHRlbmRzIGtleW9mIEZpdG1lbnRGaWx0ZXJNb2RlbD4oZmlsdGVyczp7Rml0bWVudEZpbHRlcnM/OiBGaXRtZW50RmlsdGVyTW9kZWxbXX0sIGtleTogRml0bWVudEZpbHRlcktleSk6Rml0bWVudEZpbHRlck1vZGVsW0ZpdG1lbnRGaWx0ZXJLZXldIHtcclxuICAgICAgICBmb3IgKGNvbnN0IGZpdG1lbnRGaWx0ZXIgb2YgZmlsdGVycy5GaXRtZW50RmlsdGVycyB8fCBbXSkge1xyXG4gICAgICAgICAgICBpZiAoZml0bWVudEZpbHRlci5Hcm91cEtleSA9PT0gZml0bWVudEZpbHRlckdyb3VwS2V5KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZml0bWVudEZpbHRlcltrZXldO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGZpdG1lbnRGaWx0ZXJHcm91cEtleSA9IFwicmlkZXN0eWxlci1zaG93Y2FzZS1maWx0ZXJzXCI7XHJcbiAgICBmdW5jdGlvbiBhcHBseUZpdG1lbnRGaWx0ZXIoZmlsdGVyczp7Rml0bWVudEZpbHRlcnM/OiBGaXRtZW50RmlsdGVyTW9kZWxbXX0sIGZpdG1lbnRGaWx0ZXI6IEZpdG1lbnRGaWx0ZXJNb2RlbCkge1xyXG4gICAgICAgIGxldCBmaXRtZW50RmlsdGVycyA9IGZpbHRlcnMuRml0bWVudEZpbHRlcnMgfHwgW107XHJcbiAgICAgICAgbGV0IGV4aXN0aW5nRml0bWVudEZpbHRlckdyb3VwOkZpdG1lbnRGaWx0ZXJNb2RlbDtcclxuXHJcbiAgICAgICAgZm9yIChjb25zdCBhcHBsaWVkRml0bWVudEZpbHRlciBvZiBmaXRtZW50RmlsdGVycykge1xyXG4gICAgICAgICAgICBpZiAoYXBwbGllZEZpdG1lbnRGaWx0ZXIuR3JvdXBLZXkgPT09IGZpdG1lbnRGaWx0ZXJHcm91cEtleSkge1xyXG4gICAgICAgICAgICAgICAgZXhpc3RpbmdGaXRtZW50RmlsdGVyR3JvdXAgPSBhcHBsaWVkRml0bWVudEZpbHRlcjtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIWV4aXN0aW5nRml0bWVudEZpbHRlckdyb3VwKSB7XHJcbiAgICAgICAgICAgIGZpdG1lbnRGaWx0ZXIuR3JvdXBLZXkgPSBmaXRtZW50RmlsdGVyR3JvdXBLZXk7XHJcbiAgICAgICAgICAgIGZpdG1lbnRGaWx0ZXJzLnB1c2goZml0bWVudEZpbHRlcik7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBXZSd2ZSBtb2RpZmllZCB0aGUgYXJyYXkgc28gdXBkYXRlIHRoZSBhcnJheSBpbiB0aGUgZmlsdGVyc1xyXG4gICAgICAgICAgICBmaWx0ZXJzLkZpdG1lbnRGaWx0ZXJzID0gZml0bWVudEZpbHRlcnM7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgT2JqZWN0SGVscGVyLmFzc2lnbjxGaXRtZW50RmlsdGVyTW9kZWw+KGV4aXN0aW5nRml0bWVudEZpbHRlckdyb3VwLCBmaXRtZW50RmlsdGVyKTtcclxuICAgICAgICAgICAgZXhpc3RpbmdGaXRtZW50RmlsdGVyR3JvdXAuR3JvdXBLZXkgPSBmaXRtZW50RmlsdGVyR3JvdXBLZXk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59IiwidmFyIFJpZGVTdHlsZXJTaG93Y2FzZTtcbihmdW5jdGlvbiAoUmlkZVN0eWxlclNob3djYXNlKSB7XG4gICAgdmFyIGZpbHRlcnM7XG4gICAgKGZ1bmN0aW9uIChmaWx0ZXJzXzEpIHtcbiAgICAgICAgY2xhc3MgRmlsdGVyQ29udHJvbGxlciB7XG4gICAgICAgICAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmdsb2JhbEZpbHRlcnMgPSBuZXcgR2xvYmFsRmlsdGVyUHJvdmlkZXIoKTtcbiAgICAgICAgICAgICAgICB0aGlzLnRpcmVGaWx0ZXJzID0gbmV3IFRpcmVGaWx0ZXJQcm92aWRlcih0aGlzLmdsb2JhbEZpbHRlcnMpO1xuICAgICAgICAgICAgICAgIHRoaXMud2hlZWxGaWx0ZXJzID0gbmV3IFdoZWVsRmlsdGVyUHJvdmlkZXIodGhpcy5nbG9iYWxGaWx0ZXJzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNldFZlaGljbGUodmVoaWNsZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuY2xlYXJGaWx0ZXJzKGZhbHNlKTtcbiAgICAgICAgICAgICAgICB0aGlzLmdsb2JhbEZpbHRlcnMuc2V0VmVoaWNsZSh2ZWhpY2xlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNldFZlaGljbGVEZXNjcmlwdGlvbih2ZWhpY2xlRGVzY3JpcHRpb24pIHtcbiAgICAgICAgICAgICAgICB0aGlzLndoZWVsRmlsdGVycy5zZXRWZWhpY2xlRGVzY3JpcHRpb24odmVoaWNsZURlc2NyaXB0aW9uKTtcbiAgICAgICAgICAgICAgICB0aGlzLmdsb2JhbEZpbHRlcnMuc2V0VmVoaWNsZURlc2NyaXB0aW9uKHZlaGljbGVEZXNjcmlwdGlvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjbGVhckZpbHRlcnModHJpZ2dlckNoYW5nZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZ2xvYmFsRmlsdGVycy5jbGVhcih0cmlnZ2VyQ2hhbmdlKTtcbiAgICAgICAgICAgICAgICB0aGlzLnRpcmVGaWx0ZXJzLmNsZWFyKHRyaWdnZXJDaGFuZ2UpO1xuICAgICAgICAgICAgICAgIHRoaXMud2hlZWxGaWx0ZXJzLmNsZWFyKHRyaWdnZXJDaGFuZ2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZpbHRlcnNfMS5GaWx0ZXJDb250cm9sbGVyID0gRmlsdGVyQ29udHJvbGxlcjtcbiAgICAgICAgY2xhc3MgRmlsdGVyUHJvdmlkZXIge1xuICAgICAgICAgICAgY29uc3RydWN0b3IodHlwZSwgZ2xvYmFsRmlsdGVyUHJvdmlkZXIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnR5cGUgPSB0eXBlO1xuICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudEZpbHRlcnMgPSB7fTtcbiAgICAgICAgICAgICAgICB0aGlzLmdsb2JhbEZpbHRlclByb3ZpZGVyID0gZ2xvYmFsRmlsdGVyUHJvdmlkZXI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIFRyaWdnZXIgdGhlIGZpbHRlciBjaGFuZ2VkIGNhbGxiYWNrXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIHRyaWdnZXJGaWx0ZXJDaGFuZ2UoKSB7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0aGlzLm9uRmlsdGVyc0NoYW5nZWQgPT09ICdmdW5jdGlvbicpXG4gICAgICAgICAgICAgICAgICAgIHRoaXMub25GaWx0ZXJzQ2hhbmdlZCh0aGlzLmdldEZpbHRlcnMoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIFJldHVybnMgYSBmaWx0ZXIgbW9kZWwgd2l0aCB0aGUgc3BlY2lmaWVkIGZpbHRlciB2YWx1ZXMgc2V0LFxuICAgICAgICAgICAgICogd2l0aG91dCBhY3R1YWxseSBzZXR0aW5nIHRoZW1cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgcHJldmlld0ZpbHRlcnMoZmlsdGVyVmFsdWVzKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZ2xvYmFsRmlsdGVycyA9ICh0aGlzLmdsb2JhbEZpbHRlclByb3ZpZGVyID9cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5nbG9iYWxGaWx0ZXJQcm92aWRlci5nZXRGaWx0ZXJzKCkgOlxuICAgICAgICAgICAgICAgICAgICB7fSk7XG4gICAgICAgICAgICAgICAgY29uc3QgZmlsdGVycyA9IHt9O1xuICAgICAgICAgICAgICAgIGNvbnN0IGJhc2VGaWx0ZXJzID0gdGhpcy5iYXNlRmlsdGVycztcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGZpbHRlclZhbHVlIG9mIGZpbHRlclZhbHVlcykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB7IGtleSwgdmFsdWUgfSA9IGZpbHRlclZhbHVlO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldEZpbHRlcihrZXksIHZhbHVlLCBmaWx0ZXJzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIFJpZGVTdHlsZXJTaG93Y2FzZS5PYmplY3RIZWxwZXIuYXNzaWduKHt9LCB0aGlzLmJhc2VGaWx0ZXJzLCBnbG9iYWxGaWx0ZXJzLCBmaWx0ZXJzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogUmV0dXJucyB0aGUgY3VycmVudGx5IGFwcGxpZWQgZmlsdGVyc1xuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBnZXRGaWx0ZXJzKCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGdsb2JhbEZpbHRlcnMgPSAodGhpcy5nbG9iYWxGaWx0ZXJQcm92aWRlciA/XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ2xvYmFsRmlsdGVyUHJvdmlkZXIuZ2V0RmlsdGVycygpIDpcbiAgICAgICAgICAgICAgICAgICAge30pO1xuICAgICAgICAgICAgICAgIHJldHVybiBSaWRlU3R5bGVyU2hvd2Nhc2UuT2JqZWN0SGVscGVyLmFzc2lnbih7fSwgdGhpcy5iYXNlRmlsdGVycywgZ2xvYmFsRmlsdGVycywgdGhpcy5jdXJyZW50RmlsdGVycyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIFJldHJpZXZlIHRoZSBvcHRpb25zIGZvciBhIGZpbHRlclxuICAgICAgICAgICAgICogQHBhcmFtIGZpbHRlciBUaGUgZmlsdGVyXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIHJldHJpZXZlT3B0aW9ucyhmaWx0ZXIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmlsdGVyLnJldHJpZXZlT3B0aW9ucyh0aGlzLmdsb2JhbEZpbHRlclByb3ZpZGVyLmdldEZpbHRlcnMoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIFNldCBhIGZpbHRlciBvcHRpb24sIG9uIGEgc3BlY2lmaWMgZmlsdGVyIG1vZGVsXG4gICAgICAgICAgICAgKiBAcGFyYW0ga2V5IFRoZSBmaWx0ZXIga2V5IHRvIGFwcGx5XG4gICAgICAgICAgICAgKiBAcGFyYW0gdmFsdWUgVGhlIHZhbHVlIHRvIGFwcGx5IHRvIHRoZSBmaWx0ZXJcbiAgICAgICAgICAgICAqIEBwYXJhbSBmaWx0ZXJzIFRoZSBmaWx0ZXJzIHRvIGFwcGx5IHRoZW0gdG9cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgc2V0RmlsdGVyKGtleSwgdmFsdWUsIGZpbHRlcnMgPSB0aGlzLmN1cnJlbnRGaWx0ZXJzKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZmlsdGVyT3B0aW9uID0gdGhpcy5maW5kRmlsdGVyT3B0aW9uKGtleSk7XG4gICAgICAgICAgICAgICAgaWYgKGZpbHRlck9wdGlvbikge1xuICAgICAgICAgICAgICAgICAgICBmaWx0ZXJPcHRpb24uYXBwbHkoZmlsdGVycywgdmFsdWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogUmV0dXJucyB0aGUgZmlsdGVyIG9wdGlvbiBmb3IgdGhlIHNwZWNpZmllZCBrZXlcbiAgICAgICAgICAgICAqIEBwYXJhbSBrZXkgVGhlIGZpbHRlciBrZXlcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgZmluZEZpbHRlck9wdGlvbihrZXkpIHtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGZpbHRlciBvZiB0aGlzLmZpbHRlck9wdGlvbnMpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZpbHRlci5rZXkgPT09IGtleSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZpbHRlcjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2V0RmlsdGVycyhzZWxlY3RlZEZpbHRlcnNPcktleSwgdmFsdWUsIHRyaWdnZXJDaGFuZ2UpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBuZXdGaWx0ZXJzID0ge307XG4gICAgICAgICAgICAgICAgbGV0IHNlbGVjdGVkRmlsdGVycztcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHNlbGVjdGVkRmlsdGVyc09yS2V5ID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZEZpbHRlcnMgPSBbe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleTogc2VsZWN0ZWRGaWx0ZXJzT3JLZXksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHZhbHVlXG4gICAgICAgICAgICAgICAgICAgICAgICB9XTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkRmlsdGVycyA9IHNlbGVjdGVkRmlsdGVyc09yS2V5O1xuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnYm9vbGVhbicpXG4gICAgICAgICAgICAgICAgICAgICAgICB0cmlnZ2VyQ2hhbmdlID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZvciAoY29uc3Qgc2VsZWN0ZWRGaWx0ZXIgb2Ygc2VsZWN0ZWRGaWx0ZXJzKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHsga2V5LCB2YWx1ZSB9ID0gc2VsZWN0ZWRGaWx0ZXI7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0RmlsdGVyKGtleSwgdmFsdWUsIG5ld0ZpbHRlcnMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBsZXQgaGFzQ2hhbmdlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIG5ld0ZpbHRlcnMpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5ld0ZpbHRlcnMuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3RmlsdGVyVmFsdWUgPSBuZXdGaWx0ZXJzW2tleV07XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50RmlsdGVyVmFsdWUgPSB0aGlzLmN1cnJlbnRGaWx0ZXJzW2tleV07XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobmV3RmlsdGVyVmFsdWUgIT09IGN1cnJlbnRGaWx0ZXJWYWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudEZpbHRlcnNba2V5XSA9IG5ld0ZpbHRlclZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhc0NoYW5nZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdHJpZ2dlckNoYW5nZSA9PT0gJ3VuZGVmaW5lZCcpXG4gICAgICAgICAgICAgICAgICAgIHRyaWdnZXJDaGFuZ2UgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGlmIChoYXNDaGFuZ2VkICYmIHRyaWdnZXJDaGFuZ2UpXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudHJpZ2dlckZpbHRlckNoYW5nZSgpO1xuICAgICAgICAgICAgICAgIHJldHVybiBoYXNDaGFuZ2VkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2xlYXIodHJpZ2dlckNoYW5nZSA9IHRydWUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRGaWx0ZXJzID0ge307XG4gICAgICAgICAgICAgICAgaWYgKHRyaWdnZXJDaGFuZ2UpXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudHJpZ2dlckZpbHRlckNoYW5nZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZpbHRlcnNfMS5GaWx0ZXJQcm92aWRlciA9IEZpbHRlclByb3ZpZGVyO1xuICAgICAgICBjb25zdCB2ZWhpY2xlQ29uZmlnRmlsdGVyS2V5ID0gJ3ZlaGljbGUtY29uZmlnJztcbiAgICAgICAgY2xhc3MgR2xvYmFsRmlsdGVyUHJvdmlkZXIgZXh0ZW5kcyBGaWx0ZXJQcm92aWRlciB7XG4gICAgICAgICAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgICAgICAgICBzdXBlcignZ2xvYmFsJywgdW5kZWZpbmVkKTtcbiAgICAgICAgICAgICAgICB0aGlzLmJhc2VGaWx0ZXJzID0ge1xuICAgICAgICAgICAgICAgICAgICBIYXNGaXRtZW50czogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgSGFzQ2F0YWxvZ0ltYWdlOiB0cnVlXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRGaWx0ZXJzID0ge307XG4gICAgICAgICAgICAgICAgdGhpcy5maWx0ZXJPcHRpb25zID0gW1xuICAgICAgICAgICAgICAgICAgICAvLyBWZWhpY2xlQ29uZmlndXJhdGlvbiAmIFZlaGljbGVUaXJlT3B0aW9uXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleTogdmVoaWNsZUNvbmZpZ0ZpbHRlcktleSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZpc2libGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgYXBwbHk6IChmaWx0ZXJzLCB2ZWhpY2xlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHsgdmVoaWNsZUNvbmZpZ3VyYXRpb25JRCwgdmVoaWNsZVRpcmVPcHRpb25JRCB9ID0gdmVoaWNsZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodmVoaWNsZUNvbmZpZ3VyYXRpb25JRClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsdGVycy5WZWhpY2xlQ29uZmlndXJhdGlvbiA9IHZlaGljbGVDb25maWd1cmF0aW9uSUQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZlaGljbGVUaXJlT3B0aW9uSUQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbHRlcnMuVmVoaWNsZVRpcmVPcHRpb24gPSB2ZWhpY2xlVGlyZU9wdGlvbklEO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBrZXk6ICdnbG9iYWxXaGVlbCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBhcHBseTogKGZpbHRlcnMsIHZlaGljbGVEZXNjcmlwdGlvbikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2ZWhpY2xlRGVzY3JpcHRpb24uSGFzU2lkZUltYWdlICYmICF2ZWhpY2xlRGVzY3JpcHRpb24uSGFzQW5nbGVkSW1hZ2UpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbHRlcnMuSGFzU2lkZUltYWdlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodmVoaWNsZURlc2NyaXB0aW9uLkhhc0FuZ2xlZEltYWdlICYmICF2ZWhpY2xlRGVzY3JpcHRpb24uSGFzU2lkZUltYWdlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWx0ZXJzLkhhc0FuZ2xlZEltYWdlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIF07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICogQXBwbGllcyBhIHZlaGljbGUgc2VsZWN0aW9uIHRvIGFsbFxuICAgICAgICAgICAgKiBAcGFyYW0gdmVoaWNsZSBUaGUgdmVoaWNsZSB0byBhcHBseSB0byBmaWx0ZXIgcXVlcmllc1xuICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIHNldFZlaGljbGVEZXNjcmlwdGlvbih2ZWhpY2xlRGVzY3JpcHRpb24pIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldEZpbHRlcignZ2xvYmFsV2hlZWwnLCB2ZWhpY2xlRGVzY3JpcHRpb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2V0VmVoaWNsZSh2ZWhpY2xlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRGaWx0ZXIodmVoaWNsZUNvbmZpZ0ZpbHRlcktleSwgdmVoaWNsZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBnZXRDb3VudCgpIHtcbiAgICAgICAgICAgICAgICAvLyBXZSdsbCBuZXZlciBjYWxsIGdldENvdW50IG9uIHRoZSBHbG9iYWxGaWx0ZXJNb2RlbFxuICAgICAgICAgICAgICAgIHRocm93ICdDYW5ub3QgY291bnQgR2xvYmFsRmlsdGVyTW9kZWwnO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZpbHRlcnNfMS5HbG9iYWxGaWx0ZXJQcm92aWRlciA9IEdsb2JhbEZpbHRlclByb3ZpZGVyO1xuICAgICAgICBjbGFzcyBUaXJlRmlsdGVyUHJvdmlkZXIgZXh0ZW5kcyBGaWx0ZXJQcm92aWRlciB7XG4gICAgICAgICAgICBjb25zdHJ1Y3RvcihnbG9iYWxGaWx0ZXJQcm92aWRlcikge1xuICAgICAgICAgICAgICAgIHN1cGVyKCd0aXJlJywgZ2xvYmFsRmlsdGVyUHJvdmlkZXIpO1xuICAgICAgICAgICAgICAgIHRoaXMuYmFzZUZpbHRlcnMgPSB7XG4gICAgICAgICAgICAgICAgICAgIFJlcXVpcmVkRml0bWVudFJlc291cmNlVHlwZXM6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgIDIgLyogQ2F0YWxvZyAqL1xuICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB0aGlzLmZpbHRlck9wdGlvbnMgPSBbXG4gICAgICAgICAgICAgICAgICAgIC8vIEJyYW5kXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiBSaWRlU3R5bGVyU2hvd2Nhc2Uuc3RyaW5ncy5nZXRTdHJpbmcoJ2JyYW5kcycpLFxuICAgICAgICAgICAgICAgICAgICAgICAgdW5zZWxlY3RlZE9wdGlvbkxhYmVsOiBSaWRlU3R5bGVyU2hvd2Nhc2Uuc3RyaW5ncy5nZXRTdHJpbmcoJ2FsbC1icmFuZHMnKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleTogJ3RpcmUtYnJhbmQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0cmlldmVPcHRpb25zOiBnbG9iYWxGaWx0ZXJzID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBSZXF1ZXN0IEJyYW5kc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBSaWRlU3R5bGVyU2hvd2Nhc2UuUHJvbWlzZUhlbHBlci50aGVuKFJpZGVTdHlsZXJTaG93Y2FzZS5hcGkucmVxdWVzdCgndGlyZS9nZXRicmFuZHMnLCBnbG9iYWxGaWx0ZXJzKSwgcmVzcG9uc2UgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBNYXAgYnJhbmRzIHRvIElGaWx0ZXJPcHRpb25zXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBSaWRlU3R5bGVyU2hvd2Nhc2UuQXJyYXlIZWxwZXIubWFwKHJlc3BvbnNlLkJyYW5kcywgYnJhbmQgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogYnJhbmQuVGlyZUJyYW5kTmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogYnJhbmQuVGlyZUJyYW5kSURcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGdldFZhbHVlRnJvbUZpbHRlcnM6IGZpbHRlcnMgPT4gZmlsdGVycy5UaXJlQnJhbmQsXG4gICAgICAgICAgICAgICAgICAgICAgICBhcHBseTogKGZpbHRlcnMsIHRpcmVCcmFuZElEKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsdGVycy5UaXJlQnJhbmQgPSB0aXJlQnJhbmRJRDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgLy8gQXR0cmlidXRlc1xuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogUmlkZVN0eWxlclNob3djYXNlLnN0cmluZ3MuZ2V0U3RyaW5nKCdmZWF0dXJlcycpLFxuICAgICAgICAgICAgICAgICAgICAgICAgdW5zZWxlY3RlZE9wdGlvbkxhYmVsOiBSaWRlU3R5bGVyU2hvd2Nhc2Uuc3RyaW5ncy5nZXRTdHJpbmcoJ2FueS1mZWF0dXJlcycpLFxuICAgICAgICAgICAgICAgICAgICAgICAga2V5OiAndGlyZS1tb2RlbC1hdHRyaWJ1dGUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0cmlldmVPcHRpb25zOiBnbG9iYWxGaWx0ZXJzID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBSZXF1ZXN0IFNwZWVkIFJhdGluZ3NcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gUmlkZVN0eWxlclNob3djYXNlLlByb21pc2VIZWxwZXIudGhlbihSaWRlU3R5bGVyU2hvd2Nhc2UuYXBpLnJlcXVlc3QoJ3RpcmUvZ2V0bW9kZWxhdHRyaWJ1dGVzJywgZ2xvYmFsRmlsdGVycyksIHJlc3BvbnNlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTWFwIGJyYW5kcyB0byBJRmlsdGVyT3B0aW9uc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gUmlkZVN0eWxlclNob3djYXNlLkFycmF5SGVscGVyLm1hcChyZXNwb25zZS5BdHRyaWJ1dGVzLCBhdHRyaWJ1dGUgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogYXR0cmlidXRlLlRpcmVNb2RlbEF0dHJpYnV0ZU5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGF0dHJpYnV0ZS5UaXJlTW9kZWxBdHRyaWJ1dGVJRFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgZ2V0VmFsdWVGcm9tRmlsdGVyczogZmlsdGVycyA9PiBmaWx0ZXJzLlJlcXVpcmVkVGlyZU1vZGVsQXR0cmlidXRlLFxuICAgICAgICAgICAgICAgICAgICAgICAgYXBwbHk6IChmaWx0ZXJzLCBhdHRyaWJ1dGVJRCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbHRlcnMuUmVxdWlyZWRUaXJlTW9kZWxBdHRyaWJ1dGUgPSBhdHRyaWJ1dGVJRDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgLy8gU3BlZWQgUmF0aW5nXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiBSaWRlU3R5bGVyU2hvd2Nhc2Uuc3RyaW5ncy5nZXRTdHJpbmcoJ3NwZWVkLXJhdGluZycpLFxuICAgICAgICAgICAgICAgICAgICAgICAgdW5zZWxlY3RlZE9wdGlvbkxhYmVsOiBSaWRlU3R5bGVyU2hvd2Nhc2Uuc3RyaW5ncy5nZXRTdHJpbmcoJ2FueS1zcGVlZC1yYXRpbmdzJyksXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXk6ICd0aXJlLXNwZWVkLXJhdGluZycsXG4gICAgICAgICAgICAgICAgICAgICAgICByZXRyaWV2ZU9wdGlvbnM6IGdsb2JhbEZpbHRlcnMgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJlcXVlc3QgU3BlZWQgUmF0aW5nc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBSaWRlU3R5bGVyU2hvd2Nhc2UuUHJvbWlzZUhlbHBlci50aGVuKFJpZGVTdHlsZXJTaG93Y2FzZS5hcGkucmVxdWVzdCgndGlyZS9nZXRzcGVlZHJhdGluZ3MnLCBnbG9iYWxGaWx0ZXJzKSwgcmVzcG9uc2UgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBNYXAgYnJhbmRzIHRvIElGaWx0ZXJPcHRpb25zXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBSaWRlU3R5bGVyU2hvd2Nhc2UuQXJyYXlIZWxwZXIubWFwKHJlc3BvbnNlLlNwZWVkUmF0aW5ncywgYnJhbmQgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogYnJhbmQuVGlyZVNwZWVkUmF0aW5nQ29kZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogYnJhbmQuVGlyZVNwZWVkUmF0aW5nSURcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGdldFZhbHVlRnJvbUZpbHRlcnM6IGZpbHRlcnMgPT4gZmlsdGVycy5TcGVlZFJhdGluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGFwcGx5OiAoZmlsdGVycywgc3BlZWRSYXRpbmdJRCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbHRlcnMuU3BlZWRSYXRpbmcgPSBzcGVlZFJhdGluZ0lEO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGdldENvdW50KGZpbHRlcnMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gUmlkZVN0eWxlclNob3djYXNlLlByb21pc2VIZWxwZXIudGhlbihSaWRlU3R5bGVyU2hvd2Nhc2UuYXBpLnJlcXVlc3QoXCJ0aXJlL2NvdW50bW9kZWxzXCIsIGZpbHRlcnMpLCByZXNwb25zZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5Db3VudDtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBmaWx0ZXJzXzEuVGlyZUZpbHRlclByb3ZpZGVyID0gVGlyZUZpbHRlclByb3ZpZGVyO1xuICAgICAgICBjbGFzcyBXaGVlbEZpbHRlclByb3ZpZGVyIGV4dGVuZHMgRmlsdGVyUHJvdmlkZXIge1xuICAgICAgICAgICAgY29uc3RydWN0b3IoZ2xvYmFsRmlsdGVyUHJvdmlkZXIpIHtcbiAgICAgICAgICAgICAgICBzdXBlcignd2hlZWwnLCBnbG9iYWxGaWx0ZXJQcm92aWRlcik7XG4gICAgICAgICAgICAgICAgdGhpcy5maWx0ZXJPcHRpb25zID0gW1xuICAgICAgICAgICAgICAgICAgICAvLyBCcmFuZFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogUmlkZVN0eWxlclNob3djYXNlLnN0cmluZ3MuZ2V0U3RyaW5nKCdicmFuZHMnKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHVuc2VsZWN0ZWRPcHRpb25MYWJlbDogUmlkZVN0eWxlclNob3djYXNlLnN0cmluZ3MuZ2V0U3RyaW5nKCdhbGwtYnJhbmRzJyksXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXk6ICd3aGVlbC1icmFuZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICByZXRyaWV2ZU9wdGlvbnM6IGdsb2JhbEZpbHRlcnMgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJlcXVlc3QgQnJhbmRzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFJpZGVTdHlsZXJTaG93Y2FzZS5Qcm9taXNlSGVscGVyLnRoZW4oUmlkZVN0eWxlclNob3djYXNlLmFwaS5yZXF1ZXN0KCd3aGVlbC9nZXRicmFuZHMnLCBnbG9iYWxGaWx0ZXJzKSwgcmVzcG9uc2UgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBNYXAgYnJhbmRzIHRvIElGaWx0ZXJPcHRpb25zXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBSaWRlU3R5bGVyU2hvd2Nhc2UuQXJyYXlIZWxwZXIubWFwKHJlc3BvbnNlLkJyYW5kcywgYnJhbmQgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogYnJhbmQuV2hlZWxCcmFuZE5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGJyYW5kLldoZWVsQnJhbmRJRFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgZ2V0VmFsdWVGcm9tRmlsdGVyczogZmlsdGVycyA9PiBmaWx0ZXJzLldoZWVsQnJhbmQsXG4gICAgICAgICAgICAgICAgICAgICAgICBhcHBseTogKGZpbHRlcnMsIHdoZWVsQnJhbmRJRCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbHRlcnMuV2hlZWxCcmFuZCA9IHdoZWVsQnJhbmRJRDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgLy8gRmluaXNoXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiBSaWRlU3R5bGVyU2hvd2Nhc2Uuc3RyaW5ncy5nZXRTdHJpbmcoJ2ZpbmlzaGVzJyksXG4gICAgICAgICAgICAgICAgICAgICAgICB1bnNlbGVjdGVkT3B0aW9uTGFiZWw6IFJpZGVTdHlsZXJTaG93Y2FzZS5zdHJpbmdzLmdldFN0cmluZygnYWxsLWZpbmlzaGVzJyksXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXk6ICd3aGVlbC1maW5pc2gnLFxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0cmlldmVPcHRpb25zOiBnbG9iYWxGaWx0ZXJzID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBSZXF1ZXN0IGZpbmlzaGVzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFJpZGVTdHlsZXJTaG93Y2FzZS5Qcm9taXNlSGVscGVyLnRoZW4oUmlkZVN0eWxlclNob3djYXNlLmFwaS5yZXF1ZXN0KCd3aGVlbC9nZXRmaW5pc2hlcycsIGdsb2JhbEZpbHRlcnMpLCByZXNwb25zZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE1hcCBmaW5pc2hlcyB0byBJRmlsdGVyT3B0aW9uc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gUmlkZVN0eWxlclNob3djYXNlLkFycmF5SGVscGVyLm1hcChyZXNwb25zZS5GaW5pc2hlcywgZmluaXNoQ2F0ZWdvcnkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogZmluaXNoQ2F0ZWdvcnkuV2hlZWxGaW5pc2hDYXRlZ29yeU5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGZpbmlzaENhdGVnb3J5LldoZWVsRmluaXNoQ2F0ZWdvcnlJRFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgZ2V0VmFsdWVGcm9tRmlsdGVyczogZmlsdGVycyA9PiBmaWx0ZXJzLldoZWVsRmluaXNoQ2F0ZWdvcnksXG4gICAgICAgICAgICAgICAgICAgICAgICBhcHBseTogKGZpbHRlcnMsIHdoZWVsRmluaXNoQ2F0ZWdvcnlJRCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbHRlcnMuV2hlZWxGaW5pc2hDYXRlZ29yeSA9IHdoZWVsRmluaXNoQ2F0ZWdvcnlJRDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgLy8gRGlhbWV0ZXJcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6IFJpZGVTdHlsZXJTaG93Y2FzZS5zdHJpbmdzLmdldFN0cmluZygnc2l6ZXMnKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHVuc2VsZWN0ZWRPcHRpb25MYWJlbDogUmlkZVN0eWxlclNob3djYXNlLnN0cmluZ3MuZ2V0U3RyaW5nKCdhbGwtc2l6ZXMnKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleTogJ3doZWVsLXNpemUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0cmlldmVPcHRpb25zOiBnbG9iYWxGaWx0ZXJzID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBSZXF1ZXN0IGRpYW1ldGVyc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBSaWRlU3R5bGVyU2hvd2Nhc2UuUHJvbWlzZUhlbHBlci50aGVuKFJpZGVTdHlsZXJTaG93Y2FzZS5hcGkucmVxdWVzdCgnd2hlZWwvZ2V0ZGlhbWV0ZXJzJywgZ2xvYmFsRmlsdGVycyksIHJlc3BvbnNlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTWFwIGRpYW1ldGVycyB0byBJRmlsdGVyT3B0aW9uc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gUmlkZVN0eWxlclNob3djYXNlLkFycmF5SGVscGVyLm1hcChyZXNwb25zZS5EaWFtZXRlcnMsIGRpYW1ldGVyID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6IGRpYW1ldGVyLnRvU3RyaW5nKCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGRpYW1ldGVyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBnZXRWYWx1ZUZyb21GaWx0ZXJzOiBmaWx0ZXJzID0+IGdldEZpdG1lbnRGaWx0ZXJWYWx1ZShmaWx0ZXJzLCAnRGlhbWV0ZXInKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGFwcGx5OiAoZmlsdGVycywgZGlhbWV0ZXIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWZpbHRlcnMuRml0bWVudEZpbHRlcnMpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbHRlcnMuRml0bWVudEZpbHRlcnMgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcHBseUZpdG1lbnRGaWx0ZXIoZmlsdGVycywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEaWFtZXRlcjogZGlhbWV0ZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAga2V5OiAnd2hlZWwnLFxuICAgICAgICAgICAgICAgICAgICAgICAgYXBwbHk6IChmaWx0ZXJzLCB2ZWhpY2xlRGVzY3JpcHRpb24pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodmVoaWNsZURlc2NyaXB0aW9uLkhhc1NpZGVJbWFnZSAmJiAhdmVoaWNsZURlc2NyaXB0aW9uLkhhc0FuZ2xlZEltYWdlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWx0ZXJzLkhhc1NpZGVJbWFnZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZlaGljbGVEZXNjcmlwdGlvbi5IYXNBbmdsZWRJbWFnZSAmJiAhdmVoaWNsZURlc2NyaXB0aW9uLkhhc1NpZGVJbWFnZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsdGVycy5IYXNBbmdsZWRJbWFnZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2V0VmVoaWNsZURlc2NyaXB0aW9uKHZlaGljbGVEZXNjcmlwdGlvbikge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0RmlsdGVyKCd3aGVlbCcsIHZlaGljbGVEZXNjcmlwdGlvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBnZXRDb3VudChmaWx0ZXJzKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFJpZGVTdHlsZXJTaG93Y2FzZS5Qcm9taXNlSGVscGVyLnRoZW4oUmlkZVN0eWxlclNob3djYXNlLmFwaS5yZXF1ZXN0KFwid2hlZWwvY291bnRtb2RlbHNcIiwgZmlsdGVycyksIHJlc3BvbnNlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLkNvdW50O1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZpbHRlcnNfMS5XaGVlbEZpbHRlclByb3ZpZGVyID0gV2hlZWxGaWx0ZXJQcm92aWRlcjtcbiAgICAgICAgZnVuY3Rpb24gZ2V0Rml0bWVudEZpbHRlclZhbHVlKGZpbHRlcnMsIGtleSkge1xuICAgICAgICAgICAgZm9yIChjb25zdCBmaXRtZW50RmlsdGVyIG9mIGZpbHRlcnMuRml0bWVudEZpbHRlcnMgfHwgW10pIHtcbiAgICAgICAgICAgICAgICBpZiAoZml0bWVudEZpbHRlci5Hcm91cEtleSA9PT0gZml0bWVudEZpbHRlckdyb3VwS2V5KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmaXRtZW50RmlsdGVyW2tleV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBmaXRtZW50RmlsdGVyR3JvdXBLZXkgPSBcInJpZGVzdHlsZXItc2hvd2Nhc2UtZmlsdGVyc1wiO1xuICAgICAgICBmdW5jdGlvbiBhcHBseUZpdG1lbnRGaWx0ZXIoZmlsdGVycywgZml0bWVudEZpbHRlcikge1xuICAgICAgICAgICAgbGV0IGZpdG1lbnRGaWx0ZXJzID0gZmlsdGVycy5GaXRtZW50RmlsdGVycyB8fCBbXTtcbiAgICAgICAgICAgIGxldCBleGlzdGluZ0ZpdG1lbnRGaWx0ZXJHcm91cDtcbiAgICAgICAgICAgIGZvciAoY29uc3QgYXBwbGllZEZpdG1lbnRGaWx0ZXIgb2YgZml0bWVudEZpbHRlcnMpIHtcbiAgICAgICAgICAgICAgICBpZiAoYXBwbGllZEZpdG1lbnRGaWx0ZXIuR3JvdXBLZXkgPT09IGZpdG1lbnRGaWx0ZXJHcm91cEtleSkge1xuICAgICAgICAgICAgICAgICAgICBleGlzdGluZ0ZpdG1lbnRGaWx0ZXJHcm91cCA9IGFwcGxpZWRGaXRtZW50RmlsdGVyO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWV4aXN0aW5nRml0bWVudEZpbHRlckdyb3VwKSB7XG4gICAgICAgICAgICAgICAgZml0bWVudEZpbHRlci5Hcm91cEtleSA9IGZpdG1lbnRGaWx0ZXJHcm91cEtleTtcbiAgICAgICAgICAgICAgICBmaXRtZW50RmlsdGVycy5wdXNoKGZpdG1lbnRGaWx0ZXIpO1xuICAgICAgICAgICAgICAgIC8vIFdlJ3ZlIG1vZGlmaWVkIHRoZSBhcnJheSBzbyB1cGRhdGUgdGhlIGFycmF5IGluIHRoZSBmaWx0ZXJzXG4gICAgICAgICAgICAgICAgZmlsdGVycy5GaXRtZW50RmlsdGVycyA9IGZpdG1lbnRGaWx0ZXJzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgUmlkZVN0eWxlclNob3djYXNlLk9iamVjdEhlbHBlci5hc3NpZ24oZXhpc3RpbmdGaXRtZW50RmlsdGVyR3JvdXAsIGZpdG1lbnRGaWx0ZXIpO1xuICAgICAgICAgICAgICAgIGV4aXN0aW5nRml0bWVudEZpbHRlckdyb3VwLkdyb3VwS2V5ID0gZml0bWVudEZpbHRlckdyb3VwS2V5O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSkoZmlsdGVycyA9IFJpZGVTdHlsZXJTaG93Y2FzZS5maWx0ZXJzIHx8IChSaWRlU3R5bGVyU2hvd2Nhc2UuZmlsdGVycyA9IHt9KSk7XG59KShSaWRlU3R5bGVyU2hvd2Nhc2UgfHwgKFJpZGVTdHlsZXJTaG93Y2FzZSA9IHt9KSk7XG4iXX0=

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var RideStylerShowcase;
(function (RideStylerShowcase) {
    var States = void 0;
    (function (States) {
        States[States["ChooseVehicle"] = 0] = "ChooseVehicle";
        States[States["Visualize"] = 1] = "Visualize";
    })(States = RideStylerShowcase.States || (RideStylerShowcase.States = {}));
})(RideStylerShowcase || (RideStylerShowcase = {}));
(function (RideStylerShowcase) {
    var state;
    (function (state_1) {
        /**
         * A register holding the exit/enter callbacks for a specific state
         */
        var StateCallbackRegister = function () {
            function StateCallbackRegister(state) {
                _classCallCheck(this, StateCallbackRegister);

                this.state = state;
                this.exitCallbacks = [];
                this.enterCallbacks = [];
            }
            /**
             * Trigger all of the exit callbacks for this state. If a callback returns false,
             * skip triggering the remaining callbacks and return false;
             */


            _createClass(StateCallbackRegister, [{
                key: "triggerExitCallbacks",
                value: function triggerExitCallbacks(currentState, newState, newData) {
                    var _iteratorNormalCompletion = true;
                    var _didIteratorError = false;
                    var _iteratorError = undefined;

                    try {
                        for (var _iterator = this.exitCallbacks[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
                            var exitCallback = _step.value;

                            if (exitCallback(currentState, newState, newData) === false) return false;
                        }
                    } catch (err) {
                        _didIteratorError = true;
                        _iteratorError = err;
                    } finally {
                        try {
                            if (!_iteratorNormalCompletion && _iterator.return) {
                                _iterator.return();
                            }
                        } finally {
                            if (_didIteratorError) {
                                throw _iteratorError;
                            }
                        }
                    }

                    return true;
                }
                /**
                 * Trigger all of the enter callbacks for this state. If a callback returns false,
                 * skip triggering the remaining callbacks and return false;
                 */

            }, {
                key: "triggerEnterCallbacks",
                value: function triggerEnterCallbacks(oldState, currentState, newData) {
                    var _iteratorNormalCompletion2 = true;
                    var _didIteratorError2 = false;
                    var _iteratorError2 = undefined;

                    try {
                        for (var _iterator2 = this.enterCallbacks[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {
                            var enterCallback = _step2.value;

                            if (enterCallback(oldState, currentState, newData) === false) return false;
                        }
                    } catch (err) {
                        _didIteratorError2 = true;
                        _iteratorError2 = err;
                    } finally {
                        try {
                            if (!_iteratorNormalCompletion2 && _iterator2.return) {
                                _iterator2.return();
                            }
                        } finally {
                            if (_didIteratorError2) {
                                throw _iteratorError2;
                            }
                        }
                    }

                    return true;
                }
            }]);

            return StateCallbackRegister;
        }();

        var RideStylerShowcaseState = function () {
            function RideStylerShowcaseState(initialState) {
                _classCallCheck(this, RideStylerShowcaseState);

                this.currentData = {
                    currentVehicleConfigurationID: undefined,
                    currentVehicleDescription: undefined,
                    vehicleHasAngledImage: undefined,
                    vehicleHasSideImage: undefined,
                    currentVehicleTireOptionDescription: undefined,
                    currentVehicleTireOptionID: undefined,
                    currentPaintScheme: undefined,
                    currentTire: undefined,
                    currentWheel: undefined,
                    currentWheelFitment: undefined,
                    currentTireOption: undefined,
                    currentVehicleDescriptionModel: undefined
                };
                /**
                 * A dictionary of States to StateCallbackRegisters
                 */
                this.callbacks = {};
                /**
                 * State changed callbacks
                 */
                this.changeCallbacks = [];
                /**
                 * Data changed callbacks
                 */
                this.dataChangedCallbacks = [];
                this.currentState = initialState;
            }

            _createClass(RideStylerShowcaseState, [{
                key: "getData",
                value: function getData() {
                    return this.currentData;
                }
            }, {
                key: "setData",
                value: function setData(newData) {
                    var beforeCallbacks = [],
                        afterCallbacks = [];
                    var _iteratorNormalCompletion3 = true;
                    var _didIteratorError3 = false;
                    var _iteratorError3 = undefined;

                    try {
                        for (var _iterator3 = this.dataChangedCallbacks[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {
                            var dataChangedCallback = _step3.value;
                            var callback = dataChangedCallback.callback,
                                before = dataChangedCallback.before;

                            if (before) beforeCallbacks.push(callback);else afterCallbacks.push(callback);
                        }
                    } catch (err) {
                        _didIteratorError3 = true;
                        _iteratorError3 = err;
                    } finally {
                        try {
                            if (!_iteratorNormalCompletion3 && _iterator3.return) {
                                _iterator3.return();
                            }
                        } finally {
                            if (_didIteratorError3) {
                                throw _iteratorError3;
                            }
                        }
                    }

                    var _iteratorNormalCompletion4 = true;
                    var _didIteratorError4 = false;
                    var _iteratorError4 = undefined;

                    try {
                        for (var _iterator4 = beforeCallbacks[Symbol.iterator](), _step4; !(_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done); _iteratorNormalCompletion4 = true) {
                            var callback = _step4.value;

                            callback(newData);
                        }
                    } catch (err) {
                        _didIteratorError4 = true;
                        _iteratorError4 = err;
                    } finally {
                        try {
                            if (!_iteratorNormalCompletion4 && _iterator4.return) {
                                _iterator4.return();
                            }
                        } finally {
                            if (_didIteratorError4) {
                                throw _iteratorError4;
                            }
                        }
                    }

                    this.currentData = newData;
                    var _iteratorNormalCompletion5 = true;
                    var _didIteratorError5 = false;
                    var _iteratorError5 = undefined;

                    try {
                        for (var _iterator5 = afterCallbacks[Symbol.iterator](), _step5; !(_iteratorNormalCompletion5 = (_step5 = _iterator5.next()).done); _iteratorNormalCompletion5 = true) {
                            var _callback = _step5.value;

                            _callback(this.currentData);
                        }
                    } catch (err) {
                        _didIteratorError5 = true;
                        _iteratorError5 = err;
                    } finally {
                        try {
                            if (!_iteratorNormalCompletion5 && _iterator5.return) {
                                _iterator5.return();
                            }
                        } finally {
                            if (_didIteratorError5) {
                                throw _iteratorError5;
                            }
                        }
                    }
                }
            }, {
                key: "extendData",
                value: function extendData(dataExtension) {
                    var hasChanged = false;
                    var newData = {};
                    var currentData = this.currentData;
                    for (var key in currentData) {
                        if (currentData.hasOwnProperty(key)) {
                            var currentValue = currentData[key];
                            var newValue = dataExtension[key];
                            if (key in dataExtension && currentValue !== newValue) {
                                hasChanged = true;
                                newData[key] = newValue;
                            } else {
                                newData[key] = currentValue;
                            }
                        }
                    }
                    if (hasChanged) {
                        this.setData(newData);
                    }
                    return this.currentData;
                }
                /**
                 * Returns an exiting callback register for the specified state or creates
                 * a new one
                 * @param state The state to return a callback register for
                 */

            }, {
                key: "callbacksForState",
                value: function callbacksForState(state) {
                    if (state in this.callbacks) return this.callbacks[state];
                    return this.callbacks[state] = new StateCallbackRegister(state);
                }
                /**
                 * Register a callback that is triggered when exiting a specific state
                 * @param state The state to register a exit callback for
                 * @param callback The callback to execute when exiting the state
                 */

            }, {
                key: "onExit",
                value: function onExit(state, callback) {
                    this.callbacksForState(state).exitCallbacks.push(callback);
                }
                /**
                 * Register a callback that is triggered when entering a specific state
                 * @param state The state to register an enter callback for
                 * @param callback The callback to execute when entering the state
                 */

            }, {
                key: "onEnter",
                value: function onEnter(state, callback) {
                    this.callbacksForState(state).enterCallbacks.push(callback);
                }
                /**
                 * Register a function to call when the state has been changed
                 * @param callback The callback to run
                 */

            }, {
                key: "onChange",
                value: function onChange(callback) {
                    this.changeCallbacks.push(callback);
                }
                /**
                 * Register a function to be called before the state data has been changed.
                 * This allows callback functions to modify the data before it's sent to other callbacks.
                 * @param callback The callback to run
                 */

            }, {
                key: "beforeDataChange",
                value: function beforeDataChange(callback) {
                    this.dataChangedCallbacks.push({
                        callback: callback,
                        before: true
                    });
                }
                /**
                 * Register a function to be called after the state data has changed
                 * @param callback The callback to run
                 */

            }, {
                key: "afterDataChange",
                value: function afterDataChange(callback) {
                    this.dataChangedCallbacks.push({
                        callback: callback,
                        before: false
                    });
                }
            }, {
                key: "changeState",
                value: function changeState(newState, newData) {
                    if (this.currentState === newState) return;
                    var previousState = this.currentState;
                    // Set our state data
                    if (newData) this.setData(newData);
                    var stateChangedEvent = {
                        oldState: previousState,
                        newState: newState,
                        newData: this.currentData
                    };
                    if (typeof this.debugCallback === 'function') this.debugCallback(stateChangedEvent, false);
                    // Trigger the state-changed event, cancel state change if cancelled
                    var _iteratorNormalCompletion6 = true;
                    var _didIteratorError6 = false;
                    var _iteratorError6 = undefined;

                    try {
                        for (var _iterator6 = this.changeCallbacks[Symbol.iterator](), _step6; !(_iteratorNormalCompletion6 = (_step6 = _iterator6.next()).done); _iteratorNormalCompletion6 = true) {
                            var callback = _step6.value;

                            if (!callback(stateChangedEvent)) return;
                        }
                        // Trigger exit callbacks
                    } catch (err) {
                        _didIteratorError6 = true;
                        _iteratorError6 = err;
                    } finally {
                        try {
                            if (!_iteratorNormalCompletion6 && _iterator6.return) {
                                _iterator6.return();
                            }
                        } finally {
                            if (_didIteratorError6) {
                                throw _iteratorError6;
                            }
                        }
                    }

                    if (this.callbacksForState(previousState).triggerExitCallbacks(previousState, newState, this.currentData) === false) {
                        // One of the exit callbacks canceled the state change
                        return;
                    }
                    // Trigger enter callbacks
                    if (this.callbacksForState(newState).triggerEnterCallbacks(previousState, newState, this.currentData) === false) {
                        // One of the enter callbacks canceled the state change
                        return;
                    }
                    if (typeof this.debugCallback === 'function') this.debugCallback(stateChangedEvent, true);
                    // All of the callbacks have been ran, change the state
                    this.currentState = newState;
                }
            }]);

            return RideStylerShowcaseState;
        }();

        state_1.RideStylerShowcaseState = RideStylerShowcaseState;
    })(state = RideStylerShowcase.state || (RideStylerShowcase.state = {}));
})(RideStylerShowcase || (RideStylerShowcase = {}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9zY3JpcHRzL1JpZGVTdHlsZXJTaG93Y2FzZS5zdGF0ZS50cyJdLCJuYW1lcyI6WyJSaWRlU3R5bGVyU2hvd2Nhc2UiLCJTdGF0ZXMiLCJzdGF0ZSIsInN0YXRlXzEiLCJTdGF0ZUNhbGxiYWNrUmVnaXN0ZXIiLCJleGl0Q2FsbGJhY2tzIiwiZW50ZXJDYWxsYmFja3MiLCJjdXJyZW50U3RhdGUiLCJuZXdTdGF0ZSIsIm5ld0RhdGEiLCJleGl0Q2FsbGJhY2siLCJvbGRTdGF0ZSIsImVudGVyQ2FsbGJhY2siLCJSaWRlU3R5bGVyU2hvd2Nhc2VTdGF0ZSIsImluaXRpYWxTdGF0ZSIsImN1cnJlbnREYXRhIiwiY3VycmVudFZlaGljbGVDb25maWd1cmF0aW9uSUQiLCJ1bmRlZmluZWQiLCJjdXJyZW50VmVoaWNsZURlc2NyaXB0aW9uIiwidmVoaWNsZUhhc0FuZ2xlZEltYWdlIiwidmVoaWNsZUhhc1NpZGVJbWFnZSIsImN1cnJlbnRWZWhpY2xlVGlyZU9wdGlvbkRlc2NyaXB0aW9uIiwiY3VycmVudFZlaGljbGVUaXJlT3B0aW9uSUQiLCJjdXJyZW50UGFpbnRTY2hlbWUiLCJjdXJyZW50VGlyZSIsImN1cnJlbnRXaGVlbCIsImN1cnJlbnRXaGVlbEZpdG1lbnQiLCJjdXJyZW50VGlyZU9wdGlvbiIsImN1cnJlbnRWZWhpY2xlRGVzY3JpcHRpb25Nb2RlbCIsImNhbGxiYWNrcyIsImNoYW5nZUNhbGxiYWNrcyIsImRhdGFDaGFuZ2VkQ2FsbGJhY2tzIiwiYmVmb3JlQ2FsbGJhY2tzIiwiYWZ0ZXJDYWxsYmFja3MiLCJkYXRhQ2hhbmdlZENhbGxiYWNrIiwiY2FsbGJhY2siLCJiZWZvcmUiLCJwdXNoIiwiZGF0YUV4dGVuc2lvbiIsImhhc0NoYW5nZWQiLCJrZXkiLCJoYXNPd25Qcm9wZXJ0eSIsImN1cnJlbnRWYWx1ZSIsIm5ld1ZhbHVlIiwic2V0RGF0YSIsImNhbGxiYWNrc0ZvclN0YXRlIiwicHJldmlvdXNTdGF0ZSIsInN0YXRlQ2hhbmdlZEV2ZW50IiwiZGVidWdDYWxsYmFjayIsInRyaWdnZXJFeGl0Q2FsbGJhY2tzIiwidHJpZ2dlckVudGVyQ2FsbGJhY2tzIl0sIm1hcHBpbmdzIjoiOzs7O0FBQUEsSUFBVUEsa0JBQVY7QUFBQSxDQUFBLFVBQVVBLGtCQUFWLEVBQTRCO0FBQ3hCLFFBQVlDLGVBQVo7QUFBQSxLQUFBLFVBQVlBLE1BQVosRUFBa0I7QUFDZEEsZUFBQUEsT0FBQSxlQUFBLElBQUEsQ0FBQSxJQUFBLGVBQUE7QUFDQUEsZUFBQUEsT0FBQSxXQUFBLElBQUEsQ0FBQSxJQUFBLFdBQUE7QUFDSCxLQUhELEVBQVlBLFNBQUFELG1CQUFBQyxNQUFBLEtBQUFELG1CQUFBQyxNQUFBLEdBQU0sRUFBTixDQUFaO0FBSUgsQ0FMRCxFQUFVRCx1QkFBQUEscUJBQWtCLEVBQWxCLENBQVY7QUFNQSxDQUFBLFVBQVVBLGtCQUFWLEVBQTRCO0FBQUMsUUFBQUUsS0FBQTtBQUFBLEtBQUEsVUFBQUMsT0FBQSxFQUFLO0FBeUQ5Qjs7O0FBekQ4QixZQTREOUJDLHFCQTVEOEI7QUFpRTFCLDJDQUFZRixLQUFaLEVBQXdCO0FBQUE7O0FBQ3BCLHFCQUFLQSxLQUFMLEdBQWFBLEtBQWI7QUFDQSxxQkFBS0csYUFBTCxHQUFxQixFQUFyQjtBQUNBLHFCQUFLQyxjQUFMLEdBQXNCLEVBQXRCO0FBQ0g7QUFFRDs7Ozs7O0FBdkUwQjtBQUFBO0FBQUEscURBMkVMQyxZQTNFSyxFQTJFZ0JDLFFBM0VoQixFQTJFaUNDLE9BM0VqQyxFQTJFa0Q7QUFBQTtBQUFBO0FBQUE7O0FBQUE7QUFDeEUsNkNBQXlCLEtBQUtKLGFBQTlCLDhIQUE2QztBQUFBLGdDQUFwQ0ssWUFBb0M7O0FBQ3pDLGdDQUFJQSxhQUFhSCxZQUFiLEVBQTJCQyxRQUEzQixFQUFxQ0MsT0FBckMsTUFBa0QsS0FBdEQsRUFDSSxPQUFPLEtBQVA7QUFDUDtBQUp1RTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOztB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QUFBOztBQXNCM0Msd0JBQUksS0FBS0YsaUJBQUwsQ0FBdUJDLGFBQXZCLEVBQXNDRyxvQkFBdEMsQ0FBMkRILGFBQTNELEVBQTBFdEMsUUFBMUUsRUFBb0YsS0FBS08sV0FBekYsTUFBMEcsS0FBOUcsRUFBcUg7QUFDakg7QUFDQTtBQUNIO0FBRUQ7QUFDQSx3QkFBSSxLQUFLOEIsaUJBQUwsQ0FBdUJyQyxRQUF2QixFQUFpQzBDLHFCQUFqQyxDQUF1REosYUFBdkQsRUFBc0V0QyxRQUF0RSxFQUFnRixLQUFLTyxXQUFyRixNQUFzRyxLQUExRyxFQUFpSDtBQUM3RztBQUNBO0FBQ0g7QUFFRCx3QkFBSSxPQUFPLEtBQUtpQyxhQUFaLEtBQThCLFVBQWxDLEVBQThDLEtBQUtBLGFBQUwsQ0FBbUJELGlCQUFuQixFQUFzQyxJQUF0QztBQUU5QztBQUNBLHlCQUFLeEMsWUFBTCxHQUFvQkMsUUFBcEI7QUFDSDtBQWpUeUI7O0FBQUE7QUFBQTs7QUF5SGpCTCxnQkFBQVUsdUJBQUEsR0FBdUJBLHVCQUF2QjtBQTRMaEIsS0FyVDRCLEVBQUFYLFFBQUFGLG1CQUFBRSxLQUFBLEtBQUFGLG1CQUFBRSxLQUFBLEdBQUssRUFBTCxDQUFBO0FBcVQ1QixDQXJURCxFQUFVRix1QkFBQUEscUJBQWtCLEVBQWxCLENBQVYiLCJmaWxlIjoic2NyaXB0cy9SaWRlU3R5bGVyU2hvd2Nhc2Uuc3RhdGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyJuYW1lc3BhY2UgUmlkZVN0eWxlclNob3djYXNlIHtcclxuICAgIGV4cG9ydCBlbnVtIFN0YXRlcyB7XHJcbiAgICAgICAgQ2hvb3NlVmVoaWNsZSA9IDAsXHJcbiAgICAgICAgVmlzdWFsaXplID0gMVxyXG4gICAgfVxyXG59XHJcbm5hbWVzcGFjZSBSaWRlU3R5bGVyU2hvd2Nhc2Uuc3RhdGUge1xyXG4gICAgZXhwb3J0IGludGVyZmFjZSBTdGF0ZUNoYW5nZWRFdmVudCB7XHJcbiAgICAgICAgb2xkU3RhdGU6IFN0YXRlcztcclxuICAgICAgICBuZXdTdGF0ZTogU3RhdGVzO1xyXG4gICAgICAgIG5ld0RhdGE6IFN0YXRlRGF0YVxyXG4gICAgfVxyXG5cclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgU3RhdGVDaGFuZ2VkQ2FsbGJhY2sge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBwYXJhbSBldmVudCAgVGhlIHN0YXRlIGNoYW5nZWQgZXZlbnRcclxuICAgICAgICAgKiBAcmV0dXJuICAgICAgIElmIHJldHVybmluZyBmYWxzZSwgY2FuY2VsIHRoZSBzdGF0ZSBjaGFuZ2VcclxuICAgICAgICAgKi9cclxuICAgICAgICAoZXZlbnQ6U3RhdGVDaGFuZ2VkRXZlbnQpOiBib29sZWFuO1xyXG4gICAgfVxyXG5cclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgU3RhdGVDaGFuZ2VkQ2FsbGJhY2sge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBwYXJhbSBldmVudCAgVGhlIHN0YXRlIGNoYW5nZWQgZXZlbnRcclxuICAgICAgICAgKiBAcmV0dXJuICAgICAgIElmIHJldHVybmluZyBmYWxzZSwgY2FuY2VsIHRoZSBzdGF0ZSBjaGFuZ2VcclxuICAgICAgICAgKi9cclxuICAgICAgICAoZXZlbnQ6U3RhdGVDaGFuZ2VkRXZlbnQpOiBib29sZWFuO1xyXG4gICAgfVxyXG5cclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgRGVidWdTdGF0ZUNhbGxiYWNrIHtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAcGFyYW0gZXZlbnQgICAgVGhlIHN0YXRlIGNoYW5nZWQgZXZlbnRcclxuICAgICAgICAgKiBAcGFyYW0gZmluaXNoZWQgSWYgZmFsc2UsIHRoZSBzdGF0ZSBjaGFuZ2UgaXMgYmVnaW5uaW5nLCBvdGhlcndpc2UgdGhlIHN0YXRlIGNoYW5nZVxyXG4gICAgICAgICAqICAgICAgICAgICAgICAgICBoYXMgZmluaXNoZWRcclxuICAgICAgICAgKi9cclxuICAgICAgICAoZXZlbnQ6U3RhdGVDaGFuZ2VkRXZlbnQsIGZpbmlzaGVkOmJvb2xlYW4pOiB2b2lkO1xyXG4gICAgfVxyXG5cclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgU3RhdGVFeGl0Q2FsbGJhY2sge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBwYXJhbSBjdXJyZW50U3RhdGUgIFRoZSBzdGF0ZSBiZWluZyBjaGFuZ2VkIGZyb21cclxuICAgICAgICAgKiBAcGFyYW0gbmV3U3RhdGUgICAgICBUaGUgc3RhdGUgYmVpbmcgY2hhbmdlZCB0b1xyXG4gICAgICAgICAqIEByZXR1cm4gICAgICAgICAgICAgIElmIHJldHVybmluZyBmYWxzZSwgY2FuY2VsIHRoZSBzdGF0ZSBjaGFuZ2VcclxuICAgICAgICAgKi9cclxuICAgICAgICAoY3VycmVudFN0YXRlOlN0YXRlcywgbmV3U3RhdGU6U3RhdGVzLCBuZXdEYXRhOlN0YXRlRGF0YSk6IGJvb2xlYW47XHJcbiAgICB9XHJcblxyXG4gICAgZXhwb3J0IGludGVyZmFjZSBTdGF0ZUVudGVyQ2FsbGJhY2sge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBwYXJhbSBvbGRTdGF0ZSAgICAgIFRoZSBzdGF0ZSBiZWluZyBjaGFuZ2VkIGZyb21cclxuICAgICAgICAgKiBAcGFyYW0gY3VycmVudFN0YXRlICBUaGUgc3RhdGUgYmVpbmcgY2hhbmdlZCB0b1xyXG4gICAgICAgICAqIEByZXR1cm4gICAgICAgICAgICAgIElmIHJldHVybmluZyBmYWxzZSwgY2FuY2VsIHRoZSBzdGF0ZSBjaGFuZ2VcclxuICAgICAgICAgKi9cclxuICAgICAgICAob2xkU3RhdGU6U3RhdGVzLCBjdXJyZW50U3RhdGU6U3RhdGVzLCBuZXdEYXRhOlN0YXRlRGF0YSk6IGJvb2xlYW47XHJcbiAgICB9XHJcblxyXG4gICAgZXhwb3J0IGludGVyZmFjZSBTdGF0ZURhdGFDaGFuZ2VkQ2FsbGJhY2sge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBwYXJhbSBuZXdEYXRhIFRoZSBuZXcgc3RhdGUgZGF0YVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIChuZXdEYXRhOlN0YXRlRGF0YSk6IHZvaWQ7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBIHJlZ2lzdGVyIGhvbGRpbmcgdGhlIGV4aXQvZW50ZXIgY2FsbGJhY2tzIGZvciBhIHNwZWNpZmljIHN0YXRlXHJcbiAgICAgKi9cclxuICAgIGNsYXNzIFN0YXRlQ2FsbGJhY2tSZWdpc3RlciB7XHJcbiAgICAgICAgc3RhdGU6U3RhdGVzO1xyXG4gICAgICAgIGV4aXRDYWxsYmFja3M6IFN0YXRlRXhpdENhbGxiYWNrW107XHJcbiAgICAgICAgZW50ZXJDYWxsYmFja3M6IFN0YXRlRW50ZXJDYWxsYmFja1tdO1xyXG5cclxuICAgICAgICBjb25zdHJ1Y3RvcihzdGF0ZTpTdGF0ZXMpIHtcclxuICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IHN0YXRlO1xyXG4gICAgICAgICAgICB0aGlzLmV4aXRDYWxsYmFja3MgPSBbXTtcclxuICAgICAgICAgICAgdGhpcy5lbnRlckNhbGxiYWNrcyA9IFtdO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVHJpZ2dlciBhbGwgb2YgdGhlIGV4aXQgY2FsbGJhY2tzIGZvciB0aGlzIHN0YXRlLiBJZiBhIGNhbGxiYWNrIHJldHVybnMgZmFsc2UsXHJcbiAgICAgICAgICogc2tpcCB0cmlnZ2VyaW5nIHRoZSByZW1haW5pbmcgY2FsbGJhY2tzIGFuZCByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdHJpZ2dlckV4aXRDYWxsYmFja3MoY3VycmVudFN0YXRlOlN0YXRlcywgbmV3U3RhdGU6U3RhdGVzLCBuZXdEYXRhOlN0YXRlRGF0YSkgOiBib29sZWFuIHtcclxuICAgICAgICAgICAgZm9yIChsZXQgZXhpdENhbGxiYWNrIG9mIHRoaXMuZXhpdENhbGxiYWNrcykge1xyXG4gICAgICAgICAgICAgICAgaWYgKGV4aXRDYWxsYmFjayhjdXJyZW50U3RhdGUsIG5ld1N0YXRlLCBuZXdEYXRhKSA9PT0gZmFsc2UpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVHJpZ2dlciBhbGwgb2YgdGhlIGVudGVyIGNhbGxiYWNrcyBmb3IgdGhpcyBzdGF0ZS4gSWYgYSBjYWxsYmFjayByZXR1cm5zIGZhbHNlLFxyXG4gICAgICAgICAqIHNraXAgdHJpZ2dlcmluZyB0aGUgcmVtYWluaW5nIGNhbGxiYWNrcyBhbmQgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRyaWdnZXJFbnRlckNhbGxiYWNrcyhvbGRTdGF0ZTpTdGF0ZXMsIGN1cnJlbnRTdGF0ZTpTdGF0ZXMsIG5ld0RhdGE6U3RhdGVEYXRhKSA6IGJvb2xlYW4ge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBlbnRlckNhbGxiYWNrIG9mIHRoaXMuZW50ZXJDYWxsYmFja3MpIHtcclxuICAgICAgICAgICAgICAgIGlmIChlbnRlckNhbGxiYWNrKG9sZFN0YXRlLCBjdXJyZW50U3RhdGUsIG5ld0RhdGEpID09PSBmYWxzZSlcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIFN0YXRlRGF0YSB7XHJcbiAgICAgICAgY3VycmVudFZlaGljbGVDb25maWd1cmF0aW9uSUQ6IHN0cmluZztcclxuICAgICAgICBjdXJyZW50VmVoaWNsZURlc2NyaXB0aW9uOiBzdHJpbmc7XHJcbiAgICAgICAgY3VycmVudFZlaGljbGVEZXNjcmlwdGlvbk1vZGVsOiByaWRlc3R5bGVyLkRlc2NyaXB0aW9ucy5WZWhpY2xlRGVzY3JpcHRpb25Nb2RlbDtcclxuXHJcbiAgICAgICAgY3VycmVudFZlaGljbGVUaXJlT3B0aW9uSUQ6IHN0cmluZztcclxuICAgICAgICBjdXJyZW50VmVoaWNsZVRpcmVPcHRpb25EZXNjcmlwdGlvbjogc3RyaW5nO1xyXG5cclxuICAgICAgICB2ZWhpY2xlSGFzU2lkZUltYWdlOiBib29sZWFuO1xyXG4gICAgICAgIHZlaGljbGVIYXNBbmdsZWRJbWFnZTogYm9vbGVhbjtcclxuXHJcbiAgICAgICAgY3VycmVudFBhaW50U2NoZW1lOiByaWRlc3R5bGVyLkRlc2NyaXB0aW9ucy5WZWhpY2xlUGFpbnRTY2hlbWVEZXNjcmlwdGlvbk1vZGVsO1xyXG4gICAgICAgIGN1cnJlbnRXaGVlbDogcmlkZXN0eWxlci5EZXNjcmlwdGlvbnMuV2hlZWxNb2RlbERlc2NyaXB0aW9uTW9kZWw7XHJcbiAgICAgICAgY3VycmVudFdoZWVsRml0bWVudDogcmlkZXN0eWxlci5EZXNjcmlwdGlvbnMuV2hlZWxGaXRtZW50RGVzY3JpcHRpb25Nb2RlbDtcclxuICAgICAgICBjdXJyZW50VGlyZTogcmlkZXN0eWxlci5EZXNjcmlwdGlvbnMuVGlyZU1vZGVsRGVzY3JpcHRpb25Nb2RlbDtcclxuICAgICAgICBjdXJyZW50VGlyZU9wdGlvbjogcmlkZXN0eWxlci5EZXNjcmlwdGlvbnMuVmVoaWNsZVRpcmVPcHRpb25EZXNjcmlwdGlvbk1vZGVsO1xyXG4gICAgfVxyXG5cclxuICAgIGV4cG9ydCB0eXBlIFBhcnRpYWxTdGF0ZURhdGEgPSB7XHJcbiAgICAgICAgW1AgaW4ga2V5b2YgU3RhdGVEYXRhXT86IFN0YXRlRGF0YVtQXTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgZXhwb3J0IGNsYXNzIFJpZGVTdHlsZXJTaG93Y2FzZVN0YXRlIHtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBUaGUgY3VycmVudCBzdGF0ZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBjdXJyZW50U3RhdGU6U3RhdGVzO1xyXG5cclxuICAgICAgICBjb25zdHJ1Y3RvciAoaW5pdGlhbFN0YXRlOlN0YXRlcykge1xyXG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRTdGF0ZSA9IGluaXRpYWxTdGF0ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgY3VycmVudERhdGE6U3RhdGVEYXRhID0ge1xyXG4gICAgICAgICAgICBjdXJyZW50VmVoaWNsZUNvbmZpZ3VyYXRpb25JRDogdW5kZWZpbmVkLFxyXG4gICAgICAgICAgICBjdXJyZW50VmVoaWNsZURlc2NyaXB0aW9uOiB1bmRlZmluZWQsXHJcbiAgICAgICAgICAgIHZlaGljbGVIYXNBbmdsZWRJbWFnZTogdW5kZWZpbmVkLFxyXG4gICAgICAgICAgICB2ZWhpY2xlSGFzU2lkZUltYWdlOiB1bmRlZmluZWQsXHJcbiAgICAgICAgICAgIGN1cnJlbnRWZWhpY2xlVGlyZU9wdGlvbkRlc2NyaXB0aW9uOiB1bmRlZmluZWQsXHJcbiAgICAgICAgICAgIGN1cnJlbnRWZWhpY2xlVGlyZU9wdGlvbklEOiB1bmRlZmluZWQsXHJcbiAgICAgICAgICAgIGN1cnJlbnRQYWludFNjaGVtZTogdW5kZWZpbmVkLFxyXG4gICAgICAgICAgICBjdXJyZW50VGlyZTogdW5kZWZpbmVkLFxyXG4gICAgICAgICAgICBjdXJyZW50V2hlZWw6IHVuZGVmaW5lZCxcclxuICAgICAgICAgICAgY3VycmVudFdoZWVsRml0bWVudDogdW5kZWZpbmVkLFxyXG4gICAgICAgICAgICBjdXJyZW50VGlyZU9wdGlvbjogdW5kZWZpbmVkLFxyXG4gICAgICAgICAgICBjdXJyZW50VmVoaWNsZURlc2NyaXB0aW9uTW9kZWw6IHVuZGVmaW5lZFxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHB1YmxpYyBnZXREYXRhKCkgeyByZXR1cm4gdGhpcy5jdXJyZW50RGF0YTsgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc2V0RGF0YShuZXdEYXRhOlN0YXRlRGF0YSkge1xyXG4gICAgICAgICAgICBsZXQgYmVmb3JlQ2FsbGJhY2tzOlN0YXRlRGF0YUNoYW5nZWRDYWxsYmFja1tdID0gW10sXHJcbiAgICAgICAgICAgICAgICBhZnRlckNhbGxiYWNrczpTdGF0ZURhdGFDaGFuZ2VkQ2FsbGJhY2tbXSA9IFtdO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZm9yIChsZXQgZGF0YUNoYW5nZWRDYWxsYmFjayBvZiB0aGlzLmRhdGFDaGFuZ2VkQ2FsbGJhY2tzKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQge2NhbGxiYWNrLCBiZWZvcmV9ID0gZGF0YUNoYW5nZWRDYWxsYmFjaztcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoYmVmb3JlKSBiZWZvcmVDYWxsYmFja3MucHVzaChjYWxsYmFjayk7XHJcbiAgICAgICAgICAgICAgICBlbHNlIGFmdGVyQ2FsbGJhY2tzLnB1c2goY2FsbGJhY2spO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmb3IgKGxldCBjYWxsYmFjayBvZiBiZWZvcmVDYWxsYmFja3MpXHJcbiAgICAgICAgICAgICAgICBjYWxsYmFjayhuZXdEYXRhKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuY3VycmVudERhdGEgPSBuZXdEYXRhO1xyXG4gICAgICAgIFxyXG4gICAgICAgICAgICBmb3IgKGxldCBjYWxsYmFjayBvZiBhZnRlckNhbGxiYWNrcylcclxuICAgICAgICAgICAgICAgIGNhbGxiYWNrKHRoaXMuY3VycmVudERhdGEpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwdWJsaWMgZXh0ZW5kRGF0YShkYXRhRXh0ZW5zaW9uOlBhcnRpYWxTdGF0ZURhdGEpOiBTdGF0ZURhdGEge1xyXG4gICAgICAgICAgICBsZXQgaGFzQ2hhbmdlZDogYm9vbGVhbiA9IGZhbHNlO1xyXG4gICAgICAgICAgICBsZXQgbmV3RGF0YTogUGFydGlhbFN0YXRlRGF0YSA9IHt9OyBcclxuICAgICAgICAgICAgbGV0IGN1cnJlbnREYXRhOiBTdGF0ZURhdGEgPSB0aGlzLmN1cnJlbnREYXRhO1xyXG5cclxuICAgICAgICAgICAgZm9yIChsZXQga2V5IGluIGN1cnJlbnREYXRhKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoY3VycmVudERhdGEuaGFzT3duUHJvcGVydHkoa2V5KSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBjdXJyZW50VmFsdWUgPSBjdXJyZW50RGF0YVtrZXldO1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBuZXdWYWx1ZSA9IGRhdGFFeHRlbnNpb25ba2V5XTtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICBpZiAoa2V5IGluIGRhdGFFeHRlbnNpb24gJiYgY3VycmVudFZhbHVlICE9PSBuZXdWYWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBoYXNDaGFuZ2VkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3RGF0YVtrZXldID0gbmV3VmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3RGF0YVtrZXldID0gY3VycmVudFZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKGhhc0NoYW5nZWQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0RGF0YShuZXdEYXRhIGFzIFN0YXRlRGF0YSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmN1cnJlbnREYXRhO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQSBkaWN0aW9uYXJ5IG9mIFN0YXRlcyB0byBTdGF0ZUNhbGxiYWNrUmVnaXN0ZXJzXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHJpdmF0ZSBjYWxsYmFja3M6IHtbc3RhdGU6IG51bWJlcl06IFN0YXRlQ2FsbGJhY2tSZWdpc3Rlcn0gPSB7fTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogU3RhdGUgY2hhbmdlZCBjYWxsYmFja3NcclxuICAgICAgICAgKi9cclxuICAgICAgICBwcml2YXRlIGNoYW5nZUNhbGxiYWNrczpTdGF0ZUNoYW5nZWRDYWxsYmFja1tdID0gW107XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIERhdGEgY2hhbmdlZCBjYWxsYmFja3NcclxuICAgICAgICAgKi9cclxuICAgICAgICBwcml2YXRlIGRhdGFDaGFuZ2VkQ2FsbGJhY2tzOntjYWxsYmFjazpTdGF0ZURhdGFDaGFuZ2VkQ2FsbGJhY2ssIGJlZm9yZTpib29sZWFufVtdID0gW107XHJcbiAgICBcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBSZXR1cm5zIGFuIGV4aXRpbmcgY2FsbGJhY2sgcmVnaXN0ZXIgZm9yIHRoZSBzcGVjaWZpZWQgc3RhdGUgb3IgY3JlYXRlc1xyXG4gICAgICAgICAqIGEgbmV3IG9uZVxyXG4gICAgICAgICAqIEBwYXJhbSBzdGF0ZSBUaGUgc3RhdGUgdG8gcmV0dXJuIGEgY2FsbGJhY2sgcmVnaXN0ZXIgZm9yXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHJpdmF0ZSBjYWxsYmFja3NGb3JTdGF0ZShzdGF0ZTogU3RhdGVzKTpTdGF0ZUNhbGxiYWNrUmVnaXN0ZXJcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmIChzdGF0ZSBpbiB0aGlzLmNhbGxiYWNrcykgcmV0dXJuIHRoaXMuY2FsbGJhY2tzW3N0YXRlXTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY2FsbGJhY2tzW3N0YXRlXSA9IG5ldyBTdGF0ZUNhbGxiYWNrUmVnaXN0ZXIoc3RhdGUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogUmVnaXN0ZXIgYSBjYWxsYmFjayB0aGF0IGlzIHRyaWdnZXJlZCB3aGVuIGV4aXRpbmcgYSBzcGVjaWZpYyBzdGF0ZVxyXG4gICAgICAgICAqIEBwYXJhbSBzdGF0ZSBUaGUgc3RhdGUgdG8gcmVnaXN0ZXIgYSBleGl0IGNhbGxiYWNrIGZvclxyXG4gICAgICAgICAqIEBwYXJhbSBjYWxsYmFjayBUaGUgY2FsbGJhY2sgdG8gZXhlY3V0ZSB3aGVuIGV4aXRpbmcgdGhlIHN0YXRlXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgb25FeGl0IChzdGF0ZTpTdGF0ZXMsIGNhbGxiYWNrOlN0YXRlRXhpdENhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2FsbGJhY2tzRm9yU3RhdGUoc3RhdGUpLmV4aXRDYWxsYmFja3MucHVzaChjYWxsYmFjayk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBSZWdpc3RlciBhIGNhbGxiYWNrIHRoYXQgaXMgdHJpZ2dlcmVkIHdoZW4gZW50ZXJpbmcgYSBzcGVjaWZpYyBzdGF0ZVxyXG4gICAgICAgICAqIEBwYXJhbSBzdGF0ZSBUaGUgc3RhdGUgdG8gcmVnaXN0ZXIgYW4gZW50ZXIgY2FsbGJhY2sgZm9yXHJcbiAgICAgICAgICogQHBhcmFtIGNhbGxiYWNrIFRoZSBjYWxsYmFjayB0byBleGVjdXRlIHdoZW4gZW50ZXJpbmcgdGhlIHN0YXRlXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgb25FbnRlcihzdGF0ZTpTdGF0ZXMsIGNhbGxiYWNrOlN0YXRlRW50ZXJDYWxsYmFjaykgIHtcclxuICAgICAgICAgICAgdGhpcy5jYWxsYmFja3NGb3JTdGF0ZShzdGF0ZSkuZW50ZXJDYWxsYmFja3MucHVzaChjYWxsYmFjayk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBSZWdpc3RlciBhIGZ1bmN0aW9uIHRvIGNhbGwgd2hlbiB0aGUgc3RhdGUgaGFzIGJlZW4gY2hhbmdlZFxyXG4gICAgICAgICAqIEBwYXJhbSBjYWxsYmFjayBUaGUgY2FsbGJhY2sgdG8gcnVuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgb25DaGFuZ2UoY2FsbGJhY2s6U3RhdGVDaGFuZ2VkQ2FsbGJhY2spIHtcclxuICAgICAgICAgICAgdGhpcy5jaGFuZ2VDYWxsYmFja3MucHVzaChjYWxsYmFjayk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBSZWdpc3RlciBhIGZ1bmN0aW9uIHRvIGJlIGNhbGxlZCBiZWZvcmUgdGhlIHN0YXRlIGRhdGEgaGFzIGJlZW4gY2hhbmdlZC5cclxuICAgICAgICAgKiBUaGlzIGFsbG93cyBjYWxsYmFjayBmdW5jdGlvbnMgdG8gbW9kaWZ5IHRoZSBkYXRhIGJlZm9yZSBpdCdzIHNlbnQgdG8gb3RoZXIgY2FsbGJhY2tzLlxyXG4gICAgICAgICAqIEBwYXJhbSBjYWxsYmFjayBUaGUgY2FsbGJhY2sgdG8gcnVuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgYmVmb3JlRGF0YUNoYW5nZShjYWxsYmFjazpTdGF0ZURhdGFDaGFuZ2VkQ2FsbGJhY2spIHtcclxuICAgICAgICAgICAgdGhpcy5kYXRhQ2hhbmdlZENhbGxiYWNrcy5wdXNoKHtcclxuICAgICAgICAgICAgICAgIGNhbGxiYWNrOiBjYWxsYmFjayxcclxuICAgICAgICAgICAgICAgIGJlZm9yZTogdHJ1ZVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFJlZ2lzdGVyIGEgZnVuY3Rpb24gdG8gYmUgY2FsbGVkIGFmdGVyIHRoZSBzdGF0ZSBkYXRhIGhhcyBjaGFuZ2VkXHJcbiAgICAgICAgICogQHBhcmFtIGNhbGxiYWNrIFRoZSBjYWxsYmFjayB0byBydW5cclxuICAgICAgICAgKi9cclxuICAgICAgICBhZnRlckRhdGFDaGFuZ2UoY2FsbGJhY2s6U3RhdGVEYXRhQ2hhbmdlZENhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGF0YUNoYW5nZWRDYWxsYmFja3MucHVzaCh7XHJcbiAgICAgICAgICAgICAgICBjYWxsYmFjazogY2FsbGJhY2ssXHJcbiAgICAgICAgICAgICAgICBiZWZvcmU6IGZhbHNlXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY2hhbmdlU3RhdGUobmV3U3RhdGU6U3RhdGVzLCBuZXdEYXRhPzpTdGF0ZURhdGEpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuY3VycmVudFN0YXRlID09PSBuZXdTdGF0ZSkgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgbGV0IHByZXZpb3VzU3RhdGUgPSB0aGlzLmN1cnJlbnRTdGF0ZTtcclxuXHJcbiAgICAgICAgICAgIC8vIFNldCBvdXIgc3RhdGUgZGF0YVxyXG4gICAgICAgICAgICBpZiAobmV3RGF0YSkgdGhpcy5zZXREYXRhKG5ld0RhdGEpO1xyXG5cclxuICAgICAgICAgICAgdmFyIHN0YXRlQ2hhbmdlZEV2ZW50OlN0YXRlQ2hhbmdlZEV2ZW50ID0ge1xyXG4gICAgICAgICAgICAgICAgb2xkU3RhdGU6IHByZXZpb3VzU3RhdGUsXHJcbiAgICAgICAgICAgICAgICBuZXdTdGF0ZTogbmV3U3RhdGUsXHJcbiAgICAgICAgICAgICAgICBuZXdEYXRhOiB0aGlzLmN1cnJlbnREYXRhXHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBpZiAodHlwZW9mIHRoaXMuZGVidWdDYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJykgdGhpcy5kZWJ1Z0NhbGxiYWNrKHN0YXRlQ2hhbmdlZEV2ZW50LCBmYWxzZSk7XHJcblxyXG4gICAgICAgICAgICAvLyBUcmlnZ2VyIHRoZSBzdGF0ZS1jaGFuZ2VkIGV2ZW50LCBjYW5jZWwgc3RhdGUgY2hhbmdlIGlmIGNhbmNlbGxlZFxyXG4gICAgICAgICAgICBmb3IgKGxldCBjYWxsYmFjayBvZiB0aGlzLmNoYW5nZUNhbGxiYWNrcykge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFjYWxsYmFjayhzdGF0ZUNoYW5nZWRFdmVudCkpIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gVHJpZ2dlciBleGl0IGNhbGxiYWNrc1xyXG4gICAgICAgICAgICBpZiAodGhpcy5jYWxsYmFja3NGb3JTdGF0ZShwcmV2aW91c1N0YXRlKS50cmlnZ2VyRXhpdENhbGxiYWNrcyhwcmV2aW91c1N0YXRlLCBuZXdTdGF0ZSwgdGhpcy5jdXJyZW50RGF0YSkgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBPbmUgb2YgdGhlIGV4aXQgY2FsbGJhY2tzIGNhbmNlbGVkIHRoZSBzdGF0ZSBjaGFuZ2VcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gVHJpZ2dlciBlbnRlciBjYWxsYmFja3NcclxuICAgICAgICAgICAgaWYgKHRoaXMuY2FsbGJhY2tzRm9yU3RhdGUobmV3U3RhdGUpLnRyaWdnZXJFbnRlckNhbGxiYWNrcyhwcmV2aW91c1N0YXRlLCBuZXdTdGF0ZSwgdGhpcy5jdXJyZW50RGF0YSkgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBPbmUgb2YgdGhlIGVudGVyIGNhbGxiYWNrcyBjYW5jZWxlZCB0aGUgc3RhdGUgY2hhbmdlXHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgdGhpcy5kZWJ1Z0NhbGxiYWNrID09PSAnZnVuY3Rpb24nKSB0aGlzLmRlYnVnQ2FsbGJhY2soc3RhdGVDaGFuZ2VkRXZlbnQsIHRydWUpO1xyXG5cclxuICAgICAgICAgICAgLy8gQWxsIG9mIHRoZSBjYWxsYmFja3MgaGF2ZSBiZWVuIHJhbiwgY2hhbmdlIHRoZSBzdGF0ZVxyXG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRTdGF0ZSA9IG5ld1N0YXRlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZGVidWdDYWxsYmFjazogRGVidWdTdGF0ZUNhbGxiYWNrO1xyXG4gICAgfVxyXG59Il19

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var RideStylerShowcase;
(function (RideStylerShowcase) {
    var defaultLanguageFormatProvider = {
        currency: function currency(number, symbol) {
            return symbol + (+number.toFixed(2)).toLocaleString();
        }
    };
    /**
     * A list of acceptable languages
     */
    var LanguageKeys = void 0;
    (function (LanguageKeys) {
        LanguageKeys[LanguageKeys["En"] = 0] = "En";
    })(LanguageKeys = RideStylerShowcase.LanguageKeys || (RideStylerShowcase.LanguageKeys = {}));
    /**
     * An internal structure for holding language data
     */

    var LanguageRegister = function () {
        /**
         * Create a register for a language
         * @param language The language definition
         */
        function LanguageRegister(language) {
            _classCallCheck(this, LanguageRegister);

            this.language = language;
            this.format = language.format;
        }
        /**
         * Get a key from the language dictionary
         * @param key The string key
         */


        _createClass(LanguageRegister, [{
            key: "getString",
            value: function getString(key) {
                return this.language[key];
            }
        }]);

        return LanguageRegister;
    }();
    /**
     * The default language to use if one is not provided to getStrings
     */


    var defaultLanguage = void 0;
    /**
     * An internal list of all registered languages and their strings
     */
    var languageRegisters = {};
    var strings = void 0;
    (function (strings) {
        /**
         * Register a language to be used in the showcase
         * @param languageKey The key of the language you are registering
         * @param language The language provider
         */
        function registerLanguage(languageKey, language, setAsDefault) {
            // Set default format provider
            if (!language.format) language.format = defaultLanguageFormatProvider;else for (var key in defaultLanguageFormatProvider) {
                // If the defaultLanguageProvider has a format function that is missing on the language's format provider,
                // implement it in the language's format provider
                if (defaultLanguageFormatProvider.hasOwnProperty(key) && key in language.format === false) {
                    language.format[key] = defaultLanguageFormatProvider[key];
                }
            }
            var languageRegister = languageRegisters[languageKey] = new LanguageRegister(language);
            if (setAsDefault || !defaultLanguage) defaultLanguage = languageRegister;
        }
        strings.registerLanguage = registerLanguage;
        /**
         * Set a language to be used by default, when no key is passed into getStrings
         * @param languageKey The language key to use by default
         * @returns true, if the language is registered and set as default; otherwise false
         */
        function setDefaultLanguage(languageKey) {
            if (languageKey in languageRegisters) {
                defaultLanguage = languageRegisters[languageKey];
                return true;
            }
            return false;
        }
        strings.setDefaultLanguage = setDefaultLanguage;
        /**
         * Tells you whether or not a language is registered
         * @param languageKey The key for the language
         */
        function languageIsRegistered(languageKey) {
            return languageKey in languageRegisters;
        }
        strings.languageIsRegistered = languageIsRegistered;
        /**
         * Returns the specified language, or the default language if it could not be found
         * @param languageKey The key of the language to retrieve
         */
        function getLanguage(languageKey) {
            return languageKey in languageRegisters ? languageRegisters[languageKey] : defaultLanguage;
        }
        /**
         * Get a string from the registered strings
         * @param key The string key to return a string for
         * @param languageKey The language you want to use
         */
        function getString(key, languageKey) {
            var languageRegister = getLanguage(languageKey);
            var string = void 0;
            // If we don't have a language, or could not get the string from the register 
            if (!(string = languageRegister.getString(key))) return key;
            return string;
        }
        strings.getString = getString;
        function format(languageKey) {
            return getLanguage(languageKey).format;
        }
        strings.format = format;
    })(strings = RideStylerShowcase.strings || (RideStylerShowcase.strings = {}));
})(RideStylerShowcase || (RideStylerShowcase = {}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9zY3JpcHRzL1JpZGVTdHlsZXJTaG93Y2FzZS5zdHJpbmdzLnRzIl0sIm5hbWVzIjpbIlJpZGVTdHlsZXJTaG93Y2FzZSIsImRlZmF1bHRMYW5ndWFnZUZvcm1hdFByb3ZpZGVyIiwiY3VycmVuY3kiLCJudW1iZXIiLCJzeW1ib2wiLCJ0b0ZpeGVkIiwidG9Mb2NhbGVTdHJpbmciLCJMYW5ndWFnZUtleXMiLCJMYW5ndWFnZVJlZ2lzdGVyIiwibGFuZ3VhZ2UiLCJmb3JtYXQiLCJrZXkiLCJkZWZhdWx0TGFuZ3VhZ2UiLCJsYW5ndWFnZVJlZ2lzdGVycyIsInN0cmluZ3MiLCJyZWdpc3Rlckxhbmd1YWdlIiwibGFuZ3VhZ2VLZXkiLCJzZXRBc0RlZmF1bHQiLCJoYXNPd25Qcm9wZXJ0eSIsImxhbmd1YWdlUmVnaXN0ZXIiLCJzZXREZWZhdWx0TGFuZ3VhZ2UiLCJsYW5ndWFnZUlzUmVnaXN0ZXJlZCIsImdldExhbmd1YWdlIiwiZ2V0U3RyaW5nIiwic3RyaW5nIl0sIm1hcHBpbmdzIjoiOzs7O0FBQUEsSUFBVUEsa0JBQVY7QUFBQSxDQUFBLFVBQVVBLGtCQUFWLEVBQTRCO0FBeUR4QixRQUFJQyxnQ0FBK0Q7QUFDL0RDLGtCQUFVLGtCQUFDQyxNQUFELEVBQVNDLE1BQVQsRUFBbUI7QUFDekIsbUJBQU9BLFNBQVMsQ0FBQyxDQUFDRCxPQUFPRSxPQUFQLENBQWUsQ0FBZixDQUFGLEVBQXFCQyxjQUFyQixFQUFoQjtBQUNIO0FBSDhELEtBQW5FO0FBc0JBOzs7QUFHQSxRQUFZQyxxQkFBWjtBQUFBLEtBQUEsVUFBWUEsWUFBWixFQUF3QjtBQUNwQkEscUJBQUFBLGFBQUEsSUFBQSxJQUFBLENBQUEsSUFBQSxJQUFBO0FBQ0gsS0FGRCxFQUFZQSxlQUFBUCxtQkFBQU8sWUFBQSxLQUFBUCxtQkFBQU8sWUFBQSxHQUFZLEVBQVosQ0FBWjtBQUlBOzs7O0FBdEZ3QixRQXlGeEJDLGdCQXpGd0I7QUE2RnBCOzs7O0FBSUEsa0NBQVlDLFFBQVosRUFBcUM7QUFBQTs7QUFDakMsaUJBQUtBLFFBQUwsR0FBZ0JBLFFBQWhCO0FBQ0EsaUJBQUtDLE1BQUwsR0FBY0QsU0FBU0MsTUFBdkI7QUFDSDtBQUVEOzs7Ozs7QUF0R29CO0FBQUE7QUFBQSxzQ0EwR1ZDLEdBMUdVLEVBMEdJO0FBQ3BCLHVCQUFPLEtBQUtGLFFBQUwsQ0FBY0UsR0FBZCxDQUFQO0FBQ0g7QUE1R21COztBQUFBO0FBQUE7QUErR3hCOzs7OztBQUdBLFFBQUlDLHdCQUFKO0FBRUE7OztBQUdBLFFBQUlDLG9CQUE2RCxFQUFqRTtBQUVBLFFBQWlCQyxnQkFBakI7QUFBQSxLQUFBLFVBQWlCQSxPQUFqQixFQUF3QjtBQUNwQjs7Ozs7QUFLQSxpQkFBQUMsZ0JBQUEsQ0FBaUNDLFdBQWpDLEVBQTJEUCxRQUEzRCxFQUFzRlEsWUFBdEYsRUFBNEc7QUFDeEc7QUFDQSxnQkFBSSxDQUFDUixTQUFTQyxNQUFkLEVBQXNCRCxTQUFTQyxNQUFULEdBQWtCVCw2QkFBbEIsQ0FBdEIsS0FDSyxLQUFLLElBQUlVLEdBQVQsSUFBZ0JWLDZCQUFoQixFQUErQztBQUNoRDtBQUNBO0FBQ0Esb0JBQUlBLDhCQUE4QmlCLGNBQTlCLENBQTZDUCxHQUE3QyxLQUFxREEsT0FBT0YsU0FBU0MsTUFBaEIsS0FBMkIsS0FBcEYsRUFBMkY7QUFDdkZELDZCQUFTQyxNQUFULENBQWdCQyxHQUFoQixJQUF1QlYsOEJBQThCVSxHQUE5QixDQUF2QjtBQUNIO0FBQ0o7QUFFRCxnQkFBSVEsbUJBQW1CTixrQkFBa0JHLFdBQWxCLElBQWlDLElBQUlSLGdCQUFKLENBQXFCQyxRQUFyQixDQUF4RDtBQUVBLGdCQUFJUSxnQkFBZ0IsQ0FBQ0wsZUFBckIsRUFBc0NBLGtCQUFrQk8sZ0JBQWxCO0FBQ3pDO0FBZGVMLGdCQUFBQyxnQkFBQSxHQUFnQkEsZ0JBQWhCO0FBZ0JoQjs7Ozs7QUFLQSxpQkFBQUssa0JBQUEsQ0FBbUNKLFdBQW5DLEVBQTJEO0FBQ3ZELGdCQUFJQSxlQUFlSCxpQkFBbkIsRUFBc0M7QUFDbENELGtDQUFrQkMsa0JBQWtCRyxXQUFsQixDQUFsQjtBQUNBLHVCQUFPLElBQVA7QUFDSDtBQUVELG1CQUFPLEtBQVA7QUFDSDtBQVBlRixnQkFBQU0sa0JBQUEsR0FBa0JBLGtCQUFsQjtBQVNoQjs7OztBQUlBLGlCQUFBQyxvQkFBQSxDQUFxQ0wsV0FBckMsRUFBNkQ7QUFDekQsbUJBQU9BLGVBQWVILGlCQUF0QjtBQUNIO0FBRmVDLGdCQUFBTyxvQkFBQSxHQUFvQkEsb0JBQXBCO0FBSWhCOzs7O0FBSUEsaUJBQUFDLFdBQUEsQ0FBcUJOLFdBQXJCLEVBQThDO0FBQzFDLG1CQUFPQSxlQUFlSCxpQkFBZixHQUNIQSxrQkFBa0JHLFdBQWxCLENBREcsR0FFSEosZUFGSjtBQUdIO0FBRUQ7Ozs7O0FBS0EsaUJBQUFXLFNBQUEsQ0FBMEJaLEdBQTFCLEVBQTBDSyxXQUExQyxFQUFtRTtBQUMvRCxnQkFBSUcsbUJBQW9DRyxZQUFZTixXQUFaLENBQXhDO0FBQ0EsZ0JBQUlRLGVBQUo7QUFFQTtBQUNBLGdCQUFJLEVBQUVBLFNBQVNMLGlCQUFpQkksU0FBakIsQ0FBMkJaLEdBQTNCLENBQVgsQ0FBSixFQUNBLE9BQU9BLEdBQVA7QUFFQSxtQkFBT2EsTUFBUDtBQUNIO0FBVGVWLGdCQUFBUyxTQUFBLEdBQVNBLFNBQVQ7QUFXaEIsaUJBQUFiLE1BQUEsQ0FBdUJNLFdBQXZCLEVBQWdEO0FBQzVDLG1CQUFPTSxZQUFZTixXQUFaLEVBQXlCTixNQUFoQztBQUNIO0FBRmVJLGdCQUFBSixNQUFBLEdBQU1BLE1BQU47QUFHbkIsS0F6RUQsRUFBaUJJLFVBQUFkLG1CQUFBYyxPQUFBLEtBQUFkLG1CQUFBYyxPQUFBLEdBQU8sRUFBUCxDQUFqQjtBQTBFSCxDQW5NRCxFQUFVZCx1QkFBQUEscUJBQWtCLEVBQWxCLENBQVYiLCJmaWxlIjoic2NyaXB0cy9SaWRlU3R5bGVyU2hvd2Nhc2Uuc3RyaW5ncy5qcyIsInNvdXJjZXNDb250ZW50IjpbIm5hbWVzcGFjZSBSaWRlU3R5bGVyU2hvd2Nhc2Uge1xuICAgIC8qKlxuICAgICAqIEEgbGlzdCBvZiBhbGwgb2Ygb3VyIGFjY2VwdGFibGUgc3RyaW5nIGtleXNcbiAgICAgKi9cbiAgICBleHBvcnQgdHlwZSBTdHJpbmdLZXlzID0gXG4gICAgICAgIFwidmVoaWNsZS1zZWxlY3QtdmlzdWFsaXplLWludHJvXCIgfFxuICAgICAgICBcInZlaGljbGUtc2VsZWN0LXNoYXJlLWludHJvXCIgfFxuICAgICAgICBcInNlbGVjdC15b3VyLXZlaGljbGVcIiB8XG4gICAgICAgIFwidGlyZXNcIiB8XG4gICAgICAgIFwid2hlZWxzXCIgfFxuICAgICAgICBcInN1c3BlbnNpb25cIiB8XG4gICAgICAgIFwicGFpbnRcIiB8XG4gICAgICAgIFwiZnJvbnRcIiB8XG4gICAgICAgIFwicmVhclwiIHxcbiAgICAgICAgXCJ2ZWhpY2xlLWRldGFpbHNcIiB8XG4gICAgICAgIFwiY2hhbmdlLXZlaGljbGVcIiB8XG4gICAgICAgIFwid2hlZWwtZGV0YWlsc1wiIHxcbiAgICAgICAgXCJ0aXJlLWRldGFpbHNcIiB8XG4gICAgICAgICdzZWxlY3QtcGFpbnQnIHxcbiAgICAgICAgJ3NlbGVjdC13aGVlbHMnIHxcbiAgICAgICAgJ3NlbGVjdC10aXJlcycgfFxuICAgICAgICAnYWRqdXN0LXN1c3BlbnNpb24nIHxcbiAgICAgICAgJ2NoYW5nZS13aGVlbC1zaXplJyB8XG4gICAgICAgICduby1yZXN1bHRzJyB8XG4gICAgICAgICduby13aGVlbC1yZXN1bHRzJyB8IFxuICAgICAgICAnd2hlZWwtZmVhdHVyZXMtc3BlY3MnIHxcbiAgICAgICAgJ3NoYXJlLW15LXZlaGljbGUnIHxcbiAgICAgICAgJ3NoYXJlLWluc3RydWN0aW9ucycgfFxuICAgICAgICAnbm8tZGVzY3JpcHRpb24td2hlZWwnIHxcbiAgICAgICAgJ3Nob3ctc3BlY3MnIHxcbiAgICAgICAgJ2NhbGwnIHwgXG4gICAgICAgICdzaXplJyB8XG4gICAgICAgICdvZmZzZXQnIHxcbiAgICAgICAgJ2JvbHQtcGF0dGVybicgfFxuICAgICAgICAnY2VudGVyYm9yZScgfCBcbiAgICAgICAgJ3ByaWNlJyB8XG4gICAgICAgICdpdGVtLW51bWJlcicgfFxuICAgICAgICAnYnJhbmRzJyB8XG4gICAgICAgICdmaW5pc2hlcycgfCBcbiAgICAgICAgJ3NpemVzJyB8IFxuICAgICAgICAnYWxsJyB8XG4gICAgICAgICdhbGwtYnJhbmRzJyB8XG4gICAgICAgICdhbGwtZmluaXNoZXMnIHwgXG4gICAgICAgICdhbGwtc2l6ZXMnIHwgXG4gICAgICAgICdmaWx0ZXItcmVzdWx0cycgfFxuICAgICAgICAnbG9hZGluZy1lbGxpcHNpcycgfFxuICAgICAgICAnc2hvdy1jb3VudC1mb3JtYXQtd2hlZWxzJyB8XG4gICAgICAgICdzaG93LWNvdW50LWZvcm1hdC10aXJlcycgfFxuICAgICAgICAnc3BlY2lmaWNhdGlvbnMnIHwgXG4gICAgICAgICdzcGVlZC1yYXRpbmcnIHwgXG4gICAgICAgICdhbnktc3BlZWQtcmF0aW5ncycgfCBcbiAgICAgICAgJ2ZlYXR1cmVzJyB8IFxuICAgICAgICAnYW55LWZlYXR1cmVzJyB8XG4gICAgICAgICdmaW5pc2gnIHxcbiAgICAgICAgJ3N1bW1hcnknIHxcbiAgICAgICAgJ2NoZWNrLW91dC1teS12ZWhpY2xlJztcblxuICAgIGxldCBkZWZhdWx0TGFuZ3VhZ2VGb3JtYXRQcm92aWRlcjpJU3RyaW5nc0xhbmd1YWdlRm9ybWF0UHJvdmlkZXIgPSB7XG4gICAgICAgIGN1cnJlbmN5OiAobnVtYmVyLCBzeW1ib2wpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBzeW1ib2wgKyAoK251bWJlci50b0ZpeGVkKDIpKS50b0xvY2FsZVN0cmluZygpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBcbiAgICAvKipcbiAgICAgKiBEZWZpbmVzIHdoYXQgYSBzdHJpbmdzIGRpY3Rpb25hcnkgc2hvdWxkIGxvb2sgbGlrZVxuICAgICAqL1xuICAgIGV4cG9ydCB0eXBlIElTdHJpbmdzTGFuZ3VhZ2VEaWN0aW9uYXJ5ID0ge1xuICAgICAgICBbc3RyaW5nS2V5IGluIFN0cmluZ0tleXNdOnN0cmluZztcbiAgICB9XG5cbiAgICBleHBvcnQgaW50ZXJmYWNlIElTdHJpbmdzTGFuZ3VhZ2VGb3JtYXRQcm92aWRlciB7XG4gICAgICAgIGN1cnJlbmN5PzogKGFtb3VudDpudW1iZXIsIHN5bWJvbDpzdHJpbmcpID0+IHN0cmluZztcbiAgICB9XG5cblxuICAgIGV4cG9ydCBpbnRlcmZhY2UgSVN0cmluZ3NMYW5ndWFnZSBleHRlbmRzIElTdHJpbmdzTGFuZ3VhZ2VEaWN0aW9uYXJ5IHtcbiAgICAgICAgZm9ybWF0PzogSVN0cmluZ3NMYW5ndWFnZUZvcm1hdFByb3ZpZGVyO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEEgbGlzdCBvZiBhY2NlcHRhYmxlIGxhbmd1YWdlc1xuICAgICAqL1xuICAgIGV4cG9ydCBlbnVtIExhbmd1YWdlS2V5cyB7XG4gICAgICAgIEVuXG4gICAgfVxuICAgIFxuICAgIC8qKlxuICAgICAqIEFuIGludGVybmFsIHN0cnVjdHVyZSBmb3IgaG9sZGluZyBsYW5ndWFnZSBkYXRhXG4gICAgICovXG4gICAgY2xhc3MgTGFuZ3VhZ2VSZWdpc3RlciB7XG4gICAgICAgIHByaXZhdGUgcmVhZG9ubHkgbGFuZ3VhZ2U6IElTdHJpbmdzTGFuZ3VhZ2U7XG4gICAgICAgIHB1YmxpYyByZWFkb25seSBmb3JtYXQ6IElTdHJpbmdzTGFuZ3VhZ2VGb3JtYXRQcm92aWRlcjtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQ3JlYXRlIGEgcmVnaXN0ZXIgZm9yIGEgbGFuZ3VhZ2VcbiAgICAgICAgICogQHBhcmFtIGxhbmd1YWdlIFRoZSBsYW5ndWFnZSBkZWZpbml0aW9uXG4gICAgICAgICAqL1xuICAgICAgICBjb25zdHJ1Y3RvcihsYW5ndWFnZTpJU3RyaW5nc0xhbmd1YWdlKSB7XG4gICAgICAgICAgICB0aGlzLmxhbmd1YWdlID0gbGFuZ3VhZ2U7XG4gICAgICAgICAgICB0aGlzLmZvcm1hdCA9IGxhbmd1YWdlLmZvcm1hdDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBHZXQgYSBrZXkgZnJvbSB0aGUgbGFuZ3VhZ2UgZGljdGlvbmFyeVxuICAgICAgICAgKiBAcGFyYW0ga2V5IFRoZSBzdHJpbmcga2V5XG4gICAgICAgICAqL1xuICAgICAgICBnZXRTdHJpbmcoa2V5OlN0cmluZ0tleXMpOnN0cmluZyB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5sYW5ndWFnZVtrZXldO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIGRlZmF1bHQgbGFuZ3VhZ2UgdG8gdXNlIGlmIG9uZSBpcyBub3QgcHJvdmlkZWQgdG8gZ2V0U3RyaW5nc1xuICAgICAqL1xuICAgIGxldCBkZWZhdWx0TGFuZ3VhZ2U6TGFuZ3VhZ2VSZWdpc3RlcjtcblxuICAgIC8qKlxuICAgICAqIEFuIGludGVybmFsIGxpc3Qgb2YgYWxsIHJlZ2lzdGVyZWQgbGFuZ3VhZ2VzIGFuZCB0aGVpciBzdHJpbmdzXG4gICAgICovXG4gICAgbGV0IGxhbmd1YWdlUmVnaXN0ZXJzOiB7W2xhbmd1YWdlS2V5Om51bWJlcl06TGFuZ3VhZ2VSZWdpc3Rlcn0gPSB7fVxuXG4gICAgZXhwb3J0IG5hbWVzcGFjZSBzdHJpbmdzIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJlZ2lzdGVyIGEgbGFuZ3VhZ2UgdG8gYmUgdXNlZCBpbiB0aGUgc2hvd2Nhc2VcbiAgICAgICAgICogQHBhcmFtIGxhbmd1YWdlS2V5IFRoZSBrZXkgb2YgdGhlIGxhbmd1YWdlIHlvdSBhcmUgcmVnaXN0ZXJpbmdcbiAgICAgICAgICogQHBhcmFtIGxhbmd1YWdlIFRoZSBsYW5ndWFnZSBwcm92aWRlclxuICAgICAgICAgKi9cbiAgICAgICAgZXhwb3J0IGZ1bmN0aW9uIHJlZ2lzdGVyTGFuZ3VhZ2UobGFuZ3VhZ2VLZXk6TGFuZ3VhZ2VLZXlzLCBsYW5ndWFnZTpJU3RyaW5nc0xhbmd1YWdlLCBzZXRBc0RlZmF1bHQ/OiBib29sZWFuKSB7XG4gICAgICAgICAgICAvLyBTZXQgZGVmYXVsdCBmb3JtYXQgcHJvdmlkZXJcbiAgICAgICAgICAgIGlmICghbGFuZ3VhZ2UuZm9ybWF0KSBsYW5ndWFnZS5mb3JtYXQgPSBkZWZhdWx0TGFuZ3VhZ2VGb3JtYXRQcm92aWRlcjtcbiAgICAgICAgICAgIGVsc2UgZm9yIChsZXQga2V5IGluIGRlZmF1bHRMYW5ndWFnZUZvcm1hdFByb3ZpZGVyKSB7XG4gICAgICAgICAgICAgICAgLy8gSWYgdGhlIGRlZmF1bHRMYW5ndWFnZVByb3ZpZGVyIGhhcyBhIGZvcm1hdCBmdW5jdGlvbiB0aGF0IGlzIG1pc3Npbmcgb24gdGhlIGxhbmd1YWdlJ3MgZm9ybWF0IHByb3ZpZGVyLFxuICAgICAgICAgICAgICAgIC8vIGltcGxlbWVudCBpdCBpbiB0aGUgbGFuZ3VhZ2UncyBmb3JtYXQgcHJvdmlkZXJcbiAgICAgICAgICAgICAgICBpZiAoZGVmYXVsdExhbmd1YWdlRm9ybWF0UHJvdmlkZXIuaGFzT3duUHJvcGVydHkoa2V5KSAmJiBrZXkgaW4gbGFuZ3VhZ2UuZm9ybWF0ID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgICAgICBsYW5ndWFnZS5mb3JtYXRba2V5XSA9IGRlZmF1bHRMYW5ndWFnZUZvcm1hdFByb3ZpZGVyW2tleV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBsZXQgbGFuZ3VhZ2VSZWdpc3RlciA9IGxhbmd1YWdlUmVnaXN0ZXJzW2xhbmd1YWdlS2V5XSA9IG5ldyBMYW5ndWFnZVJlZ2lzdGVyKGxhbmd1YWdlKTtcblxuICAgICAgICAgICAgaWYgKHNldEFzRGVmYXVsdCB8fCAhZGVmYXVsdExhbmd1YWdlKSBkZWZhdWx0TGFuZ3VhZ2UgPSBsYW5ndWFnZVJlZ2lzdGVyO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNldCBhIGxhbmd1YWdlIHRvIGJlIHVzZWQgYnkgZGVmYXVsdCwgd2hlbiBubyBrZXkgaXMgcGFzc2VkIGludG8gZ2V0U3RyaW5nc1xuICAgICAgICAgKiBAcGFyYW0gbGFuZ3VhZ2VLZXkgVGhlIGxhbmd1YWdlIGtleSB0byB1c2UgYnkgZGVmYXVsdFxuICAgICAgICAgKiBAcmV0dXJucyB0cnVlLCBpZiB0aGUgbGFuZ3VhZ2UgaXMgcmVnaXN0ZXJlZCBhbmQgc2V0IGFzIGRlZmF1bHQ7IG90aGVyd2lzZSBmYWxzZVxuICAgICAgICAgKi9cbiAgICAgICAgZXhwb3J0IGZ1bmN0aW9uIHNldERlZmF1bHRMYW5ndWFnZShsYW5ndWFnZUtleTpMYW5ndWFnZUtleXMpOmJvb2xlYW4ge1xuICAgICAgICAgICAgaWYgKGxhbmd1YWdlS2V5IGluIGxhbmd1YWdlUmVnaXN0ZXJzKSB7XG4gICAgICAgICAgICAgICAgZGVmYXVsdExhbmd1YWdlID0gbGFuZ3VhZ2VSZWdpc3RlcnNbbGFuZ3VhZ2VLZXldO1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogVGVsbHMgeW91IHdoZXRoZXIgb3Igbm90IGEgbGFuZ3VhZ2UgaXMgcmVnaXN0ZXJlZFxuICAgICAgICAgKiBAcGFyYW0gbGFuZ3VhZ2VLZXkgVGhlIGtleSBmb3IgdGhlIGxhbmd1YWdlXG4gICAgICAgICAqL1xuICAgICAgICBleHBvcnQgZnVuY3Rpb24gbGFuZ3VhZ2VJc1JlZ2lzdGVyZWQobGFuZ3VhZ2VLZXk6TGFuZ3VhZ2VLZXlzKTpib29sZWFuIHtcbiAgICAgICAgICAgIHJldHVybiBsYW5ndWFnZUtleSBpbiBsYW5ndWFnZVJlZ2lzdGVycztcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSZXR1cm5zIHRoZSBzcGVjaWZpZWQgbGFuZ3VhZ2UsIG9yIHRoZSBkZWZhdWx0IGxhbmd1YWdlIGlmIGl0IGNvdWxkIG5vdCBiZSBmb3VuZFxuICAgICAgICAgKiBAcGFyYW0gbGFuZ3VhZ2VLZXkgVGhlIGtleSBvZiB0aGUgbGFuZ3VhZ2UgdG8gcmV0cmlldmVcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIGdldExhbmd1YWdlKGxhbmd1YWdlS2V5PzpMYW5ndWFnZUtleXMpOkxhbmd1YWdlUmVnaXN0ZXIge1xuICAgICAgICAgICAgcmV0dXJuIGxhbmd1YWdlS2V5IGluIGxhbmd1YWdlUmVnaXN0ZXJzID9cbiAgICAgICAgICAgICAgICBsYW5ndWFnZVJlZ2lzdGVyc1tsYW5ndWFnZUtleV0gOlxuICAgICAgICAgICAgICAgIGRlZmF1bHRMYW5ndWFnZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBHZXQgYSBzdHJpbmcgZnJvbSB0aGUgcmVnaXN0ZXJlZCBzdHJpbmdzXG4gICAgICAgICAqIEBwYXJhbSBrZXkgVGhlIHN0cmluZyBrZXkgdG8gcmV0dXJuIGEgc3RyaW5nIGZvclxuICAgICAgICAgKiBAcGFyYW0gbGFuZ3VhZ2VLZXkgVGhlIGxhbmd1YWdlIHlvdSB3YW50IHRvIHVzZVxuICAgICAgICAgKi9cbiAgICAgICAgZXhwb3J0IGZ1bmN0aW9uIGdldFN0cmluZyhrZXk6U3RyaW5nS2V5cywgbGFuZ3VhZ2VLZXk/Okxhbmd1YWdlS2V5cyk6c3RyaW5nIHtcbiAgICAgICAgICAgIGxldCBsYW5ndWFnZVJlZ2lzdGVyOkxhbmd1YWdlUmVnaXN0ZXIgPSBnZXRMYW5ndWFnZShsYW5ndWFnZUtleSk7XG4gICAgICAgICAgICBsZXQgc3RyaW5nOnN0cmluZztcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gSWYgd2UgZG9uJ3QgaGF2ZSBhIGxhbmd1YWdlLCBvciBjb3VsZCBub3QgZ2V0IHRoZSBzdHJpbmcgZnJvbSB0aGUgcmVnaXN0ZXIgXG4gICAgICAgICAgICBpZiAoIShzdHJpbmcgPSBsYW5ndWFnZVJlZ2lzdGVyLmdldFN0cmluZyhrZXkpKSlcbiAgICAgICAgICAgIHJldHVybiBrZXk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHJldHVybiBzdHJpbmc7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGV4cG9ydCBmdW5jdGlvbiBmb3JtYXQobGFuZ3VhZ2VLZXk/Okxhbmd1YWdlS2V5cyk6SVN0cmluZ3NMYW5ndWFnZUZvcm1hdFByb3ZpZGVyIHtcbiAgICAgICAgICAgIHJldHVybiBnZXRMYW5ndWFnZShsYW5ndWFnZUtleSkuZm9ybWF0O1xuICAgICAgICB9XG4gICAgfVxufSJdfQ==

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var RideStylerShowcase;
(function (RideStylerShowcase) {
    var styles;
    (function (styles) {
        var widthBreakpoints = [['phone-portrait', 0], ['phone-landscape', 420], ['tablet', 768], ['phone-landscape', 812], ['tablet', 824], ['desktop', 992], ['desktop-xl', 1200], ['tv', 1600]];

        var StyleManager = function () {
            function StyleManager(element) {
                _classCallCheck(this, StyleManager);

                this.element = element;
                this.initialized = ridestyler.promise();
                this.initializeBreakpoints();
                this.watchSize();
                this.initializeCSS();
                this.resolveOnDOMLoad();
                this.initializeStyleClasses();
            }

            _createClass(StyleManager, [{
                key: 'resolveOnDOMLoad',
                value: function resolveOnDOMLoad() {
                    var _this = this;

                    if (document.readyState === 'complete') {
                        // The DOM is already loaded
                        this.initialized.resolve();
                        return;
                    }
                    // Wait for the DOM to load
                    window.addEventListener('load', function () {
                        return _this.initialized.resolve();
                    }, false);
                }
                /**
                 * Load the CSS from {@link RideStylerShowcase.css} into the first HEAD element
                 * found in the document of the container
                 */

            }, {
                key: 'initializeCSS',
                value: function initializeCSS() {
                    if (!RideStylerShowcase.StyleHelper.isOffsetPositioned(this.element)) this.element.style.position = 'relative';
                    if ('css' in RideStylerShowcase === false) return;
                    var containerDocument = this.element.ownerDocument;
                    var head = containerDocument.getElementsByTagName("head").item(0);
                    // If we don't have a HEAD element, create one and add it to the DOM
                    if (!head) {
                        head = document.createElement('head');
                        containerDocument.documentElement.insertBefore(head, containerDocument.firstChild);
                    }
                    var stylesheet = document.createElement('style');
                    // Add our CSS to the stylesheet
                    stylesheet.appendChild(document.createTextNode(RideStylerShowcase.css));
                    // Add the CSS to the header before the first HEAD element
                    head.insertBefore(stylesheet, RideStylerShowcase.HTMLHelper.firstChildWithTag(head, "STYLE"));
                    // Remove the CSS from our object so it's not specified twice
                    delete RideStylerShowcase.css;
                }
            }, {
                key: 'initializeStyleClasses',
                value: function initializeStyleClasses() {
                    if (RideStylerShowcase.StyleHelper.isTouchDevice) this.element.classList.add('is-touch');
                }
            }, {
                key: 'initializeBreakpoints',
                value: function initializeBreakpoints() {
                    var _this2 = this;

                    // Make sure our breakpoints are sorted
                    widthBreakpoints.sort(function (a, b) {
                        return a[1] - b[1];
                    });
                    this.applyBreakpointClasses();
                    switch (document.readyState) {
                        case "loading":
                            RideStylerShowcase.HTMLHelper.getDocument(this.element).addEventListener("DOMContentLoaded", function () {
                                return _this2.applyBreakpointClasses();
                            });
                        case "interactive":
                            RideStylerShowcase.HTMLHelper.getWindow(this.element).addEventListener("load", function () {
                                return _this2.applyBreakpointClasses();
                            });
                    }
                }
            }, {
                key: 'resize',
                value: function resize() {
                    this.applyBreakpointClasses();
                    if (typeof this.onResize === 'function') this.onResize();
                }
            }, {
                key: 'resized',
                value: function resized() {
                    if (typeof this.onResized === 'function') this.onResized();
                }
            }, {
                key: 'breakpointChanged',
                value: function breakpointChanged(newBreakpoint) {
                    if (typeof this.onBreakpointChanged === 'function') this.onBreakpointChanged(newBreakpoint);
                }
            }, {
                key: 'watchSize',
                value: function watchSize() {
                    var _this3 = this;

                    var element = this.element;
                    var timer = void 0;
                    var resizedEventDelay = 200;
                    var elementSize = {
                        width: element.clientWidth,
                        height: element.clientHeight
                    };
                    RideStylerShowcase.HTMLHelper.getWindow(element).addEventListener('resize', function () {
                        var newElementSize = {
                            width: element.clientWidth,
                            height: element.clientHeight
                        };
                        if (newElementSize.width !== elementSize.width || newElementSize.height !== elementSize.height) {
                            // The element's size has changed
                            elementSize = newElementSize;
                            _this3.resize();
                            clearTimeout(timer);
                            timer = setTimeout(function () {
                                _this3.resized();
                            }, resizedEventDelay);
                        }
                    }, false);
                }
            }, {
                key: 'getCurrentBreakpoint',
                value: function getCurrentBreakpoint() {
                    return this.currentBreakpoint;
                }
            }, {
                key: 'applyBreakpointClasses',
                value: function applyBreakpointClasses() {
                    var element = this.element;
                    var height = element.offsetHeight;
                    var width = element.offsetWidth;
                    // Don't run if we don't have a height or width yet
                    if (!height || !width) return;
                    var newBreakpoint = void 0;
                    // The new breakpoint is the next lowest value in the array
                    {
                        var i = void 0;
                        for (i = widthBreakpoints.length - 1; i >= 0; i--) {
                            if (widthBreakpoints[i][1] <= width) break;
                        }newBreakpoint = i >= 0 ? widthBreakpoints[i] : undefined;
                    }
                    // If the current breakpoint hasn't changed, don't run the rest of this logic
                    if (newBreakpoint === this.currentBreakpoint) return;
                    // Set our current breakpoint to the newly defined one
                    this.currentBreakpoint = newBreakpoint;
                    var originalClassName = element.className;
                    var className = originalClassName;
                    // Remove any breakpoint classes from the element's class
                    className = className.replace(/\bridestyler-showcase-breakpoint-.+?(?= |$)/gi, "").trim();
                    // Add in the breakpoint class if we have one
                    if (newBreakpoint) {
                        className += ' ridestyler-showcase-breakpoint-' + newBreakpoint[0];
                    }
                    // If the className hasn't changed do nothing
                    if (className === originalClassName) return;
                    element.className = className;
                    this.breakpointChanged(newBreakpoint);
                }
            }]);

            return StyleManager;
        }();

        styles.StyleManager = StyleManager;
    })(styles = RideStylerShowcase.styles || (RideStylerShowcase.styles = {}));
})(RideStylerShowcase || (RideStylerShowcase = {}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9zY3JpcHRzL1JpZGVTdHlsZXJTaG93Y2FzZS5zdHlsZXMudHMiXSwibmFtZXMiOlsiUmlkZVN0eWxlclNob3djYXNlIiwic3R5bGVzIiwid2lkdGhCcmVha3BvaW50cyIsIlN0eWxlTWFuYWdlciIsImVsZW1lbnQiLCJpbml0aWFsaXplZCIsInJpZGVzdHlsZXIiLCJwcm9taXNlIiwiaW5pdGlhbGl6ZUJyZWFrcG9pbnRzIiwid2F0Y2hTaXplIiwiaW5pdGlhbGl6ZUNTUyIsInJlc29sdmVPbkRPTUxvYWQiLCJpbml0aWFsaXplU3R5bGVDbGFzc2VzIiwiZG9jdW1lbnQiLCJyZWFkeVN0YXRlIiwicmVzb2x2ZSIsIndpbmRvdyIsImFkZEV2ZW50TGlzdGVuZXIiLCJTdHlsZUhlbHBlciIsImlzT2Zmc2V0UG9zaXRpb25lZCIsInN0eWxlIiwicG9zaXRpb24iLCJjb250YWluZXJEb2N1bWVudCIsIm93bmVyRG9jdW1lbnQiLCJoZWFkIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJpdGVtIiwiY3JlYXRlRWxlbWVudCIsImRvY3VtZW50RWxlbWVudCIsImluc2VydEJlZm9yZSIsImZpcnN0Q2hpbGQiLCJzdHlsZXNoZWV0IiwiYXBwZW5kQ2hpbGQiLCJjcmVhdGVUZXh0Tm9kZSIsImNzcyIsIkhUTUxIZWxwZXIiLCJmaXJzdENoaWxkV2l0aFRhZyIsImlzVG91Y2hEZXZpY2UiLCJjbGFzc0xpc3QiLCJhZGQiLCJzb3J0IiwiYSIsImIiLCJhcHBseUJyZWFrcG9pbnRDbGFzc2VzIiwiZ2V0RG9jdW1lbnQiLCJnZXRXaW5kb3ciLCJvblJlc2l6ZSIsIm9uUmVzaXplZCIsIm5ld0JyZWFrcG9pbnQiLCJvbkJyZWFrcG9pbnRDaGFuZ2VkIiwidGltZXIiLCJyZXNpemVkRXZlbnREZWxheSIsImVsZW1lbnRTaXplIiwid2lkdGgiLCJjbGllbnRXaWR0aCIsImhlaWdodCIsImNsaWVudEhlaWdodCIsIm5ld0VsZW1lbnRTaXplIiwicmVzaXplIiwiY2xlYXJUaW1lb3V0Iiwic2V0VGltZW91dCIsInJlc2l6ZWQiLCJjdXJyZW50QnJlYWtwb2ludCIsIm9mZnNldEhlaWdodCIsIm9mZnNldFdpZHRoIiwiaSIsImxlbmd0aCIsInVuZGVmaW5lZCIsIm9yaWdpbmFsQ2xhc3NOYW1lIiwiY2xhc3NOYW1lIiwicmVwbGFjZSIsInRyaW0iLCJicmVha3BvaW50Q2hhbmdlZCJdLCJtYXBwaW5ncyI6Ijs7OztBQUFBLElBQVVBLGtCQUFWO0FBQUEsQ0FBQSxVQUFVQSxrQkFBVixFQUE0QjtBQUFDLFFBQUFDLE1BQUE7QUFBQSxLQUFBLFVBQUFBLE1BQUEsRUFBTTtBQUkvQixZQUFJQyxtQkFBZ0MsQ0FDaEMsQ0FBQyxnQkFBRCxFQUFtQixDQUFuQixDQURnQyxFQUVoQyxDQUFDLGlCQUFELEVBQW9CLEdBQXBCLENBRmdDLEVBR2hDLENBQUMsUUFBRCxFQUFXLEdBQVgsQ0FIZ0MsRUFJaEMsQ0FBQyxpQkFBRCxFQUFvQixHQUFwQixDQUpnQyxFQUtoQyxDQUFDLFFBQUQsRUFBVyxHQUFYLENBTGdDLEVBTWhDLENBQUMsU0FBRCxFQUFZLEdBQVosQ0FOZ0MsRUFPaEMsQ0FBQyxZQUFELEVBQWUsSUFBZixDQVBnQyxFQVFoQyxDQUFDLElBQUQsRUFBTyxJQUFQLENBUmdDLENBQXBDOztBQUorQixZQWUvQkMsWUFmK0I7QUFrQjNCLGtDQUFhQyxPQUFiLEVBQWdDO0FBQUE7O0FBQzVCLHFCQUFLQSxPQUFMLEdBQWVBLE9BQWY7QUFFQSxxQkFBS0MsV0FBTCxHQUFtQkMsV0FBV0MsT0FBWCxFQUFuQjtBQUVBLHFCQUFLQyxxQkFBTDtBQUNBLHFCQUFLQyxTQUFMO0FBQ0EscUJBQUtDLGFBQUw7QUFDQSxxQkFBS0MsZ0JBQUw7QUFDQSxxQkFBS0Msc0JBQUw7QUFDSDs7QUE1QjBCO0FBQUE7QUFBQSxtREFnQ0g7QUFBQTs7QUFDcEIsd0JBQUlDLFNBQVNDLFVBQVQsS0FBd0IsVUFBNUIsRUFBd0M7QUFDcEM7QUFDQSw2QkFBS1QsV0FBTCxDQUFpQlUsT0FBakI7QUFFQTtB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LENBQWpCLEVBQW9CLENBQXBCLEtBQTBCWixLQUE5QixFQUNJO0FBRlIseUJBSUFMLGdCQUFnQmlCLEtBQUssQ0FBTCxHQUFTL0QsaUJBQWlCK0QsQ0FBakIsQ0FBVCxHQUErQkUsU0FBL0M7QUFDSDtBQUVEO0FBQ0Esd0JBQUluQixrQkFBa0IsS0FBS2MsaUJBQTNCLEVBQThDO0FBRTlDO0FBQ0EseUJBQUtBLGlCQUFMLEdBQXlCZCxhQUF6QjtBQUVBLHdCQUFNb0Isb0JBQW9CaEUsUUFBUWlFLFNBQWxDO0FBQ0Esd0JBQUlBLFlBQVlELGlCQUFoQjtBQUVBO0FBQ0FDLGdDQUFZQSxVQUFVQyxPQUFWLENBQWtCLCtDQUFsQixFQUFtRSxFQUFuRSxFQUF1RUMsSUFBdkUsRUFBWjtBQUVBO0FBQ0Esd0JBQUl2QixhQUFKLEVBQW1CO0FBQ2ZxQixxQ0FBYSxxQ0FBcUNyQixjQUFjLENBQWQsQ0FBbEQ7QUFDSDtBQUVEO0FBQ0Esd0JBQUlxQixjQUFjRCxpQkFBbEIsRUFBcUM7QUFFckNoRSw0QkFBUWlFLFNBQVIsR0FBb0JBLFNBQXBCO0FBQ0EseUJBQUtHLGlCQUFMLENBQXVCeEIsYUFBdkI7QUFDSDtBQWxOMEI7O0FBQUE7QUFBQTs7QUFlbEIvQyxlQUFBRSxZQUFBLEdBQVlBLFlBQVo7QUFxTWhCLEtBcE40QixFQUFBRixTQUFBRCxtQkFBQUMsTUFBQSxLQUFBRCxtQkFBQUMsTUFBQSxHQUFNLEVBQU4sQ0FBQTtBQW9ONUIsQ0FwTkQsRUFBVUQsdUJBQUFBLHFCQUFrQixFQUFsQixDQUFWIiwiZmlsZSI6InNjcmlwdHMvUmlkZVN0eWxlclNob3djYXNlLnN0eWxlcy5qcyIsInNvdXJjZXNDb250ZW50IjpbIm5hbWVzcGFjZSBSaWRlU3R5bGVyU2hvd2Nhc2Uuc3R5bGVzIHtcclxuICAgIGV4cG9ydCB0eXBlIEJyZWFrcG9pbnRLZXkgPSAncGhvbmUtcG9ydHJhaXQnIHwgJ3Bob25lLWxhbmRzY2FwZScgfCAndGFibGV0JyB8ICdkZXNrdG9wJyB8ICdkZXNrdG9wLXhsJyB8ICd0dic7XHJcbiAgICBleHBvcnQgdHlwZSBCcmVha3BvaW50ID0gW0JyZWFrcG9pbnRLZXksIG51bWJlcl07XHJcbiAgICBcclxuICAgIGxldCB3aWR0aEJyZWFrcG9pbnRzOkJyZWFrcG9pbnRbXSA9IFtcclxuICAgICAgICBbJ3Bob25lLXBvcnRyYWl0JywgMF0sXHJcbiAgICAgICAgWydwaG9uZS1sYW5kc2NhcGUnLCA0MjBdLFxyXG4gICAgICAgIFsndGFibGV0JywgNzY4XSxcclxuICAgICAgICBbJ3Bob25lLWxhbmRzY2FwZScsIDgxMl0sXHJcbiAgICAgICAgWyd0YWJsZXQnLCA4MjRdLFxyXG4gICAgICAgIFsnZGVza3RvcCcsIDk5Ml0sXHJcbiAgICAgICAgWydkZXNrdG9wLXhsJywgMTIwMF0sXHJcbiAgICAgICAgWyd0dicsIDE2MDBdXHJcbiAgICBdO1xyXG5cclxuICAgIGV4cG9ydCBjbGFzcyBTdHlsZU1hbmFnZXIge1xyXG4gICAgICAgIGVsZW1lbnQ6SFRNTEVsZW1lbnQ7XHJcblxyXG4gICAgICAgIGNvbnN0cnVjdG9yIChlbGVtZW50OkhUTUxFbGVtZW50KSB7XHJcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudCA9IGVsZW1lbnQ7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmluaXRpYWxpemVkID0gcmlkZXN0eWxlci5wcm9taXNlKCk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmluaXRpYWxpemVCcmVha3BvaW50cygpO1xyXG4gICAgICAgICAgICB0aGlzLndhdGNoU2l6ZSgpO1xyXG4gICAgICAgICAgICB0aGlzLmluaXRpYWxpemVDU1MoKTtcclxuICAgICAgICAgICAgdGhpcy5yZXNvbHZlT25ET01Mb2FkKCk7XHJcbiAgICAgICAgICAgIHRoaXMuaW5pdGlhbGl6ZVN0eWxlQ2xhc3NlcygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGluaXRpYWxpemVkOlJpZGVTdHlsZXJQcm9taXNlO1xyXG5cclxuICAgICAgICBwcml2YXRlIHJlc29sdmVPbkRPTUxvYWQoKSB7XHJcbiAgICAgICAgICAgIGlmIChkb2N1bWVudC5yZWFkeVN0YXRlID09PSAnY29tcGxldGUnKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBUaGUgRE9NIGlzIGFscmVhZHkgbG9hZGVkXHJcbiAgICAgICAgICAgICAgICB0aGlzLmluaXRpYWxpemVkLnJlc29sdmUoKTtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIFdhaXQgZm9yIHRoZSBET00gdG8gbG9hZFxyXG4gICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsICgpID0+IHRoaXMuaW5pdGlhbGl6ZWQucmVzb2x2ZSgpLCBmYWxzZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBMb2FkIHRoZSBDU1MgZnJvbSB7QGxpbmsgUmlkZVN0eWxlclNob3djYXNlLmNzc30gaW50byB0aGUgZmlyc3QgSEVBRCBlbGVtZW50XHJcbiAgICAgICAgICogZm91bmQgaW4gdGhlIGRvY3VtZW50IG9mIHRoZSBjb250YWluZXJcclxuICAgICAgICAgKi9cclxuICAgICAgICBwcml2YXRlIGluaXRpYWxpemVDU1MoKSB7XHJcbiAgICAgICAgICAgIGlmICghU3R5bGVIZWxwZXIuaXNPZmZzZXRQb3NpdGlvbmVkKHRoaXMuZWxlbWVudCkpXHJcbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuc3R5bGUucG9zaXRpb24gPSAncmVsYXRpdmUnO1xyXG5cclxuICAgICAgICAgICAgaWYgKCdjc3MnIGluIFJpZGVTdHlsZXJTaG93Y2FzZSA9PT0gZmFsc2UpIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgIGxldCBjb250YWluZXJEb2N1bWVudCA9IHRoaXMuZWxlbWVudC5vd25lckRvY3VtZW50O1xyXG4gICAgICAgICAgICBsZXQgaGVhZCA9IGNvbnRhaW5lckRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiaGVhZFwiKS5pdGVtKDApO1xyXG5cclxuICAgICAgICAgICAgLy8gSWYgd2UgZG9uJ3QgaGF2ZSBhIEhFQUQgZWxlbWVudCwgY3JlYXRlIG9uZSBhbmQgYWRkIGl0IHRvIHRoZSBET01cclxuICAgICAgICAgICAgaWYgKCFoZWFkKSB7XHJcbiAgICAgICAgICAgICAgICBoZWFkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaGVhZCcpO1xyXG4gICAgICAgICAgICAgICAgY29udGFpbmVyRG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50Lmluc2VydEJlZm9yZShoZWFkLCBjb250YWluZXJEb2N1bWVudC5maXJzdENoaWxkKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgbGV0IHN0eWxlc2hlZXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpO1xyXG5cclxuICAgICAgICAgICAgLy8gQWRkIG91ciBDU1MgdG8gdGhlIHN0eWxlc2hlZXRcclxuICAgICAgICAgICAgc3R5bGVzaGVldC5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShSaWRlU3R5bGVyU2hvd2Nhc2UuY3NzKSk7XHJcblxyXG4gICAgICAgICAgICAvLyBBZGQgdGhlIENTUyB0byB0aGUgaGVhZGVyIGJlZm9yZSB0aGUgZmlyc3QgSEVBRCBlbGVtZW50XHJcbiAgICAgICAgICAgIGhlYWQuaW5zZXJ0QmVmb3JlKHN0eWxlc2hlZXQsIEhUTUxIZWxwZXIuZmlyc3RDaGlsZFdpdGhUYWcoaGVhZCwgXCJTVFlMRVwiKSk7XHJcblxyXG4gICAgICAgICAgICAvLyBSZW1vdmUgdGhlIENTUyBmcm9tIG91ciBvYmplY3Qgc28gaXQncyBub3Qgc3BlY2lmaWVkIHR3aWNlXHJcbiAgICAgICAgICAgIGRlbGV0ZSBSaWRlU3R5bGVyU2hvd2Nhc2UuY3NzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBpbml0aWFsaXplU3R5bGVDbGFzc2VzKCkge1xyXG4gICAgICAgICAgICBpZiAoU3R5bGVIZWxwZXIuaXNUb3VjaERldmljZSlcclxuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QuYWRkKCdpcy10b3VjaCcpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBpbml0aWFsaXplQnJlYWtwb2ludHMoKSB7XHJcbiAgICAgICAgICAgIC8vIE1ha2Ugc3VyZSBvdXIgYnJlYWtwb2ludHMgYXJlIHNvcnRlZFxyXG4gICAgICAgICAgICB3aWR0aEJyZWFrcG9pbnRzLnNvcnQoZnVuY3Rpb24gKGEsYikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGFbMV0gLSBiWzFdO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuYXBwbHlCcmVha3BvaW50Q2xhc3NlcygpO1xyXG5cclxuICAgICAgICAgICAgc3dpdGNoIChkb2N1bWVudC5yZWFkeVN0YXRlKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwibG9hZGluZ1wiOlxyXG4gICAgICAgICAgICAgICAgICAgIEhUTUxIZWxwZXIuZ2V0RG9jdW1lbnQodGhpcy5lbGVtZW50KS5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLCAoKSA9PiB0aGlzLmFwcGx5QnJlYWtwb2ludENsYXNzZXMoKSk7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiaW50ZXJhY3RpdmVcIjpcclxuICAgICAgICAgICAgICAgICAgICBIVE1MSGVscGVyLmdldFdpbmRvdyh0aGlzLmVsZW1lbnQpLmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsICgpID0+IHRoaXMuYXBwbHlCcmVha3BvaW50Q2xhc3NlcygpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSByZXNpemUoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYXBwbHlCcmVha3BvaW50Q2xhc3NlcygpO1xyXG5cclxuICAgICAgICAgICAgaWYgKHR5cGVvZiB0aGlzLm9uUmVzaXplID09PSAnZnVuY3Rpb24nKSB0aGlzLm9uUmVzaXplKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIHJlc2l6ZWQoKSB7XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgdGhpcy5vblJlc2l6ZWQgPT09ICdmdW5jdGlvbicpIHRoaXMub25SZXNpemVkKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGJyZWFrcG9pbnRDaGFuZ2VkKG5ld0JyZWFrcG9pbnQ6QnJlYWtwb2ludCkge1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mIHRoaXMub25CcmVha3BvaW50Q2hhbmdlZCA9PT0gJ2Z1bmN0aW9uJykgdGhpcy5vbkJyZWFrcG9pbnRDaGFuZ2VkKG5ld0JyZWFrcG9pbnQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQSBjYWxsYmFjayBlYWNoIHRpbWUgdGhlIGVsZW1lbnQgaXMgcmVzaXplZFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBvblJlc2l6ZTogKCkgPT4gdm9pZDtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQSBjYWxsYmFjayBmb3IgYWZ0ZXIgdGhlIHVzZXIgaXMgZG9uZSByZXNpemluZyB0aGUgZWxlbWVudFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBvblJlc2l6ZWQ6ICgpID0+IHZvaWQ7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEEgY2FsbGJhY2sgZm9yIGFmdGVyIHRoZSBicmVha3BvaW50IGhhcyBjaGFuZ2VkXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIG9uQnJlYWtwb2ludENoYW5nZWQ6IChuZXdCcmVha3BvaW50OkJyZWFrcG9pbnQpID0+IHZvaWQ7XHJcblxyXG4gICAgICAgIHByaXZhdGUgd2F0Y2hTaXplKCkge1xyXG4gICAgICAgICAgICBsZXQgZWxlbWVudDpIVE1MRWxlbWVudCA9IHRoaXMuZWxlbWVudDtcclxuXHJcbiAgICAgICAgICAgIGxldCB0aW1lcjpudW1iZXI7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlc2l6ZWRFdmVudERlbGF5ID0gMjAwO1xyXG5cclxuICAgICAgICAgICAgbGV0IGVsZW1lbnRTaXplID0ge1xyXG4gICAgICAgICAgICAgICAgd2lkdGg6IGVsZW1lbnQuY2xpZW50V2lkdGgsXHJcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IGVsZW1lbnQuY2xpZW50SGVpZ2h0XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBIVE1MSGVscGVyLmdldFdpbmRvdyhlbGVtZW50KS5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBsZXQgbmV3RWxlbWVudFNpemUgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IGVsZW1lbnQuY2xpZW50V2lkdGgsXHJcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiBlbGVtZW50LmNsaWVudEhlaWdodFxyXG4gICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAobmV3RWxlbWVudFNpemUud2lkdGggIT09IGVsZW1lbnRTaXplLndpZHRoIHx8IG5ld0VsZW1lbnRTaXplLmhlaWdodCAhPT0gZWxlbWVudFNpemUuaGVpZ2h0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gVGhlIGVsZW1lbnQncyBzaXplIGhhcyBjaGFuZ2VkXHJcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudFNpemUgPSBuZXdFbGVtZW50U2l6ZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXNpemUoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVyKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXNpemVkKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSwgcmVzaXplZEV2ZW50RGVsYXkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgfSwgZmFsc2UpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVGhlIGN1cnJlbnRseSBhcHBsaWVkIGJyZWFrcG9pbnRcclxuICAgICAgICAgKi9cclxuICAgICAgICBwcml2YXRlIGN1cnJlbnRCcmVha3BvaW50OkJyZWFrcG9pbnQ7XHJcblxyXG4gICAgICAgIHB1YmxpYyBnZXRDdXJyZW50QnJlYWtwb2ludCgpOkJyZWFrcG9pbnQge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jdXJyZW50QnJlYWtwb2ludDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgYXBwbHlCcmVha3BvaW50Q2xhc3NlcygpIHtcclxuICAgICAgICAgICAgbGV0IGVsZW1lbnQ6SFRNTEVsZW1lbnQgPSB0aGlzLmVsZW1lbnQ7XHJcblxyXG4gICAgICAgICAgICBsZXQgaGVpZ2h0ID0gZWxlbWVudC5vZmZzZXRIZWlnaHQ7XHJcbiAgICAgICAgICAgIGxldCB3aWR0aCA9IGVsZW1lbnQub2Zmc2V0V2lkdGg7XHJcblxyXG4gICAgICAgICAgICAvLyBEb24ndCBydW4gaWYgd2UgZG9uJ3QgaGF2ZSBhIGhlaWdodCBvciB3aWR0aCB5ZXRcclxuICAgICAgICAgICAgaWYgKCFoZWlnaHQgfHwgIXdpZHRoKSByZXR1cm47XHJcblxyXG4gICAgICAgICAgICBsZXQgbmV3QnJlYWtwb2ludDpCcmVha3BvaW50O1xyXG5cclxuICAgICAgICAgICAgLy8gVGhlIG5ldyBicmVha3BvaW50IGlzIHRoZSBuZXh0IGxvd2VzdCB2YWx1ZSBpbiB0aGUgYXJyYXlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgbGV0IGk6bnVtYmVyO1xyXG4gICAgICAgICAgICAgICAgZm9yIChpID0gd2lkdGhCcmVha3BvaW50cy5sZW5ndGggLSAxOyBpID49IDA7IGktLSlcclxuICAgICAgICAgICAgICAgICAgICBpZiAod2lkdGhCcmVha3BvaW50c1tpXVsxXSA8PSB3aWR0aClcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgbmV3QnJlYWtwb2ludCA9IGkgPj0gMCA/IHdpZHRoQnJlYWtwb2ludHNbaV0gOiB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIElmIHRoZSBjdXJyZW50IGJyZWFrcG9pbnQgaGFzbid0IGNoYW5nZWQsIGRvbid0IHJ1biB0aGUgcmVzdCBvZiB0aGlzIGxvZ2ljXHJcbiAgICAgICAgICAgIGlmIChuZXdCcmVha3BvaW50ID09PSB0aGlzLmN1cnJlbnRCcmVha3BvaW50KSByZXR1cm47XHJcblxyXG4gICAgICAgICAgICAvLyBTZXQgb3VyIGN1cnJlbnQgYnJlYWtwb2ludCB0byB0aGUgbmV3bHkgZGVmaW5lZCBvbmVcclxuICAgICAgICAgICAgdGhpcy5jdXJyZW50QnJlYWtwb2ludCA9IG5ld0JyZWFrcG9pbnQ7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBvcmlnaW5hbENsYXNzTmFtZSA9IGVsZW1lbnQuY2xhc3NOYW1lXHJcbiAgICAgICAgICAgIGxldCBjbGFzc05hbWUgPSBvcmlnaW5hbENsYXNzTmFtZTtcclxuXHJcbiAgICAgICAgICAgIC8vIFJlbW92ZSBhbnkgYnJlYWtwb2ludCBjbGFzc2VzIGZyb20gdGhlIGVsZW1lbnQncyBjbGFzc1xyXG4gICAgICAgICAgICBjbGFzc05hbWUgPSBjbGFzc05hbWUucmVwbGFjZSgvXFxicmlkZXN0eWxlci1zaG93Y2FzZS1icmVha3BvaW50LS4rPyg/PSB8JCkvZ2ksIFwiXCIpLnRyaW0oKTtcclxuXHJcbiAgICAgICAgICAgIC8vIEFkZCBpbiB0aGUgYnJlYWtwb2ludCBjbGFzcyBpZiB3ZSBoYXZlIG9uZVxyXG4gICAgICAgICAgICBpZiAobmV3QnJlYWtwb2ludCkge1xyXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lICs9ICcgcmlkZXN0eWxlci1zaG93Y2FzZS1icmVha3BvaW50LScgKyBuZXdCcmVha3BvaW50WzBdO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBJZiB0aGUgY2xhc3NOYW1lIGhhc24ndCBjaGFuZ2VkIGRvIG5vdGhpbmdcclxuICAgICAgICAgICAgaWYgKGNsYXNzTmFtZSA9PT0gb3JpZ2luYWxDbGFzc05hbWUpIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgIGVsZW1lbnQuY2xhc3NOYW1lID0gY2xhc3NOYW1lO1xyXG4gICAgICAgICAgICB0aGlzLmJyZWFrcG9pbnRDaGFuZ2VkKG5ld0JyZWFrcG9pbnQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iXX0=

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var RideStylerShowcase;
(function (RideStylerShowcase) {
    var RideStylerShowcaseInstance = function () {
        function RideStylerShowcaseInstance(container, settings) {
            _classCallCheck(this, RideStylerShowcaseInstance);

            this.activeLoadingSessionKeys = [];
            this.settings = settings || {};
            this.settings.debug = this.settings.debug || {};
            this.events = new RideStylerShowcase.events.EventHandler();
            if (this.settings.debug.events === true) this.events.debugCallback = function (name, e, handlers) {
                if (name === 'resize') return;
                console.log('[RideStylerShowcase Event] Name: ' + name + ' Data:', e, handlers);
            };
            if (container) {
                if (typeof container === 'string') {
                    container = document.getElementById(container);
                    if (!container) console.error('The ID "' + container + '" could not be found in the DOM.');
                }
                this.initialize(container);
            }
        }
        /**
         * Register the main components used by the showcase
         */


        _createClass(RideStylerShowcaseInstance, [{
            key: 'registerComponents',
            value: function registerComponents() {
                var eventHandler = this.events;
                // Register other components to be displayed
                this.otherComponents = [new RideStylerShowcase.RideStylerShowcaseBackground(this)];
                // Register our mapping of states to main components
                this.stateComponentMapping = {};
                this.stateComponentMapping[RideStylerShowcase.States.ChooseVehicle] = new RideStylerShowcase.RideStylerShowcaseVehicleSelection(this);
                this.stateComponentMapping[RideStylerShowcase.States.Visualize] = new RideStylerShowcase.RideStylerShowcaseVehicleVisualization(this);
                // Generate mainComponents from the stateComponentMapping
                this.mainComponents = [];
                for (var state in this.stateComponentMapping) {
                    this.mainComponents.push(this.stateComponentMapping[state]);
                }
            }
            /**
             * Set the container of this showcase instance and initialize (or re-initialize) it
             * @param container The container to initialize this showcase in
             */

        }, {
            key: 'initialize',
            value: function initialize(container) {
                var _this = this;

                if (!container) throw "Cannot initialize showcase without a container to put it in.";
                this.container = RideStylerShowcase.ObjectHelper.assign(container, {
                    ridestylerShowcase: this
                });
                this.initializeState();
                this.registerComponents();
                RideStylerShowcase.api.initialize(this.settings);
                this.initializeStyle();
                this.initializeFilters();
                this.initializeComponents();
                this.events.on("vehicle-selected", function (selection) {
                    _this.state.changeState(RideStylerShowcase.States.Visualize, {
                        currentVehicleConfigurationID: selection.VehicleConfiguration,
                        currentVehicleDescription: selection.VehicleDescription,
                        currentVehicleTireOptionID: selection.TireOptionID,
                        currentVehicleTireOptionDescription: selection.TireOptionString,
                        currentPaintScheme: undefined,
                        vehicleHasAngledImage: undefined,
                        vehicleHasSideImage: undefined,
                        currentTire: undefined,
                        currentWheel: undefined,
                        currentWheelFitment: undefined,
                        currentTireOption: undefined,
                        currentVehicleDescriptionModel: undefined
                    });
                    return true;
                });
                var settingsRetrieved = RideStylerShowcase.PromiseHelper.then(RideStylerShowcase.api.authenticated, function () {
                    return RideStylerShowcase.api.settings.getSettings().done(function (settingsFromAPI) {
                        _this.settingsFromAPI = settingsFromAPI;
                    });
                });
                RideStylerShowcase.PromiseHelper.all([this.style.initialized, settingsRetrieved]).done(function () {
                    _this.events.trigger('initialized', undefined);
                });
                this.onStateChanged({
                    newState: this.state.currentState,
                    oldState: undefined,
                    newData: undefined
                });
            }
        }, {
            key: 'initializeState',
            value: function initializeState() {
                var _this2 = this;

                this.state = new RideStylerShowcase.state.RideStylerShowcaseState(RideStylerShowcase.States.ChooseVehicle);
                if (this.settings.debug.state === true) this.state.debugCallback = function (e, finished) {
                    var finishedString = finished ? 'Finished' : 'Beginning';
                    var stateChange = "to " + RideStylerShowcase.States[e.newState];
                    if (typeof e.oldState === 'number') {
                        stateChange = "from " + RideStylerShowcase.States[e.oldState] + " " + stateChange;
                    }
                    console.log('[RideStylerShowcase State] ' + stateChange + ' ' + finishedString, e);
                };
                this.state.onChange(function (e) {
                    return _this2.events.trigger("state-changed", e) && _this2.onStateChanged(e);
                });
            }
        }, {
            key: 'initializeStyle',
            value: function initializeStyle() {
                var _this3 = this;

                this.style = new RideStylerShowcase.styles.StyleManager(this.container);
                this.style.onResize = function () {
                    return _this3.events.trigger('resize', undefined);
                };
                this.style.onResized = function () {
                    return _this3.events.trigger('resized', undefined);
                };
                this.style.onBreakpointChanged = function (newBreakpoint) {
                    return _this3.events.trigger('breakpoint-changed', newBreakpoint);
                };
                if (!this.container.classList.contains('ridestyler-showcase')) this.container.classList.add('ridestyler-showcase');
            }
        }, {
            key: 'initializeFilters',
            value: function initializeFilters() {
                var _this4 = this;

                this.filters = new RideStylerShowcase.filters.FilterController();
                this.events.on("vehicle-selected", function (selection) {
                    _this4.filters.setVehicle({
                        vehicleConfigurationID: selection.VehicleConfiguration,
                        vehicleTireOptionID: selection.TireOptionID
                    });
                });
                this.events.on("vehicle-description-loaded", function (selectedVehicle) {
                    _this4.filters.setVehicleDescription({
                        HasSideImage: selectedVehicle.HasSideImage,
                        HasAngledImage: selectedVehicle.HasAngledImage
                    });
                });
            }
        }, {
            key: 'initializeComponents',
            value: function initializeComponents() {
                var container = this.container;
                var _iteratorNormalCompletion = true;
                var _didIteratorError = false;
                var _iteratorError = undefined;

                try {
                    for (var _iterator = this.otherComponents[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
                        var component = _step.value;

                        container.appendChild(component.component);
                    }
                } catch (err) {
                    _didIteratorError = true;
                    _iteratorError = err;
                } finally {
                    try {
                        if (!_iteratorNormalCompletion && _iterator.return) {
                            _iterator.return();
                        }
                    } finally {
                        if (_didIteratorError) {
                            throw _iteratorError;
                        }
                    }
                }

                var _iteratorNormalCompletion2 = true;
                var _didIteratorError2 = false;
                var _iteratorError2 = undefined;

                try {
                    for (var _iterator2 = this.mainComponents[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {
                        var _component = _step2.value;

                        _component.setVisible(false);
                        container.appendChild(_component.component);
                    }
                } catch (err) {
                    _didIteratorError2 = true;
                    _iteratorError2 = err;
                } finally {
                    try {
                        if (!_iteratorNormalCompletion2 && _iterator2.return) {
                            _iterator2.return();
                        }
                    } finally {
                        if (_didIteratorError2) {
                            throw _iteratorError2;
                        }
                    }
                }
            }
        }, {
            key: 'onStateChanged',
            value: function onStateChanged(ev) {
                this.updateCurrentComponent(ev);
                return true;
            }
        }, {
            key: 'updateCurrentComponent',
            value: function updateCurrentComponent(ev) {
                var newComponent = this.stateComponentMapping[ev.newState];
                var oldComponent = undefined;
                var stateClassPrefix = 'ridestyler-showcase-state-';
                if (typeof ev.oldState === 'number') {
                    oldComponent = this.stateComponentMapping[ev.oldState];
                    this.container.classList.remove(stateClassPrefix + RideStylerShowcase.States[ev.oldState].toLowerCase());
                }
                this.container.classList.add(stateClassPrefix + RideStylerShowcase.States[ev.newState].toLowerCase());
                if (oldComponent && oldComponent.isVisible()) {
                    oldComponent.hide(function () {
                        newComponent.show();
                    });
                } else {
                    newComponent.show();
                }
            }
        }]);

        return RideStylerShowcaseInstance;
    }();

    RideStylerShowcase.RideStylerShowcaseInstance = RideStylerShowcaseInstance;
    function create(container, settings) {
        return new RideStylerShowcaseInstance(container, settings);
    }
    RideStylerShowcase.create = create;
})(RideStylerShowcase || (RideStylerShowcase = {}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9zY3JpcHRzL1JpZGVTdHlsZXJTaG93Y2FzZS50cyJdLCJuYW1lcyI6WyJSaWRlU3R5bGVyU2hvd2Nhc2UiLCJSaWRlU3R5bGVyU2hvd2Nhc2VJbnN0YW5jZSIsImNvbnRhaW5lciIsInNldHRpbmdzIiwiYWN0aXZlTG9hZGluZ1Nlc3Npb25LZXlzIiwiZGVidWciLCJldmVudHMiLCJFdmVudEhhbmRsZXIiLCJkZWJ1Z0NhbGxiYWNrIiwibmFtZSIsImUiLCJoYW5kbGVycyIsImNvbnNvbGUiLCJsb2ciLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiZXJyb3IiLCJpbml0aWFsaXplIiwiZXZlbnRIYW5kbGVyIiwib3RoZXJDb21wb25lbnRzIiwiUmlkZVN0eWxlclNob3djYXNlQmFja2dyb3VuZCIsInN0YXRlQ29tcG9uZW50TWFwcGluZyIsIlN0YXRlcyIsIkNob29zZVZlaGljbGUiLCJSaWRlU3R5bGVyU2hvd2Nhc2VWZWhpY2xlU2VsZWN0aW9uIiwiVmlzdWFsaXplIiwiUmlkZVN0eWxlclNob3djYXNlVmVoaWNsZVZpc3VhbGl6YXRpb24iLCJtYWluQ29tcG9uZW50cyIsInN0YXRlIiwicHVzaCIsIk9iamVjdEhlbHBlciIsImFzc2lnbiIsInJpZGVzdHlsZXJTaG93Y2FzZSIsImluaXRpYWxpemVTdGF0ZSIsInJlZ2lzdGVyQ29tcG9uZW50cyIsImFwaSIsImluaXRpYWxpemVTdHlsZSIsImluaXRpYWxpemVGaWx0ZXJzIiwiaW5pdGlhbGl6ZUNvbXBvbmVudHMiLCJvbiIsImNoYW5nZVN0YXRlIiwiY3VycmVudFZlaGljbGVDb25maWd1cmF0aW9uSUQiLCJzZWxlY3Rpb24iLCJWZWhpY2xlQ29uZmlndXJhdGlvbiIsImN1cnJlbnRWZWhpY2xlRGVzY3JpcHRpb24iLCJWZWhpY2xlRGVzY3JpcHRpb24iLCJjdXJyZW50VmVoaWNsZVRpcmVPcHRpb25JRCIsIlRpcmVPcHRpb25JRCIsImN1cnJlbnRWZWhpY2xlVGlyZU9wdGlvbkRlc2NyaXB0aW9uIiwiVGlyZU9wdGlvblN0cmluZyIsImN1cnJlbnRQYWludFNjaGVtZSIsInVuZGVmaW5lZCIsInZlaGljbGVIYXNBbmdsZWRJbWFnZSIsInZlaGljbGVIYXNTaWRlSW1hZ2UiLCJjdXJyZW50VGlyZSIsImN1cnJlbnRXaGVlbCIsImN1cnJlbnRXaGVlbEZpdG1lbnQiLCJjdXJyZW50VGlyZU9wdGlvbiIsImN1cnJlbnRWZWhpY2xlRGVzY3JpcHRpb25Nb2RlbCIsInNldHRpbmdzUmV0cmlldmVkIiwiUHJvbWlzZUhlbHBlciIsInRoZW4iLCJhdXRoZW50aWNhdGVkIiwiZ2V0U2V0dGluZ3MiLCJkb25lIiwic2V0dGluZ3NGcm9tQVBJIiwiYWxsIiwic3R5bGUiLCJpbml0aWFsaXplZCIsInRyaWdnZXIiLCJvblN0YXRlQ2hhbmdlZCIsIm5ld1N0YXRlIiwiY3VycmVudFN0YXRlIiwib2xkU3RhdGUiLCJuZXdEYXRhIiwiUmlkZVN0eWxlclNob3djYXNlU3RhdGUiLCJmaW5pc2hlZCIsImZpbmlzaGVkU3RyaW5nIiwic3RhdGVDaGFuZ2UiLCJvbkNoYW5nZSIsInN0eWxlcyIsIlN0eWxlTWFuYWdlciIsIm9uUmVzaXplIiwib25SZXNpemVkIiwib25CcmVha3BvaW50Q2hhbmdlZCIsIm5ld0JyZWFrcG9pbnQiLCJjbGFzc0xpc3QiLCJjb250YWlucyIsImFkZCIsImZpbHRlcnMiLCJGaWx0ZXJDb250cm9sbGVyIiwic2V0VmVoaWNsZSIsInZlaGljbGVDb25maWd1cmF0aW9uSUQiLCJ2ZWhpY2xlVGlyZU9wdGlvbklEIiwic2V0VmVoaWNsZURlc2NyaXB0aW9uIiwiSGFzU2lkZUltYWdlIiwic2VsZWN0ZWRWZWhpY2xlIiwiSGFzQW5nbGVkSW1hZ2UiLCJjb21wb25lbnQiLCJhcHBlbmRDaGlsZCIsInNldFZpc2libGUiLCJldiIsInVwZGF0ZUN1cnJlbnRDb21wb25lbnQiLCJuZXdDb21wb25lbnQiLCJvbGRDb21wb25lbnQiLCJzdGF0ZUNsYXNzUHJlZml4IiwicmVtb3ZlIiwidG9M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RUEsb0JBQUlILGdCQUFnQkEsYUFBYUksU0FBYixFQUFwQixFQUE4QztBQUMxQ0osaUNBQWFLLElBQWIsQ0FBa0IsWUFBQTtBQUNkTixxQ0FBYU8sSUFBYjtBQUNILHFCQUZEO0FBR0gsaUJBSkQsTUFJTztBQUNIUCxpQ0FBYU8sSUFBYjtBQUNIO0FBQ0o7QUF2Um1COztBQUFBO0FBQUE7O0FBZ0JYOUcsdUJBQUFDLDBCQUFBLEdBQTBCQSwwQkFBMUI7QUE4UmIsYUFBQThHLE1BQUEsQ0FBd0I3RyxTQUF4QixFQUF5Q0MsUUFBekMsRUFBNkU7QUFDekUsZUFBTyxJQUFJRiwwQkFBSixDQUErQkMsU0FBL0IsRUFBMENDLFFBQTFDLENBQVA7QUFDSDtBQUZlSCx1QkFBQStHLE1BQUEsR0FBTUEsTUFBTjtBQUduQixDQWpURCxFQUFVL0csdUJBQUFBLHFCQUFrQixFQUFsQixDQUFWIiwiZmlsZSI6InNjcmlwdHMvUmlkZVN0eWxlclNob3djYXNlLmpzIiwic291cmNlc0NvbnRlbnQiOlsibmFtZXNwYWNlIFJpZGVTdHlsZXJTaG93Y2FzZSB7XHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIFJpZGVTdHlsZXJTaG93Y2FzZU9wdGlvbnMge1xyXG4gICAgICAgIGRlYnVnPzoge1xyXG4gICAgICAgICAgICBldmVudHM/OmJvb2xlYW47XHJcbiAgICAgICAgICAgIHN0YXRlPzpib29sZWFuO1xyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgZXhwb3J0IHR5cGUgUmlkZVN0eWxlclNob3djYXNlU2V0dGluZ3MgPSBcclxuICAgICAgICAoUmlkZVN0eWxlclNob3djYXNlT3B0aW9ucyAmIFJpZGVTdHlsZXJTaG93Y2FzZUFQSUluaXRpYWxpemVTZXR0aW5nc0tleVRva2VuKSB8IFxyXG4gICAgICAgIChSaWRlU3R5bGVyU2hvd2Nhc2VPcHRpb25zICYgUmlkZVN0eWxlclNob3djYXNlQVBJSW5pdGlhbGl6ZVNldHRpbmdzVXNlcik7XHJcblxyXG4gICAgZXhwb3J0IGludGVyZmFjZSBSaWRlU3R5bGVyU2hvd2Nhc2VDb250YWluZXIgZXh0ZW5kcyBIVE1MRWxlbWVudCB7XHJcbiAgICAgICAgcmlkZXN0eWxlclNob3djYXNlOiBSaWRlU3R5bGVyU2hvd2Nhc2VJbnN0YW5jZTtcclxuICAgIH1cclxuXHJcbiAgICBleHBvcnQgY2xhc3MgUmlkZVN0eWxlclNob3djYXNlSW5zdGFuY2Uge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFRoZSBtYWluIGNvbnRhaW5lciBmb3IgdGhlIHNob3djYXNlXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIGNvbnRhaW5lcjogUmlkZVN0eWxlclNob3djYXNlQ29udGFpbmVyO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBUaGUgbWFpbiBjb21wb25lbnRzIChzY3JlZW5zIGZvciBleGFtcGxlKSB0byBiZSByZW5kZXJlZCBpbiB0aGUgc2hvd2Nhc2VcclxuICAgICAgICAgKi9cclxuICAgICAgICBwcml2YXRlIG1haW5Db21wb25lbnRzOiBNYWluQ29tcG9uZW50QmFzZVtdO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBPdGhlciBjb21wb25lbnRzIHRvIGJlIHJlbmRlcmVkIGluIHRoZSBzaG93Y2FzZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHByaXZhdGUgb3RoZXJDb21wb25lbnRzOiBDb21wb25lbnRCYXNlW107XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEEgbWFwcGluZyBvZiBzdGF0ZXMgdG8gbWFpbiBjb21wb25lbnRzXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0ZUNvbXBvbmVudE1hcHBpbmc6IHtbc3RhdGU6IG51bWJlcl06TWFpbkNvbXBvbmVudEJhc2V9O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBUaGUgY3VycmVudGx5IHZpc2libGUgbWFpbiBjb21wb25lbnRcclxuICAgICAgICAgKi9cclxuICAgICAgICBwcml2YXRlIGN1cnJlbnRNYWluQ29tcG9uZW50OiBNYWluQ29tcG9uZW50QmFzZTtcclxuICAgICAgICBcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBUaGUgc3RhdGUgaGFuZGxlclxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBzdGF0ZTpzdGF0ZS5SaWRlU3R5bGVyU2hvd2Nhc2VTdGF0ZTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVGhlIHN0eWxlIG1hbmFnZXJcclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgc3R5bGU6c3R5bGVzLlN0eWxlTWFuYWdlcjtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVGhlIGV2ZW50IGhhbmRsZXJcclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgZXZlbnRzOmV2ZW50cy5FdmVudEhhbmRsZXI7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFNldHRpbmdzIHNwZWNpZmllZCB3aGVuIHRoZSBzaG93Y2FzZSB3YXMgY3JlYXRlZFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBzZXR0aW5nczpSaWRlU3R5bGVyU2hvd2Nhc2VTZXR0aW5ncztcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogU2V0dGluZ3MgbG9hZGVkIGZyb20gdGhlIEFQSVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBzZXR0aW5nc0Zyb21BUEk6YXBpLnNldHRpbmdzLlJpZGVTdHlsZXJTaG93Y2FzZVNldHRpbmdzRnJvbUFQSTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVGhlIGZpbHRlciBjb250cm9sbGVyXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIGZpbHRlcnM6ZmlsdGVycy5GaWx0ZXJDb250cm9sbGVyO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENyZWF0ZSBhIFJpZGVTdHlsZXIgU2hvd2Nhc2UgaW5zdGFuY2UgYW5kIGRvIG5vdCBpbml0aWFsaXplIGl0XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIGNvbnN0cnVjdG9yKCk7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENyZWF0ZSBhIFJpZGVTdHlsZXIgU2hvd2Nhc2UgaW5zdGFuY2UgYW5kIGluaXRpYWxpemUgaXQgaW5zaWRlIGEgY29udGFpbmVyIHdpdGggdGhlIHNwZWNpZmllZCBJRFxyXG4gICAgICAgICAqIEBwYXJhbSBjb250YWluZXJJRCBTcGVjaWZpZXMgdGhlIElEIG9mIHRoZSBjb250YWluZXIgdG8gaW5pdGlhbGl6ZSB0aGUgc2hvd2Nhc2UgaW5cclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgY29uc3RydWN0b3IoY29udGFpbmVySUQ6IHN0cmluZywgc2V0dGluZ3M/OlJpZGVTdHlsZXJTaG93Y2FzZVNldHRpbmdzKTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQ3JlYXRlIGEgUmlkZVN0eWxlciBTaG93Y2FzZSBpbnN0YW5jZSBhbmQgaW5pdGlhbGl6ZSBpdCBpbnNpZGUgdGhlIHNwZWNpZmllZCBjb250YWluZXJcclxuICAgICAgICAgKiBAcGFyYW0gY29udGFpbmVyIFNwZWNpZmllcyB0aGUgZWxlbWVudCB0byBpbml0aWFsaXplIHRoZSBzaG93Y2FzZSBpblxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBjb25zdHJ1Y3RvciAoY29udGFpbmVyOiBIVE1MRWxlbWVudCwgc2V0dGluZ3M/OlJpZGVTdHlsZXJTaG93Y2FzZVNldHRpbmdzKTtcclxuXHJcbiAgICAgICAgcHVibGljIGNvbnN0cnVjdG9yIChjb250YWluZXI/OiBzdHJpbmcgfCBIVE1MRWxlbWVudCwgc2V0dGluZ3M/OlJpZGVTdHlsZXJTaG93Y2FzZVNldHRpbmdzKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0dGluZ3MgPSBzZXR0aW5ncyB8fCB7fTtcclxuICAgICAgICAgICAgdGhpcy5zZXR0aW5ncy5kZWJ1ZyA9IHRoaXMuc2V0dGluZ3MuZGVidWcgfHwge307XHJcblxyXG4gICAgICAgICAgICB0aGlzLmV2ZW50cyA9IG5ldyBldmVudHMuRXZlbnRIYW5kbGVyKCk7XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy5kZWJ1Zy5ldmVudHMgPT09IHRydWUpXHJcbiAgICAgICAgICAgICAgICB0aGlzLmV2ZW50cy5kZWJ1Z0NhbGxiYWNrID0gZnVuY3Rpb24gKG5hbWUsIGUsIGhhbmRsZXJzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5hbWUgPT09ICdyZXNpemUnKSByZXR1cm47XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBbUmlkZVN0eWxlclNob3djYXNlIEV2ZW50XSBOYW1lOiAke25hbWV9IERhdGE6YCwgZSwgaGFuZGxlcnMpO1xyXG4gICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIGlmIChjb250YWluZXIpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgY29udGFpbmVyID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGNvbnRhaW5lcik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghY29udGFpbmVyKSBjb25zb2xlLmVycm9yKCdUaGUgSUQgXCInICsgY29udGFpbmVyICsgJ1wiIGNvdWxkIG5vdCBiZSBmb3VuZCBpbiB0aGUgRE9NLicpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuaW5pdGlhbGl6ZShjb250YWluZXIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBSZWdpc3RlciB0aGUgbWFpbiBjb21wb25lbnRzIHVzZWQgYnkgdGhlIHNob3djYXNlXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHJpdmF0ZSByZWdpc3RlckNvbXBvbmVudHMoKTogdm9pZCB7XHJcbiAgICAgICAgICAgIGxldCBldmVudEhhbmRsZXIgPSB0aGlzLmV2ZW50cztcclxuXHJcbiAgICAgICAgICAgIC8vIFJlZ2lzdGVyIG90aGVyIGNvbXBvbmVudHMgdG8gYmUgZGlzcGxheWVkXHJcbiAgICAgICAgICAgIHRoaXMub3RoZXJDb21wb25lbnRzID0gW1xyXG4gICAgICAgICAgICAgICAgbmV3IFJpZGVTdHlsZXJTaG93Y2FzZUJhY2tncm91bmQodGhpcylcclxuICAgICAgICAgICAgXTtcclxuXHJcbiAgICAgICAgICAgIC8vIFJlZ2lzdGVyIG91ciBtYXBwaW5nIG9mIHN0YXRlcyB0byBtYWluIGNvbXBvbmVudHNcclxuICAgICAgICAgICAgdGhpcy5zdGF0ZUNvbXBvbmVudE1hcHBpbmcgPSB7fTtcclxuICAgICAgICAgICAgdGhpcy5zdGF0ZUNvbXBvbmVudE1hcHBpbmdbU3RhdGVzLkNob29zZVZlaGljbGVdID0gbmV3IFJpZGVTdHlsZXJTaG93Y2FzZVZlaGljbGVTZWxlY3Rpb24odGhpcyk7XHJcbiAgICAgICAgICAgIHRoaXMuc3RhdGVDb21wb25lbnRNYXBwaW5nW1N0YXRlcy5WaXN1YWxpemVdID0gbmV3IFJpZGVTdHlsZXJTaG93Y2FzZVZlaGljbGVWaXN1YWxpemF0aW9uKHRoaXMpO1xyXG5cclxuICAgICAgICAgICAgLy8gR2VuZXJhdGUgbWFpbkNvbXBvbmVudHMgZnJvbSB0aGUgc3RhdGVDb21wb25lbnRNYXBwaW5nXHJcbiAgICAgICAgICAgIHRoaXMubWFpbkNvbXBvbmVudHMgPSBbXTtcclxuICAgICAgICAgICAgZm9yIChsZXQgc3RhdGUgaW4gdGhpcy5zdGF0ZUNvbXBvbmVudE1hcHBpbmcpXHJcbiAgICAgICAgICAgICAgICB0aGlzLm1haW5Db21wb25lbnRzLnB1c2godGhpcy5zdGF0ZUNvbXBvbmVudE1hcHBpbmdbc3RhdGVdKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFNldCB0aGUgY29udGFpbmVyIG9mIHRoaXMgc2hvd2Nhc2UgaW5zdGFuY2UgYW5kIGluaXRpYWxpemUgKG9yIHJlLWluaXRpYWxpemUpIGl0XHJcbiAgICAgICAgICogQHBhcmFtIGNvbnRhaW5lciBUaGUgY29udGFpbmVyIHRvIGluaXRpYWxpemUgdGhpcyBzaG93Y2FzZSBpblxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBpbml0aWFsaXplKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpIDogdm9pZCB7XHJcblxyXG4gICAgICAgICAgICBpZiAoIWNvbnRhaW5lcikgdGhyb3cgXCJDYW5ub3QgaW5pdGlhbGl6ZSBzaG93Y2FzZSB3aXRob3V0IGEgY29udGFpbmVyIHRvIHB1dCBpdCBpbi5cIjtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuY29udGFpbmVyID0gT2JqZWN0SGVscGVyLmFzc2lnbihjb250YWluZXIsIHtcclxuICAgICAgICAgICAgICAgIHJpZGVzdHlsZXJTaG93Y2FzZTogdGhpc1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuaW5pdGlhbGl6ZVN0YXRlKCk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnJlZ2lzdGVyQ29tcG9uZW50cygpO1xyXG5cclxuICAgICAgICAgICAgYXBpLmluaXRpYWxpemUodGhpcy5zZXR0aW5ncyk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmluaXRpYWxpemVTdHlsZSgpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5pbml0aWFsaXplRmlsdGVycygpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgdGhpcy5pbml0aWFsaXplQ29tcG9uZW50cygpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5ldmVudHMub24oXCJ2ZWhpY2xlLXNlbGVjdGVkXCIsIHNlbGVjdGlvbiA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLmNoYW5nZVN0YXRlKFN0YXRlcy5WaXN1YWxpemUsIHtcclxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50VmVoaWNsZUNvbmZpZ3VyYXRpb25JRDogc2VsZWN0aW9uLlZlaGljbGVDb25maWd1cmF0aW9uLFxyXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRWZWhpY2xlRGVzY3JpcHRpb246IHNlbGVjdGlvbi5WZWhpY2xlRGVzY3JpcHRpb24sXHJcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudFZlaGljbGVUaXJlT3B0aW9uSUQ6IHNlbGVjdGlvbi5UaXJlT3B0aW9uSUQsXHJcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudFZlaGljbGVUaXJlT3B0aW9uRGVzY3JpcHRpb246IHNlbGVjdGlvbi5UaXJlT3B0aW9uU3RyaW5nLFxyXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRQYWludFNjaGVtZTogdW5kZWZpbmVkLFxyXG4gICAgICAgICAgICAgICAgICAgIHZlaGljbGVIYXNBbmdsZWRJbWFnZTogdW5kZWZpbmVkLFxyXG4gICAgICAgICAgICAgICAgICAgIHZlaGljbGVIYXNTaWRlSW1hZ2U6IHVuZGVmaW5lZCxcclxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50VGlyZTogdW5kZWZpbmVkLFxyXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRXaGVlbDogdW5kZWZpbmVkLFxyXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRXaGVlbEZpdG1lbnQ6IHVuZGVmaW5lZCxcclxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50VGlyZU9wdGlvbjogdW5kZWZpbmVkLFxyXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRWZWhpY2xlRGVzY3JpcHRpb25Nb2RlbDogdW5kZWZpbmVkXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGxldCBzZXR0aW5nc1JldHJpZXZlZCA9IFByb21pc2VIZWxwZXIudGhlbihhcGkuYXV0aGVudGljYXRlZCwgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGFwaS5zZXR0aW5ncy5nZXRTZXR0aW5ncygpLmRvbmUoc2V0dGluZ3NGcm9tQVBJID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldHRpbmdzRnJvbUFQSSA9IHNldHRpbmdzRnJvbUFQSTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIFByb21pc2VIZWxwZXIuYWxsKFt0aGlzLnN0eWxlLmluaXRpYWxpemVkLCBzZXR0aW5nc1JldHJpZXZlZF0pLmRvbmUoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ldmVudHMudHJpZ2dlcignaW5pdGlhbGl6ZWQnLCB1bmRlZmluZWQpO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMub25TdGF0ZUNoYW5nZWQoe1xyXG4gICAgICAgICAgICAgICAgbmV3U3RhdGU6IHRoaXMuc3RhdGUuY3VycmVudFN0YXRlLFxyXG4gICAgICAgICAgICAgICAgb2xkU3RhdGU6IHVuZGVmaW5lZCxcclxuICAgICAgICAgICAgICAgIG5ld0RhdGE6IHVuZGVmaW5lZFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgaW5pdGlhbGl6ZVN0YXRlKCkge1xyXG4gICAgICAgICAgICB0aGlzLnN0YXRlID0gbmV3IHN0YXRlLlJpZGVTdHlsZXJTaG93Y2FzZVN0YXRlKFN0YXRlcy5DaG9vc2VWZWhpY2xlKTtcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLnNldHRpbmdzLmRlYnVnLnN0YXRlID09PSB0cnVlKSB0aGlzLnN0YXRlLmRlYnVnQ2FsbGJhY2sgPSBmdW5jdGlvbihlLCBmaW5pc2hlZCkge1xyXG4gICAgICAgICAgICAgICAgbGV0IGZpbmlzaGVkU3RyaW5nID0gZmluaXNoZWQgPyAnRmluaXNoZWQnIDogJ0JlZ2lubmluZyc7XHJcbiAgICAgICAgICAgICAgICBsZXQgc3RhdGVDaGFuZ2UgPSBcInRvIFwiICsgU3RhdGVzW2UubmV3U3RhdGVdO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgZS5vbGRTdGF0ZSA9PT0gJ251bWJlcicpIHtcclxuICAgICAgICAgICAgICAgICAgICBzdGF0ZUNoYW5nZSA9IFwiZnJvbSBcIiArIFN0YXRlc1tlLm9sZFN0YXRlXSArIFwiIFwiICsgc3RhdGVDaGFuZ2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFtSaWRlU3R5bGVyU2hvd2Nhc2UgU3RhdGVdICR7c3RhdGVDaGFuZ2V9ICR7ZmluaXNoZWRTdHJpbmd9YCwgZSk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB0aGlzLnN0YXRlLm9uQ2hhbmdlKChlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5ldmVudHMudHJpZ2dlcihcInN0YXRlLWNoYW5nZWRcIiwgZSkgJiYgdGhpcy5vblN0YXRlQ2hhbmdlZChlKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGluaXRpYWxpemVTdHlsZSgpIHtcclxuICAgICAgICAgICAgdGhpcy5zdHlsZSA9IG5ldyBzdHlsZXMuU3R5bGVNYW5hZ2VyKHRoaXMuY29udGFpbmVyKTtcclxuICAgICAgICAgICAgdGhpcy5zdHlsZS5vblJlc2l6ZSA9ICgpID0+IHRoaXMuZXZlbnRzLnRyaWdnZXIoJ3Jlc2l6ZScsIHVuZGVmaW5lZCk7XHJcbiAgICAgICAgICAgIHRoaXMuc3R5bGUub25SZXNpemVkID0gKCkgPT4gdGhpcy5ldmVudHMudHJpZ2dlcigncmVzaXplZCcsIHVuZGVmaW5lZCk7XHJcbiAgICAgICAgICAgIHRoaXMuc3R5bGUub25CcmVha3BvaW50Q2hhbmdlZCA9IG5ld0JyZWFrcG9pbnQgPT4gdGhpcy5ldmVudHMudHJpZ2dlcignYnJlYWtwb2ludC1jaGFuZ2VkJywgbmV3QnJlYWtwb2ludCk7XHJcblxyXG4gICAgICAgICAgICBpZiAoIXRoaXMuY29udGFpbmVyLmNsYXNzTGlzdC5jb250YWlucygncmlkZXN0eWxlci1zaG93Y2FzZScpKVxyXG4gICAgICAgICAgICAgICAgdGhpcy5jb250YWluZXIuY2xhc3NMaXN0LmFkZCgncmlkZXN0eWxlci1zaG93Y2FzZScpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBpbml0aWFsaXplRmlsdGVycygpIHtcclxuICAgICAgICAgICAgdGhpcy5maWx0ZXJzID0gbmV3IGZpbHRlcnMuRmlsdGVyQ29udHJvbGxlcigpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5ldmVudHMub24oXCJ2ZWhpY2xlLXNlbGVjdGVkXCIsIHNlbGVjdGlvbiA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmZpbHRlcnMuc2V0VmVoaWNsZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgdmVoaWNsZUNvbmZpZ3VyYXRpb25JRDogc2VsZWN0aW9uLlZlaGljbGVDb25maWd1cmF0aW9uLFxyXG4gICAgICAgICAgICAgICAgICAgIHZlaGljbGVUaXJlT3B0aW9uSUQ6IHNlbGVjdGlvbi5UaXJlT3B0aW9uSURcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRzLm9uKFwidmVoaWNsZS1kZXNjcmlwdGlvbi1sb2FkZWRcIiwgc2VsZWN0ZWRWZWhpY2xlID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZmlsdGVycy5zZXRWZWhpY2xlRGVzY3JpcHRpb24oe1xyXG4gICAgICAgICAgICAgICAgICAgIEhhc1NpZGVJbWFnZTogc2VsZWN0ZWRWZWhpY2xlLkhhc1NpZGVJbWFnZSxcclxuICAgICAgICAgICAgICAgICAgICBIYXNBbmdsZWRJbWFnZTogc2VsZWN0ZWRWZWhpY2xlLkhhc0FuZ2xlZEltYWdlXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGluaXRpYWxpemVDb21wb25lbnRzKCkge1xyXG4gICAgICAgICAgICBsZXQgY29udGFpbmVyID0gdGhpcy5jb250YWluZXI7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGxldCBjb21wb25lbnQgb2YgdGhpcy5vdGhlckNvbXBvbmVudHMpXHJcbiAgICAgICAgICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoY29tcG9uZW50LmNvbXBvbmVudCk7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGxldCBjb21wb25lbnQgb2YgdGhpcy5tYWluQ29tcG9uZW50cykge1xyXG4gICAgICAgICAgICAgICAgY29tcG9uZW50LnNldFZpc2libGUoZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGNvbXBvbmVudC5jb21wb25lbnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIHByaXZhdGUgb25TdGF0ZUNoYW5nZWQoZXY6IHN0YXRlLlN0YXRlQ2hhbmdlZEV2ZW50KTpib29sZWFuIHtcclxuICAgICAgICAgICAgdGhpcy51cGRhdGVDdXJyZW50Q29tcG9uZW50KGV2KTtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGFjdGl2ZUxvYWRpbmdTZXNzaW9uS2V5czogc3RyaW5nW10gPSBbXTtcclxuXHJcbiAgICAgICAgcHJpdmF0ZSB1cGRhdGVDdXJyZW50Q29tcG9uZW50KGV2OnN0YXRlLlN0YXRlQ2hhbmdlZEV2ZW50KSB7XHJcbiAgICAgICAgICAgIGxldCBuZXdDb21wb25lbnQ6TWFpbkNvbXBvbmVudEJhc2UgPSB0aGlzLnN0YXRlQ29tcG9uZW50TWFwcGluZ1tldi5uZXdTdGF0ZV07XHJcbiAgICAgICAgICAgIGxldCBvbGRDb21wb25lbnQ6TWFpbkNvbXBvbmVudEJhc2UgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgIGNvbnN0IHN0YXRlQ2xhc3NQcmVmaXggPSAncmlkZXN0eWxlci1zaG93Y2FzZS1zdGF0ZS0nO1xyXG5cclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBldi5vbGRTdGF0ZSA9PT0gJ251bWJlcicpIHtcclxuICAgICAgICAgICAgICAgIG9sZENvbXBvbmVudCA9IHRoaXMuc3RhdGVDb21wb25lbnRNYXBwaW5nW2V2Lm9sZFN0YXRlXTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoc3RhdGVDbGFzc1ByZWZpeCArIFN0YXRlc1tldi5vbGRTdGF0ZV0udG9Mb3dlckNhc2UoKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHRoaXMuY29udGFpbmVyLmNsYXNzTGlzdC5hZGQoc3RhdGVDbGFzc1ByZWZpeCArIFN0YXRlc1tldi5uZXdTdGF0ZV0udG9Mb3dlckNhc2UoKSk7XHJcblxyXG4gICAgICAgICAgICBpZiAob2xkQ29tcG9uZW50ICYmIG9sZENvbXBvbmVudC5pc1Zpc2libGUoKSkge1xyXG4gICAgICAgICAgICAgICAgb2xkQ29tcG9uZW50LmhpZGUoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIG5ld0NvbXBvbmVudC5zaG93KCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIG5ld0NvbXBvbmVudC5zaG93KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGUgYSBSaWRlU3R5bGVyIFNob3djYXNlIGluc3RhbmNlIGFuZCBkbyBub3QgaW5pdGlhbGl6ZSBpdFxyXG4gICAgICogQHBhcmFtIHNldHRpbmdzXHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBmdW5jdGlvbiBjcmVhdGUoc2V0dGluZ3M/OlJpZGVTdHlsZXJTaG93Y2FzZVNldHRpbmdzKTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZSBhIFJpZGVTdHlsZXIgU2hvd2Nhc2UgaW5zdGFuY2UgYW5kIGluaXRpYWxpemUgaXQgaW5zaWRlIGEgY29udGFpbmVyIHdpdGggdGhlIHNwZWNpZmllZCBJRFxyXG4gICAgICogQHBhcmFtIGNvbnRhaW5lcklEIFNwZWNpZmllcyB0aGUgSUQgb2YgdGhlIGNvbnRhaW5lciB0byBpbml0aWFsaXplIHRoZSBzaG93Y2FzZSBpblxyXG4gICAgICogQHBhcmFtIHNldHRpbmdzXHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBmdW5jdGlvbiBjcmVhdGUoY29udGFpbmVySUQ6IHN0cmluZywgc2V0dGluZ3M/OlJpZGVTdHlsZXJTaG93Y2FzZVNldHRpbmdzKTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZSBhIFJpZGVTdHlsZXIgU2hvd2Nhc2UgaW5zdGFuY2UgYW5kIGluaXRpYWxpemUgaXQgaW5zaWRlIHRoZSBzcGVjaWZpZWQgY29udGFpbmVyXHJcbiAgICAgKiBAcGFyYW0gY29udGFpbmVyIFNwZWNpZmllcyB0aGUgZWxlbWVudCB0byBpbml0aWFsaXplIHRoZSBzaG93Y2FzZSBpblxyXG4gICAgICogQHBhcmFtIHNldHRpbmdzXHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBmdW5jdGlvbiBjcmVhdGUgKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsIHNldHRpbmdzPzpSaWRlU3R5bGVyU2hvd2Nhc2VTZXR0aW5ncyk7XHJcblxyXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZSAoY29udGFpbmVyPzogYW55LCBzZXR0aW5ncz86UmlkZVN0eWxlclNob3djYXNlU2V0dGluZ3MpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFJpZGVTdHlsZXJTaG93Y2FzZUluc3RhbmNlKGNvbnRhaW5lciwgc2V0dGluZ3MpO1xyXG4gICAgfVxyXG59Il19

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var RideStylerShowcase;
(function (RideStylerShowcase) {
    var ComponentBase = function () {
        function ComponentBase(showcaseInstance) {
            _classCallCheck(this, ComponentBase);

            this.showcase = showcaseInstance;
            this.events = showcaseInstance.events;
            this.state = showcaseInstance.state;
            this.initializeComponent();
        }
        /**
         * A overridable function called after the base component is initialized
         * @virtual
         */


        _createClass(ComponentBase, [{
            key: "initializeComponent",
            value: function initializeComponent() {}
        }]);

        return ComponentBase;
    }();

    RideStylerShowcase.ComponentBase = ComponentBase;
})(RideStylerShowcase || (RideStylerShowcase = {}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvQ29tcG9uZW50QmFzZS50cyJdLCJuYW1lcyI6WyJSaWRlU3R5bGVyU2hvd2Nhc2UiLCJDb21wb25lbnRCYXNlIiwic2hvd2Nhc2VJbnN0YW5jZSIsInNob3djYXNlIiwiZXZlbnRzIiwic3RhdGUiLCJpbml0aWFsaXplQ29tcG9uZW50Il0sIm1hcHBpbmdzIjoiOzs7O0FBQUEsSUFBVUEsa0JBQVY7QUFBQSxDQUFBLFVBQVVBLGtCQUFWLEVBQTRCO0FBQUEsUUFDeEJDLGFBRHdCO0FBRXBCLCtCQUFhQyxnQkFBYixFQUF5RDtBQUFBOztBQUNyRCxpQkFBS0MsUUFBTCxHQUFnQkQsZ0JBQWhCO0FBQ0EsaUJBQUtFLE1BQUwsR0FBY0YsaUJBQWlCRSxNQUEvQjtBQUNBLGlCQUFLQyxLQUFMLEdBQWFILGlCQUFpQkcsS0FBOUI7QUFFQSxpQkFBS0MsbUJBQUw7QUFDSDtBQVdEOzs7Ozs7QUFuQm9CO0FBQUE7QUFBQSxrREF1QlMsQ0FBSztBQXZCZDs7QUFBQTtBQUFBOztBQUNGTix1QkFBQUMsYUFBQSxHQUFhQSxhQUFiO0FBd0J6QixDQXpCRCxFQUFVRCx1QkFBQUEscUJBQWtCLEVBQWxCLENBQVYiLCJmaWxlIjoic2NyaXB0cy9jb21wb25lbnRzL0NvbXBvbmVudEJhc2UuanMiLCJzb3VyY2VzQ29udGVudCI6WyJuYW1lc3BhY2UgUmlkZVN0eWxlclNob3djYXNlIHtcclxuICAgIGV4cG9ydCBhYnN0cmFjdCBjbGFzcyBDb21wb25lbnRCYXNlIGltcGxlbWVudHMgSUNvbXBvbmVudCB7XHJcbiAgICAgICAgY29uc3RydWN0b3IgKHNob3djYXNlSW5zdGFuY2U6IFJpZGVTdHlsZXJTaG93Y2FzZUluc3RhbmNlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2hvd2Nhc2UgPSBzaG93Y2FzZUluc3RhbmNlO1xyXG4gICAgICAgICAgICB0aGlzLmV2ZW50cyA9IHNob3djYXNlSW5zdGFuY2UuZXZlbnRzO1xyXG4gICAgICAgICAgICB0aGlzLnN0YXRlID0gc2hvd2Nhc2VJbnN0YW5jZS5zdGF0ZTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuaW5pdGlhbGl6ZUNvbXBvbmVudCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBwcm90ZWN0ZWQgcmVhZG9ubHkgc2hvd2Nhc2U6UmlkZVN0eWxlclNob3djYXNlSW5zdGFuY2U7XHJcbiAgICAgICAgcHJvdGVjdGVkIHJlYWRvbmx5IGV2ZW50czpldmVudHMuRXZlbnRIYW5kbGVyO1xyXG4gICAgICAgIHByb3RlY3RlZCByZWFkb25seSBzdGF0ZTpzdGF0ZS5SaWRlU3R5bGVyU2hvd2Nhc2VTdGF0ZTtcclxuICAgICAgICBcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBUaGUgbWFpbiBlbGVtZW50IGZvciB0aGlzIGNvbXBvbmVudFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBjb21wb25lbnQ6IEhUTUxFbGVtZW50O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBBIG92ZXJyaWRhYmxlIGZ1bmN0aW9uIGNhbGxlZCBhZnRlciB0aGUgYmFzZSBjb21wb25lbnQgaXMgaW5pdGlhbGl6ZWRcclxuICAgICAgICAgKiBAdmlydHVhbFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHByb3RlY3RlZCBpbml0aWFsaXplQ29tcG9uZW50KCkge31cclxuICAgIH1cclxufSJdfQ==


//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzY3JpcHRzL2NvbXBvbmVudHMvSUNvbXBvbmVudC5qcyIsInNvdXJjZXNDb250ZW50IjpbXX0=

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var RideStylerShowcase;
(function (RideStylerShowcase) {
    var MainComponentBase = function (_RideStylerShowcase$C) {
        _inherits(MainComponentBase, _RideStylerShowcase$C);

        function MainComponentBase(showcaseInstance) {
            _classCallCheck(this, MainComponentBase);

            var _this = _possibleConstructorReturn(this, (MainComponentBase.__proto__ || Object.getPrototypeOf(MainComponentBase)).call(this, showcaseInstance));

            _this.component = document.createElement('div');
            _this.component.classList.add('ridestyler-showcase-main-component');
            if (RideStylerShowcase.StyleHelper.transitionsSupported) _this.component.addEventListener(RideStylerShowcase.StyleHelper.transitionEndEvent, function (e) {
                // Only transitions on this component element
                if (e.target !== _this.component) return;
                _this.onTransitionEnd();
            });
            _this.setVisible(false);
            _this.buildComponent(_this.component);
            _this.initializeMainComponent();
            return _this;
        }
        /**
         * A overridable function called after the base component is constructed
         * @virtual
         */


        _createClass(MainComponentBase, [{
            key: 'initializeComponent',
            value: function initializeComponent() {}
            /**
             * A overridable function called after the main component is constructed
             * @virtual
             */

        }, {
            key: 'initializeMainComponent',
            value: function initializeMainComponent() {}
            /**
             * Whether or not this component is visible
             * @return true, if this component is visible, otherwise false
             */

        }, {
            key: 'isVisible',
            value: function isVisible() {
                return this._visible;
            }
            /**
             * Hide/show the component without animation
             * @param visible If true, show the component, otherwise hide the component
             */

        }, {
            key: 'setVisible',
            value: function setVisible(visible) {
                var _this2 = this;

                if (this._visible === visible) return;
                this._visible = visible;
                this.setVisibleStyling(visible);
                RideStylerShowcase.StyleHelper.skipTransition(this.component, function () {
                    return visible ? _this2.show() : _this2.hide();
                });
            }
        }, {
            key: 'setVisibleStyling',
            value: function setVisibleStyling(visible) {
                var styles = this.component.style;
                if (visible) {
                    styles.visibility = 'visible';
                    styles.top = '';
                } else {
                    styles.visibility = 'hidden';
                    styles.top = '1000%';
                }
            }
        }, {
            key: 'callWhenDoneAnimating',
            value: function callWhenDoneAnimating(callback) {
                var _this3 = this;

                // Call the callback after the view has been animated in 
                if (this._animating) RideStylerShowcase.StyleHelper.onNextTransitionEnd(this.component, function () {
                    return callback.call(_this3);
                });else callback.call(this);
            }
            /**
             * Called before this component is shown
             * @virtual
             */

        }, {
            key: 'onShow',
            value: function onShow() {}
            /**
             * Called before this component is shown but after it has received dimensions
             */

        }, {
            key: 'onDisplay',
            value: function onDisplay() {}
            /**
             * Called after the component is shown
             * @virtual
             */

        }, {
            key: 'onShown',
            value: function onShown() {}
            /**
             * Called before the component is hidden
             * @virtual
             */

        }, {
            key: 'onHide',
            value: function onHide() {}
            /**
             * Called after the component is hidden
             * @virtual
             */

        }, {
            key: 'onHidden',
            value: function onHidden() {}
            /**
             * Animate the component into the view
             */

        }, {
            key: 'show',
            value: function show(callback) {
                var _this4 = this;

                if (this.component.classList.contains('in')) {
                    // The component is already visible, trigger the callback as needed
                    this._visible = true;
                    if (typeof callback === 'function') {
                        this.callWhenDoneAnimating(callback);
                    }
                    return;
                }
                if (this._animating) {
                    // This view is animating out, show it after it's done
                    RideStylerShowcase.StyleHelper.onNextTransitionEnd(this.component, function () {
                        return _this4.show(callback);
                    });
                    return;
                }
                this._visible = true;
                this._animating = RideStylerShowcase.StyleHelper.transitionsSupported;
                this.onShow();
                this.setVisibleStyling(true);
                RideStylerShowcase.StyleHelper.triggerReflow(this.component);
                this.onDisplay();
                this.callWhenDoneAnimating(function () {
                    this.onShown();
                    if (typeof callback === 'function') callback.call(this);
                });
                this.component.classList.add('in');
            }
            /**
             * Animate the component out of the view
             */

        }, {
            key: 'hide',
            value: function hide(callback) {
                var _this5 = this;

                if (!this.component.classList.contains('in')) {
                    // Already hidden
                    this._visible = false;
                    if (typeof callback === 'function') {
                        this.callWhenDoneAnimating(callback);
                    }
                    return;
                }
                if (this._animating) {
                    // This view is animating in, show it after it's done
                    RideStylerShowcase.StyleHelper.onNextTransitionEnd(this.component, function () {
                        return _this5.hide(callback);
                    });
                    return;
                }
                this._visible = false;
                this._animating = RideStylerShowcase.StyleHelper.transitionsSupported;
                this.onHide();
                this.callWhenDoneAnimating(function () {
                    this.onHidden();
                    if (typeof callback === 'function') callback.call(this);
                });
                this.component.classList.remove('in');
                if (!RideStylerShowcase.StyleHelper.transitionsSupported) this.setVisibleStyling(false);
            }
            /**
             * Hide components after transition out
             */

        }, {
            key: 'onTransitionEnd',
            value: function onTransitionEnd() {
                if (!this.component.classList.contains('in')) this.setVisibleStyling(false);
                this._animating = false;
            }
        }]);

        return MainComponentBase;
    }(RideStylerShowcase.ComponentBase);

    RideStylerShowcase.MainComponentBase = MainComponentBase;
})(RideStylerShowcase || (RideStylerShowcase = {}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvTWFpbkNvbXBvbmVudEJhc2UudHMiXSwibmFtZXMiOlsiUmlkZVN0eWxlclNob3djYXNlIiwiTWFpbkNvbXBvbmVudEJhc2UiLCJzaG93Y2FzZUluc3RhbmNlIiwiY29tcG9uZW50IiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NMaXN0IiwiYWRkIiwiU3R5bGVIZWxwZXIiLCJ0cmFuc2l0aW9uc1N1cHBvcnRlZCIsImFkZEV2ZW50TGlzdGVuZXIiLCJ0cmFuc2l0aW9uRW5kRXZlbnQiLCJlIiwidGFyZ2V0Iiwib25UcmFuc2l0aW9uRW5kIiwic2V0VmlzaWJsZSIsImJ1aWxkQ29tcG9uZW50IiwiaW5pdGlhbGl6ZU1haW5Db21wb25lbnQiLCJfdmlzaWJsZSIsInZpc2libGUiLCJzZXRWaXNpYmxlU3R5bGluZyIsInNraXBUcmFuc2l0aW9uIiwic2hvdyIsImhpZGUiLCJzdHlsZXMiLCJzdHlsZSIsInZpc2liaWxpdHkiLCJ0b3AiLCJjYWxsYmFjayIsIl9hbmltYXRpbmciLCJvbk5leHRUcmFuc2l0aW9uRW5kIiwiY2FsbCIsImNvbnRhaW5zIiwiY2FsbFdoZW5Eb25lQW5pbWF0aW5nIiwib25TaG93IiwidHJpZ2dlclJlZmxvdyIsIm9uRGlzcGxheSIsIm9uU2hvd24iLCJvbkhpZGUiLCJvbkhpZGRlbiIsInJlbW92ZSIsIkNvbXBvbmVudEJhc2UiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUEsSUFBVUEsa0JBQVY7QUFBQSxDQUFBLFVBQVVBLGtCQUFWLEVBQTRCO0FBQUEsUUFDeEJDLGlCQUR3QjtBQUFBOztBQUlwQixtQ0FBWUMsZ0JBQVosRUFBdUQ7QUFBQTs7QUFBQSw4SUFDN0NBLGdCQUQ2Qzs7QUFHbkQsa0JBQUtDLFNBQUwsR0FBaUJDLFNBQVNDLGFBQVQsQ0FBdUIsS0FBdkIsQ0FBakI7QUFDQSxrQkFBS0YsU0FBTCxDQUFlRyxTQUFmLENBQXlCQyxHQUF6QixDQUE2QixvQ0FB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QW9CLFVBQXhCLEVBQ0lBLFNBQVNHLElBQVQsQ0FBYyxJQUFkO0FBQ1AsaUJBTEQ7QUFPQSxxQkFBSzVCLFNBQUwsQ0FBZUcsU0FBZixDQUF5QmtDLE1BQXpCLENBQWdDLElBQWhDO0FBRUEsb0JBQUksQ0FBQ3hDLG1CQUFBUSxXQUFBLENBQVlDLG9CQUFqQixFQUNJLEtBQUtXLGlCQUFMLENBQXVCLEtBQXZCO0FBQ1A7QUFFRDs7OztBQWhNb0I7QUFBQTtBQUFBLDhDQW1NTDtBQUNYLG9CQUFJLENBQUMsS0FBS2pCLFNBQUwsQ0FBZUcsU0FBZixDQUF5QjBCLFFBQXpCLENBQWtDLElBQWxDLENBQUwsRUFDSSxLQUFLWixpQkFBTCxDQUF1QixLQUF2QjtBQUVKLHFCQUFLUyxVQUFMLEdBQWtCLEtBQWxCO0FBQ0g7QUF4TW1COztBQUFBO0FBQUEsTUFDd0I3QixtQkFBQXlDLGFBRHhCOztBQUNGekMsdUJBQUFDLGlCQUFBLEdBQWlCQSxpQkFBakI7QUF5TXpCLENBMU1ELEVBQVVELHVCQUFBQSxxQkFBa0IsRUFBbEIsQ0FBViIsImZpbGUiOiJzY3JpcHRzL2NvbXBvbmVudHMvTWFpbkNvbXBvbmVudEJhc2UuanMiLCJzb3VyY2VzQ29udGVudCI6WyJuYW1lc3BhY2UgUmlkZVN0eWxlclNob3djYXNlIHtcclxuICAgIGV4cG9ydCBhYnN0cmFjdCBjbGFzcyBNYWluQ29tcG9uZW50QmFzZSBleHRlbmRzIENvbXBvbmVudEJhc2Uge1xyXG4gICAgICAgIGNvbXBvbmVudDogSFRNTEVsZW1lbnQ7XHJcblxyXG4gICAgICAgIGNvbnN0cnVjdG9yKHNob3djYXNlSW5zdGFuY2U6UmlkZVN0eWxlclNob3djYXNlSW5zdGFuY2UpIHtcclxuICAgICAgICAgICAgc3VwZXIoc2hvd2Nhc2VJbnN0YW5jZSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmNvbXBvbmVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICB0aGlzLmNvbXBvbmVudC5jbGFzc0xpc3QuYWRkKCdyaWRlc3R5bGVyLXNob3djYXNlLW1haW4tY29tcG9uZW50Jyk7XHJcblxyXG4gICAgICAgICAgICBpZiAoU3R5bGVIZWxwZXIudHJhbnNpdGlvbnNTdXBwb3J0ZWQpXHJcbiAgICAgICAgICAgICAgICB0aGlzLmNvbXBvbmVudC5hZGRFdmVudExpc3RlbmVyKFN0eWxlSGVscGVyLnRyYW5zaXRpb25FbmRFdmVudCwgZSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gT25seSB0cmFuc2l0aW9ucyBvbiB0aGlzIGNvbXBvbmVudCBlbGVtZW50XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGUudGFyZ2V0ICE9PSB0aGlzLmNvbXBvbmVudCkgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm9uVHJhbnNpdGlvbkVuZCgpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnNldFZpc2libGUoZmFsc2UpO1xyXG4gICAgICAgICAgICB0aGlzLmJ1aWxkQ29tcG9uZW50KHRoaXMuY29tcG9uZW50KTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHRoaXMuaW5pdGlhbGl6ZU1haW5Db21wb25lbnQoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEEgb3ZlcnJpZGFibGUgZnVuY3Rpb24gY2FsbGVkIGFmdGVyIHRoZSBiYXNlIGNvbXBvbmVudCBpcyBjb25zdHJ1Y3RlZFxyXG4gICAgICAgICAqIEB2aXJ0dWFsXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHJvdGVjdGVkIGluaXRpYWxpemVDb21wb25lbnQoKSB7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBBIG92ZXJyaWRhYmxlIGZ1bmN0aW9uIGNhbGxlZCBhZnRlciB0aGUgbWFpbiBjb21wb25lbnQgaXMgY29uc3RydWN0ZWRcclxuICAgICAgICAgKiBAdmlydHVhbFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHByb3RlY3RlZCBpbml0aWFsaXplTWFpbkNvbXBvbmVudCgpIHt9XHJcblxyXG4gICAgICAgIHByaXZhdGUgX3Zpc2libGU6IGJvb2xlYW47XHJcbiAgICAgICAgcHJpdmF0ZSBfYW5pbWF0aW5nOiBib29sZWFuO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAcGFyYW0gY29udGFpbmVyIFRoZSBjb250YWluZXIgdG8gYnVpbGQgdGhlIGNvbXBvbmVudCBpblxyXG4gICAgICAgICAqL1xyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgYWJzdHJhY3QgYnVpbGRDb21wb25lbnQoY29udGFpbmVyOkhUTUxFbGVtZW50KTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogV2hldGhlciBvciBub3QgdGhpcyBjb21wb25lbnQgaXMgdmlzaWJsZVxyXG4gICAgICAgICAqIEByZXR1cm4gdHJ1ZSwgaWYgdGhpcyBjb21wb25lbnQgaXMgdmlzaWJsZSwgb3RoZXJ3aXNlIGZhbHNlXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgaXNWaXNpYmxlKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fdmlzaWJsZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEhpZGUvc2hvdyB0aGUgY29tcG9uZW50IHdpdGhvdXQgYW5pbWF0aW9uXHJcbiAgICAgICAgICogQHBhcmFtIHZpc2libGUgSWYgdHJ1ZSwgc2hvdyB0aGUgY29tcG9uZW50LCBvdGhlcndpc2UgaGlkZSB0aGUgY29tcG9uZW50XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgc2V0VmlzaWJsZSh2aXNpYmxlOmJvb2xlYW4pIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX3Zpc2libGUgPT09IHZpc2libGUpIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuX3Zpc2libGUgPSB2aXNpYmxlO1xyXG4gICAgICAgICAgICB0aGlzLnNldFZpc2libGVTdHlsaW5nKHZpc2libGUpXHJcblxyXG4gICAgICAgICAgICBTdHlsZUhlbHBlci5za2lwVHJhbnNpdGlvbih0aGlzLmNvbXBvbmVudCwgKCkgPT4gdmlzaWJsZSA/IHRoaXMuc2hvdygpIDogdGhpcy5oaWRlKCkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBzZXRWaXNpYmxlU3R5bGluZyh2aXNpYmxlOmJvb2xlYW4pIHtcclxuICAgICAgICAgICAgbGV0IHN0eWxlcyA9IHRoaXMuY29tcG9uZW50LnN0eWxlO1xyXG5cclxuICAgICAgICAgICAgaWYgKHZpc2libGUpIHtcclxuICAgICAgICAgICAgICAgIHN0eWxlcy52aXNpYmlsaXR5ID0gJ3Zpc2libGUnO1xyXG4gICAgICAgICAgICAgICAgc3R5bGVzLnRvcCA9ICcnO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgc3R5bGVzLnZpc2liaWxpdHkgPSAnaGlkZGVuJztcclxuICAgICAgICAgICAgICAgIHN0eWxlcy50b3AgPSAnMTAwMCUnO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGNhbGxXaGVuRG9uZUFuaW1hdGluZyhjYWxsYmFjazoodGhpczp0aGlzKT0+dm9pZCkge1xyXG4gICAgICAgICAgICAvLyBDYWxsIHRoZSBjYWxsYmFjayBhZnRlciB0aGUgdmlldyBoYXMgYmVlbiBhbmltYXRlZCBpbiBcclxuICAgICAgICAgICAgaWYgKHRoaXMuX2FuaW1hdGluZykgU3R5bGVIZWxwZXIub25OZXh0VHJhbnNpdGlvbkVuZCh0aGlzLmNvbXBvbmVudCwgKCkgPT4gY2FsbGJhY2suY2FsbCh0aGlzKSk7XHJcbiAgICAgICAgICAgIGVsc2UgY2FsbGJhY2suY2FsbCh0aGlzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENhbGxlZCBiZWZvcmUgdGhpcyBjb21wb25lbnQgaXMgc2hvd25cclxuICAgICAgICAgKiBAdmlydHVhbFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHByb3RlY3RlZCBvblNob3coKSB7fVxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENhbGxlZCBiZWZvcmUgdGhpcyBjb21wb25lbnQgaXMgc2hvd24gYnV0IGFmdGVyIGl0IGhhcyByZWNlaXZlZCBkaW1lbnNpb25zXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHJvdGVjdGVkIG9uRGlzcGxheSgpIHt9XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQ2FsbGVkIGFmdGVyIHRoZSBjb21wb25lbnQgaXMgc2hvd25cclxuICAgICAgICAgKiBAdmlydHVhbFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHByb3RlY3RlZCBvblNob3duKCl7fVxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENhbGxlZCBiZWZvcmUgdGhlIGNvbXBvbmVudCBpcyBoaWRkZW5cclxuICAgICAgICAgKiBAdmlydHVhbFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHByb3RlY3RlZCBvbkhpZGUoKSB7fVxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENhbGxlZCBhZnRlciB0aGUgY29tcG9uZW50IGlzIGhpZGRlblxyXG4gICAgICAgICAqIEB2aXJ0dWFsXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHJvdGVjdGVkIG9uSGlkZGVuKCkge31cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQW5pbWF0ZSB0aGUgY29tcG9uZW50IGludG8gdGhlIHZpZXdcclxuICAgICAgICAgKi9cclxuICAgICAgICBzaG93KGNhbGxiYWNrPzoodGhpczp0aGlzKT0+dm9pZCkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5jb21wb25lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCdpbicpKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBUaGUgY29tcG9uZW50IGlzIGFscmVhZHkgdmlzaWJsZSwgdHJpZ2dlciB0aGUgY2FsbGJhY2sgYXMgbmVlZGVkXHJcbiAgICAgICAgICAgICAgICB0aGlzLl92aXNpYmxlID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGNhbGxiYWNrID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jYWxsV2hlbkRvbmVBbmltYXRpbmcoY2FsbGJhY2spO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMuX2FuaW1hdGluZykge1xyXG4gICAgICAgICAgICAgICAgLy8gVGhpcyB2aWV3IGlzIGFuaW1hdGluZyBvdXQsIHNob3cgaXQgYWZ0ZXIgaXQncyBkb25lXHJcbiAgICAgICAgICAgICAgICBTdHlsZUhlbHBlci5vbk5leHRUcmFuc2l0aW9uRW5kKHRoaXMuY29tcG9uZW50LCAoKSA9PiB0aGlzLnNob3coY2FsbGJhY2spKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5fdmlzaWJsZSA9IHRydWU7XHJcbiAgICAgICAgICAgIHRoaXMuX2FuaW1hdGluZyA9IFN0eWxlSGVscGVyLnRyYW5zaXRpb25zU3VwcG9ydGVkO1xyXG5cclxuXHJcbiAgICAgICAgICAgIHRoaXMub25TaG93KCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB0aGlzLnNldFZpc2libGVTdHlsaW5nKHRydWUpO1xyXG5cclxuICAgICAgICAgICAgU3R5bGVIZWxwZXIudHJpZ2dlclJlZmxvdyh0aGlzLmNvbXBvbmVudCk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLm9uRGlzcGxheSgpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5jYWxsV2hlbkRvbmVBbmltYXRpbmcoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vblNob3duKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBjYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJylcclxuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjay5jYWxsKHRoaXMpO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuY29tcG9uZW50LmNsYXNzTGlzdC5hZGQoJ2luJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEFuaW1hdGUgdGhlIGNvbXBvbmVudCBvdXQgb2YgdGhlIHZpZXdcclxuICAgICAgICAgKi9cclxuICAgICAgICBoaWRlKGNhbGxiYWNrPzoodGhpczp0aGlzKT0+dm9pZCkge1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuY29tcG9uZW50LmNsYXNzTGlzdC5jb250YWlucygnaW4nKSkge1xyXG4gICAgICAgICAgICAgICAgLy8gQWxyZWFkeSBoaWRkZW5cclxuICAgICAgICAgICAgICAgIHRoaXMuX3Zpc2libGUgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGNhbGxiYWNrID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jYWxsV2hlbkRvbmVBbmltYXRpbmcoY2FsbGJhY2spO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMuX2FuaW1hdGluZykge1xyXG4gICAgICAgICAgICAgICAgLy8gVGhpcyB2aWV3IGlzIGFuaW1hdGluZyBpbiwgc2hvdyBpdCBhZnRlciBpdCdzIGRvbmVcclxuICAgICAgICAgICAgICAgIFN0eWxlSGVscGVyLm9uTmV4dFRyYW5zaXRpb25FbmQodGhpcy5jb21wb25lbnQsICgpID0+IHRoaXMuaGlkZShjYWxsYmFjaykpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLl92aXNpYmxlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHRoaXMuX2FuaW1hdGluZyA9IFN0eWxlSGVscGVyLnRyYW5zaXRpb25zU3VwcG9ydGVkO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgdGhpcy5vbkhpZGUoKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuY2FsbFdoZW5Eb25lQW5pbWF0aW5nKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMub25IaWRkZW4oKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGNhbGxiYWNrID09PSAnZnVuY3Rpb24nKVxyXG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrLmNhbGwodGhpcyk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5jb21wb25lbnQuY2xhc3NMaXN0LnJlbW92ZSgnaW4nKTtcclxuXHJcbiAgICAgICAgICAgIGlmICghU3R5bGVIZWxwZXIudHJhbnNpdGlvbnNTdXBwb3J0ZWQpXHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldFZpc2libGVTdHlsaW5nKGZhbHNlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEhpZGUgY29tcG9uZW50cyBhZnRlciB0cmFuc2l0aW9uIG91dFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIG9uVHJhbnNpdGlvbkVuZCgpIHtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLmNvbXBvbmVudC5jbGFzc0xpc3QuY29udGFpbnMoJ2luJykpXHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldFZpc2libGVTdHlsaW5nKGZhbHNlKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuX2FuaW1hdGluZyA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSJdfQ==

var _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"]) _i["return"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError("Invalid attempt to destructure non-iterable instance"); } }; }();

var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var RideStylerShowcase;
(function (RideStylerShowcase) {
    var defaultSize = {
        width: 200,
        height: 200
    };
    var minimumSize = {
        width: 50,
        height: 50
    };
    var maximumSize = {
        width: 800,
        height: 800
    };
    var defaultPosition = {
        PositionY: 0 /* Near */
        , PositionX: 0 /* Near */ // Left
    };

    var ResizeableResourceImage = function () {
        /**
         * @param container The container to render the image in
         * @param options
         */
        function ResizeableResourceImage(container, options) {
            var _this = this;

            _classCallCheck(this, ResizeableResourceImage);

            this.resizeCallback = function () {
                _this.update();
            };
            this.container = container;
            this.action = options.action;
            this.image = document.createElement('img');
            this.container.appendChild(this.image);
            this.events = [];
            if (options.transitionClass) {
                this.image.classList.add(options.transitionClass);
                this.useTransitions = true;
            }
            this.transitionInClass = options.transitionInClass;
            if (typeof options.padding === 'undefined') this.padding = RideStylerShowcase.StyleHelper.calculatePadding;else if (options.padding === false) this.padding = { width: 0, height: 0 };else this.padding = options.padding;
            this.imageLoadCallback = options.onLoad;
            this.imageErrorCallback = options.onError;
            this.image.addEventListener('error', function (error) {
                return _this.onImageError(error);
            });
            this.image.addEventListener('load', function (event) {
                return _this.onImageLoad(event);
            });
            if (_typeof(options.baseInstructions) === 'object') this.baseInstructions = options.baseInstructions;
            if (this.instructions && options.loadInitially !== false) this.update(this.instructions);
            if (options.listenToWindowResize !== false) {
                var timeout = void 0;
                var waitMs = 500;
                var resizeCallback = function resizeCallback() {
                    clearTimeout(timeout);
                    timeout = setTimeout(function () {
                        _this.update();
                    }, waitMs);
                };
                window.addEventListener('resize', resizeCallback, false);
                this.events.push([window, 'resize', resizeCallback]);
            }
        }
        /**
         * Call this function after the component will no longer be used
         * to remove any internally attached event handlers
         */


        _createClass(ResizeableResourceImage, [{
            key: 'destroy',
            value: function destroy() {
                var _iteratorNormalCompletion = true;
                var _didIteratorError = false;
                var _iteratorError = undefined;

                try {
                    for (var _iterator = this.events[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
                        var registeredEvent = _step.value;

                        var _registeredEvent = _slicedToArray(registeredEvent, 3),
                            target = _registeredEvent[0],
                            eventType = _registeredEvent[1],
                            listener = _registeredEvent[2];

                        target.removeEventListener(eventType, listener);
                    }
                } catch (err) {
                    _didIteratorError = true;
                    _iteratorError = err;
                } finally {
                    try {
                        if (!_iteratorNormalCompletion && _iterator.return) {
                            _iterator.return();
                        }
                    } finally {
                        if (_didIteratorError) {
                            throw _iteratorError;
                        }
                    }
                }
            }
            /**
             * Attached to the image error event
             * @param errorEvent The error event
             */

        }, {
            key: 'onImageError',
            value: function onImageError(errorEvent) {
                if (typeof this.imageErrorCallback === 'function') this.imageErrorCallback(this.image, errorEvent);
            }
            /**
             * Attached to the image load event
             * @param event The image load event
             */

        }, {
            key: 'onImageLoad',
            value: function onImageLoad(event) {
                if (typeof this.imageLoadCallback === 'function') this.imageLoadCallback(this.image, event);
                if (!this.visible) this.show();
            }
            /**
             * Show the image
             */

        }, {
            key: 'show',
            value: function show() {
                var _this2 = this;

                if (this.visible) return;
                if (this.useTransitions) {
                    RideStylerShowcase.VisibilityHelper.show(this.image, this.transitionInClass).done(function () {
                        if (typeof _this2.imageDisplayCallback === 'function') _this2.imageDisplayCallback(_this2.image);
                    });
                }
                this.visible = true;
            }
            /**
             * Calculate the size of the image from the container
             */

        }, {
            key: 'calculateRenderSize',
            value: function calculateRenderSize() {
                // Grab the size of the container
                var _container = this.container,
                    clientWidth = _container.clientWidth,
                    clientHeight = _container.clientHeight;
                // Return default size if the container was not able to be detected

                if (!clientHeight || !clientWidth) return defaultSize;
                // Grab the padding size
                var padding = typeof this.padding === 'function' ? this.padding(this.container) : this.padding;
                // The detected size of the container minus padding
                var detectedSize = {
                    width: clientWidth - padding.width,
                    height: clientHeight - padding.height
                };
                // Get the pixel ratio for retina screens
                var pixelRatio = window.devicePixelRatio || 1;
                // Adjust the detected size to account for pixel ratio
                detectedSize.width *= pixelRatio;
                detectedSize.height *= pixelRatio;
                return RideStylerShowcase.BoxHelper.floor(RideStylerShowcase.BoxHelper.bound(detectedSize, minimumSize, maximumSize));
            }
        }, {
            key: 'sizeIsDifferent',
            value: function sizeIsDifferent(box) {
                if (!this.currentSize) return true;
                var _currentSize = this.currentSize,
                    thisWidth = _currentSize.width,
                    thisHeight = _currentSize.height;
                var boxWidth = box.width,
                    boxHeight = box.height;

                return thisWidth !== boxWidth || thisHeight !== boxHeight;
            }
            /**
             * Update or create the image
             * @param instructions New instructions to render the image with
             */

        }, {
            key: 'update',
            value: function update(instructions) {
                var needsUpdate = false;
                // Update instructions
                if (instructions && this.instructions !== instructions) {
                    this.instructions = instructions;
                    needsUpdate = true;
                }
                // Update size
                {
                    var renderSize = this.calculateRenderSize();
                    if (this.sizeIsDifferent(renderSize)) {
                        this.currentSize = renderSize;
                        needsUpdate = true;
                    }
                }
                if (needsUpdate) {
                    var _currentSize2 = this.currentSize,
                        width = _currentSize2.width,
                        height = _currentSize2.height;

                    this.image.src = ridestyler.ajax.url(this.action, RideStylerShowcase.ObjectHelper.assign({
                        Width: width,
                        Height: height
                    }, defaultPosition, this.baseInstructions, this.instructions));
                }
            }
        }]);

        return ResizeableResourceImage;
    }();

    RideStylerShowcase.ResizeableResourceImage = ResizeableResourceImage;
})(RideStylerShowcase || (RideStylerShowcase = {}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvUmVzaXplYWJsZVJlc291cmNlSW1hZ2UudHMiXSwibmFtZXMiOlsiUmlkZVN0eWxlclNob3djYXNlIiwiZGVmYXVsdFNpemUiLCJ3aWR0aCIsImhlaWdodCIsIm1pbmltdW1TaXplIiwibWF4aW11bVNpemUiLCJkZWZhdWx0UG9zaXRpb24iLCJQb3NpdGlvblkiLCJQb3NpdGlvblgiLCJSZXNpemVhYmxlUmVzb3VyY2VJbWFnZSIsImNvbnRhaW5lciIsIm9wdGlvbnMiLCJyZXNpemVDYWxsYmFjayIsInVwZGF0ZSIsImFjdGlvbiIsImltYWdlIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiYXBwZW5kQ2hpbGQiLCJldmVudHMiLCJ0cmFuc2l0aW9uQ2xhc3MiLCJjbGFzc0xpc3QiLCJhZGQiLCJ1c2VUcmFuc2l0aW9ucyIsInRyYW5zaXRpb25JbkNsYXNzIiwicGFkZGluZyIsIlN0eWxlSGVscGVyIiwiY2FsY3VsYXRlUGFkZGluZyIsImltYWdlTG9hZENhbGxiYWNrIiwib25Mb2FkIiwiaW1hZ2VFcnJvckNhbGxiYWNrIiwib25FcnJvciIsImFkZEV2ZW50TGlzdGVuZXIiLCJvbkltYWdlRXJyb3IiLCJlcnJvciIsIm9uSW1hZ2VMb2FkIiwiZXZlbnQiLCJiYXNlSW5zdHJ1Y3Rpb25zIiwiaW5zdHJ1Y3Rpb25zIiwibG9hZEluaXRpYWxseSIsImxpc3RlblRvV2luZG93UmVzaXplIiwidGltZW91dCIsIndhaXRNcyIsImNsZWFyVGltZW91dCIsInNldFRpbWVvdXQiLCJ3aW5kb3ciLCJwdXNoIiwicmVnaXN0ZXJlZEV2ZW50IiwidGFyZ2V0IiwiZXZlbnRUeXBlIiwibGlzdGVuZXIiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZXJyb3JFdmVudCIsInZpc2libGUiLCJzaG93IiwiVmlzaWJpbGl0eUhlbHBlciIsImRvbmUiLCJpbWFnZURpc3BsYXlDYWxsYmFjayIsImNsaWVudFdpZHRoIiwiY2xpZW50SGVpZ2h0IiwiZGV0ZWN0ZWRTaXplIiwicGl4ZWxSYXRpbyIsImRldmljZVBpeGVsUmF0aW8iLCJCb3hIZWxwZXIiLCJmbG9vciIsImJvdW5kIiwiYm94IiwiY3VycmVudFNpemUiLCJ0aGlzV2lkdGgiLCJ0aGlzSGVpZ2h0IiwiYm94V2lkdGgiLCJib3hIZWlnaHQiLCJuZWVkc1VwZGF0ZSIsInJlbmRlclNpemUiLCJjYWxjdWxhdGVSZW5kZXJTaXplIiwic2l6ZUlzRGlmZmVyZW50Iiwic3JjIiwicmlkZXN0eWxlciIsImFqYXgiLCJ1cmwiLCJPYmplY3RIZWxwZXIiLCJhc3NpZ24iLCJXaWR0aCIsIkhlaWdodCJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQSxJQUFVQSxrQkFBVjtBQUFBLENBQUEsVUFBVUEsa0JBQVYsRUFBNEI7QUFHeEIsUUFBTUMsY0FBa0I7QUFDcEJDLGVBQU8sR0FEYTtBQUVwQkMsZ0JBQVE7QUFGWSxLQUF4QjtBQUtBLFFBQU1DLGNBQWtCO0FBQ3BCRixlQUFPLEVBRGE7QUFFcEJDLGdCQUFRO0FBRlksS0FBeEI7QUFLQSxRQUFNRSxjQUFrQjtBQUNwQkgsZUFBTyxHQURhO0FBRXBCQyxnQkFBUTtBQUZZLEtBQXhCO0FBS0EsUUFBTUcsa0JBQXlEO0FBQzNEQyxtQkFBUyxDQURrRCxDQUNsRDtBQURrRCxVQUUzREMsV0FBUyxDQUZrRCxDQUVsRCxVQUZrRCxDQUVSO0FBRlEsS0FBL0Q7O0FBbEJ3QixRQXVCeEJDLHVCQXZCd0I7QUFnR3BCOzs7O0FBSUEseUNBQVlDLFNBQVosRUFBbUNDLE9BQW5DLEVBdUVDO0FBQUE7O0FBQUE7O0FBNkRPLGlCQUFBQyxjQUFBLEdBQWlCLFlBQUs7QUFDMUIsc0JBQUtDLE1BQUw7QUFDSCxhQUZPO0FBNURKLGlCQUFLSCxTQUFMLEdBQWlCQSxTQUFqQjtBQUVBLGlCQUFLSSxNQUFMLEdBQWNILFFBQVFHLE1BQXRCO0FBRUEsaUJBQUtDLEtBQUwsR0FBYUMsU0FBU0MsYUFBVCxDQUF1QixLQUF2QixDQUFiO0FBQ0EsaUJBQUtQLFNBQUwsQ0FBZVEsV0FBZixDQUEyQixLQUFLSCxLQUFoQztBQUVBLGlCQUFLSSxNQUFMLEdBQWMsRUFBZDtBQUVBLGdCQUFJUixRQUFRUyxlQUFaLEVBQTZCO0FBQ3pCLHFCQUFLTCxLQUFMLENBQVdNLFNBQVgsQ0FBcUJDLEdBQXJCLENBQXlCWCxRQUFRUyxlQUFqQztBQUNBLHFCQUFLRyxjQUFMLEdBQXNCLElBQXRCO0FBQ0g7QUFFRCxpQkFBS0MsaUJBQUwsR0FBeUJiLFFBQVFhLGlCQUFqQztBQUVBLGdCQUFJLE9BQU9iLFFBQVFjLE9BQWYsS0FBMkIsV0FBL0IsRUFBNEMsS0FBS0EsT0FBTCxHQUFlekIsbUJBQUEwQixXQUFBLENBQVlDLGdCQUEzQixDQUE1QyxLQUNLLElBQUloQixRQUFRYyxPQUFSLEtBQW9CLEtBQXhCLEVBQStCLEtBQUtBLE9BQUwsR0FBZSxFQUFDdkIsT0FBTyxDQUFSLEVBQVdDLFFBQVEsQ0FBbkIsRUFBZixDQUEvQixLQUNBLEtBQUtzQixPQUFMLEdBQWVkLFFBQVFjLE9BQXZCO0FBRUwsaUJBQUtHLGlCQUFMLEdBQXlCakIsUUFBUWtCLE1BQWpDO0FBQ0EsaUJBQUtDLGtCQUFMLEdBQTBCbkIsUUFBUW9CLE9BQWxDO0FBRUEsaUJBQUtoQixLQUFMLENBQVdpQixnQkFBWCxDQUE0QixPQUE1QixFQUFxQztBQUFBLHVCQUFTLE1BQUtDLFlBQUwsQ0FBa0JDLEtBQWxCLENBQVQ7QUFBQSxhQUFyQztBQUNBLGlCQUFLbkIsS0FBTCxDQUFXaUIsZ0JBQVgsQ0FBNEIsTUFBNUIsRUFBb0M7QUFBQSx1QkFBUyxNQUFLRyxXQUFMLENBQWlCQyxLQUFqQixDQUFUO0FBQUEsYUFBcEM7QUFFQSxnQkFBSSxRQUFPekIsUUFBUTBCLGdCQUFmLE1BQW9DLFFBQXhDLEVBQWtELEtBQUtBLGdCQUFMLEdBQXdCMUIsUUFBUTBCLGdCQUFoQztBQUVsRCxnQkFBSSxLQUFLQyxZQUFMLElBQXFCM0IsUUFBUTRCLGFBQVIsS0FBMEIsS0FBbkQsRUFDSSxLQUFLMUIsTUFBTCxDQUFZLEtBQUt5QixZQUFqQjtBQUVKLGdCQUFJM0IsUUFBUTZCLG9CQUFSLEtBQWlDLEtBQXJDLEVBQTRDO0FBQ3hDLG9CQUFJQyxnQkFBSjtBQUNBLG9CQUFNQyxTQUFTLEdBQWY7QUFFQSxvQkFBTTlCLGlCQUFpQixTQUFqQkEsY0FBaUIsR0FBSztBQUN4QitCLGlDQUFhRixPQUFiO0FBRUFBLDhCQUFVRyxXQUFXLFlBQUs7QUFDdEIsOEJBQUsvQixNQUFMO0FBQ0gscUJBRlMsRUFFUDZCLE1BRk8sQ0FBVjtBQUdILGlCQU5EO0FBUUFHLHVCQUFPYixnQkFBUCxDQUF3QixRQUF4QixFQUFrQ3BCLGNBQWxDLEVBQWtELEtBQWxEO0FBQ0EscUJBQUtPLE1BQUwsQ0FBWTJCLElBQVosQ0FBaUIsQ0FBQ0QsTUFBRCxFQUFTLFFBQVQsRUFBbUJqQyxjQUFuQixDQUFqQjtBQUNIO0FBQ0o7QUFFRDs7Ozs7O0FBNU5vQjtBQUFBO0FBQUEsc0NBZ09OO0FBQUE7QUFBQTtBQUFBOztBQUFBO0FBQ1YseUNBQThCLEtBQUtPLE1BQW5DLDhIQUEyQztBQUFBLDRCQUFoQzRCLGVBQWdDOztBQUFBLDhEQUNIQSxlQURHO0FBQUEsNEJBQ2xDQyxNQURrQztBQUFBLDRCQUMxQkMsU0FEMEI7QUFBQSw0QkFDZkMsUUFEZTs7QUFHdkNGLCtCQUFPRyxtQkFBUCxDQUEyQkYsU0FBM0IsRUFBc0NDLFFBQXRDO0FBQ0g7QUFMUztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBTWI7QUFNRDs7Ozs7QUE1T29CO0FBQUE7QUFBQSx5Q0FnUENFLFVBaFBELEVBZ1BzQjtBQUN0QyxvQkFBSSxPQUFPLEtBQUt0QixrQkFBWixLQUFtQyxVQUF2QyxFQUNJLEtBQUtBLGtCQUFMLENBQXdCLEtBQUtmLEtBQTdCLEVBQW9DcUMsVUFBcEM7QUFDUDtBQUVEOzs7OztBQXJQb0I7QUFBQTtBQUFBLHdDQXlQQWhCLEtBelBBLEVBeVBXO0FBQzNCLG9CQUFJLE9BQU8sS0FBS1IsaUJBQVosS0FBa0MsVUFBdEMsRUFDSSxLQUFLQSxpQkFBTCxDQUF1QixLQUFLYixLQUE1QixFQUFtQ3FCLEtBQW5DO0FBRUosb0JBQUksQ0FBQyxLQUFLaUIsT0FBVixFQUFtQixLQUFLQyxJQUFMO0FBQ3RCO0FBRUQ7Ozs7QUFoUW9CO0FBQUE7QUFBQSxtQ0FtUVI7QUFBQTs7QUFDUixvQkFBSSxLQUFLRCxPQUFULEVBQWtCO0FBRWxCLG9CQUFJLEtBQUs5QixjQUFULEVBQXlCO0FBQ3JCdkIsdUNBQUF1RCxnQkFBQSxDQUFpQkQsSUFBakIsQ0FBc0IsS0FBS3ZDLEtBQTNCLEVBQWtDLEtBQUtTLGlCQUF2QyxFQUEwRGdDLElBQTFELENBQStELFlBQUs7QUFDaEUsNEJBQUksT0FBTyxPQUFLQyxvQkFBWixLQUFxQyxVQUF6QyxFQUNJLE9BQUtBLG9CQUFMLENBQTBCLE9BQUsxQyxLQUEvQjtBQUNQLHFCQUhEO0FBSUg7QUFFRCxxQkFBS3NDLE9BQUwsR0FBZSxJQUFmO0FBQ0g7QUFFRDs7OztBQWhSb0I7QUFBQTtBQUFBLGtEQW1STztBQUN2QjtBQUR1QixpQ0FFVyxLQUFLM0MsU0FGaEI7QUFBQSxvQkFFbEJnRCxXQUZrQixjQUVsQkEsV0FGa0I7QUFBQSxvQkFFTEMsWUFGSyxjQUVMQSxZQUZLO0FBSXZCOztBQUNBLG9CQUFJLENBQUNBLFlBQUQsSUFBaUIsQ0FBQ0QsV0FBdEIsRUFBbUMsT0FBT3pELFdBQVA7QUFFbkM7QUFDQSxvQkFBSXdCLFVBQXNDLE9BQU8sS0FBS0EsT0FBWixLQUF3QixVQUF4QixHQUN0QyxLQUFLQSxPQUFMLENBQWEsS0FBS2YsU0FBbEIsQ0FEc0MsR0FFdEMsS0FBS2UsT0FGVDtBQUlBO0FBQ0Esb0JBQUltQyxlQUFtQjtBQUNuQjFELDJCQUFPd0QsY0FBY2pDLFFBQVF2QixLQURWO0FBRW5CQyw0QkFBUXdELGVBQWVsQyxRQUFRdEI7QUFGWixpQkFBdkI7QUFLQTtBQUNBLG9CQUFJMEQsYUFBYWhCLE9BQU9pQixnQkFBUCxJQUEyQixDQUE1QztBQUVBO0FBQ0FGLDZCQUFhMUQsS0FBYixJQUFzQjJELFVBQXRCO0FBQ0FELDZCQUFhekQsTUFBYixJQUF1QjBELFVBQXZCO0FBRUEsdUJBQU83RCxtQkFBQStELFNBQUEsQ0FBVUMsS0FBVixDQUFnQmhFLG1CQUFBK0QsU0FBQSxDQUFVRSxLQUFWLENBQWdCTCxZQUFoQixFQUE4QnhELFdBQTlCLEVBQTJDQyxXQUEzQyxDQUFoQixDQUFQO0FBQ0g7QUE3U21CO0FBQUE7QUFBQSw0Q0ErU0k2RCxHQS9TSixFQStTb0M7QUFDcEQsb0JBQUksQ0FBQyxLQUFLQyxXQUFWLEVBQXVCLE9BQU8sSUFBUDtBQUQ2QixtQ0FNaEQsS0FBS0EsV0FOMkM7QUFBQSxvQkFJekNDLFNBSnlDLGdCQUloRGxFLEtBSmdEO0FBQUEsb0JBS3hDbUUsVUFMd0MsZ0JBS2hEbEUsTUFMZ0Q7QUFBQSxvQkFTekNtRSxRQVR5QyxHQVdoREosR0FYZ0QsQ0FTaERoRSxLQVRnRDtBQUFBLG9CQVV4Q3FFLFNBVndDLEdBV2hETCxHQVhnRCxDQVVoRC9ELE1BVmdEOztBQWFwRCx1QkFBT2lFLGNBQWNFLFFBQWQsSUFBMEJELGVBQWVFLFNBQWhEO0FBQ0g7QUFFRDs7Ozs7QUEvVG9CO0FBQUE7QUFBQSxtQ0FtVU5qQyxZQW5VTSxFQW1Va0M7QUFDbEQsb0JBQUlrQyxjQUFzQixLQUExQjtBQUVBO0FBQ0Esb0JBQUlsQyxnQkFBZ0IsS0FBS0EsWUFBTCxLQUFzQkEsWUFBMUMsRUFBd0Q7QUFDcEQseUJBQUtBLFlBQUwsR0FBb0JBLFlBQXBCO0FBQ0FrQyxrQ0FBYyxJQUFkO0FBQ0g7QUFFRDtBQUNBO0FBQ0ksd0JBQUlDLGFBQWlCLEtBQUtDLG1CQUFMLEVBQXJCO0FBRUEsd0JBQUksS0FBS0MsZUFBTCxDQUFxQkYsVUFBckIsQ0FBSixFQUFzQztBQUNsQyw2QkFBS04sV0FBTCxHQUFtQk0sVUFBbkI7QUFDQUQsc0NBQWMsSUFBZDtBQUNIO0FBQ0o7QUFFRCxvQkFBSUEsV0FBSixFQUFpQjtBQUFBLHdDQUNTLEtBQUtMLFdBRGQ7QUFBQSx3QkFDUmpFLEtBRFEsaUJBQ1JBLEtBRFE7QUFBQSx3QkFDREMsTUFEQyxpQkFDREEsTUFEQzs7QUFHYix5QkFBS1ksS0FBTCxDQUFXNkQsR0FBWCxHQUFpQkMsV0FBV0MsSUFBWCxDQUFnQkMsR0FBaEIsQ0FBb0IsS0FBS2pFLE1BQXpCLEVBQWlDZCxtQkFBQWdGLFlBQUEsQ0FBYUMsTUFBYixDQUFvQjtBQUNsRUMsK0JBQU9oRixLQUQyRDtBQUVsRWlGLGdDQUFRaEY7QUFGMEQscUJBQXBCLEVBRy9DRyxlQUgrQyxFQUc5QixLQUFLK0IsZ0JBSHlCLEVBR1AsS0FBS0MsWUFIRSxDQUFqQyxDQUFqQjtBQUlIO0FBQ0o7QUE5Vm1COztBQUFBO0FBQUE7O0FBdUJYdEMsdUJBQUFTLHVCQUFBLEdBQXVCQSx1QkFBdkI7QUFnV2hCLENBdlhELEVBQVVULHVCQUFBQSxxQkFBa0IsRUFBbEIsQ0FBViIsImZpbGUiOiJzY3JpcHRzL2NvbXBvbmVudHMvUmVzaXplYWJsZVJlc291cmNlSW1hZ2UuanMiLCJzb3VyY2VzQ29udGVudCI6WyJuYW1lc3BhY2UgUmlkZVN0eWxlclNob3djYXNlIHtcbiAgICBpbXBvcnQgQm94ID0gUmVzaXplYWJsZVJlc291cmNlSW1hZ2UuQm94O1xuXG4gICAgY29uc3QgZGVmYXVsdFNpemU6Qm94ID0ge1xuICAgICAgICB3aWR0aDogMjAwLFxuICAgICAgICBoZWlnaHQ6IDIwMFxuICAgIH07XG5cbiAgICBjb25zdCBtaW5pbXVtU2l6ZTpCb3ggPSB7XG4gICAgICAgIHdpZHRoOiA1MCxcbiAgICAgICAgaGVpZ2h0OiA1MFxuICAgIH07XG5cbiAgICBjb25zdCBtYXhpbXVtU2l6ZTpCb3ggPSB7XG4gICAgICAgIHdpZHRoOiA4MDAsXG4gICAgICAgIGhlaWdodDogODAwXG4gICAgfTtcblxuICAgIGNvbnN0IGRlZmF1bHRQb3NpdGlvbjpyaWRlc3R5bGVyLlJlcXVlc3RzLkltYWdlUmVuZGVyUmVxdWVzdCA9IHtcbiAgICAgICAgUG9zaXRpb25ZOiByaWRlc3R5bGVyLlJlcXVlc3RzLkltYWdlUG9zaXRpb24uTmVhciwgLy8gVG9wLFxuICAgICAgICBQb3NpdGlvblg6IHJpZGVzdHlsZXIuUmVxdWVzdHMuSW1hZ2VQb3NpdGlvbi5OZWFyICAvLyBMZWZ0XG4gICAgfVxuXG4gICAgZXhwb3J0IGNsYXNzIFJlc2l6ZWFibGVSZXNvdXJjZUltYWdlPFxuICAgICAgICBFbmRwb2ludCBleHRlbmRzIHJpZGVzdHlsZXIuUmlkZVN0eWxlckFQSUVuZHBvaW50LFxuICAgICAgICBJbWFnZVJlbmRlcmluZ0luc3RydWN0aW9ucyBleHRlbmRzIHJpZGVzdHlsZXIuUmlkZXN0eWxlckFQSUFjdGlvblJlcXVlc3RNYXBwaW5nW0VuZHBvaW50XXxyaWRlc3R5bGVyLlJlcXVlc3RzLkltYWdlUmVuZGVyUmVxdWVzdFxuICAgICAgICAgICAgID0gcmlkZXN0eWxlci5SaWRlc3R5bGVyQVBJQWN0aW9uUmVxdWVzdE1hcHBpbmdbRW5kcG9pbnRdXG4gICAgPiB7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBib3VuZGluZyBjb250YWluZXIgZm9yIHRoZSBpbWFnZVxuICAgICAgICAgKi9cbiAgICAgICAgcHJpdmF0ZSByZWFkb25seSBjb250YWluZXI6SFRNTEVsZW1lbnQ7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBpbWFnZVxuICAgICAgICAgKi9cbiAgICAgICAgcHVibGljIHJlYWRvbmx5IGltYWdlOkhUTUxJbWFnZUVsZW1lbnQ7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBjdXJyZW50bHkgZGV0ZWN0ZWQgc2l6ZSBvZiB0aGUgY29udGFpbmVyXG4gICAgICAgICAqL1xuICAgICAgICBwcml2YXRlIGN1cnJlbnRTaXplOkJveDtcblxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIFJpZGVTdHlsZXIgQVBJIGFjdGlvbiB0byBjYWxsIHRvIHJlbmRlciB0aGUgaW1hZ2VcbiAgICAgICAgICovXG4gICAgICAgIHByaXZhdGUgcmVhZG9ubHkgYWN0aW9uOkVuZHBvaW50O1xuICAgICAgICBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgc2V0IG9mIGJhc2UgaW5zdHJ1Y3Rpb25zIHRvIHJlbmRlciB0aGUgdmVoaWNsZSB3aXRoXG4gICAgICAgICAqL1xuICAgICAgICBwcml2YXRlIGJhc2VJbnN0cnVjdGlvbnM6SW1hZ2VSZW5kZXJpbmdJbnN0cnVjdGlvbnM7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBjdXJyZW50IGluc3RydWN0aW9ucy9wYXJhbWV0ZXJzIHRvIHJlbmRlciB0aGUgaW1hZ2Ugd2l0aFxuICAgICAgICAgKi9cbiAgICAgICAgcHJpdmF0ZSBpbnN0cnVjdGlvbnM6SW1hZ2VSZW5kZXJpbmdJbnN0cnVjdGlvbnM7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIElmIHRydWUgdGhlIGltYWdlIGlzIHZpc2libGUgKG9yIHRyYW5zaXRpb25pbmcgdG8gYmUgdmlzaWJsZSlcbiAgICAgICAgICovXG4gICAgICAgIHByaXZhdGUgdmlzaWJsZTpib29sZWFuO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJZiB0cnVlLCB0cmFuc2l0aW9ucyBzaG91bGQgYmUgdXNlZFxuICAgICAgICAgKi9cbiAgICAgICAgcHJpdmF0ZSByZWFkb25seSB1c2VUcmFuc2l0aW9uczpib29sZWFuO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgY2xhc3MgdG8gYXR0YWNoIHRvIHRoZSBlbGVtZW50IHRvIHNob3cgaXQgd2l0aCBhIHRyYW5zaXRpb25cbiAgICAgICAgICovXG4gICAgICAgIHByaXZhdGUgcmVhZG9ubHkgdHJhbnNpdGlvbkluQ2xhc3M6c3RyaW5nO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIGNhbGxiYWNrIHRvIGF0dGFjaCB0byB0aGUgaW1hZ2UgbG9hZCBldmVudFxuICAgICAgICAgKi9cbiAgICAgICAgcHJpdmF0ZSByZWFkb25seSBpbWFnZUxvYWRDYWxsYmFjazpSZXNpemVhYmxlUmVzb3VyY2VJbWFnZS5JbWFnZUxvYWRDYWxsYmFjaztcblxuICAgICAgICAvKipcbiAgICAgICAgICogQSBjYWxsYmFjayB0byBhdHRhY2ggdG8gdGhlIGltYWdlIGVycm9yIGV2ZW50XG4gICAgICAgICAqL1xuICAgICAgICBwcml2YXRlIHJlYWRvbmx5IGltYWdlRXJyb3JDYWxsYmFjazpSZXNpemVhYmxlUmVzb3VyY2VJbWFnZS5JbWFnZUVycm9yQ2FsbGJhY2s7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgY2FsbGJhY2sgdG8gY2FsbCB3aGVuIHRoZSBpbWFnZSBpcyBkaXNwbGF5ZWRcbiAgICAgICAgICovXG4gICAgICAgIHByaXZhdGUgcmVhZG9ubHkgaW1hZ2VEaXNwbGF5Q2FsbGJhY2s6UmVzaXplYWJsZVJlc291cmNlSW1hZ2UuSW1hZ2VFdmVudENhbGxiYWNrO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgcGFkZGluZyBvZiB0aGUgY29udGFpbmVyIG9yIHBhZGRpbmcgY2FsY3VsYXRvclxuICAgICAgICAgKi9cbiAgICAgICAgcHJpdmF0ZSByZWFkb25seSBwYWRkaW5nOiBCb3h8UmVzaXplYWJsZVJlc291cmNlSW1hZ2UuUGFkZGluZ0NhbGN1bGF0b3I7XG5cbiAgICAgICAgcHJpdmF0ZSByZWFkb25seSBldmVudHM6W0V2ZW50VGFyZ2V0LHN0cmluZyxFdmVudExpc3RlbmVyXVtdO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcGFyYW0gY29udGFpbmVyIFRoZSBjb250YWluZXIgdG8gcmVuZGVyIHRoZSBpbWFnZSBpblxuICAgICAgICAgKiBAcGFyYW0gb3B0aW9uc1xuICAgICAgICAgKi9cbiAgICAgICAgY29uc3RydWN0b3IoY29udGFpbmVyOkhUTUxFbGVtZW50LCBvcHRpb25zOntcbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogVGhlIGltYWdlIGVuZHBvaW50XG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGFjdGlvbjogRW5kcG9pbnQsXG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogSW5zdHJ1Y3Rpb25zIGZvciByZW5kZXJpbmcgdGhlIGltYWdlXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGluc3RydWN0aW9ucz86IEltYWdlUmVuZGVyaW5nSW5zdHJ1Y3Rpb25zLFxuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIEJhc2UgaW5zdHJ1Y3Rpb25zIGZvciByZW5kZXJpbmcgdGhlIGltYWdlXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGJhc2VJbnN0cnVjdGlvbnM/OiBJbWFnZVJlbmRlcmluZ0luc3RydWN0aW9ucyxcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBJZiB0cnVlLCBsb2FkIHRoZSBpbWFnZSB3aGVuIGZpcnN0IGNyZWF0ZWRcbiAgICAgICAgICAgICAqIEBkZWZhdWx0IGZhbHNlXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGxvYWRJbml0aWFsbHk/OiBib29sZWFuO1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIElmIHRydWUsIGxpc3RlbiB0byB0aGUgd2luZG93IHJlc2l6ZSBldmVudFxuICAgICAgICAgICAgICogQGRlZmF1bHQgdHJ1ZVxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBsaXN0ZW5Ub1dpbmRvd1Jlc2l6ZT86IGJvb2xlYW47XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogQSBmdW5jdGlvbiB0byBjYWxsIGVhY2ggdGltZSB0aGUgaW1hZ2UgaXMgbG9hZGVkXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIG9uTG9hZD86IFJlc2l6ZWFibGVSZXNvdXJjZUltYWdlLkltYWdlTG9hZENhbGxiYWNrO1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIEEgZnVuY3Rpb24gdG8gY2FsbCB3aGVuIHRoZSBpbWFnZSBoYXMgYW4gZXJyb3IgbG9hZGluZ1xuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBvbkVycm9yPzogUmVzaXplYWJsZVJlc291cmNlSW1hZ2UuSW1hZ2VFcnJvckNhbGxiYWNrO1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIEEgZnVuY3Rpb24gdG8gY2FsbCB3aGVuIHRoZSBpbWFnZSBpcyBmdWxseSB2aXNpYmxlIChhZnRlciBhbnkgdHJhbnNpdGlvbnMpXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIG9uRGlzcGxheWVkPzogUmVzaXplYWJsZVJlc291cmNlSW1hZ2UuSW1hZ2VFdmVudENhbGxiYWNrO1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIFRoZSBwYWRkaW5nIGZvciB0aGUgY29udGFpbmVyIHRvIGRpc3BsYXkgdGhlIGltYWdlIGluLiBJZiBub3Qgc3BlY2lmaWVkXG4gICAgICAgICAgICAgKiBpdCB3aWxsIGJlIGNhbGN1bGF0ZWQuIElmIGZhbHNlIHBhZGRpbmcgd2lsbCBub3QgYmUgY2FsY3VsYXRlZC5cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgcGFkZGluZz86IGZhbHNlfFJlc2l6ZWFibGVSZXNvdXJjZUltYWdlLkJveHxSZXNpemVhYmxlUmVzb3VyY2VJbWFnZS5QYWRkaW5nQ2FsY3VsYXRvcjtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBJZiBzcGVjaWZpZWQgdXNlIHRoZSBmb2xsb3dpbmcgdHJhbnNpdGlvbiBjbGFzcyB0byBkaXNwbGF5IHRoZSBpbWFnZS5cbiAgICAgICAgICAgICAqIElmIHVuc3BlY2lmaWVkIGRvbid0IHVzZSB0cmFuc2l0aW9uc1xuICAgICAgICAgICAgICogQGRlZmF1bHQgdW5kZWZpbmVkXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIHRyYW5zaXRpb25DbGFzcz86IHN0cmluZztcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBUaGUgY2xhc3MgdG8gYXBwbHkgdG8gdGhlIGltYWdlIHRvIHRyYW5zaXRpb24gaXQgXCJpblwiXG4gICAgICAgICAgICAgKiBAZGVmYXVsdCBcImluXCJcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgdHJhbnNpdGlvbkluQ2xhc3M/OiBzdHJpbmc7XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogVGhlIGRlZmF1bHQgc2l6ZSBhdCB3aGljaCB0byByZW5kZXIgdGhlIGltYWdlIGlmIG9uZSBjYW5ub3RcbiAgICAgICAgICAgICAqIGJlIGNhbGN1bGF0ZWQgZnJvbSB0aGUgY29udGFpbmVyXG4gICAgICAgICAgICAgKiBAZGVmYXVsdCB7XCJ3aWR0aFwiOiAyMDAsIFwiaGVpZ2h0XCI6IDIwMH1cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgZGVmYXVsdFNpemU/OiB7XG4gICAgICAgICAgICAgICAgd2lkdGg6IG51bWJlcixcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IG51bWJlclxuICAgICAgICAgICAgfVxuICAgICAgICB9KSB7XG4gICAgICAgICAgICB0aGlzLmNvbnRhaW5lciA9IGNvbnRhaW5lcjtcblxuICAgICAgICAgICAgdGhpcy5hY3Rpb24gPSBvcHRpb25zLmFjdGlvbjtcblxuICAgICAgICAgICAgdGhpcy5pbWFnZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xuICAgICAgICAgICAgdGhpcy5jb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy5pbWFnZSk7XG5cbiAgICAgICAgICAgIHRoaXMuZXZlbnRzID0gW107XG5cbiAgICAgICAgICAgIGlmIChvcHRpb25zLnRyYW5zaXRpb25DbGFzcykge1xuICAgICAgICAgICAgICAgIHRoaXMuaW1hZ2UuY2xhc3NMaXN0LmFkZChvcHRpb25zLnRyYW5zaXRpb25DbGFzcyk7XG4gICAgICAgICAgICAgICAgdGhpcy51c2VUcmFuc2l0aW9ucyA9IHRydWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMudHJhbnNpdGlvbkluQ2xhc3MgPSBvcHRpb25zLnRyYW5zaXRpb25JbkNsYXNzO1xuXG4gICAgICAgICAgICBpZiAodHlwZW9mIG9wdGlvbnMucGFkZGluZyA9PT0gJ3VuZGVmaW5lZCcpIHRoaXMucGFkZGluZyA9IFN0eWxlSGVscGVyLmNhbGN1bGF0ZVBhZGRpbmc7XG4gICAgICAgICAgICBlbHNlIGlmIChvcHRpb25zLnBhZGRpbmcgPT09IGZhbHNlKSB0aGlzLnBhZGRpbmcgPSB7d2lkdGg6IDAsIGhlaWdodDogMH07XG4gICAgICAgICAgICBlbHNlIHRoaXMucGFkZGluZyA9IG9wdGlvbnMucGFkZGluZztcblxuICAgICAgICAgICAgdGhpcy5pbWFnZUxvYWRDYWxsYmFjayA9IG9wdGlvbnMub25Mb2FkO1xuICAgICAgICAgICAgdGhpcy5pbWFnZUVycm9yQ2FsbGJhY2sgPSBvcHRpb25zLm9uRXJyb3I7XG5cbiAgICAgICAgICAgIHRoaXMuaW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLCBlcnJvciA9PiB0aGlzLm9uSW1hZ2VFcnJvcihlcnJvcikpO1xuICAgICAgICAgICAgdGhpcy5pbWFnZS5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgZXZlbnQgPT4gdGhpcy5vbkltYWdlTG9hZChldmVudCkpO1xuXG4gICAgICAgICAgICBpZiAodHlwZW9mIG9wdGlvbnMuYmFzZUluc3RydWN0aW9ucyA9PT0gJ29iamVjdCcpIHRoaXMuYmFzZUluc3RydWN0aW9ucyA9IG9wdGlvbnMuYmFzZUluc3RydWN0aW9uc1xuXG4gICAgICAgICAgICBpZiAodGhpcy5pbnN0cnVjdGlvbnMgJiYgb3B0aW9ucy5sb2FkSW5pdGlhbGx5ICE9PSBmYWxzZSlcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZSh0aGlzLmluc3RydWN0aW9ucyk7XG5cbiAgICAgICAgICAgIGlmIChvcHRpb25zLmxpc3RlblRvV2luZG93UmVzaXplICE9PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIGxldCB0aW1lb3V0Om51bWJlcjtcbiAgICAgICAgICAgICAgICBjb25zdCB3YWl0TXMgPSA1MDA7XG4gICAgXG4gICAgICAgICAgICAgICAgY29uc3QgcmVzaXplQ2FsbGJhY2sgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcbiAgICBcbiAgICAgICAgICAgICAgICAgICAgdGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGUoKTtcbiAgICAgICAgICAgICAgICAgICAgfSwgd2FpdE1zKTtcbiAgICAgICAgICAgICAgICB9O1xuICAgIFxuICAgICAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCByZXNpemVDYWxsYmFjaywgZmFsc2UpO1xuICAgICAgICAgICAgICAgIHRoaXMuZXZlbnRzLnB1c2goW3dpbmRvdywgJ3Jlc2l6ZScsIHJlc2l6ZUNhbGxiYWNrXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogQ2FsbCB0aGlzIGZ1bmN0aW9uIGFmdGVyIHRoZSBjb21wb25lbnQgd2lsbCBubyBsb25nZXIgYmUgdXNlZFxuICAgICAgICAgKiB0byByZW1vdmUgYW55IGludGVybmFsbHkgYXR0YWNoZWQgZXZlbnQgaGFuZGxlcnNcbiAgICAgICAgICovXG4gICAgICAgIHB1YmxpYyBkZXN0cm95KCkge1xuICAgICAgICAgICAgZm9yIChjb25zdCByZWdpc3RlcmVkRXZlbnQgb2YgdGhpcy5ldmVudHMpIHtcbiAgICAgICAgICAgICAgICBsZXQgW3RhcmdldCwgZXZlbnRUeXBlLCBsaXN0ZW5lcl0gPSByZWdpc3RlcmVkRXZlbnQ7XG5cbiAgICAgICAgICAgICAgICB0YXJnZXQucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudFR5cGUsIGxpc3RlbmVyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHByaXZhdGUgcmVzaXplQ2FsbGJhY2sgPSAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEF0dGFjaGVkIHRvIHRoZSBpbWFnZSBlcnJvciBldmVudFxuICAgICAgICAgKiBAcGFyYW0gZXJyb3JFdmVudCBUaGUgZXJyb3IgZXZlbnRcbiAgICAgICAgICovXG4gICAgICAgIHByaXZhdGUgb25JbWFnZUVycm9yKGVycm9yRXZlbnQ6RXJyb3JFdmVudCkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiB0aGlzLmltYWdlRXJyb3JDYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJykgXG4gICAgICAgICAgICAgICAgdGhpcy5pbWFnZUVycm9yQ2FsbGJhY2sodGhpcy5pbWFnZSwgZXJyb3JFdmVudCk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogQXR0YWNoZWQgdG8gdGhlIGltYWdlIGxvYWQgZXZlbnRcbiAgICAgICAgICogQHBhcmFtIGV2ZW50IFRoZSBpbWFnZSBsb2FkIGV2ZW50XG4gICAgICAgICAqL1xuICAgICAgICBwcml2YXRlIG9uSW1hZ2VMb2FkKGV2ZW50OkV2ZW50KSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHRoaXMuaW1hZ2VMb2FkQ2FsbGJhY2sgPT09ICdmdW5jdGlvbicpIFxuICAgICAgICAgICAgICAgIHRoaXMuaW1hZ2VMb2FkQ2FsbGJhY2sodGhpcy5pbWFnZSwgZXZlbnQpO1xuXG4gICAgICAgICAgICBpZiAoIXRoaXMudmlzaWJsZSkgdGhpcy5zaG93KCk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogU2hvdyB0aGUgaW1hZ2VcbiAgICAgICAgICovXG4gICAgICAgIHByaXZhdGUgc2hvdygpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnZpc2libGUpIHJldHVybjtcblxuICAgICAgICAgICAgaWYgKHRoaXMudXNlVHJhbnNpdGlvbnMpIHtcbiAgICAgICAgICAgICAgICBWaXNpYmlsaXR5SGVscGVyLnNob3codGhpcy5pbWFnZSwgdGhpcy50cmFuc2l0aW9uSW5DbGFzcykuZG9uZSgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdGhpcy5pbWFnZURpc3BsYXlDYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJykgXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmltYWdlRGlzcGxheUNhbGxiYWNrKHRoaXMuaW1hZ2UpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLnZpc2libGUgPSB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENhbGN1bGF0ZSB0aGUgc2l6ZSBvZiB0aGUgaW1hZ2UgZnJvbSB0aGUgY29udGFpbmVyXG4gICAgICAgICAqL1xuICAgICAgICBwcml2YXRlIGNhbGN1bGF0ZVJlbmRlclNpemUoKTpCb3gge1xuICAgICAgICAgICAgLy8gR3JhYiB0aGUgc2l6ZSBvZiB0aGUgY29udGFpbmVyXG4gICAgICAgICAgICBsZXQge2NsaWVudFdpZHRoLCBjbGllbnRIZWlnaHR9ID0gdGhpcy5jb250YWluZXI7XG5cbiAgICAgICAgICAgIC8vIFJldHVybiBkZWZhdWx0IHNpemUgaWYgdGhlIGNvbnRhaW5lciB3YXMgbm90IGFibGUgdG8gYmUgZGV0ZWN0ZWRcbiAgICAgICAgICAgIGlmICghY2xpZW50SGVpZ2h0IHx8ICFjbGllbnRXaWR0aCkgcmV0dXJuIGRlZmF1bHRTaXplO1xuXG4gICAgICAgICAgICAvLyBHcmFiIHRoZSBwYWRkaW5nIHNpemVcbiAgICAgICAgICAgIGxldCBwYWRkaW5nOlJlc2l6ZWFibGVSZXNvdXJjZUltYWdlLkJveCA9IHR5cGVvZiB0aGlzLnBhZGRpbmcgPT09ICdmdW5jdGlvbicgPyBcbiAgICAgICAgICAgICAgICB0aGlzLnBhZGRpbmcodGhpcy5jb250YWluZXIpIDpcbiAgICAgICAgICAgICAgICB0aGlzLnBhZGRpbmc7XG5cbiAgICAgICAgICAgIC8vIFRoZSBkZXRlY3RlZCBzaXplIG9mIHRoZSBjb250YWluZXIgbWludXMgcGFkZGluZ1xuICAgICAgICAgICAgbGV0IGRldGVjdGVkU2l6ZTpCb3ggPSB7XG4gICAgICAgICAgICAgICAgd2lkdGg6IGNsaWVudFdpZHRoIC0gcGFkZGluZy53aWR0aCxcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IGNsaWVudEhlaWdodCAtIHBhZGRpbmcuaGVpZ2h0XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvLyBHZXQgdGhlIHBpeGVsIHJhdGlvIGZvciByZXRpbmEgc2NyZWVuc1xuICAgICAgICAgICAgbGV0IHBpeGVsUmF0aW8gPSB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyB8fCAxO1xuXG4gICAgICAgICAgICAvLyBBZGp1c3QgdGhlIGRldGVjdGVkIHNpemUgdG8gYWNjb3VudCBmb3IgcGl4ZWwgcmF0aW9cbiAgICAgICAgICAgIGRldGVjdGVkU2l6ZS53aWR0aCAqPSBwaXhlbFJhdGlvO1xuICAgICAgICAgICAgZGV0ZWN0ZWRTaXplLmhlaWdodCAqPSBwaXhlbFJhdGlvO1xuXG4gICAgICAgICAgICByZXR1cm4gQm94SGVscGVyLmZsb29yKEJveEhlbHBlci5ib3VuZChkZXRlY3RlZFNpemUsIG1pbmltdW1TaXplLCBtYXhpbXVtU2l6ZSkpO1xuICAgICAgICB9XG5cbiAgICAgICAgcHJpdmF0ZSBzaXplSXNEaWZmZXJlbnQoYm94OiBSZXNpemVhYmxlUmVzb3VyY2VJbWFnZS5Cb3gpOmJvb2xlYW4ge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmN1cnJlbnRTaXplKSByZXR1cm4gdHJ1ZTtcblxuICAgICAgICAgICAgbGV0IHtcbiAgICAgICAgICAgICAgICB3aWR0aDogdGhpc1dpZHRoLFxuICAgICAgICAgICAgICAgIGhlaWdodDogdGhpc0hlaWdodFxuICAgICAgICAgICAgfSA9IHRoaXMuY3VycmVudFNpemU7XG5cbiAgICAgICAgICAgIGxldCB7XG4gICAgICAgICAgICAgICAgd2lkdGg6IGJveFdpZHRoLFxuICAgICAgICAgICAgICAgIGhlaWdodDogYm94SGVpZ2h0XG4gICAgICAgICAgICB9ID0gYm94O1xuXG4gICAgICAgICAgICByZXR1cm4gdGhpc1dpZHRoICE9PSBib3hXaWR0aCB8fCB0aGlzSGVpZ2h0ICE9PSBib3hIZWlnaHQ7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogVXBkYXRlIG9yIGNyZWF0ZSB0aGUgaW1hZ2VcbiAgICAgICAgICogQHBhcmFtIGluc3RydWN0aW9ucyBOZXcgaW5zdHJ1Y3Rpb25zIHRvIHJlbmRlciB0aGUgaW1hZ2Ugd2l0aFxuICAgICAgICAgKi9cbiAgICAgICAgcHVibGljIHVwZGF0ZShpbnN0cnVjdGlvbnM/OkltYWdlUmVuZGVyaW5nSW5zdHJ1Y3Rpb25zKSB7XG4gICAgICAgICAgICBsZXQgbmVlZHNVcGRhdGU6Ym9vbGVhbiA9IGZhbHNlO1xuXG4gICAgICAgICAgICAvLyBVcGRhdGUgaW5zdHJ1Y3Rpb25zXG4gICAgICAgICAgICBpZiAoaW5zdHJ1Y3Rpb25zICYmIHRoaXMuaW5zdHJ1Y3Rpb25zICE9PSBpbnN0cnVjdGlvbnMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmluc3RydWN0aW9ucyA9IGluc3RydWN0aW9ucztcbiAgICAgICAgICAgICAgICBuZWVkc1VwZGF0ZSA9IHRydWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIFVwZGF0ZSBzaXplXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgbGV0IHJlbmRlclNpemU6Qm94ID0gdGhpcy5jYWxjdWxhdGVSZW5kZXJTaXplKCk7XG5cbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zaXplSXNEaWZmZXJlbnQocmVuZGVyU2l6ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50U2l6ZSA9IHJlbmRlclNpemU7XG4gICAgICAgICAgICAgICAgICAgIG5lZWRzVXBkYXRlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChuZWVkc1VwZGF0ZSkge1xuICAgICAgICAgICAgICAgIGxldCB7d2lkdGgsIGhlaWdodH0gPSB0aGlzLmN1cnJlbnRTaXplO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5pbWFnZS5zcmMgPSByaWRlc3R5bGVyLmFqYXgudXJsKHRoaXMuYWN0aW9uLCBPYmplY3RIZWxwZXIuYXNzaWduKHtcbiAgICAgICAgICAgICAgICAgICAgV2lkdGg6IHdpZHRoLFxuICAgICAgICAgICAgICAgICAgICBIZWlnaHQ6IGhlaWdodFxuICAgICAgICAgICAgICAgIH0sIGRlZmF1bHRQb3NpdGlvbiwgdGhpcy5iYXNlSW5zdHJ1Y3Rpb25zLCB0aGlzLmluc3RydWN0aW9ucykpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgZXhwb3J0IG5hbWVzcGFjZSBSZXNpemVhYmxlUmVzb3VyY2VJbWFnZSB7XG4gICAgICAgIGV4cG9ydCBpbnRlcmZhY2UgQm94IHtcbiAgICAgICAgICAgIHdpZHRoOiBudW1iZXI7XG4gICAgICAgICAgICBoZWlnaHQ6IG51bWJlcjtcbiAgICAgICAgfVxuXG4gICAgICAgIGV4cG9ydCBpbnRlcmZhY2UgSW1hZ2VFdmVudENhbGxiYWNrIHtcbiAgICAgICAgICAgIChpbWFnZTpIVE1MSW1hZ2VFbGVtZW50KTp2b2lkO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBleHBvcnQgaW50ZXJmYWNlIEltYWdlTG9hZENhbGxiYWNrIGV4dGVuZHMgSW1hZ2VFdmVudENhbGxiYWNrIHtcbiAgICAgICAgICAgIChpbWFnZTpIVE1MSW1hZ2VFbGVtZW50LCBldmVudDpFdmVudCk6dm9pZDtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgZXhwb3J0IGludGVyZmFjZSBJbWFnZUVycm9yQ2FsbGJhY2sgZXh0ZW5kcyBJbWFnZUV2ZW50Q2FsbGJhY2sge1xuICAgICAgICAgICAgKGltYWdlOkhUTUxJbWFnZUVsZW1lbnQsIGV2ZW50OkVycm9yRXZlbnQpOnZvaWQ7XG4gICAgICAgIH1cblxuICAgICAgICBleHBvcnQgaW50ZXJmYWNlIFBhZGRpbmdDYWxjdWxhdG9yIHtcbiAgICAgICAgICAgIChjb250YWluZXI6RWxlbWVudCk6Qm94O1xuICAgICAgICB9XG4gICAgfVxufSJdfQ==

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var RideStylerShowcase;
(function (RideStylerShowcase) {
    var RideStylerShowcaseBackground = function (_RideStylerShowcase$C) {
        _inherits(RideStylerShowcaseBackground, _RideStylerShowcase$C);

        function RideStylerShowcaseBackground() {
            _classCallCheck(this, RideStylerShowcaseBackground);

            return _possibleConstructorReturn(this, (RideStylerShowcaseBackground.__proto__ || Object.getPrototypeOf(RideStylerShowcaseBackground)).apply(this, arguments));
        }

        _createClass(RideStylerShowcaseBackground, [{
            key: 'initializeComponent',
            value: function initializeComponent() {
                var backgroundElement = RideStylerShowcase.HTMLHelper.createElement('div', {
                    className: 'ridestyler-showcase-background'
                });
                var backgroundTexture = RideStylerShowcase.HTMLHelper.createElement('div', {
                    className: 'ridestyler-showcase-background-texture',
                    appendTo: backgroundElement
                });
                this.component = backgroundElement;
            }
        }]);

        return RideStylerShowcaseBackground;
    }(RideStylerShowcase.ComponentBase);

    RideStylerShowcase.RideStylerShowcaseBackground = RideStylerShowcaseBackground;
})(RideStylerShowcase || (RideStylerShowcase = {}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvUmlkZVN0eWxlclNob3djYXNlQmFja2dyb3VuZC50cyJdLCJuYW1lcyI6WyJSaWRlU3R5bGVyU2hvd2Nhc2UiLCJSaWRlU3R5bGVyU2hvd2Nhc2VCYWNrZ3JvdW5kIiwiYmFja2dyb3VuZEVsZW1lbnQiLCJIVE1MSGVscGVyIiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTmFtZSIsImJhY2tncm91bmRUZXh0dXJlIiwiYXBwZW5kVG8iLCJjb21wb25lbnQiLCJDb21wb25lbnRCYXNlIl0sIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFBLElBQVVBLGtCQUFWO0FBQUEsQ0FBQSxVQUFVQSxrQkFBVixFQUE0QjtBQUFBLFFBQ3hCQyw0QkFEd0I7QUFBQTs7QUFBQTtBQUFBOztBQUFBO0FBQUE7O0FBQUE7QUFBQTtBQUFBLGtEQUlTO0FBQ3pCLG9CQUFJQyxvQkFBb0JGLG1CQUFBRyxVQUFBLENBQVdDLGFBQVgsQ0FBeUIsS0FBekIsRUFBZ0M7QUFDcERDLCtCQUFXO0FBRHlDLGlCQUFoQyxDQUF4QjtBQUlBLG9CQUFJQyxvQkFBb0JOLG1CQUFBRyxVQUFBLENBQVdDLGFBQVgsQ0FBeUIsS0FBekIsRUFBZ0M7QUFDcERDLCtCQUFXLHdDQUR5QztBQUVwREUsOEJBQVVMO0FBRjBDLGlCQUFoQyxDQUF4QjtBQUtBLHFCQUFLTSxTQUFMLEdBQWlCTixpQkFBakI7QUFDSDtBQWZtQjs7QUFBQTtBQUFBLE1BQzBCRixtQkFBQVMsYUFEMUI7O0FBQ1hULHVCQUFBQyw0QkFBQSxHQUE0QkEsNEJBQTVCO0FBZ0JoQixDQWpCRCxFQUFVRCx1QkFBQUEscUJBQWtCLEVBQWxCLENBQVYiLCJmaWxlIjoic2NyaXB0cy9jb21wb25lbnRzL1JpZGVTdHlsZXJTaG93Y2FzZUJhY2tncm91bmQuanMiLCJzb3VyY2VzQ29udGVudCI6WyJuYW1lc3BhY2UgUmlkZVN0eWxlclNob3djYXNlIHtcbiAgICBleHBvcnQgY2xhc3MgUmlkZVN0eWxlclNob3djYXNlQmFja2dyb3VuZCBleHRlbmRzIENvbXBvbmVudEJhc2Uge1xuICAgICAgICBjb21wb25lbnQ6SFRNTEVsZW1lbnQ7XG5cbiAgICAgICAgcHJvdGVjdGVkIGluaXRpYWxpemVDb21wb25lbnQoKSB7XG4gICAgICAgICAgICB2YXIgYmFja2dyb3VuZEVsZW1lbnQgPSBIVE1MSGVscGVyLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdyaWRlc3R5bGVyLXNob3djYXNlLWJhY2tncm91bmQnXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdmFyIGJhY2tncm91bmRUZXh0dXJlID0gSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAncmlkZXN0eWxlci1zaG93Y2FzZS1iYWNrZ3JvdW5kLXRleHR1cmUnLFxuICAgICAgICAgICAgICAgIGFwcGVuZFRvOiBiYWNrZ3JvdW5kRWxlbWVudFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHRoaXMuY29tcG9uZW50ID0gYmFja2dyb3VuZEVsZW1lbnQ7XG4gICAgICAgIH1cbiAgICB9XG59Il19

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var RideStylerShowcase;
(function (RideStylerShowcase) {
    var className = 'ridestyler-showcase-button-picker';
    var optionClass = className + '-option';
    var activeClass = optionClass + '-active';
    var optionsCount = 1;

    var RideStylerShowcaseButtonPicker = function (_RideStylerShowcase$C) {
        _inherits(RideStylerShowcaseButtonPicker, _RideStylerShowcase$C);

        function RideStylerShowcaseButtonPicker(showcaseInstance, options) {
            _classCallCheck(this, RideStylerShowcaseButtonPicker);

            var _this = _possibleConstructorReturn(this, (RideStylerShowcaseButtonPicker.__proto__ || Object.getPrototypeOf(RideStylerShowcaseButtonPicker)).call(this, showcaseInstance));

            _this.component = RideStylerShowcase.HTMLHelper.createElement('div', {
                className: className,
                style: {
                    height: '2.5em'
                }
            });
            RideStylerShowcase.HTMLHelper.createElement('div', {
                className: className + '-title',
                text: options.title,
                appendTo: _this.component
            }).addEventListener('click', function () {
                _this.optionContainer.style.opacity = _this.optionContainer.style.opacity == '0' ? '1' : '0';
                _this.optionContainer.style.transform = _this.optionContainer.style.transform == 'scaleY(0)' ? 'scaleY(1)' : 'scaleY(0)';
                _this.optionContainer.style.height = _this.optionContainer.style.height == '0px' ? 'auto' : '0px';
                switch (optionsCount) {
                    case 1:
                        _this.component.style.height = _this.component.style.height == '2.5em' ? '4.5em' : '2.5em';
                        break;
                    case 2:
                        _this.component.style.height = _this.component.style.height == '2.5em' ? '7em' : '2.5em';
                        break;
                    case 3:
                        _this.component.style.height = _this.component.style.height == '2.5em' ? '9.25em' : '2.5em';
                        break;
                    case 4:
                        _this.component.style.height = _this.component.style.height == '2.5em' ? '11.25em' : '2.5em';
                        break;
                    default:
                        _this.component.style.height = '2.5em';
                }
            });
            _this.optionContainer = RideStylerShowcase.HTMLHelper.createElement('div', {
                className: className + '-option-container',
                appendTo: _this.component,
                style: {
                    opacity: '0',
                    height: '0px',
                    transform: 'scaleY(0)'
                }
            });
            _this.optionContainer.addEventListener('click', function (event) {
                _this.onOptionClick(event);
            });
            _this.optionContainer.addEventListener('DOMNodeInserted', function () {
                _this.optionContainer.style.opacity = '1';
                _this.optionContainer.style.transform = 'scaleY(1)';
                _this.optionContainer.style.height = 'auto';
                switch (optionsCount) {
                    case 1:
                        _this.component.style.height = '4.5em';
                        break;
                    case 2:
                        _this.component.style.height = '7em';
                        break;
                    case 3:
                        _this.component.style.height = '9.25em';
                        break;
                    case 4:
                        _this.component.style.height = '11.25em';
                        break;
                    default:
                        _this.component.style.height = '2.5em';
                        _this.optionContainer.style.opacity = '0';
                        _this.optionContainer.style.transform = 'scaleY(0)';
                        _this.optionContainer.style.height = '0px';
                }
            });
            return _this;
        }

        _createClass(RideStylerShowcaseButtonPicker, [{
            key: 'setOptions',
            value: function setOptions(options) {
                RideStylerShowcase.HTMLHelper.empty(this.optionContainer);
                optionsCount = options.length;
                var fragment = document.createDocumentFragment();
                var _iteratorNormalCompletion = true;
                var _didIteratorError = false;
                var _iteratorError = undefined;

                try {
                    for (var _iterator = options[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
                        var option = _step.value;

                        var optionElement = Object.assign(RideStylerShowcase.HTMLHelper.createElement('div', {
                            className: optionClass,
                            text: option.label
                        }), {
                            value: option.value
                        });
                        if (option.active) optionElement.classList.add(activeClass);
                        fragment.appendChild(optionElement);
                    }
                } catch (err) {
                    _didIteratorError = true;
                    _iteratorError = err;
                } finally {
                    try {
                        if (!_iteratorNormalCompletion && _iterator.return) {
                            _iterator.return();
                        }
                    } finally {
                        if (_didIteratorError) {
                            throw _iteratorError;
                        }
                    }
                }

                this.optionContainer.appendChild(fragment);
            }
        }, {
            key: 'onOptionClick',
            value: function onOptionClick(event) {
                var currentTarget = event.target;
                // Iterate through parents until we've reached the bound element
                while (currentTarget !== this.optionContainer) {
                    if (currentTarget.classList.contains(optionClass)) {
                        // An option was clicked
                        // Remove the active class from the old option
                        var _iteratorNormalCompletion2 = true;
                        var _didIteratorError2 = false;
                        var _iteratorError2 = undefined;

                        try {
                            for (var _iterator2 = RideStylerShowcase.HTMLHelper.childrenWithClasses(this.optionContainer, activeClass)[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {
                                var child = _step2.value;

                                child.classList.remove(activeClass);
                            } // Add it to the new one
                        } catch (err) {
                            _didIteratorError2 = true;
                            _iteratorError2 = err;
                        } finally {
                            try {
                                if (!_iteratorNormalCompletion2 && _iterator2.return) {
                                    _iterator2.return();
                                }
                            } finally {
                                if (_didIteratorError2) {
                                    throw _iteratorError2;
                                }
                            }
                        }

                        currentTarget.classList.add(activeClass);
                        if (typeof this.optionSelectedCallback === 'function') this.optionSelectedCallback(currentTarget.value);
                        return;
                    }
                    currentTarget = currentTarget.parentElement;
                }
            }
        }]);

        return RideStylerShowcaseButtonPicker;
    }(RideStylerShowcase.ComponentBase);

    RideStylerShowcase.RideStylerShowcaseButtonPicker = RideStylerShowcaseButtonPicker;
})(RideStylerShowcase || (RideStylerShowcase = {}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvUmlkZVN0eWxlclNob3djYXNlQnV0dG9uUGlja2VyLnRzIl0sIm5hbWVzIjpbIlJpZGVTdHlsZXJTaG93Y2FzZSIsImNsYXNzTmFtZSIsIm9wdGlvbkNsYXNzIiwiYWN0aXZlQ2xhc3MiLCJvcHRpb25zQ291bnQiLCJSaWRlU3R5bGVyU2hvd2Nhc2VCdXR0b25QaWNrZXIiLCJzaG93Y2FzZUluc3RhbmNlIiwib3B0aW9ucyIsImNvbXBvbmVudCIsIkhUTUxIZWxwZXIiLCJjcmVhdGVFbGVtZW50Iiwic3R5bGUiLCJoZWlnaHQiLCJ0ZXh0IiwidGl0bGUiLCJhcHBlbmRUbyIsImFkZEV2ZW50TGlzdGVuZXIiLCJvcHRpb25Db250YWluZXIiLCJvcGFjaXR5IiwidHJhbnNmb3JtIiwib25PcHRpb25DbGljayIsImV2ZW50IiwiZW1wdHkiLCJsZW5ndGgiLCJmcmFnbWVudCIsImRvY3VtZW50IiwiY3JlYXRlRG9jdW1lbnRGcmFnbWVudCIsIm9wdGlvbiIsIm9wdGlvbkVsZW1lbnQiLCJPYmplY3QiLCJhc3NpZ24iLCJsYWJlbCIsInZhbHVlIiwiYWN0aXZlIiwiY2xhc3NMaXN0IiwiYWRkIiwiYXBwZW5kQ2hpbGQiLCJjdXJyZW50VGFyZ2V0IiwidGFyZ2V0IiwiY29udGFpbnMiLCJjaGlsZHJlbldpdGhDbGFzc2VzIiwiY2hpbGQiLCJyZW1vdmUiLCJvcHRpb25TZWxlY3RlZENhbGxiYWNrIiwicGFyZW50RWxlbWVudCIsIkNvbXBvbmVudEJhc2UiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUEsSUFBVUEsa0JBQVY7QUFBQSxDQUFBLFVBQVVBLGtCQUFWLEVBQTRCO0FBQ3hCLFFBQU1DLFlBQVksbUNBQWxCO0FBQ0EsUUFBTUMsY0FBY0QsWUFBWSxTQUFoQztBQUNBLFFBQU1FLGNBQWNELGNBQWMsU0FBbEM7QUFDQSxRQUFNRSxlQUFlLENBQXJCOztBQUp3QixRQU14QkMsOEJBTndCO0FBQUE7O0FBVXBCLGdE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WixLQUF1QyxVQUEzQyxFQUNJLEtBQUtBLHNCQUFMLENBQTZCTixjQUFrRUwsS0FBL0Y7QUFFSjtBQUNIO0FBRURLLG9DQUFnQkEsY0FBY08sYUFBOUI7QUFDSDtBQUNKO0FBckltQjs7QUFBQTtBQUFBLE1BTStCNUMsbUJBQUE2QyxhQU4vQjs7QUFNWDdDLHVCQUFBSyw4QkFBQSxHQUE4QkEsOEJBQTlCO0FBbUpoQixDQXpKRCxFQUFVTCx1QkFBQUEscUJBQWtCLEVBQWxCLENBQVYiLCJmaWxlIjoic2NyaXB0cy9jb21wb25lbnRzL1JpZGVTdHlsZXJTaG93Y2FzZUJ1dHRvblBpY2tlci5qcyIsInNvdXJjZXNDb250ZW50IjpbIm5hbWVzcGFjZSBSaWRlU3R5bGVyU2hvd2Nhc2Uge1xyXG4gICAgY29uc3QgY2xhc3NOYW1lID0gJ3JpZGVzdHlsZXItc2hvd2Nhc2UtYnV0dG9uLXBpY2tlcic7XHJcbiAgICBjb25zdCBvcHRpb25DbGFzcyA9IGNsYXNzTmFtZSArICctb3B0aW9uJztcclxuICAgIGNvbnN0IGFjdGl2ZUNsYXNzID0gb3B0aW9uQ2xhc3MgKyAnLWFjdGl2ZSc7XHJcbiAgICBsZXQgICBvcHRpb25zQ291bnQgPSAxO1xyXG5cclxuICAgIGV4cG9ydCBjbGFzcyBSaWRlU3R5bGVyU2hvd2Nhc2VCdXR0b25QaWNrZXI8VD4gZXh0ZW5kcyBDb21wb25lbnRCYXNlIHtcclxuICAgICAgICBwdWJsaWMgb3B0aW9uQ2xpY2tlZDogYm9vbGVhbjsgXHJcbiAgICAgICAgcHJpdmF0ZSBvcHRpb25Db250YWluZXI6SFRNTEVsZW1lbnQ7XHJcblxyXG4gICAgICAgIGNvbnN0cnVjdG9yKHNob3djYXNlSW5zdGFuY2U6UmlkZVN0eWxlclNob3djYXNlSW5zdGFuY2UsIG9wdGlvbnM6IFJpZGVTdHlsZXJTaG93Y2FzZUJ1dHRvblBpY2tlci5TZXR0aW5ncykge1xyXG4gICAgICAgICAgICBzdXBlcihzaG93Y2FzZUluc3RhbmNlKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuY29tcG9uZW50ID0gSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XHJcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IGNsYXNzTmFtZSxcclxuICAgICAgICAgICAgICAgIHN0eWxlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAnMi41ZW0nLFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcblxyXG4gICAgICAgICAgICBIVE1MSGVscGVyLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcclxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogY2xhc3NOYW1lICsgJy10aXRsZScsXHJcbiAgICAgICAgICAgICAgICB0ZXh0OiBvcHRpb25zLnRpdGxlLFxyXG4gICAgICAgICAgICAgICAgYXBwZW5kVG86IHRoaXMuY29tcG9uZW50XHJcbiAgICAgICAgICAgIH0pLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vcHRpb25Db250YWluZXIuc3R5bGUub3BhY2l0eSA9IHRoaXMub3B0aW9uQ29udGFpbmVyLnN0eWxlLm9wYWNpdHkgPT0gJzAnID8gJzEnIDogJzAnO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vcHRpb25Db250YWluZXIuc3R5bGUudHJhbnNmb3JtID0gdGhpcy5vcHRpb25Db250YWluZXIuc3R5bGUudHJhbnNmb3JtID09ICdzY2FsZVkoMCknID8gJ3NjYWxlWSgxKScgOiAnc2NhbGVZKDApJztcclxuICAgICAgICAgICAgICAgIHRoaXMub3B0aW9uQ29udGFpbmVyLnN0eWxlLmhlaWdodCA9IHRoaXMub3B0aW9uQ29udGFpbmVyLnN0eWxlLmhlaWdodCA9PSAnMHB4JyA/ICdhdXRvJyA6ICcwcHgnO1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoKG9wdGlvbnNDb3VudCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb21wb25lbnQuc3R5bGUuaGVpZ2h0ID0gdGhpcy5jb21wb25lbnQuc3R5bGUuaGVpZ2h0ID09ICcyLjVlbScgPyAnNC41ZW0nIDogJzIuNWVtJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbXBvbmVudC5zdHlsZS5oZWlnaHQgPSB0aGlzLmNvbXBvbmVudC5zdHlsZS5oZWlnaHQgPT0gJzIuNWVtJyA/ICc3ZW0nIDogJzIuNWVtJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbXBvbmVudC5zdHlsZS5oZWlnaHQgPSB0aGlzLmNvbXBvbmVudC5zdHlsZS5oZWlnaHQgPT0gJzIuNWVtJyA/ICc5LjI1ZW0nIDogJzIuNWVtJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbXBvbmVudC5zdHlsZS5oZWlnaHQgPSB0aGlzLmNvbXBvbmVudC5zdHlsZS5oZWlnaHQgPT0gJzIuNWVtJyA/ICcxMS4yNWVtJyA6ICcyLjVlbSc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29tcG9uZW50LnN0eWxlLmhlaWdodCA9ICcyLjVlbSc7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pXHJcblxyXG4gICAgICAgICAgICB0aGlzLm9wdGlvbkNvbnRhaW5lciA9IEhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCgnZGl2Jywge1xyXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBjbGFzc05hbWUgKyAnLW9wdGlvbi1jb250YWluZXInLFxyXG4gICAgICAgICAgICAgICAgYXBwZW5kVG86IHRoaXMuY29tcG9uZW50LFxyXG4gICAgICAgICAgICAgICAgc3R5bGU6IHtcclxuICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAnMCcsXHJcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAnMHB4JyxcclxuICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm06ICdzY2FsZVkoMCknXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5vcHRpb25Db250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBldmVudCA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9uT3B0aW9uQ2xpY2soZXZlbnQpO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMub3B0aW9uQ29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ0RPTU5vZGVJbnNlcnRlZCcsICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMub3B0aW9uQ29udGFpbmVyLnN0eWxlLm9wYWNpdHkgPSAnMSc7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9wdGlvbkNvbnRhaW5lci5zdHlsZS50cmFuc2Zvcm0gPSAnc2NhbGVZKDEpJztcclxuICAgICAgICAgICAgICAgIHRoaXMub3B0aW9uQ29udGFpbmVyLnN0eWxlLmhlaWdodCA9ICdhdXRvJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgc3dpdGNoKG9wdGlvbnNDb3VudCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb21wb25lbnQuc3R5bGUuaGVpZ2h0ID0gJzQuNWVtJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbXBvbmVudC5zdHlsZS5oZWlnaHQgPSAnN2VtJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbXBvbmVudC5zdHlsZS5oZWlnaHQgPSAnOS4yNWVtJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbXBvbmVudC5zdHlsZS5oZWlnaHQgPSAnMTEuMjVlbSc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29tcG9uZW50LnN0eWxlLmhlaWdodCA9ICcyLjVlbSc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub3B0aW9uQ29udGFpbmVyLnN0eWxlLm9wYWNpdHkgPSAnMCc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub3B0aW9uQ29udGFpbmVyLnN0eWxlLnRyYW5zZm9ybSA9ICdzY2FsZVkoMCknO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9wdGlvbkNvbnRhaW5lci5zdHlsZS5oZWlnaHQgPSAnMHB4JztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gXHJcbiAgICAgICAgcHVibGljIHNldE9wdGlvbnMob3B0aW9uczogUmlkZVN0eWxlclNob3djYXNlQnV0dG9uUGlja2VyLk9wdGlvbjxUPltdKSB7XHJcbiAgICAgICAgICAgIEhUTUxIZWxwZXIuZW1wdHkodGhpcy5vcHRpb25Db250YWluZXIpO1xyXG5cclxuICAgICAgICAgICAgb3B0aW9uc0NvdW50ID0gb3B0aW9ucy5sZW5ndGg7XHJcbiAgICAgICAgICAgIGxldCBmcmFnbWVudCA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcclxuXHJcbiAgICAgICAgICAgIGZvciAobGV0IG9wdGlvbiBvZiBvcHRpb25zKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgb3B0aW9uRWxlbWVudDpSaWRlU3R5bGVyU2hvd2Nhc2VCdXR0b25QaWNrZXIuT3B0aW9uRWxlbWVudDxUPiA9IE9iamVjdC5hc3NpZ24oSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBvcHRpb25DbGFzcyxcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0OiBvcHRpb24ubGFiZWxcclxuICAgICAgICAgICAgICAgIH0pLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IG9wdGlvbi52YWx1ZVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbi5hY3RpdmUpIG9wdGlvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZChhY3RpdmVDbGFzcyk7XHJcblxyXG4gICAgICAgICAgICAgICAgZnJhZ21lbnQuYXBwZW5kQ2hpbGQob3B0aW9uRWxlbWVudCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMub3B0aW9uQ29udGFpbmVyLmFwcGVuZENoaWxkKGZyYWdtZW50KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgb25PcHRpb25DbGljayhldmVudDpNb3VzZUV2ZW50KSB7XHJcbiAgICAgICAgICAgIGxldCBjdXJyZW50VGFyZ2V0OkhUTUxFbGVtZW50ID0gZXZlbnQudGFyZ2V0IGFzIEhUTUxFbGVtZW50O1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gSXRlcmF0ZSB0aHJvdWdoIHBhcmVudHMgdW50aWwgd2UndmUgcmVhY2hlZCB0aGUgYm91bmQgZWxlbWVudFxyXG4gICAgICAgICAgICB3aGlsZSAoY3VycmVudFRhcmdldCAhPT0gdGhpcy5vcHRpb25Db250YWluZXIpIHtcclxuICAgICAgICAgICAgICAgIGlmIChjdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhvcHRpb25DbGFzcykpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBBbiBvcHRpb24gd2FzIGNsaWNrZWRcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gUmVtb3ZlIHRoZSBhY3RpdmUgY2xhc3MgZnJvbSB0aGUgb2xkIG9wdGlvblxyXG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGNoaWxkIG9mIEhUTUxIZWxwZXIuY2hpbGRyZW5XaXRoQ2xhc3Nlcyh0aGlzLm9wdGlvbkNvbnRhaW5lciwgYWN0aXZlQ2xhc3MpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGlsZC5jbGFzc0xpc3QucmVtb3ZlKGFjdGl2ZUNsYXNzKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gQWRkIGl0IHRvIHRoZSBuZXcgb25lXHJcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudFRhcmdldC5jbGFzc0xpc3QuYWRkKGFjdGl2ZUNsYXNzKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0aGlzLm9wdGlvblNlbGVjdGVkQ2FsbGJhY2sgPT09ICdmdW5jdGlvbicpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub3B0aW9uU2VsZWN0ZWRDYWxsYmFjaygoY3VycmVudFRhcmdldCBhcyBSaWRlU3R5bGVyU2hvd2Nhc2VCdXR0b25QaWNrZXIuT3B0aW9uRWxlbWVudDxUPikudmFsdWUpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgY3VycmVudFRhcmdldCA9IGN1cnJlbnRUYXJnZXQucGFyZW50RWxlbWVudDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG9wdGlvblNlbGVjdGVkQ2FsbGJhY2s6ICh2YWx1ZTpUKSA9PiB2b2lkO1xyXG4gICAgfVxyXG5cclxuICAgIGV4cG9ydCBuYW1lc3BhY2UgUmlkZVN0eWxlclNob3djYXNlQnV0dG9uUGlja2VyIHtcclxuICAgICAgICBleHBvcnQgaW50ZXJmYWNlIFNldHRpbmdzIHtcclxuICAgICAgICAgICAgdGl0bGU6IHN0cmluZztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGV4cG9ydCBpbnRlcmZhY2UgT3B0aW9uRWxlbWVudDxUPiBleHRlbmRzIEhUTUxFbGVtZW50IHtcclxuICAgICAgICAgICAgdmFsdWU6IFQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBleHBvcnQgaW50ZXJmYWNlIE9wdGlvbjxUPiB7XHJcbiAgICAgICAgICAgIGxhYmVsOiBzdHJpbmc7XHJcbiAgICAgICAgICAgIHZhbHVlOiBUO1xyXG4gICAgICAgICAgICBhY3RpdmU/OiBib29sZWFuO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSJdfQ==

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var RideStylerShowcase;
(function (RideStylerShowcase) {
    var RideStylerShowcaseChangeWheelSize = function (_RideStylerShowcase$R) {
        _inherits(RideStylerShowcaseChangeWheelSize, _RideStylerShowcase$R);

        function RideStylerShowcaseChangeWheelSize(showcaseInstance) {
            _classCallCheck(this, RideStylerShowcaseChangeWheelSize);

            var _this = _possibleConstructorReturn(this, (RideStylerShowcaseChangeWheelSize.__proto__ || Object.getPrototypeOf(RideStylerShowcaseChangeWheelSize)).call(this, showcaseInstance, {
                title: RideStylerShowcase.strings.getString('change-wheel-size')
            }));

            _this.component.classList.add('ridestyler-showcase-change-wheel-size');
            return _this;
        }

        _createClass(RideStylerShowcaseChangeWheelSize, [{
            key: 'setFitmentOptions',
            value: function setFitmentOptions(fitments, activeFitment) {
                var seenDiameters = {};
                var diameterFitments = [];
                var _iteratorNormalCompletion = true;
                var _didIteratorError = false;
                var _iteratorError = undefined;

                try {
                    for (var _iterator = fitments[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
                        var fitment = _step.value;

                        var diameter = fitment.DiameterMin;
                        if (diameter in seenDiameters === false) {
                            seenDiameters[diameter] = true;
                            diameterFitments.push([diameter, fitment]);
                        }
                    }
                } catch (err) {
                    _didIteratorError = true;
                    _iteratorError = err;
                } finally {
                    try {
                        if (!_iteratorNormalCompletion && _iterator.return) {
                            _iterator.return();
                        }
                    } finally {
                        if (_didIteratorError) {
                            throw _iteratorError;
                        }
                    }
                }

                diameterFitments.sort(function (a, b) {
                    return a[0] - b[0];
                });
                if (diameterFitments.length === 1) {
                    this.component.style.display = 'none';
                }
                this.setOptions(RideStylerShowcase.ArrayHelper.map(diameterFitments, function (diameterFitment) {
                    return {
                        label: diameterFitment[0] + '″',
                        value: diameterFitment[1],
                        active: diameterFitment[1] === activeFitment
                    };
                }));
            }
        }]);

        return RideStylerShowcaseChangeWheelSize;
    }(RideStylerShowcase.RideStylerShowcaseButtonPicker);

    RideStylerShowcase.RideStylerShowcaseChangeWheelSize = RideStylerShowcaseChangeWheelSize;
})(RideStylerShowcase || (RideStylerShowcase = {}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvUmlkZVN0eWxlclNob3djYXNlQ2hhbmdlV2hlZWxTaXplLnRzIl0sIm5hbWVzIjpbIlJpZGVTdHlsZXJTaG93Y2FzZSIsIlJpZGVTdHlsZXJTaG93Y2FzZUNoYW5nZVdoZWVsU2l6ZSIsInNob3djYXNlSW5zdGFuY2UiLCJ0aXRsZSIsInN0cmluZ3MiLCJnZXRTdHJpbmciLCJjb21wb25lbnQiLCJjbGFzc0xpc3QiLCJhZGQiLCJmaXRtZW50cyIsImFjdGl2ZUZpdG1lbnQiLCJzZWVuRGlhbWV0ZXJzIiwiZGlhbWV0ZXJGaXRtZW50cyIsImZpdG1lbnQiLCJkaWFtZXRlciIsIkRpYW1ldGVyTWluIiwicHVzaCIsInNvcnQiLCJhIiwiYiIsImxlbmd0aCIsInN0eWxlIiwiZGlzcGxheSIsInNldE9wdGlvbnMiLCJBcnJheUhlbHBlciIsIm1hcCIsImxhYmVsIiwiZGlhbWV0ZXJGaXRtZW50IiwidmFsdWUiLCJhY3RpdmUiLCJSaWRlU3R5bGVyU2hvd2Nhc2VCdXR0b25QaWNrZXIiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUEsSUFBVUEsa0JBQVY7QUFBQSxDQUFBLFVBQVVBLGtCQUFWLEVBQTRCO0FBQUEsUUFFeEJDLGlDQUZ3QjtBQUFBOztBQUdwQixtREFBWUMsZ0JBQVosRUFBdUQ7QUFBQTs7QUFBQSw4S0FDN0NBLGdCQUQ2QyxFQUMzQjtBQUNwQkMsdUJBQU9ILG1CQUFBSSxPQUFBLENBQVFDLFNBQVIsQ0FBa0IsbUJBQWxCO0FBRGEsYUFEMkI7O0FBS25ELGtCQUFLQyxTQUFMLENBQWVDLFNBQWYsQ0FBeUJDLEdBQXpCLENBQTZCLHVDQUE3QjtBQUxtRDtBQU10RDs7QUFUbUI7QUFBQTtBQUFBLDhDQVdLQyxRQVhMLEVBVzhDQyxhQVg5QyxFQVd5RjtBQUN6RyxvQkFBSUMsZ0JBQWdCLEVBQXBCO0FBQ0Esb0JBQUlDLG1CQUEyRCxFQUEvRDtBQUZ5RztBQUFBO0FBQUE7O0FBQUE7QUFJekcseUNBQW9CSCxRQUFwQiw4SEFBOEI7QUFBQSw0QkFBckJJLE9BQXFCOztBQUMxQiw0QkFBSUMsV0FBV0QsUUFBUUUsV0FBdkI7QUFFQSw0QkFBSUQsWUFBWUgsYUFBWixLQUE4QixLQUFsQyxFQUF5QztBQUNyQ0EsMENBQWNHLFFBQWQsSUFBMEIsSUFBMUI7QUFFQUYsNkNBQWlCSSxJQUFqQixDQUFzQixDQUFDRixRQUFELEVBQVdELE9BQVgsQ0FBdEI7QUFDSDtBQUNKO0FBWndHO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7O0FBY3pHRCxpQ0FBaUJLLElBQWpCLENBQXNCLFVBQVVDLENBQVYsRUFBYUMsQ0FBYixFQUFjO0FBQ2hDLDJCQUFPRCxFQUFFLENBQUYsSUFBT0MsRUFBRSxDQUFGLENBQWQ7QUFDSCxpQkFGRDtBQUlBLG9CQUFJUCxpQkFBaUJRLE1BQWpCLEtBQTRCLENBQWhDLEVBQW1DO0FBQy9CLHlCQUFLZCxTQUFMLENBQWVlLEtBQWYsQ0FBcUJDLE9BQXJCLEdBQStCLE1BQS9CO0FBQ0g7QUFFRCxxQkFBS0MsVUFBTCxDQUFnQnZCLG1CQUFBd0IsV0FBQSxDQUFZQyxHQUFaLENBQWdCYixnQkFBaEIsRUFBa0MsMkJBQWtCO0FBQ2hFLDJCQUFPO0FBQ0hjLCtCQUFPQyxnQkFBZ0IsQ0FBaEIsSUFBcUIsR0FEekI7QUFFSEMsK0JBQU9ELGdCQUFnQixDQUFoQixDQUZKO0FBR0hFLGdDQUFRRixnQkFBZ0IsQ0FBaEIsTUFBdUJqQjtBQUg1QixxQkFBUDtBQUtILGlCQU5lLENBQWhCO0FBT0g7QUF4Q21COztBQUFBO0FBQUEsTUFFK0JWLG1CQUFBOEIsOEJBRi9COztBQUVYOUIsdUJBQUFDLGlDQUFBLEdBQWlDQSxpQ0FBakM7QUF3Q2hCLENBMUNELEVBQVVELHVCQUFBQSxxQkFBa0IsRUFBbEIsQ0FBViIsImZpbGUiOiJzY3JpcHRzL2NvbXBvbmVudHMvUmlkZVN0eWxlclNob3djYXNlQ2hhbmdlV2hlZWxTaXplLmpzIiwic291cmNlc0NvbnRlbnQiOlsibmFtZXNwYWNlIFJpZGVTdHlsZXJTaG93Y2FzZSB7XG4gICAgaW1wb3J0IFdoZWVsRml0bWVudERlc2NyaXB0aW9uTW9kZWwgPSByaWRlc3R5bGVyLkRlc2NyaXB0aW9ucy5XaGVlbEZpdG1lbnREZXNjcmlwdGlvbk1vZGVsO1xuICAgIGV4cG9ydCBjbGFzcyBSaWRlU3R5bGVyU2hvd2Nhc2VDaGFuZ2VXaGVlbFNpemUgZXh0ZW5kcyBSaWRlU3R5bGVyU2hvd2Nhc2VCdXR0b25QaWNrZXI8V2hlZWxGaXRtZW50RGVzY3JpcHRpb25Nb2RlbD4ge1xuICAgICAgICBjb25zdHJ1Y3RvcihzaG93Y2FzZUluc3RhbmNlOlJpZGVTdHlsZXJTaG93Y2FzZUluc3RhbmNlKSB7XG4gICAgICAgICAgICBzdXBlcihzaG93Y2FzZUluc3RhbmNlLCB7XG4gICAgICAgICAgICAgICAgdGl0bGU6IHN0cmluZ3MuZ2V0U3RyaW5nKCdjaGFuZ2Utd2hlZWwtc2l6ZScpXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdGhpcy5jb21wb25lbnQuY2xhc3NMaXN0LmFkZCgncmlkZXN0eWxlci1zaG93Y2FzZS1jaGFuZ2Utd2hlZWwtc2l6ZScpO1xuICAgICAgICB9XG5cbiAgICAgICAgcHVibGljIHNldEZpdG1lbnRPcHRpb25zKGZpdG1lbnRzOldoZWVsRml0bWVudERlc2NyaXB0aW9uTW9kZWxbXSwgYWN0aXZlRml0bWVudD86V2hlZWxGaXRtZW50RGVzY3JpcHRpb25Nb2RlbCkge1xuICAgICAgICAgICAgbGV0IHNlZW5EaWFtZXRlcnMgPSB7fTtcbiAgICAgICAgICAgIGxldCBkaWFtZXRlckZpdG1lbnRzOltudW1iZXIsV2hlZWxGaXRtZW50RGVzY3JpcHRpb25Nb2RlbF1bXSA9IFtdO1xuXG4gICAgICAgICAgICBmb3IgKGxldCBmaXRtZW50IG9mIGZpdG1lbnRzKSB7XG4gICAgICAgICAgICAgICAgbGV0IGRpYW1ldGVyID0gZml0bWVudC5EaWFtZXRlck1pbjtcblxuICAgICAgICAgICAgICAgIGlmIChkaWFtZXRlciBpbiBzZWVuRGlhbWV0ZXJzID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgICAgICBzZWVuRGlhbWV0ZXJzW2RpYW1ldGVyXSA9IHRydWU7XG5cbiAgICAgICAgICAgICAgICAgICAgZGlhbWV0ZXJGaXRtZW50cy5wdXNoKFtkaWFtZXRlciwgZml0bWVudF0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZGlhbWV0ZXJGaXRtZW50cy5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGFbMF0gLSBiWzBdO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGlmIChkaWFtZXRlckZpdG1lbnRzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgICAgIHRoaXMuY29tcG9uZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMuc2V0T3B0aW9ucyhBcnJheUhlbHBlci5tYXAoZGlhbWV0ZXJGaXRtZW50cywgZGlhbWV0ZXJGaXRtZW50ID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBsYWJlbDogZGlhbWV0ZXJGaXRtZW50WzBdICsgJ+KAsycsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBkaWFtZXRlckZpdG1lbnRbMV0sXG4gICAgICAgICAgICAgICAgICAgIGFjdGl2ZTogZGlhbWV0ZXJGaXRtZW50WzFdID09PSBhY3RpdmVGaXRtZW50XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfVxuICAgIH1cbn0iXX0=

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var RideStylerShowcase;
(function (RideStylerShowcase) {
    var modalClass = 'ridestyler-showcase-modal';
    var backdropClass = modalClass + '-backdrop';

    var RideStylerShowcaseModal = function (_RideStylerShowcase$C) {
        _inherits(RideStylerShowcaseModal, _RideStylerShowcase$C);

        function RideStylerShowcaseModal(showcaseInstance, options) {
            _classCallCheck(this, RideStylerShowcaseModal);

            var _this = _possibleConstructorReturn(this, (RideStylerShowcaseModal.__proto__ || Object.getPrototypeOf(RideStylerShowcaseModal)).call(this, showcaseInstance));

            _this.options = options;
            // Create the backdrop if needed
            _this.createBackdropIfNeeded();
            // Create the modal
            _this.buildModal();
            // Modals start off hidden until shown
            _this.setVisibility(false);
            // Modals are appended to the showcase container
            _this.parent = showcaseInstance.container;
            _this.parent.appendChild(_this.component);
            return _this;
        }
        /**
         * Build the modal DOM structure
         */


        _createClass(RideStylerShowcaseModal, [{
            key: 'buildModal',
            value: function buildModal() {
                var _this2 = this;

                this.component = Object.assign(RideStylerShowcase.HTMLHelper.createElement('div', {
                    className: modalClass
                }), {
                    modal: this
                });
                if (this.options.full) this.component.classList.add(modalClass + '-full');
                RideStylerShowcase.HTMLHelper.createElement('button', {
                    className: modalClass + '-close',
                    appendTo: this.component
                }).addEventListener('click', function () {
                    _this2.hide();
                });
                if (this.options.actions) this.buildActions(this.options.actions);
            }
        }, {
            key: 'buildActions',
            value: function buildActions(actions) {
                var _this3 = this;

                var actionContainer = RideStylerShowcase.HTMLHelper.createElement('div', {
                    className: modalClass + '-actions',
                    appendTo: this.component
                });

                var _loop = function _loop(action) {
                    var actionButton = RideStylerShowcase.HTMLHelper.createButton(RideStylerShowcase.ObjectHelper.assign({
                        appendTo: actionContainer
                    }, action));
                    actionButton.addEventListener('click', function () {
                        if (typeof action.action === 'function') action.action();else if (action.action === 'hide-modal') {
                            _this3.hide();
                        }
                    });
                };

                var _iteratorNormalCompletion = true;
                var _didIteratorError = false;
                var _iteratorError = undefined;

                try {
                    for (var _iterator = actions[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
                        var action = _step.value;

                        _loop(action);
                    }
                } catch (err) {
                    _didIteratorError = true;
                    _iteratorError = err;
                } finally {
                    try {
                        if (!_iteratorNormalCompletion && _iterator.return) {
                            _iterator.return();
                        }
                    } finally {
                        if (_didIteratorError) {
                            throw _iteratorError;
                        }
                    }
                }
            }
            /**
             * Called when this modal is layed-out and about to transition in
             * @virtual
             */

        }, {
            key: 'onShow',
            value: function onShow() {
                this.events.trigger('modal-show', { modal: this });
            }
            /**
             * Called when this modal is visible
             * @virtual
             */

        }, {
            key: 'onShown',
            value: function onShown() {}
            /**
             * Called when this modal is about to transition out
             * @virtual
             */

        }, {
            key: 'onHide',
            value: function onHide() {
                this.events.trigger('modal-hide', { modal: this });
            }
            /**
             * Called when this modal is hidden
             * @virtual
             */

        }, {
            key: 'onHidden',
            value: function onHidden() {
                if (this.options.removeOnHidden) {
                    this.parent.removeChild(this.component);
                }
            }
        }, {
            key: 'show',
            value: function show() {
                var _this4 = this;

                var promise = RideStylerShowcase.VisibilityHelper.show(this.component);
                this.onShow();
                promise.done(function () {
                    return _this4.onShown();
                });
                return promise;
            }
        }, {
            key: 'hide',
            value: function hide() {
                var _this5 = this;

                var promise = RideStylerShowcase.VisibilityHelper.hide(this.component);
                this.onHide();
                promise.done(function () {
                    return _this5.onHidden();
                });
                return promise;
            }
        }, {
            key: 'setVisibility',
            value: function setVisibility(visible) {
                RideStylerShowcase.VisibilityHelper.setVisibility(this.component, visible);
            }
            /**
             * Creates the backdrop if needed
             */

        }, {
            key: 'createBackdropIfNeeded',
            value: function createBackdropIfNeeded() {
                // If there's no previously existing backdrop create a new one
                if (!RideStylerShowcase.HTMLHelper.hasChildWithClass(this.showcase.container, backdropClass)) new RideStylerShowcaseModalBackdrop(this.showcase);
            }
        }]);

        return RideStylerShowcaseModal;
    }(RideStylerShowcase.ComponentBase);

    RideStylerShowcase.RideStylerShowcaseModal = RideStylerShowcaseModal;

    var RideStylerShowcaseModalBackdrop = function (_RideStylerShowcase$C2) {
        _inherits(RideStylerShowcaseModalBackdrop, _RideStylerShowcase$C2);

        function RideStylerShowcaseModalBackdrop(showcaseInstance) {
            _classCallCheck(this, RideStylerShowcaseModalBackdrop);

            // Create the backdrop
            var _this6 = _possibleConstructorReturn(this, (RideStylerShowcaseModalBackdrop.__proto__ || Object.getPrototypeOf(RideStylerShowcaseModalBackdrop)).call(this, showcaseInstance));

            _this6.buildBackdrop();
            // The backdrop starts off hidden
            _this6.setVisibility(false);
            // Append the backdrop to the showcase container
            showcaseInstance.container.appendChild(_this6.component);
            return _this6;
        }

        _createClass(RideStylerShowcaseModalBackdrop, [{
            key: 'buildBackdrop',
            value: function buildBackdrop() {
                var _this7 = this;

                this.component = RideStylerShowcase.HTMLHelper.createElementWithClass('div', backdropClass);
                this.component.addEventListener('click', function () {
                    var topVisibleModal = RideStylerShowcase.HTMLHelper.lastSiblingWithClass(_this7.component, modalClass, 'in');
                    if (topVisibleModal) {
                        topVisibleModal.modal.hide();
                    }
                });
            }
        }, {
            key: 'initializeComponent',
            value: function initializeComponent() {
                var _this8 = this;

                this.events.on('modal-show', function (event) {
                    _this8.update();
                });
                this.events.on('modal-hide', function (event) {
                    _this8.update();
                });
            }
            /**
             * Hide or show the backdrop based off the number of visible modals
             */

        }, {
            key: 'update',
            value: function update() {
                var hasVisibleModal = RideStylerShowcase.HTMLHelper.hasSiblingWithClass(this.component, modalClass, 'in');
                this[hasVisibleModal ? 'show' : 'hide']();
            }
        }, {
            key: 'show',
            value: function show() {
                return RideStylerShowcase.VisibilityHelper.show(this.component);
            }
        }, {
            key: 'hide',
            value: function hide() {
                return RideStylerShowcase.VisibilityHelper.hide(this.component);
            }
        }, {
            key: 'setVisibility',
            value: function setVisibility(visible) {
                RideStylerShowcase.VisibilityHelper.setVisibility(this.component, visible);
            }
        }]);

        return RideStylerShowcaseModalBackdrop;
    }(RideStylerShowcase.ComponentBase);

    RideStylerShowcase.RideStylerShowcaseModalBackdrop = RideStylerShowcaseModalBackdrop;
    (function (RideStylerShowcaseModal) {
        ;
    })(RideStylerShowcaseModal = RideStylerShowcase.RideStylerShowcaseModal || (RideStylerShowcase.RideStylerShowcaseModal = {}));
})(RideStylerShowcase || (RideStylerShowcase = {}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvUmlkZVN0eWxlclNob3djYXNlTW9kYWwudHMiXSwibmFtZXMiOlsiUmlkZVN0eWxlclNob3djYXNlIiwibW9kYWxDbGFzcyIsImJhY2tkcm9wQ2xhc3MiLCJSaWRlU3R5bGVyU2hvd2Nhc2VNb2RhbCIsInNob3djYXNlSW5zdGFuY2UiLCJvcHRpb25zIiwiY3JlYXRlQmFja2Ryb3BJZk5lZWRlZCIsImJ1aWxkTW9kYWwiLCJzZXRWaXNpYmlsaXR5IiwicGFyZW50IiwiY29udGFpbmVyIiwiYXBwZW5kQ2hpbGQiLCJjb21wb25lbnQiLCJPYmplY3QiLCJhc3NpZ24iLCJIVE1MSGVscGVyIiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTmFtZSIsIm1vZGFsIiwiZnVsbCIsImNsYXNzTGlzdCIsImFkZCIsImFwcGVuZFRvIiwiYWRkRXZlbnRMaXN0ZW5lciIsImhpZGUiLCJhY3Rpb25zIiwiYnVpbGRBY3Rpb25zIiwiYWN0aW9uQ29udGFpbmVyIiwiYWN0aW9uIiwiYWN0aW9uQnV0dG9uIiwiY3JlYXRlQnV0dG9uIiwiT2JqZWN0SGVscGVyIiwiZXZlbnRzIiwidHJpZ2dlciIsInJlbW92ZU9uSGlkZGVuIiwicmVtb3ZlQ2hpbGQiLCJwcm9taXNlIiwiVmlzaWJpbGl0eUhlbHBlciIsInNob3ciLCJvblNob3ciLCJkb25lIiwib25TaG93biIsIm9uSGlkZSIsIm9uSGlkZGVuIiwidmlzaWJsZSIsImhhc0NoaWxkV2l0aENsYXNzIiwic2hvd2Nhc2UiLCJSaWRlU3R5bGVyU2hvd2Nhc2VNb2RhbEJhY2tkcm9wIiwiQ29tcG9uZW50QmFzZSIsImJ1aWxkQmFja2Ryb3AiLCJjcmVhdGVFbGVtZW50V2l0aENsYXNzIiwidG9wVmlzaWJsZU1vZGFsIiwibGFzdFNpYmxpbmdXaXRoQ2xhc3MiLCJvbiIsInVwZGF0ZSIsImhhc1Zpc2libGVNb2RhbCIsImhhc1NpYmxpbmdXaXRoQ2xhc3MiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7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bUJBQVgsQ0FBK0IsS0FBSzVDLFNBQXBDLEVBQStDWCxVQUEvQyxFQUEyRCxJQUEzRCxDQUE5QjtBQUVBLHFCQUFLc0Qsa0JBQWtCLE1BQWxCLEdBQTJCLE1BQWhDO0FBQ0g7QUFoTW1CO0FBQUE7QUFBQSxtQ0FrTVQ7QUFDUCx1QkFBT3ZELG1CQUFBcUMsZ0JBQUEsQ0FBaUJDLElBQWpCLENBQXNCLEtBQUsxQixTQUEzQixDQUFQO0FBQ0g7QUFwTW1CO0FBQUE7QUFBQSxtQ0FzTVQ7QUFDUCx1QkFBT1osbUJBQUFxQyxnQkFBQSxDQUFpQmIsSUFBakIsQ0FBc0IsS0FBS1osU0FBM0IsQ0FBUDtBQUNIO0FBeE1tQjtBQUFBO0FBQUEsMENBME1DZ0MsT0ExTUQsRUEwTWlCO0FBQ2pDNUMsbUNBQUFxQyxnQkFBQSxDQUFpQjdCLGFBQWpCLENBQStCLEtBQUtJLFNBQXBDLEVBQStDZ0MsT0FBL0M7QUFDSDtBQTVNbUI7O0FBQUE7QUFBQSxNQXFKNkI1QyxtQkFBQWdELGFBcko3Qjs7QUFxSlhoRCx1QkFBQStDLCtCQUFBLEdBQStCQSwrQkFBL0I7QUEwRGIsS0FBQSxVQUFpQjVDLHVCQUFqQixFQUF3QztBQUduQztBQWtCSixLQXJCRCxFQUFpQkEsMEJBQUFILG1CQUFBRyx1QkFBQSxLQUFBSCxtQkFBQUcsdUJBQUEsR0FBdUIsRUFBdkIsQ0FBakI7QUFzQkgsQ0FyT0QsRUFBVUgsdUJBQUFBLHFCQUFrQixFQUFsQixDQUFWIiwiZmlsZSI6InNjcmlwdHMvY29tcG9uZW50cy9SaWRlU3R5bGVyU2hvd2Nhc2VNb2RhbC5qcyIsInNvdXJjZXNDb250ZW50IjpbIm5hbWVzcGFjZSBSaWRlU3R5bGVyU2hvd2Nhc2Uge1xuICAgIGNvbnN0IG1vZGFsQ2xhc3MgPSAncmlkZXN0eWxlci1zaG93Y2FzZS1tb2RhbCc7XG4gICAgY29uc3QgYmFja2Ryb3BDbGFzcyA9IG1vZGFsQ2xhc3MgKyAnLWJhY2tkcm9wJztcblxuICAgIGltcG9ydCBBY3Rpb24gPSBSaWRlU3R5bGVyU2hvd2Nhc2VNb2RhbC5BY3Rpb247XG4gICAgaW1wb3J0IE9wdGlvbnMgPSBSaWRlU3R5bGVyU2hvd2Nhc2VNb2RhbC5PcHRpb25zO1xuXG4gICAgZXhwb3J0IGNsYXNzIFJpZGVTdHlsZXJTaG93Y2FzZU1vZGFsIGV4dGVuZHMgQ29tcG9uZW50QmFzZSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgbWFpbiBtb2RhbCBlbGVtZW50XG4gICAgICAgICAqL1xuICAgICAgICBwdWJsaWMgY29tcG9uZW50OiBIVE1MRWxlbWVudDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBjdXJyZW50bHkgZGlzcGxheWVkIGJhY2tkcm9wXG4gICAgICAgICAqL1xuICAgICAgICBwdWJsaWMgYmFja2Ryb3A6IEhUTUxFbGVtZW50O1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIHBhcmVudCBlbGVtZW50IG9mIHRoZSBtb2RhbFxuICAgICAgICAgKi9cbiAgICAgICAgcHJpdmF0ZSBwYXJlbnQ6Tm9kZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBvcHRpb25zIHRoYXQgdGhlIG1vZGFsIHdhcyBjcmVhdGVkIHdpdGhcbiAgICAgICAgICovXG4gICAgICAgIHByb3RlY3RlZCByZWFkb25seSBvcHRpb25zOiBPcHRpb25zO1xuXG4gICAgICAgIGNvbnN0cnVjdG9yKHNob3djYXNlSW5zdGFuY2U6UmlkZVN0eWxlclNob3djYXNlSW5zdGFuY2UsIG9wdGlvbnM6IE9wdGlvbnMpIHtcbiAgICAgICAgICAgIHN1cGVyKHNob3djYXNlSW5zdGFuY2UpO1xuXG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuXG4gICAgICAgICAgICAvLyBDcmVhdGUgdGhlIGJhY2tkcm9wIGlmIG5lZWRlZFxuICAgICAgICAgICAgdGhpcy5jcmVhdGVCYWNrZHJvcElmTmVlZGVkKCk7XG5cbiAgICAgICAgICAgIC8vIENyZWF0ZSB0aGUgbW9kYWxcbiAgICAgICAgICAgIHRoaXMuYnVpbGRNb2RhbCgpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBNb2RhbHMgc3RhcnQgb2ZmIGhpZGRlbiB1bnRpbCBzaG93blxuICAgICAgICAgICAgdGhpcy5zZXRWaXNpYmlsaXR5KGZhbHNlKTtcblxuICAgICAgICAgICAgLy8gTW9kYWxzIGFyZSBhcHBlbmRlZCB0byB0aGUgc2hvd2Nhc2UgY29udGFpbmVyXG4gICAgICAgICAgICB0aGlzLnBhcmVudCA9IHNob3djYXNlSW5zdGFuY2UuY29udGFpbmVyO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQuYXBwZW5kQ2hpbGQodGhpcy5jb21wb25lbnQpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEJ1aWxkIHRoZSBtb2RhbCBET00gc3RydWN0dXJlXG4gICAgICAgICAqL1xuICAgICAgICBwcm90ZWN0ZWQgYnVpbGRNb2RhbCgpIHtcbiAgICAgICAgICAgIHRoaXMuY29tcG9uZW50ID0gT2JqZWN0LmFzc2lnbihIVE1MSGVscGVyLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IG1vZGFsQ2xhc3NcbiAgICAgICAgICAgIH0pLCB7XG4gICAgICAgICAgICAgICAgbW9kYWw6IHRoaXNcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLmZ1bGwpIHRoaXMuY29tcG9uZW50LmNsYXNzTGlzdC5hZGQobW9kYWxDbGFzcyArICctZnVsbCcpXG5cbiAgICAgICAgICAgIEhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCgnYnV0dG9uJywge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogbW9kYWxDbGFzcyArICctY2xvc2UnLFxuICAgICAgICAgICAgICAgIGFwcGVuZFRvOiB0aGlzLmNvbXBvbmVudFxuICAgICAgICAgICAgfSkuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5oaWRlKCk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5hY3Rpb25zKVxuICAgICAgICAgICAgICAgIHRoaXMuYnVpbGRBY3Rpb25zKHRoaXMub3B0aW9ucy5hY3Rpb25zKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHByaXZhdGUgYnVpbGRBY3Rpb25zKGFjdGlvbnM6IEFjdGlvbltdKSB7XG4gICAgICAgICAgICBsZXQgYWN0aW9uQ29udGFpbmVyID0gSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBtb2RhbENsYXNzICsgJy1hY3Rpb25zJyxcbiAgICAgICAgICAgICAgICBhcHBlbmRUbzogdGhpcy5jb21wb25lbnRcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBmb3IgKGxldCBhY3Rpb24gb2YgYWN0aW9ucykge1xuICAgICAgICAgICAgICAgIGxldCBhY3Rpb25CdXR0b24gPSBIVE1MSGVscGVyLmNyZWF0ZUJ1dHRvbihPYmplY3RIZWxwZXIuYXNzaWduPEhUTUxIZWxwZXIuY3JlYXRlQnV0dG9uT3B0aW9ucz4oe1xuICAgICAgICAgICAgICAgICAgICBhcHBlbmRUbzogYWN0aW9uQ29udGFpbmVyXG4gICAgICAgICAgICAgICAgfSwgYWN0aW9uKSk7XG5cbiAgICAgICAgICAgICAgICBhY3Rpb25CdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgYWN0aW9uLmFjdGlvbiA9PT0gJ2Z1bmN0aW9uJykgYWN0aW9uLmFjdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChhY3Rpb24uYWN0aW9uID09PSAnaGlkZS1tb2RhbCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaGlkZSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogQ2FsbGVkIHdoZW4gdGhpcyBtb2RhbCBpcyBsYXllZC1vdXQgYW5kIGFib3V0IHRvIHRyYW5zaXRpb24gaW5cbiAgICAgICAgICogQHZpcnR1YWxcbiAgICAgICAgICovXG4gICAgICAgIHByb3RlY3RlZCBvblNob3coKSB7XG4gICAgICAgICAgICB0aGlzLmV2ZW50cy50cmlnZ2VyKCdtb2RhbC1zaG93JywgeyBtb2RhbDogdGhpcyB9KTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogQ2FsbGVkIHdoZW4gdGhpcyBtb2RhbCBpcyB2aXNpYmxlXG4gICAgICAgICAqIEB2aXJ0dWFsXG4gICAgICAgICAqL1xuICAgICAgICBwcm90ZWN0ZWQgb25TaG93bigpIHtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogQ2FsbGVkIHdoZW4gdGhpcyBtb2RhbCBpcyBhYm91dCB0byB0cmFuc2l0aW9uIG91dFxuICAgICAgICAgKiBAdmlydHVhbFxuICAgICAgICAgKi9cbiAgICAgICAgcHJvdGVjdGVkIG9uSGlkZSgpIHtcbiAgICAgICAgICAgIHRoaXMuZXZlbnRzLnRyaWdnZXIoJ21vZGFsLWhpZGUnLCB7IG1vZGFsOiB0aGlzIH0pO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDYWxsZWQgd2hlbiB0aGlzIG1vZGFsIGlzIGhpZGRlblxuICAgICAgICAgKiBAdmlydHVhbFxuICAgICAgICAgKi9cbiAgICAgICAgcHJvdGVjdGVkIG9uSGlkZGVuKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5yZW1vdmVPbkhpZGRlbikge1xuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LnJlbW92ZUNoaWxkKHRoaXMuY29tcG9uZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHB1YmxpYyBzaG93KCk6UmlkZVN0eWxlclByb21pc2Uge1xuICAgICAgICAgICAgbGV0IHByb21pc2UgPSBWaXNpYmlsaXR5SGVscGVyLnNob3codGhpcy5jb21wb25lbnQpO1xuXG4gICAgICAgICAgICB0aGlzLm9uU2hvdygpO1xuICAgICAgICAgICAgcHJvbWlzZS5kb25lKCgpID0+IHRoaXMub25TaG93bigpKTtcblxuICAgICAgICAgICAgcmV0dXJuIHByb21pc2U7XG4gICAgICAgIH1cblxuICAgICAgICBwdWJsaWMgaGlkZSgpOlJpZGVTdHlsZXJQcm9taXNlIHtcbiAgICAgICAgICAgIGxldCBwcm9taXNlID0gVmlzaWJpbGl0eUhlbHBlci5oaWRlKHRoaXMuY29tcG9uZW50KTtcblxuICAgICAgICAgICAgdGhpcy5vbkhpZGUoKTtcbiAgICAgICAgICAgIHByb21pc2UuZG9uZSgoKSA9PiB0aGlzLm9uSGlkZGVuKCkpO1xuXG4gICAgICAgICAgICByZXR1cm4gcHJvbWlzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHB1YmxpYyBzZXRWaXNpYmlsaXR5KHZpc2libGU6IGJvb2xlYW4pIHtcbiAgICAgICAgICAgIFZpc2liaWxpdHlIZWxwZXIuc2V0VmlzaWJpbGl0eSh0aGlzLmNvbXBvbmVudCwgdmlzaWJsZSk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogQ3JlYXRlcyB0aGUgYmFja2Ryb3AgaWYgbmVlZGVkXG4gICAgICAgICAqL1xuICAgICAgICBwcml2YXRlIGNyZWF0ZUJhY2tkcm9wSWZOZWVkZWQoKSB7XG4gICAgICAgICAgICAvLyBJZiB0aGVyZSdzIG5vIHByZXZpb3VzbHkgZXhpc3RpbmcgYmFja2Ryb3AgY3JlYXRlIGEgbmV3IG9uZVxuICAgICAgICAgICAgaWYgKCFIVE1MSGVscGVyLmhhc0NoaWxkV2l0aENsYXNzKHRoaXMuc2hvd2Nhc2UuY29udGFpbmVyLCBiYWNrZHJvcENsYXNzKSlcbiAgICAgICAgICAgICAgICBuZXcgUmlkZVN0eWxlclNob3djYXNlTW9kYWxCYWNrZHJvcCh0aGlzLnNob3djYXNlKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGV4cG9ydCBjbGFzcyBSaWRlU3R5bGVyU2hvd2Nhc2VNb2RhbEJhY2tkcm9wIGV4dGVuZHMgQ29tcG9uZW50QmFzZSB7XG4gICAgICAgIGNvbnN0cnVjdG9yKHNob3djYXNlSW5zdGFuY2U6UmlkZVN0eWxlclNob3djYXNlSW5zdGFuY2UpIHtcbiAgICAgICAgICAgIHN1cGVyKHNob3djYXNlSW5zdGFuY2UpO1xuXG4gICAgICAgICAgICAvLyBDcmVhdGUgdGhlIGJhY2tkcm9wXG4gICAgICAgICAgICB0aGlzLmJ1aWxkQmFja2Ryb3AoKTtcblxuICAgICAgICAgICAgLy8gVGhlIGJhY2tkcm9wIHN0YXJ0cyBvZmYgaGlkZGVuXG4gICAgICAgICAgICB0aGlzLnNldFZpc2liaWxpdHkoZmFsc2UpO1xuXG4gICAgICAgICAgICAvLyBBcHBlbmQgdGhlIGJhY2tkcm9wIHRvIHRoZSBzaG93Y2FzZSBjb250YWluZXJcbiAgICAgICAgICAgIHNob3djYXNlSW5zdGFuY2UuY29udGFpbmVyLmFwcGVuZENoaWxkKHRoaXMuY29tcG9uZW50KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHByaXZhdGUgYnVpbGRCYWNrZHJvcCgpIHtcbiAgICAgICAgICAgIHRoaXMuY29tcG9uZW50ID0gSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50V2l0aENsYXNzKCdkaXYnLCBiYWNrZHJvcENsYXNzKTtcblxuICAgICAgICAgICAgdGhpcy5jb21wb25lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgbGV0IHRvcFZpc2libGVNb2RhbCA9IEhUTUxIZWxwZXIubGFzdFNpYmxpbmdXaXRoQ2xhc3M8UmlkZVN0eWxlclNob3djYXNlTW9kYWwuTW9kYWxFbGVtZW50Pih0aGlzLmNvbXBvbmVudCwgbW9kYWxDbGFzcywgJ2luJyk7XG5cbiAgICAgICAgICAgICAgICBpZiAodG9wVmlzaWJsZU1vZGFsKSB7XG4gICAgICAgICAgICAgICAgICAgIHRvcFZpc2libGVNb2RhbC5tb2RhbC5oaWRlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBwcm90ZWN0ZWQgaW5pdGlhbGl6ZUNvbXBvbmVudCgpIHtcbiAgICAgICAgICAgIHRoaXMuZXZlbnRzLm9uKCdtb2RhbC1zaG93JywgZXZlbnQgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlKCk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdGhpcy5ldmVudHMub24oJ21vZGFsLWhpZGUnLCBldmVudCA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGUoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEhpZGUgb3Igc2hvdyB0aGUgYmFja2Ryb3AgYmFzZWQgb2ZmIHRoZSBudW1iZXIgb2YgdmlzaWJsZSBtb2RhbHNcbiAgICAgICAgICovXG4gICAgICAgIHByaXZhdGUgdXBkYXRlKCkge1xuICAgICAgICAgICAgbGV0IGhhc1Zpc2libGVNb2RhbDpib29sZWFuID0gSFRNTEhlbHBlci5oYXNTaWJsaW5nV2l0aENsYXNzKHRoaXMuY29tcG9uZW50LCBtb2RhbENsYXNzLCAnaW4nKTtcblxuICAgICAgICAgICAgdGhpc1toYXNWaXNpYmxlTW9kYWwgPyAnc2hvdycgOiAnaGlkZSddKCk7XG4gICAgICAgIH1cblxuICAgICAgICBwdWJsaWMgc2hvdygpOlJpZGVTdHlsZXJQcm9taXNlIHtcbiAgICAgICAgICAgIHJldHVybiBWaXNpYmlsaXR5SGVscGVyLnNob3codGhpcy5jb21wb25lbnQpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBwdWJsaWMgaGlkZSgpOlJpZGVTdHlsZXJQcm9taXNlIHtcbiAgICAgICAgICAgIHJldHVybiBWaXNpYmlsaXR5SGVscGVyLmhpZGUodGhpcy5jb21wb25lbnQpO1xuICAgICAgICB9XG5cbiAgICAgICAgcHVibGljIHNldFZpc2liaWxpdHkodmlzaWJsZTogYm9vbGVhbikge1xuICAgICAgICAgICAgVmlzaWJpbGl0eUhlbHBlci5zZXRWaXNpYmlsaXR5KHRoaXMuY29tcG9uZW50LCB2aXNpYmxlKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGV4cG9ydCBuYW1lc3BhY2UgUmlkZVN0eWxlclNob3djYXNlTW9kYWwge1xuICAgICAgICBleHBvcnQgaW50ZXJmYWNlIE1vZGFsRWxlbWVudCBleHRlbmRzIEhUTUxFbGVtZW50e1xuICAgICAgICAgICAgbW9kYWw6IFJpZGVTdHlsZXJTaG93Y2FzZU1vZGFsXG4gICAgICAgIH07XG5cbiAgICAgICAgZXhwb3J0IGludGVyZmFjZSBBY3Rpb24gZXh0ZW5kcyBIVE1MSGVscGVyLmNyZWF0ZUJ1dHRvbk9wdGlvbnMge1xuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBUaGUgYWN0aW9uIHRvIHByZWZvcm0gd2hlbiB0aGlzIGJ1dHRvbiBpcyBjbGlja2VkXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGFjdGlvbjogJ2hpZGUtbW9kYWwnfEZ1bmN0aW9uO1xuICAgICAgICB9XG5cbiAgICAgICAgZXhwb3J0IGludGVyZmFjZSBPcHRpb25zIHtcbiAgICAgICAgICAgIC8vIElmIHRydWUsIHRoZSBtb2RhbCB3aWxsIHJlbW92ZSBpdHNlbGYgZnJvbSB0aGUgRE9NIHdoZW4gaXQncyBoaWRkZW5cbiAgICAgICAgICAgIHJlbW92ZU9uSGlkZGVuPzogYm9vbGVhbjtcblxuICAgICAgICAgICAgLy8gSWYgdHJ1ZSwgZGlzcGxheSB0aGlzIG1vZGFsIHNob3VsZCB0YWtlIHVwIHRoZSBmdWxsIHNpemUgb2YgdGhlIHNob3djYXNlXG4gICAgICAgICAgICBmdWxsPzogYm9vbGVhbjtcblxuICAgICAgICAgICAgYWN0aW9ucz86IEFjdGlvbltdO1xuICAgICAgICB9XG4gICAgfVxufSJdfQ==

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var RideStylerShowcase;
(function (RideStylerShowcase) {
    var optionMenuClass = 'ridestyler-showcase-option-menu';
    var optionMenuOptionClass = optionMenuClass + '-option';
    var optionMenuOptionActiveClass = optionMenuOptionClass + '-active';
    var optionMenuLoadingClass = optionMenuClass + '-loading';

    var RideStylerShowcaseOptionMenu = function () {
        function RideStylerShowcaseOptionMenu(name, options) {
            var _this = this;

            _classCallCheck(this, RideStylerShowcaseOptionMenu);

            this.name = name;
            this.component = RideStylerShowcase.HTMLHelper.createElement({
                className: optionMenuClass
            });
            this.component.addEventListener('click', function (clickEvent) {
                return _this.onClicked(clickEvent);
            });
            if (options) this.setOptions(options);else this.setLoading(true);
        }

        _createClass(RideStylerShowcaseOptionMenu, [{
            key: 'setLoading',
            value: function setLoading(loading) {
                this.component.classList.toggle(optionMenuLoadingClass, loading);
            }
        }, {
            key: 'generateOptionElement',
            value: function generateOptionElement(option) {
                var optionElement = RideStylerShowcase.HTMLHelper.createElement('div', {
                    className: optionMenuOptionClass,
                    text: option.label
                });
                optionElement.value = option.value;
                return optionElement;
            }
        }, {
            key: 'clearOptions',
            value: function clearOptions() {
                RideStylerShowcase.HTMLHelper.empty(this.component);
            }
        }, {
            key: 'appendOptions',
            value: function appendOptions(options) {
                var _iteratorNormalCompletion = true;
                var _didIteratorError = false;
                var _iteratorError = undefined;

                try {
                    for (var _iterator = options[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
                        var option = _step.value;

                        this.component.appendChild(this.generateOptionElement(option));
                    }
                } catch (err) {
                    _didIteratorError = true;
                    _iteratorError = err;
                } finally {
                    try {
                        if (!_iteratorNormalCompletion && _iterator.return) {
                            _iterator.return();
                        }
                    } finally {
                        if (_didIteratorError) {
                            throw _iteratorError;
                        }
                    }
                }
            }
        }, {
            key: 'setOptions',
            value: function setOptions(options) {
                this.clearOptions();
                this.appendOptions(options);
                this.setLoading(false);
            }
        }, {
            key: 'setValue',
            value: function setValue(value) {
                for (var index = 0; index < this.component.children.length; index++) {
                    var optionElement = this.component.children[index];
                    var active = optionElement.value === value;
                    optionElement.classList.toggle(optionMenuOptionActiveClass, active);
                    if (active) this.value = value;
                }
            }
        }, {
            key: 'onClicked',
            value: function onClicked(clickEvent) {
                var target = clickEvent.target;
                if (!target.classList.contains(optionMenuOptionClass)) return; // The click was not on an option
                if (target.classList.contains(optionMenuOptionActiveClass)) return; // The click was on an active option
                var previouslySelectedOption = RideStylerShowcase.HTMLHelper.firstChildWithClass(this.component, optionMenuOptionActiveClass);
                var newSelectedOption = target;
                if (previouslySelectedOption) previouslySelectedOption.classList.remove(optionMenuOptionActiveClass);
                newSelectedOption.classList.add(optionMenuOptionActiveClass);
                this.value = newSelectedOption.value;
                if (typeof this.onChange === 'function') this.onChange(newSelectedOption.value);
            }
        }]);

        return RideStylerShowcaseOptionMenu;
    }();

    RideStylerShowcase.RideStylerShowcaseOptionMenu = RideStylerShowcaseOptionMenu;
})(RideStylerShowcase || (RideStylerShowcase = {}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvUmlkZVN0eWxlclNob3djYXNlT3B0aW9uTWVudS50cyJdLCJuYW1lcyI6WyJSaWRlU3R5bGVyU2hvd2Nhc2UiLCJvcHRpb25NZW51Q2xhc3MiLCJvcHRpb25NZW51T3B0aW9uQ2xhc3MiLCJvcHRpb25NZW51T3B0aW9uQWN0aXZlQ2xhc3MiLCJvcHRpb25NZW51TG9hZGluZ0NsYXNzIiwiUmlkZVN0eWxlclNob3djYXNlT3B0aW9uTWVudSIsIm5hbWUiLCJvcHRpb25zIiwiY29tcG9uZW50IiwiSFRNTEhlbHBlciIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc05hbWUiLCJhZGRFdmVudExpc3RlbmVyIiwib25DbGlja2VkIiwiY2xpY2tFdmVudCIsInNldE9wdGlvbnMiLCJzZXRMb2FkaW5nIiwibG9hZGluZyIsImNsYXNzTGlzdCIsInRvZ2dsZSIsIm9wdGlvbiIsIm9wdGlvbkVsZW1lbnQiLCJ0ZXh0IiwibGFiZWwiLCJ2YWx1ZSIsImVtcHR5IiwiYXBwZW5kQ2hpbGQiLCJnZW5lcmF0ZU9wdGlvbkVsZW1lbnQiLCJjbGVhck9wdGlvbnMiLCJhcHBlbmRPcHRpb25zIiwiaW5kZXgiLCJjaGlsZHJlbiIsImxlbmd0aCIsImFjdGl2ZSIsInRhcmdldCIsImNvbnRhaW5zIiwicHJldmlvdXNseVNlbGVjdGVkT3B0aW9uIiwiZmlyc3RDaGlsZFdpdGhDbGFzcyIsIm5ld1NlbGVjdGVkT3B0aW9uIiwicmVtb3ZlIiwiYWRkIiwib25DaGFuZ2UiXSwibWFwcGluZ3MiOiI7Ozs7QUFBQSxJQUFVQSxrQkFBVjtBQUFBLENBQUEsVUFBVUEsa0JBQVYsRUFBNEI7QUFDeEIsUUFBTUMsa0JBQWtCLGlDQUF4QjtBQUNBLFFBQU1DLHdCQUF3QkQsa0JBQWtCLFNBQWhEO0FBQ0EsUUFBTUUsOEJBQThCRCx3QkFBd0IsU0FBNUQ7QUFDQSxRQUFNRSx5QkFBeUJILGtCQUFrQixVQUFqRDs7QUFKd0IsUUFTeEJJLDRCQVR3QjtBQWVw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QUNBLG9CQUFJbUMsb0JBQWtDSixNQUF0QztBQUVBLG9CQUFJRSx3QkFBSixFQUE4QkEseUJBQXlCbEIsU0FBekIsQ0FBbUNxQixNQUFuQyxDQUEwQ3BDLDJCQUExQztBQUM5Qm1DLGtDQUFrQnBCLFNBQWxCLENBQTRCc0IsR0FBNUIsQ0FBZ0NyQywyQkFBaEM7QUFFQSxxQkFBS3FCLEtBQUwsR0FBYWMsa0JBQWtCZCxLQUEvQjtBQUVBLG9CQUFJLE9BQU8sS0FBS2lCLFFBQVosS0FBeUIsVUFBN0IsRUFBeUMsS0FBS0EsUUFBTCxDQUFjSCxrQkFBa0JkLEtBQWhDO0FBQzVDO0FBdkZtQjs7QUFBQTtBQUFBOztBQVNYeEIsdUJBQUFLLDRCQUFBLEdBQTRCQSw0QkFBNUI7QUEyRmhCLENBcEdELEVBQVVMLHVCQUFBQSxxQkFBa0IsRUFBbEIsQ0FBViIsImZpbGUiOiJzY3JpcHRzL2NvbXBvbmVudHMvUmlkZVN0eWxlclNob3djYXNlT3B0aW9uTWVudS5qcyIsInNvdXJjZXNDb250ZW50IjpbIm5hbWVzcGFjZSBSaWRlU3R5bGVyU2hvd2Nhc2Uge1xyXG4gICAgY29uc3Qgb3B0aW9uTWVudUNsYXNzID0gJ3JpZGVzdHlsZXItc2hvd2Nhc2Utb3B0aW9uLW1lbnUnO1xyXG4gICAgY29uc3Qgb3B0aW9uTWVudU9wdGlvbkNsYXNzID0gb3B0aW9uTWVudUNsYXNzICsgJy1vcHRpb24nO1xyXG4gICAgY29uc3Qgb3B0aW9uTWVudU9wdGlvbkFjdGl2ZUNsYXNzID0gb3B0aW9uTWVudU9wdGlvbkNsYXNzICsgJy1hY3RpdmUnO1xyXG4gICAgY29uc3Qgb3B0aW9uTWVudUxvYWRpbmdDbGFzcyA9IG9wdGlvbk1lbnVDbGFzcyArICctbG9hZGluZyc7XHJcblxyXG4gICAgaW1wb3J0IE9wdGlvbiA9IFJpZGVTdHlsZXJTaG93Y2FzZU9wdGlvbk1lbnUuT3B0aW9uO1xyXG4gICAgaW1wb3J0IE9wdGlvbkVsZW1lbnQgPSBSaWRlU3R5bGVyU2hvd2Nhc2VPcHRpb25NZW51Lk9wdGlvbkVsZW1lbnQ7XHJcblxyXG4gICAgZXhwb3J0IGNsYXNzIFJpZGVTdHlsZXJTaG93Y2FzZU9wdGlvbk1lbnUgaW1wbGVtZW50cyBJQ29tcG9uZW50IHtcclxuICAgICAgICBjb21wb25lbnQ6SFRNTEVsZW1lbnQ7XHJcblxyXG4gICAgICAgIHB1YmxpYyByZWFkb25seSBuYW1lOnN0cmluZztcclxuICAgICAgICBwdWJsaWMgdmFsdWU6YW55O1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0cnVjdG9yKG5hbWU6c3RyaW5nLCBvcHRpb25zPzogT3B0aW9uW10pIHtcclxuICAgICAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuY29tcG9uZW50ID0gSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KHtcclxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogb3B0aW9uTWVudUNsYXNzXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5jb21wb25lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjbGlja0V2ZW50ID0+IHRoaXMub25DbGlja2VkKGNsaWNrRXZlbnQpKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChvcHRpb25zKSB0aGlzLnNldE9wdGlvbnMob3B0aW9ucyk7XHJcbiAgICAgICAgICAgIGVsc2UgdGhpcy5zZXRMb2FkaW5nKHRydWUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHNldExvYWRpbmcobG9hZGluZzpib29sZWFuKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY29tcG9uZW50LmNsYXNzTGlzdC50b2dnbGUob3B0aW9uTWVudUxvYWRpbmdDbGFzcywgbG9hZGluZyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGdlbmVyYXRlT3B0aW9uRWxlbWVudChvcHRpb246T3B0aW9uKTpIVE1MRWxlbWVudCB7XHJcbiAgICAgICAgICAgIGxldCBvcHRpb25FbGVtZW50Ok9wdGlvbkVsZW1lbnQgPSBIVE1MSGVscGVyLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcclxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogb3B0aW9uTWVudU9wdGlvbkNsYXNzLFxyXG4gICAgICAgICAgICAgICAgdGV4dDogb3B0aW9uLmxhYmVsXHJcbiAgICAgICAgICAgIH0pIGFzIE9wdGlvbkVsZW1lbnQ7XHJcblxyXG4gICAgICAgICAgICBvcHRpb25FbGVtZW50LnZhbHVlID0gb3B0aW9uLnZhbHVlO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIG9wdGlvbkVsZW1lbnQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGNsZWFyT3B0aW9ucygpIHtcclxuICAgICAgICAgICAgSFRNTEhlbHBlci5lbXB0eSh0aGlzLmNvbXBvbmVudCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGFwcGVuZE9wdGlvbnMob3B0aW9uczogT3B0aW9uW10pIHtcclxuICAgICAgICAgICAgZm9yIChjb25zdCBvcHRpb24gb2Ygb3B0aW9ucykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jb21wb25lbnQuYXBwZW5kQ2hpbGQodGhpcy5nZW5lcmF0ZU9wdGlvbkVsZW1lbnQob3B0aW9uKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzZXRPcHRpb25zKG9wdGlvbnM6IE9wdGlvbltdKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2xlYXJPcHRpb25zKCk7XHJcbiAgICAgICAgICAgIHRoaXMuYXBwZW5kT3B0aW9ucyhvcHRpb25zKTtcclxuICAgICAgICAgICAgdGhpcy5zZXRMb2FkaW5nKGZhbHNlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzZXRWYWx1ZSh2YWx1ZTogYW55KSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCB0aGlzLmNvbXBvbmVudC5jaGlsZHJlbi5sZW5ndGg7IGluZGV4KyspIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG9wdGlvbkVsZW1lbnQgPSB0aGlzLmNvbXBvbmVudC5jaGlsZHJlbltpbmRleF0gYXMgT3B0aW9uRWxlbWVudDtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGFjdGl2ZSA9IG9wdGlvbkVsZW1lbnQudmFsdWUgPT09IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBvcHRpb25FbGVtZW50LmNsYXNzTGlzdC50b2dnbGUob3B0aW9uTWVudU9wdGlvbkFjdGl2ZUNsYXNzLCBhY3RpdmUpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChhY3RpdmUpIHRoaXMudmFsdWUgPSB2YWx1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG9uQ2hhbmdlOihuZXdWYWx1ZTphbnkpPT52b2lkO1xyXG5cclxuICAgICAgICBwcml2YXRlIG9uQ2xpY2tlZChjbGlja0V2ZW50OiBNb3VzZUV2ZW50KSB7XHJcbiAgICAgICAgICAgIGxldCB0YXJnZXQ6SFRNTEVsZW1lbnQgPSBjbGlja0V2ZW50LnRhcmdldCBhcyBIVE1MRWxlbWVudDtcclxuXHJcbiAgICAgICAgICAgIGlmICghdGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhvcHRpb25NZW51T3B0aW9uQ2xhc3MpKSByZXR1cm47IC8vIFRoZSBjbGljayB3YXMgbm90IG9uIGFuIG9wdGlvblxyXG4gICAgICAgICAgICBpZiAodGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhvcHRpb25NZW51T3B0aW9uQWN0aXZlQ2xhc3MpKSByZXR1cm47IC8vIFRoZSBjbGljayB3YXMgb24gYW4gYWN0aXZlIG9wdGlvblxyXG5cclxuICAgICAgICAgICAgbGV0IHByZXZpb3VzbHlTZWxlY3RlZE9wdGlvbjpPcHRpb25FbGVtZW50ID0gSFRNTEhlbHBlci5maXJzdENoaWxkV2l0aENsYXNzKHRoaXMuY29tcG9uZW50LCBvcHRpb25NZW51T3B0aW9uQWN0aXZlQ2xhc3MpO1xyXG4gICAgICAgICAgICBsZXQgbmV3U2VsZWN0ZWRPcHRpb246T3B0aW9uRWxlbWVudCA9IHRhcmdldCBhcyBPcHRpb25FbGVtZW50O1xyXG5cclxuICAgICAgICAgICAgaWYgKHByZXZpb3VzbHlTZWxlY3RlZE9wdGlvbikgcHJldmlvdXNseVNlbGVjdGVkT3B0aW9uLmNsYXNzTGlzdC5yZW1vdmUob3B0aW9uTWVudU9wdGlvbkFjdGl2ZUNsYXNzKTtcclxuICAgICAgICAgICAgbmV3U2VsZWN0ZWRPcHRpb24uY2xhc3NMaXN0LmFkZChvcHRpb25NZW51T3B0aW9uQWN0aXZlQ2xhc3MpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy52YWx1ZSA9IG5ld1NlbGVjdGVkT3B0aW9uLnZhbHVlO1xyXG5cclxuICAgICAgICAgICAgaWYgKHR5cGVvZiB0aGlzLm9uQ2hhbmdlID09PSAnZnVuY3Rpb24nKSB0aGlzLm9uQ2hhbmdlKG5ld1NlbGVjdGVkT3B0aW9uLnZhbHVlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZXhwb3J0IG5hbWVzcGFjZSBSaWRlU3R5bGVyU2hvd2Nhc2VPcHRpb25NZW51IHtcclxuICAgICAgICBleHBvcnQgaW50ZXJmYWNlIE9wdGlvbiB7XHJcbiAgICAgICAgICAgIGxhYmVsOiBzdHJpbmc7XHJcbiAgICAgICAgICAgIHZhbHVlOiBhbnk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBleHBvcnQgaW50ZXJmYWNlIE9wdGlvbkVsZW1lbnQgZXh0ZW5kcyBIVE1MRWxlbWVudCB7XHJcbiAgICAgICAgICAgIHZhbHVlPzogYW55O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSJdfQ==

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var RideStylerShowcase;
(function (RideStylerShowcase) {
    var prevButtonClass = 'ridestyler-showcase-pagination-prev';
    var nextButtonClass = 'ridestyler-showcase-pagination-next';
    var optionClass = 'ridestyler-showcase-pagination-option';
    var optionSelectedClass = optionClass + '-selected';
    var optionLoadingClass = optionClass + '-loading';
    var optionLoaderClass = optionClass + '-loader';
    var noResultsClass = optionClass + '-no-results';

    var RideStylerShowcasePaginationComponent = function (_RideStylerShowcase$C) {
        _inherits(RideStylerShowcasePaginationComponent, _RideStylerShowcase$C);

        function RideStylerShowcasePaginationComponent() {
            _classCallCheck(this, RideStylerShowcasePaginationComponent);

            /**
             * If true, this has more results that it can load
             */
            var _this = _possibleConstructorReturn(this, (RideStylerShowcasePaginationComponent.__proto__ || Object.getPrototypeOf(RideStylerShowcasePaginationComponent)).apply(this, arguments));

            _this.hasMoreResults = true;
            /**
             * If true, this is loading
             */
            _this.isLoading = false;
            /**
             * If true, the first load is being preformed or hasn't been preformed yet.
             */
            _this.isFirstLoad = true;
            /**
             * Set this to false to not show the no results message
             */
            _this.enableShowNoResults = true;
            return _this;
        }

        _createClass(RideStylerShowcasePaginationComponent, [{
            key: 'initializeComponent',
            value: function initializeComponent() {
                var _this2 = this;

                this.component = RideStylerShowcase.HTMLHelper.createElement('div', {
                    className: 'ridestyler-showcase-pagination'
                });
                this.optionContainer = RideStylerShowcase.HTMLHelper.createElement('div', {
                    className: 'ridestyler-showcase-pagination-wrapper',
                    appendTo: this.component
                });
                this.prevButton = RideStylerShowcase.HTMLHelper.createElement('button', {
                    className: prevButtonClass,
                    appendTo: this.component,
                    append: RideStylerShowcase.HTMLHelper.createIcon('chevron-left')
                });
                this.nextButton = RideStylerShowcase.HTMLHelper.createElement('button', {
                    className: nextButtonClass,
                    appendTo: this.component,
                    append: RideStylerShowcase.HTMLHelper.createIcon('chevron-right')
                });
                // Listen for clicks on options
                this.component.addEventListener('click', function (event) {
                    return _this2.onComponentClick(event);
                });
                // Run clear options to get the loader
                this.clearOptions();
                // Load pagination after this component has been setup
                setTimeout(function () {
                    return _this2.loadMore();
                }, 0);
                RideStylerShowcase.ScrollHelper.attachWheelListener(this.component, function (event) {
                    var delta = event.deltaX || event.deltaY;
                    var _optionContainer = _this2.optionContainer,
                        scrollLeft = _optionContainer.scrollLeft,
                        scrollWidth = _optionContainer.scrollWidth,
                        offsetWidth = _optionContainer.offsetWidth;

                    var newValue = Math.min(scrollLeft + delta, scrollWidth - offsetWidth);
                    _this2.optionContainer.scrollLeft = newValue;
                    _this2.touchScrollHandler.setValues(newValue, 0);
                    _this2.onScroll();
                });
                this.touchScrollHandler = new Impetus({
                    source: this.optionContainer,
                    bounce: false,
                    multiplier: -1,
                    update: function update(x, y) {
                        _this2.optionContainer.scrollLeft = Math.floor(x);
                        _this2.optionContainer.scrollTop = y;
                        _this2.onScroll();
                    },
                    boundY: [0, 0]
                });
            }
        }, {
            key: 'loadMore',
            value: function loadMore() {
                var _this3 = this;

                return this._loadMore().always(function () {
                    _this3.clearOptionLoader();
                    _this3.updateBounds();
                });
            }
        }, {
            key: 'updateBounds',
            value: function updateBounds() {
                var _optionContainer2 = this.optionContainer,
                    scrollWidth = _optionContainer2.scrollWidth,
                    offsetWidth = _optionContainer2.offsetWidth;

                this.touchScrollHandler.setBoundX([0, scrollWidth - offsetWidth]);
            }
        }, {
            key: 'onScroll',
            value: function onScroll() {
                this.updatePaginationButtons();
                var optionContainer = this.optionContainer;
                var reachedEndTolerance = 10;
                if (optionContainer.scrollLeft >= optionContainer.scrollWidth - optionContainer.offsetWidth - reachedEndTolerance) {
                    this.onEndVisible();
                }
                this.updateBounds();
            }
        }, {
            key: 'onEndVisible',
            value: function onEndVisible() {
                if (!this.isLoading && this.hasMoreResults) {
                    this.addOptionLoader();
                    this.updateBounds();
                    this.loadMore();
                }
            }
        }, {
            key: 'onComponentClick',
            value: function onComponentClick(event) {
                var currentTarget = event.target;
                // Iterate through parents until we've reached the bound element
                while (currentTarget !== this.component) {
                    if (currentTarget.classList.contains(optionClass)) {
                        this.onOptionClick(currentTarget);
                        return;
                    } else if (currentTarget === this.prevButton) {
                        this.previousPage();
                        return;
                    } else if (currentTarget === this.nextButton) {
                        this.nextPage();
                        return;
                    }
                    currentTarget = currentTarget.parentElement;
                }
            }
        }, {
            key: 'updatePaginationButtons',
            value: function updatePaginationButtons() {
                var optionContainer = this.optionContainer;
                this.prevButton.disabled = optionContainer.scrollLeft === 0;
                this.nextButton.disabled = optionContainer.scrollLeft >= optionContainer.scrollWidth - optionContainer.clientWidth - 1;
            }
            /**
             * Adds a spinner to the end of the list indicating something is loading
             */

        }, {
            key: 'addOptionLoader',
            value: function addOptionLoader() {
                this.optionContainer.appendChild(RideStylerShowcase.HTMLHelper.createElement('div', {
                    className: optionClass + ' ' + optionLoaderClass
                }));
            }
        }, {
            key: 'clearOptionLoader',
            value: function clearOptionLoader() {
                RideStylerShowcase.HTMLHelper.removeChildrenWithClasses(this.optionContainer, optionLoaderClass);
            }
        }, {
            key: 'addOptionElements',
            value: function addOptionElements(elements) {
                var hasNoResults = false;
                if (elements instanceof DocumentFragment) {
                    hasNoResults = elements.childNodes.length === 0;
                    this.optionContainer.appendChild(elements);
                } else if (elements instanceof Node) {
                    this.optionContainer.appendChild(elements);
                } else {
                    if (!elements.length) {
                        hasNoResults = true;
                    } else {
                        var _iteratorNormalCompletion = true;
                        var _didIteratorError = false;
                        var _iteratorError = undefined;

                        try {
                            for (var _iterator = elements[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
                                var element = _step.value;

                                this.optionContainer.appendChild(element);
                            }
                        } catch (err) {
                            _didIteratorError = true;
                            _iteratorError = err;
                        } finally {
                            try {
                                if (!_iteratorNormalCompletion && _iterator.return) {
                                    _iterator.return();
                                }
                            } finally {
                                if (_didIteratorError) {
                                    throw _iteratorError;
                                }
                            }
                        }
                    }
                }
                if (hasNoResults) {
                    this.showNoResults();
                }
                this.clearOptionLoader();
                this.update();
                this.isFirstLoad = false;
            }
        }, {
            key: 'showNoResults',
            value: function showNoResults() {
                this.noResultsElement = RideStylerShowcase.HTMLHelper.createElement('div', {
                    className: optionClass + ' ' + noResultsClass,
                    text: RideStylerShowcase.strings.getString('no-results'),
                    appendTo: this.optionContainer
                });
            }
        }, {
            key: 'clearOptions',
            value: function clearOptions() {
                RideStylerShowcase.HTMLHelper.empty(this.optionContainer);
                this.addOptionLoader();
                this.isFirstLoad = true;
            }
        }, {
            key: 'update',
            value: function update() {
                this.updatePaginationButtons();
                this.updateBounds();
            }
        }, {
            key: 'scrollTo',
            value: function scrollTo(newLeft) {
                var _this4 = this;

                var startLeft = this.optionContainer.scrollLeft;
                var duration = Math.abs(startLeft - newLeft) / 2;
                TinyAnimate.animate(startLeft, newLeft, duration, function (currentLeft) {
                    _this4.optionContainer.scrollLeft = currentLeft;
                    _this4.touchScrollHandler.setValues(newLeft, 0);
                }, 'easeOutCubic', function () {
                    return _this4.update();
                });
            }
        }, {
            key: 'previousPage',
            value: function previousPage() {
                this.scrollTo(this.optionContainer.scrollLeft - this.optionContainer.clientWidth);
            }
        }, {
            key: 'nextPage',
            value: function nextPage() {
                this.scrollTo(this.optionContainer.scrollLeft + this.optionContainer.clientWidth);
                var optionContainer = this.optionContainer;
                var reachedEndTolerance = 5;
                if (optionContainer.scrollLeft >= optionContainer.scrollWidth - optionContainer.offsetWidth - reachedEndTolerance) {
                    this.onEndVisible();
                }
                this.updateBounds();
            }
        }, {
            key: 'selectOption',
            value: function selectOption(optionElement) {
                if (this.selectedOption === optionElement) return; // Already selected
                var oldOptionElement = this.selectedOption;
                if (oldOptionElement) oldOptionElement.classList.remove(optionSelectedClass, optionLoadingClass);
                optionElement.classList.add(optionSelectedClass);
                this.selectedOption = optionElement;
            }
            /**
             * Set or remove the loading class from the currently selected option
             * @param isLoading If true, add the loading class, otherwise remove it
             */

        }, {
            key: 'setOptionIsLoading',
            value: function setOptionIsLoading(isLoading) {
                if (!this.selectedOption) return;
                this.selectedOption.classList[isLoading ? 'add' : 'remove'](optionLoadingClass);
            }
            /**
             * Called when an option element is clicked on.
             * @param optionElement The option element that was clicked on
             */

        }, {
            key: 'onOptionClick',
            value: function onOptionClick(optionElement) {
                this.selectOption(optionElement);
            }
        }]);

        return RideStylerShowcasePaginationComponent;
    }(RideStylerShowcase.ComponentBase);

    RideStylerShowcase.RideStylerShowcasePaginationComponent = RideStylerShowcasePaginationComponent;
})(RideStylerShowcase || (RideStylerShowcase = {}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvUmlkZVN0eWxlclNob3djYXNlUGFnaW5hdGlvbkNvbXBvbmVudC50cyIsInNjcmlwdHMvY29tcG9uZW50cy9SaWRlU3R5bGVyU2hvd2Nhc2VQYWdpbmF0aW9uQ29tcG9uZW50LmpzIl0sIm5hbWVzIjpbIlJpZGVTdHlsZXJTaG93Y2FzZSIsInByZXZCdXR0b25DbGFzcyIsIm5leHRCdXR0b25DbGFzcyIsIm9wdGlvbkNsYXNzIiwib3B0aW9uU2VsZWN0ZWRDbGFzcyIsIm9wdGlvbkxvYWRpbmdDbGFzcyIsIm9wdGlvbkxvYWRlckNsYXNzIiwibm9SZXN1bHRzQ2xhc3MiLCJSaWRlU3R5bGVyU2hvd2Nhc2VQYWdpbmF0aW9uQ29tcG9uZW50IiwiYXJndW1lbnRzIiwiaGFzTW9yZVJlc3VsdHMiLCJpc0xvYWRpbmciLCJpc0ZpcnN0TG9hZCIsImVuYWJsZVNob3dOb1Jlc3VsdHMiLCJjb21wb25lbnQiLCJIVE1MSGVscGVyIiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTmFtZSIsIm9wdGlvbkNvbnRhaW5lciIsImFwcGVuZFRvIiwicHJldkJ1dHRvbiIsImFwcGVuZCIsImNyZWF0ZUljb24iLCJuZXh0QnV0dG9uIiwiYWRkRXZlbnRMaXN0ZW5lciIsIm9uQ29tcG9uZW50Q2xpY2siLCJldmVudCIsImNsZWFyT3B0aW9ucyIsInNldFRpbWVvdXQiLCJsb2FkTW9yZSIsIlNjcm9sbEhlbHBlciIsImF0dGFjaFdoZWVsTGlzdGVuZXIiLCJkZWx0YSIsImRlbHRhWCIsImRlbHRhWSIsInNjcm9sbExlZnQiLCJzY3JvbGxXaWR0aCIsIm9mZnNldFdpZHRoIiwibmV3VmFsdWUiLCJNYXRoIiwibWluIiwidG91Y2hTY3JvbGxIYW5kbGVyIiwic2V0VmFsdWVzIiwib25TY3JvbGwiLCJJbXBldHVzIiwic291cmNlIiwiYm91bmNlIiwibXVsdGlwbGllciIsInVwZGF0ZSIsIngiLCJ5IiwiZmxvb3IiLCJzY3JvbGxUb3AiLCJib3VuZFkiLCJfbG9hZE1vcmUiLCJhbHdheXMiLCJjbGVhck9wdGlvbkxvYWRlciIsInVwZGF0ZUJvdW5kcyIsInNldEJvdW5kWCIsInVwZGF0ZVBhZ2luYXRpb25CdXR0b25zIiwicmVhY2hlZEVuZFRvbGVyYW5jZSIsIm9uRW5kVmlzaWJsZSIsImFkZE9wdGlvbkxvYWRlciIsImN1cnJlbnRUYXJnZXQiLCJ0YXJnZXQiLCJjbGFzc0xpc3QiLCJjb250YWlucyIsIm9uT3B0aW9uQ2xpY2siLCJwcmV2aW91c1BhZ2UiLCJuZXh0UGFnZSIsInBhcmVudEVsZW1lbnQiLCJkaXNhYmxlZCIsImNsaWVudFdpZHRoIiwiYXBwZW5kQ2hpbGQiLCJyZW1vdmVDaGlsZHJlbldpdGhDbGFzc2VzIiwiZWxlbWVudHMiLCJoYXNOb1Jlc3VsdHMiLCJEb2N1bWVudEZyYWdtZW50IiwiY2hpbGROb2RlcyIsImxlbmd0aCIsIk5vZGUiLCJlbGVtZW50Iiwic2hvd05vUmVzdWx0cyIsIm5vUmVzdWx0c0VsZW1lbnQiLCJ0ZXh0Iiwic3RyaW5ncyIsImdldFN0cmluZyIsImVtcHR5IiwibmV3TGVmdCIsInN0YXJ0TGVmdCIsImR1cmF0aW9uIiwiYWJzIiwiVGlueUFuaW1hdGUiLCJhbmltYXRlIiwiY3VycmVudExlZnQiLCJzY3JvbGxUbyIsIm9wdGlvbkVsZW1lbnQiLCJzZWxlY3RlZE9wdGlvbiIsIm9sZE9wdGlvbkVsZW1lbnQiLCJyZW1vdmUiLCJhZGQiLCJzZWxlY3RPcHRpb24iLCJDb21wb25lbnRCYXNlIl0sIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFBLElBQVVBLGtCQUFWO0FBQUEsQ0FBQSxVQUFVQSxrQkFBVixFQUE0QjtBQUN4QixRQUFNQyxrQkFBa0IscUNBQXhCO0FBQ0EsUUFBTUMsa0JBQWtCLHFDQUF4QjtBQUNBLFFBQU1DLGNBQWMsdUNBQXBCO0FBQ0EsUUFBTUMsc0JBQXNCRCxjQUFjLFdBQTFDO0FBQ0EsUUFBTUUscUJBQXFCRixjQUFjLFVBQXpDO0FBQ0EsUUFBTUcsb0JBQW9CSCxjQUFjLFNBQXhD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ekMsb0JBQUksS0FBS0MsY0FBTCxLQUF3QkQsYUFBNUIsRUFBMkMsT0FERixDQUNVO0FBRW5ELG9CQUFJRSxtQkFBbUIsS0FBS0QsY0FBNUI7QUFFQSxvQkFBSUMsZ0JBQUosRUFDSUEsaUJBQWlCakMsU0FBakIsQ0FBMkJrQyxNQUEzQixDQUFrQy9GLG1CQUFsQyxFQUF1REMsa0JBQXZEO0FBRUoyRiw4QkFBYy9CLFNBQWQsQ0FBd0JtQyxHQUF4QixDQUE0QmhHLG1CQUE1QjtBQUVBLHFCQUFLNkYsY0FBTCxHQUFzQkQsYUFBdEI7QUFDSDtBQUVEOzs7OztBQTlQb0I7QUFBQTtBQUFBLCtDQWtRTXJGLFNBbFFOLEVBa1F1QjtBQUN2QyxvQkFBSSxDQUFDLEtBQUtzRixjQUFWLEVBQTBCO0FBRTFCLHFCQUFLQSxjQUFMLENBQW9CaEMsU0FBcEIsQ0FBOEJ0RCxZQUFZLEtBQVosR0FBb0IsUUFBbEQsRUFBNEROLGtCQUE1RDtBQUNIO0FBRUQ7Ozs7O0FBeFFvQjtBQUFBO0FBQUEsMENBNFFJMkYsYUE1UUosRUE0UTZCO0FBQzdDLHFCQUFLSyxZQUFMLENBQWtCTCxhQUFsQjtBQUNIO0FBOVFtQjs7QUFBQTtBQUFBLE1BUzRDaEcsbUJBQUFzRyxhQVQ1Qzs7QUFTRnRHLHVCQUFBUSxxQ0FBQSxHQUFxQ0EscUNBQXJDO0FBdVF6QixDQWhSRCxFQUFVUix1QkFBQUEscUJBQWtCLEVBQWxCLENBQVYiLCJmaWxlIjoic2NyaXB0cy9jb21wb25lbnRzL1JpZGVTdHlsZXJTaG93Y2FzZVBhZ2luYXRpb25Db21wb25lbnQuanMiLCJzb3VyY2VzQ29udGVudCI6WyJuYW1lc3BhY2UgUmlkZVN0eWxlclNob3djYXNlIHtcclxuICAgIGNvbnN0IHByZXZCdXR0b25DbGFzcyA9ICdyaWRlc3R5bGVyLXNob3djYXNlLXBhZ2luYXRpb24tcHJldic7XHJcbiAgICBjb25zdCBuZXh0QnV0dG9uQ2xhc3MgPSAncmlkZXN0eWxlci1zaG93Y2FzZS1wYWdpbmF0aW9uLW5leHQnO1xyXG4gICAgY29uc3Qgb3B0aW9uQ2xhc3MgPSAncmlkZXN0eWxlci1zaG93Y2FzZS1wYWdpbmF0aW9uLW9wdGlvbic7XHJcbiAgICBjb25zdCBvcHRpb25TZWxlY3RlZENsYXNzID0gb3B0aW9uQ2xhc3MgKyAnLXNlbGVjdGVkJztcclxuICAgIGNvbnN0IG9wdGlvbkxvYWRpbmdDbGFzcyA9IG9wdGlvbkNsYXNzICsgJy1sb2FkaW5nJztcclxuICAgIGNvbnN0IG9wdGlvbkxvYWRlckNsYXNzID0gb3B0aW9uQ2xhc3MgKyAnLWxvYWRlcic7XHJcbiAgICBjb25zdCBub1Jlc3VsdHNDbGFzcyA9IG9wdGlvbkNsYXNzICsgJy1uby1yZXN1bHRzJ1xyXG5cclxuICAgIGV4cG9ydCBhYnN0cmFjdCBjbGFzcyBSaWRlU3R5bGVyU2hvd2Nhc2VQYWdpbmF0aW9uQ29tcG9uZW50IGV4dGVuZHMgQ29tcG9uZW50QmFzZSB7XHJcbiAgICAgICAgcHJvdGVjdGVkIG9wdGlvbkNvbnRhaW5lcjpIVE1MRWxlbWVudDtcclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIHNlbGVjdGVkT3B0aW9uOkhUTUxFbGVtZW50O1xyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgcHJldkJ1dHRvbjpIVE1MQnV0dG9uRWxlbWVudDtcclxuICAgICAgICBwcm90ZWN0ZWQgbmV4dEJ1dHRvbjpIVE1MQnV0dG9uRWxlbWVudDtcclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIHRvdWNoU2Nyb2xsSGFuZGxlcjpJbXBldHVzO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBJZiB0cnVlLCB0aGlzIGhhcyBtb3JlIHJlc3VsdHMgdGhhdCBpdCBjYW4gbG9hZFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHByb3RlY3RlZCBoYXNNb3JlUmVzdWx0czogYm9vbGVhbiA9IHRydWU7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogSWYgdHJ1ZSwgdGhpcyBpcyBsb2FkaW5nXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHJvdGVjdGVkIGlzTG9hZGluZzogYm9vbGVhbiA9IGZhbHNlO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIElmIHRydWUsIHRoZSBmaXJzdCBsb2FkIGlzIGJlaW5nIHByZWZvcm1lZCBvciBoYXNuJ3QgYmVlbiBwcmVmb3JtZWQgeWV0LlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHByb3RlY3RlZCBpc0ZpcnN0TG9hZDpib29sZWFuID0gdHJ1ZTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBTZXQgdGhpcyB0byBmYWxzZSB0byBub3Qgc2hvdyB0aGUgbm8gcmVzdWx0cyBtZXNzYWdlXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHJvdGVjdGVkIGVuYWJsZVNob3dOb1Jlc3VsdHM6Ym9vbGVhbiA9IHRydWU7XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBpbml0aWFsaXplQ29tcG9uZW50KCkge1xyXG4gICAgICAgICAgICB0aGlzLmNvbXBvbmVudCA9IEhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCgnZGl2Jywge1xyXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAncmlkZXN0eWxlci1zaG93Y2FzZS1wYWdpbmF0aW9uJ1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdGhpcy5vcHRpb25Db250YWluZXIgPSBIVE1MSGVscGVyLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcclxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ3JpZGVzdHlsZXItc2hvd2Nhc2UtcGFnaW5hdGlvbi13cmFwcGVyJyxcclxuICAgICAgICAgICAgICAgIGFwcGVuZFRvOiB0aGlzLmNvbXBvbmVudCxcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnByZXZCdXR0b24gPSBIVE1MSGVscGVyLmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicsIHtcclxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogcHJldkJ1dHRvbkNsYXNzLFxyXG4gICAgICAgICAgICAgICAgYXBwZW5kVG86IHRoaXMuY29tcG9uZW50LFxyXG4gICAgICAgICAgICAgICAgYXBwZW5kOiBIVE1MSGVscGVyLmNyZWF0ZUljb24oJ2NoZXZyb24tbGVmdCcpXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgdGhpcy5uZXh0QnV0dG9uID0gSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KCdidXR0b24nLCB7XHJcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IG5leHRCdXR0b25DbGFzcyxcclxuICAgICAgICAgICAgICAgIGFwcGVuZFRvOiB0aGlzLmNvbXBvbmVudCxcclxuICAgICAgICAgICAgICAgIGFwcGVuZDogSFRNTEhlbHBlci5jcmVhdGVJY29uKCdjaGV2cm9uLXJpZ2h0JylcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAvLyBMaXN0ZW4gZm9yIGNsaWNrcyBvbiBvcHRpb25zXHJcbiAgICAgICAgICAgIHRoaXMuY29tcG9uZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZXZlbnQgPT4gdGhpcy5vbkNvbXBvbmVudENsaWNrKGV2ZW50KSk7XHJcblxyXG4gICAgICAgICAgICAvLyBSdW4gY2xlYXIgb3B0aW9ucyB0byBnZXQgdGhlIGxvYWRlclxyXG4gICAgICAgICAgICB0aGlzLmNsZWFyT3B0aW9ucygpO1xyXG5cclxuICAgICAgICAgICAgLy8gTG9hZCBwYWdpbmF0aW9uIGFmdGVyIHRoaXMgY29tcG9uZW50IGhhcyBiZWVuIHNldHVwXHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gdGhpcy5sb2FkTW9yZSgpLCAwKTtcclxuXHJcbiAgICAgICAgICAgIFNjcm9sbEhlbHBlci5hdHRhY2hXaGVlbExpc3RlbmVyKHRoaXMuY29tcG9uZW50LCBldmVudCA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBkZWx0YSA9IGV2ZW50LmRlbHRhWCB8fCBldmVudC5kZWx0YVk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB7c2Nyb2xsTGVmdCwgc2Nyb2xsV2lkdGgsIG9mZnNldFdpZHRofSA9IHRoaXMub3B0aW9uQ29udGFpbmVyO1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IG5ld1ZhbHVlID0gTWF0aC5taW4oc2Nyb2xsTGVmdCArIGRlbHRhLCBzY3JvbGxXaWR0aCAtIG9mZnNldFdpZHRoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMub3B0aW9uQ29udGFpbmVyLnNjcm9sbExlZnQgPSBuZXdWYWx1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLnRvdWNoU2Nyb2xsSGFuZGxlci5zZXRWYWx1ZXMobmV3VmFsdWUsIDApO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vblNjcm9sbCgpO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMudG91Y2hTY3JvbGxIYW5kbGVyID0gbmV3IEltcGV0dXMoe1xyXG4gICAgICAgICAgICAgICAgc291cmNlOiB0aGlzLm9wdGlvbkNvbnRhaW5lcixcclxuICAgICAgICAgICAgICAgIGJvdW5jZTogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBtdWx0aXBsaWVyOiAtMSxcclxuICAgICAgICAgICAgICAgIHVwZGF0ZTogKHgsIHkpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm9wdGlvbkNvbnRhaW5lci5zY3JvbGxMZWZ0ID0gTWF0aC5mbG9vcih4KTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm9wdGlvbkNvbnRhaW5lci5zY3JvbGxUb3AgPSB5O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm9uU2Nyb2xsKCk7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgYm91bmRZOiBbMCwgMF1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBJbXBsZW1lbnQgdGhpcyB0byBsb2FkIGFkZGl0aW9uYWwgcmVzdWx0c1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHByb3RlY3RlZCBhYnN0cmFjdCBfbG9hZE1vcmUoKTpSaWRlU3R5bGVyUHJvbWlzZTtcclxuICAgICAgICBwdWJsaWMgbG9hZE1vcmUoKTpSaWRlU3R5bGVyUHJvbWlzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9sb2FkTW9yZSgpLmFsd2F5cygoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNsZWFyT3B0aW9uTG9hZGVyKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUJvdW5kcygpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB1cGRhdGVCb3VuZHMoKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHtzY3JvbGxXaWR0aCwgb2Zmc2V0V2lkdGh9ID0gdGhpcy5vcHRpb25Db250YWluZXI7XHJcbiAgICAgICAgICAgIHRoaXMudG91Y2hTY3JvbGxIYW5kbGVyLnNldEJvdW5kWChbMCwgc2Nyb2xsV2lkdGggLSBvZmZzZXRXaWR0aF0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBvblNjcm9sbCgpIHtcclxuICAgICAgICAgICAgdGhpcy51cGRhdGVQYWdpbmF0aW9uQnV0dG9ucygpO1xyXG5cclxuICAgICAgICAgICAgbGV0IG9wdGlvbkNvbnRhaW5lciA9IHRoaXMub3B0aW9uQ29udGFpbmVyO1xyXG4gICAgICAgICAgICBjb25zdCByZWFjaGVkRW5kVG9sZXJhbmNlID0gMTA7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZiAob3B0aW9uQ29udGFpbmVyLnNjcm9sbExlZnQgPj0gb3B0aW9uQ29udGFpbmVyLnNjcm9sbFdpZHRoIC0gb3B0aW9uQ29udGFpbmVyLm9mZnNldFdpZHRoIC0gcmVhY2hlZEVuZFRvbGVyYW5jZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vbkVuZFZpc2libGUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUJvdW5kcygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIG9uRW5kVmlzaWJsZSgpIHtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLmlzTG9hZGluZyAmJiB0aGlzLmhhc01vcmVSZXN1bHRzKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFkZE9wdGlvbkxvYWRlcigpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVCb3VuZHMoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMubG9hZE1vcmUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBvbkNvbXBvbmVudENsaWNrKGV2ZW50Ok1vdXNlRXZlbnQpIHtcclxuICAgICAgICAgICAgbGV0IGN1cnJlbnRUYXJnZXQ6SFRNTEVsZW1lbnQgPSBldmVudC50YXJnZXQgYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBJdGVyYXRlIHRocm91Z2ggcGFyZW50cyB1bnRpbCB3ZSd2ZSByZWFjaGVkIHRoZSBib3VuZCBlbGVtZW50XHJcbiAgICAgICAgICAgIHdoaWxlIChjdXJyZW50VGFyZ2V0ICE9PSB0aGlzLmNvbXBvbmVudCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKG9wdGlvbkNsYXNzKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMub25PcHRpb25DbGljayhjdXJyZW50VGFyZ2V0KTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGN1cnJlbnRUYXJnZXQgPT09IHRoaXMucHJldkJ1dHRvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJldmlvdXNQYWdlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChjdXJyZW50VGFyZ2V0ID09PSB0aGlzLm5leHRCdXR0b24pIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm5leHRQYWdlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGN1cnJlbnRUYXJnZXQgPSBjdXJyZW50VGFyZ2V0LnBhcmVudEVsZW1lbnQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgdXBkYXRlUGFnaW5hdGlvbkJ1dHRvbnMoKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG9wdGlvbkNvbnRhaW5lciA9IHRoaXMub3B0aW9uQ29udGFpbmVyO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5wcmV2QnV0dG9uLmRpc2FibGVkID0gb3B0aW9uQ29udGFpbmVyLnNjcm9sbExlZnQgPT09IDA7XHJcbiAgICAgICAgICAgIHRoaXMubmV4dEJ1dHRvbi5kaXNhYmxlZCA9IG9wdGlvbkNvbnRhaW5lci5zY3JvbGxMZWZ0ID49IG9wdGlvbkNvbnRhaW5lci5zY3JvbGxXaWR0aCAtIG9wdGlvbkNvbnRhaW5lci5jbGllbnRXaWR0aCAtIDE7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBBZGRzIGEgc3Bpbm5lciB0byB0aGUgZW5kIG9mIHRoZSBsaXN0IGluZGljYXRpbmcgc29tZXRoaW5nIGlzIGxvYWRpbmdcclxuICAgICAgICAgKi9cclxuICAgICAgICBwcm90ZWN0ZWQgYWRkT3B0aW9uTG9hZGVyKCkge1xyXG4gICAgICAgICAgICB0aGlzLm9wdGlvbkNvbnRhaW5lci5hcHBlbmRDaGlsZChIVE1MSGVscGVyLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcclxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogb3B0aW9uQ2xhc3MgKyAnICcgKyBvcHRpb25Mb2FkZXJDbGFzc1xyXG4gICAgICAgICAgICB9KSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgY2xlYXJPcHRpb25Mb2FkZXIoKSB7XHJcbiAgICAgICAgICAgIEhUTUxIZWxwZXIucmVtb3ZlQ2hpbGRyZW5XaXRoQ2xhc3Nlcyh0aGlzLm9wdGlvbkNvbnRhaW5lciwgb3B0aW9uTG9hZGVyQ2xhc3MpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIGFkZE9wdGlvbkVsZW1lbnRzKGVsZW1lbnRzOk5vZGVbXXxOb2RlKSB7XHJcbiAgIFxyXG4gICAgICAgICAgICBsZXQgaGFzTm9SZXN1bHRzID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICBpZiAoZWxlbWVudHMgaW5zdGFuY2VvZiBEb2N1bWVudEZyYWdtZW50KSB7XHJcbiAgICAgICAgICAgICAgICBoYXNOb1Jlc3VsdHMgPSBlbGVtZW50cy5jaGlsZE5vZGVzLmxlbmd0aCA9PT0gMDtcclxuICAgICAgICAgICAgICAgIHRoaXMub3B0aW9uQ29udGFpbmVyLmFwcGVuZENoaWxkKGVsZW1lbnRzKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChlbGVtZW50cyBpbnN0YW5jZW9mIE5vZGUpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMub3B0aW9uQ29udGFpbmVyLmFwcGVuZENoaWxkKGVsZW1lbnRzKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmICghZWxlbWVudHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaGFzTm9SZXN1bHRzID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgZWxlbWVudCBvZiBlbGVtZW50cyBhcyBOb2RlW10pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub3B0aW9uQ29udGFpbmVyLmFwcGVuZENoaWxkKGVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoaGFzTm9SZXN1bHRzKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNob3dOb1Jlc3VsdHMoKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5jbGVhck9wdGlvbkxvYWRlcigpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy51cGRhdGUoKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuaXNGaXJzdExvYWQgPSBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBub1Jlc3VsdHNFbGVtZW50OkhUTUxFbGVtZW50O1xyXG4gICAgICAgIHByb3RlY3RlZCBzaG93Tm9SZXN1bHRzKCkge1xyXG4gICAgICAgICAgICB0aGlzLm5vUmVzdWx0c0VsZW1lbnQgPSBIVE1MSGVscGVyLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcclxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogb3B0aW9uQ2xhc3MgKyAnICcgKyBub1Jlc3VsdHNDbGFzcyxcclxuICAgICAgICAgICAgICAgIHRleHQ6IHN0cmluZ3MuZ2V0U3RyaW5nKCduby1yZXN1bHRzJyksXHJcbiAgICAgICAgICAgICAgICBhcHBlbmRUbzogdGhpcy5vcHRpb25Db250YWluZXJcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgY2xlYXJPcHRpb25zKCkge1xyXG4gICAgICAgICAgICBIVE1MSGVscGVyLmVtcHR5KHRoaXMub3B0aW9uQ29udGFpbmVyKTtcclxuICAgICAgICAgICAgdGhpcy5hZGRPcHRpb25Mb2FkZXIoKTtcclxuICAgICAgICAgICAgdGhpcy5pc0ZpcnN0TG9hZCA9IHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdXBkYXRlKCkge1xyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVBhZ2luYXRpb25CdXR0b25zKCk7XHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlQm91bmRzKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc2Nyb2xsVG8obmV3TGVmdDpudW1iZXIpIHtcclxuICAgICAgICAgICAgY29uc3Qgc3RhcnRMZWZ0ID0gdGhpcy5vcHRpb25Db250YWluZXIuc2Nyb2xsTGVmdDtcclxuICAgICAgICAgICAgY29uc3QgZHVyYXRpb24gPSBNYXRoLmFicyhzdGFydExlZnQgLSBuZXdMZWZ0KSAvIDJcclxuXHJcbiAgICAgICAgICAgIFRpbnlBbmltYXRlLmFuaW1hdGUoc3RhcnRMZWZ0LCBuZXdMZWZ0LCBkdXJhdGlvbiwgY3VycmVudExlZnQgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vcHRpb25Db250YWluZXIuc2Nyb2xsTGVmdCA9IGN1cnJlbnRMZWZ0XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRvdWNoU2Nyb2xsSGFuZGxlci5zZXRWYWx1ZXMobmV3TGVmdCwgMCk7XHJcbiAgICAgICAgICAgIH0sICdlYXNlT3V0Q3ViaWMnLCAoKSA9PiB0aGlzLnVwZGF0ZSgpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBwcmV2aW91c1BhZ2UoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2Nyb2xsVG8odGhpcy5vcHRpb25Db250YWluZXIuc2Nyb2xsTGVmdCAtIHRoaXMub3B0aW9uQ29udGFpbmVyLmNsaWVudFdpZHRoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBuZXh0UGFnZSgpIHtcclxuICAgICAgICAgICAgdGhpcy5zY3JvbGxUbyh0aGlzLm9wdGlvbkNvbnRhaW5lci5zY3JvbGxMZWZ0ICsgdGhpcy5vcHRpb25Db250YWluZXIuY2xpZW50V2lkdGgpO1xyXG4gICAgICAgICAgICAgICAgbGV0IG9wdGlvbkNvbnRhaW5lciA9IHRoaXMub3B0aW9uQ29udGFpbmVyO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcmVhY2hlZEVuZFRvbGVyYW5jZSA9IDU7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGlmIChvcHRpb25Db250YWluZXIuc2Nyb2xsTGVmdCA+PSBvcHRpb25Db250YWluZXIuc2Nyb2xsV2lkdGggLSBvcHRpb25Db250YWluZXIub2Zmc2V0V2lkdGggLSByZWFjaGVkRW5kVG9sZXJhbmNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vbkVuZFZpc2libGUoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlQm91bmRzKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc2VsZWN0T3B0aW9uKG9wdGlvbkVsZW1lbnQ6SFRNTEVsZW1lbnQpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRPcHRpb24gPT09IG9wdGlvbkVsZW1lbnQpIHJldHVybjsgLy8gQWxyZWFkeSBzZWxlY3RlZFxyXG5cclxuICAgICAgICAgICAgbGV0IG9sZE9wdGlvbkVsZW1lbnQgPSB0aGlzLnNlbGVjdGVkT3B0aW9uO1xyXG5cclxuICAgICAgICAgICAgaWYgKG9sZE9wdGlvbkVsZW1lbnQpXHJcbiAgICAgICAgICAgICAgICBvbGRPcHRpb25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUob3B0aW9uU2VsZWN0ZWRDbGFzcywgb3B0aW9uTG9hZGluZ0NsYXNzKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIG9wdGlvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZChvcHRpb25TZWxlY3RlZENsYXNzKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRPcHRpb24gPSBvcHRpb25FbGVtZW50O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogU2V0IG9yIHJlbW92ZSB0aGUgbG9hZGluZyBjbGFzcyBmcm9tIHRoZSBjdXJyZW50bHkgc2VsZWN0ZWQgb3B0aW9uXHJcbiAgICAgICAgICogQHBhcmFtIGlzTG9hZGluZyBJZiB0cnVlLCBhZGQgdGhlIGxvYWRpbmcgY2xhc3MsIG90aGVyd2lzZSByZW1vdmUgaXRcclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgc2V0T3B0aW9uSXNMb2FkaW5nKGlzTG9hZGluZzpib29sZWFuKSB7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5zZWxlY3RlZE9wdGlvbikgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZE9wdGlvbi5jbGFzc0xpc3RbaXNMb2FkaW5nID8gJ2FkZCcgOiAncmVtb3ZlJ10ob3B0aW9uTG9hZGluZ0NsYXNzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENhbGxlZCB3aGVuIGFuIG9wdGlvbiBlbGVtZW50IGlzIGNsaWNrZWQgb24uXHJcbiAgICAgICAgICogQHBhcmFtIG9wdGlvbkVsZW1lbnQgVGhlIG9wdGlvbiBlbGVtZW50IHRoYXQgd2FzIGNsaWNrZWQgb25cclxuICAgICAgICAgKi9cclxuICAgICAgICBwcm90ZWN0ZWQgb25PcHRpb25DbGljayhvcHRpb25FbGVtZW50OkhUTUxFbGVtZW50KSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0T3B0aW9uKG9wdGlvbkVsZW1lbnQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSIsInZhciBSaWRlU3R5bGVyU2hvd2Nhc2U7XG4oZnVuY3Rpb24gKFJpZGVTdHlsZXJTaG93Y2FzZSkge1xuICAgIGNvbnN0IHByZXZCdXR0b25DbGFzcyA9ICdyaWRlc3R5bGVyLXNob3djYXNlLXBhZ2luYXRpb24tcHJldic7XG4gICAgY29uc3QgbmV4dEJ1dHRvbkNsYXNzID0gJ3JpZGVzdHlsZXItc2hvd2Nhc2UtcGFnaW5hdGlvbi1uZXh0JztcbiAgICBjb25zdCBvcHRpb25DbGFzcyA9ICdyaWRlc3R5bGVyLXNob3djYXNlLXBhZ2luYXRpb24tb3B0aW9uJztcbiAgICBjb25zdCBvcHRpb25TZWxlY3RlZENsYXNzID0gb3B0aW9uQ2xhc3MgKyAnLXNlbGVjdGVkJztcbiAgICBjb25zdCBvcHRpb25Mb2FkaW5nQ2xhc3MgPSBvcHRpb25DbGFzcyArICctbG9hZGluZyc7XG4gICAgY29uc3Qgb3B0aW9uTG9hZGVyQ2xhc3MgPSBvcHRpb25DbGFzcyArICctbG9hZGVyJztcbiAgICBjb25zdCBub1Jlc3VsdHNDbGFzcyA9IG9wdGlvbkNsYXNzICsgJy1uby1yZXN1bHRzJztcbiAgICBjbGFzcyBSaWRlU3R5bGVyU2hvd2Nhc2VQYWdpbmF0aW9uQ29tcG9uZW50IGV4dGVuZHMgUmlkZVN0eWxlclNob3djYXNlLkNvbXBvbmVudEJhc2Uge1xuICAgICAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIElmIHRydWUsIHRoaXMgaGFzIG1vcmUgcmVzdWx0cyB0aGF0IGl0IGNhbiBsb2FkXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIHRoaXMuaGFzTW9yZVJlc3VsdHMgPSB0cnVlO1xuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBJZiB0cnVlLCB0aGlzIGlzIGxvYWRpbmdcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgdGhpcy5pc0xvYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogSWYgdHJ1ZSwgdGhlIGZpcnN0IGxvYWQgaXMgYmVpbmcgcHJlZm9ybWVkIG9yIGhhc24ndCBiZWVuIHByZWZvcm1lZCB5ZXQuXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIHRoaXMuaXNGaXJzdExvYWQgPSB0cnVlO1xuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBTZXQgdGhpcyB0byBmYWxzZSB0byBub3Qgc2hvdyB0aGUgbm8gcmVzdWx0cyBtZXNzYWdlXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIHRoaXMuZW5hYmxlU2hvd05vUmVzdWx0cyA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaW5pdGlhbGl6ZUNvbXBvbmVudCgpIHtcbiAgICAgICAgICAgIHRoaXMuY29tcG9uZW50ID0gUmlkZVN0eWxlclNob3djYXNlLkhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCgnZGl2Jywge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ3JpZGVzdHlsZXItc2hvd2Nhc2UtcGFnaW5hdGlvbidcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5vcHRpb25Db250YWluZXIgPSBSaWRlU3R5bGVyU2hvd2Nhc2UuSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAncmlkZXN0eWxlci1zaG93Y2FzZS1wYWdpbmF0aW9uLXdyYXBwZXInLFxuICAgICAgICAgICAgICAgIGFwcGVuZFRvOiB0aGlzLmNvbXBvbmVudCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5wcmV2QnV0dG9uID0gUmlkZVN0eWxlclNob3djYXNlLkhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCgnYnV0dG9uJywge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogcHJldkJ1dHRvbkNsYXNzLFxuICAgICAgICAgICAgICAgIGFwcGVuZFRvOiB0aGlzLmNvbXBvbmVudCxcbiAgICAgICAgICAgICAgICBhcHBlbmQ6IFJpZGVTdHlsZXJTaG93Y2FzZS5IVE1MSGVscGVyLmNyZWF0ZUljb24oJ2NoZXZyb24tbGVmdCcpXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMubmV4dEJ1dHRvbiA9IFJpZGVTdHlsZXJTaG93Y2FzZS5IVE1MSGVscGVyLmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IG5leHRCdXR0b25DbGFzcyxcbiAgICAgICAgICAgICAgICBhcHBlbmRUbzogdGhpcy5jb21wb25lbnQsXG4gICAgICAgICAgICAgICAgYXBwZW5kOiBSaWRlU3R5bGVyU2hvd2Nhc2UuSFRNTEhlbHBlci5jcmVhdGVJY29uKCdjaGV2cm9uLXJpZ2h0JylcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgLy8gTGlzdGVuIGZvciBjbGlja3Mgb24gb3B0aW9uc1xuICAgICAgICAgICAgdGhpcy5jb21wb25lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBldmVudCA9PiB0aGlzLm9uQ29tcG9uZW50Q2xpY2soZXZlbnQpKTtcbiAgICAgICAgICAgIC8vIFJ1biBjbGVhciBvcHRpb25zIHRvIGdldCB0aGUgbG9hZGVyXG4gICAgICAgICAgICB0aGlzLmNsZWFyT3B0aW9ucygpO1xuICAgICAgICAgICAgLy8gTG9hZCBwYWdpbmF0aW9uIGFmdGVyIHRoaXMgY29tcG9uZW50IGhhcyBiZWVuIHNldHVwXG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHRoaXMubG9hZE1vcmUoKSwgMCk7XG4gICAgICAgICAgICBSaWRlU3R5bGVyU2hvd2Nhc2UuU2Nyb2xsSGVscGVyLmF0dGFjaFdoZWVsTGlzdGVuZXIodGhpcy5jb21wb25lbnQsIGV2ZW50ID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBkZWx0YSA9IGV2ZW50LmRlbHRhWCB8fCBldmVudC5kZWx0YVk7XG4gICAgICAgICAgICAgICAgY29uc3QgeyBzY3JvbGxMZWZ0LCBzY3JvbGxXaWR0aCwgb2Zmc2V0V2lkdGggfSA9IHRoaXMub3B0aW9uQ29udGFpbmVyO1xuICAgICAgICAgICAgICAgIGNvbnN0IG5ld1ZhbHVlID0gTWF0aC5taW4oc2Nyb2xsTGVmdCArIGRlbHRhLCBzY3JvbGxXaWR0aCAtIG9mZnNldFdpZHRoKTtcbiAgICAgICAgICAgICAgICB0aGlzLm9wdGlvbkNvbnRhaW5lci5zY3JvbGxMZWZ0ID0gbmV3VmFsdWU7XG4gICAgICAgICAgICAgICAgdGhpcy50b3VjaFNjcm9sbEhhbmRsZXIuc2V0VmFsdWVzKG5ld1ZhbHVlLCAwKTtcbiAgICAgICAgICAgICAgICB0aGlzLm9uU2Nyb2xsKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMudG91Y2hTY3JvbGxIYW5kbGVyID0gbmV3IEltcGV0dXMoe1xuICAgICAgICAgICAgICAgIHNvdXJjZTogdGhpcy5vcHRpb25Db250YWluZXIsXG4gICAgICAgICAgICAgICAgYm91bmNlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBtdWx0aXBsaWVyOiAtMSxcbiAgICAgICAgICAgICAgICB1cGRhdGU6ICh4LCB5KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMub3B0aW9uQ29udGFpbmVyLnNjcm9sbExlZnQgPSBNYXRoLmZsb29yKHgpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm9wdGlvbkNvbnRhaW5lci5zY3JvbGxUb3AgPSB5O1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm9uU2Nyb2xsKCk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBib3VuZFk6IFswLCAwXVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgbG9hZE1vcmUoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fbG9hZE1vcmUoKS5hbHdheXMoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuY2xlYXJPcHRpb25Mb2FkZXIoKTtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUJvdW5kcygpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgdXBkYXRlQm91bmRzKCkge1xuICAgICAgICAgICAgY29uc3QgeyBzY3JvbGxXaWR0aCwgb2Zmc2V0V2lkdGggfSA9IHRoaXMub3B0aW9uQ29udGFpbmVyO1xuICAgICAgICAgICAgdGhpcy50b3VjaFNjcm9sbEhhbmRsZXIuc2V0Qm91bmRYKFswLCBzY3JvbGxXaWR0aCAtIG9mZnNldFdpZHRoXSk7XG4gICAgICAgIH1cbiAgICAgICAgb25TY3JvbGwoKSB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVBhZ2luYXRpb25CdXR0b25zKCk7XG4gICAgICAgICAgICBsZXQgb3B0aW9uQ29udGFpbmVyID0gdGhpcy5vcHRpb25Db250YWluZXI7XG4gICAgICAgICAgICBjb25zdCByZWFjaGVkRW5kVG9sZXJhbmNlID0gMTA7XG4gICAgICAgICAgICBpZiAob3B0aW9uQ29udGFpbmVyLnNjcm9sbExlZnQgPj0gb3B0aW9uQ29udGFpbmVyLnNjcm9sbFdpZHRoIC0gb3B0aW9uQ29udGFpbmVyLm9mZnNldFdpZHRoIC0gcmVhY2hlZEVuZFRvbGVyYW5jZSkge1xuICAgICAgICAgICAgICAgIHRoaXMub25FbmRWaXNpYmxlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUJvdW5kcygpO1xuICAgICAgICB9XG4gICAgICAgIG9uRW5kVmlzaWJsZSgpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5pc0xvYWRpbmcgJiYgdGhpcy5oYXNNb3JlUmVzdWx0cykge1xuICAgICAgICAgICAgICAgIHRoaXMuYWRkT3B0aW9uTG9hZGVyKCk7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVCb3VuZHMoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmxvYWRNb3JlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgb25Db21wb25lbnRDbGljayhldmVudCkge1xuICAgICAgICAgICAgbGV0IGN1cnJlbnRUYXJnZXQgPSBldmVudC50YXJnZXQ7XG4gICAgICAgICAgICAvLyBJdGVyYXRlIHRocm91Z2ggcGFyZW50cyB1bnRpbCB3ZSd2ZSByZWFjaGVkIHRoZSBib3VuZCBlbGVtZW50XG4gICAgICAgICAgICB3aGlsZSAoY3VycmVudFRhcmdldCAhPT0gdGhpcy5jb21wb25lbnQpIHtcbiAgICAgICAgICAgICAgICBpZiAoY3VycmVudFRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMob3B0aW9uQ2xhc3MpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMub25PcHRpb25DbGljayhjdXJyZW50VGFyZ2V0KTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChjdXJyZW50VGFyZ2V0ID09PSB0aGlzLnByZXZCdXR0b24pIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcmV2aW91c1BhZ2UoKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChjdXJyZW50VGFyZ2V0ID09PSB0aGlzLm5leHRCdXR0b24pIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5uZXh0UGFnZSgpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGN1cnJlbnRUYXJnZXQgPSBjdXJyZW50VGFyZ2V0LnBhcmVudEVsZW1lbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdXBkYXRlUGFnaW5hdGlvbkJ1dHRvbnMoKSB7XG4gICAgICAgICAgICBjb25zdCBvcHRpb25Db250YWluZXIgPSB0aGlzLm9wdGlvbkNvbnRhaW5lcjtcbiAgICAgICAgICAgIHRoaXMucHJldkJ1dHRvbi5kaXNhYmxlZCA9IG9wdGlvbkNvbnRhaW5lci5zY3JvbGxMZWZ0ID09PSAwO1xuICAgICAgICAgICAgdGhpcy5uZXh0QnV0dG9uLmRpc2FibGVkID0gb3B0aW9uQ29udGFpbmVyLnNjcm9sbExlZnQgPj0gb3B0aW9uQ29udGFpbmVyLnNjcm9sbFdpZHRoIC0gb3B0aW9uQ29udGFpbmVyLmNsaWVudFdpZHRoIC0gMTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogQWRkcyBhIHNwaW5uZXIgdG8gdGhlIGVuZCBvZiB0aGUgbGlzdCBpbmRpY2F0aW5nIHNvbWV0aGluZyBpcyBsb2FkaW5nXG4gICAgICAgICAqL1xuICAgICAgICBhZGRPcHRpb25Mb2FkZXIoKSB7XG4gICAgICAgICAgICB0aGlzLm9wdGlvbkNvbnRhaW5lci5hcHBlbmRDaGlsZChSaWRlU3R5bGVyU2hvd2Nhc2UuSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBvcHRpb25DbGFzcyArICcgJyArIG9wdGlvbkxvYWRlckNsYXNzXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICAgICAgY2xlYXJPcHRpb25Mb2FkZXIoKSB7XG4gICAgICAgICAgICBSaWRlU3R5bGVyU2hvd2Nhc2UuSFRNTEhlbHBlci5yZW1vdmVDaGlsZHJlbldpdGhDbGFzc2VzKHRoaXMub3B0aW9uQ29udGFpbmVyLCBvcHRpb25Mb2FkZXJDbGFzcyk7XG4gICAgICAgIH1cbiAgICAgICAgYWRkT3B0aW9uRWxlbWVudHMoZWxlbWVudHMpIHtcbiAgICAgICAgICAgIGxldCBoYXNOb1Jlc3VsdHMgPSBmYWxzZTtcbiAgICAgICAgICAgIGlmIChlbGVtZW50cyBpbnN0YW5jZW9mIERvY3VtZW50RnJhZ21lbnQpIHtcbiAgICAgICAgICAgICAgICBoYXNOb1Jlc3VsdHMgPSBlbGVtZW50cy5jaGlsZE5vZGVzLmxlbmd0aCA9PT0gMDtcbiAgICAgICAgICAgICAgICB0aGlzLm9wdGlvbkNvbnRhaW5lci5hcHBlbmRDaGlsZChlbGVtZW50cyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChlbGVtZW50cyBpbnN0YW5jZW9mIE5vZGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm9wdGlvbkNvbnRhaW5lci5hcHBlbmRDaGlsZChlbGVtZW50cyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoIWVsZW1lbnRzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBoYXNOb1Jlc3VsdHMgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgZWxlbWVudCBvZiBlbGVtZW50cylcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub3B0aW9uQ29udGFpbmVyLmFwcGVuZENoaWxkKGVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChoYXNOb1Jlc3VsdHMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNob3dOb1Jlc3VsdHMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuY2xlYXJPcHRpb25Mb2FkZXIoKTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlKCk7XG4gICAgICAgICAgICB0aGlzLmlzRmlyc3RMb2FkID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgc2hvd05vUmVzdWx0cygpIHtcbiAgICAgICAgICAgIHRoaXMubm9SZXN1bHRzRWxlbWVudCA9IFJpZGVTdHlsZXJTaG93Y2FzZS5IVE1MSGVscGVyLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IG9wdGlvbkNsYXNzICsgJyAnICsgbm9SZXN1bHRzQ2xhc3MsXG4gICAgICAgICAgICAgICAgdGV4dDogUmlkZVN0eWxlclNob3djYXNlLnN0cmluZ3MuZ2V0U3RyaW5nKCduby1yZXN1bHRzJyksXG4gICAgICAgICAgICAgICAgYXBwZW5kVG86IHRoaXMub3B0aW9uQ29udGFpbmVyXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBjbGVhck9wdGlvbnMoKSB7XG4gICAgICAgICAgICBSaWRlU3R5bGVyU2hvd2Nhc2UuSFRNTEhlbHBlci5lbXB0eSh0aGlzLm9wdGlvbkNvbnRhaW5lcik7XG4gICAgICAgICAgICB0aGlzLmFkZE9wdGlvbkxvYWRlcigpO1xuICAgICAgICAgICAgdGhpcy5pc0ZpcnN0TG9hZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgdXBkYXRlKCkge1xuICAgICAgICAgICAgdGhpcy51cGRhdGVQYWdpbmF0aW9uQnV0dG9ucygpO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVCb3VuZHMoKTtcbiAgICAgICAgfVxuICAgICAgICBzY3JvbGxUbyhuZXdMZWZ0KSB7XG4gICAgICAgICAgICBjb25zdCBzdGFydExlZnQgPSB0aGlzLm9wdGlvbkNvbnRhaW5lci5zY3JvbGxMZWZ0O1xuICAgICAgICAgICAgY29uc3QgZHVyYXRpb24gPSBNYXRoLmFicyhzdGFydExlZnQgLSBuZXdMZWZ0KSAvIDI7XG4gICAgICAgICAgICBUaW55QW5pbWF0ZS5hbmltYXRlKHN0YXJ0TGVmdCwgbmV3TGVmdCwgZHVyYXRpb24sIGN1cnJlbnRMZWZ0ID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLm9wdGlvbkNvbnRhaW5lci5zY3JvbGxMZWZ0ID0gY3VycmVudExlZnQ7XG4gICAgICAgICAgICAgICAgdGhpcy50b3VjaFNjcm9sbEhhbmRsZXIuc2V0VmFsdWVzKG5ld0xlZnQsIDApO1xuICAgICAgICAgICAgfSwgJ2Vhc2VPdXRDdWJpYycsICgpID0+IHRoaXMudXBkYXRlKCkpO1xuICAgICAgICB9XG4gICAgICAgIHByZXZpb3VzUGFnZSgpIHtcbiAgICAgICAgICAgIHRoaXMuc2Nyb2xsVG8odGhpcy5vcHRpb25Db250YWluZXIuc2Nyb2xsTGVmdCAtIHRoaXMub3B0aW9uQ29udGFpbmVyLmNsaWVudFdpZHRoKTtcbiAgICAgICAgfVxuICAgICAgICBuZXh0UGFnZSgpIHtcbiAgICAgICAgICAgIHRoaXMuc2Nyb2xsVG8odGhpcy5vcHRpb25Db250YWluZXIuc2Nyb2xsTGVmdCArIHRoaXMub3B0aW9uQ29udGFpbmVyLmNsaWVudFdpZHRoKTtcbiAgICAgICAgICAgIGxldCBvcHRpb25Db250YWluZXIgPSB0aGlzLm9wdGlvbkNvbnRhaW5lcjtcbiAgICAgICAgICAgIGNvbnN0IHJlYWNoZWRFbmRUb2xlcmFuY2UgPSA1O1xuICAgICAgICAgICAgaWYgKG9wdGlvbkNvbnRhaW5lci5zY3JvbGxMZWZ0ID49IG9wdGlvbkNvbnRhaW5lci5zY3JvbGxXaWR0aCAtIG9wdGlvbkNvbnRhaW5lci5vZmZzZXRXaWR0aCAtIHJlYWNoZWRFbmRUb2xlcmFuY2UpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm9uRW5kVmlzaWJsZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy51cGRhdGVCb3VuZHMoKTtcbiAgICAgICAgfVxuICAgICAgICBzZWxlY3RPcHRpb24ob3B0aW9uRWxlbWVudCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRPcHRpb24gPT09IG9wdGlvbkVsZW1lbnQpXG4gICAgICAgICAgICAgICAgcmV0dXJuOyAvLyBBbHJlYWR5IHNlbGVjdGVkXG4gICAgICAgICAgICBsZXQgb2xkT3B0aW9uRWxlbWVudCA9IHRoaXMuc2VsZWN0ZWRPcHRpb247XG4gICAgICAgICAgICBpZiAob2xkT3B0aW9uRWxlbWVudClcbiAgICAgICAgICAgICAgICBvbGRPcHRpb25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUob3B0aW9uU2VsZWN0ZWRDbGFzcywgb3B0aW9uTG9hZGluZ0NsYXNzKTtcbiAgICAgICAgICAgIG9wdGlvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZChvcHRpb25TZWxlY3RlZENsYXNzKTtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRPcHRpb24gPSBvcHRpb25FbGVtZW50O1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTZXQgb3IgcmVtb3ZlIHRoZSBsb2FkaW5nIGNsYXNzIGZyb20gdGhlIGN1cnJlbnRseSBzZWxlY3RlZCBvcHRpb25cbiAgICAgICAgICogQHBhcmFtIGlzTG9hZGluZyBJZiB0cnVlLCBhZGQgdGhlIGxvYWRpbmcgY2xhc3MsIG90aGVyd2lzZSByZW1vdmUgaXRcbiAgICAgICAgICovXG4gICAgICAgIHNldE9wdGlvbklzTG9hZGluZyhpc0xvYWRpbmcpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5zZWxlY3RlZE9wdGlvbilcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkT3B0aW9uLmNsYXNzTGlzdFtpc0xvYWRpbmcgPyAnYWRkJyA6ICdyZW1vdmUnXShvcHRpb25Mb2FkaW5nQ2xhc3MpO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDYWxsZWQgd2hlbiBhbiBvcHRpb24gZWxlbWVudCBpcyBjbGlja2VkIG9uLlxuICAgICAgICAgKiBAcGFyYW0gb3B0aW9uRWxlbWVudCBUaGUgb3B0aW9uIGVsZW1lbnQgdGhhdCB3YXMgY2xpY2tlZCBvblxuICAgICAgICAgKi9cbiAgICAgICAgb25PcHRpb25DbGljayhvcHRpb25FbGVtZW50KSB7XG4gICAgICAgICAgICB0aGlzLnNlbGVjdE9wdGlvbihvcHRpb25FbGVtZW50KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBSaWRlU3R5bGVyU2hvd2Nhc2UuUmlkZVN0eWxlclNob3djYXNlUGFnaW5hdGlvbkNvbXBvbmVudCA9IFJpZGVTdHlsZXJTaG93Y2FzZVBhZ2luYXRpb25Db21wb25lbnQ7XG59KShSaWRlU3R5bGVyU2hvd2Nhc2UgfHwgKFJpZGVTdHlsZXJTaG93Y2FzZSA9IHt9KSk7XG4iXX0=

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var RideStylerShowcase;
(function (RideStylerShowcase) {
    var resultsPerRequest = 20;

    var RideStylerShowcasePaintSelector = function (_RideStylerShowcase$R) {
        _inherits(RideStylerShowcasePaintSelector, _RideStylerShowcase$R);

        function RideStylerShowcasePaintSelector(showcaseInstance) {
            _classCallCheck(this, RideStylerShowcasePaintSelector);

            var _this = _possibleConstructorReturn(this, (RideStylerShowcasePaintSelector.__proto__ || Object.getPrototypeOf(RideStylerShowcasePaintSelector)).call(this, showcaseInstance));

            var _showcaseInstance$sta = showcaseInstance.state.getData(),
                currentVehicleConfigurationID = _showcaseInstance$sta.currentVehicleConfigurationID;

            _this.vehicleConfigurationID = currentVehicleConfigurationID;
            return _this;
        }

        _createClass(RideStylerShowcasePaintSelector, [{
            key: '_loadMore',
            value: function _loadMore() {
                var _this2 = this;

                this.hasMoreResults = false;
                this.isLoading = true;
                // Load paint schemes for the vehicle
                return RideStylerShowcase.api.request("vehicle/getpaintschemedescriptions", {
                    VehicleConfiguration: this.vehicleConfigurationID
                }).done(function (response) {
                    return _this2.createOptions(response.Schemes);
                }).always(function () {
                    return _this2.isLoading = false;
                });
            }
        }, {
            key: 'createOptions',
            value: function createOptions(schemes) {
                // Create a fragment so we add all options to the element at once
                var fragment = document.createDocumentFragment();
                // Create each option and add it to the fragment
                var _iteratorNormalCompletion = true;
                var _didIteratorError = false;
                var _iteratorError = undefined;

                try {
                    for (var _iterator = schemes[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
                        var scheme = _step.value;

                        var option = RideStylerShowcase.HTMLHelper.createElement('div', {
                            className: 'ridestyler-showcase-pagination-option ridestyler-showcase-paint-option',
                            appendTo: fragment
                        });
                        option.paintScheme = scheme;
                        // The main color to be represented in the swatch
                        // TODO: multi-color paint schemes
                        var color = scheme.Colors[0];
                        // "swatch": The display of the paint color
                        var swatch = RideStylerShowcase.HTMLHelper.createElement('div', {
                            className: 'ridestyler-showcase-pagination-option-display ridestyler-showcase-paint-swatch',
                            style: {
                                backgroundColor: color.Hex
                            },
                            appendTo: option
                        });
                        // The name of the paint scheme as the label
                        var name = RideStylerShowcase.HTMLHelper.createElement('div', {
                            className: 'ridestyler-showcase-pagination-option-label',
                            text: scheme.SchemeName,
                            appendTo: option
                        });
                        // Attributes of the color for the secondary label
                        var attributes = RideStylerShowcase.HTMLHelper.createElement('div', {
                            className: 'ridestyler-showcase-pagination-option-label-secondary',
                            text: RideStylerShowcasePaintSelector.createAttributeLabel(color.Attributes),
                            appendTo: option
                        });
                    }
                    // Clear out our slideWrapper of all elements
                } catch (err) {
                    _didIteratorError = true;
                    _iteratorError = err;
                } finally {
                    try {
                        if (!_iteratorNormalCompletion && _iterator.return) {
                            _iterator.return();
                        }
                    } finally {
                        if (_didIteratorError) {
                            throw _iteratorError;
                        }
                    }
                }

                RideStylerShowcase.HTMLHelper.empty(this.optionContainer);
                // Add all options to the slideWrapper at once
                this.optionContainer.appendChild(fragment);
                this.update();
            }
        }, {
            key: 'onOptionClick',
            value: function onOptionClick(optionElement) {
                var paintScheme = optionElement.paintScheme;
                if (paintScheme) {
                    _get(RideStylerShowcasePaintSelector.prototype.__proto__ || Object.getPrototypeOf(RideStylerShowcasePaintSelector.prototype), 'onOptionClick', this).call(this, optionElement);
                    this.state.extendData({
                        currentPaintScheme: paintScheme
                    });
                    if (typeof this.onPaintSchemeSelected === 'function') {
                        this.onPaintSchemeSelected(paintScheme);
                    }
                }
            }
        }], [{
            key: 'createAttributeLabel',
            value: function createAttributeLabel(attributes) {
                var defaultAttributeString = 'Glossy';
                if (attributes === 0 /* None */) return defaultAttributeString;
                var stringAttributes = [];
                // Add each selected paint attribute flag for the color to the list
                if (attributes && 4 /* Matte */ === 4 /* Matte */) stringAttributes.push('Matte');
                if (attributes && 1 /* Metallic */ === 1 /* Metallic */) stringAttributes.push('Metallic');
                if (attributes && 2 /* Pearlescent */ === 2 /* Pearlescent */) stringAttributes.push('Pearlescent');
                if (stringAttributes.length === 0) return defaultAttributeString;
                return stringAttributes.join(', ');
            }
        }]);

        return RideStylerShowcasePaintSelector;
    }(RideStylerShowcase.RideStylerShowcasePaginationComponent);

    RideStylerShowcase.RideStylerShowcasePaintSelector = RideStylerShowcasePaintSelector;
})(RideStylerShowcase || (RideStylerShowcase = {}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvUmlkZVN0eWxlclNob3djYXNlUGFpbnRTZWxlY3Rvci50cyJdLCJuYW1lcyI6WyJSaWRlU3R5bGVyU2hvd2Nhc2UiLCJyZXN1bHRzUGVyUmVxdWVzdCIsIlJpZGVTdHlsZXJTaG93Y2FzZVBhaW50U2VsZWN0b3IiLCJzaG93Y2FzZUluc3RhbmNlIiwic3RhdGUiLCJnZXREYXRhIiwiY3VycmVudFZlaGljbGVDb25maWd1cmF0aW9uSUQiLCJ2ZWhpY2xlQ29uZmlndXJhdGlvbklEIiwiaGFzTW9yZVJlc3VsdHMiLCJpc0xvYWRpbmciLCJhcGkiLCJyZXF1ZXN0IiwiVmVoaWNsZUNvbmZpZ3VyYXRpb24iLCJkb25lIiwiY3JlYXRlT3B0aW9ucyIsInJlc3BvbnNlIiwiU2NoZW1lcyIsImFsd2F5cyIsInNjaGVtZXMiLCJmcmFnbWVudCIsImRvY3VtZW50IiwiY3JlYXRlRG9jdW1lbnRGcmFnbWVudCIsInNjaGVtZSIsIm9wdGlvbiIsIkhUTUxIZWxwZXIiLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NOYW1lIiwiYXBwZW5kVG8iLCJwYWludFNjaGVtZSIsImNvbG9yIiwiQ29sb3JzIiwic3dhdGNoIiwic3R5bGUiLCJiYWNrZ3JvdW5kQ29sb3IiLCJIZXgiLCJuYW1lIiwidGV4dCIsIlNjaGVtZU5hbWUiLCJhdHRyaWJ1dGVzIiwiY3JlYXRlQXR0cmlidXRlTGFiZWwiLCJBdHRyaWJ1dGVzIiwiZW1wdHkiLCJvcHRpb25Db250YWluZXIiLCJhcHBlbmRDaGlsZCIsInVwZGF0ZSIsIm9wdGlvbkVsZW1lbnQiLCJleHRlbmREYXRhIiwiY3VycmVudFBhaW50U2NoZW1lIiwib25QYWludFNjaGVtZVNlbGVjdGVkIiwiZGVmYXVsdEF0dHJpYnV0ZVN0cmluZyIsInN0cmluZ0F0dHJpYnV0ZXMiLCJwdXNoIiwibGVuZ3RoIiwiam9pbiIsIlJpZGVTdHlsZXJTaG93Y2FzZVBhZ2luYXRpb25Db21wb25lbnQiXSwibWFwcGlu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Q0FBc0I7QUFDbEJDLDRDQUFvQm5CO0FBREYscUJBQXRCO0FBSUEsd0JBQUksT0FBTyxLQUFLb0IscUJBQVosS0FBc0MsVUFBMUMsRUFBc0Q7QUFDbEQsNkJBQUtBLHFCQUFMLENBQTJCcEIsV0FBM0I7QUFDSDtBQUNKO0FBQ0o7QUFqR21CO0FBQUE7QUFBQSxpREFtR2dCVSxVQW5HaEIsRUFtR3dFO0FBQ3hGLG9CQUFNVyx5QkFBeUIsUUFBL0I7QUFFQSxvQkFBSVgsZUFBVSxDQUFkLENBQWMsVUFBZCxFQUFnRCxPQUFPVyxzQkFBUDtBQUVoRCxvQkFBSUMsbUJBQTRCLEVBQWhDO0FBRUE7QUFDQSxvQkFBSVosY0FBYyxFQUFBLFdBQUEsS0FBQSxDQUFsQixDQUFrQixXQUFsQixFQUFpRlksaUJBQWlCQyxJQUFqQixDQUFzQixPQUF0QjtBQUNqRixvQkFBSWIsY0FBYyxFQUFBLGNBQUEsS0FBQSxDQUFsQixDQUFrQixjQUFsQixFQUF1RlksaUJBQWlCQyxJQUFqQixDQUFzQixVQUF0QjtBQUN2RixvQkFBSWIsY0FBYyxFQUFBLGlCQUFBLEtBQUEsQ0FBbEIsQ0FBa0IsaUJBQWxCLEVBQTZGWSxpQkFBaUJDLElBQWpCLENBQXNCLGFBQXRCO0FBRTdGLG9CQUFJRCxpQkFBaUJFLE1BQWpCLEtBQTRCLENBQWhDLEVBQW1DLE9BQU9ILHNCQUFQO0FBRW5DLHVCQUFPQyxpQkFBaUJHLElBQWpCLENBQXNCLElBQXRCLENBQVA7QUFDSDtBQWxIbUI7O0FBQUE7QUFBQSxNQVU2QnJELG1CQUFBc0QscUNBVjdCOztBQVVYdEQsdUJBQUFFLCtCQUFBLEdBQStCQSwrQkFBL0I7QUEwR2hCLENBcEhELEVBQVVGLHVCQUFBQSxxQkFBa0IsRUFBbEIsQ0FBViIsImZpbGUiOiJzY3JpcHRzL2NvbXBvbmVudHMvUmlkZVN0eWxlclNob3djYXNlUGFpbnRTZWxlY3Rvci5qcyIsInNvdXJjZXNDb250ZW50IjpbIm5hbWVzcGFjZSBSaWRlU3R5bGVyU2hvd2Nhc2Uge1xyXG4gICAgaW1wb3J0IFZlaGljbGVQYWludEF0dHJpYnV0ZXMgPSByaWRlc3R5bGVyLkRhdGFPYmplY3RzLlZlaGljbGVQYWludEF0dHJpYnV0ZXM7XHJcbiAgICBpbXBvcnQgVmVoaWNsZVBhaW50U2NoZW1lRGVzY3JpcHRpb25Nb2RlbCA9IHJpZGVzdHlsZXIuRGVzY3JpcHRpb25zLlZlaGljbGVQYWludFNjaGVtZURlc2NyaXB0aW9uTW9kZWw7XHJcblxyXG4gICAgY29uc3QgcmVzdWx0c1BlclJlcXVlc3QgPSAyMDtcclxuXHJcbiAgICBpbnRlcmZhY2UgUmlkZVN0eWxlclNob3djYXNlUGFpbnRTY2hlbWVPcHRpb25FbGVtZW50IGV4dGVuZHMgSFRNTEVsZW1lbnQge1xyXG4gICAgICAgIHBhaW50U2NoZW1lPzogVmVoaWNsZVBhaW50U2NoZW1lRGVzY3JpcHRpb25Nb2RlbDtcclxuICAgIH1cclxuXHJcbiAgICBleHBvcnQgY2xhc3MgUmlkZVN0eWxlclNob3djYXNlUGFpbnRTZWxlY3RvciBleHRlbmRzIFJpZGVTdHlsZXJTaG93Y2FzZVBhZ2luYXRpb25Db21wb25lbnQge1xyXG4gICAgICAgIHByaXZhdGUgcmVhZG9ubHkgdmVoaWNsZUNvbmZpZ3VyYXRpb25JRDpzdHJpbmc7XHJcblxyXG4gICAgICAgIGNvbnN0cnVjdG9yKHNob3djYXNlSW5zdGFuY2U6UmlkZVN0eWxlclNob3djYXNlSW5zdGFuY2UpIHtcclxuICAgICAgICAgICAgc3VwZXIoc2hvd2Nhc2VJbnN0YW5jZSk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCB7Y3VycmVudFZlaGljbGVDb25maWd1cmF0aW9uSUR9ID0gc2hvd2Nhc2VJbnN0YW5jZS5zdGF0ZS5nZXREYXRhKCk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnZlaGljbGVDb25maWd1cmF0aW9uSUQgPSBjdXJyZW50VmVoaWNsZUNvbmZpZ3VyYXRpb25JRDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBfbG9hZE1vcmUoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaGFzTW9yZVJlc3VsdHMgPSBmYWxzZTtcclxuICAgICAgICAgICAgdGhpcy5pc0xvYWRpbmcgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgLy8gTG9hZCBwYWludCBzY2hlbWVzIGZvciB0aGUgdmVoaWNsZVxyXG4gICAgICAgICAgICByZXR1cm4gYXBpLnJlcXVlc3QoXCJ2ZWhpY2xlL2dldHBhaW50c2NoZW1lZGVzY3JpcHRpb25zXCIsIHtcclxuICAgICAgICAgICAgICAgIFZlaGljbGVDb25maWd1cmF0aW9uOiB0aGlzLnZlaGljbGVDb25maWd1cmF0aW9uSURcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC5kb25lKHJlc3BvbnNlID0+IHRoaXMuY3JlYXRlT3B0aW9ucyhyZXNwb25zZS5TY2hlbWVzKSlcclxuICAgICAgICAgICAgICAgIC5hbHdheXMoKCkgPT4gdGhpcy5pc0xvYWRpbmcgPSBmYWxzZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGNyZWF0ZU9wdGlvbnMoc2NoZW1lczpWZWhpY2xlUGFpbnRTY2hlbWVEZXNjcmlwdGlvbk1vZGVsW10pIHtcclxuICAgICAgICAgICAgLy8gQ3JlYXRlIGEgZnJhZ21lbnQgc28gd2UgYWRkIGFsbCBvcHRpb25zIHRvIHRoZSBlbGVtZW50IGF0IG9uY2VcclxuICAgICAgICAgICAgbGV0IGZyYWdtZW50ID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xyXG5cclxuICAgICAgICAgICAgLy8gQ3JlYXRlIGVhY2ggb3B0aW9uIGFuZCBhZGQgaXQgdG8gdGhlIGZyYWdtZW50XHJcbiAgICAgICAgICAgIGZvciAobGV0IHNjaGVtZSBvZiBzY2hlbWVzKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgb3B0aW9uID0gSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAncmlkZXN0eWxlci1zaG93Y2FzZS1wYWdpbmF0aW9uLW9wdGlvbiByaWRlc3R5bGVyLXNob3djYXNlLXBhaW50LW9wdGlvbicsXHJcbiAgICAgICAgICAgICAgICAgICAgYXBwZW5kVG86IGZyYWdtZW50XHJcbiAgICAgICAgICAgICAgICB9KSBhcyBSaWRlU3R5bGVyU2hvd2Nhc2VQYWludFNjaGVtZU9wdGlvbkVsZW1lbnQ7XHJcblxyXG4gICAgICAgICAgICAgICAgb3B0aW9uLnBhaW50U2NoZW1lID0gc2NoZW1lO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIFRoZSBtYWluIGNvbG9yIHRvIGJlIHJlcHJlc2VudGVkIGluIHRoZSBzd2F0Y2hcclxuICAgICAgICAgICAgICAgIC8vIFRPRE86IG11bHRpLWNvbG9yIHBhaW50IHNjaGVtZXNcclxuICAgICAgICAgICAgICAgIGxldCBjb2xvciA9IHNjaGVtZS5Db2xvcnNbMF07XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gXCJzd2F0Y2hcIjogVGhlIGRpc3BsYXkgb2YgdGhlIHBhaW50IGNvbG9yXHJcbiAgICAgICAgICAgICAgICBsZXQgc3dhdGNoID0gSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAncmlkZXN0eWxlci1zaG93Y2FzZS1wYWdpbmF0aW9uLW9wdGlvbi1kaXNwbGF5IHJpZGVzdHlsZXItc2hvd2Nhc2UtcGFpbnQtc3dhdGNoJyxcclxuICAgICAgICAgICAgICAgICAgICBzdHlsZToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IGNvbG9yLkhleFxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgYXBwZW5kVG86IG9wdGlvblxyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gVGhlIG5hbWUgb2YgdGhlIHBhaW50IHNjaGVtZSBhcyB0aGUgbGFiZWxcclxuICAgICAgICAgICAgICAgIGxldCBuYW1lID0gSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAncmlkZXN0eWxlci1zaG93Y2FzZS1wYWdpbmF0aW9uLW9wdGlvbi1sYWJlbCcsXHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogc2NoZW1lLlNjaGVtZU5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgYXBwZW5kVG86IG9wdGlvblxyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gQXR0cmlidXRlcyBvZiB0aGUgY29sb3IgZm9yIHRoZSBzZWNvbmRhcnkgbGFiZWxcclxuICAgICAgICAgICAgICAgIGxldCBhdHRyaWJ1dGVzID0gSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAncmlkZXN0eWxlci1zaG93Y2FzZS1wYWdpbmF0aW9uLW9wdGlvbi1sYWJlbC1zZWNvbmRhcnknLFxyXG4gICAgICAgICAgICAgICAgICAgIHRleHQ6IFJpZGVTdHlsZXJTaG93Y2FzZVBhaW50U2VsZWN0b3IuY3JlYXRlQXR0cmlidXRlTGFiZWwoY29sb3IuQXR0cmlidXRlcyksXHJcbiAgICAgICAgICAgICAgICAgICAgYXBwZW5kVG86IG9wdGlvblxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIENsZWFyIG91dCBvdXIgc2xpZGVXcmFwcGVyIG9mIGFsbCBlbGVtZW50c1xyXG4gICAgICAgICAgICBIVE1MSGVscGVyLmVtcHR5KHRoaXMub3B0aW9uQ29udGFpbmVyKTtcclxuICAgICAgICAgICAgLy8gQWRkIGFsbCBvcHRpb25zIHRvIHRoZSBzbGlkZVdyYXBwZXIgYXQgb25jZVxyXG4gICAgICAgICAgICB0aGlzLm9wdGlvbkNvbnRhaW5lci5hcHBlbmRDaGlsZChmcmFnbWVudCk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG9uUGFpbnRTY2hlbWVTZWxlY3RlZDogKHBhaW50U2NoZW1lOlZlaGljbGVQYWludFNjaGVtZURlc2NyaXB0aW9uTW9kZWwpPT52b2lkO1xyXG4gICAgICAgIHByb3RlY3RlZCBvbk9wdGlvbkNsaWNrKG9wdGlvbkVsZW1lbnQ6SFRNTEVsZW1lbnQpIHtcclxuICAgICAgICAgICAgbGV0IHBhaW50U2NoZW1lID0gKG9wdGlvbkVsZW1lbnQgYXMgUmlkZVN0eWxlclNob3djYXNlUGFpbnRTY2hlbWVPcHRpb25FbGVtZW50KS5wYWludFNjaGVtZTtcclxuXHJcbiAgICAgICAgICAgIGlmIChwYWludFNjaGVtZSkge1xyXG4gICAgICAgICAgICAgICAgc3VwZXIub25PcHRpb25DbGljayhvcHRpb25FbGVtZW50KTtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLmV4dGVuZERhdGEoe1xyXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRQYWludFNjaGVtZTogcGFpbnRTY2hlbWVcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdGhpcy5vblBhaW50U2NoZW1lU2VsZWN0ZWQgPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm9uUGFpbnRTY2hlbWVTZWxlY3RlZChwYWludFNjaGVtZSlcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgY3JlYXRlQXR0cmlidXRlTGFiZWwoYXR0cmlidXRlczpyaWRlc3R5bGVyLkRhdGFPYmplY3RzLlZlaGljbGVQYWludEF0dHJpYnV0ZXMpOnN0cmluZyB7XHJcbiAgICAgICAgICAgIGNvbnN0IGRlZmF1bHRBdHRyaWJ1dGVTdHJpbmcgPSAnR2xvc3N5JztcclxuXHJcbiAgICAgICAgICAgIGlmIChhdHRyaWJ1dGVzID09PSBWZWhpY2xlUGFpbnRBdHRyaWJ1dGVzLk5vbmUpIHJldHVybiBkZWZhdWx0QXR0cmlidXRlU3RyaW5nO1xyXG5cclxuICAgICAgICAgICAgbGV0IHN0cmluZ0F0dHJpYnV0ZXM6c3RyaW5nW10gPSBbXTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIEFkZCBlYWNoIHNlbGVjdGVkIHBhaW50IGF0dHJpYnV0ZSBmbGFnIGZvciB0aGUgY29sb3IgdG8gdGhlIGxpc3RcclxuICAgICAgICAgICAgaWYgKGF0dHJpYnV0ZXMgJiYgVmVoaWNsZVBhaW50QXR0cmlidXRlcy5NYXR0ZSA9PT0gVmVoaWNsZVBhaW50QXR0cmlidXRlcy5NYXR0ZSkgc3RyaW5nQXR0cmlidXRlcy5wdXNoKCdNYXR0ZScpO1xyXG4gICAgICAgICAgICBpZiAoYXR0cmlidXRlcyAmJiBWZWhpY2xlUGFpbnRBdHRyaWJ1dGVzLk1ldGFsbGljID09PSBWZWhpY2xlUGFpbnRBdHRyaWJ1dGVzLk1ldGFsbGljKSBzdHJpbmdBdHRyaWJ1dGVzLnB1c2goJ01ldGFsbGljJyk7XHJcbiAgICAgICAgICAgIGlmIChhdHRyaWJ1dGVzICYmIFZlaGljbGVQYWludEF0dHJpYnV0ZXMuUGVhcmxlc2NlbnQgPT09IFZlaGljbGVQYWludEF0dHJpYnV0ZXMuUGVhcmxlc2NlbnQpIHN0cmluZ0F0dHJpYnV0ZXMucHVzaCgnUGVhcmxlc2NlbnQnKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChzdHJpbmdBdHRyaWJ1dGVzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIGRlZmF1bHRBdHRyaWJ1dGVTdHJpbmc7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gc3RyaW5nQXR0cmlidXRlcy5qb2luKCcsICcpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSJdfQ==

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var RideStylerShowcase;
(function (RideStylerShowcase) {
    var popoverClass = 'ridestyler-showcase-popover';
    var popoverInClass = 'in';

    var RideStylerShowcasePopover = function () {
        function RideStylerShowcasePopover() {
            _classCallCheck(this, RideStylerShowcasePopover);

            this.component = RideStylerShowcase.HTMLHelper.createElement({
                className: popoverClass
            });
        }

        _createClass(RideStylerShowcasePopover, [{
            key: 'show',
            value: function show() {
                this.setVisible(true);
            }
        }, {
            key: 'hide',
            value: function hide() {
                this.setVisible(false);
            }
        }, {
            key: 'setVisible',
            value: function setVisible(visible) {
                this.component.classList.toggle(popoverInClass, visible);
            }
        }, {
            key: 'isVisible',
            value: function isVisible() {
                return this.component.classList.contains(popoverInClass);
            }
        }, {
            key: 'toggle',
            value: function toggle() {
                this.setVisible(this.isVisible() ? false : true);
            }
        }]);

        return RideStylerShowcasePopover;
    }();

    RideStylerShowcase.RideStylerShowcasePopover = RideStylerShowcasePopover;
})(RideStylerShowcase || (RideStylerShowcase = {}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvUmlkZVN0eWxlclNob3djYXNlUG9wb3Zlci50cyJdLCJuYW1lcyI6WyJSaWRlU3R5bGVyU2hvd2Nhc2UiLCJwb3BvdmVyQ2xhc3MiLCJwb3BvdmVySW5DbGFzcyIsIlJpZGVTdHlsZXJTaG93Y2FzZVBvcG92ZXIiLCJjb21wb25lbnQiLCJIVE1MSGVscGVyIiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTmFtZSIsInNldFZpc2libGUiLCJ2aXNpYmxlIiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwiY29udGFpbnMiLCJpc1Zpc2libGUiXSwibWFwcGluZ3MiOiI7Ozs7QUFBQSxJQUFVQSxrQkFBVjtBQUFBLENBQUEsVUFBVUEsa0JBQVYsRUFBNEI7QUFDeEIsUUFBTUMsZUFBZSw2QkFBckI7QUFDQSxRQUFNQyxpQkFBaUIsSUFBdkI7O0FBRndCLFFBSXhCQyx5QkFKd0I7QUFPcEIsNkNBQUE7QUFBQTs7QUFDSSxpQkFBS0MsU0FBTCxHQUFpQkosbUJBQUFLLFVBQUEsQ0FBV0MsYUFBWCxDQUF5QjtBQUN0Q0MsMkJBQVdOO0FBRDJCLGFBQXpCLENBQWpCO0FBR0g7O0FBWG1CO0FBQUE7QUFBQSxtQ0FhVDtBQUNQLHFCQUFLTyxVQUFMLENBQWdCLElBQWhCO0FBQ0g7QUFmbUI7QUFBQTtBQUFBLG1DQWlCVDtBQUNQLHFCQUFLQSxVQUFMLENBQWdCLEtBQWhCO0FBQ0g7QUFuQm1CO0FBQUE7QUFBQSx1Q0FxQkZDLE9BckJFLEVBcUJhO0FBQzdCLHFCQUFLTCxTQUFMLENBQWVNLFNBQWYsQ0FBeUJDLE1BQXpCLENBQWdDVCxjQUFoQyxFQUFnRE8sT0FBaEQ7QUFDSDtBQXZCbUI7QUFBQTtBQUFBLHdDQXlCSjtBQUNaLHVCQUFPLEtBQUtMLFNBQUwsQ0FBZU0sU0FBZixDQUF5QkUsUUFBekIsQ0FBa0NWLGNBQWxDLENBQVA7QUFDSDtBQTNCbUI7QUFBQTtBQUFBLHFDQTZCUDtBQUNULHFCQUFLTSxVQUFMLENBQWdCLEtBQUtLLFNBQUwsS0FBbUIsS0FBbkIsR0FBMkIsSUFBM0M7QUFDSDtBQS9CbUI7O0FBQUE7QUFBQTs7QUFJWGIsdUJBQUFHLHlCQUFBLEdBQXlCQSx5QkFBekI7QUE2QmhCLENBakNELEVBQVVILHVCQUFBQSxxQkFBa0IsRUFBbEIsQ0FBViIsImZpbGUiOiJzY3JpcHRzL2NvbXBvbmVudHMvUmlkZVN0eWxlclNob3djYXNlUG9wb3Zlci5qcyIsInNvdXJjZXNDb250ZW50IjpbIm5hbWVzcGFjZSBSaWRlU3R5bGVyU2hvd2Nhc2Uge1xuICAgIGNvbnN0IHBvcG92ZXJDbGFzcyA9ICdyaWRlc3R5bGVyLXNob3djYXNlLXBvcG92ZXInO1xuICAgIGNvbnN0IHBvcG92ZXJJbkNsYXNzID0gJ2luJztcblxuICAgIGV4cG9ydCBjbGFzcyBSaWRlU3R5bGVyU2hvd2Nhc2VQb3BvdmVyIHtcbiAgICAgICAgcHVibGljIGNvbXBvbmVudDpIVE1MRWxlbWVudDtcblxuICAgICAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgICAgIHRoaXMuY29tcG9uZW50ID0gSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IHBvcG92ZXJDbGFzc1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBwdWJsaWMgc2hvdygpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0VmlzaWJsZSh0cnVlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHB1YmxpYyBoaWRlKCkge1xuICAgICAgICAgICAgdGhpcy5zZXRWaXNpYmxlKGZhbHNlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHB1YmxpYyBzZXRWaXNpYmxlKHZpc2libGU6Ym9vbGVhbikge1xuICAgICAgICAgICAgdGhpcy5jb21wb25lbnQuY2xhc3NMaXN0LnRvZ2dsZShwb3BvdmVySW5DbGFzcywgdmlzaWJsZSk7XG4gICAgICAgIH1cblxuICAgICAgICBwdWJsaWMgaXNWaXNpYmxlKCk6Ym9vbGVhbiB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb21wb25lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKHBvcG92ZXJJbkNsYXNzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHB1YmxpYyB0b2dnbGUoKSB7XG4gICAgICAgICAgICB0aGlzLnNldFZpc2libGUodGhpcy5pc1Zpc2libGUoKSA/IGZhbHNlIDogdHJ1ZSk7XG4gICAgICAgIH1cbiAgICB9XG59Il19

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var RideStylerShowcase;
(function (RideStylerShowcase) {
    var productModalClass = 'ridestyler-showcase-product-modal';
    var titleClass = productModalClass + '-title';
    var pageClass = productModalClass + '-page';

    var RideStylerShowcaseProductModal = function (_RideStylerShowcase$R) {
        _inherits(RideStylerShowcaseProductModal, _RideStylerShowcase$R);

        function RideStylerShowcaseProductModal(showcaseInstance) {
            _classCallCheck(this, RideStylerShowcaseProductModal);

            return _possibleConstructorReturn(this, (RideStylerShowcaseProductModal.__proto__ || Object.getPrototypeOf(RideStylerShowcaseProductModal)).call(this, showcaseInstance, {
                removeOnHidden: true
            }));
        }

        _createClass(RideStylerShowcaseProductModal, [{
            key: 'buildModal',
            value: function buildModal() {
                var _this2 = this;

                _get(RideStylerShowcaseProductModal.prototype.__proto__ || Object.getPrototypeOf(RideStylerShowcaseProductModal.prototype), 'buildModal', this).call(this);
                this.component.classList.add(productModalClass);
                this.toggleButton = new RideStylerShowcase.RideStylerShowcaseToggleButton(this.showcase);
                this.toggleButton.onChanged = function (value) {
                    // Show the correct page when the toggle button is changed
                    var _iteratorNormalCompletion = true;
                    var _didIteratorError = false;
                    var _iteratorError = undefined;

                    try {
                        for (var _iterator = _this2.pages[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
                            var page = _step.value;

                            if (page.label === value) {
                                _this2.showPage(page);
                                return;
                            }
                        }
                    } catch (err) {
                        _didIteratorError = true;
                        _iteratorError = err;
                    } finally {
                        try {
                            if (!_iteratorNormalCompletion && _iterator.return) {
                                _iterator.return();
                            }
                        } finally {
                            if (_didIteratorError) {
                                throw _iteratorError;
                            }
                        }
                    }
                };
                this.component.appendChild(this.toggleButton.component);
                RideStylerShowcase.HTMLHelper.createElement('h1', {
                    className: titleClass,
                    appendTo: this.component,
                    append: [this.brandTitleElement = RideStylerShowcase.HTMLHelper.createElementWithClass('span', titleClass + '-brand'), this.titleElement = RideStylerShowcase.HTMLHelper.createElement('span'), this.subtitleElement = RideStylerShowcase.HTMLHelper.createElementWithClass('span', titleClass + '-subtitle')]
                });
                this.summaryContainer = RideStylerShowcase.HTMLHelper.createElement({
                    className: productModalClass + '-summary-container'
                });
                this.imageContainer = RideStylerShowcase.HTMLHelper.createElement({
                    className: productModalClass + '-image',
                    appendTo: this.summaryContainer
                });
                this.image = this.createImage();
                this.summaryElement = RideStylerShowcase.HTMLHelper.createElement({
                    className: productModalClass + '-summary',
                    appendTo: this.summaryContainer
                });
                this.addPage({
                    label: RideStylerShowcase.strings.getString('summary'),
                    container: this.summaryContainer
                }, true);
            }
            /**
             * Add a new page to the product modal and toggle button
             * @param page The new page
             * @param setVisible If true, show the page after adding it
             */

        }, {
            key: 'addPage',
            value: function addPage(page) {
                var setVisible = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;

                if (!this.pages) this.pages = [];
                this.pages.push(page);
                this.toggleButton.addOption({
                    label: page.label,
                    value: page.label
                });
                if (setVisible) this.showPage(page);else RideStylerShowcase.VisibilityHelper.setVisibility(page.container, false);
                page.container.classList.add(pageClass);
                this.component.appendChild(page.container);
            }
            /**
             * Set the page as visible and hide the other pages, update the state of the toggle button
             * @param newPage The page to show
             */

        }, {
            key: 'showPage',
            value: function showPage(newPage) {
                var _iteratorNormalCompletion2 = true;
                var _didIteratorError2 = false;
                var _iteratorError2 = undefined;

                try {
                    for (var _iterator2 = this.pages[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {
                        var page = _step2.value;

                        RideStylerShowcase.VisibilityHelper.setVisibility(page.container, page === newPage);
                    }
                } catch (err) {
                    _didIteratorError2 = true;
                    _iteratorError2 = err;
                } finally {
                    try {
                        if (!_iteratorNormalCompletion2 && _iterator2.return) {
                            _iterator2.return();
                        }
                    } finally {
                        if (_didIteratorError2) {
                            throw _iteratorError2;
                        }
                    }
                }

                this.toggleButton.setValue(newPage.label);
            }
        }, {
            key: 'onHidden',
            value: function onHidden() {
                this.image.destroy();
            }
        }]);

        return RideStylerShowcaseProductModal;
    }(RideStylerShowcase.RideStylerShowcaseModal);

    RideStylerShowcase.RideStylerShowcaseProductModal = RideStylerShowcaseProductModal;
})(RideStylerShowcase || (RideStylerShowcase = {}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvUmlkZVN0eWxlclNob3djYXNlUHJvZHVjdE1vZGFsLnRzIl0sIm5hbWVzIjpbIlJpZGVTdHlsZXJTaG93Y2FzZSIsInByb2R1Y3RNb2RhbENsYXNzIiwidGl0bGVDbGFzcyIsInBhZ2VDbGFzcyIsIlJpZGVTdHlsZXJTaG93Y2FzZVByb2R1Y3RNb2RhbCIsInNob3djYXNlSW5zdGFuY2UiLCJyZW1vdmVPbkhpZGRlbiIsImNvbXBvbmVudCIsImNsYXNzTGlzdCIsImFkZCIsInRvZ2dsZUJ1dHRvbiIsIlJpZGVTdHlsZXJTaG93Y2FzZVRvZ2dsZUJ1dHRvbiIsInNob3djYXNlIiwib25DaGFuZ2VkIiwicGFnZXMiLCJwYWdlIiwibGFiZWwiLCJ2YWx1ZSIsInNob3dQYWdlIiwiYXBwZW5kQ2hpbGQiLCJIVE1MSGVscGVyIiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTmFtZSIsImFwcGVuZFRvIiwiYXBwZW5kIiwiYnJhbmRUaXRsZUVsZW1lbnQiLCJjcmVhdGVFbGVtZW50V2l0aENsYXNzIiwidGl0bGVFbGVtZW50Iiwic3VidGl0bGVFbGVtZW50Iiwic3VtbWFyeUNvbnRhaW5lciIsImltYWdlQ29udGFpbmVyIiwiaW1hZ2UiLCJjcmVhdGVJbWFnZSIsInN1bW1hcnlFbGVtZW50IiwiYWRkUGFnZSIsInN0cmluZ3MiLCJnZXRTdHJpbmciLCJjb250YWluZXIiLCJzZXRWaXNpYmxlIiwicHVzaCIsImFkZE9wdGlvbiIsIlZpc2liaWxpdHlIZWxwZXIiLCJzZXRWaXNpYmlsaXR5IiwibmV3UGFnZSIsInNldFZhbHVlIiwiZGVzdHJveSIsIlJpZGVTdHlsZXJTaG93Y2FzZU1vZGFsIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQUEsSUFBVUEsa0JBQVY7QUFBQSxDQUFBLFVBQVVBLGtCQUFWLEVBQTRCO0FBR3hCLFFBQU1DLG9CQUFvQixtQ0FBMUI7QUFDQSxRQUFNQyxhQUFhRCxvQkFBb0IsUUFBdkM7QUFDQSxR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SixFQUFnQixLQUFLcEIsUUFBTCxDQUFjSCxJQUFkLEVBQWhCLEtBQ0tmLG1CQUFBeUMsZ0JBQUEsQ0FBaUJDLGFBQWpCLENBQStCM0IsS0FBS3NCLFNBQXBDLEVBQStDLEtBQS9DO0FBRUx0QixxQkFBS3NCLFNBQUwsQ0FBZTdCLFNBQWYsQ0FBeUJDLEdBQXpCLENBQTZCTixTQUE3QjtBQUVBLHFCQUFLSSxTQUFMLENBQWVZLFdBQWYsQ0FBMkJKLEtBQUtzQixTQUFoQztBQUNIO0FBRUQ7Ozs7O0FBeEdvQjtBQUFBO0FBQUEscUNBNEdETSxPQTVHQyxFQTRHVztBQUFBO0FBQUE7QUFBQTs7QUFBQTtBQUMzQiwwQ0FBbUIsS0FBSzdCLEtBQXhCO0FBQUEsNEJBQVdDLElBQVg7O0FBQ0lmLDJDQUFBeUMsZ0JBQUEsQ0FBaUJDLGFBQWpCLENBQStCM0IsS0FBS3NCLFNBQXBDLEVBQStDdEIsU0FBUzRCLE9BQXhEO0FBREo7QUFEMkI7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7QUFJM0IscUJBQUtqQyxZQUFMLENBQWtCa0MsUUFBbEIsQ0FBMkJELFFBQVEzQixLQUFuQztBQUNIO0FBakhtQjtBQUFBO0FBQUEsdUNBbUhGO0FBQ2QscUJBQUtlLEtBQUwsQ0FBV2MsT0FBWDtBQUNIO0FBckhtQjs7QUFBQTtBQUFBLE1BT3FDN0MsbUJBQUE4Qyx1QkFQckM7O0FBT0Y5Qyx1QkFBQUksOEJBQUEsR0FBOEJBLDhCQUE5QjtBQThIekIsQ0FySUQsRUFBVUosdUJBQUFBLHFCQUFrQixFQUFsQixDQUFWIiwiZmlsZSI6InNjcmlwdHMvY29tcG9uZW50cy9SaWRlU3R5bGVyU2hvd2Nhc2VQcm9kdWN0TW9kYWwuanMiLCJzb3VyY2VzQ29udGVudCI6WyJuYW1lc3BhY2UgUmlkZVN0eWxlclNob3djYXNlIHtcbiAgICBpbXBvcnQgUGFnZSA9IFJpZGVTdHlsZXJTaG93Y2FzZVByb2R1Y3RNb2RhbC5QYWdlO1xuXG4gICAgY29uc3QgcHJvZHVjdE1vZGFsQ2xhc3MgPSAncmlkZXN0eWxlci1zaG93Y2FzZS1wcm9kdWN0LW1vZGFsJztcbiAgICBjb25zdCB0aXRsZUNsYXNzID0gcHJvZHVjdE1vZGFsQ2xhc3MgKyAnLXRpdGxlJztcbiAgICBjb25zdCBwYWdlQ2xhc3MgPSBwcm9kdWN0TW9kYWxDbGFzcyArICctcGFnZSc7XG5cbiAgICBleHBvcnQgYWJzdHJhY3QgY2xhc3MgUmlkZVN0eWxlclNob3djYXNlUHJvZHVjdE1vZGFsIGV4dGVuZHMgUmlkZVN0eWxlclNob3djYXNlTW9kYWwge1xuICAgICAgICBwcm90ZWN0ZWQgdGl0bGVFbGVtZW50OkhUTUxFbGVtZW50O1xuICAgICAgICBwcm90ZWN0ZWQgYnJhbmRUaXRsZUVsZW1lbnQ6SFRNTEVsZW1lbnQ7XG4gICAgICAgIHByb3RlY3RlZCBzdWJ0aXRsZUVsZW1lbnQ6SFRNTEVsZW1lbnQ7XG4gICAgICAgIHByb3RlY3RlZCBzdW1tYXJ5RWxlbWVudDpIVE1MRWxlbWVudDtcbiAgICAgICAgcHJvdGVjdGVkIHN1bW1hcnlDb250YWluZXI6SFRNTEVsZW1lbnQ7XG5cbiAgICAgICAgcHJvdGVjdGVkIHRvZ2dsZUJ1dHRvbjpSaWRlU3R5bGVyU2hvd2Nhc2VUb2dnbGVCdXR0b247XG4gICAgICAgIFxuICAgICAgICBwcm90ZWN0ZWQgaW1hZ2VDb250YWluZXI6SFRNTEVsZW1lbnQ7XG4gICAgICAgIHByb3RlY3RlZCBpbWFnZTpSZXNpemVhYmxlUmVzb3VyY2VJbWFnZTxhbnk+O1xuXG4gICAgICAgIHByb3RlY3RlZCBwYWdlczpQYWdlW107XG5cbiAgICAgICAgY29uc3RydWN0b3Ioc2hvd2Nhc2VJbnN0YW5jZTpSaWRlU3R5bGVyU2hvd2Nhc2VJbnN0YW5jZSkge1xuICAgICAgICAgICAgc3VwZXIoc2hvd2Nhc2VJbnN0YW5jZSwge1xuICAgICAgICAgICAgICAgIHJlbW92ZU9uSGlkZGVuOiB0cnVlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHByb3RlY3RlZCBidWlsZE1vZGFsKCkge1xuICAgICAgICAgICAgc3VwZXIuYnVpbGRNb2RhbCgpO1xuXG4gICAgICAgICAgICB0aGlzLmNvbXBvbmVudC5jbGFzc0xpc3QuYWRkKHByb2R1Y3RNb2RhbENsYXNzKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy50b2dnbGVCdXR0b24gPSBuZXcgUmlkZVN0eWxlclNob3djYXNlVG9nZ2xlQnV0dG9uKHRoaXMuc2hvd2Nhc2UpO1xuICAgICAgICAgICAgdGhpcy50b2dnbGVCdXR0b24ub25DaGFuZ2VkID0gdmFsdWUgPT4ge1xuICAgICAgICAgICAgICAgIC8vIFNob3cgdGhlIGNvcnJlY3QgcGFnZSB3aGVuIHRoZSB0b2dnbGUgYnV0dG9uIGlzIGNoYW5nZWRcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHBhZ2Ugb2YgdGhpcy5wYWdlcykge1xuICAgICAgICAgICAgICAgICAgICBpZiAocGFnZS5sYWJlbCA9PT0gdmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd1BhZ2UocGFnZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5jb21wb25lbnQuYXBwZW5kQ2hpbGQodGhpcy50b2dnbGVCdXR0b24uY29tcG9uZW50KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KCdoMScsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IHRpdGxlQ2xhc3MsXG4gICAgICAgICAgICAgICAgYXBwZW5kVG86IHRoaXMuY29tcG9uZW50LFxuICAgICAgICAgICAgICAgIGFwcGVuZDogW1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmJyYW5kVGl0bGVFbGVtZW50ID0gSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50V2l0aENsYXNzKCdzcGFuJywgdGl0bGVDbGFzcyArICctYnJhbmQnKSxcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50aXRsZUVsZW1lbnQgPSBIVE1MSGVscGVyLmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKSxcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdWJ0aXRsZUVsZW1lbnQgPSBIVE1MSGVscGVyLmNyZWF0ZUVsZW1lbnRXaXRoQ2xhc3MoJ3NwYW4nLCB0aXRsZUNsYXNzICsgJy1zdWJ0aXRsZScpXG4gICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHRoaXMuc3VtbWFyeUNvbnRhaW5lciA9IEhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCh7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBwcm9kdWN0TW9kYWxDbGFzcyArICctc3VtbWFyeS1jb250YWluZXInXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdGhpcy5pbWFnZUNvbnRhaW5lciA9IEhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCh7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBwcm9kdWN0TW9kYWxDbGFzcyArICctaW1hZ2UnLFxuICAgICAgICAgICAgICAgIGFwcGVuZFRvOiB0aGlzLnN1bW1hcnlDb250YWluZXJcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB0aGlzLmltYWdlID0gdGhpcy5jcmVhdGVJbWFnZSgpO1xuXG4gICAgICAgICAgICB0aGlzLnN1bW1hcnlFbGVtZW50ID0gSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IHByb2R1Y3RNb2RhbENsYXNzICsgJy1zdW1tYXJ5JyxcbiAgICAgICAgICAgICAgICBhcHBlbmRUbzogdGhpcy5zdW1tYXJ5Q29udGFpbmVyXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdGhpcy5hZGRQYWdlKHtcbiAgICAgICAgICAgICAgICBsYWJlbDogc3RyaW5ncy5nZXRTdHJpbmcoJ3N1bW1hcnknKSxcbiAgICAgICAgICAgICAgICBjb250YWluZXI6IHRoaXMuc3VtbWFyeUNvbnRhaW5lclxuICAgICAgICAgICAgfSwgdHJ1ZSk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogQ3JlYXRlIHRoZSBSZXNpemVhYmxlUmVzb3VyY2VJbWFnZSBlbGVtZW50IGZvciB0aGlzIHByb2R1Y3RcbiAgICAgICAgICovXG4gICAgICAgIHByb3RlY3RlZCBhYnN0cmFjdCBjcmVhdGVJbWFnZSgpOlJlc2l6ZWFibGVSZXNvdXJjZUltYWdlPGFueT47XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEFkZCBhIG5ldyBwYWdlIHRvIHRoZSBwcm9kdWN0IG1vZGFsIGFuZCB0b2dnbGUgYnV0dG9uXG4gICAgICAgICAqIEBwYXJhbSBwYWdlIFRoZSBuZXcgcGFnZVxuICAgICAgICAgKiBAcGFyYW0gc2V0VmlzaWJsZSBJZiB0cnVlLCBzaG93IHRoZSBwYWdlIGFmdGVyIGFkZGluZyBpdFxuICAgICAgICAgKi9cbiAgICAgICAgcHJvdGVjdGVkIGFkZFBhZ2UocGFnZTpQYWdlLCBzZXRWaXNpYmxlOmJvb2xlYW4gPSBmYWxzZSkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLnBhZ2VzKSB0aGlzLnBhZ2VzID0gW107XG5cbiAgICAgICAgICAgIHRoaXMucGFnZXMucHVzaChwYWdlKTtcblxuICAgICAgICAgICAgdGhpcy50b2dnbGVCdXR0b24uYWRkT3B0aW9uKHtcbiAgICAgICAgICAgICAgICBsYWJlbDogcGFnZS5sYWJlbCxcbiAgICAgICAgICAgICAgICB2YWx1ZTogcGFnZS5sYWJlbFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGlmIChzZXRWaXNpYmxlKSB0aGlzLnNob3dQYWdlKHBhZ2UpO1xuICAgICAgICAgICAgZWxzZSBWaXNpYmlsaXR5SGVscGVyLnNldFZpc2liaWxpdHkocGFnZS5jb250YWluZXIsIGZhbHNlKTtcblxuICAgICAgICAgICAgcGFnZS5jb250YWluZXIuY2xhc3NMaXN0LmFkZChwYWdlQ2xhc3MpO1xuXG4gICAgICAgICAgICB0aGlzLmNvbXBvbmVudC5hcHBlbmRDaGlsZChwYWdlLmNvbnRhaW5lcik7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogU2V0IHRoZSBwYWdlIGFzIHZpc2libGUgYW5kIGhpZGUgdGhlIG90aGVyIHBhZ2VzLCB1cGRhdGUgdGhlIHN0YXRlIG9mIHRoZSB0b2dnbGUgYnV0dG9uXG4gICAgICAgICAqIEBwYXJhbSBuZXdQYWdlIFRoZSBwYWdlIHRvIHNob3dcbiAgICAgICAgICovXG4gICAgICAgIHByb3RlY3RlZCBzaG93UGFnZShuZXdQYWdlOlBhZ2UpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgcGFnZSBvZiB0aGlzLnBhZ2VzKVxuICAgICAgICAgICAgICAgIFZpc2liaWxpdHlIZWxwZXIuc2V0VmlzaWJpbGl0eShwYWdlLmNvbnRhaW5lciwgcGFnZSA9PT0gbmV3UGFnZSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMudG9nZ2xlQnV0dG9uLnNldFZhbHVlKG5ld1BhZ2UubGFiZWwpO1xuICAgICAgICB9XG5cbiAgICAgICAgcHJvdGVjdGVkIG9uSGlkZGVuKCkge1xuICAgICAgICAgICAgdGhpcy5pbWFnZS5kZXN0cm95KCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBleHBvcnQgbmFtZXNwYWNlIFJpZGVTdHlsZXJTaG93Y2FzZVByb2R1Y3RNb2RhbCB7XG4gICAgICAgIGV4cG9ydCBpbnRlcmZhY2UgUGFnZSB7XG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIFRoZSBjb250YWluZXIgdG8gc2hvdyB3aGVuIHRoZSBwYWdlIGlzIGFjdGl2YXRlZFxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBjb250YWluZXI6SFRNTEVsZW1lbnQ7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogVGhlIGxhYmVsIHRvIHNob3cgZm9yIHRoZSBjb250YWluZXIgaW4gdGhlIHRvZ2dsZSBidXR0b25cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgbGFiZWw6c3RyaW5nO1xuICAgICAgICB9XG4gICAgfVxufSJdfQ==

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var RideStylerShowcase;
(function (RideStylerShowcase) {
    var RideStylerShowcaseProductSelector = function (_RideStylerShowcase$R) {
        _inherits(RideStylerShowcaseProductSelector, _RideStylerShowcase$R);

        function RideStylerShowcaseProductSelector() {
            _classCallCheck(this, RideStylerShowcaseProductSelector);

            var _this = _possibleConstructorReturn(this, (RideStylerShowcaseProductSelector.__proto__ || Object.getPrototypeOf(RideStylerShowcaseProductSelector)).apply(this, arguments));

            _this.resultsPerLoad = 50;
            _this.count = -1;
            _this.index = 0;
            return _this;
        }

        _createClass(RideStylerShowcaseProductSelector, [{
            key: '_loadMore',
            value: function _loadMore() {
                var _this2 = this;

                this.isLoading = true;
                var countPromise = void 0;
                if (this.count > -1) {
                    countPromise = RideStylerShowcase.PromiseHelper.resolved(this.count);
                } else {
                    countPromise = this.countResults(this.currentFilters);
                }
                var resultsPerLoad = this.resultsPerLoad;
                return RideStylerShowcase.PromiseHelper.then(countPromise, function (productCount) {
                    _this2.count = productCount;
                    var filters = RideStylerShowcase.ObjectHelper.assign({
                        Start: _this2.index,
                        Count: resultsPerLoad
                    }, _this2.currentFilters);
                    return _this2.getResults(filters).done(function (products) {
                        _this2.index += resultsPerLoad;
                        _this2.hasMoreResults = _this2.index < _this2.count;
                        _this2.createOptions(products);
                    });
                }).always(function () {
                    _this2.isLoading = false;
                });
            }
            /**
             * Set filters and reload
             * @param newFilters The new filters
             */

        }, {
            key: 'setFilters',
            value: function setFilters(newFilters) {
                this.clearOptions();
                // Reset our count
                this.count = -1;
                // Reset our index
                this.index = 0;
                // Set our filters
                this.currentFilters = RideStylerShowcase.ObjectHelper.assign({}, this.currentFilters, newFilters);
                // Load first result set
                this.loadMore();
            }
            /**
             * Update filters and reload
             * @param filterUpdates The filter properties to update
             */

        }, {
            key: 'updateFilters',
            value: function updateFilters(filterUpdates) {
                this.setFilters(RideStylerShowcase.ObjectHelper.assign({}, this.currentFilters, filterUpdates));
            }
        }, {
            key: 'createOptions',
            value: function createOptions(products) {
                var fragment = document.createDocumentFragment();
                var _iteratorNormalCompletion = true;
                var _didIteratorError = false;
                var _iteratorError = undefined;

                try {
                    for (var _iterator = products[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
                        var product = _step.value;

                        if (!this.productFilter(product)) continue;
                        var option = RideStylerShowcase.HTMLHelper.createElement('div', {
                            className: 'ridestyler-showcase-pagination-option',
                            appendTo: fragment
                        });
                        option.product = product;
                        // Image
                        {
                            var imageSource = this.productImageSource(product);
                            if (imageSource) {
                                RideStylerShowcase.HTMLHelper.createElement('img', {
                                    className: 'ridestyler-showcase-pagination-option-display',
                                    appendTo: option,
                                    properties: {
                                        src: imageSource
                                    }
                                });
                            }
                        }
                        var productImageLabels = this.productImageLabels(product);
                        RideStylerShowcase.HTMLHelper.createElement('div', {
                            className: 'ridestyler-showcase-pagination-option-label',
                            text: productImageLabels.primary,
                            appendTo: option
                        });
                        if (productImageLabels.secondary) RideStylerShowcase.HTMLHelper.createElement('div', {
                            className: 'ridestyler-showcase-pagination-option-label-secondary',
                            text: productImageLabels.secondary,
                            appendTo: option
                        });
                        if (productImageLabels.tertiary) RideStylerShowcase.HTMLHelper.createElement('div', {
                            className: 'ridestyler-showcase-pagination-option-label-tertiary',
                            text: productImageLabels.tertiary,
                            appendTo: option
                        });
                    }
                } catch (err) {
                    _didIteratorError = true;
                    _iteratorError = err;
                } finally {
                    try {
                        if (!_iteratorNormalCompletion && _iterator.return) {
                            _iterator.return();
                        }
                    } finally {
                        if (_didIteratorError) {
                            throw _iteratorError;
                        }
                    }
                }

                this.addOptionElements(fragment);
            }
        }, {
            key: 'onOptionClick',
            value: function onOptionClick(optionElement) {
                var product = optionElement.product;
                if (product) {
                    _get(RideStylerShowcaseProductSelector.prototype.__proto__ || Object.getPrototypeOf(RideStylerShowcaseProductSelector.prototype), 'onOptionClick', this).call(this, optionElement);
                    this.onProductClick(product);
                }
            }
        }, {
            key: 'onProductClick',
            value: function onProductClick(product) {
                if (typeof this.productSelectedCallback === 'function') {
                    this.productSelectedCallback(product);
                }
            }
        }]);

        return RideStylerShowcaseProductSelector;
    }(RideStylerShowcase.RideStylerShowcasePaginationComponent);

    RideStylerShowcase.RideStylerShowcaseProductSelector = RideStylerShowcaseProductSelector;
})(RideStylerShowcase || (RideStylerShowcase = {}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvUmlkZVN0eWxlclNob3djYXNlUHJvZHVjdFNlbGVjdG9yLnRzIiwic2NyaXB0cy9jb21wb25lbnRzL1JpZGVTdHlsZXJTaG93Y2FzZVByb2R1Y3RTZWxlY3Rvci5qcyJdLCJuYW1lcyI6WyJSaWRlU3R5bGVyU2hvd2Nhc2UiLCJSaWRlU3R5bGVyU2hvd2Nhc2VQcm9kdWN0U2VsZWN0b3IiLCJhcmd1bWVudHMiLCJyZXN1bHRzUGVyTG9hZCIsImNvdW50IiwiaW5kZXgiLCJpc0xvYWRpbmciLCJjb3VudFByb21pc2UiLCJQcm9taXNlSGVscGVyIiwicmVzb2x2ZWQiLCJjb3VudFJlc3VsdHMiLCJjdXJyZW50RmlsdGVycyIsInRoZW4iLCJwcm9kdWN0Q291bnQiLCJmaWx0ZXJzIiwiT2JqZWN0SGVscGVyIiwiYXNzaWduIiwiU3RhcnQiLCJDb3VudCIsImdldFJlc3VsdHMiLCJkb25lIiwiaGFzTW9yZVJlc3VsdHMiLCJjcmVhdGVPcHRpb25zIiwicHJvZHVjdHMiLCJhbHdheXMiLCJuZXdGaWx0ZXJzIiwiY2xlYXJPcHRpb25zIiwibG9hZE1vcmUiLCJmaWx0ZXJVcGRhdGVzIiwic2V0RmlsdGVycyIsImZyYWdtZW50IiwiZG9jdW1lbnQiLCJjcmVhdGVEb2N1bWVudEZyYWdtZW50IiwicHJvZHVjdCIsInByb2R1Y3RGaWx0ZXIiLCJvcHRpb24iLCJIVE1MSGVscGVyIiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTmFtZSIsImFwcGVuZFRvIiwiaW1hZ2VTb3VyY2UiLCJwcm9kdWN0SW1hZ2VTb3VyY2UiLCJwcm9wZXJ0aWVzIiwic3JjIiwicHJvZHVjdEltYWdlTGFiZWxzIiwidGV4dCIsInByaW1hcnkiLCJzZWNvbmRhcnkiLCJ0ZXJ0aWFyeSIsImFkZE9wdGlvbkVsZW1lbnRzIiwib3B0aW9uRWxlbWVudCIsIm9uUHJvZHVjdENsaWNrIiwicHJvZHVjdFNlbGVjdGVkQ2FsbGJhY2siLCJSaWRlU3R5bGVyU2hv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LGFBQXBCO0FBQ0EseUJBQUtDLGNBQUwsQ0FBb0JsQixPQUFwQjtBQUNIO0FBQ0o7QUF2Sm1CO0FBQUE7QUFBQSwyQ0EySktBLE9BM0pMLEVBMkpxQjtBQUNyQyxvQkFBSSxPQUFPLEtBQUttQix1QkFBWixLQUF3QyxVQUE1QyxFQUF3RDtBQUNwRCx5QkFBS0EsdUJBQUwsQ0FBNkJuQixPQUE3QjtBQUNIO0FBQ0o7QUEvSm1COztBQUFBO0FBQUEsTUFJaUhqQyxtQkFBQXFELHFDQUpqSDs7QUFJRnJELHVCQUFBQyxpQ0FBQSxHQUFpQ0EsaUNBQWpDO0FBNkp6QixDQWpLRCxFQUFVRCx1QkFBQUEscUJBQWtCLEVBQWxCLENBQVYiLCJmaWxlIjoic2NyaXB0cy9jb21wb25lbnRzL1JpZGVTdHlsZXJTaG93Y2FzZVByb2R1Y3RTZWxlY3Rvci5qcyIsInNvdXJjZXNDb250ZW50IjpbIm5hbWVzcGFjZSBSaWRlU3R5bGVyU2hvd2Nhc2Uge1xyXG4gICAgZXhwb3J0IGludGVyZmFjZSBQcm9kdWN0RWxlbWVudDxUPiBleHRlbmRzIE5vZGUge1xyXG4gICAgICAgIHByb2R1Y3Q/OiBUO1xyXG4gICAgfVxyXG4gICAgZXhwb3J0IGFic3RyYWN0IGNsYXNzIFJpZGVTdHlsZXJTaG93Y2FzZVByb2R1Y3RTZWxlY3RvcjxEYXRhVHlwZSxGaWx0ZXJUeXBlIGV4dGVuZHMgcmlkZXN0eWxlci5SZXF1ZXN0cy5BY3Rpb25SZXF1ZXN0UGFnZWRNb2RlbD4gZXh0ZW5kcyBSaWRlU3R5bGVyU2hvd2Nhc2VQYWdpbmF0aW9uQ29tcG9uZW50IHtcclxuICAgICAgICBwcm90ZWN0ZWQgY3VycmVudEZpbHRlcnM6IEZpbHRlclR5cGU7XHJcbiAgICAgICAgcHJvdGVjdGVkIHJlYWRvbmx5IGRlZmF1bHRGaWx0ZXJzOiBGaWx0ZXJUeXBlO1xyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgcmVhZG9ubHkgcmVzdWx0c1BlckxvYWQgPSA1MDtcclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIGNvdW50Om51bWJlciA9IC0xO1xyXG4gICAgICAgIHByb3RlY3RlZCBpbmRleDpudW1iZXIgPSAwO1xyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgX2xvYWRNb3JlKCkge1xyXG4gICAgICAgICAgICB0aGlzLmlzTG9hZGluZyA9IHRydWU7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBsZXQgY291bnRQcm9taXNlOlJpZGVTdHlsZXJQcm9taXNlPG51bWJlcixyaWRlc3R5bGVyLlJpZGVTdHlsZXJBUElSZXNwb25zZT47XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5jb3VudCA+IC0xKSB7XHJcbiAgICAgICAgICAgICAgICBjb3VudFByb21pc2UgPSBQcm9taXNlSGVscGVyLnJlc29sdmVkKHRoaXMuY291bnQpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY291bnRQcm9taXNlID0gdGhpcy5jb3VudFJlc3VsdHModGhpcy5jdXJyZW50RmlsdGVycyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdHNQZXJMb2FkID0gdGhpcy5yZXN1bHRzUGVyTG9hZDtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlSGVscGVyLnRoZW4oY291bnRQcm9taXNlLCBwcm9kdWN0Q291bnQgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jb3VudCA9IHByb2R1Y3RDb3VudDtcclxuXHJcbiAgICAgICAgICAgICAgICBsZXQgZmlsdGVyczpGaWx0ZXJUeXBlID0gT2JqZWN0SGVscGVyLmFzc2lnbih7XHJcbiAgICAgICAgICAgICAgICAgICAgU3RhcnQ6IHRoaXMuaW5kZXgsXHJcbiAgICAgICAgICAgICAgICAgICAgQ291bnQ6IHJlc3VsdHNQZXJMb2FkXHJcbiAgICAgICAgICAgICAgICB9LCB0aGlzLmN1cnJlbnRGaWx0ZXJzKSBhcyBGaWx0ZXJUeXBlO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRSZXN1bHRzKGZpbHRlcnMpLmRvbmUocHJvZHVjdHMgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaW5kZXggKz0gcmVzdWx0c1BlckxvYWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5oYXNNb3JlUmVzdWx0cyA9IHRoaXMuaW5kZXggPCB0aGlzLmNvdW50O1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY3JlYXRlT3B0aW9ucyhwcm9kdWN0cyk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSkuYWx3YXlzKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuaXNMb2FkaW5nID0gZmFsc2V9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBhYnN0cmFjdCBjb3VudFJlc3VsdHMoZmlsdGVyczogRmlsdGVyVHlwZSkgOiBSaWRlU3R5bGVyUHJvbWlzZTxudW1iZXIscmlkZXN0eWxlci5SaWRlU3R5bGVyQVBJUmVzcG9uc2U+O1xyXG4gICAgICAgIHByb3RlY3RlZCBhYnN0cmFjdCBnZXRSZXN1bHRzKGZpbHRlcnM6IEZpbHRlclR5cGUpIDogUmlkZVN0eWxlclByb21pc2U8RGF0YVR5cGVbXSxyaWRlc3R5bGVyLlJpZGVTdHlsZXJBUElSZXNwb25zZT47XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFNldCBmaWx0ZXJzIGFuZCByZWxvYWRcclxuICAgICAgICAgKiBAcGFyYW0gbmV3RmlsdGVycyBUaGUgbmV3IGZpbHRlcnNcclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgc2V0RmlsdGVycyhuZXdGaWx0ZXJzOiBGaWx0ZXJUeXBlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2xlYXJPcHRpb25zKCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBSZXNldCBvdXIgY291bnRcclxuICAgICAgICAgICAgdGhpcy5jb3VudCA9IC0xO1xyXG5cclxuICAgICAgICAgICAgLy8gUmVzZXQgb3VyIGluZGV4XHJcbiAgICAgICAgICAgIHRoaXMuaW5kZXggPSAwO1xyXG5cclxuICAgICAgICAgICAgLy8gU2V0IG91ciBmaWx0ZXJzXHJcbiAgICAgICAgICAgIHRoaXMuY3VycmVudEZpbHRlcnMgPSBPYmplY3RIZWxwZXIuYXNzaWduKHt9LCB0aGlzLmN1cnJlbnRGaWx0ZXJzLCBuZXdGaWx0ZXJzKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIExvYWQgZmlyc3QgcmVzdWx0IHNldFxyXG4gICAgICAgICAgICB0aGlzLmxvYWRNb3JlKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBVcGRhdGUgZmlsdGVycyBhbmQgcmVsb2FkXHJcbiAgICAgICAgICogQHBhcmFtIGZpbHRlclVwZGF0ZXMgVGhlIGZpbHRlciBwcm9wZXJ0aWVzIHRvIHVwZGF0ZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyB1cGRhdGVGaWx0ZXJzKGZpbHRlclVwZGF0ZXM6IEZpbHRlclR5cGUpIHtcclxuICAgICAgICAgICAgdGhpcy5zZXRGaWx0ZXJzKE9iamVjdEhlbHBlci5hc3NpZ24oe30sIHRoaXMuY3VycmVudEZpbHRlcnMsIGZpbHRlclVwZGF0ZXMpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFJldHVybnMgZmFsc2UgaWYgdGhlIHByb2R1Y3Qgc2hvdWxkIG5vdCBiZSBkaXNwbGF5ZWQgaW4gdGhlIGxpc3RcclxuICAgICAgICAgKiBAcGFyYW0gcHJvZHVjdCBUaGUgcHJvZHVjdFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHByb3RlY3RlZCBhYnN0cmFjdCBwcm9kdWN0RmlsdGVyKHByb2R1Y3Q6IERhdGFUeXBlKTpib29sZWFuO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFJldHVybnMgYSBVUkwgZm9yIHRoZSBwcm9kdWN0IG9yIGZhbHNlLWlzaCBpZiB0aGVyZSBpcyBub3Qgb25lXHJcbiAgICAgICAgICogQHBhcmFtIHByb2R1Y3QgVGhlIHByb2R1Y3RcclxuICAgICAgICAgKi9cclxuICAgICAgICBwcm90ZWN0ZWQgYWJzdHJhY3QgcHJvZHVjdEltYWdlU291cmNlKHByb2R1Y3Q6IERhdGFUeXBlKTpzdHJpbmc7XHJcbiAgICAgICAgcHJvdGVjdGVkIGFic3RyYWN0IHByb2R1Y3RJbWFnZUxhYmVscyhwcm9kdWN0OiBEYXRhVHlwZSk6e1xyXG4gICAgICAgICAgICBwcmltYXJ5OiBzdHJpbmc7XHJcbiAgICAgICAgICAgIHNlY29uZGFyeT86IHN0cmluZztcclxuICAgICAgICAgICAgdGVydGlhcnk/OiBzdHJpbmc7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgcHJpdmF0ZSBjcmVhdGVPcHRpb25zKHByb2R1Y3RzOiBEYXRhVHlwZVtdKSB7XHJcbiAgICAgICAgICAgIGxldCBmcmFnbWVudCA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcclxuXHJcbiAgICAgICAgICAgIGZvciAobGV0IHByb2R1Y3Qgb2YgcHJvZHVjdHMpIHtcclxuICAgICAgICAgICAgICAgIGlmICghdGhpcy5wcm9kdWN0RmlsdGVyKHByb2R1Y3QpKSBjb250aW51ZTtcclxuXHJcbiAgICAgICAgICAgICAgICBsZXQgb3B0aW9uID0gSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAncmlkZXN0eWxlci1zaG93Y2FzZS1wYWdpbmF0aW9uLW9wdGlvbicsXHJcbiAgICAgICAgICAgICAgICAgICAgYXBwZW5kVG86IGZyYWdtZW50XHJcbiAgICAgICAgICAgICAgICB9KSBhcyBQcm9kdWN0RWxlbWVudDxEYXRhVHlwZT47XHJcblxyXG4gICAgICAgICAgICAgICAgb3B0aW9uLnByb2R1Y3QgPSBwcm9kdWN0O1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIEltYWdlXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGltYWdlU291cmNlID0gdGhpcy5wcm9kdWN0SW1hZ2VTb3VyY2UocHJvZHVjdCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpbWFnZVNvdXJjZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBIVE1MSGVscGVyLmNyZWF0ZUVsZW1lbnQoJ2ltZycsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ3JpZGVzdHlsZXItc2hvd2Nhc2UtcGFnaW5hdGlvbi1vcHRpb24tZGlzcGxheScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcHBlbmRUbzogb3B0aW9uLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvcGVydGllczoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNyYzogaW1hZ2VTb3VyY2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGxldCBwcm9kdWN0SW1hZ2VMYWJlbHMgPSB0aGlzLnByb2R1Y3RJbWFnZUxhYmVscyhwcm9kdWN0KTtcclxuXHJcbiAgICAgICAgICAgICAgICBIVE1MSGVscGVyLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcclxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdyaWRlc3R5bGVyLXNob3djYXNlLXBhZ2luYXRpb24tb3B0aW9uLWxhYmVsJyxcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0OiBwcm9kdWN0SW1hZ2VMYWJlbHMucHJpbWFyeSxcclxuICAgICAgICAgICAgICAgICAgICBhcHBlbmRUbzogb3B0aW9uXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAocHJvZHVjdEltYWdlTGFiZWxzLnNlY29uZGFyeSlcclxuICAgICAgICAgICAgICAgICAgICBIVE1MSGVscGVyLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAncmlkZXN0eWxlci1zaG93Y2FzZS1wYWdpbmF0aW9uLW9wdGlvbi1sYWJlbC1zZWNvbmRhcnknLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiBwcm9kdWN0SW1hZ2VMYWJlbHMuc2Vjb25kYXJ5LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhcHBlbmRUbzogb3B0aW9uXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHByb2R1Y3RJbWFnZUxhYmVscy50ZXJ0aWFyeSlcclxuICAgICAgICAgICAgICAgICAgICBIVE1MSGVscGVyLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAncmlkZXN0eWxlci1zaG93Y2FzZS1wYWdpbmF0aW9uLW9wdGlvbi1sYWJlbC10ZXJ0aWFyeScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IHByb2R1Y3RJbWFnZUxhYmVscy50ZXJ0aWFyeSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXBwZW5kVG86IG9wdGlvblxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLmFkZE9wdGlvbkVsZW1lbnRzKGZyYWdtZW50KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBvbk9wdGlvbkNsaWNrKG9wdGlvbkVsZW1lbnQ6SFRNTEVsZW1lbnQpIHtcclxuICAgICAgICAgICAgbGV0IHByb2R1Y3QgPSAob3B0aW9uRWxlbWVudCBhcyBQcm9kdWN0RWxlbWVudDxEYXRhVHlwZT4pLnByb2R1Y3Q7XHJcblxyXG4gICAgICAgICAgICBpZiAocHJvZHVjdCkge1xyXG4gICAgICAgICAgICAgICAgc3VwZXIub25PcHRpb25DbGljayhvcHRpb25FbGVtZW50KTtcclxuICAgICAgICAgICAgICAgIHRoaXMub25Qcm9kdWN0Q2xpY2socHJvZHVjdCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBwcm9kdWN0U2VsZWN0ZWRDYWxsYmFjazogKHByb2R1Y3Q6RGF0YVR5cGUpPT52b2lkO1xyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgb25Qcm9kdWN0Q2xpY2socHJvZHVjdDpEYXRhVHlwZSkge1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mIHRoaXMucHJvZHVjdFNlbGVjdGVkQ2FsbGJhY2sgPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucHJvZHVjdFNlbGVjdGVkQ2FsbGJhY2socHJvZHVjdCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iLCJ2YXIgUmlkZVN0eWxlclNob3djYXNlO1xuKGZ1bmN0aW9uIChSaWRlU3R5bGVyU2hvd2Nhc2UpIHtcbiAgICBjbGFzcyBSaWRlU3R5bGVyU2hvd2Nhc2VQcm9kdWN0U2VsZWN0b3IgZXh0ZW5kcyBSaWRlU3R5bGVyU2hvd2Nhc2UuUmlkZVN0eWxlclNob3djYXNlUGFnaW5hdGlvbkNvbXBvbmVudCB7XG4gICAgICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgICAgIHRoaXMucmVzdWx0c1BlckxvYWQgPSA1MDtcbiAgICAgICAgICAgIHRoaXMuY291bnQgPSAtMTtcbiAgICAgICAgICAgIHRoaXMuaW5kZXggPSAwO1xuICAgICAgICB9XG4gICAgICAgIF9sb2FkTW9yZSgpIHtcbiAgICAgICAgICAgIHRoaXMuaXNMb2FkaW5nID0gdHJ1ZTtcbiAgICAgICAgICAgIGxldCBjb3VudFByb21pc2U7XG4gICAgICAgICAgICBpZiAodGhpcy5jb3VudCA+IC0xKSB7XG4gICAgICAgICAgICAgICAgY291bnRQcm9taXNlID0gUmlkZVN0eWxlclNob3djYXNlLlByb21pc2VIZWxwZXIucmVzb2x2ZWQodGhpcy5jb3VudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb3VudFByb21pc2UgPSB0aGlzLmNvdW50UmVzdWx0cyh0aGlzLmN1cnJlbnRGaWx0ZXJzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdHNQZXJMb2FkID0gdGhpcy5yZXN1bHRzUGVyTG9hZDtcbiAgICAgICAgICAgIHJldHVybiBSaWRlU3R5bGVyU2hvd2Nhc2UuUHJvbWlzZUhlbHBlci50aGVuKGNvdW50UHJvbWlzZSwgcHJvZHVjdENvdW50ID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvdW50ID0gcHJvZHVjdENvdW50O1xuICAgICAgICAgICAgICAgIGxldCBmaWx0ZXJzID0gUmlkZVN0eWxlclNob3djYXNlLk9iamVjdEhlbHBlci5hc3NpZ24oe1xuICAgICAgICAgICAgICAgICAgICBTdGFydDogdGhpcy5pbmRleCxcbiAgICAgICAgICAgICAgICAgICAgQ291bnQ6IHJlc3VsdHNQZXJMb2FkXG4gICAgICAgICAgICAgICAgfSwgdGhpcy5jdXJyZW50RmlsdGVycyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0UmVzdWx0cyhmaWx0ZXJzKS5kb25lKHByb2R1Y3RzID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbmRleCArPSByZXN1bHRzUGVyTG9hZDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5oYXNNb3JlUmVzdWx0cyA9IHRoaXMuaW5kZXggPCB0aGlzLmNvdW50O1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNyZWF0ZU9wdGlvbnMocHJvZHVjdHMpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSkuYWx3YXlzKCgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmlzTG9hZGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNldCBmaWx0ZXJzIGFuZCByZWxvYWRcbiAgICAgICAgICogQHBhcmFtIG5ld0ZpbHRlcnMgVGhlIG5ldyBmaWx0ZXJzXG4gICAgICAgICAqL1xuICAgICAgICBzZXRGaWx0ZXJzKG5ld0ZpbHRlcnMpIHtcbiAgICAgICAgICAgIHRoaXMuY2xlYXJPcHRpb25zKCk7XG4gICAgICAgICAgICAvLyBSZXNldCBvdXIgY291bnRcbiAgICAgICAgICAgIHRoaXMuY291bnQgPSAtMTtcbiAgICAgICAgICAgIC8vIFJlc2V0IG91ciBpbmRleFxuICAgICAgICAgICAgdGhpcy5pbmRleCA9IDA7XG4gICAgICAgICAgICAvLyBTZXQgb3VyIGZpbHRlcnNcbiAgICAgICAgICAgIHRoaXMuY3VycmVudEZpbHRlcnMgPSBSaWRlU3R5bGVyU2hvd2Nhc2UuT2JqZWN0SGVscGVyLmFzc2lnbih7fSwgdGhpcy5jdXJyZW50RmlsdGVycywgbmV3RmlsdGVycyk7XG4gICAgICAgICAgICAvLyBMb2FkIGZpcnN0IHJlc3VsdCBzZXRcbiAgICAgICAgICAgIHRoaXMubG9hZE1vcmUoKTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogVXBkYXRlIGZpbHRlcnMgYW5kIHJlbG9hZFxuICAgICAgICAgKiBAcGFyYW0gZmlsdGVyVXBkYXRlcyBUaGUgZmlsdGVyIHByb3BlcnRpZXMgdG8gdXBkYXRlXG4gICAgICAgICAqL1xuICAgICAgICB1cGRhdGVGaWx0ZXJzKGZpbHRlclVwZGF0ZXMpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0RmlsdGVycyhSaWRlU3R5bGVyU2hvd2Nhc2UuT2JqZWN0SGVscGVyLmFzc2lnbih7fSwgdGhpcy5jdXJyZW50RmlsdGVycywgZmlsdGVyVXBkYXRlcykpO1xuICAgICAgICB9XG4gICAgICAgIGNyZWF0ZU9wdGlvbnMocHJvZHVjdHMpIHtcbiAgICAgICAgICAgIGxldCBmcmFnbWVudCA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcbiAgICAgICAgICAgIGZvciAobGV0IHByb2R1Y3Qgb2YgcHJvZHVjdHMpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMucHJvZHVjdEZpbHRlcihwcm9kdWN0KSlcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgbGV0IG9wdGlvbiA9IFJpZGVTdHlsZXJTaG93Y2FzZS5IVE1MSGVscGVyLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAncmlkZXN0eWxlci1zaG93Y2FzZS1wYWdpbmF0aW9uLW9wdGlvbicsXG4gICAgICAgICAgICAgICAgICAgIGFwcGVuZFRvOiBmcmFnbWVudFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIG9wdGlvbi5wcm9kdWN0ID0gcHJvZHVjdDtcbiAgICAgICAgICAgICAgICAvLyBJbWFnZVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGltYWdlU291cmNlID0gdGhpcy5wcm9kdWN0SW1hZ2VTb3VyY2UocHJvZHVjdCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpbWFnZVNvdXJjZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgUmlkZVN0eWxlclNob3djYXNlLkhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCgnaW1nJywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ3JpZGVzdHlsZXItc2hvd2Nhc2UtcGFnaW5hdGlvbi1vcHRpb24tZGlzcGxheScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXBwZW5kVG86IG9wdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNyYzogaW1hZ2VTb3VyY2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBsZXQgcHJvZHVjdEltYWdlTGFiZWxzID0gdGhpcy5wcm9kdWN0SW1hZ2VMYWJlbHMocHJvZHVjdCk7XG4gICAgICAgICAgICAgICAgUmlkZVN0eWxlclNob3djYXNlLkhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCgnZGl2Jywge1xuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdyaWRlc3R5bGVyLXNob3djYXNlLXBhZ2luYXRpb24tb3B0aW9uLWxhYmVsJyxcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogcHJvZHVjdEltYWdlTGFiZWxzLnByaW1hcnksXG4gICAgICAgICAgICAgICAgICAgIGFwcGVuZFRvOiBvcHRpb25cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAocHJvZHVjdEltYWdlTGFiZWxzLnNlY29uZGFyeSlcbiAgICAgICAgICAgICAgICAgICAgUmlkZVN0eWxlclNob3djYXNlLkhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCgnZGl2Jywge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAncmlkZXN0eWxlci1zaG93Y2FzZS1wYWdpbmF0aW9uLW9wdGlvbi1sYWJlbC1zZWNvbmRhcnknLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogcHJvZHVjdEltYWdlTGFiZWxzLnNlY29uZGFyeSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGFwcGVuZFRvOiBvcHRpb25cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgaWYgKHByb2R1Y3RJbWFnZUxhYmVscy50ZXJ0aWFyeSlcbiAgICAgICAgICAgICAgICAgICAgUmlkZVN0eWxlclNob3djYXNlLkhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCgnZGl2Jywge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAncmlkZXN0eWxlci1zaG93Y2FzZS1wYWdpbmF0aW9uLW9wdGlvbi1sYWJlbC10ZXJ0aWFyeScsXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiBwcm9kdWN0SW1hZ2VMYWJlbHMudGVydGlhcnksXG4gICAgICAgICAgICAgICAgICAgICAgICBhcHBlbmRUbzogb3B0aW9uXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5hZGRPcHRpb25FbGVtZW50cyhmcmFnbWVudCk7XG4gICAgICAgIH1cbiAgICAgICAgb25PcHRpb25DbGljayhvcHRpb25FbGVtZW50KSB7XG4gICAgICAgICAgICBsZXQgcHJvZHVjdCA9IG9wdGlvbkVsZW1lbnQucHJvZHVjdDtcbiAgICAgICAgICAgIGlmIChwcm9kdWN0KSB7XG4gICAgICAgICAgICAgICAgc3VwZXIub25PcHRpb25DbGljayhvcHRpb25FbGVtZW50KTtcbiAgICAgICAgICAgICAgICB0aGlzLm9uUHJvZHVjdENsaWNrKHByb2R1Y3QpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIG9uUHJvZHVjdENsaWNrKHByb2R1Y3QpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgdGhpcy5wcm9kdWN0U2VsZWN0ZWRDYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgIHRoaXMucHJvZHVjdFNlbGVjdGVkQ2FsbGJhY2socHJvZHVjdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgUmlkZVN0eWxlclNob3djYXNlLlJpZGVTdHlsZXJTaG93Y2FzZVByb2R1Y3RTZWxlY3RvciA9IFJpZGVTdHlsZXJTaG93Y2FzZVByb2R1Y3RTZWxlY3Rvcjtcbn0pKFJpZGVTdHlsZXJTaG93Y2FzZSB8fCAoUmlkZVN0eWxlclNob3djYXNlID0ge30pKTtcbiJdfQ==

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var RideStylerShowcase;
(function (RideStylerShowcase) {
    var className = 'ridestyler-showcase-qr-display';

    var RideStylerShowcaseQRCodeComponent = function () {
        function RideStylerShowcaseQRCodeComponent(link) {
            _classCallCheck(this, RideStylerShowcaseQRCodeComponent);

            this.component = RideStylerShowcase.HTMLHelper.createElement('div', {
                className: className
            });
            this.qrCodeElement = RideStylerShowcase.HTMLHelper.createElement('a', {
                className: className + '-image',
                appendTo: this.component,
                properties: {
                    target: '_blank'
                }
            });
            this.qrCode = new QRCode(this.qrCodeElement);
            if (link) this.displayURL(link);
        }

        _createClass(RideStylerShowcaseQRCodeComponent, [{
            key: 'displayURL',
            value: function displayURL(url) {
                this.qrCodeElement.href = url;
                this.qrCode.makeCode(url);
            }
        }]);

        return RideStylerShowcaseQRCodeComponent;
    }();

    RideStylerShowcase.RideStylerShowcaseQRCodeComponent = RideStylerShowcaseQRCodeComponent;
})(RideStylerShowcase || (RideStylerShowcase = {}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvUmlkZVN0eWxlclNob3djYXNlUVJDb2RlQ29tcG9uZW50LnRzIl0sIm5hbWVzIjpbIlJpZGVTdHlsZXJTaG93Y2FzZSIsImNsYXNzTmFtZSIsIlJpZGVTdHlsZXJTaG93Y2FzZVFSQ29kZUNvbXBvbmVudCIsImxpbmsiLCJjb21wb25lbnQiLCJIVE1MSGVscGVyIiwiY3JlYXRlRWxlbWVudCIsInFyQ29kZUVsZW1lbnQiLCJhcHBlbmRUbyIsInByb3BlcnRpZXMiLCJ0YXJnZXQiLCJxckNvZGUiLCJRUkNvZGUiLCJkaXNwbGF5VVJMIiwidXJsIiwiaHJlZiIsIm1ha2VDb2RlIl0sIm1hcHBpbmdzIjoiOzs7O0FBQUEsSUFBVUEsa0JBQVY7QUFBQSxDQUFBLFVBQVVBLGtCQUFWLEVBQTRCO0FBQ3hCLFFBQU1DLFlBQVksZ0NBQWxCOztBQUR3QixRQUd4QkMsaUNBSHdCO0FBU3BCLG1EQUFZQyxJQUFaLEVBQXdCO0FBQUE7O0FBQ3BCLGlCQUFLQyxTQUFMLEdBQWlCSixtQkFBQUssVUFBQSxDQUFXQyxhQUFYLENBQXlCLEtBQXpCLEVBQWdDO0FBQzdDTCwyQkFBV0E7QUFEa0MsYUFBaEMsQ0FBakI7QUFJQSxpQkFBS00sYUFBTCxHQUFxQlAsbUJBQUFLLFVBQUEsQ0FBV0MsYUFBWCxDQUF5QixHQUF6QixFQUE4QjtBQUMvQ0wsMkJBQVdBLFlBQVksUUFEd0I7QUFFL0NPLDBCQUFVLEtBQUtKLFNBRmdDO0FBRy9DSyw0QkFBWTtBQUNSQyw0QkFBUTtBQURBO0FBSG1DLGFBQTlCLENBQXJCO0FBUUEsaUJBQUtDLE1BQUwsR0FBYyxJQUFJQyxNQUFKLENBQVcsS0FBS0wsYUFBaEIsQ0FBZDtBQUVBLGdCQUFJSixJQUFKLEVBQVUsS0FBS1UsVUFBTCxDQUFnQlYsSUFBaEI7QUFDYjs7QUF6Qm1CO0FBQUE7QUFBQSx1Q0EyQkZXLEdBM0JFLEVBMkJRO0FBQ3hCLHFCQUFLUCxhQUFMLENBQW1CUSxJQUFuQixHQUEwQkQsR0FBMUI7QUFDQSxxQkFBS0gsTUFBTCxDQUFZSyxRQUFaLENBQXFCRixHQUFyQjtBQUNIO0FBOUJtQjs7QUFBQTtBQUFBOztBQUdYZCx1QkFBQUUsaUNBQUEsR0FBaUNBLGlDQUFqQztBQTZCaEIsQ0FoQ0QsRUFBVUYsdUJBQUFBLHFCQUFrQixFQUFsQixDQUFWIiwiZmlsZSI6InNjcmlwdHMvY29tcG9uZW50cy9SaWRlU3R5bGVyU2hvd2Nhc2VRUkNvZGVDb21wb25lbnQuanMiLCJzb3VyY2VzQ29udGVudCI6WyJuYW1lc3BhY2UgUmlkZVN0eWxlclNob3djYXNlIHtcbiAgICBjb25zdCBjbGFzc05hbWUgPSAncmlkZXN0eWxlci1zaG93Y2FzZS1xci1kaXNwbGF5JztcblxuICAgIGV4cG9ydCBjbGFzcyBSaWRlU3R5bGVyU2hvd2Nhc2VRUkNvZGVDb21wb25lbnQgaW1wbGVtZW50cyBJQ29tcG9uZW50IHtcbiAgICAgICAgcHJpdmF0ZSBxckNvZGVFbGVtZW50OkhUTUxBbmNob3JFbGVtZW50O1xuICAgICAgICBwcml2YXRlIHFyQ29kZTpRUkNvZGU7XG5cbiAgICAgICAgcHVibGljIGNvbXBvbmVudDpIVE1MRWxlbWVudDtcblxuICAgICAgICBjb25zdHJ1Y3RvcihsaW5rPzpzdHJpbmcpIHtcbiAgICAgICAgICAgIHRoaXMuY29tcG9uZW50ID0gSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBjbGFzc05hbWVcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB0aGlzLnFyQ29kZUVsZW1lbnQgPSBIVE1MSGVscGVyLmNyZWF0ZUVsZW1lbnQoJ2EnLCB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBjbGFzc05hbWUgKyAnLWltYWdlJyxcbiAgICAgICAgICAgICAgICBhcHBlbmRUbzogdGhpcy5jb21wb25lbnQsXG4gICAgICAgICAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgICAgICAgICAgICB0YXJnZXQ6ICdfYmxhbmsnXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHRoaXMucXJDb2RlID0gbmV3IFFSQ29kZSh0aGlzLnFyQ29kZUVsZW1lbnQpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAobGluaykgdGhpcy5kaXNwbGF5VVJMKGxpbmspO1xuICAgICAgICB9XG5cbiAgICAgICAgcHVibGljIGRpc3BsYXlVUkwodXJsOnN0cmluZykge1xuICAgICAgICAgICAgdGhpcy5xckNvZGVFbGVtZW50LmhyZWYgPSB1cmw7XG4gICAgICAgICAgICB0aGlzLnFyQ29kZS5tYWtlQ29kZSh1cmwpO1xuICAgICAgICB9XG4gICAgfVxufSJdfQ==

var _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var RideStylerShowcase;
(function (RideStylerShowcase) {
    var share;
    (function (share) {
        var buttonClass = 'ridestyler-showcase-share-button';

        var ShareButton = function () {
            function ShareButton(settings) {
                var _this = this;

                _classCallCheck(this, ShareButton);

                this.component = RideStylerShowcase.HTMLHelper.createButton({
                    className: buttonClass
                });
                if (settings.className) this.component.classList.add(settings.className);
                if (settings.title) this.component.title = settings.title;
                this.component.addEventListener('click', function () {
                    return _this.onClick();
                });
            }
            /**
             * Update the URL for this share button to share
             * @param url The URL to share
             */


            _createClass(ShareButton, [{
                key: 'setURL',
                value: function setURL(url) {
                    this.currentURL = url;
                }
                /**
                 * Attach tags to the message being shared
                 * @param tags The tags to attach to the message
                 */

            }, {
                key: 'setTags',
                value: function setTags(tags) {
                    this.tags = tags;
                }
                /**
                 * Set a message to share with the URL
                 * @param message The message to share along with the URL
                 */

            }, {
                key: 'setMessage',
                value: function setMessage(message) {
                    this.message = message;
                }
                /**
                 * Called every time the share button is clicked
                 * @virtual
                 */

            }, {
                key: 'onClick',
                value: function onClick() {
                    if (!this.currentURL) return;
                    this.share();
                }
                /**
                 * Share the current URL
                 * @virtual
                 */

            }, {
                key: 'share',
                value: function share() {}
            }, {
                key: 'openNewWindow',
                value: function openNewWindow(url, settings) {
                    settings = settings || {};
                    var defaultHeight = 420,
                        defaultWidth = 550;
                    var width = settings.width || defaultWidth,
                        height = settings.height || defaultHeight;
                    var screenHeight = screen.height,
                        screenWidth = screen.width;
                    var top = screenHeight > height ? Math.round(screenHeight / 2 - height / 2) : 0,
                        left = Math.round(screenWidth / 2 - width / 2);
                    var target = settings.target || 'share';
                    var windowSettings = [];
                    var addSetting = function addSetting(name, value) {
                        return windowSettings.push(name + '=' + value);
                    };
                    var addBooleanSetting = function addBooleanSetting(name, enabled, enabledByDefault) {
                        if (typeof enabled !== 'boolean') enabled = enabledByDefault;
                        addSetting(name, enabled ? 'yes' : 'no');
                    };
                    addBooleanSetting('scrollbars', settings.enableScrollbars, true);
                    addBooleanSetting('resizable', settings.enableResizeable, true);
                    addBooleanSetting('toolbar', settings.enableToolbar, false);
                    addBooleanSetting('location', settings.enableLocation, true);
                    addSetting('width', width.toString());
                    addSetting('height', height.toString());
                    addSetting('top', top.toString());
                    addSetting('left', left.toString());
                    window.open(url, target, target !== '_blank' ? windowSettings.join(',') : '');
                }
            }, {
                key: 'getShareRedirectURL',
                value: function getShareRedirectURL() {
                    var appURL = 'https://app.ridestyler.net';
                    if (RideStylerShowcase.api.environment === RideStylerShowcase.api.Environment.Alpha) appURL = 'http://app-alpha.ridestyler.net';else if (RideStylerShowcase.api.environment === RideStylerShowcase.api.Environment.Beta) appURL = 'http://app-beta.ridestyler.net';
                    return appURL + '/shared.html';
                }
            }]);

            return ShareButton;
        }();

        share.ShareButton = ShareButton;
        var twitterIntentURL = '';

        var TwitterShareButton = function (_ShareButton) {
            _inherits(TwitterShareButton, _ShareButton);

            function TwitterShareButton() {
                _classCallCheck(this, TwitterShareButton);

                return _possibleConstructorReturn(this, (TwitterShareButton.__proto__ || Object.getPrototypeOf(TwitterShareButton)).call(this, {
                    className: buttonClass + '-twitter',
                    title: 'Twitter'
                }));
            }
            /**
             * Share the current URL via Twitter
             */


            _createClass(TwitterShareButton, [{
                key: 'share',
                value: function share() {
                    var url = 'https://twitter.com/intent/tweet?';
                    var twitterIntentParameters = ['url=' + encodeURIComponent(this.currentURL)];
                    if (this.message) twitterIntentParameters.push('text=' + encodeURIComponent(this.message));
                    if (this.tags && this.tags.length) twitterIntentParameters.push('hashtags=' + RideStylerShowcase.ArrayHelper.map(this.tags, function (tag) {
                        return encodeURIComponent(tag);
                    }).join(','));
                    url += twitterIntentParameters.join('&');
                    this.openNewWindow(url);
                }
            }]);

            return TwitterShareButton;
        }(ShareButton);

        share.TwitterShareButton = TwitterShareButton;

        var FacebookShareButton = function (_ShareButton2) {
            _inherits(FacebookShareButton, _ShareButton2);

            function FacebookShareButton() {
                _classCallCheck(this, FacebookShareButton);

                return _possibleConstructorReturn(this, (FacebookShareButton.__proto__ || Object.getPrototypeOf(FacebookShareButton)).call(this, {
                    className: buttonClass + '-facebook',
                    title: 'Facebook'
                }));
            }
            /**
             * Share the current URL via Facebook
             */


            _createClass(FacebookShareButton, [{
                key: 'share',
                value: function share() {
                    var url = 'https://www.facebook.com/dialog/share?';
                    var facebookDialogParameters = ['app_id=1576380412582845', 'display=popup', 'href=' + encodeURIComponent(this.currentURL), 'redirect_uri=' + encodeURIComponent(this.getShareRedirectURL())];
                    // Facebook only lets you specify one hashtag, so we use the first
                    if (this.tags && this.tags.length) facebookDialogParameters.push('hashtag=' + encodeURIComponent('#' + this.tags[0]));
                    url += facebookDialogParameters.join('&');
                    this.openNewWindow(url);
                }
            }]);

            return FacebookShareButton;
        }(ShareButton);

        share.FacebookShareButton = FacebookShareButton;

        var NewWindowShareButton = function (_ShareButton3) {
            _inherits(NewWindowShareButton, _ShareButton3);

            function NewWindowShareButton() {
                _classCallCheck(this, NewWindowShareButton);

                return _possibleConstructorReturn(this, (NewWindowShareButton.__proto__ || Object.getPrototypeOf(NewWindowShareButton)).call(this, {
                    className: buttonClass + '-link'
                }));
            }
            /**
             * Share the current URL by opening it in a new window
             */


            _createClass(NewWindowShareButton, [{
                key: 'share',
                value: function share() {
                    this.openNewWindow(this.currentURL, {
                        target: '_blank'
                    });
                }
            }]);

            return NewWindowShareButton;
        }(ShareButton);

        share.NewWindowShareButton = NewWindowShareButton;

        var QRShareButton = function (_ShareButton4) {
            _inherits(QRShareButton, _ShareButton4);

            function QRShareButton() {
                _classCallCheck(this, QRShareButton);

                var _this5 = _possibleConstructorReturn(this, (QRShareButton.__proto__ || Object.getPrototypeOf(QRShareButton)).call(this, {
                    className: buttonClass + '-qr-code'
                }));

                _this5.popover = new RideStylerShowcase.RideStylerShowcasePopover();
                _this5.component.appendChild(_this5.popover.component);
                _this5.qrCode = new RideStylerShowcase.RideStylerShowcaseQRCodeComponent();
                _this5.popover.component.appendChild(_this5.qrCode.component);
                return _this5;
            }

            _createClass(QRShareButton, [{
                key: 'setURL',
                value: function setURL(url) {
                    _get(QRShareButton.prototype.__proto__ || Object.getPrototypeOf(QRShareButton.prototype), 'setURL', this).call(this, url);
                    this.qrCode.displayURL(url);
                }
            }, {
                key: 'onClick',
                value: function onClick() {
                    this.popover.toggle();
                }
            }]);

            return QRShareButton;
        }(ShareButton);

        share.QRShareButton = QRShareButton;
    })(share = RideStylerShowcase.share || (RideStylerShowcase.share = {}));
})(RideStylerShowcase || (RideStylerShowcase = {}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvUmlkZVN0eWxlclNob3djYXNlU2hhcmVCdXR0b24udHMiXSwibmFtZXMiOlsiUmlkZVN0eWxlclNob3djYXNlIiwic2hhcmUiLCJidXR0b25DbGFzcyIsIlNoYXJlQnV0dG9uIiwic2V0dGluZ3MiLCJjb21wb25lbnQiLCJIVE1MSGVscGVyIiwiY3JlYXRlQnV0dG9uIiwiY2xhc3NOYW1lIiwiY2xhc3NMaXN0IiwiYWRkIiwidGl0bGUiLCJhZGRFdmVudExpc3RlbmVyIiwib25DbGljayIsInVybCIsImN1cnJlbnRVUkwiLCJ0YWdzIiwibWVzc2FnZSIsImRlZmF1bHRIZWlnaHQiLCJkZWZhdWx0V2lkdGgiLCJ3aWR0aCIsImhlaWdodCIsInNjcmVlbkhlaWdodCIsInNjcmVlbiIsInNjcmVlbldpZHRoIiwidG9wIiwiTWF0aCIsInJvdW5kIiwibGVmdCIsInRhcmdldCIsIndpbmRvd1NldHRpbmdzIiwiYWRkU2V0dGluZyIsIm5hbWUiLCJ2YWx1ZSIsInB1c2giLCJhZGRCb29sZWFuU2V0dGluZyIsImVuYWJsZWQiLCJlbmFibGVkQnlEZWZhdWx0IiwiZW5hYmxlU2Nyb2xsYmFycyIsImVuYWJsZVJlc2l6ZWFibGUiLCJlbmFibGVUb29sYmFyIiwiZW5hYmxlTG9jYXRpb24iLCJ0b1N0cmluZyIsIndpbmRvdyIsIm9wZW4iLCJqb2luIiwiYXBwVVJMIiwiYXBpIiwiZW52aXJvbm1lbnQiLCJFbnZpcm9ubWVudCIsIkFscGhhIiwiQmV0YSIsInR3aXR0ZXJJbnRlbnRVUkwiLCJUd2l0dGVyU2hhcmVCdXR0b24iLCJ0d2l0dGVySW50ZW50UGFyYW1ldGVycyIsImVuY29kZVVSSUNvbXBvbmVudCIsImxlbmd0aCIsIkFycmF5SGVscGVyIiwibWFwIiwidGFnIiwib3Blbk5ld1dpbmRvdyIsIkZhY2Vib29rU2hhcmVCdXR0b24iLCJmYWNlYm9va0RpYWxvZ1BhcmFtZXRlcnMiLCJnZXRTaGFyZVJlZGlyZWN0VVJMIiwiTmV3V2luZG93U2hhcmVCdXR0b24iLCJRUlNoYXJlQnV0dG9uIiwicG9wb3ZlciIsIlJpZGVTdHlsZXJTaG93Y2FzZVBvcG92ZXIiLCJhcHBlbmRDaGlsZCIsInFyQ29kZSIsIlJpZGVTdHlsZXJTaG93Y2FzZVFSQ29kZUNvbXBvbmVudCIsImRpc3BsYXlVUkwiLCJ0b2dnbGUiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBQSxJQUFVQSxrQkFBVjtBQUFBLENBQUEsVUFBVUEsa0JBQVYsRUFBNEI7QUFBQyxRQUFBQyxLQUFBO0FBQUEsS0FBQSxVQUFBQSxLQUFBLEVBQUs7QUFDOUIsWUFBTUMsY0FBYyxrQ0FBcEI7O0FBRDhCLFlBRzlCQyxXQUg4QjtBQXFCMUIsaUNBQVlDLFFBQVosRUFBeUM7QUFBQTs7QUFBQTs7QUFDckMscUJBQUtDLFNBQUwsR0FBaUJMLG1CQUFBTSxVQUFBLENBQVdDLFlBQVgsQ0FBd0I7QUFDckNDLCtCQUFXTjtBQUQwQixpQkFBeEIsQ0FBakI7QUFJQSxvQkFBSUUsU0FBU0ksU0FBYixFQUF3QixLQUFLSCxTQUFMLENBQWVJLFNBQWYsQ0FBeUJDLEdBQXpCLENBQTZCTixTQUFTSSxTQUF0QztBQUN4QixvQkFBSUosU0FBU08sS0FBYixFQUFvQixLQUFLTixTQUFMLENBQWVNLEtBQWYsR0FBdUJQLFNBQVNPLEtBQWhDO0FBRXBCLHFCQUFLTixTQUFMLENBQWVPLGdCQUFmLENBQWdDLE9BQWhDLEVBQXlDO0FBQUEsMkJBQU0sTUFBS0MsT0FBTCxFQUFOO0FBQUEsaUJBQXpDO0FBQ0g7QUFFRDs7Ozs7O0FBaEMwQjtBQUFBO0FBQUEsdUNBb0NaQyxHQXBDWSxFQW9DRjtBQUNwQix5QkFBS0MsVUFBTCxHQUFrQkQsR0FBbEI7QUFDSDtBQUVEOzs7OztBQXhDMEI7QUFBQTtBQUFBLHdDQTRDWEUsSUE1Q1csRUE0Q0U7QUFDeEIseUJBQUtBLElBQUwsR0FBWUEsSUFBWjtBQUNIO0FBRUQ7Ozs7O0FBaEQwQjtBQUFBO0FBQUEsMkNBb0RSQyxPQXBEUSxFQW9ETTtBQUM1Qix5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QUNBLHVCQUFLSixPQUFMLENBQWE3RCxTQUFiLENBQXVCK0QsV0FBdkIsQ0FBbUMsT0FBS0MsTUFBTCxDQUFZaEUsU0FBL0M7QUFUSjtBQVVDOztBQWxPeUI7QUFBQTtBQUFBLHVDQW9PWlMsR0FwT1ksRUFvT0Y7QUFDcEIseUlBQWFBLEdBQWI7QUFFQSx5QkFBS3VELE1BQUwsQ0FBWUUsVUFBWixDQUF1QnpELEdBQXZCO0FBQ0g7QUF4T3lCO0FBQUE7QUFBQSwwQ0EwT1o7QUFDVix5QkFBS29ELE9BQUwsQ0FBYU0sTUFBYjtBQUNIO0FBNU95Qjs7QUFBQTtBQUFBLFVBb05LckUsV0FwTkw7O0FBb05qQkYsY0FBQWdFLGFBQUEsR0FBYUEsYUFBYjtBQTBCaEIsS0E5TzRCLEVBQUFoRSxRQUFBRCxtQkFBQUMsS0FBQSxLQUFBRCxtQkFBQUMsS0FBQSxHQUFLLEVBQUwsQ0FBQTtBQThPNUIsQ0E5T0QsRUFBVUQsdUJBQUFBLHFCQUFrQixFQUFsQixDQUFWIiwiZmlsZSI6InNjcmlwdHMvY29tcG9uZW50cy9SaWRlU3R5bGVyU2hvd2Nhc2VTaGFyZUJ1dHRvbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIm5hbWVzcGFjZSBSaWRlU3R5bGVyU2hvd2Nhc2Uuc2hhcmUge1xuICAgIGNvbnN0IGJ1dHRvbkNsYXNzID0gJ3JpZGVzdHlsZXItc2hvd2Nhc2Utc2hhcmUtYnV0dG9uJ1xuXG4gICAgZXhwb3J0IGFic3RyYWN0IGNsYXNzIFNoYXJlQnV0dG9uIGltcGxlbWVudHMgSUNvbXBvbmVudCB7XG4gICAgICAgIHB1YmxpYyByZWFkb25seSBjb21wb25lbnQ6SFRNTEJ1dHRvbkVsZW1lbnQ7XG4gICAgICAgIFxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGN1cnJlbnQgVVJMIHRvIHNoYXJlXG4gICAgICAgICAqL1xuICAgICAgICBwcm90ZWN0ZWQgY3VycmVudFVSTDpzdHJpbmc7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSB0YWdzIHRvIGF0dGFjaCB0byB0aGUgbWVzc2FnZVxuICAgICAgICAgKi9cbiAgICAgICAgcHJvdGVjdGVkIHRhZ3M6c3RyaW5nW107XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSB0ZXh0IHRvIHNoYXJlIHdpdGggdGhlIFVSTFxuICAgICAgICAgKi9cbiAgICAgICAgcHJvdGVjdGVkIG1lc3NhZ2U6c3RyaW5nO1xuXG4gICAgICAgIGNvbnN0cnVjdG9yKHNldHRpbmdzOlNoYXJlQnV0dG9uLlNldHRpbmdzKSB7XG4gICAgICAgICAgICB0aGlzLmNvbXBvbmVudCA9IEhUTUxIZWxwZXIuY3JlYXRlQnV0dG9uKHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IGJ1dHRvbkNsYXNzXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgaWYgKHNldHRpbmdzLmNsYXNzTmFtZSkgdGhpcy5jb21wb25lbnQuY2xhc3NMaXN0LmFkZChzZXR0aW5ncy5jbGFzc05hbWUpO1xuICAgICAgICAgICAgaWYgKHNldHRpbmdzLnRpdGxlKSB0aGlzLmNvbXBvbmVudC50aXRsZSA9IHNldHRpbmdzLnRpdGxlO1xuXG4gICAgICAgICAgICB0aGlzLmNvbXBvbmVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMub25DbGljaygpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBVcGRhdGUgdGhlIFVSTCBmb3IgdGhpcyBzaGFyZSBidXR0b24gdG8gc2hhcmVcbiAgICAgICAgICogQHBhcmFtIHVybCBUaGUgVVJMIHRvIHNoYXJlXG4gICAgICAgICAqL1xuICAgICAgICBwdWJsaWMgc2V0VVJMKHVybDpzdHJpbmcpIHtcbiAgICAgICAgICAgIHRoaXMuY3VycmVudFVSTCA9IHVybDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBdHRhY2ggdGFncyB0byB0aGUgbWVzc2FnZSBiZWluZyBzaGFyZWRcbiAgICAgICAgICogQHBhcmFtIHRhZ3MgVGhlIHRhZ3MgdG8gYXR0YWNoIHRvIHRoZSBtZXNzYWdlXG4gICAgICAgICAqL1xuICAgICAgICBwdWJsaWMgc2V0VGFncyh0YWdzOnN0cmluZ1tdKSB7XG4gICAgICAgICAgICB0aGlzLnRhZ3MgPSB0YWdzO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNldCBhIG1lc3NhZ2UgdG8gc2hhcmUgd2l0aCB0aGUgVVJMXG4gICAgICAgICAqIEBwYXJhbSBtZXNzYWdlIFRoZSBtZXNzYWdlIHRvIHNoYXJlIGFsb25nIHdpdGggdGhlIFVSTFxuICAgICAgICAgKi9cbiAgICAgICAgcHVibGljIHNldE1lc3NhZ2UobWVzc2FnZTpzdHJpbmcpIHtcbiAgICAgICAgICAgIHRoaXMubWVzc2FnZSA9IG1lc3NhZ2U7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogQ2FsbGVkIGV2ZXJ5IHRpbWUgdGhlIHNoYXJlIGJ1dHRvbiBpcyBjbGlja2VkXG4gICAgICAgICAqIEB2aXJ0dWFsXG4gICAgICAgICAqL1xuICAgICAgICBwcm90ZWN0ZWQgb25DbGljaygpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5jdXJyZW50VVJMKSByZXR1cm47XG5cbiAgICAgICAgICAgIHRoaXMuc2hhcmUoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTaGFyZSB0aGUgY3VycmVudCBVUkxcbiAgICAgICAgICogQHZpcnR1YWxcbiAgICAgICAgICovXG4gICAgICAgIHB1YmxpYyBzaGFyZSgpIHt9XG5cbiAgICAgICAgcHJvdGVjdGVkIG9wZW5OZXdXaW5kb3codXJsOnN0cmluZywgc2V0dGluZ3M/OntcbiAgICAgICAgICAgIHdpZHRoPzogbnVtYmVyLFxuICAgICAgICAgICAgaGVpZ2h0PzogbnVtYmVyLFxuICAgICAgICAgICAgZW5hYmxlU2Nyb2xsYmFycz86IGJvb2xlYW4sXG4gICAgICAgICAgICBlbmFibGVSZXNpemVhYmxlPzogYm9vbGVhbixcbiAgICAgICAgICAgIGVuYWJsZVRvb2xiYXI/OiBib29sZWFuLFxuICAgICAgICAgICAgZW5hYmxlTG9jYXRpb24/OiBib29sZWFuLFxuICAgICAgICAgICAgdGFyZ2V0Pzogc3RyaW5nXG4gICAgICAgIH0pIHtcbiAgICAgICAgICAgIHNldHRpbmdzID0gc2V0dGluZ3MgfHwge307XG5cbiAgICAgICAgICAgIGNvbnN0IGRlZmF1bHRIZWlnaHQgPSA0MjAsXG4gICAgICAgICAgICAgICAgICBkZWZhdWx0V2lkdGggPSA1NTA7XG5cbiAgICAgICAgICAgIGNvbnN0IHdpZHRoID0gc2V0dGluZ3Mud2lkdGggfHwgZGVmYXVsdFdpZHRoLFxuICAgICAgICAgICAgICAgICAgaGVpZ2h0ID0gc2V0dGluZ3MuaGVpZ2h0IHx8IGRlZmF1bHRIZWlnaHQ7XG5cbiAgICAgICAgICAgIGNvbnN0IHNjcmVlbkhlaWdodCA9IHNjcmVlbi5oZWlnaHQsXG4gICAgICAgICAgICAgICAgICBzY3JlZW5XaWR0aCA9IHNjcmVlbi53aWR0aDtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgdG9wID0gc2NyZWVuSGVpZ2h0ID4gaGVpZ2h0ID8gTWF0aC5yb3VuZCgoc2NyZWVuSGVpZ2h0IC8gMikgLSAoaGVpZ2h0IC8gMikpIDogMCxcbiAgICAgICAgICAgICAgICAgIGxlZnQgPSBNYXRoLnJvdW5kKChzY3JlZW5XaWR0aCAvIDIpIC0gKHdpZHRoIC8gMikpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCB0YXJnZXQgPSBzZXR0aW5ncy50YXJnZXQgfHwgJ3NoYXJlJztcblxuICAgICAgICAgICAgY29uc3Qgd2luZG93U2V0dGluZ3M6c3RyaW5nW10gPSBbXTtcbiAgICAgICAgICAgIGNvbnN0IGFkZFNldHRpbmcgPSAobmFtZTpzdHJpbmcsIHZhbHVlOnN0cmluZykgPT4gd2luZG93U2V0dGluZ3MucHVzaChuYW1lICsgJz0nICsgdmFsdWUpO1xuICAgICAgICAgICAgY29uc3QgYWRkQm9vbGVhblNldHRpbmcgPSAobmFtZTpzdHJpbmcsIGVuYWJsZWQ6Ym9vbGVhbiwgZW5hYmxlZEJ5RGVmYXVsdDpib29sZWFuKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBlbmFibGVkICE9PSAnYm9vbGVhbicpIGVuYWJsZWQgPSBlbmFibGVkQnlEZWZhdWx0O1xuXG4gICAgICAgICAgICAgICAgYWRkU2V0dGluZyhuYW1lLCBlbmFibGVkID8gJ3llcycgOiAnbm8nKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGFkZEJvb2xlYW5TZXR0aW5nKCdzY3JvbGxiYXJzJywgc2V0dGluZ3MuZW5hYmxlU2Nyb2xsYmFycywgdHJ1ZSk7XG4gICAgICAgICAgICBhZGRCb29sZWFuU2V0dGluZygncmVzaXphYmxlJywgc2V0dGluZ3MuZW5hYmxlUmVzaXplYWJsZSwgdHJ1ZSk7XG4gICAgICAgICAgICBhZGRCb29sZWFuU2V0dGluZygndG9vbGJhcicsIHNldHRpbmdzLmVuYWJsZVRvb2xiYXIsIGZhbHNlKTtcbiAgICAgICAgICAgIGFkZEJvb2xlYW5TZXR0aW5nKCdsb2NhdGlvbicsIHNldHRpbmdzLmVuYWJsZUxvY2F0aW9uLCB0cnVlKTtcblxuICAgICAgICAgICAgYWRkU2V0dGluZygnd2lkdGgnLCB3aWR0aC50b1N0cmluZygpKTtcbiAgICAgICAgICAgIGFkZFNldHRpbmcoJ2hlaWdodCcsIGhlaWdodC50b1N0cmluZygpKTtcbiAgICAgICAgICAgIGFkZFNldHRpbmcoJ3RvcCcsIHRvcC50b1N0cmluZygpKTtcbiAgICAgICAgICAgIGFkZFNldHRpbmcoJ2xlZnQnLCBsZWZ0LnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB3aW5kb3cub3Blbih1cmwsIHRhcmdldCwgdGFyZ2V0ICE9PSAnX2JsYW5rJyA/IHdpbmRvd1NldHRpbmdzLmpvaW4oJywnKSA6ICcnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHByb3RlY3RlZCBnZXRTaGFyZVJlZGlyZWN0VVJMKCk6c3RyaW5nIHtcbiAgICAgICAgICAgIGxldCBhcHBVUkwgPSAnaHR0cHM6Ly9hcHAucmlkZXN0eWxlci5uZXQnO1xuXG4gICAgICAgICAgICBpZiAoYXBpLmVudmlyb25tZW50ID09PSBhcGkuRW52aXJvbm1lbnQuQWxwaGEpIGFwcFVSTCA9ICdodHRwOi8vYXBwLWFscGhhLnJpZGVzdHlsZXIubmV0JztcbiAgICAgICAgICAgIGVsc2UgaWYgKGFwaS5lbnZpcm9ubWVudCA9PT0gYXBpLkVudmlyb25tZW50LkJldGEpIGFwcFVSTCA9ICdodHRwOi8vYXBwLWJldGEucmlkZXN0eWxlci5uZXQnO1xuXG4gICAgICAgICAgICByZXR1cm4gYXBwVVJMICsgJy9zaGFyZWQuaHRtbCc7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBleHBvcnQgbmFtZXNwYWNlIFNoYXJlQnV0dG9uIHtcbiAgICAgICAgZXhwb3J0IGludGVyZmFjZSBTZXR0aW5ncyB7XG4gICAgICAgICAgICBjbGFzc05hbWU/OiBzdHJpbmc7XG4gICAgICAgICAgICB0aXRsZT86IHN0cmluZztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IHR3aXR0ZXJJbnRlbnRVUkwgPSAnJztcbiAgICBleHBvcnQgY2xhc3MgVHdpdHRlclNoYXJlQnV0dG9uIGV4dGVuZHMgU2hhcmVCdXR0b24ge1xuICAgICAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgICAgIHN1cGVyKHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IGJ1dHRvbkNsYXNzICsgJy10d2l0dGVyJyxcbiAgICAgICAgICAgICAgICB0aXRsZTogJ1R3aXR0ZXInXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTaGFyZSB0aGUgY3VycmVudCBVUkwgdmlhIFR3aXR0ZXJcbiAgICAgICAgICovXG4gICAgICAgIHB1YmxpYyBzaGFyZSgpIHtcbiAgICAgICAgICAgIGxldCB1cmwgPSAnaHR0cHM6Ly90d2l0dGVyLmNvbS9pbnRlbnQvdHdlZXQ/JztcbiAgICAgICAgICAgIGxldCB0d2l0dGVySW50ZW50UGFyYW1ldGVycyA9IFtcbiAgICAgICAgICAgICAgICAndXJsPScgKyBlbmNvZGVVUklDb21wb25lbnQodGhpcy5jdXJyZW50VVJMKVxuICAgICAgICAgICAgXTtcblxuICAgICAgICAgICAgaWYgKHRoaXMubWVzc2FnZSkgXG4gICAgICAgICAgICAgICAgdHdpdHRlckludGVudFBhcmFtZXRlcnMucHVzaCgndGV4dD0nICsgZW5jb2RlVVJJQ29tcG9uZW50KHRoaXMubWVzc2FnZSkpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAodGhpcy50YWdzICYmIHRoaXMudGFncy5sZW5ndGgpXG4gICAgICAgICAgICAgICAgdHdpdHRlckludGVudFBhcmFtZXRlcnMucHVzaCgnaGFzaHRhZ3M9JyArIEFycmF5SGVscGVyLm1hcCh0aGlzLnRhZ3MsIHRhZyA9PiBlbmNvZGVVUklDb21wb25lbnQodGFnKSkuam9pbignLCcpKTtcblxuICAgICAgICAgICAgdXJsICs9IHR3aXR0ZXJJbnRlbnRQYXJhbWV0ZXJzLmpvaW4oJyYnKTtcblxuICAgICAgICAgICAgdGhpcy5vcGVuTmV3V2luZG93KHVybCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBleHBvcnQgY2xhc3MgRmFjZWJvb2tTaGFyZUJ1dHRvbiBleHRlbmRzIFNoYXJlQnV0dG9uIHtcbiAgICAgICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgICAgICBzdXBlcih7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBidXR0b25DbGFzcyArICctZmFjZWJvb2snLFxuICAgICAgICAgICAgICAgIHRpdGxlOiAnRmFjZWJvb2snXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNoYXJlIHRoZSBjdXJyZW50IFVSTCB2aWEgRmFjZWJvb2tcbiAgICAgICAgICovXG4gICAgICAgIHB1YmxpYyBzaGFyZSgpIHtcbiAgICAgICAgICAgIGxldCB1cmwgPSAnaHR0cHM6Ly93d3cuZmFjZWJvb2suY29tL2RpYWxvZy9zaGFyZT8nO1xuICAgICAgICAgICAgbGV0IGZhY2Vib29rRGlhbG9nUGFyYW1ldGVycyA9IFtcbiAgICAgICAgICAgICAgICAnYXBwX2lkPTE1NzYzODA0MTI1ODI4NDUnLFxuICAgICAgICAgICAgICAgICdkaXNwbGF5PXBvcHVwJyxcbiAgICAgICAgICAgICAgICAnaHJlZj0nICsgZW5jb2RlVVJJQ29tcG9uZW50KHRoaXMuY3VycmVudFVSTCksXG4gICAgICAgICAgICAgICAgJ3JlZGlyZWN0X3VyaT0nICsgZW5jb2RlVVJJQ29tcG9uZW50KHRoaXMuZ2V0U2hhcmVSZWRpcmVjdFVSTCgpKVxuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gRmFjZWJvb2sgb25seSBsZXRzIHlvdSBzcGVjaWZ5IG9uZSBoYXNodGFnLCBzbyB3ZSB1c2UgdGhlIGZpcnN0XG4gICAgICAgICAgICBpZiAodGhpcy50YWdzICYmIHRoaXMudGFncy5sZW5ndGgpXG4gICAgICAgICAgICAgICAgZmFjZWJvb2tEaWFsb2dQYXJhbWV0ZXJzLnB1c2goJ2hhc2h0YWc9JyArIGVuY29kZVVSSUNvbXBvbmVudCgnIycgKyB0aGlzLnRhZ3NbMF0pKTtcblxuICAgICAgICAgICAgdXJsICs9IGZhY2Vib29rRGlhbG9nUGFyYW1ldGVycy5qb2luKCcmJyk7XG5cbiAgICAgICAgICAgIHRoaXMub3Blbk5ld1dpbmRvdyh1cmwpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZXhwb3J0IGNsYXNzIE5ld1dpbmRvd1NoYXJlQnV0dG9uIGV4dGVuZHMgU2hhcmVCdXR0b24ge1xuICAgICAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgICAgIHN1cGVyKHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IGJ1dHRvbkNsYXNzICsgJy1saW5rJ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTaGFyZSB0aGUgY3VycmVudCBVUkwgYnkgb3BlbmluZyBpdCBpbiBhIG5ldyB3aW5kb3dcbiAgICAgICAgICovXG4gICAgICAgIHB1YmxpYyBzaGFyZSgpIHtcbiAgICAgICAgICAgIHRoaXMub3Blbk5ld1dpbmRvdyh0aGlzLmN1cnJlbnRVUkwsIHtcbiAgICAgICAgICAgICAgICB0YXJnZXQ6ICdfYmxhbmsnXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGV4cG9ydCBjbGFzcyBRUlNoYXJlQnV0dG9uIGV4dGVuZHMgU2hhcmVCdXR0b24ge1xuICAgICAgICBwcml2YXRlIHBvcG92ZXI6UmlkZVN0eWxlclNob3djYXNlUG9wb3ZlcjtcbiAgICAgICAgcHJpdmF0ZSBxckNvZGU6UmlkZVN0eWxlclNob3djYXNlUVJDb2RlQ29tcG9uZW50O1xuXG4gICAgICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICAgICAgc3VwZXIoe1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogYnV0dG9uQ2xhc3MgKyAnLXFyLWNvZGUnXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdGhpcy5wb3BvdmVyID0gbmV3IFJpZGVTdHlsZXJTaG93Y2FzZVBvcG92ZXIoKTtcbiAgICAgICAgICAgIHRoaXMuY29tcG9uZW50LmFwcGVuZENoaWxkKHRoaXMucG9wb3Zlci5jb21wb25lbnQpO1xuXG4gICAgICAgICAgICB0aGlzLnFyQ29kZSA9IG5ldyBSaWRlU3R5bGVyU2hvd2Nhc2VRUkNvZGVDb21wb25lbnQoKTtcbiAgICAgICAgICAgIHRoaXMucG9wb3Zlci5jb21wb25lbnQuYXBwZW5kQ2hpbGQodGhpcy5xckNvZGUuY29tcG9uZW50KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHB1YmxpYyBzZXRVUkwodXJsOnN0cmluZykge1xuICAgICAgICAgICAgc3VwZXIuc2V0VVJMKHVybCk7XG5cbiAgICAgICAgICAgIHRoaXMucXJDb2RlLmRpc3BsYXlVUkwodXJsKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHB1YmxpYyBvbkNsaWNrKCkge1xuICAgICAgICAgICAgdGhpcy5wb3BvdmVyLnRvZ2dsZSgpO1xuICAgICAgICB9XG4gICAgfVxufSJdfQ==

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var RideStylerShowcase;
(function (RideStylerShowcase) {
    var shareModalClass = 'ridestyler-showcase-share';

    var RideStylerShowcaseShareModal = function (_RideStylerShowcase$R) {
        _inherits(RideStylerShowcaseShareModal, _RideStylerShowcase$R);

        function RideStylerShowcaseShareModal(showcaseInstance, vehicleRenderInstructions) {
            _classCallCheck(this, RideStylerShowcaseShareModal);

            var _this = _possibleConstructorReturn(this, (RideStylerShowcaseShareModal.__proto__ || Object.getPrototypeOf(RideStylerShowcaseShareModal)).call(this, showcaseInstance, {
                removeOnHidden: true,
                full: true
            }));

            _this.imageType = 2 /* Angle */;
            _this.resizedCallback = function () {
                return _this.updateViewport();
            };
            // Copy the render instructions
            _this.vehicleRenderInstructions = Object.assign({}, vehicleRenderInstructions);
            _this.onInstructionsChanged();
            return _this;
        }
        /**
         * Build the DOM structure
         */


        _createClass(RideStylerShowcaseShareModal, [{
            key: 'buildModal',
            value: function buildModal() {
                var _this2 = this;

                _get(RideStylerShowcaseShareModal.prototype.__proto__ || Object.getPrototypeOf(RideStylerShowcaseShareModal.prototype), 'buildModal', this).call(this);
                this.component.classList.add(shareModalClass);
                var background = new RideStylerShowcase.RideStylerShowcaseBackground(this.showcase);
                this.component.appendChild(background.component);
                RideStylerShowcase.HTMLHelper.createElement('h1', {
                    appendTo: this.component,
                    text: RideStylerShowcase.strings.getString('share-my-vehicle')
                });
                // Instructions
                RideStylerShowcase.HTMLHelper.createElement('p', {
                    className: 'ridestyler-showcase-share-instructions',
                    text: RideStylerShowcase.strings.getString('share-instructions'),
                    appendTo: this.component
                });
                this.createShareButtons();
                // Rotate UI
                if (this.canSwitchAngle()) {
                    this.rotateElement = RideStylerShowcase.HTMLHelper.createElement('div', {
                        className: 'ridestyler-showcase-rotate-vehicle',
                        appendTo: this.component
                    });
                    this.rotateElement.addEventListener('click', function () {
                        return _this2.switchAngle();
                    });
                }
            }
        }, {
            key: 'createShareButtons',
            value: function createShareButtons() {
                this.shareButtons = [new RideStylerShowcase.share.FacebookShareButton(), new RideStylerShowcase.share.TwitterShareButton(), new RideStylerShowcase.share.QRShareButton(), new RideStylerShowcase.share.NewWindowShareButton()];
                var shareButtonContainer = RideStylerShowcase.HTMLHelper.createElement({
                    className: shareModalClass + '-buttons',
                    appendTo: this.component
                });
                var _iteratorNormalCompletion = true;
                var _didIteratorError = false;
                var _iteratorError = undefined;

                try {
                    for (var _iterator = this.shareButtons[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
                        var shareButton = _step.value;

                        shareButtonContainer.appendChild(shareButton.component);
                    }
                } catch (err) {
                    _didIteratorError = true;
                    _iteratorError = err;
                } finally {
                    try {
                        if (!_iteratorNormalCompletion && _iterator.return) {
                            _iterator.return();
                        }
                    } finally {
                        if (_didIteratorError) {
                            throw _iteratorError;
                        }
                    }
                }
            }
        }, {
            key: 'onShow',
            value: function onShow() {
                _get(RideStylerShowcaseShareModal.prototype.__proto__ || Object.getPrototypeOf(RideStylerShowcaseShareModal.prototype), 'onShow', this).call(this);
                this.setupViewport();
                this.events.on('resized', this.resizedCallback);
            }
        }, {
            key: 'onHidden',
            value: function onHidden() {
                _get(RideStylerShowcaseShareModal.prototype.__proto__ || Object.getPrototypeOf(RideStylerShowcaseShareModal.prototype), 'onHidden', this).call(this);
                this.events.off('resized', this.resizedCallback);
            }
        }, {
            key: 'updateViewport',
            value: function updateViewport() {
                this.vehicleViewport.Update(this.vehicleRenderInstructions);
            }
        }, {
            key: 'getShareURL',
            value: function getShareURL() {
                var appURL = 'https://app.ridestyler.net';
                if (RideStylerShowcase.api.environment === RideStylerShowcase.api.Environment.Alpha) appURL = 'http://app-alpha.ridestyler.net';else if (RideStylerShowcase.api.environment === RideStylerShowcase.api.Environment.Beta) appURL = 'http://app-beta.ridestyler.net';
                var sharePath = '/share.cshtml?';
                var shareParams = ridestyler.utils.toParamString(RideStylerShowcase.ObjectHelper.assign(ridestyler.auth.authenticateData(null), this.vehicleRenderInstructions));
                return appURL + sharePath + shareParams;
            }
        }, {
            key: 'setupViewport',
            value: function setupViewport() {
                var _this3 = this;

                var viewportElement = RideStylerShowcase.HTMLHelper.createElementWithClass('div', 'ridestyler-showcase-viewport');
                this.component.appendChild(viewportElement);
                viewportElement.addEventListener('click', function () {
                    return _this3.switchAngle();
                });
                this.vehicleViewport = new RideStylerViewport(viewportElement);
                var viewportUpdated = this.vehicleViewport.Update(this.vehicleRenderInstructions);
                if (this.rotateElement) viewportUpdated.done(function () {
                    _this3.rotateElement.classList.add('in');
                });
            }
        }, {
            key: 'canSwitchAngle',
            value: function canSwitchAngle() {
                var _state$getData = this.state.getData(),
                    currentVehicleDescriptionModel = _state$getData.currentVehicleDescriptionModel;

                return currentVehicleDescriptionModel.HasAngledImage && currentVehicleDescriptionModel.HasSideImage;
            }
        }, {
            key: 'onInstructionsChanged',
            value: function onInstructionsChanged() {
                var _this4 = this;

                var shareURL = this.getShareURL();
                this.setEnabled(false);
                RideStylerShowcase.api.request("link/create", {
                    URL: this.getShareURL()
                }).done(function (response) {
                    _this4.updateURL(response.ShortURL);
                    _this4.setEnabled(true);
                });
            }
        }, {
            key: 'setEnabled',
            value: function setEnabled(enabled) {
                var _iteratorNormalCompletion2 = true;
                var _didIteratorError2 = false;
                var _iteratorError2 = undefined;

                try {
                    for (var _iterator2 = this.shareButtons[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {
                        var shareButton = _step2.value;

                        shareButton.component.disabled = !enabled;
                    }
                } catch (err) {
                    _didIteratorError2 = true;
                    _iteratorError2 = err;
                } finally {
                    try {
                        if (!_iteratorNormalCompletion2 && _iterator2.return) {
                            _iterator2.return();
                        }
                    } finally {
                        if (_didIteratorError2) {
                            throw _iteratorError2;
                        }
                    }
                }
            }
        }, {
            key: 'updateURL',
            value: function updateURL(shareURL) {
                var shareTags = ['vehicle'];
                var shareMessage = RideStylerShowcase.strings.getString('check-out-my-vehicle');
                if (this.vehicleRenderInstructions.WheelFitment) shareTags.push('wheels');
                // Update the share buttons
                var _iteratorNormalCompletion3 = true;
                var _didIteratorError3 = false;
                var _iteratorError3 = undefined;

                try {
                    for (var _iterator3 = this.shareButtons[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {
                        var shareButton = _step3.value;

                        shareButton.setURL(shareURL);
                        shareButton.setTags(shareTags);
                        shareButton.setMessage(shareMessage);
                    }
                } catch (err) {
                    _didIteratorError3 = true;
                    _iteratorError3 = err;
                } finally {
                    try {
                        if (!_iteratorNormalCompletion3 && _iterator3.return) {
                            _iterator3.return();
                        }
                    } finally {
                        if (_didIteratorError3) {
                            throw _iteratorError3;
                        }
                    }
                }
            }
        }, {
            key: 'switchAngle',
            value: function switchAngle() {
                if (!this.canSwitchAngle() || this.state.getData().currentWheel.HasSideImage === false) return;
                if (this.imageType === 2 /* Angle */) this.imageType = 1 /* Side */;else this.imageType = 2 /* Angle */;
                this.vehicleRenderInstructions.Type = this.imageType;
                this.vehicleViewport.Update({
                    Type: this.imageType
                });
                this.onInstructionsChanged();
            }
        }]);

        return RideStylerShowcaseShareModal;
    }(RideStylerShowcase.RideStylerShowcaseModal);

    RideStylerShowcase.RideStylerShowcaseShareModal = RideStylerShowcaseShareModal;
})(RideStylerShowcase || (RideStylerShowcase = {}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvUmlkZVN0eWxlclNob3djYXNlU2hhcmVNb2RhbC50cyJdLCJuYW1lcyI6WyJSaWRlU3R5bGVyU2hvd2Nhc2UiLCJzaGFyZU1vZGFsQ2xhc3MiLCJSaWRlU3R5bGVyU2hvd2Nhc2VTaGFyZU1vZGFsIiwic2hvd2Nhc2VJbnN0YW5jZSIsInZlaGljbGVSZW5kZXJJbnN0cnVjdGlvbnMiLCJyZW1vdmVPbkhpZGRlbiIsImZ1bGwiLCJpbWFnZVR5cGUiLCJyZXNpemVkQ2FsbGJhY2siLCJ1cGRhdGVWaWV3cG9ydCIsIk9iamVjdCIsImFzc2lnbiIsIm9uSW5zdHJ1Y3Rpb25zQ2hhbmdlZCIsImNvbXBvbmVudCIsImNsYXNzTGlzdCIsImFkZCIsImJhY2tncm91bmQiLCJSaWRlU3R5bGVyU2hvd2Nhc2VCYWNrZ3JvdW5kIiwic2hvd2Nhc2UiLCJhcHBlbmRDaGlsZCIsIkhUTUxIZWxwZXIiLCJjcmVhdGVFbGVtZW50IiwiYXBwZW5kVG8iLCJ0ZXh0Iiwic3RyaW5ncyIsImdldFN0cmluZyIsImNsYXNzTmFtZSIsImNyZWF0ZVNoYXJlQnV0dG9ucyIsImNhblN3aXRjaEFuZ2xlIiwicm90YXRlRWxlbWVudCIsImFkZEV2ZW50TGlzdGVuZXIiLCJzd2l0Y2hBbmdsZSIsInNoYXJlQnV0dG9ucyIsInNoYXJlIiwiRmFjZWJvb2tTaGFyZUJ1dHRvbiIsIlR3aXR0ZXJTaGFyZUJ1dHRvbiIsIlFSU2hhcmVCdXR0b24iLCJOZXdXaW5kb3dTaGFyZUJ1dHRvbiIsInNoYXJlQnV0dG9uQ29udGFpbmVyIiwic2hhcmVCdXR0b24iLCJzZXR1cFZpZXdwb3J0IiwiZXZlbnRzIiwib24iLCJvZmYiLCJ2ZWhpY2xlVmlld3BvcnQiLCJVcGRhdGUiLCJhcHBVUkwiLCJhcGkiLCJlbnZpcm9ubWVudCIsIkVudmlyb25tZW50IiwiQWxwaGEiLCJCZXRhIiwic2hhcmVQYXRoIiwic2hhcmVQYXJhbXMiLCJyaWRlc3R5bGVyIiwidXRpbHMiLCJ0b1BhcmFtU3RyaW5nIiwiT2JqZWN0SGVscGVyIiwiYXV0aCIsImF1dGhlbnRpY2F0ZURhdGEiLCJ2aWV3cG9ydEVsZW1lbnQiLCJjcmVhdGVFbGVtZW50V2l0aENsYXNzIiwiUmlkZVN0eWxlclZpZXdwb3J0Iiwidmlld3BvcnRVcGRhdGVkIiwiZG9uZSIsInN0YXRlIiwiZ2V0RGF0YSIsImN1cnJlbnRWZWhpY2xlRGVzY3JpcHRpb25Nb2RlbCIsIkhhc0FuZ2xlZEltYWdlIiwiSGFzU2lkZUltYWdlIiwic2hhcmVVUkwiLCJnZXRTaGFyZVVSTCIsInNldEVuYWJsZWQiLCJyZXF1ZXN0IiwiVVJMIiwidXBkYXRlVVJMIiwicmVzcG9uc2UiLCJTaG9ydFVSTCIsImVuYWJsZWQiLCJkaXNhYmxlZCIsInNoYXJlVGFncyIsInNoYXJlTWVzc2FnZSIsIldoZWVsRml0bWVudCIsInB1c2giLCJzZXRVUkwiLCJzZXRUYWdzIiwic2V0TWVzc2FnZSIsImN1cnJlbnRXaGVlbCIsIlR5cGUiLCJSaWRlU3R5bGVyU2hvd2Nhc2VNb2RhbCJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFBLElBQVVBLGtCQUFWO0FBQUEsQ0FBQSxVQUFVQSxrQkFBVixFQUE0QjtBQUN4QixRQUFNQyxrQkFBa0IsMkJBQXhCOztBQUR3QixRQUV4QkMsNEJBRndCO0FBQUE7O0FBTXBCLDhDQUFZQyxnQkFBWixFQUEwREMseUJBQTFELEVBQWlJO0FBQUE7O0FBQUEsb0tBQ3ZIRCxnQkFEdUgsRUFDckc7QUFDcEJFLGdDQUFnQixJQURJO0FBRXBCQyxzQkFBTTtBQUZjLGFBRHFHOztBQWV6SCxrQkFBQUMsU0FBQSxHQUFTLENBQVQsQ0FBUyxXQUFUO0FBcUVBLGtCQUFBQyxlQUFBLEdBQWtCO0FBQUEsdUJBQU0sTUFBS0MsY0FBTCxFQUFOO0FBQUEsYUFBbEI7QUE5RUo7QUFDQSxrQkFBS0wseUJBQUwsR0FBaUNNLE9BQU9DLE1BQVAsQ0FBYyxFQUFkLEVBQWtCUCx5QkFBbEIsQ0FBakM7QUFDQSxrQkFBS1EscUJBQUw7QUFSNkg7QUFTaEk7QUFRRDs7Ozs7QUF2Qm9CO0FBQUE7QUFBQSx5Q0EwQkE7QUFBQTs7QUFDaEI7QUFFQSxxQkFBS0MsU0FBTCxDQUFlQyxTQUFmLENBQXlCQyxHQUF6QixDQUE2QmQsZUFBN0I7QUFFQSxvQkFBSWUsYUFBYSxJQUFJaEIsbUJBQUFpQiw0QkFBSixDQUFpQyxLQUFLQyxRQUF0QyxDQUFqQjtBQUNBLHFCQUFLTCxTQUFMLENBQWVNLFdBQWYsQ0FBMkJILFdBQVdILFNBQXRDO0FBRUFiLG1DQUFBb0IsVUFBQSxDQUFXQyxhQUFYLENBQXlCLElBQXpCLEVBQStCO0FBQzNCQyw4QkFBVSxLQUFLVCxTQURZO0FBRTNCVSwwQkFBTXZCLG1CQUFBd0IsT0FBQSxDQUFRQyxTQUFSLENBQWtCLGtCQUFsQjtBQUZxQixpQkFBL0I7QUFLQTtBQUNBekIsbUNBQUFvQixVQUFBLENBQVdDLGFBQVgsQ0FBeUIsR0FBekIsRUFBOEI7QUFDMUJLLCtCQUFXLHdDQURlO0FBRTFCSCwwQkFBTXZCLG1CQUFBd0IsT0FBQSxDQUFRQyxTQUFSLENBQWtCLG9CQUFsQixDQUZvQjtBQUcxQkgsOEJBQVUsS0FBS1Q7QUFIVyxpQkFBOUI7QUFNQSxxQkFBS2Msa0JBQUw7QUFFQTtBQUNBLG9CQUFJLEtBQUtDLGNBQUwsRUFBSixFQUEyQjtBQUN2Qix5QkFBS0MsYUFBTCxHQUFxQjdCLG1CQUFBb0IsVUFBQSxDQUFXQyxhQUFYLENBQXlCLEtBQXpCLEVBQWdDO0FBQ2pESyxtQ0FBVyxvQ0FEc0M7QUFFakRKLGtDQUFVLEtBQUtUO0FBRmtDLHFCQUFoQyxDQUFyQjtBQUtBLHlCQUFLZ0IsYUFBTCxDQUFtQkMsZ0JBQW5CLENBQW9DLE9BQXBDLEVBQTZDO0FBQUEsK0JBQU0sT0FBS0MsV0FBTCxFQUFOO0FBQUEscUJBQTdDO0FBQ0g7QUFDSjtBQXpEbUI7QUFBQTtBQUFBLGlEQTJETTtBQUN0QixxQkFBS0MsWUFBTCxHQUFvQixDQUNoQixJQUFJaEMsbUJBQUFpQyxLQUFBLENBQU1DLG1CQUFWLEVBRGdCLEVBRWhCLElBQUlsQyxtQkFBQWlDLEtBQUEsQ0FBTUUsa0JBQVYsRUFGZ0IsRUFHaEIsSUFBSW5DLG1CQUFBaUMsS0FBQSxDQUFNRyxhQUFWLEVBSGdCLEVBSWhCLElBQUlwQyxtQkFBQWlDLEtBQUEsQ0FBTUksb0JBQVYsRUFKZ0IsQ0FBcEI7QUFPQSxvQkFBTUMsdUJBQXVCdEMsbUJBQUFvQixVQUFBLENBQVdDLGFBQVgsQ0FBeUI7QUFDbERLLCtCQUFXekIsa0JBQWtCLFVBRHFCO0FBRWxEcUIsOEJBQVUsS0FBS1Q7QUFGbUMsaUJBQXpCLENBQTdCO0FBUnNCO0FBQUE7QUFBQTs7QUFBQTtBQWF0Qix5Q0FBMEIsS0FBS21CLFlBQS9CO0FBQUEsNEJBQVdPLFdBQVg7O0FBQ0lELDZDQUFxQm5CLFdBQXJCLENBQWlDb0IsWUFBWTFCLFNBQTdDO0FBREo7QUFic0I7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQWV6QjtBQTFFbUI7QUFBQTtBQUFBLHFDQTRFSjtBQUNaO0FBRUEscUJBQUsyQixhQUFMO0FBRUEscUJBQUtDLE1BQUwsQ0FBWUMsRUFBWixDQUFlLFNBQWYsRUFBMEIsS0FBS2xDLGVBQS9CO0FBQ0g7QUFsRm1CO0FBQUE7QUFBQSx1Q0FvRkY7QUFDZDtBQUVBLHFCQUFLaUMsTUFBTCxDQUFZRSxHQUFaLENBQWdCLFNBQWhCLEVBQTJCLEtBQUtuQyxlQUFoQztBQUNIO0FBeEZtQjtBQUFBO0FBQUEsNkNBMkZFO0FBQUsscUJBQUtvQyxlQUFMLENBQXFCQyxNQUFyQixDQUE0QixLQUFLekMseUJBQWpDO0FBQThEO0FBM0ZyRTtBQUFBO0FBQUEsMENBNkZEO0FBQ2Ysb0JBQUkwQyxTQUFTLDRCQUFiO0FBRUEsb0JBQUk5QyxtQkFBQStDLEdBQUEsQ0FBSUMsV0FBSixLQUFvQmhELG1CQUFBK0MsR0FBQSxDQUFJRSxXQUFKLENBQWdCQyxLQUF4QyxFQUErQ0osU0FBUyxpQ0FBVCxDQUEvQyxLQUNLLElBQUk5QyxtQkFBQStDLEdBQUEsQ0FBSUMsV0FBSixLQUFvQmhELG1CQUFBK0MsR0FBQSxDQUFJRSxXQUFKLENBQWdCRSxJQUF4QyxFQUE4Q0wsU0FBUyxnQ0FBVDtBQUVuRCxvQkFBTU0sWUFBWSxnQkFBbEI7QUFFQSxvQkFBTUMsY0FBY0MsV0FBV0MsS0FBWCxDQUFpQkMsYUFBakIsQ0FDaEJ4RCxtQkFBQXlELFlBQUEsQ0FBYTlDLE1BQWIsQ0FDSTJDLFdBQVdJLElBQVgsQ0FBZ0JDLGdCQUFoQixDQUFpQyxJQUFqQyxDQURKLEVBRUksS0FBS3ZELHlCQUZULENBRGdCLENBQXBCO0FBT0EsdUJBQU8wQyxTQUFTTSxTQUFULEdBQXFCQyxXQUE1QjtBQUNIO0FBN0dtQjtBQUFBO0FBQUEsNENBK0dDO0FBQUE7O0FBQ2pCLG9CQUFJTyxrQkFBa0I1RCxtQkFBQW9CLFVBQUEsQ0FBV3lDLHNCQUFYLENBQWtDLEtBQWxDLEVBQXlDLDhCQUF6QyxDQUF0QjtBQUNBLHFCQUFLaEQsU0FBTCxDQUFlTSxXQUFmLENBQTJCeUMsZUFBM0I7QUFFQUEsZ0NBQWdCOUIsZ0JBQWhCLENBQWlDLE9BQWpDLEVBQTBDO0FBQUEsMkJBQU0sT0FBS0MsV0FBTCxFQUFOO0FBQUEsaUJBQTFDO0FBRUEscUJBQUthLGVBQUwsR0FBdUIsSUFBSWtCLGtCQUFKLENBQXVCRixlQUF2QixDQUF2QjtBQUVBLG9CQUFJRyxrQkFBa0IsS0FBS25CLGVBQUwsQ0FBcUJDLE1BQXJCLENBQTRCLEtBQUt6Qyx5QkFBakMsQ0FBdEI7QUFFQSxvQkFBSSxLQUFLeUIsYUFBVCxFQUF3QmtDLGdCQUFnQkMsSUFBaEIsQ0FBcUIsWUFBSztBQUM5QywyQkFBS25DLGFBQUwsQ0FBbUJmLFNBQW5CLENBQTZCQyxHQUE3QixDQUFpQyxJQUFqQztBQUNILGlCQUZ1QjtBQUczQjtBQTVIbUI7QUFBQTtBQUFBLDZDQStIRTtBQUFBLHFDQUdkLEtBQUtrRCxLQUFMLENBQVdDLE9BQVgsRUFIYztBQUFBLG9CQUVkQyw4QkFGYyxrQkFFZEEsOEJBRmM7O0FBS2xCLHVCQUFPQSwrQkFBK0JDLGNBQS9CLElBQWlERCwrQkFBK0JFLFlBQXZGO0FBQ0g7QUFySW1CO0FBQUE7QUFBQSxvREF1SVM7QUFBQTs7QUFDekIsb0JBQU1DLFdBQVcsS0FBS0MsV0FBTCxFQUFqQjtBQUVBLHFCQUFLQyxVQUFMLENBQWdCLEtBQWhCO0FBRUF4RSxtQ0FBQStDLEdBQUEsQ0FBSTBCLE9BQUosQ0FBWSxhQUFaLEVBQTJCO0FBQ3ZCQyx5QkFBSyxLQUFLSCxXQUFMO0FBRGtCLGlCQUEzQixFQUVHUCxJQUZILENBRVEsb0JBQVc7QUFDZiwyQkFBS1csU0FBTCxDQUFlQyxTQUFTQyxRQUF4QjtBQUNBLDJCQUFLTCxVQUFMLENBQWdCLElBQWhCO0FBQ0gsaUJBTEQ7QUFNSDtBQWxKbUI7QUFBQTtBQUFBLHVDQW9KRE0sT0FwSkMsRUFvSmM7QUFBQTtBQUFBO0FBQUE7O0FBQUE7QUFDOUIsMENBQTBCLEtBQUs5QyxZQUEvQixtSUFBNkM7QUFBQSw0QkFBbENPLFdBQWtDOztBQUN6Q0Esb0NBQVkxQixTQUFaLENBQXNCa0UsUUFBdEIsR0FBaUMsQ0FBQ0QsT0FBbEM7QUFDSDtBQUg2QjtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBSWpDO0FBeEptQjtBQUFBO0FBQUEsc0NBMEpGUixRQTFKRSxFQTBKYTtBQUM3QixvQkFBTVUsWUFBcUIsQ0FBQyxTQUFELENBQTNCO0FBQ0Esb0JBQU1DLGVBQWVqRixtQkFBQXdCLE9BQUEsQ0FBUUMsU0FBUixDQUFrQixzQkFBbEIsQ0FBckI7QUFFQSxvQkFBSSxLQUFLckIseUJBQUwsQ0FBK0I4RSxZQUFuQyxFQUFpREYsVUFBVUcsSUFBVixDQUFlLFFBQWY7QUFFakQ7QUFONkI7QUFBQTtBQUFBOztBQUFBO0FBTzdCLDBDQUEwQixLQUFLbkQsWUFBL0IsbUlBQTZDO0FBQUEsNEJBQWxDTyxXQUFrQzs7QUFDekNBLG9DQUFZNkMsTUFBWixDQUFtQmQsUUFBbkI7QUFDQS9CLG9DQUFZOEMsT0FBWixDQUFvQkwsU0FBcEI7QUFDQXpDLG9DQUFZK0MsVUFBWixDQUF1QkwsWUFBdkI7QUFDSDtBQVg0QjtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBWWhDO0FBdEttQjtBQUFBO0FBQUEsMENBd0tEO0FBQ2Ysb0JBQUksQ0FBQyxLQUFLckQsY0FBTCxFQUFELElBQTBCLEtBQUtxQyxLQUFMLENBQVdDLE9BQVgsR0FBcUJxQixZQUFyQixDQUFrQ2xCLFlBQWxDLEtBQW1ELEtBQWpGLEVBQXdGO0FBRXhGLG9CQUFJLEtBQUs5RCxTQUFMLEtBQWMsQ0FBbEIsQ0FBa0IsV0FBbEIsRUFDSSxLQUFLQSxTQUFMLEdBQWMsQ0FBZCxDQUFjLFVBQWQsQ0FESixLQUdJLEtBQUtBLFNBQUwsR0FBYyxDQUFkLENBQWMsV0FBZDtBQUVKLHFCQUFLSCx5QkFBTCxDQUErQm9GLElBQS9CLEdBQXNDLEtBQUtqRixTQUEzQztBQUVBLHFCQUFLcUMsZUFBTCxDQUFxQkMsTUFBckIsQ0FBNEI7QUFDeEIyQywwQkFBTSxLQUFLakY7QUFEYSxpQkFBNUI7QUFHQSxxQkFBS0sscUJBQUw7QUFDSDtBQXRMbUI7O0FBQUE7QUFBQSxNQUUwQlosbUJBQUF5Rix1QkFGMUI7O0FBRVh6Rix1QkFBQUUsNEJBQUEsR0FBNEJBLDRCQUE1QjtBQXNMaEIsQ0F4TEQsRUFBVUYsdUJBQUFBLHFCQUFrQixFQUFsQixDQUFWIiwiZmlsZSI6InNjcmlwdHMvY29tcG9uZW50cy9SaWRlU3R5bGVyU2hvd2Nhc2VTaGFyZU1vZGFsLmpzIiwic291cmNlc0NvbnRlbnQiOlsibmFtZXNwYWNlIFJpZGVTdHlsZXJTaG93Y2FzZSB7XHJcbiAgICBjb25zdCBzaGFyZU1vZGFsQ2xhc3MgPSAncmlkZXN0eWxlci1zaG93Y2FzZS1zaGFyZSc7XHJcbiAgICBleHBvcnQgY2xhc3MgUmlkZVN0eWxlclNob3djYXNlU2hhcmVNb2RhbCBleHRlbmRzIFJpZGVTdHlsZXJTaG93Y2FzZU1vZGFsIHtcclxuICAgICAgICBwcml2YXRlIHJlYWRvbmx5IHZlaGljbGVSZW5kZXJJbnN0cnVjdGlvbnM6cmlkZXN0eWxlci5SZXF1ZXN0cy5WZWhpY2xlUmVuZGVySW5zdHJ1Y3Rpb25zO1xyXG4gICAgICAgIHByaXZhdGUgc2hhcmVCdXR0b25zOnNoYXJlLlNoYXJlQnV0dG9uW107XHJcblxyXG4gICAgICAgIGNvbnN0cnVjdG9yKHNob3djYXNlSW5zdGFuY2U6IFJpZGVTdHlsZXJTaG93Y2FzZUluc3RhbmNlLCB2ZWhpY2xlUmVuZGVySW5zdHJ1Y3Rpb25zOnJpZGVzdHlsZXIuUmVxdWVzdHMuVmVoaWNsZVJlbmRlckluc3RydWN0aW9ucykge1xyXG4gICAgICAgICAgICBzdXBlcihzaG93Y2FzZUluc3RhbmNlLCB7XHJcbiAgICAgICAgICAgICAgICByZW1vdmVPbkhpZGRlbjogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIGZ1bGw6IHRydWVcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAvLyBDb3B5IHRoZSByZW5kZXIgaW5zdHJ1Y3Rpb25zXHJcbiAgICAgICAgICAgIHRoaXMudmVoaWNsZVJlbmRlckluc3RydWN0aW9ucyA9IE9iamVjdC5hc3NpZ24oe30sIHZlaGljbGVSZW5kZXJJbnN0cnVjdGlvbnMpO1xyXG4gICAgICAgICAgICB0aGlzLm9uSW5zdHJ1Y3Rpb25zQ2hhbmdlZCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSB2ZWhpY2xlVmlld3BvcnQ6IFJpZGVTdHlsZXJWaWV3cG9ydDtcclxuICAgICAgICBcclxuICAgICAgICBwcml2YXRlIHJvdGF0ZUVsZW1lbnQ6IEhUTUxFbGVtZW50O1xyXG5cclxuICAgICAgICBwcml2YXRlIGltYWdlVHlwZTogcmlkZXN0eWxlci5EYXRhT2JqZWN0cy5WZWhpY2xlUmVzb3VyY2VUeXBlID0gcmlkZXN0eWxlci5EYXRhT2JqZWN0cy5WZWhpY2xlUmVzb3VyY2VUeXBlLkFuZ2xlO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBCdWlsZCB0aGUgRE9NIHN0cnVjdHVyZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHByb3RlY3RlZCBidWlsZE1vZGFsKCkge1xyXG4gICAgICAgICAgICBzdXBlci5idWlsZE1vZGFsKCk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmNvbXBvbmVudC5jbGFzc0xpc3QuYWRkKHNoYXJlTW9kYWxDbGFzcyk7XHJcblxyXG4gICAgICAgICAgICBsZXQgYmFja2dyb3VuZCA9IG5ldyBSaWRlU3R5bGVyU2hvd2Nhc2VCYWNrZ3JvdW5kKHRoaXMuc2hvd2Nhc2UpO1xyXG4gICAgICAgICAgICB0aGlzLmNvbXBvbmVudC5hcHBlbmRDaGlsZChiYWNrZ3JvdW5kLmNvbXBvbmVudCk7ICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBIVE1MSGVscGVyLmNyZWF0ZUVsZW1lbnQoJ2gxJywge1xyXG4gICAgICAgICAgICAgICAgYXBwZW5kVG86IHRoaXMuY29tcG9uZW50LFxyXG4gICAgICAgICAgICAgICAgdGV4dDogc3RyaW5ncy5nZXRTdHJpbmcoJ3NoYXJlLW15LXZlaGljbGUnKVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIEluc3RydWN0aW9uc1xyXG4gICAgICAgICAgICBIVE1MSGVscGVyLmNyZWF0ZUVsZW1lbnQoJ3AnLCB7XHJcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdyaWRlc3R5bGVyLXNob3djYXNlLXNoYXJlLWluc3RydWN0aW9ucycsXHJcbiAgICAgICAgICAgICAgICB0ZXh0OiBzdHJpbmdzLmdldFN0cmluZygnc2hhcmUtaW5zdHJ1Y3Rpb25zJyksXHJcbiAgICAgICAgICAgICAgICBhcHBlbmRUbzogdGhpcy5jb21wb25lbnRcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmNyZWF0ZVNoYXJlQnV0dG9ucygpO1xyXG5cclxuICAgICAgICAgICAgLy8gUm90YXRlIFVJXHJcbiAgICAgICAgICAgIGlmICh0aGlzLmNhblN3aXRjaEFuZ2xlKCkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucm90YXRlRWxlbWVudCA9IEhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCgnZGl2Jywge1xyXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ3JpZGVzdHlsZXItc2hvd2Nhc2Utcm90YXRlLXZlaGljbGUnLFxyXG4gICAgICAgICAgICAgICAgICAgIGFwcGVuZFRvOiB0aGlzLmNvbXBvbmVudFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIHRoaXMucm90YXRlRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuc3dpdGNoQW5nbGUoKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgY3JlYXRlU2hhcmVCdXR0b25zKCkge1xyXG4gICAgICAgICAgICB0aGlzLnNoYXJlQnV0dG9ucyA9IFtcclxuICAgICAgICAgICAgICAgIG5ldyBzaGFyZS5GYWNlYm9va1NoYXJlQnV0dG9uKCksXHJcbiAgICAgICAgICAgICAgICBuZXcgc2hhcmUuVHdpdHRlclNoYXJlQnV0dG9uKCksXHJcbiAgICAgICAgICAgICAgICBuZXcgc2hhcmUuUVJTaGFyZUJ1dHRvbigpLFxyXG4gICAgICAgICAgICAgICAgbmV3IHNoYXJlLk5ld1dpbmRvd1NoYXJlQnV0dG9uKClcclxuICAgICAgICAgICAgXTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHNoYXJlQnV0dG9uQ29udGFpbmVyID0gSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KHtcclxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogc2hhcmVNb2RhbENsYXNzICsgJy1idXR0b25zJyxcclxuICAgICAgICAgICAgICAgIGFwcGVuZFRvOiB0aGlzLmNvbXBvbmVudFxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGZvciAoY29uc3Qgc2hhcmVCdXR0b24gb2YgdGhpcy5zaGFyZUJ1dHRvbnMpIFxyXG4gICAgICAgICAgICAgICAgc2hhcmVCdXR0b25Db250YWluZXIuYXBwZW5kQ2hpbGQoc2hhcmVCdXR0b24uY29tcG9uZW50KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgcHJvdGVjdGVkIG9uU2hvdygpIHtcclxuICAgICAgICAgICAgc3VwZXIub25TaG93KCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB0aGlzLnNldHVwVmlld3BvcnQoKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRzLm9uKCdyZXNpemVkJywgdGhpcy5yZXNpemVkQ2FsbGJhY2spO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIG9uSGlkZGVuKCkge1xyXG4gICAgICAgICAgICBzdXBlci5vbkhpZGRlbigpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgdGhpcy5ldmVudHMub2ZmKCdyZXNpemVkJywgdGhpcy5yZXNpemVkQ2FsbGJhY2spO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSByZXNpemVkQ2FsbGJhY2sgPSAoKSA9PiB0aGlzLnVwZGF0ZVZpZXdwb3J0KCk7XHJcbiAgICAgICAgcHJpdmF0ZSB1cGRhdGVWaWV3cG9ydCgpIHsgdGhpcy52ZWhpY2xlVmlld3BvcnQuVXBkYXRlKHRoaXMudmVoaWNsZVJlbmRlckluc3RydWN0aW9ucyk7IH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBnZXRTaGFyZVVSTCgpOnN0cmluZyB7XHJcbiAgICAgICAgICAgIGxldCBhcHBVUkwgPSAnaHR0cHM6Ly9hcHAucmlkZXN0eWxlci5uZXQnO1xyXG5cclxuICAgICAgICAgICAgaWYgKGFwaS5lbnZpcm9ubWVudCA9PT0gYXBpLkVudmlyb25tZW50LkFscGhhKSBhcHBVUkwgPSAnaHR0cDovL2FwcC1hbHBoYS5yaWRlc3R5bGVyLm5ldCc7XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKGFwaS5lbnZpcm9ubWVudCA9PT0gYXBpLkVudmlyb25tZW50LkJldGEpIGFwcFVSTCA9ICdodHRwOi8vYXBwLWJldGEucmlkZXN0eWxlci5uZXQnO1xyXG5cclxuICAgICAgICAgICAgY29uc3Qgc2hhcmVQYXRoID0gJy9zaGFyZS5jc2h0bWw/JztcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHNoYXJlUGFyYW1zID0gcmlkZXN0eWxlci51dGlscy50b1BhcmFtU3RyaW5nKFxyXG4gICAgICAgICAgICAgICAgT2JqZWN0SGVscGVyLmFzc2lnbihcclxuICAgICAgICAgICAgICAgICAgICByaWRlc3R5bGVyLmF1dGguYXV0aGVudGljYXRlRGF0YShudWxsKSxcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnZlaGljbGVSZW5kZXJJbnN0cnVjdGlvbnNcclxuICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBhcHBVUkwgKyBzaGFyZVBhdGggKyBzaGFyZVBhcmFtcztcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgcHJpdmF0ZSBzZXR1cFZpZXdwb3J0KCkge1xyXG4gICAgICAgICAgICBsZXQgdmlld3BvcnRFbGVtZW50ID0gSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50V2l0aENsYXNzKCdkaXYnLCAncmlkZXN0eWxlci1zaG93Y2FzZS12aWV3cG9ydCcpO1xyXG4gICAgICAgICAgICB0aGlzLmNvbXBvbmVudC5hcHBlbmRDaGlsZCh2aWV3cG9ydEVsZW1lbnQpO1xyXG5cclxuICAgICAgICAgICAgdmlld3BvcnRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5zd2l0Y2hBbmdsZSgpKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHRoaXMudmVoaWNsZVZpZXdwb3J0ID0gbmV3IFJpZGVTdHlsZXJWaWV3cG9ydCh2aWV3cG9ydEVsZW1lbnQpO1xyXG5cclxuICAgICAgICAgICAgbGV0IHZpZXdwb3J0VXBkYXRlZCA9IHRoaXMudmVoaWNsZVZpZXdwb3J0LlVwZGF0ZSh0aGlzLnZlaGljbGVSZW5kZXJJbnN0cnVjdGlvbnMpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKHRoaXMucm90YXRlRWxlbWVudCkgdmlld3BvcnRVcGRhdGVkLmRvbmUoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yb3RhdGVFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2luJyk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgIHByaXZhdGUgY2FuU3dpdGNoQW5nbGUoKTpib29sZWFuIHtcclxuICAgICAgICAgICAgbGV0IHtcclxuICAgICAgICAgICAgICAgIGN1cnJlbnRWZWhpY2xlRGVzY3JpcHRpb25Nb2RlbFxyXG4gICAgICAgICAgICB9ID0gdGhpcy5zdGF0ZS5nZXREYXRhKCk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gY3VycmVudFZlaGljbGVEZXNjcmlwdGlvbk1vZGVsLkhhc0FuZ2xlZEltYWdlICYmIGN1cnJlbnRWZWhpY2xlRGVzY3JpcHRpb25Nb2RlbC5IYXNTaWRlSW1hZ2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIG9uSW5zdHJ1Y3Rpb25zQ2hhbmdlZCgpIHtcclxuICAgICAgICAgICAgY29uc3Qgc2hhcmVVUkwgPSB0aGlzLmdldFNoYXJlVVJMKCk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnNldEVuYWJsZWQoZmFsc2UpO1xyXG5cclxuICAgICAgICAgICAgYXBpLnJlcXVlc3QoXCJsaW5rL2NyZWF0ZVwiLCB7XHJcbiAgICAgICAgICAgICAgICBVUkw6IHRoaXMuZ2V0U2hhcmVVUkwoKVxyXG4gICAgICAgICAgICB9KS5kb25lKHJlc3BvbnNlID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlVVJMKHJlc3BvbnNlLlNob3J0VVJMKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0RW5hYmxlZCh0cnVlKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIHNldEVuYWJsZWQoZW5hYmxlZDpib29sZWFuKSB7XHJcbiAgICAgICAgICAgIGZvciAoY29uc3Qgc2hhcmVCdXR0b24gb2YgdGhpcy5zaGFyZUJ1dHRvbnMpIHtcclxuICAgICAgICAgICAgICAgIHNoYXJlQnV0dG9uLmNvbXBvbmVudC5kaXNhYmxlZCA9ICFlbmFibGVkO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIHVwZGF0ZVVSTChzaGFyZVVSTDpzdHJpbmcpIHtcclxuICAgICAgICAgICAgY29uc3Qgc2hhcmVUYWdzOnN0cmluZ1tdID0gWyd2ZWhpY2xlJ107XHJcbiAgICAgICAgICAgIGNvbnN0IHNoYXJlTWVzc2FnZSA9IHN0cmluZ3MuZ2V0U3RyaW5nKCdjaGVjay1vdXQtbXktdmVoaWNsZScpO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMudmVoaWNsZVJlbmRlckluc3RydWN0aW9ucy5XaGVlbEZpdG1lbnQpIHNoYXJlVGFncy5wdXNoKCd3aGVlbHMnKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFVwZGF0ZSB0aGUgc2hhcmUgYnV0dG9uc1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IHNoYXJlQnV0dG9uIG9mIHRoaXMuc2hhcmVCdXR0b25zKSB7XHJcbiAgICAgICAgICAgICAgICBzaGFyZUJ1dHRvbi5zZXRVUkwoc2hhcmVVUkwpO1xyXG4gICAgICAgICAgICAgICAgc2hhcmVCdXR0b24uc2V0VGFncyhzaGFyZVRhZ3MpO1xyXG4gICAgICAgICAgICAgICAgc2hhcmVCdXR0b24uc2V0TWVzc2FnZShzaGFyZU1lc3NhZ2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIHN3aXRjaEFuZ2xlKCkge1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuY2FuU3dpdGNoQW5nbGUoKSB8fCB0aGlzLnN0YXRlLmdldERhdGEoKS5jdXJyZW50V2hlZWwuSGFzU2lkZUltYWdlID09PSBmYWxzZSkgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMuaW1hZ2VUeXBlID09PSByaWRlc3R5bGVyLkRhdGFPYmplY3RzLlZlaGljbGVSZXNvdXJjZVR5cGUuQW5nbGUpXHJcbiAgICAgICAgICAgICAgICB0aGlzLmltYWdlVHlwZSA9IHJpZGVzdHlsZXIuRGF0YU9iamVjdHMuVmVoaWNsZVJlc291cmNlVHlwZS5TaWRlO1xyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICB0aGlzLmltYWdlVHlwZSA9IHJpZGVzdHlsZXIuRGF0YU9iamVjdHMuVmVoaWNsZVJlc291cmNlVHlwZS5BbmdsZTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHRoaXMudmVoaWNsZVJlbmRlckluc3RydWN0aW9ucy5UeXBlID0gdGhpcy5pbWFnZVR5cGU7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB0aGlzLnZlaGljbGVWaWV3cG9ydC5VcGRhdGUoe1xyXG4gICAgICAgICAgICAgICAgVHlwZTogdGhpcy5pbWFnZVR5cGVcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHRoaXMub25JbnN0cnVjdGlvbnNDaGFuZ2VkKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59Il19

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var RideStylerShowcase;
(function (RideStylerShowcase) {
    var className = 'ridestyler-showcase-suspension-selector';
    var elementClassName = 'ridestyler-showcase-suspension-selector-element';
    var defaultSuspensionRange = {
        Min: -4,
        Max: 0
    };

    var RideStylerShowcaseSuspensionSelector = function (_RideStylerShowcase$C) {
        _inherits(RideStylerShowcaseSuspensionSelector, _RideStylerShowcase$C);

        function RideStylerShowcaseSuspensionSelector() {
            _classCallCheck(this, RideStylerShowcaseSuspensionSelector);

            return _possibleConstructorReturn(this, (RideStylerShowcaseSuspensionSelector.__proto__ || Object.getPrototypeOf(RideStylerShowcaseSuspensionSelector)).apply(this, arguments));
        }

        _createClass(RideStylerShowcaseSuspensionSelector, [{
            key: 'initializeComponent',
            value: function initializeComponent() {
                var _this2 = this;

                this.component = RideStylerShowcase.HTMLHelper.createElement('div', {
                    className: className
                });
                var vehicleDescription = this.state.getData().currentVehicleDescriptionModel;
                var suspensionOptions = {
                    min: defaultSuspensionRange.Min,
                    max: defaultSuspensionRange.Max,
                    start: 0,
                    step: 1,
                    decimalPlaces: 1,
                    unitAbbreviation: '″'
                };
                // Retrieve suspension from API settings
                {
                    var suspensionRanges = this.showcase.settingsFromAPI.SuspensionRanges;
                    var StyleType = vehicleDescription.StyleType,
                        DriveType = vehicleDescription.DriveType;

                    var suspensionRangeKey = StyleType + DriveType;
                    if (suspensionRangeKey in suspensionRanges === false) suspensionRangeKey = 'Default';
                    var suspensionRange = suspensionRanges[suspensionRangeKey] || defaultSuspensionRange;
                    suspensionOptions.min = suspensionRange.Min;
                    suspensionOptions.max = suspensionRange.Max;
                }
                this.frontAndRear = new NoUISuspensionElement(this.showcase, RideStylerShowcase.ObjectHelper.assign({
                    label: RideStylerShowcase.strings.getString('suspension')
                }, suspensionOptions));
                this.frontAndRear.suspensionChangedCallback = function () {
                    if (typeof _this2.suspensionChangeCallback === 'function') _this2.suspensionChangeCallback({
                        Suspension: _this2.frontAndRear.value
                    });
                };
                this.component.appendChild(this.frontAndRear.component);
                // let frontOptions:SuspensionUIElementOptions = ObjectHelper.assign({
                //     label: strings.getString('front')
                // }, suspensionOptions);
                // this.front = new NoUISuspensionElement(this.showcase, frontOptions);
                // let rearOptions:SuspensionUIElementOptions = ObjectHelper.assign({
                //     label: strings.getString('rear')
                // }, suspensionOptions);
                // this.rear = new NoUISuspensionElement(this.showcase, rearOptions);
                // this.component.appendChild(this.front.component);
                // this.component.appendChild(this.rear.component);
                // this.front.suspensionChangedCallback = this.rear.suspensionChangedCallback = () => {
                //     if (typeof this.suspensionChangeCallback === 'function') {
                //         this.suspensionChangeCallback({
                //             SuspensionFront: this.front.value,
                //             SuspensionRear: this.rear.value
                //         });
                //     }
                // };
            }
        }]);

        return RideStylerShowcaseSuspensionSelector;
    }(RideStylerShowcase.ComponentBase);

    RideStylerShowcase.RideStylerShowcaseSuspensionSelector = RideStylerShowcaseSuspensionSelector;
    /**
     * A general interface for UI components that modify suspension
     */

    var SuspensionUIElement = function (_RideStylerShowcase$C2) {
        _inherits(SuspensionUIElement, _RideStylerShowcase$C2);

        function SuspensionUIElement(showcaseInstance, options) {
            _classCallCheck(this, SuspensionUIElement);

            var _this3 = _possibleConstructorReturn(this, (SuspensionUIElement.__proto__ || Object.getPrototypeOf(SuspensionUIElement)).call(this, showcaseInstance));

            _this3.options = options;
            _this3.value = options.start;
            return _this3;
        }

        _createClass(SuspensionUIElement, [{
            key: 'onSuspensionChanged',
            value: function onSuspensionChanged(newValue) {
                this.value = newValue;
                if (typeof this.suspensionChangedCallback === 'function') this.suspensionChangedCallback(newValue);
            }
        }]);

        return SuspensionUIElement;
    }(RideStylerShowcase.ComponentBase);

    var NoUISuspensionElement = function (_SuspensionUIElement) {
        _inherits(NoUISuspensionElement, _SuspensionUIElement);

        function NoUISuspensionElement(showcaseInstance, options) {
            _classCallCheck(this, NoUISuspensionElement);

            var _this4 = _possibleConstructorReturn(this, (NoUISuspensionElement.__proto__ || Object.getPrototypeOf(NoUISuspensionElement)).call(this, showcaseInstance, options));

            _this4.component = RideStylerShowcase.HTMLHelper.createElement('div', {
                className: elementClassName,
                append: RideStylerShowcase.HTMLHelper.createElement('div', {
                    className: elementClassName + '-label',
                    text: options.label
                })
            });
            var sliderElement = RideStylerShowcase.HTMLHelper.createElement('div', {
                className: elementClassName + '-slider',
                appendTo: _this4.component
            });
            noUiSlider.create(sliderElement, {
                start: options.start,
                range: {
                    min: options.min,
                    max: options.max
                },
                step: options.step,
                pips: {
                    mode: 'steps',
                    format: function () {
                        var postfix = options.unitAbbreviation;
                        var decimalPlaces = options.decimalPlaces;
                        return {
                            to: function to(value) {
                                return value.toFixed(decimalPlaces) + postfix;
                            },
                            from: function from(value) {
                                return parseFloat(value.replace(new RegExp(RideStylerShowcase.StringHelper.escapeRegExp(postfix) + '$'), ""));
                            }
                        };
                    }()
                }
            });
            _this4.sliderElement = sliderElement;
            _this4.slider = _this4.sliderElement.noUiSlider;
            _this4.slider.on('update', function (formattedValues, handle, values) {
                _this4.onSuspensionChanged(values[0]);
            });
            return _this4;
        }

        return NoUISuspensionElement;
    }(SuspensionUIElement);
})(RideStylerShowcase || (RideStylerShowcase = {}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvUmlkZVN0eWxlclNob3djYXNlU3VzcGVuc2lvblNlbGVjdG9yLnRzIl0sIm5hbWVzIjpbIlJpZGVTdHlsZXJTaG93Y2FzZSIsImNsYXNzTmFtZSIsImVsZW1lbnRDbGFzc05hbWUiLCJkZWZhdWx0U3VzcGVuc2lvblJhbmdlIiwiTWluIiwiTWF4IiwiUmlkZVN0eWxlclNob3djYXNlU3VzcGVuc2lvblNlbGVjdG9yIiwiY29tcG9uZW50IiwiSFRNTEhlbHBlciIsImNyZWF0ZUVsZW1lbnQiLCJ2ZWhpY2xlRGVzY3JpcHRpb24iLCJzdGF0ZSIsImdldERhdGEiLCJjdXJyZW50VmVoaWNsZURlc2NyaXB0aW9uTW9kZWwiLCJzdXNwZW5zaW9uT3B0aW9ucyIsIm1pbiIsIm1heCIsInN0YXJ0Iiwic3RlcCIsImRlY2ltYWxQbGFjZXMiLCJ1bml0QWJicmV2aWF0aW9uIiwic3VzcGVuc2lvblJhbmdlcyIsInNob3djYXNlIiwic2V0dGluZ3NGcm9tQVBJIiwiU3VzcGVuc2lvblJhbmdlcyIsIlN0eWxlVHlwZSIsIkRyaXZlVHlwZSIsInN1c3BlbnNpb25SYW5nZUtleSIsInN1c3BlbnNpb25SYW5nZSIsImZyb250QW5kUmVhciIsIk5vVUlTdXNwZW5zaW9uRWxlbWVudCIsIk9iamVjdEhlbHBlciIsImFzc2lnbiIsImxhYmVsIiwic3RyaW5ncyIsImdldFN0cmluZyIsInN1c3BlbnNpb25DaGFuZ2VkQ2FsbGJhY2siLCJzdXNwZW5zaW9uQ2hhbmdlQ2FsbGJhY2siLCJTdXNwZW5zaW9uIiwidmFsdWUiLCJhcHBlbmRDaGlsZCIsIkNvbXBvbmVudEJhc2UiLCJTdXNwZW5zaW9uVUlFbGVtZW50Iiwic2hvd2Nhc2VJbnN0YW5jZSIsIm9wdGlvbnMiLCJuZXdWYWx1ZSIsImFwcGVuZCIsInRleHQiLCJzbGlkZXJFbGVtZW50IiwiYXBwZW5kVG8iLCJub1VpU2xpZGVyIiwiY3JlYXRlIiwicmFuZ2UiLCJwaXBzIiwibW9kZSIsImZvcm1hdCIsInBvc3RmaXgiLCJ0byIsInRvRml4ZWQiLCJmcm9tIiwicGFyc2VGbG9hdCIsInJlcGxhY2UiLCJSZWdFeHAiLCJTdHJpbmdIZWxwZXIiLCJlc2NhcGVSZWdFeHAiLCJzbGlkZXIiLCJvbiIsImZvcm1hdHRlZFZhbHVlcyIsImhhbmRsZSIsInZhbHVlcyIsIm9uU3VzcGVuc2lvbkNoYW5nZWQiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUEsSUFBVUEsa0JBQVY7QUFBQSxDQUFBLFVBQVVBLGtCQUFWLEVBQTRCO0FBQ3hCLFFBQU1DLFlBQVkseUNBQWxCO0FBQ0EsUUFBTUMsbUJBQW1CLGlEQUF6QjtBQUVBLFFBQU1DLHlCQUF5QjtBQUMzQkMsYUFBSyxDQUFDLENBRHFCO0FBRTNCQyxhQUFLO0FBRnNCLEtBQS9COztBQUp3QixRQVN4QkMsb0NBVHdCO0FBQUE7O0FBQUE7QUFBQTs7QUFBQTtBQUFBOztBQUFBO0FBQUE7QUFBQSxrREFjUztBQUFBOztBQUN6QixxQkFBS0MsU0FBTCxHQUFpQlAsbUJBQUFRLFVBQUEsQ0FBV0MsYUFBWCxDQUF5QixLQUF6QixFQUFnQztBQUM3Q1IsK0JBQVdBO0FBRGtDLGlCQUFoQyxDQUFqQjtBQUlBLG9CQUFJUyxxQkFBcUIsS0FBS0MsS0FBTCxDQUFXQyxPQUFYLEdBQXFCQyw4QkFBOUM7QUFFQSxvQkFBSUMsb0JBQXNDO0FBQ3RDQyx5QkFBS1osdUJBQXVCQyxHQURVO0FBRXRDWSx5QkFBS2IsdUJBQXVCRSxHQUZVO0FBR3RDWSwyQkFBTyxDQUgrQjtBQUl0Q0MsMEJBQU0sQ0FKZ0M7QUFLdENDLG1DQUFlLENBTHVCO0FBTXRDQyxzQ0FBa0I7QUFOb0IsaUJBQTFDO0FBU0E7QUFDQTtBQUNJLHdCQUFJQyxtQkFBbUIsS0FBS0MsUUFBTCxDQUFjQyxlQUFkLENBQThCQyxnQkFBckQ7QUFESix3QkFFU0MsU0FGVCxHQUVnQ2Ysa0JBRmhDLENBRVNlLFNBRlQ7QUFBQSx3QkFFbUJDLFNBRm5CLEdBRWdDaEIsa0JBRmhDLENBRW1CZ0IsU0FGbkI7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TzdCbUMsc0JBQU07QUFDRkMsMEJBQU0sT0FESjtBQUVGQyw0QkFBUyxZQUFBO0FBQ0wsNEJBQUlDLFVBQWlCWixRQUFReEIsZ0JBQTdCO0FBQ0EsNEJBQUlELGdCQUF1QnlCLFFBQVF6QixhQUFuQztBQUVBLCtCQUFPO0FBQ0hzQyxnQ0FBSSxZQUFDbEIsS0FBRDtBQUFBLHVDQUFrQkEsTUFBTW1CLE9BQU4sQ0FBY3ZDLGFBQWQsSUFBK0JxQyxPQUFqRDtBQUFBLDZCQUREO0FBRUhHLGtDQUFNLGNBQUNwQixLQUFEO0FBQUEsdUNBQWtCcUIsV0FBV3JCLE1BQU1zQixPQUFOLENBQWMsSUFBSUMsTUFBSixDQUFXOUQsbUJBQUErRCxZQUFBLENBQWFDLFlBQWIsQ0FBMEJSLE9BQTFCLElBQXFDLEdBQWhELENBQWQsRUFBb0UsRUFBcEUsQ0FBWCxDQUFsQjtBQUFBO0FBRkgseUJBQVA7QUFJSCxxQkFSTztBQUZOO0FBUHVCLGFBQWpDO0FBcUJBLG1CQUFLUixhQUFMLEdBQXNCQSxhQUF0QjtBQUNBLG1CQUFLaUIsTUFBTCxHQUFjLE9BQUtqQixhQUFMLENBQW1CRSxVQUFqQztBQUVBLG1CQUFLZSxNQUFMLENBQVlDLEVBQVosQ0FBZSxRQUFmLEVBQXlCLFVBQUNDLGVBQUQsRUFBa0JDLE1BQWxCLEVBQTBCQyxNQUExQixFQUFvQztBQUN6RCx1QkFBS0MsbUJBQUwsQ0FBeUJELE9BQU8sQ0FBUCxDQUF6QjtBQUNILGFBRkQ7QUF4Q3VGO0FBMkMxRjs7QUF4S21CO0FBQUEsTUF5SFkzQixtQkF6SFo7QUEwSzNCLENBMUtELEVBQVUxQyx1QkFBQUEscUJBQWtCLEVBQWxCLENBQVYiLCJmaWxlIjoic2NyaXB0cy9jb21wb25lbnRzL1JpZGVTdHlsZXJTaG93Y2FzZVN1c3BlbnNpb25TZWxlY3Rvci5qcyIsInNvdXJjZXNDb250ZW50IjpbIm5hbWVzcGFjZSBSaWRlU3R5bGVyU2hvd2Nhc2Uge1xuICAgIGNvbnN0IGNsYXNzTmFtZSA9ICdyaWRlc3R5bGVyLXNob3djYXNlLXN1c3BlbnNpb24tc2VsZWN0b3InO1xuICAgIGNvbnN0IGVsZW1lbnRDbGFzc05hbWUgPSAncmlkZXN0eWxlci1zaG93Y2FzZS1zdXNwZW5zaW9uLXNlbGVjdG9yLWVsZW1lbnQnO1xuXG4gICAgY29uc3QgZGVmYXVsdFN1c3BlbnNpb25SYW5nZSA9IHtcbiAgICAgICAgTWluOiAtNCxcbiAgICAgICAgTWF4OiAwXG4gICAgfVxuXG4gICAgZXhwb3J0IGNsYXNzIFJpZGVTdHlsZXJTaG93Y2FzZVN1c3BlbnNpb25TZWxlY3RvciBleHRlbmRzIENvbXBvbmVudEJhc2Uge1xuICAgICAgICAvLyBwcml2YXRlIGZyb250OlN1c3BlbnNpb25VSUVsZW1lbnQ7XG4gICAgICAgIC8vIHByaXZhdGUgcmVhcjpTdXNwZW5zaW9uVUlFbGVtZW50O1xuICAgICAgICBwcml2YXRlIGZyb250QW5kUmVhcjpTdXNwZW5zaW9uVUlFbGVtZW50O1xuXG4gICAgICAgIHByb3RlY3RlZCBpbml0aWFsaXplQ29tcG9uZW50KCkge1xuICAgICAgICAgICAgdGhpcy5jb21wb25lbnQgPSBIVE1MSGVscGVyLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IGNsYXNzTmFtZVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGxldCB2ZWhpY2xlRGVzY3JpcHRpb24gPSB0aGlzLnN0YXRlLmdldERhdGEoKS5jdXJyZW50VmVoaWNsZURlc2NyaXB0aW9uTW9kZWw7XG5cbiAgICAgICAgICAgIGxldCBzdXNwZW5zaW9uT3B0aW9uczpTdXNwZW5zaW9uT3B0aW9ucyA9IHtcbiAgICAgICAgICAgICAgICBtaW46IGRlZmF1bHRTdXNwZW5zaW9uUmFuZ2UuTWluLFxuICAgICAgICAgICAgICAgIG1heDogZGVmYXVsdFN1c3BlbnNpb25SYW5nZS5NYXgsXG4gICAgICAgICAgICAgICAgc3RhcnQ6IDAsXG4gICAgICAgICAgICAgICAgc3RlcDogMSxcbiAgICAgICAgICAgICAgICBkZWNpbWFsUGxhY2VzOiAxLFxuICAgICAgICAgICAgICAgIHVuaXRBYmJyZXZpYXRpb246ICfigLMnXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvLyBSZXRyaWV2ZSBzdXNwZW5zaW9uIGZyb20gQVBJIHNldHRpbmdzXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgbGV0IHN1c3BlbnNpb25SYW5nZXMgPSB0aGlzLnNob3djYXNlLnNldHRpbmdzRnJvbUFQSS5TdXNwZW5zaW9uUmFuZ2VzO1xuICAgICAgICAgICAgICAgIGxldCB7U3R5bGVUeXBlLERyaXZlVHlwZX0gPSB2ZWhpY2xlRGVzY3JpcHRpb247XG4gICAgICAgICAgICAgICAgbGV0IHN1c3BlbnNpb25SYW5nZUtleSA9IFN0eWxlVHlwZSArIERyaXZlVHlwZTtcblxuICAgICAgICAgICAgICAgIGlmIChzdXNwZW5zaW9uUmFuZ2VLZXkgaW4gc3VzcGVuc2lvblJhbmdlcyA9PT0gZmFsc2UpIHN1c3BlbnNpb25SYW5nZUtleSA9ICdEZWZhdWx0JztcbiAgICAgICAgICAgICAgICBsZXQgc3VzcGVuc2lvblJhbmdlID0gc3VzcGVuc2lvblJhbmdlc1tzdXNwZW5zaW9uUmFuZ2VLZXldIHx8IGRlZmF1bHRTdXNwZW5zaW9uUmFuZ2U7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgc3VzcGVuc2lvbk9wdGlvbnMubWluID0gc3VzcGVuc2lvblJhbmdlLk1pbjtcbiAgICAgICAgICAgICAgICBzdXNwZW5zaW9uT3B0aW9ucy5tYXggPSBzdXNwZW5zaW9uUmFuZ2UuTWF4O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLmZyb250QW5kUmVhciA9IG5ldyBOb1VJU3VzcGVuc2lvbkVsZW1lbnQodGhpcy5zaG93Y2FzZSwgT2JqZWN0SGVscGVyLmFzc2lnbih7XG4gICAgICAgICAgICAgICAgbGFiZWw6IHN0cmluZ3MuZ2V0U3RyaW5nKCdzdXNwZW5zaW9uJylcbiAgICAgICAgICAgIH0sIHN1c3BlbnNpb25PcHRpb25zKSk7XG5cbiAgICAgICAgICAgIHRoaXMuZnJvbnRBbmRSZWFyLnN1c3BlbnNpb25DaGFuZ2VkQ2FsbGJhY2sgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0aGlzLnN1c3BlbnNpb25DaGFuZ2VDYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJylcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdXNwZW5zaW9uQ2hhbmdlQ2FsbGJhY2soe1xuICAgICAgICAgICAgICAgICAgICAgICAgU3VzcGVuc2lvbjogdGhpcy5mcm9udEFuZFJlYXIudmFsdWVcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB0aGlzLmNvbXBvbmVudC5hcHBlbmRDaGlsZCh0aGlzLmZyb250QW5kUmVhci5jb21wb25lbnQpO1xuXG4gICAgICAgICAgICAvLyBsZXQgZnJvbnRPcHRpb25zOlN1c3BlbnNpb25VSUVsZW1lbnRPcHRpb25zID0gT2JqZWN0SGVscGVyLmFzc2lnbih7XG4gICAgICAgICAgICAvLyAgICAgbGFiZWw6IHN0cmluZ3MuZ2V0U3RyaW5nKCdmcm9udCcpXG4gICAgICAgICAgICAvLyB9LCBzdXNwZW5zaW9uT3B0aW9ucyk7XG5cbiAgICAgICAgICAgIC8vIHRoaXMuZnJvbnQgPSBuZXcgTm9VSVN1c3BlbnNpb25FbGVtZW50KHRoaXMuc2hvd2Nhc2UsIGZyb250T3B0aW9ucyk7XG5cbiAgICAgICAgICAgIC8vIGxldCByZWFyT3B0aW9uczpTdXNwZW5zaW9uVUlFbGVtZW50T3B0aW9ucyA9IE9iamVjdEhlbHBlci5hc3NpZ24oe1xuICAgICAgICAgICAgLy8gICAgIGxhYmVsOiBzdHJpbmdzLmdldFN0cmluZygncmVhcicpXG4gICAgICAgICAgICAvLyB9LCBzdXNwZW5zaW9uT3B0aW9ucyk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIHRoaXMucmVhciA9IG5ldyBOb1VJU3VzcGVuc2lvbkVsZW1lbnQodGhpcy5zaG93Y2FzZSwgcmVhck9wdGlvbnMpO1xuXG4gICAgICAgICAgICAvLyB0aGlzLmNvbXBvbmVudC5hcHBlbmRDaGlsZCh0aGlzLmZyb250LmNvbXBvbmVudCk7XG4gICAgICAgICAgICAvLyB0aGlzLmNvbXBvbmVudC5hcHBlbmRDaGlsZCh0aGlzLnJlYXIuY29tcG9uZW50KTtcblxuICAgICAgICAgICAgLy8gdGhpcy5mcm9udC5zdXNwZW5zaW9uQ2hhbmdlZENhbGxiYWNrID0gdGhpcy5yZWFyLnN1c3BlbnNpb25DaGFuZ2VkQ2FsbGJhY2sgPSAoKSA9PiB7XG4gICAgICAgICAgICAvLyAgICAgaWYgKHR5cGVvZiB0aGlzLnN1c3BlbnNpb25DaGFuZ2VDYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgLy8gICAgICAgICB0aGlzLnN1c3BlbnNpb25DaGFuZ2VDYWxsYmFjayh7XG4gICAgICAgICAgICAvLyAgICAgICAgICAgICBTdXNwZW5zaW9uRnJvbnQ6IHRoaXMuZnJvbnQudmFsdWUsXG4gICAgICAgICAgICAvLyAgICAgICAgICAgICBTdXNwZW5zaW9uUmVhcjogdGhpcy5yZWFyLnZhbHVlXG4gICAgICAgICAgICAvLyAgICAgICAgIH0pO1xuICAgICAgICAgICAgLy8gICAgIH1cbiAgICAgICAgICAgIC8vIH07XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHB1YmxpYyBzdXNwZW5zaW9uQ2hhbmdlQ2FsbGJhY2s6IChyZW5kZXJSZXF1ZXN0Q2hhbmdlOnJpZGVzdHlsZXIuUmVxdWVzdHMuVmVoaWNsZVJlbmRlckluc3RydWN0aW9ucykgPT4gdm9pZDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBIGdlbmVyYWwgaW50ZXJmYWNlIGZvciBVSSBjb21wb25lbnRzIHRoYXQgbW9kaWZ5IHN1c3BlbnNpb25cbiAgICAgKi9cbiAgICBhYnN0cmFjdCBjbGFzcyBTdXNwZW5zaW9uVUlFbGVtZW50IGV4dGVuZHMgQ29tcG9uZW50QmFzZSB7XG4gICAgICAgIHByb3RlY3RlZCBvcHRpb25zOlN1c3BlbnNpb25VSUVsZW1lbnRPcHRpb25zO1xuICAgICAgICBcbiAgICAgICAgcHVibGljIHZhbHVlOm51bWJlcjtcblxuICAgICAgICBjb25zdHJ1Y3RvcihzaG93Y2FzZUluc3RhbmNlOlJpZGVTdHlsZXJTaG93Y2FzZUluc3RhbmNlLCBvcHRpb25zOlN1c3BlbnNpb25VSUVsZW1lbnRPcHRpb25zKSB7XG4gICAgICAgICAgICBzdXBlcihzaG93Y2FzZUluc3RhbmNlKTtcbiAgICAgICAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgICAgICAgICB0aGlzLnZhbHVlID0gb3B0aW9ucy5zdGFydDtcbiAgICAgICAgfVxuXG4gICAgICAgIHByb3RlY3RlZCBvblN1c3BlbnNpb25DaGFuZ2VkKG5ld1ZhbHVlOm51bWJlcikge1xuICAgICAgICAgICAgdGhpcy52YWx1ZSA9IG5ld1ZhbHVlO1xuXG4gICAgICAgICAgICBpZiAodHlwZW9mIHRoaXMuc3VzcGVuc2lvbkNoYW5nZWRDYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJykgXG4gICAgICAgICAgICAgICAgdGhpcy5zdXNwZW5zaW9uQ2hhbmdlZENhbGxiYWNrKG5ld1ZhbHVlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHB1YmxpYyBzdXNwZW5zaW9uQ2hhbmdlZENhbGxiYWNrOiAobmV3U3VzcGVuc2lvbjpudW1iZXIpID0+IHZvaWQ7XG4gICAgfVxuXG4gICAgaW50ZXJmYWNlIFN1c3BlbnNpb25PcHRpb25zIHtcbiAgICAgICAgbWluOiBudW1iZXI7XG4gICAgICAgIG1heDogbnVtYmVyO1xuICAgICAgICBzdGFydDogbnVtYmVyO1xuICAgICAgICBzdGVwOiBudW1iZXI7XG4gICAgICAgIGRlY2ltYWxQbGFjZXM6IG51bWJlcjtcbiAgICAgICAgdW5pdEFiYnJldmlhdGlvbjogc3RyaW5nO1xuICAgIH1cblxuICAgIGludGVyZmFjZSBTdXNwZW5zaW9uVUlFbGVtZW50T3B0aW9ucyBleHRlbmRzIFN1c3BlbnNpb25PcHRpb25zIHtcbiAgICAgICAgbGFiZWw6IHN0cmluZztcbiAgICB9XG5cbiAgICBjbGFzcyBOb1VJU3VzcGVuc2lvbkVsZW1lbnQgZXh0ZW5kcyBTdXNwZW5zaW9uVUlFbGVtZW50IHtcbiAgICAgICAgcHJpdmF0ZSByZWFkb25seSBzbGlkZXJFbGVtZW50Om5vVWlTbGlkZXIuSW5zdGFuY2U7XG4gICAgICAgIHByaXZhdGUgcmVhZG9ubHkgc2xpZGVyOm5vVWlTbGlkZXIubm9VaVNsaWRlcjtcblxuICAgICAgICBjb25zdHJ1Y3RvcihzaG93Y2FzZUluc3RhbmNlOlJpZGVTdHlsZXJTaG93Y2FzZUluc3RhbmNlLCBvcHRpb25zOlN1c3BlbnNpb25VSUVsZW1lbnRPcHRpb25zKSB7XG4gICAgICAgICAgICBzdXBlciAoc2hvd2Nhc2VJbnN0YW5jZSwgb3B0aW9ucyk7XG5cbiAgICAgICAgICAgIHRoaXMuY29tcG9uZW50ID0gSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBlbGVtZW50Q2xhc3NOYW1lLFxuICAgICAgICAgICAgICAgIGFwcGVuZDogSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogZWxlbWVudENsYXNzTmFtZSArICctbGFiZWwnLFxuICAgICAgICAgICAgICAgICAgICB0ZXh0OiBvcHRpb25zLmxhYmVsXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBsZXQgc2xpZGVyRWxlbWVudDpIVE1MRWxlbWVudCA9IEhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCgnZGl2Jywge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogZWxlbWVudENsYXNzTmFtZSArICctc2xpZGVyJyxcbiAgICAgICAgICAgICAgICBhcHBlbmRUbzogdGhpcy5jb21wb25lbnRcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBub1VpU2xpZGVyLmNyZWF0ZShzbGlkZXJFbGVtZW50LCB7XG4gICAgICAgICAgICAgICAgc3RhcnQ6IG9wdGlvbnMuc3RhcnQsXG4gICAgICAgICAgICAgICAgcmFuZ2U6IHtcbiAgICAgICAgICAgICAgICAgICAgbWluOiBvcHRpb25zLm1pbixcbiAgICAgICAgICAgICAgICAgICAgbWF4OiBvcHRpb25zLm1heFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgc3RlcDogb3B0aW9ucy5zdGVwLFxuICAgICAgICAgICAgICAgIHBpcHM6IHtcbiAgICAgICAgICAgICAgICAgICAgbW9kZTogJ3N0ZXBzJyxcbiAgICAgICAgICAgICAgICAgICAgZm9ybWF0OiAoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHBvc3RmaXg6c3RyaW5nID0gb3B0aW9ucy51bml0QWJicmV2aWF0aW9uO1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGRlY2ltYWxQbGFjZXM6bnVtYmVyID0gb3B0aW9ucy5kZWNpbWFsUGxhY2VzO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvOiAodmFsdWU6bnVtYmVyKSA9PiB2YWx1ZS50b0ZpeGVkKGRlY2ltYWxQbGFjZXMpICsgcG9zdGZpeCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmcm9tOiAodmFsdWU6c3RyaW5nKSA9PiBwYXJzZUZsb2F0KHZhbHVlLnJlcGxhY2UobmV3IFJlZ0V4cChTdHJpbmdIZWxwZXIuZXNjYXBlUmVnRXhwKHBvc3RmaXgpICsgJyQnKSwgXCJcIikpXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICB9KSgpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHRoaXMuc2xpZGVyRWxlbWVudCA9IChzbGlkZXJFbGVtZW50IGFzIG5vVWlTbGlkZXIuSW5zdGFuY2UpO1xuICAgICAgICAgICAgdGhpcy5zbGlkZXIgPSB0aGlzLnNsaWRlckVsZW1lbnQubm9VaVNsaWRlcjtcblxuICAgICAgICAgICAgdGhpcy5zbGlkZXIub24oJ3VwZGF0ZScsIChmb3JtYXR0ZWRWYWx1ZXMsIGhhbmRsZSwgdmFsdWVzKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5vblN1c3BlbnNpb25DaGFuZ2VkKHZhbHVlc1swXSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbn0iXX0=

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var RideStylerShowcase;
(function (RideStylerShowcase) {
    var barClass = 'ridestyler-showcase-tab-bar';
    var tabClass = barClass + '-tab';
    var tabBackgroundClass = tabClass + '-background';
    var activeTabClass = tabClass + '-active';
    var modeClass = barClass + '-';

    var RideStylerShowcaseTabBar = function (_RideStylerShowcase$C) {
        _inherits(RideStylerShowcaseTabBar, _RideStylerShowcase$C);

        function RideStylerShowcaseTabBar() {
            _classCallCheck(this, RideStylerShowcaseTabBar);

            return _possibleConstructorReturn(this, (RideStylerShowcaseTabBar.__proto__ || Object.getPrototypeOf(RideStylerShowcaseTabBar)).apply(this, arguments));
        }

        _createClass(RideStylerShowcaseTabBar, [{
            key: 'initializeComponent',
            value: function initializeComponent() {
                var _this2 = this;

                this.component = RideStylerShowcase.HTMLHelper.createElement('div', {
                    className: barClass
                });
                this.setMode('vertical');
                this.component.addEventListener("click", function (e) {
                    return _this2.onClick(e);
                });
            }
        }, {
            key: 'setMode',
            value: function setMode(mode) {
                var _this3 = this;

                // Do nothing if the modes are the same
                if (this.mode === mode) return;
                var toggle = function toggle(className, force) {
                    return _this3.component.classList.toggle(className, force);
                };
                // Remove the current mode class
                if (typeof this.mode === 'string') toggle(modeClass + this.mode, false);
                // Set the new mode
                this.mode = mode;
                // Add the current mode class
                toggle(modeClass + mode, true);
                // Update the tabs' mode
                this.updateTabDisplay();
            }
        }, {
            key: 'updateTabDisplay',
            value: function updateTabDisplay() {
                if (!this.tabs) return;
                var tabPercent = 100 / this.tabs.length + '%';
                var mode = this.mode;
                var _iteratorNormalCompletion = true;
                var _didIteratorError = false;
                var _iteratorError = undefined;

                try {
                    for (var _iterator = this.tabs[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
                        var tab = _step.value;

                        if (mode === 'vertical') {
                            tab.element.style.height = tabPercent;
                            tab.element.style.width = '';
                        } else {
                            tab.element.style.height = '';
                            tab.element.style.width = tabPercent;
                        }
                        tab.updateBackgroundPolygon(mode);
                    }
                } catch (err) {
                    _didIteratorError = true;
                    _iteratorError = err;
                } finally {
                    try {
                        if (!_iteratorNormalCompletion && _iterator.return) {
                            _iterator.return();
                        }
                    } finally {
                        if (_didIteratorError) {
                            throw _iteratorError;
                        }
                    }
                }
            }
        }, {
            key: 'setTabs',
            value: function setTabs(tabsOrTabCreateOptions) {
                var tabs = void 0;
                if (tabsOrTabCreateOptions.length === 0) {
                    tabs = [];
                } else if (tabsOrTabCreateOptions[0] instanceof RideStylerShowcaseTabBar.Tab) {
                    tabs = tabsOrTabCreateOptions;
                } else {
                    tabs = new Array(tabsOrTabCreateOptions.length);
                    for (var index = 0; index < tabsOrTabCreateOptions.length; index++) {
                        var createOptions = tabsOrTabCreateOptions[index];
                        tabs[index] = new RideStylerShowcaseTabBar.Tab(createOptions);
                    }
                }
                this.tabs = RideStylerShowcase.ArrayHelper.copy(tabs);
                RideStylerShowcase.HTMLHelper.empty(this.component);
                var tabPercent = 100 / tabs.length + '%';
                var _iteratorNormalCompletion2 = true;
                var _didIteratorError2 = false;
                var _iteratorError2 = undefined;

                try {
                    for (var _iterator2 = tabs[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {
                        var tab = _step2.value;

                        this.component.appendChild(tab.element);
                    }
                } catch (err) {
                    _didIteratorError2 = true;
                    _iteratorError2 = err;
                } finally {
                    try {
                        if (!_iteratorNormalCompletion2 && _iterator2.return) {
                            _iterator2.return();
                        }
                    } finally {
                        if (_didIteratorError2) {
                            throw _iteratorError2;
                        }
                    }
                }

                this.updateTabDisplay();
                this.currentTab = undefined;
                this.setActiveTab(tabs[0]);
            }
        }, {
            key: 'clearActiveTab',
            value: function clearActiveTab() {
                this.setActiveTab(undefined);
            }
        }, {
            key: 'setActiveTab',
            value: function setActiveTab(newTab) {
                var oldTab = this.currentTab;
                if (oldTab === newTab) return;
                this.currentTab = newTab;
                // Switch the active class
                {
                    if (oldTab) oldTab.element.classList.remove(activeTabClass);
                    if (newTab) newTab.element.classList.add(activeTabClass);
                }
                // Send off the callback
                if (newTab && typeof this.tabSwitchedCallback === 'function') this.tabSwitchedCallback({
                    oldTab: oldTab,
                    newTab: newTab
                });
            }
        }, {
            key: 'onClick',
            value: function onClick(e) {
                var clickTarget = e.target;
                var currentElement = clickTarget;
                // Go up through the parent elements until we reach the tab bar
                while (currentElement !== this.component) {
                    // If the current element is a tab
                    if (currentElement.classList.contains(tabClass)) {
                        this.onTabClick(this.tabForElement(currentElement));
                        return;
                    }
                    currentElement = currentElement.parentElement;
                }
            }
        }, {
            key: 'onTabClick',
            value: function onTabClick(tab) {
                if (!tab) return;
                this.setActiveTab(tab);
            }
        }, {
            key: 'tabForLabel',
            value: function tabForLabel(label) {
                var _iteratorNormalCompletion3 = true;
                var _didIteratorError3 = false;
                var _iteratorError3 = undefined;

                try {
                    for (var _iterator3 = this.tabs[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {
                        var tab = _step3.value;

                        if (tab.label === label) {
                            return tab;
                        }
                    }
                } catch (err) {
                    _didIteratorError3 = true;
                    _iteratorError3 = err;
                } finally {
                    try {
                        if (!_iteratorNormalCompletion3 && _iterator3.return) {
                            _iterator3.return();
                        }
                    } finally {
                        if (_didIteratorError3) {
                            throw _iteratorError3;
                        }
                    }
                }

                return undefined;
            }
        }, {
            key: 'tabForElement',
            value: function tabForElement(element) {
                var _iteratorNormalCompletion4 = true;
                var _didIteratorError4 = false;
                var _iteratorError4 = undefined;

                try {
                    for (var _iterator4 = this.tabs[Symbol.iterator](), _step4; !(_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done); _iteratorNormalCompletion4 = true) {
                        var tab = _step4.value;

                        if (tab.element === element) {
                            return tab;
                        }
                    }
                } catch (err) {
                    _didIteratorError4 = true;
                    _iteratorError4 = err;
                } finally {
                    try {
                        if (!_iteratorNormalCompletion4 && _iterator4.return) {
                            _iterator4.return();
                        }
                    } finally {
                        if (_didIteratorError4) {
                            throw _iteratorError4;
                        }
                    }
                }

                return undefined;
            }
        }]);

        return RideStylerShowcaseTabBar;
    }(RideStylerShowcase.ComponentBase);

    RideStylerShowcase.RideStylerShowcaseTabBar = RideStylerShowcaseTabBar;
    (function (RideStylerShowcaseTabBar) {
        var Tab = function () {
            function Tab(createOptions) {
                _classCallCheck(this, Tab);

                this.label = createOptions.label;
                this.iconClass = createOptions.icon;
                this.key = createOptions.key;
                this.backgroundMode = 'horizontal';
                this.element = RideStylerShowcase.HTMLHelper.createElement('div', {
                    className: tabClass
                });
                RideStylerShowcase.HTMLHelper.createIcon({
                    icon: createOptions.icon,
                    appendTo: this.element,
                    wrap: RideStylerShowcase.HTMLHelper.createElementWithClass('div', tabClass + '-icon')
                });
                var background = RideStylerShowcase.HTMLHelper.createElement({
                    className: tabBackgroundClass,
                    appendTo: this.element
                });
                if (RideStylerShowcase.StyleHelper.svgSupported) {
                    RideStylerShowcase.HTMLHelper.createSVGElement('svg', {
                        attributes: {
                            width: '100%',
                            height: '100%',
                            preserveAspectRatio: 'none',
                            viewBox: '0 0 100 100'
                        },
                        append: this.backgroundPolygon = RideStylerShowcase.HTMLHelper.createSVGElement('polygon', {
                            attributes: {
                                fill: 'black'
                            }
                        }),
                        appendTo: background
                    });
                } else {
                    background.classList.add(tabBackgroundClass + '-nosvg');
                }
                this.element.title = createOptions.label;
            }

            _createClass(Tab, [{
                key: 'updateBackgroundPolygon',
                value: function updateBackgroundPolygon(mode) {
                    if (!this.backgroundPolygon) return;
                    /**
                     * The height in percentage of the triangle size
                     */
                    var triangleHeight = mode === 'vertical' ? 30 : 15;
                    /**
                     * The width in percentage of the triangle size
                     */
                    var triangleWidth = mode === 'vertical' ? 15 : 30;
                    this.backgroundPolygon.setAttribute('points', mode === 'vertical' ? '0,0 100,0 100,' + (50 - triangleHeight / 2) + ' ' + (100 - triangleWidth) + ',50 100,' + (50 + triangleHeight / 2) + ' 100,100 0,100' : '0,0 ' + (50 - triangleHeight / 2) + ',0 50,' + triangleHeight + ' ' + (50 + triangleHeight / 2) + ',0 100,0 100,100, 0,100');
                }
            }]);

            return Tab;
        }();

        RideStylerShowcaseTabBar.Tab = Tab;
    })(RideStylerShowcaseTabBar = RideStylerShowcase.RideStylerShowcaseTabBar || (RideStylerShowcase.RideStylerShowcaseTabBar = {}));
})(RideStylerShowcase || (RideStylerShowcase = {}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvUmlkZVN0eWxlclNob3djYXNlVGFiQmFyLnRzIl0sIm5hbWVzIjpbIlJpZGVTdHlsZXJTaG93Y2FzZSIsImJhckNsYXNzIiwidGFiQ2xhc3MiLCJ0YWJCYWNrZ3JvdW5kQ2xhc3MiLCJhY3RpdmVUYWJDbGFzcyIsIm1vZGVDbGFzcyIsIlJpZGVTdHlsZXJTaG93Y2FzZVRhYkJhciIsImNvbXBvbmVudCIsIkhUTUxIZWxwZXIiLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NOYW1lIiwic2V0TW9kZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJvbkNsaWNrIiwiZSIsIm1vZGUiLCJ0b2dnbGUiLCJmb3JjZSIsImNsYXNzTGlzdCIsInVwZGF0ZVRhYkRpc3BsYXkiLCJ0YWJzIiwidGFiUGVyY2VudCIsImxlbmd0aCIsInRhYiIsImVsZW1lbnQiLCJzdHlsZSIsImhlaWdodCIsIndpZHRoIiwidXBkYXRlQmFja2dyb3VuZFBvbHlnb24iLCJ0YWJzT3JUYWJDcmVhdGVPcHRpb25zIiwiVGFiIiwiQXJyYXkiLCJpbmRleCIsImNyZWF0ZU9wdGlvbnMiLCJBcnJheUhlbHBlciIsImNvcHkiLCJlbXB0eSIsImFwcGVuZENoaWxkIiwiY3VycmVudFRhYiIsInVuZGVmaW5lZCIsInNldEFjdGl2ZVRhYiIsIm5ld1RhYiIsIm9sZFRhYiIsInJlbW92ZSIsImFkZCIsInRhYlN3aXRjaGVkQ2FsbGJhY2siLCJjbGlja1RhcmdldCIsInRhcmdldCIsImN1cnJlbnRFbGVtZW50IiwiY29udGFpbnMiLCJvblRhYkNsaWNrIiwidGFiRm9yRWxlbWVudCIsInBhcmVudEVsZW1lbnQiLCJsYWJlbCIsIkNvbXBvbmVudEJhc2UiLCJpY29uQ2xhc3MiLCJpY29uIiwia2V5IiwiYmFja2dyb3VuZE1vZGUiLCJjcmVhdGVJY29uIiwiYXBwZW5kVG8iLCJ3cmFwIiwiY3JlYXRlRWxlbWVudFdpdGhDbGFzcyIsImJhY2tncm91bmQiLCJTdHlsZUhlbHBlciIsInN2Z1N1cHBvcnRlZCIsImNyZWF0ZVNWR0VsZW1lbnQiLCJhdHRyaWJ1dGVzIiwicHJlc2VydmVBc3BlY3RSYXRpbyIsInZpZXdCb3giLCJhcHBlbmQiLCJiYWNrZ3JvdW5kUG9seWdvbiIsImZpbGwiLCJ0aXRsZSIsInRyaWFuZ2xlSGVpZ2h0IiwidHJpYW5nbGVXaWR0aCIsInNldEF0dHJpYnV0ZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQSxJQUFVQSxrQkFBVjtBQUFBLENBQUEsVUFBVUEsa0JBQVYsRUFBNEI7QUFDeEIsUUFBTUMsV0FBVyw2QkFBakI7QUFDQSxRQUFNQyxXQUFXRCxXQUFXLE1BQTVCO0FBQ0EsUUFBTUUscUJBQXFCRCxXQUFXLGFBQXRDO0FBQ0EsUUFBTUUsaUJBQWlCRixXQUFXLFNBQWxDO0FBQ0EsUUFBTUcsWUFBWUosV0FBVyxHQUE3Qjs7QUFMd0IsUUFPeEJLLHdCQVB3QjtBQUFBOztBQUFBO0FBQUE7O0FBQUE7QUFBQTs7QUFBQTtBQUFBO0FBQUEsa0RBUVM7QUFBQTs7QUFDekIscUJBQUtDLFNBQUwsR0FBaUJQLG1CQUFBUSxVQUFBLENBQVdDLGFBQVgsQ0FBeUIsS0FBekIsRUFBZ0M7QUFDN0NDLCtCQUFXVDtBQURrQyxpQkFBaEMsQ0FBakI7QUFJQSxxQkFBS1UsT0FBTCxDQUFhLFVBQWI7QUFFQSxxQkFBS0osU0FBTCxDQUFlSyxnQkFBZixDQUFnQyxPQUFoQyxFQUF5QztBQUFBLDJCQUFLLE9BQUtDLE9BQUwsQ0FBYUMsQ0FBYixDQUFMO0FBQUEsaUJBQXpDO0FBQ0g7QUFoQm1CO0FBQUE7QUFBQSxvQ0F3QkxDLElBeEJLLEVBd0I4QjtBQUFBOztBQUM5QztBQUNBLG9CQUFJLEtBQUtBLElBQUwsS0FBY0EsSUFBbEIsRUFBd0I7QUFFeEIsb0JBQU1DLFNBQVMsU0FBVEEsTUFBUyxDQUFDTixTQUFELEVBQW1CTyxLQUFuQjtBQUFBLDJCQUFxQyxPQUFLVixTQUFMLENBQWVXLFNBQWYsQ0FBeUJGLE1BQXpCLENBQWdDTixTQUFoQyxFQUEyQ08sS0FBM0MsQ0FBckM7QUFBQSxpQkFBZjtBQUVBO0FBQ0Esb0JBQUksT0FBTyxLQUFLRixJQUFaLEtBQXFCLFFBQXpCLEVBQW1DQyxPQUFPWCxZQUFZLEtBQUtVLElBQXhCLEVBQThCLEtBQTlCO0FBRW5DO0FBQ0EscUJBQUtBLElBQUwsR0FBWUEsSUFBWjtBQUVBO0FBQ0FDLHVCQUFPWCxZQUFZVSxJQUFuQixFQUF5QixJQUF6QjtBQUVBO0FBQ0EscUJBQUtJLGdCQUFMO0FBQ0g7QUF6Q21CO0FBQUE7QUFBQSwrQ0EyQ0k7QUFDcEIsb0JBQUksQ0FBQyxLQUFLQyxJQUFWLEVBQWdCO0FBRWhCLG9CQUFNQyxhQUFjLE1BQUksS0FBS0QsSUFBTCxDQUFVRSxNQUFmLEdBQXlCLEdBQTVDO0FBQ0Esb0JBQU1QLE9BQU8sS0FBS0EsSUFBbEI7QUFKb0I7QUFBQTtBQUFBOztBQUFBO0FBS3BCLHlDQUFrQixLQUFLSyxJQUF2Qiw4SEFBNkI7QUFBQSw0QkFBbEJHLEdBQWtCOztBQUN6Qiw0QkFBSVIsU0FBUyxVQUFiLEVBQXlCO0FBQ3JCUSxnQ0FBSUMsT0FBSixDQUFZQyxLQUFaLENBQWtCQyxNQUFsQixHQUEyQkwsVUFBM0I7QUFDQUUsZ0NBQUlDLE9BQUosQ0FBWUMsS0FBWixDQUFrQkUsS0FBbEIsR0FBMEIsRUFBMUI7QUFDSCx5QkFIRCxNQUdPO0FBQ0hKLGdDQUFJQyxPQUFKLENBQVlDLEtBQVosQ0FBa0JDLE1BQWxCLEdBQTJCLEVBQTNCO0FBQ0FILGdDQUFJQyxPQUFKLENBQVlDLEtBQVosQ0FBa0JFLEtBQWxCLEdBQTBCTixVQUExQjtBQUNIO0FBRURFLDRCQUFJSyx1QkFBSixDQUE0QmIsSUFBNUI7QUFDSDtBQWZtQjtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBZ0J2QjtBQTNEbUI7QUFBQTtBQUFBLG9DQStETGMsc0JBL0RLLEVBK0Q0RjtBQUM1RyxvQkFBSVQsYUFBSjtBQUVBLG9CQUFJUyx1QkFBdUJQLE1BQXZCLEtBQWtDLENBQXRDLEVBQXlDO0FBQ3JDRiwyQkFBTyxFQUFQO0FBQ0gsaUJBRkQsTUFFTyxJQUFJUyx1QkFBdUIsQ0FBdkIsYUFBcUN2Qix5QkFBeUJ3QixHQUFsRSxFQUF1RTtBQUMxRVYsMkJBQU9TLHNCQUFQO0FBQ0gsaUJBRk0sTUFFQTtBQUNIVCwyQkFBTyxJQUFJVyxLQUFKLENBQVVGLHVCQUF1QlAsTUFBakMsQ0FBUDtBQUVBLHlCQUFLLElBQUlVLFFBQVEsQ0FBakIsRUFBb0JBLFFBQVFILHVCQUF1QlAsTUFBbkQsRUFBMkRVLE9BQTNELEVBQW9FO0FBQ2hFLDRCQUFJQyxnQkFBZ0JKLHVCQUF1QkcsS0FBdkIsQ0FBcEI7QUFDQVosNkJBQUtZLEtBQUwsSUFBYyxJQUFJMUIseUJBQXlCd0IsR0FBN0IsQ0FBaUNHLGFBQWpDLENBQWQ7QUFDSDtBQUNKO0FBRUQscUJBQUtiLElBQUwsR0FBWXBCLG1CQUFBa0MsV0FBQSxDQUFZQyxJQUFaLENBQWlCZixJQUFqQixDQUFaO0FBRUFwQixtQ0FBQVEsVUFBQSxDQUFXNEIsS0FBWCxDQUFpQixLQUFLN0IsU0FBdEI7QUFFQSxvQkFBSWMsYUFBYyxNQUFJRCxLQUFLRSxNQUFWLEdBQW9CLEdBQXJDO0FBcEI0RztBQUFBO0FBQUE7O0FBQUE7QUFzQjVHLDBDQUFnQkYsSUFBaEIsbUlBQXNCO0FBQUEsNEJBQWJHLEdBQWE7O0FBQ2xCLDZCQUFLaEIsU0FBTCxDQUFlOEIsV0FBZixDQUEyQmQsSUFBSUMsT0FBL0I7QUFDSDtBQXhCMkc7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7QUEwQjVHLHFCQUFLTCxnQkFBTDtBQUVBLHFCQUFLbUIsVUFBTCxHQUFrQkMsU0FBbEI7QUFDQSxxQkFBS0MsWUFBTCxDQUFrQnBCLEtBQUssQ0FBTCxDQUFsQjtBQUNIO0FBN0ZtQjtBQUFBO0FBQUEsNkNBK0ZDO0FBQ2pCLHFCQUFLb0IsWUFBTCxDQUFrQkQsU0FBbEI7QUFDSDtBQWpHbUI7QUFBQTtBQUFBLHlDQW1HQUUsTUFuR0EsRUFtR21DO0FBQ25ELG9CQUFJQyxTQUFTLEtBQUtKLFVBQWxCO0FBRUEsb0JBQUlJLFdBQVdELE1BQWYsRUFBdUI7QUFFdkIscUJBQUtILFVBQUwsR0FBa0JHLE1BQWxCO0FBRUE7QUFDQTtBQUNJLHdCQUFJQyxNQUFKLEVBQ0lBLE9BQU9sQixPQUFQLENBQWVOLFNBQWYsQ0FBeUJ5QixNQUF6QixDQUFnQ3ZDLGNBQWhDO0FBRUosd0JBQUlxQyxNQUFKLEVBQ0lBLE9BQU9qQixPQUFQLENBQWVOLFNBQWYsQ0FBeUIwQixHQUF6QixDQUE2QnhDLGNBQTdCO0FBQ1A7QUFFRDtBQUNBLG9CQUFJcUMsVUFBVSxPQUFPLEtBQUtJLG1CQUFaLEtBQW9DLFVBQWxELEVBQ0ksS0FBS0EsbUJBQUwsQ0FBeUI7QUFDckJILDRCQUFRQSxNQURhO0FBRXJCRCw0QkFBUUE7QUFGYSxpQkFBekI7QUFJUDtBQXpIbUI7QUFBQTtBQUFBLG9DQTJISjNCLENBM0hJLEVBMkhRO0FBQ3hCLG9CQUFJZ0MsY0FBMEJoQyxFQUFFaUMsTUFBaEM7QUFDQSxvQkFBSUMsaUJBQTZCRixXQUFqQztBQUVBO0FBQ0EsdUJBQU9FLG1CQUFtQixLQUFLekMsU0FBL0IsRUFBMEM7QUFDdEM7QUFDQSx3QkFBSXlDLGVBQWU5QixTQUFmLENBQXlCK0IsUUFBekIsQ0FBa0MvQyxRQUFsQyxDQUFKLEVBQWlEO0FBQzdDLDZCQUFLZ0QsVUFBTCxDQUFnQixLQUFLQyxhQUFMLENBQW1CSCxjQUFuQixDQUFoQjtBQUNBO0FBQ0g7QUFFREEscUNBQWlCQSxlQUFlSSxhQUFoQztBQUNIO0FBQ0o7QUF6SW1CO0FBQUE7QUFBQSx1Q0EySUQ3QixHQTNJQyxFQTJJK0I7QUFDL0Msb0JBQUksQ0FBQ0EsR0FBTCxFQUFVO0FBRVYscUJBQUtpQixZQUFMLENBQWtCakIsR0FBbEI7QUFDSDtBQS9JbUI7QUFBQTtBQUFBLHdDQWlKRDhCLEtBakpDLEVBaUpXO0FBQUE7QUFBQTtBQUFBOztBQUFBO0FBQzNCLDBDQUFnQixLQUFLakMsSUFBckIsbUlBQTJCO0FBQUEsNEJBQWxCRyxHQUFrQjs7QUFDdkIsNEJBQUlBLElBQUk4QixLQUFKLEtBQWNBLEtBQWxCLEVBQXlCO0FBQ3JCLG1DQUFPOUIsR0FBUDtBQUNIO0FBQ0o7QUFMMEI7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7QUFPM0IsdUJBQU9nQixTQUFQO0FBQ0g7QUF6Sm1CO0FBQUE7QUFBQSwwQ0EySkNmLE9BM0pELEVBMkpvQjtBQUFBO0FBQUE7QUFBQTs7QUFBQTtBQUNwQywwQ0FBZ0IsS0FBS0osSUFBckIsbUlBQTJCO0FBQUEsNEJBQWxCRyxHQUFrQjs7QUFDdkIsNEJBQUlBLElBQUlDLE9BQUosS0FBZ0JBLE9BQXBCLEVBQTZCO0FBQ3pCLG1DQUFPRCxHQUFQO0FBQ0g7QUFDSjtBQUxtQztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOztBQU9wQyx1QkFBT2dCLFNBQVA7QUFDSDtBQW5LbUI7O0FBQUE7QUFBQSxNQU9zQnZDLG1CQUFBc0QsYUFQdEI7O0FBT1h0RCx1QkFBQU0sd0JBQUEsR0FBd0JBLHdCQUF4QjtBQStKYixLQUFBLFVBQWlCQSx3QkFBakIsRUFBeUM7QUFBQSxZQWtCckN3QixHQWxCcUM7QUEyQmpDLHlCQUFZRyxhQUFaLEVBQTBDO0FBQUE7O0FBQ3RDLHFCQUFLb0IsS0FBTCxHQUFhcEIsY0FBY29CLEtBQTNCO0FBQ0EscUJBQUtFLFNBQUwsR0FBaUJ0QixjQUFjdUIsSUFBL0I7QUFDQSxxQkFBS0MsR0FBTCxHQUFXeEIsY0FBY3dCLEdBQXpCO0FBRUEscUJBQUtDLGNBQUwsR0FBc0IsWUFBdEI7QUFFQSxxQkFBS2xDLE9BQUwsR0FBZXhCLG1CQUFBUSxVQUFBLENBQVdDLGFBQVgsQ0FBeUIsS0FBekIsRUFBZ0M7QUFDM0NDLCtCQUFXUjtBQURnQyxpQkFBaEMsQ0FBZjtBQUlBRixtQ0FBQVEsVUFBQSxDQUFXbUQsVUFBWCxDQUFzQjtBQUNsQkgsMEJBQU12QixjQUFjdUIsSUFERjtBQUVsQkksOEJBQVUsS0FBS3BDLE9BRkc7QUFHbEJxQywwQkFBTTdELG1CQUFBUSxVQUFBLENBQVdzRCxzQkFBWCxDQUFrQyxLQUFsQyxFQUF5QzVELFdBQVcsT0FBcEQ7QUFIWSxpQkFBdEI7QUFNQSxvQkFBTTZELGFBQWEvRCxtQkFBQVEsVUFBQSxDQUFXQyxhQUFYLENBQXlCO0FBQ3hDQywrQkFBV1Asa0JBRDZCO0FBRXhDeUQsOEJBQVUsS0FBS3BDO0FBRnlCLGlCQUF6QixDQUFuQjtBQUtBLG9CQUFJeEIsbUJBQUFnRSxXQUFBLENBQVlDLFlBQWhCLEVBQThCO0FBQzFCakUsdUNBQUFRLFVBQUEsQ0FBVzBELGdCQUFYLENBQTRCLEtBQTVCLEVBQW1DO0FBQy9CQyxvQ0FBWTtBQUNSeEMsbUNBQU8sTUFEQztBQUVSRCxvQ0FBUSxNQUZBO0FBR1IwQyxpREFBcUIsTUFIYjtBQUlSQyxxQ0FBUztBQUpELHlCQURtQjtBQU8vQkMsZ0NBQVMsS0FBS0MsaUJBQUwsR0FBeUJ2RSxtQkFBQVEsVUFBQSxDQUFXMEQsZ0JBQVgsQ0FBNEIsU0FBNUIsRUFBdUM7QUFDckVDLHdDQUFZO0FBQ1JLLHNDQUFNO0FBREU7QUFEeUQseUJBQXZDLENBUEg7QUFZL0JaLGtDQUFVRztBQVpxQixxQkFBbkM7QUFjSCxpQkFmRCxNQWVPO0FBQ0hBLCtCQUFXN0MsU0FBWCxDQUFxQjBCLEdBQXJCLENBQXlCekMscUJBQXFCLFFBQTlDO0FBQ0g7QUFFRCxxQkFBS3FCLE9BQUwsQ0FBYWlELEtBQWIsR0FBcUJ4QyxjQUFjb0IsS0FBbkM7QUFDSDs7QUFyRWdDO0FBQUE7QUFBQSx3REF1RUZ0QyxJQXZFRSxFQXVFaUM7QUFDOUQsd0JBQUksQ0FBQyxLQUFLd0QsaUJBQVYsRUFBNkI7QUFFN0I7OztBQUdBLHdCQUFNRyxpQkFBaUIzRCxTQUFTLFVBQVQsR0FBc0IsRUFBdEIsR0FBMkIsRUFBbEQ7QUFDQTs7O0FBR0Esd0JBQU00RCxnQkFBZ0I1RCxTQUFTLFVBQVQsR0FBc0IsRUFBdEIsR0FBMkIsRUFBakQ7QUFFQSx5QkFBS3dELGlCQUFMLENBQXVCSyxZQUF2QixDQUFvQyxRQUFwQyxFQUE4QzdELFNBQVMsVUFBVCx1QkFDekIsS0FBRzJELGlCQUFlLENBRE8sV0FDRixNQUFJQyxhQURGLGtCQUMwQixLQUFHRCxpQkFBZSxDQUQ1QyxpQ0FFbkMsS0FBR0EsaUJBQWUsQ0FGaUIsZUFFUEEsY0FGTyxVQUVXLEtBQUdBLGlCQUFlLENBRjdCLDZCQUE5QztBQUlIO0FBdkZnQzs7QUFBQTtBQUFBOztBQWtCeEJwRSxpQ0FBQXdCLEdBQUEsR0FBR0EsR0FBSDtBQXVFaEIsS0F6RkQsRUFBaUJ4QiwyQkFBQU4sbUJBQUFNLHdCQUFBLEtBQUFOLG1CQUFBTSx3QkFBQSxHQUF3QixFQUF4QixDQUFqQjtBQTBGSCxDQWhRRCxFQUFVTix1QkFBQUEscUJBQWtCLEVBQWxCLENBQVYiLCJmaWxlIjoic2NyaXB0cy9jb21wb25lbnRzL1JpZGVTdHlsZXJTaG93Y2FzZVRhYkJhci5qcyIsInNvdXJjZXNDb250ZW50IjpbIm5hbWVzcGFjZSBSaWRlU3R5bGVyU2hvd2Nhc2Uge1xuICAgIGNvbnN0IGJhckNsYXNzID0gJ3JpZGVzdHlsZXItc2hvd2Nhc2UtdGFiLWJhcic7XG4gICAgY29uc3QgdGFiQ2xhc3MgPSBiYXJDbGFzcyArICctdGFiJztcbiAgICBjb25zdCB0YWJCYWNrZ3JvdW5kQ2xhc3MgPSB0YWJDbGFzcyArICctYmFja2dyb3VuZCc7XG4gICAgY29uc3QgYWN0aXZlVGFiQ2xhc3MgPSB0YWJDbGFzcyArICctYWN0aXZlJztcbiAgICBjb25zdCBtb2RlQ2xhc3MgPSBiYXJDbGFzcyArICctJztcblxuICAgIGV4cG9ydCBjbGFzcyBSaWRlU3R5bGVyU2hvd2Nhc2VUYWJCYXIgZXh0ZW5kcyBDb21wb25lbnRCYXNlIHtcbiAgICAgICAgcHJvdGVjdGVkIGluaXRpYWxpemVDb21wb25lbnQoKSB7XG4gICAgICAgICAgICB0aGlzLmNvbXBvbmVudCA9IEhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCgnZGl2Jywge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogYmFyQ2xhc3NcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGlzLnNldE1vZGUoJ3ZlcnRpY2FsJyk7XG5cbiAgICAgICAgICAgIHRoaXMuY29tcG9uZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBlID0+IHRoaXMub25DbGljayhlKSk7XG4gICAgICAgIH1cblxuICAgICAgICBwcml2YXRlIG1vZGU6IFJpZGVTdHlsZXJTaG93Y2FzZVRhYkJhci5Nb2RlO1xuXG4gICAgICAgIHB1YmxpYyB0YWJTd2l0Y2hlZENhbGxiYWNrOiBSaWRlU3R5bGVyU2hvd2Nhc2VUYWJCYXIuVGFiU3dpdGNoZWRDYWxsYmFjaztcbiAgICAgICAgcHVibGljIHRhYnM6UmlkZVN0eWxlclNob3djYXNlVGFiQmFyLlRhYltdO1xuICAgICAgICBwdWJsaWMgY3VycmVudFRhYjpSaWRlU3R5bGVyU2hvd2Nhc2VUYWJCYXIuVGFiO1xuXG4gICAgICAgIHB1YmxpYyBzZXRNb2RlKG1vZGU6IFJpZGVTdHlsZXJTaG93Y2FzZVRhYkJhci5Nb2RlKSB7XG4gICAgICAgICAgICAvLyBEbyBub3RoaW5nIGlmIHRoZSBtb2RlcyBhcmUgdGhlIHNhbWVcbiAgICAgICAgICAgIGlmICh0aGlzLm1vZGUgPT09IG1vZGUpIHJldHVybjtcblxuICAgICAgICAgICAgY29uc3QgdG9nZ2xlID0gKGNsYXNzTmFtZTpzdHJpbmcsIGZvcmNlOmJvb2xlYW4pID0+IHRoaXMuY29tcG9uZW50LmNsYXNzTGlzdC50b2dnbGUoY2xhc3NOYW1lLCBmb3JjZSk7XG5cbiAgICAgICAgICAgIC8vIFJlbW92ZSB0aGUgY3VycmVudCBtb2RlIGNsYXNzXG4gICAgICAgICAgICBpZiAodHlwZW9mIHRoaXMubW9kZSA9PT0gJ3N0cmluZycpIHRvZ2dsZShtb2RlQ2xhc3MgKyB0aGlzLm1vZGUsIGZhbHNlKTtcblxuICAgICAgICAgICAgLy8gU2V0IHRoZSBuZXcgbW9kZVxuICAgICAgICAgICAgdGhpcy5tb2RlID0gbW9kZTtcblxuICAgICAgICAgICAgLy8gQWRkIHRoZSBjdXJyZW50IG1vZGUgY2xhc3NcbiAgICAgICAgICAgIHRvZ2dsZShtb2RlQ2xhc3MgKyBtb2RlLCB0cnVlKTtcblxuICAgICAgICAgICAgLy8gVXBkYXRlIHRoZSB0YWJzJyBtb2RlXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVRhYkRpc3BsYXkoKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgcHJpdmF0ZSB1cGRhdGVUYWJEaXNwbGF5KCkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLnRhYnMpIHJldHVybjtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgdGFiUGVyY2VudCA9ICgxMDAvdGhpcy50YWJzLmxlbmd0aCkgKyAnJSc7XG4gICAgICAgICAgICBjb25zdCBtb2RlID0gdGhpcy5tb2RlO1xuICAgICAgICAgICAgZm9yIChjb25zdCB0YWIgb2YgdGhpcy50YWJzKSB7XG4gICAgICAgICAgICAgICAgaWYgKG1vZGUgPT09ICd2ZXJ0aWNhbCcpIHtcbiAgICAgICAgICAgICAgICAgICAgdGFiLmVsZW1lbnQuc3R5bGUuaGVpZ2h0ID0gdGFiUGVyY2VudDtcbiAgICAgICAgICAgICAgICAgICAgdGFiLmVsZW1lbnQuc3R5bGUud2lkdGggPSAnJztcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0YWIuZWxlbWVudC5zdHlsZS5oZWlnaHQgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgdGFiLmVsZW1lbnQuc3R5bGUud2lkdGggPSB0YWJQZXJjZW50O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB0YWIudXBkYXRlQmFja2dyb3VuZFBvbHlnb24obW9kZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBwdWJsaWMgc2V0VGFicyh0YWJzOlJpZGVTdHlsZXJTaG93Y2FzZVRhYkJhci5UYWJDcmVhdGVPcHRpb25zW10pO1xuICAgICAgICBwdWJsaWMgc2V0VGFicyh0YWJzOlJpZGVTdHlsZXJTaG93Y2FzZVRhYkJhci5UYWJbXSk7XG4gICAgICAgIHB1YmxpYyBzZXRUYWJzKHRhYnNPclRhYkNyZWF0ZU9wdGlvbnM6UmlkZVN0eWxlclNob3djYXNlVGFiQmFyLlRhYltdfFJpZGVTdHlsZXJTaG93Y2FzZVRhYkJhci5UYWJDcmVhdGVPcHRpb25zW10pIHtcbiAgICAgICAgICAgIGxldCB0YWJzOlJpZGVTdHlsZXJTaG93Y2FzZVRhYkJhci5UYWJbXTtcblxuICAgICAgICAgICAgaWYgKHRhYnNPclRhYkNyZWF0ZU9wdGlvbnMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgdGFicyA9IFtdO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0YWJzT3JUYWJDcmVhdGVPcHRpb25zWzBdIGluc3RhbmNlb2YgUmlkZVN0eWxlclNob3djYXNlVGFiQmFyLlRhYikge1xuICAgICAgICAgICAgICAgIHRhYnMgPSB0YWJzT3JUYWJDcmVhdGVPcHRpb25zIGFzIFJpZGVTdHlsZXJTaG93Y2FzZVRhYkJhci5UYWJbXTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGFicyA9IG5ldyBBcnJheSh0YWJzT3JUYWJDcmVhdGVPcHRpb25zLmxlbmd0aCk7XG5cbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpbmRleCA9IDA7IGluZGV4IDwgdGFic09yVGFiQ3JlYXRlT3B0aW9ucy5sZW5ndGg7IGluZGV4KyspIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGNyZWF0ZU9wdGlvbnMgPSB0YWJzT3JUYWJDcmVhdGVPcHRpb25zW2luZGV4XSBhcyBSaWRlU3R5bGVyU2hvd2Nhc2VUYWJCYXIuVGFiQ3JlYXRlT3B0aW9ucztcbiAgICAgICAgICAgICAgICAgICAgdGFic1tpbmRleF0gPSBuZXcgUmlkZVN0eWxlclNob3djYXNlVGFiQmFyLlRhYihjcmVhdGVPcHRpb25zKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMudGFicyA9IEFycmF5SGVscGVyLmNvcHkodGFicyk7XG5cbiAgICAgICAgICAgIEhUTUxIZWxwZXIuZW1wdHkodGhpcy5jb21wb25lbnQpO1xuXG4gICAgICAgICAgICBsZXQgdGFiUGVyY2VudCA9ICgxMDAvdGFicy5sZW5ndGgpICsgJyUnO1xuXG4gICAgICAgICAgICBmb3IgKGxldCB0YWIgb2YgdGFicykge1xuICAgICAgICAgICAgICAgIHRoaXMuY29tcG9uZW50LmFwcGVuZENoaWxkKHRhYi5lbGVtZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy51cGRhdGVUYWJEaXNwbGF5KCk7XG5cbiAgICAgICAgICAgIHRoaXMuY3VycmVudFRhYiA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIHRoaXMuc2V0QWN0aXZlVGFiKHRhYnNbMF0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcHVibGljIGNsZWFyQWN0aXZlVGFiKCkge1xuICAgICAgICAgICAgdGhpcy5zZXRBY3RpdmVUYWIodW5kZWZpbmVkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHB1YmxpYyBzZXRBY3RpdmVUYWIobmV3VGFiOlJpZGVTdHlsZXJTaG93Y2FzZVRhYkJhci5UYWIpIHtcbiAgICAgICAgICAgIGxldCBvbGRUYWIgPSB0aGlzLmN1cnJlbnRUYWI7XG5cbiAgICAgICAgICAgIGlmIChvbGRUYWIgPT09IG5ld1RhYikgcmV0dXJuO1xuXG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRUYWIgPSBuZXdUYWI7XG5cbiAgICAgICAgICAgIC8vIFN3aXRjaCB0aGUgYWN0aXZlIGNsYXNzXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgaWYgKG9sZFRhYilcbiAgICAgICAgICAgICAgICAgICAgb2xkVGFiLmVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShhY3RpdmVUYWJDbGFzcyk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgaWYgKG5ld1RhYilcbiAgICAgICAgICAgICAgICAgICAgbmV3VGFiLmVsZW1lbnQuY2xhc3NMaXN0LmFkZChhY3RpdmVUYWJDbGFzcyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIFNlbmQgb2ZmIHRoZSBjYWxsYmFja1xuICAgICAgICAgICAgaWYgKG5ld1RhYiAmJiB0eXBlb2YgdGhpcy50YWJTd2l0Y2hlZENhbGxiYWNrID09PSAnZnVuY3Rpb24nKVxuICAgICAgICAgICAgICAgIHRoaXMudGFiU3dpdGNoZWRDYWxsYmFjayh7XG4gICAgICAgICAgICAgICAgICAgIG9sZFRhYjogb2xkVGFiLFxuICAgICAgICAgICAgICAgICAgICBuZXdUYWI6IG5ld1RhYlxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcHJpdmF0ZSBvbkNsaWNrKGU6TW91c2VFdmVudCkge1xuICAgICAgICAgICAgbGV0IGNsaWNrVGFyZ2V0OkhUTUxFbGVtZW50ID0gZS50YXJnZXQgYXMgSFRNTEVsZW1lbnQ7XG4gICAgICAgICAgICBsZXQgY3VycmVudEVsZW1lbnQ6SFRNTEVsZW1lbnQgPSBjbGlja1RhcmdldDtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gR28gdXAgdGhyb3VnaCB0aGUgcGFyZW50IGVsZW1lbnRzIHVudGlsIHdlIHJlYWNoIHRoZSB0YWIgYmFyXG4gICAgICAgICAgICB3aGlsZSAoY3VycmVudEVsZW1lbnQgIT09IHRoaXMuY29tcG9uZW50KSB7XG4gICAgICAgICAgICAgICAgLy8gSWYgdGhlIGN1cnJlbnQgZWxlbWVudCBpcyBhIHRhYlxuICAgICAgICAgICAgICAgIGlmIChjdXJyZW50RWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnModGFiQ2xhc3MpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMub25UYWJDbGljayh0aGlzLnRhYkZvckVsZW1lbnQoY3VycmVudEVsZW1lbnQpKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGN1cnJlbnRFbGVtZW50ID0gY3VycmVudEVsZW1lbnQucGFyZW50RWxlbWVudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHByaXZhdGUgb25UYWJDbGljayh0YWI6UmlkZVN0eWxlclNob3djYXNlVGFiQmFyLlRhYikge1xuICAgICAgICAgICAgaWYgKCF0YWIpIHJldHVybjtcblxuICAgICAgICAgICAgdGhpcy5zZXRBY3RpdmVUYWIodGFiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHB1YmxpYyB0YWJGb3JMYWJlbChsYWJlbDpzdHJpbmcpOlJpZGVTdHlsZXJTaG93Y2FzZVRhYkJhci5UYWIge1xuICAgICAgICAgICAgZm9yIChsZXQgdGFiIG9mIHRoaXMudGFicykge1xuICAgICAgICAgICAgICAgIGlmICh0YWIubGFiZWwgPT09IGxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0YWI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9XG5cbiAgICAgICAgcHVibGljIHRhYkZvckVsZW1lbnQoZWxlbWVudDpIVE1MRWxlbWVudCk6UmlkZVN0eWxlclNob3djYXNlVGFiQmFyLlRhYiB7XG4gICAgICAgICAgICBmb3IgKGxldCB0YWIgb2YgdGhpcy50YWJzKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRhYi5lbGVtZW50ID09PSBlbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0YWI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZXhwb3J0IG5hbWVzcGFjZSBSaWRlU3R5bGVyU2hvd2Nhc2VUYWJCYXIge1xuICAgICAgICBleHBvcnQgdHlwZSBNb2RlID0gJ2hvcml6b250YWwnIHwgJ3ZlcnRpY2FsJztcblxuICAgICAgICBleHBvcnQgaW50ZXJmYWNlIFRhYlN3aXRjaGVkRXZlbnQge1xuICAgICAgICAgICAgbmV3VGFiOlRhYjtcbiAgICAgICAgICAgIG9sZFRhYjpUYWI7XG4gICAgICAgIH1cblxuICAgICAgICBleHBvcnQgaW50ZXJmYWNlIFRhYlN3aXRjaGVkQ2FsbGJhY2sge1xuICAgICAgICAgICAgKHRoaXM6UmlkZVN0eWxlclNob3djYXNlVGFiQmFyLCBldmVudDpUYWJTd2l0Y2hlZEV2ZW50KTp2b2lkO1xuICAgICAgICB9XG5cbiAgICAgICAgZXhwb3J0IGludGVyZmFjZSBUYWJDcmVhdGVPcHRpb25zIHtcbiAgICAgICAgICAgIGljb246c3RyaW5nO1xuICAgICAgICAgICAgbGFiZWw6c3RyaW5nO1xuICAgICAgICAgICAga2V5OnN0cmluZztcbiAgICAgICAgfVxuXG4gICAgICAgIGV4cG9ydCBjbGFzcyBUYWIge1xuICAgICAgICAgICAgcHVibGljIHJlYWRvbmx5IGljb25DbGFzczpzdHJpbmc7XG4gICAgICAgICAgICBwdWJsaWMgcmVhZG9ubHkgbGFiZWw6c3RyaW5nO1xuICAgICAgICAgICAgcHVibGljIHJlYWRvbmx5IGVsZW1lbnQ6SFRNTEVsZW1lbnQ7XG4gICAgICAgICAgICBwdWJsaWMgcmVhZG9ubHkga2V5OnN0cmluZztcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgcHJpdmF0ZSBiYWNrZ3JvdW5kTW9kZTpSaWRlU3R5bGVyU2hvd2Nhc2VUYWJCYXIuTW9kZTtcbiAgICAgICAgICAgIHByaXZhdGUgcmVhZG9ubHkgYmFja2dyb3VuZFBvbHlnb246U1ZHUG9seWdvbkVsZW1lbnQ7XG5cbiAgICAgICAgICAgIGNvbnN0cnVjdG9yKGNyZWF0ZU9wdGlvbnM6VGFiQ3JlYXRlT3B0aW9ucykge1xuICAgICAgICAgICAgICAgIHRoaXMubGFiZWwgPSBjcmVhdGVPcHRpb25zLmxhYmVsO1xuICAgICAgICAgICAgICAgIHRoaXMuaWNvbkNsYXNzID0gY3JlYXRlT3B0aW9ucy5pY29uO1xuICAgICAgICAgICAgICAgIHRoaXMua2V5ID0gY3JlYXRlT3B0aW9ucy5rZXk7XG5cbiAgICAgICAgICAgICAgICB0aGlzLmJhY2tncm91bmRNb2RlID0gJ2hvcml6b250YWwnO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50ID0gSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogdGFiQ2xhc3NcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIEhUTUxIZWxwZXIuY3JlYXRlSWNvbih7XG4gICAgICAgICAgICAgICAgICAgIGljb246IGNyZWF0ZU9wdGlvbnMuaWNvbixcbiAgICAgICAgICAgICAgICAgICAgYXBwZW5kVG86IHRoaXMuZWxlbWVudCxcbiAgICAgICAgICAgICAgICAgICAgd3JhcDogSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50V2l0aENsYXNzKCdkaXYnLCB0YWJDbGFzcyArICctaWNvbicpXG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBjb25zdCBiYWNrZ3JvdW5kID0gSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KHtcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiB0YWJCYWNrZ3JvdW5kQ2xhc3MsXG4gICAgICAgICAgICAgICAgICAgIGFwcGVuZFRvOiB0aGlzLmVsZW1lbnRcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIGlmIChTdHlsZUhlbHBlci5zdmdTdXBwb3J0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgSFRNTEhlbHBlci5jcmVhdGVTVkdFbGVtZW50KCdzdmcnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6ICcxMDAlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6ICcxMDAlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmVzZXJ2ZUFzcGVjdFJhdGlvOiAnbm9uZScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmlld0JveDogJzAgMCAxMDAgMTAwJ1xuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGFwcGVuZDogKHRoaXMuYmFja2dyb3VuZFBvbHlnb24gPSBIVE1MSGVscGVyLmNyZWF0ZVNWR0VsZW1lbnQoJ3BvbHlnb24nLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxsOiAnYmxhY2snXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSkpLFxuICAgICAgICAgICAgICAgICAgICAgICAgYXBwZW5kVG86IGJhY2tncm91bmRcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZC5jbGFzc0xpc3QuYWRkKHRhYkJhY2tncm91bmRDbGFzcyArICctbm9zdmcnKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQudGl0bGUgPSBjcmVhdGVPcHRpb25zLmxhYmVsO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBwdWJsaWMgdXBkYXRlQmFja2dyb3VuZFBvbHlnb24obW9kZTogUmlkZVN0eWxlclNob3djYXNlVGFiQmFyLk1vZGUpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuYmFja2dyb3VuZFBvbHlnb24pIHJldHVybjtcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIFRoZSBoZWlnaHQgaW4gcGVyY2VudGFnZSBvZiB0aGUgdHJpYW5nbGUgc2l6ZVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIGNvbnN0IHRyaWFuZ2xlSGVpZ2h0ID0gbW9kZSA9PT0gJ3ZlcnRpY2FsJyA/IDMwIDogMTU7XG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogVGhlIHdpZHRoIGluIHBlcmNlbnRhZ2Ugb2YgdGhlIHRyaWFuZ2xlIHNpemVcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBjb25zdCB0cmlhbmdsZVdpZHRoID0gbW9kZSA9PT0gJ3ZlcnRpY2FsJyA/IDE1IDogMzA7XG5cbiAgICAgICAgICAgICAgICB0aGlzLmJhY2tncm91bmRQb2x5Z29uLnNldEF0dHJpYnV0ZSgncG9pbnRzJywgbW9kZSA9PT0gJ3ZlcnRpY2FsJyA/IFxuICAgICAgICAgICAgICAgICAgICBgMCwwIDEwMCwwIDEwMCwkezUwLXRyaWFuZ2xlSGVpZ2h0LzJ9ICR7MTAwLXRyaWFuZ2xlV2lkdGh9LDUwIDEwMCwkezUwK3RyaWFuZ2xlSGVpZ2h0LzJ9IDEwMCwxMDAgMCwxMDBgIDpcbiAgICAgICAgICAgICAgICAgICAgYDAsMCAkezUwLXRyaWFuZ2xlSGVpZ2h0LzJ9LDAgNTAsJHt0cmlhbmdsZUhlaWdodH0gJHs1MCt0cmlhbmdsZUhlaWdodC8yfSwwIDEwMCwwIDEwMCwxMDAsIDAsMTAwYFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59Il19

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var RideStylerShowcase;
(function (RideStylerShowcase) {
    var tableClass = 'ridestyler-showcase-table';
    var headClass = tableClass + '-head';
    var bodyClass = tableClass + '-body';
    var bodyLoadingClass = bodyClass + '-loading';
    var containerClass = tableClass + '-container';

    var RideStylerShowcaseTable = function (_RideStylerShowcase$C) {
        _inherits(RideStylerShowcaseTable, _RideStylerShowcase$C);

        function RideStylerShowcaseTable(showcaseInstance, options) {
            _classCallCheck(this, RideStylerShowcaseTable);

            options = RideStylerShowcase.ObjectHelper.assign({}, options);

            var _this = _possibleConstructorReturn(this, (RideStylerShowcaseTable.__proto__ || Object.getPrototypeOf(RideStylerShowcaseTable)).call(this, showcaseInstance));

            _this.options = options;
            _this.columns = options.columns;
            var table = RideStylerShowcase.HTMLHelper.createElement('table', {
                appendTo: _this.component,
                className: tableClass
            });
            var thead = RideStylerShowcase.HTMLHelper.createElement('thead', {
                appendTo: table,
                className: headClass
            });
            _this.tbody = RideStylerShowcase.HTMLHelper.createElement('tbody', {
                appendTo: table,
                className: bodyClass
            });
            _this.generateHeaders(thead);
            _this.component = table;
            if (options.rows) _this.appendRows(options.rows);else if (options.startLoading) _this.setLoading(true);
            return _this;
        }

        _createClass(RideStylerShowcaseTable, [{
            key: 'generateHeaderCell',
            value: function generateHeaderCell(column) {
                var header = column.header;
                if (typeof header === 'function') {
                    var generatedHeader = header(column);
                    return typeof generatedHeader === 'string' ? RideStylerShowcase.HTMLHelper.createElement('th', {
                        text: generatedHeader
                    }) : generatedHeader;
                }
                var th = RideStylerShowcase.HTMLHelper.createElement('th', {
                    text: header
                });
                return th;
            }
        }, {
            key: 'generateHeaders',
            value: function generateHeaders(thead) {
                var headerRow = RideStylerShowcase.HTMLHelper.createElement('tr');
                var _iteratorNormalCompletion = true;
                var _didIteratorError = false;
                var _iteratorError = undefined;

                try {
                    for (var _iterator = this.columns[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
                        var column = _step.value;

                        headerRow.appendChild(this.generateHeaderCell(column));
                    }
                } catch (err) {
                    _didIteratorError = true;
                    _iteratorError = err;
                } finally {
                    try {
                        if (!_iteratorNormalCompletion && _iterator.return) {
                            _iterator.return();
                        }
                    } finally {
                        if (_didIteratorError) {
                            throw _iteratorError;
                        }
                    }
                }

                thead.appendChild(headerRow);
            }
        }, {
            key: 'generateRowCell',
            value: function generateRowCell(row, column) {
                var cell = column.cell;
                if (typeof cell === 'function') {
                    var generatedCell = cell(row, column);
                    return typeof generatedCell === 'string' ? RideStylerShowcase.HTMLHelper.createElement('td', {
                        text: generatedCell
                    }) : generatedCell;
                }
                var td = RideStylerShowcase.HTMLHelper.createElement('td', {
                    text: row[cell].toString()
                });
                return td;
            }
        }, {
            key: 'generateRow',
            value: function generateRow(row) {
                var tr = RideStylerShowcase.HTMLHelper.createElement('tr');
                var _iteratorNormalCompletion2 = true;
                var _didIteratorError2 = false;
                var _iteratorError2 = undefined;

                try {
                    for (var _iterator2 = this.columns[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {
                        var column = _step2.value;

                        tr.appendChild(this.generateRowCell(row, column));
                    }
                } catch (err) {
                    _didIteratorError2 = true;
                    _iteratorError2 = err;
                } finally {
                    try {
                        if (!_iteratorNormalCompletion2 && _iterator2.return) {
                            _iterator2.return();
                        }
                    } finally {
                        if (_didIteratorError2) {
                            throw _iteratorError2;
                        }
                    }
                }

                return tr;
            }
        }, {
            key: 'appendRows',
            value: function appendRows(rows) {
                this.setLoading(false);
                var rowsFragment = document.createDocumentFragment();
                var _iteratorNormalCompletion3 = true;
                var _didIteratorError3 = false;
                var _iteratorError3 = undefined;

                try {
                    for (var _iterator3 = rows[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {
                        var row = _step3.value;

                        rowsFragment.appendChild(this.generateRow(row));
                    }
                } catch (err) {
                    _didIteratorError3 = true;
                    _iteratorError3 = err;
                } finally {
                    try {
                        if (!_iteratorNormalCompletion3 && _iterator3.return) {
                            _iterator3.return();
                        }
                    } finally {
                        if (_didIteratorError3) {
                            throw _iteratorError3;
                        }
                    }
                }

                this.tbody.appendChild(rowsFragment);
            }
        }, {
            key: 'setLoading',
            value: function setLoading(loading) {
                this.tbody.classList.toggle(bodyLoadingClass, loading);
            }
        }], [{
            key: 'formatCell',
            value: function formatCell(object, key, postfix) {
                var string = object[key].toString();
                return RideStylerShowcase.HTMLHelper.createElement('td', {
                    text: string ? postfix ? string + postfix : string : RideStylerShowcaseTable.emptyCellString
                });
            }
        }]);

        return RideStylerShowcaseTable;
    }(RideStylerShowcase.ComponentBase);

    RideStylerShowcaseTable.emptyCellString = '-';
    RideStylerShowcase.RideStylerShowcaseTable = RideStylerShowcaseTable;
})(RideStylerShowcase || (RideStylerShowcase = {}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvUmlkZVN0eWxlclNob3djYXNlVGFibGUudHMiXSwibmFtZXMiOlsiUmlkZVN0eWxlclNob3djYXNlIiwidGFibGVDbGFzcyIsImhlYWRDbGFzcyIsImJvZHlDbGFzcyIsImJvZHlMb2FkaW5nQ2xhc3MiLCJjb250YWluZXJDbGFzcyIsIlJpZGVTdHlsZXJTaG93Y2FzZVRhYmxlIiwic2hvd2Nhc2VJbnN0YW5jZSIsIm9wdGlvbnMiLCJPYmplY3RIZWxwZXIiLCJhc3NpZ24iLCJjb2x1bW5zIiwidGFibGUiLCJIVE1MSGVscGVyIiwiY3JlYXRlRWxlbWVudCIsImFwcGVuZFRvIiwiY29tcG9uZW50IiwiY2xhc3NOYW1lIiwidGhlYWQiLCJ0Ym9keSIsImdlbmVyYXRlSGVhZGVycyIsInJvd3MiLCJhcHBlbmRSb3dzIiwic3RhcnRMb2FkaW5nIiwic2V0TG9hZGluZyIsImNvbHVtbiIsImhlYWRlciIsImdlbmVyYXRlZEhlYWRlciIsInRleHQiLCJ0aCIsImhlYWRlclJvdyIsImFwcGVuZENoaWxkIiwiZ2VuZXJhdGVIZWFkZXJDZWxsIiwicm93IiwiY2VsbCIsImdlbmVyYXRlZENlbGwiLCJ0ZCIsInRvU3RyaW5nIiwidHIiLCJnZW5lcmF0ZVJvd0NlbGwiLCJyb3dzRnJhZ21lbnQiLCJkb2N1bWVudCIsImNyZWF0ZURvY3VtZW50RnJhZ21lbnQiLCJnZW5lcmF0ZVJvdyIsImxvYWRpbmciLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJvYmplY3QiLCJrZXkiLCJwb3N0Zml4Iiwic3RyaW5nIiwiZW1wdHlDZWxsU3RyaW5nIiwiQ29tcG9uZW50QmFzZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQSxJQUFVQSxrQkFBVjtBQUFBLENBQUEsVUFBVUEsa0JBQVYsRUFBNEI7QUFJeEIsUUFBTUMsYUFBYSwyQkFBbkI7QUFDQSxRQUFNQyxZQUFZRCxhQUFhLE9BQS9CO0FBQ0EsUUFBTUUsWUFBWUYsYUFBYSxPQUEvQjtBQUNBLFFBQU1HLG1CQUFtQkQsWUFBWSxVQUFyQztBQUNBLFFBQU1FLGlCQUFpQkosYUFBYSxZQUFwQzs7QUFSd0IsUUFVeEJLLHVCQVZ3QjtBQUFBOztBQWtCcEIseUNBQVlDLGdCQUFaLEVBQXlEQyxPQUF6RCxFQUFpRjtBQUFBOztBQUM3RUEsc0JBQVVSLG1CQUFBUyxZQUFBLENBQWFDLE1BQWIsQ0FBb0IsRUFBcEIsRUFFUEYsT0FGTyxDQUFWOztBQUQ2RSwwSkFLdkVELGdCQUx1RTs7QUFPN0Usa0JBQUtDLE9BQUwsR0FBZUEsT0FBZjtBQUNBLGtCQUFLRyxPQUFMLEdBQWVILFFBQVFHLE9BQXZCO0FBRUEsZ0JBQUlDLFFBQVFaLG1CQUFBYSxVQUFBLENBQVdDLGFBQVgsQ0FBeUIsT0FBekIsRUFBa0M7QUFDMUNDLDBCQUFVLE1BQUtDLFNBRDJCO0FBRTFDQywyQkFBV2hCO0FBRitCLGFBQWxDLENBQVo7QUFLQSxnQkFBSWlCLFFBQVFsQixtQkFBQWEsVUFBQSxDQUFXQyxhQUFYLENBQXlCLE9BQXpCLEVBQWtDO0FBQzFDQywwQkFBVUgsS0FEZ0M7QUFFMUNLLDJCQUFXZjtBQUYrQixhQUFsQyxDQUFaO0FBS0Esa0JBQUtpQixLQUFMLEdBQWFuQixtQkFBQWEsVUFBQSxDQUFXQyxhQUFYLENBQXlCLE9BQXpCLEVBQWtDO0FBQzNDQywwQkFBVUgsS0FEaUM7QUFFM0NLLDJCQUFXZDtBQUZnQyxhQUFsQyxDQUFiO0FBS0Esa0JBQUtpQixlQUFMLENBQXFCRixLQUFyQjtBQUVBLGtCQUFLRixTQUFMLEdBQWlCSixLQUFqQjtBQUVBLGdCQUFJSixRQUFRYSxJQUFaLEVBQWtCLE1BQUtDLFVBQUwsQ0FBZ0JkLFFBQVFhLElBQXhCLEVBQWxCLEtBQ0ssSUFBSWIsUUFBUWUsWUFBWixFQUEwQixNQUFLQyxVQUFMLENBQWdCLElBQWhCO0FBOUI4QztBQStCaEY7O0FBakRtQjtBQUFBO0FBQUEsK0NBbURTQyxNQW5EVCxFQW1EK0I7QUFDL0Msb0JBQUlDLFNBQVNELE9BQU9DLE1BQXBCO0FBRUEsb0JBQUksT0FBT0EsTUFBUCxLQUFrQixVQUF0QixFQUFrQztBQUM5Qix3QkFBSUMsa0JBQWtCRCxPQUFPRCxNQUFQLENBQXRCO0FBRUEsMkJBQU8sT0FBT0UsZUFBUCxLQUEyQixRQUEzQixHQUFzQzNCLG1CQUFBYSxVQUFBLENBQVdDLGFBQVgsQ0FBeUIsSUFBekIsRUFBK0I7QUFDeEVjLDhCQUFNRDtBQURrRSxxQkFBL0IsQ0FBdEMsR0FFRkEsZUFGTDtBQUdIO0FBRUQsb0JBQUlFLEtBQUs3QixtQkFBQWEsVUFBQSxDQUFXQyxhQUFYLENBQXlCLElBQXpCLEVBQStCO0FBQ3BDYywwQkFBTUY7QUFEOEIsaUJBQS9CLENBQVQ7QUFJQSx1QkFBT0csRUFBUDtBQUNIO0FBbkVtQjtBQUFBO0FBQUEsNENBcUVNWCxLQXJFTixFQXFFbUM7QUFDbkQsb0JBQUlZLFlBQVk5QixtQkFBQWEsVUFBQSxDQUFXQyxhQUFYLENBQXlCLElBQXpCLENBQWhCO0FBRG1EO0FBQUE7QUFBQTs7QUFBQTtBQUduRCx5Q0FBbUIsS0FBS0gsT0FBeEIsOEhBQWlDO0FBQUEsNEJBQXhCYyxNQUF3Qjs7QUFDN0JLLGtDQUFVQyxXQUFWLENBQXNCLEtBQUtDLGtCQUFMLENBQXdCUCxNQUF4QixDQUF0QjtBQUNIO0FBTGtEO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7O0FBT25EUCxzQkFBTWEsV0FBTixDQUFrQkQsU0FBbEI7QUFDSDtBQTdFbUI7QUFBQTtBQUFBLDRDQStFTUcsR0EvRU4sRUErRW1CUixNQS9FbkIsRUErRXlDO0FBQ3pELG9CQUFJUyxPQUFPVCxPQUFPUyxJQUFsQjtBQUVBLG9CQUFJLE9BQU9BLElBQVAsS0FBZ0IsVUFBcEIsRUFBZ0M7QUFDNUIsd0JBQUlDLGdCQUFpQkQsS0FBd0RELEdBQXhELEVBQTZEUixNQUE3RCxDQUFyQjtBQUVBLDJCQUFPLE9BQU9VLGFBQVAsS0FBeUIsUUFBekIsR0FBb0NuQyxtQkFBQWEsVUFBQSxDQUFXQyxhQUFYLENBQXlCLElBQXpCLEVBQStCO0FBQ3RFYyw4QkFBTU87QUFEZ0UscUJBQS9CLENBQXBDLEdBRUZBLGFBRkw7QUFHSDtBQUVELG9CQUFJQyxLQUFLcEMsbUJBQUFhLFVBQUEsQ0FBV0MsYUFBWCxDQUF5QixJQUF6QixFQUErQjtBQUNwQ2MsMEJBQU1LLElBQUlDLElBQUosRUFBMkJHLFFBQTNCO0FBRDhCLGlCQUEvQixDQUFUO0FBSUEsdUJBQU9ELEVBQVA7QUFDSDtBQS9GbUI7QUFBQTtBQUFBLHdDQWlHRUgsR0FqR0YsRUFpR2E7QUFDN0Isb0JBQUlLLEtBQUt0QyxtQkFBQWEsVUFBQSxDQUFXQyxhQUFYLENBQXlCLElBQXpCLENBQVQ7QUFENkI7QUFBQTtBQUFBOztBQUFBO0FBRzdCLDBDQUFtQixLQUFLSCxPQUF4QixtSUFBaUM7QUFBQSw0QkFBeEJjLE1BQXdCOztBQUM3QmEsMkJBQUdQLFdBQUgsQ0FBZSxLQUFLUSxlQUFMLENBQXFCTixHQUFyQixFQUEwQlIsTUFBMUIsQ0FBZjtBQUNIO0FBTDRCO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7O0FBTzdCLHVCQUFPYSxFQUFQO0FBQ0g7QUF6R21CO0FBQUE7QUFBQSx1Q0EyR0ZqQixJQTNHRSxFQTJHWTtBQUM1QixxQkFBS0csVUFBTCxDQUFnQixLQUFoQjtBQUVBLG9CQUFJZ0IsZUFBZUMsU0FBU0Msc0JBQVQsRUFBbkI7QUFINEI7QUFBQTtBQUFBOztBQUFBO0FBSzVCLDBDQUFnQnJCLElBQWhCLG1JQUFzQjtBQUFBLDRCQUFiWSxHQUFhOztBQUNsQk8scUNBQWFULFdBQWIsQ0FBeUIsS0FBS1ksV0FBTCxDQUFpQlYsR0FBakIsQ0FBekI7QUFDSDtBQVAyQjtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOztBQVM1QixxQkFBS2QsS0FBTCxDQUFXWSxXQUFYLENBQXVCUyxZQUF2QjtBQUNIO0FBckhtQjtBQUFBO0FBQUEsdUNBdUhDSSxPQXZIRCxFQXVIZ0I7QUFDaEMscUJBQUt6QixLQUFMLENBQVcwQixTQUFYLENBQXFCQyxNQUFyQixDQUE0QjFDLGdCQUE1QixFQUE4Q3dDLE9BQTlDO0FBQ0g7QUF6SG1CO0FBQUE7QUFBQSx1Q0EySFFHLE1BM0hSLEVBMkhtQkMsR0EzSG5CLEVBMkhnQ0MsT0EzSGhDLEVBMkgrQztBQUMvRCxvQkFBSUMsU0FBZ0JILE9BQU9DLEdBQVAsRUFBWVgsUUFBWixFQUFwQjtBQUVBLHVCQUFPckMsbUJBQUFhLFVBQUEsQ0FBV0MsYUFBWCxDQUF5QixJQUF6QixFQUErQjtBQUNsQ2MsMEJBQU1zQixTQUFVRCxVQUFVQyxTQUFTRCxPQUFuQixHQUE2QkMsTUFBdkMsR0FBaUQ1Qyx3QkFBd0I2QztBQUQ3QyxpQkFBL0IsQ0FBUDtBQUdIO0FBakltQjs7QUFBQTtBQUFBLE1BVThCbkQsbUJBQUFvRCxhQVY5Qjs7QUFnQk45Qyw0QkFBQTZDLGVBQUEsR0FBeUIsR0FBekI7QUFOTG5ELHVCQUFBTSx1QkFBQSxHQUF1QkEsdUJBQXZCO0FBeUpoQixDQW5LRCxFQUFVTix1QkFBQUEscUJBQWtCLEVBQWxCLENBQVYiLCJmaWxlIjoic2NyaXB0cy9jb21wb25lbnRzL1JpZGVTdHlsZXJTaG93Y2FzZVRhYmxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsibmFtZXNwYWNlIFJpZGVTdHlsZXJTaG93Y2FzZSB7XG4gICAgaW1wb3J0IENvbHVtbiA9IFJpZGVTdHlsZXJTaG93Y2FzZVRhYmxlLkNvbHVtbjtcbiAgICBpbXBvcnQgT3B0aW9ucyA9IFJpZGVTdHlsZXJTaG93Y2FzZVRhYmxlLk9wdGlvbnM7XG5cbiAgICBjb25zdCB0YWJsZUNsYXNzID0gJ3JpZGVzdHlsZXItc2hvd2Nhc2UtdGFibGUnO1xuICAgIGNvbnN0IGhlYWRDbGFzcyA9IHRhYmxlQ2xhc3MgKyAnLWhlYWQnO1xuICAgIGNvbnN0IGJvZHlDbGFzcyA9IHRhYmxlQ2xhc3MgKyAnLWJvZHknO1xuICAgIGNvbnN0IGJvZHlMb2FkaW5nQ2xhc3MgPSBib2R5Q2xhc3MgKyAnLWxvYWRpbmcnO1xuICAgIGNvbnN0IGNvbnRhaW5lckNsYXNzID0gdGFibGVDbGFzcyArICctY29udGFpbmVyJztcblxuICAgIGV4cG9ydCBjbGFzcyBSaWRlU3R5bGVyU2hvd2Nhc2VUYWJsZTxSb3dUeXBlPiBleHRlbmRzIENvbXBvbmVudEJhc2Uge1xuICAgICAgICBwcm90ZWN0ZWQgcmVhZG9ubHkgb3B0aW9uczpPcHRpb25zPFJvd1R5cGU+O1xuICAgICAgICBwcm90ZWN0ZWQgcmVhZG9ubHkgY29sdW1uczpDb2x1bW48Um93VHlwZT5bXTtcblxuICAgICAgICBwcm90ZWN0ZWQgdGJvZHk6SFRNTFRhYmxlU2VjdGlvbkVsZW1lbnQ7XG5cbiAgICAgICAgcHVibGljIHN0YXRpYyBlbXB0eUNlbGxTdHJpbmc6c3RyaW5nID0gJy0nO1xuXG4gICAgICAgIGNvbnN0cnVjdG9yKHNob3djYXNlSW5zdGFuY2U6UmlkZVN0eWxlclNob3djYXNlSW5zdGFuY2UsIG9wdGlvbnM6T3B0aW9uczxSb3dUeXBlPikge1xuICAgICAgICAgICAgb3B0aW9ucyA9IE9iamVjdEhlbHBlci5hc3NpZ24oe1xuXG4gICAgICAgICAgICB9LCBvcHRpb25zKSBcblxuICAgICAgICAgICAgc3VwZXIoc2hvd2Nhc2VJbnN0YW5jZSk7XG5cbiAgICAgICAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgICAgICAgICB0aGlzLmNvbHVtbnMgPSBvcHRpb25zLmNvbHVtbnM7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGxldCB0YWJsZSA9IEhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCgndGFibGUnLCB7XG4gICAgICAgICAgICAgICAgYXBwZW5kVG86IHRoaXMuY29tcG9uZW50LFxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogdGFibGVDbGFzc1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGxldCB0aGVhZCA9IEhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCgndGhlYWQnLCB7XG4gICAgICAgICAgICAgICAgYXBwZW5kVG86IHRhYmxlLFxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogaGVhZENsYXNzXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdGhpcy50Ym9keSA9IEhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCgndGJvZHknLCB7XG4gICAgICAgICAgICAgICAgYXBwZW5kVG86IHRhYmxlLFxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogYm9keUNsYXNzXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdGhpcy5nZW5lcmF0ZUhlYWRlcnModGhlYWQpO1xuXG4gICAgICAgICAgICB0aGlzLmNvbXBvbmVudCA9IHRhYmxlO1xuXG4gICAgICAgICAgICBpZiAob3B0aW9ucy5yb3dzKSB0aGlzLmFwcGVuZFJvd3Mob3B0aW9ucy5yb3dzKTtcbiAgICAgICAgICAgIGVsc2UgaWYgKG9wdGlvbnMuc3RhcnRMb2FkaW5nKSB0aGlzLnNldExvYWRpbmcodHJ1ZSk7XG4gICAgICAgIH1cblxuICAgICAgICBwcm90ZWN0ZWQgZ2VuZXJhdGVIZWFkZXJDZWxsKGNvbHVtbjpDb2x1bW48Um93VHlwZT4pOkhUTUxUYWJsZUhlYWRlckNlbGxFbGVtZW50IHtcbiAgICAgICAgICAgIGxldCBoZWFkZXIgPSBjb2x1bW4uaGVhZGVyO1xuXG4gICAgICAgICAgICBpZiAodHlwZW9mIGhlYWRlciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgIGxldCBnZW5lcmF0ZWRIZWFkZXIgPSBoZWFkZXIoY29sdW1uKTtcblxuICAgICAgICAgICAgICAgIHJldHVybiB0eXBlb2YgZ2VuZXJhdGVkSGVhZGVyID09PSAnc3RyaW5nJyA/IEhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCgndGgnLCB7XG4gICAgICAgICAgICAgICAgICAgIHRleHQ6IGdlbmVyYXRlZEhlYWRlclxuICAgICAgICAgICAgICAgIH0pIDogZ2VuZXJhdGVkSGVhZGVyO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBsZXQgdGggPSBIVE1MSGVscGVyLmNyZWF0ZUVsZW1lbnQoJ3RoJywge1xuICAgICAgICAgICAgICAgIHRleHQ6IGhlYWRlclxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHJldHVybiB0aDtcbiAgICAgICAgfVxuXG4gICAgICAgIHByb3RlY3RlZCBnZW5lcmF0ZUhlYWRlcnModGhlYWQ6SFRNTFRhYmxlU2VjdGlvbkVsZW1lbnQpIHtcbiAgICAgICAgICAgIGxldCBoZWFkZXJSb3cgPSBIVE1MSGVscGVyLmNyZWF0ZUVsZW1lbnQoJ3RyJyk7XG5cbiAgICAgICAgICAgIGZvciAobGV0IGNvbHVtbiBvZiB0aGlzLmNvbHVtbnMpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJSb3cuYXBwZW5kQ2hpbGQodGhpcy5nZW5lcmF0ZUhlYWRlckNlbGwoY29sdW1uKSk7ICAgIFxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGVhZC5hcHBlbmRDaGlsZChoZWFkZXJSb3cpO1xuICAgICAgICB9XG5cbiAgICAgICAgcHJvdGVjdGVkIGdlbmVyYXRlUm93Q2VsbChyb3c6Um93VHlwZSwgY29sdW1uOkNvbHVtbjxSb3dUeXBlPik6SFRNTFRhYmxlQ2VsbEVsZW1lbnQge1xuICAgICAgICAgICAgbGV0IGNlbGwgPSBjb2x1bW4uY2VsbDtcblxuICAgICAgICAgICAgaWYgKHR5cGVvZiBjZWxsID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgbGV0IGdlbmVyYXRlZENlbGwgPSAoY2VsbCBhcyBSaWRlU3R5bGVyU2hvd2Nhc2VUYWJsZS5DZWxsR2VuZXJhdG9yPFJvd1R5cGU+KShyb3csIGNvbHVtbik7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gdHlwZW9mIGdlbmVyYXRlZENlbGwgPT09ICdzdHJpbmcnID8gSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KCd0ZCcsIHtcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogZ2VuZXJhdGVkQ2VsbFxuICAgICAgICAgICAgICAgIH0pIDogZ2VuZXJhdGVkQ2VsbDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbGV0IHRkID0gSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KCd0ZCcsIHtcbiAgICAgICAgICAgICAgICB0ZXh0OiByb3dbY2VsbCBhcyBrZXlvZiBSb3dUeXBlXS50b1N0cmluZygpXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgcmV0dXJuIHRkO1xuICAgICAgICB9XG5cbiAgICAgICAgcHJvdGVjdGVkIGdlbmVyYXRlUm93KHJvdzpSb3dUeXBlKTpIVE1MVGFibGVSb3dFbGVtZW50IHtcbiAgICAgICAgICAgIGxldCB0ciA9IEhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCgndHInKTtcblxuICAgICAgICAgICAgZm9yIChsZXQgY29sdW1uIG9mIHRoaXMuY29sdW1ucykge1xuICAgICAgICAgICAgICAgIHRyLmFwcGVuZENoaWxkKHRoaXMuZ2VuZXJhdGVSb3dDZWxsKHJvdywgY29sdW1uKSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiB0cjtcbiAgICAgICAgfVxuXG4gICAgICAgIHB1YmxpYyBhcHBlbmRSb3dzKHJvd3M6Um93VHlwZVtdKSB7XG4gICAgICAgICAgICB0aGlzLnNldExvYWRpbmcoZmFsc2UpO1xuXG4gICAgICAgICAgICBsZXQgcm93c0ZyYWdtZW50ID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuXG4gICAgICAgICAgICBmb3IgKGxldCByb3cgb2Ygcm93cykge1xuICAgICAgICAgICAgICAgIHJvd3NGcmFnbWVudC5hcHBlbmRDaGlsZCh0aGlzLmdlbmVyYXRlUm93KHJvdykpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLnRib2R5LmFwcGVuZENoaWxkKHJvd3NGcmFnbWVudCk7XG4gICAgICAgIH1cblxuICAgICAgICBwcm90ZWN0ZWQgc2V0TG9hZGluZyhsb2FkaW5nOmJvb2xlYW4pIHtcbiAgICAgICAgICAgIHRoaXMudGJvZHkuY2xhc3NMaXN0LnRvZ2dsZShib2R5TG9hZGluZ0NsYXNzLCBsb2FkaW5nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgZm9ybWF0Q2VsbDxUPihvYmplY3Q6IFQsIGtleTprZXlvZiBULCBwb3N0Zml4PzpzdHJpbmcpOkhUTUxUYWJsZUNlbGxFbGVtZW50IHtcbiAgICAgICAgICAgIGxldCBzdHJpbmc6c3RyaW5nID0gb2JqZWN0W2tleV0udG9TdHJpbmcoKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgcmV0dXJuIEhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCgndGQnLCB7XG4gICAgICAgICAgICAgICAgdGV4dDogc3RyaW5nID8gKHBvc3RmaXggPyBzdHJpbmcgKyBwb3N0Zml4IDogc3RyaW5nKSA6IFJpZGVTdHlsZXJTaG93Y2FzZVRhYmxlLmVtcHR5Q2VsbFN0cmluZ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBleHBvcnQgbmFtZXNwYWNlIFJpZGVTdHlsZXJTaG93Y2FzZVRhYmxlIHtcbiAgICAgICAgZXhwb3J0IGludGVyZmFjZSBIZWFkZXJHZW5lcmF0b3I8Um93VHlwZT4ge1xuICAgICAgICAgICAgKGNvbHVtbjpDb2x1bW48Um93VHlwZT4pOkhUTUxUYWJsZUhlYWRlckNlbGxFbGVtZW50fHN0cmluZztcbiAgICAgICAgfVxuXG4gICAgICAgIGV4cG9ydCBpbnRlcmZhY2UgQ2VsbEdlbmVyYXRvcjxSb3dUeXBlPiB7XG4gICAgICAgICAgICAocm93OlJvd1R5cGUsIGNvbHVtbjpDb2x1bW48Um93VHlwZT4pOkhUTUxUYWJsZUNlbGxFbGVtZW50fHN0cmluZztcbiAgICAgICAgfVxuXG4gICAgICAgIGV4cG9ydCBpbnRlcmZhY2UgQ29sdW1uPFJvd1R5cGU+IHtcbiAgICAgICAgICAgIGhlYWRlcjogc3RyaW5nfEhlYWRlckdlbmVyYXRvcjxSb3dUeXBlPjtcbiAgICAgICAgICAgIGNlbGw6IGtleW9mIFJvd1R5cGV8Q2VsbEdlbmVyYXRvcjxSb3dUeXBlPjtcbiAgICAgICAgfVxuXG4gICAgICAgIGV4cG9ydCBpbnRlcmZhY2UgT3B0aW9uczxSb3dUeXBlPiB7XG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIENvbHVtbiBzZXR0aW5nc1xuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBjb2x1bW5zOiBDb2x1bW48Um93VHlwZT5bXTtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBSb3dzIHRvIGluaXRpYWxpemUgdGhlIHRhYmxlIHdpdGhcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgcm93cz86IFJvd1R5cGVbXTtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBJZiB0cnVlLCBzdGFydCB0aGUgdGFibGUgaW4gdGhlIGxvYWRpbmcgc3RhdGVcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgc3RhcnRMb2FkaW5nPzogYm9vbGVhbjtcbiAgICAgICAgfVxuICAgIH1cbn0iXX0=

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var RideStylerShowcase;
(function (RideStylerShowcase) {
    var RideStylerShowcaseTireSelector = function (_RideStylerShowcase$R) {
        _inherits(RideStylerShowcaseTireSelector, _RideStylerShowcase$R);

        function RideStylerShowcaseTireSelector(showcaseInstance) {
            _classCallCheck(this, RideStylerShowcaseTireSelector);

            var _this = _possibleConstructorReturn(this, (RideStylerShowcaseTireSelector.__proto__ || Object.getPrototypeOf(RideStylerShowcaseTireSelector)).call(this, showcaseInstance));

            var stateData = showcaseInstance.state.getData();
            _this.supportedVehicleImagery = {
                angled: stateData.vehicleHasAngledImage,
                side: stateData.vehicleHasSideImage
            };
            _this.vehicleTireOptionID = stateData.currentVehicleTireOptionID;
            _this.defaultFilters = {
                VehicleTireOption: _this.vehicleTireOptionID,
                HasCatalogImage: true
            };
            _this.currentFilters = RideStylerShowcase.ObjectHelper.assign({}, _this.defaultFilters);
            return _this;
        }

        _createClass(RideStylerShowcaseTireSelector, [{
            key: "countResults",
            value: function countResults(filters) {
                return RideStylerShowcase.PromiseHelper.then(RideStylerShowcase.api.request("tire/countmodels", filters), function (response) {
                    return response.Count;
                });
            }
        }, {
            key: "getResults",
            value: function getResults(filters) {
                return RideStylerShowcase.PromiseHelper.then(RideStylerShowcase.api.request("tire/getmodeldescriptions", filters), function (response) {
                    return response.Models;
                });
            }
        }, {
            key: "productFilter",
            value: function productFilter(product) {
                return true;
            }
        }, {
            key: "productImageSource",
            value: function productImageSource(product) {
                return ridestyler.tire.image({
                    TireFitmentResourceType: 2 /* Catalog */
                    , TireModel: product.TireModelID,
                    Width: 100,
                    Height: 100,
                    PositionX: 1 /* Center */
                    , PositionY: 1 /* Center */
                    , IncludeShadow: true
                });
            }
        }, {
            key: "productImageLabels",
            value: function productImageLabels(product) {
                return {
                    primary: product.TireBrandName,
                    secondary: product.TireModelName,
                    tertiary: product.Attributes && product.Attributes.length ? product.Attributes.join(', ') : ''
                };
            }
        }]);

        return RideStylerShowcaseTireSelector;
    }(RideStylerShowcase.RideStylerShowcaseProductSelector);

    RideStylerShowcase.RideStylerShowcaseTireSelector = RideStylerShowcaseTireSelector;
})(RideStylerShowcase || (RideStylerShowcase = {}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvUmlkZVN0eWxlclNob3djYXNlVGlyZVNlbGVjdG9yLnRzIl0sIm5hbWVzIjpbIlJpZGVTdHlsZXJTaG93Y2FzZSIsIlJpZGVTdHlsZXJTaG93Y2FzZVRpcmVTZWxlY3RvciIsInNob3djYXNlSW5zdGFuY2UiLCJzdGF0ZURhdGEiLCJzdGF0ZSIsImdldERhdGEiLCJzdXBwb3J0ZWRWZWhpY2xlSW1hZ2VyeSIsImFuZ2xlZCIsInZlaGljbGVIYXNBbmdsZWRJbWFnZSIsInNpZGUiLCJ2ZWhpY2xlSGFzU2lkZUltYWdlIiwidmVoaWNsZVRpcmVPcHRpb25JRCIsImN1cnJlbnRWZWhpY2xlVGlyZU9wdGlvbklEIiwiZGVmYXVsdEZpbHRlcnMiLCJWZWhpY2xlVGlyZU9wdGlvbiIsIkhhc0NhdGFsb2dJbWFnZSIsImN1cnJlbnRGaWx0ZXJzIiwiT2JqZWN0SGVscGVyIiwiYXNzaWduIiwiZmlsdGVycyIsIlByb21pc2VIZWxwZXIiLCJ0aGVuIiwiYXBpIiwicmVxdWVzdCIsInJlc3BvbnNlIiwiQ291bnQiLCJNb2RlbHMiLCJwcm9kdWN0IiwicmlkZXN0eWxlciIsInRpcmUiLCJpbWFnZSIsIlRpcmVGaXRtZW50UmVzb3VyY2VUeXBlIiwiVGlyZU1vZGVsIiwiVGlyZU1vZGVsSUQiLCJXaWR0aCIsIkhlaWdodCIsIlBvc2l0aW9uWCIsIlBvc2l0aW9uWSIsIkluY2x1ZGVTaGFkb3ciLCJwcmltYXJ5IiwiVGlyZUJyYW5kTmFtZSIsInNlY29uZGFyeSIsIlRpcmVNb2RlbE5hbWUiLCJ0ZXJ0aWFyeSIsIkF0dHJpYnV0ZXMiLCJsZW5ndGgiLCJqb2luIiwiUmlkZVN0eWxlclNob3djYXNlUHJvZHVjdFNlbGVjdG9yIl0sIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFBLElBQVVBLGtCQUFWO0FBQUEsQ0FBQSxVQUFVQSxrQkFBVixFQUE0QjtBQUFBLFFBSXhCQyw4QkFKd0I7QUFBQTs7QUFjcEIsZ0RBQVlDLGdCQUFaLEVBQXVEO0FBQUE7O0FBQUEsd0tBQzdDQSxnQkFENkM7O0FBR25ELGdCQUFJQyxZQUFZRCxpQkFBaUJFLEtBQWpCLENBQXVCQyxPQUF2QixFQUFoQjtBQUVBLGtCQUFLQyx1QkFBTCxHQUErQjtBQUMzQkMsd0JBQVFKLFVBQVVLLHFCQURTO0FBRTNCQyxzQkFBTU4sVUFBVU87QUFGVyxhQUEvQjtBQUtBLGtCQUFLQyxtQkFBTCxHQUEyQlIsVUFBVVMsMEJBQXJDO0FBQ0Esa0JBQUtDLGNBQUwsR0FBc0I7QUFDbEJDLG1DQUFtQixNQUFLSCxtQkFETjtBQUVsQkksaUNBQWlCO0FBRkMsYUFBdEI7QUFJQSxrQkFBS0MsY0FBTCxHQUFzQmhCLG1CQUFBaUIsWUFBQSxDQUFhQyxNQUFiLENBQW9CLEVBQXBCLEVBQXdCLE1BQUtMLGNBQTdCLENBQXRCO0FBZm1EO0FBZ0J0RDs7QUE5Qm1CO0FBQUE7QUFBQSx5Q0FnQ0dNLE9BaENILEVBZ0MyQjtBQUMzQyx1QkFBT25CLG1CQUFBb0IsYUFBQSxDQUFjQyxJQUFkLENBQW1CckIsbUJBQUFzQixHQUFBLENBQUlDLE9BQUosQ0FBWSxrQkFBWixFQUFnQ0osT0FBaEMsQ0FBbkIsRUFBNkQ7QUFBQSwyQkFBWUssU0FBU0MsS0FBckI7QUFBQSxpQkFBN0QsQ0FBUDtBQUNIO0FBbENtQjtBQUFBO0FBQUEsdUNBbUNDTixPQW5DRCxFQW1DeUI7QUFDekMsdUJBQU9uQixtQkFBQW9CLGFBQUEsQ0FBY0MsSUFBZCxDQUFtQnJCLG1CQUFBc0IsR0FBQSxDQUFJQyxPQUFKLENBQVksMkJBQVosRUFBeUNKLE9BQXpDLENBQW5CLEVBQXNFO0FBQUEsMkJBQVlLLFNBQVNFLE1BQXJCO0FBQUEsaUJBQXRFLENBQVA7QUFDSDtBQXJDbUI7QUFBQTtBQUFBLDBDQXNDSUMsT0F0Q0osRUFzQ3NDO0FBQ3RELHVCQUFPLElBQVA7QUFDSDtBQXhDbUI7QUFBQTtBQUFBLCtDQXlDU0EsT0F6Q1QsRUF5QzJDO0FBQzNELHVCQUFPQyxXQUFXQyxJQUFYLENBQWdCQyxLQUFoQixDQUFzQjtBQUN6QkMsNkNBQXVCLENBREUsQ0FDRjtBQURFLHNCQUV6QkMsV0FBV0wsUUFBUU0sV0FGTTtBQUd6QkMsMkJBQU8sR0FIa0I7QUFJekJDLDRCQUFRLEdBSmlCO0FBS3pCQywrQkFBUyxDQUxnQixDQUtoQjtBQUxnQixzQkFNekJDLFdBQVMsQ0FOZ0IsQ0FNaEI7QUFOZ0Isc0JBT3pCQyxlQUFlO0FBUFUsaUJBQXRCLENBQVA7QUFTSDtBQW5EbUI7QUFBQTtBQUFBLCtDQW9EU1gsT0FwRFQsRUFvRDJDO0FBQzNELHVCQUFPO0FBQ0hZLDZCQUFTWixRQUFRYSxhQURkO0FBRUhDLCtCQUFXZCxRQUFRZSxhQUZoQjtBQUdIQyw4QkFBVWhCLFFBQVFpQixVQUFSLElBQXNCakIsUUFBUWlCLFVBQVIsQ0FBbUJDLE1BQXpDLEdBQ05sQixRQUFRaUIsVUFBUixDQUFtQkUsSUFBbkIsQ0FBd0IsSUFBeEIsQ0FETSxHQUMwQjtBQUpqQyxpQkFBUDtBQU1IO0FBM0RtQjs7QUFBQTtBQUFBLE1BSTRCOUMsbUJBQUErQyxpQ0FKNUI7O0FBSVgvQyx1QkFBQUMsOEJBQUEsR0FBOEJBLDhCQUE5QjtBQTBEaEIsQ0E5REQsRUFBVUQsdUJBQUFBLHFCQUFrQixFQUFsQixDQUFWIiwiZmlsZSI6InNjcmlwdHMvY29tcG9uZW50cy9SaWRlU3R5bGVyU2hvd2Nhc2VUaXJlU2VsZWN0b3IuanMiLCJzb3VyY2VzQ29udGVudCI6WyJuYW1lc3BhY2UgUmlkZVN0eWxlclNob3djYXNlIHtcbiAgICBpbXBvcnQgVGlyZUZpbHRlck1vZGVsID0gcmlkZXN0eWxlci5SZXF1ZXN0cy5UaXJlRmlsdGVyTW9kZWw7XG4gICAgaW1wb3J0IFRpcmVNb2RlbERlc2NyaXB0aW9uTW9kZWwgPSByaWRlc3R5bGVyLkRlc2NyaXB0aW9ucy5UaXJlTW9kZWxEZXNjcmlwdGlvbk1vZGVsO1xuXG4gICAgZXhwb3J0IGNsYXNzIFJpZGVTdHlsZXJTaG93Y2FzZVRpcmVTZWxlY3RvciBleHRlbmRzIFJpZGVTdHlsZXJTaG93Y2FzZVByb2R1Y3RTZWxlY3RvcjxUaXJlTW9kZWxEZXNjcmlwdGlvbk1vZGVsLCBUaXJlRmlsdGVyTW9kZWw+IHtcbiAgICAgICAgcHJpdmF0ZSByZWFkb25seSB2ZWhpY2xlVGlyZU9wdGlvbklEOnN0cmluZztcbiAgICAgICAgcHJpdmF0ZSByZWFkb25seSBzdXBwb3J0ZWRWZWhpY2xlSW1hZ2VyeToge1xuICAgICAgICAgICAgYW5nbGVkOiBib29sZWFuO1xuICAgICAgICAgICAgc2lkZTogYm9vbGVhbjtcbiAgICAgICAgfTtcblxuICAgICAgICBwcm90ZWN0ZWQgcmVhZG9ubHkgZGVmYXVsdEZpbHRlcnM6IFRpcmVGaWx0ZXJNb2RlbDtcbiAgICAgICAgcHJvdGVjdGVkIGN1cnJlbnRGaWx0ZXJzOiBUaXJlRmlsdGVyTW9kZWw7XG5cbiAgICAgICAgY29uc3RydWN0b3Ioc2hvd2Nhc2VJbnN0YW5jZTpSaWRlU3R5bGVyU2hvd2Nhc2VJbnN0YW5jZSkge1xuICAgICAgICAgICAgc3VwZXIoc2hvd2Nhc2VJbnN0YW5jZSk7XG5cbiAgICAgICAgICAgIGxldCBzdGF0ZURhdGEgPSBzaG93Y2FzZUluc3RhbmNlLnN0YXRlLmdldERhdGEoKTtcblxuICAgICAgICAgICAgdGhpcy5zdXBwb3J0ZWRWZWhpY2xlSW1hZ2VyeSA9IHtcbiAgICAgICAgICAgICAgICBhbmdsZWQ6IHN0YXRlRGF0YS52ZWhpY2xlSGFzQW5nbGVkSW1hZ2UsXG4gICAgICAgICAgICAgICAgc2lkZTogc3RhdGVEYXRhLnZlaGljbGVIYXNTaWRlSW1hZ2VcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHRoaXMudmVoaWNsZVRpcmVPcHRpb25JRCA9IHN0YXRlRGF0YS5jdXJyZW50VmVoaWNsZVRpcmVPcHRpb25JRDtcbiAgICAgICAgICAgIHRoaXMuZGVmYXVsdEZpbHRlcnMgPSB7XG4gICAgICAgICAgICAgICAgVmVoaWNsZVRpcmVPcHRpb246IHRoaXMudmVoaWNsZVRpcmVPcHRpb25JRCxcbiAgICAgICAgICAgICAgICBIYXNDYXRhbG9nSW1hZ2U6IHRydWVcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRGaWx0ZXJzID0gT2JqZWN0SGVscGVyLmFzc2lnbih7fSwgdGhpcy5kZWZhdWx0RmlsdGVycyk7XG4gICAgICAgIH1cblxuICAgICAgICBwcm90ZWN0ZWQgY291bnRSZXN1bHRzKGZpbHRlcnM6IFRpcmVGaWx0ZXJNb2RlbCk6IHJpZGVzdHlsZXIuUmlkZVN0eWxlclByb21pc2U8bnVtYmVyLCByaWRlc3R5bGVyLlJpZGVTdHlsZXJBUElSZXNwb25zZT4ge1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2VIZWxwZXIudGhlbihhcGkucmVxdWVzdChcInRpcmUvY291bnRtb2RlbHNcIiwgZmlsdGVycyksIHJlc3BvbnNlID0+IHJlc3BvbnNlLkNvdW50KTtcbiAgICAgICAgfVxuICAgICAgICBwcm90ZWN0ZWQgZ2V0UmVzdWx0cyhmaWx0ZXJzOiBUaXJlRmlsdGVyTW9kZWwpOiByaWRlc3R5bGVyLlJpZGVTdHlsZXJQcm9taXNlPFRpcmVNb2RlbERlc2NyaXB0aW9uTW9kZWxbXSwgcmlkZXN0eWxlci5SaWRlU3R5bGVyQVBJUmVzcG9uc2U+IHtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlSGVscGVyLnRoZW4oYXBpLnJlcXVlc3QoXCJ0aXJlL2dldG1vZGVsZGVzY3JpcHRpb25zXCIsIGZpbHRlcnMpLCByZXNwb25zZSA9PiByZXNwb25zZS5Nb2RlbHMpO1xuICAgICAgICB9XG4gICAgICAgIHByb3RlY3RlZCBwcm9kdWN0RmlsdGVyKHByb2R1Y3Q6IFRpcmVNb2RlbERlc2NyaXB0aW9uTW9kZWwpOiBib29sZWFuIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHByb3RlY3RlZCBwcm9kdWN0SW1hZ2VTb3VyY2UocHJvZHVjdDogVGlyZU1vZGVsRGVzY3JpcHRpb25Nb2RlbCk6IHN0cmluZyB7XG4gICAgICAgICAgICByZXR1cm4gcmlkZXN0eWxlci50aXJlLmltYWdlKHtcbiAgICAgICAgICAgICAgICBUaXJlRml0bWVudFJlc291cmNlVHlwZTogcmlkZXN0eWxlci5EYXRhT2JqZWN0cy5UaXJlRml0bWVudFJlc291cmNlVHlwZS5DYXRhbG9nLFxuICAgICAgICAgICAgICAgIFRpcmVNb2RlbDogcHJvZHVjdC5UaXJlTW9kZWxJRCxcbiAgICAgICAgICAgICAgICBXaWR0aDogMTAwLFxuICAgICAgICAgICAgICAgIEhlaWdodDogMTAwLFxuICAgICAgICAgICAgICAgIFBvc2l0aW9uWDogcmlkZXN0eWxlci5SZXF1ZXN0cy5JbWFnZVBvc2l0aW9uLkNlbnRlcixcbiAgICAgICAgICAgICAgICBQb3NpdGlvblk6IHJpZGVzdHlsZXIuUmVxdWVzdHMuSW1hZ2VQb3NpdGlvbi5DZW50ZXIsXG4gICAgICAgICAgICAgICAgSW5jbHVkZVNoYWRvdzogdHJ1ZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcHJvdGVjdGVkIHByb2R1Y3RJbWFnZUxhYmVscyhwcm9kdWN0OiBUaXJlTW9kZWxEZXNjcmlwdGlvbk1vZGVsKTogeyBwcmltYXJ5OiBzdHJpbmc7IHNlY29uZGFyeT86IHN0cmluZzsgdGVydGlhcnk/OiBzdHJpbmc7IH0ge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBwcmltYXJ5OiBwcm9kdWN0LlRpcmVCcmFuZE5hbWUsXG4gICAgICAgICAgICAgICAgc2Vjb25kYXJ5OiBwcm9kdWN0LlRpcmVNb2RlbE5hbWUsXG4gICAgICAgICAgICAgICAgdGVydGlhcnk6IHByb2R1Y3QuQXR0cmlidXRlcyAmJiBwcm9kdWN0LkF0dHJpYnV0ZXMubGVuZ3RoID9cbiAgICAgICAgICAgICAgICAgICAgcHJvZHVjdC5BdHRyaWJ1dGVzLmpvaW4oJywgJykgOiAnJ1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgfVxufSJdfQ==

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var RideStylerShowcase;
(function (RideStylerShowcase) {
    var toggleButtonClass = 'ridestyler-showcase-toggle-button';
    var optionClass = toggleButtonClass + '-option';
    var optionActiveClass = optionClass + '-active';

    var RideStylerShowcaseToggleButton = function (_RideStylerShowcase$C) {
        _inherits(RideStylerShowcaseToggleButton, _RideStylerShowcase$C);

        function RideStylerShowcaseToggleButton() {
            _classCallCheck(this, RideStylerShowcaseToggleButton);

            return _possibleConstructorReturn(this, (RideStylerShowcaseToggleButton.__proto__ || Object.getPrototypeOf(RideStylerShowcaseToggleButton)).apply(this, arguments));
        }

        _createClass(RideStylerShowcaseToggleButton, [{
            key: 'initializeComponent',

            /**
             * Create the DOM for the toggle button
             *
             * @override
             */
            value: function initializeComponent() {
                var _this2 = this;

                this.component = RideStylerShowcase.HTMLHelper.createElement({
                    className: toggleButtonClass
                });
                this.component.addEventListener('click', function (clickEvent) {
                    return _this2.onClicked(clickEvent);
                });
            }
            /**
             * Called when the toggle button is clicked on
             */

        }, {
            key: 'onClicked',
            value: function onClicked(clickEvent) {
                var target = clickEvent.target;
                if (!target.classList.contains(optionClass)) return; // The click was not on an option
                if (target.classList.contains(optionActiveClass)) return; // The click was on an active option
                this.selectOptionElement(target);
            }
        }, {
            key: 'selectOptionElement',
            value: function selectOptionElement(optionElement) {
                var triggerChange = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;

                var newValue = optionElement.value;
                if (this.value === newValue) return;
                this.value = newValue;
                for (var childIndex = 0; childIndex < this.component.children.length; childIndex++) {
                    var childOptionElement = this.component.children[childIndex];
                    childOptionElement.classList.toggle(optionActiveClass, childOptionElement === optionElement);
                }
                if (typeof this.onChanged === 'function' && triggerChange) this.onChanged(newValue);
            }
        }, {
            key: 'setValue',
            value: function setValue(value) {
                if (this.value === value) return;
                for (var childIndex = 0; childIndex < this.component.children.length; childIndex++) {
                    var childOptionElement = this.component.children[childIndex];
                    if (childOptionElement.value === value) {
                        this.selectOptionElement(childOptionElement);
                        return;
                    }
                }
            }
        }, {
            key: 'setOptions',
            value: function setOptions(options) {
                RideStylerShowcase.HTMLHelper.empty(this.component);
                this.value = undefined;
                var _iteratorNormalCompletion = true;
                var _didIteratorError = false;
                var _iteratorError = undefined;

                try {
                    for (var _iterator = options[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
                        var option = _step.value;

                        this.addOption(option);
                    }
                } catch (err) {
                    _didIteratorError = true;
                    _iteratorError = err;
                } finally {
                    try {
                        if (!_iteratorNormalCompletion && _iterator.return) {
                            _iterator.return();
                        }
                    } finally {
                        if (_didIteratorError) {
                            throw _iteratorError;
                        }
                    }
                }
            }
        }, {
            key: 'addOption',
            value: function addOption(option) {
                var optionElement = RideStylerShowcase.ObjectHelper.assign(RideStylerShowcase.HTMLHelper.createElement('span', {
                    className: optionClass,
                    text: option.label,
                    appendTo: this.component
                }), {
                    value: option.value
                });
                if (this.value === undefined) this.selectOptionElement(optionElement, false);
            }
        }]);

        return RideStylerShowcaseToggleButton;
    }(RideStylerShowcase.ComponentBase);

    RideStylerShowcase.RideStylerShowcaseToggleButton = RideStylerShowcaseToggleButton;
})(RideStylerShowcase || (RideStylerShowcase = {}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvUmlkZVN0eWxlclNob3djYXNlVG9nZ2xlQnV0dG9uLnRzIl0sIm5hbWVzIjpbIlJpZGVTdHlsZXJTaG93Y2FzZSIsInRvZ2dsZUJ1dHRvbkNsYXNzIiwib3B0aW9uQ2xhc3MiLCJvcHRpb25BY3RpdmVDbGFzcyIsIlJpZGVTdHlsZXJTaG93Y2FzZVRvZ2dsZUJ1dHRvbiIsImNvbXBvbmVudCIsIkhUTUxIZWxwZXIiLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NOYW1lIiwiYWRkRXZlbnRMaXN0ZW5lciIsIm9uQ2xpY2tlZCIsImNsaWNrRXZlbnQiLCJ0YXJnZXQiLCJjbGFzc0xpc3QiLCJjb250YWlucyIsInNlbGVjdE9wdGlvbkVsZW1lbnQiLCJvcHRpb25FbGVtZW50IiwidHJpZ2dlckNoYW5nZSIsIm5ld1ZhbHVlIiwidmFsdWUiLCJjaGlsZEluZGV4IiwiY2hpbGRyZW4iLCJsZW5ndGgiLCJjaGlsZE9wdGlvbkVsZW1lbnQiLCJ0b2dnbGUiLCJvbkNoYW5nZWQiLCJvcHRpb25zIiwiZW1wdHkiLCJ1bmRlZmluZWQiLCJvcHRpb24iLCJhZGRPcHRpb24iLCJPYmplY3RIZWxwZXIiLCJhc3NpZ24iLCJ0ZXh0IiwibGFiZWwiLCJhcHBlbmRUbyIsIkNvbXBvbmVudEJhc2UiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUEsSUFBVUEsa0JBQVY7QUFBQSxDQUFBLFVBQVVBLGtCQUFWLEVBQTRCO0FBS3hCLFFBQU1DLG9CQUFvQixtQ0FBMUI7QUFDQSxRQUFNQyxjQUFjRCxvQkFBb0IsU0FBeEM7QUFDQSxRQUFNRSxvQkFBb0JELGNBQWMsU0FBeEM7O0FBUHdCLFFBUXhCRSw4QkFSd0I7QUFBQTs7QUFBQTtBQUFBOztBQUFBO0FBQUE7O0FBQUE7QUFBQTs7QUFtQnBCOzs7OztBQW5Cb0Isa0RBd0JTO0FBQUE7O0FBQ3pCLHFCQUFLQyxTQUFMLEdBQWlCTCxtQkFBQU0sVUFBQSxDQUFXQyxhQUFYLENBQXlCO0FBQ3RD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ZVMsU0FBbkIsRUFBOEIsS0FBS2IsbUJBQUwsQ0FBeUJDLGFBQXpCLEVBQXdDLEtBQXhDO0FBQ2pDO0FBM0ZtQjs7QUFBQTtBQUFBLE1BUTRCaEIsbUJBQUFvQyxhQVI1Qjs7QUFRWHBDLHVCQUFBSSw4QkFBQSxHQUE4QkEsOEJBQTlCO0FBb0doQixDQTVHRCxFQUFVSix1QkFBQUEscUJBQWtCLEVBQWxCLENBQVYiLCJmaWxlIjoic2NyaXB0cy9jb21wb25lbnRzL1JpZGVTdHlsZXJTaG93Y2FzZVRvZ2dsZUJ1dHRvbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIm5hbWVzcGFjZSBSaWRlU3R5bGVyU2hvd2Nhc2Uge1xuICAgIGltcG9ydCBPcHRpb24gPSBSaWRlU3R5bGVyU2hvd2Nhc2VUb2dnbGVCdXR0b24uT3B0aW9uO1xuICAgIGltcG9ydCBPcHRpb25FbGVtZW50ID0gUmlkZVN0eWxlclNob3djYXNlVG9nZ2xlQnV0dG9uLk9wdGlvbkVsZW1lbnQ7XG4gICAgaW1wb3J0IE9wdGlvbkNoYW5nZWRDYWxsYmFjayA9IFJpZGVTdHlsZXJTaG93Y2FzZVRvZ2dsZUJ1dHRvbi5PcHRpb25DaGFuZ2VkQ2FsbGJhY2s7XG5cbiAgICBjb25zdCB0b2dnbGVCdXR0b25DbGFzcyA9ICdyaWRlc3R5bGVyLXNob3djYXNlLXRvZ2dsZS1idXR0b24nO1xuICAgIGNvbnN0IG9wdGlvbkNsYXNzID0gdG9nZ2xlQnV0dG9uQ2xhc3MgKyAnLW9wdGlvbic7XG4gICAgY29uc3Qgb3B0aW9uQWN0aXZlQ2xhc3MgPSBvcHRpb25DbGFzcyArICctYWN0aXZlJztcbiAgICBleHBvcnQgY2xhc3MgUmlkZVN0eWxlclNob3djYXNlVG9nZ2xlQnV0dG9uIGV4dGVuZHMgQ29tcG9uZW50QmFzZSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgY3VycmVudCB2YWx1ZSBvZiB0aGUgdG9nZ2xlIGJ1dHRvblxuICAgICAgICAgKi9cbiAgICAgICAgcHVibGljIHZhbHVlOnN0cmluZztcblxuICAgICAgICAvKipcbiAgICAgICAgICogQXR0YWNoIGEgY2hhbmdlIGZ1bmN0aW9uIHRvIGNhbGwgd2hlbiB0aGUgdmFsdWUgaXMgY2hhbmdlZFxuICAgICAgICAgKi9cbiAgICAgICAgcHVibGljIG9uQ2hhbmdlZDpPcHRpb25DaGFuZ2VkQ2FsbGJhY2s7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENyZWF0ZSB0aGUgRE9NIGZvciB0aGUgdG9nZ2xlIGJ1dHRvblxuICAgICAgICAgKiBcbiAgICAgICAgICogQG92ZXJyaWRlXG4gICAgICAgICAqL1xuICAgICAgICBwcm90ZWN0ZWQgaW5pdGlhbGl6ZUNvbXBvbmVudCgpIHtcbiAgICAgICAgICAgIHRoaXMuY29tcG9uZW50ID0gSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IHRvZ2dsZUJ1dHRvbkNsYXNzXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdGhpcy5jb21wb25lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjbGlja0V2ZW50ID0+IHRoaXMub25DbGlja2VkKGNsaWNrRXZlbnQpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDYWxsZWQgd2hlbiB0aGUgdG9nZ2xlIGJ1dHRvbiBpcyBjbGlja2VkIG9uXG4gICAgICAgICAqL1xuICAgICAgICBwcml2YXRlIG9uQ2xpY2tlZChjbGlja0V2ZW50Ok1vdXNlRXZlbnQpIHtcbiAgICAgICAgICAgIGNvbnN0IHRhcmdldDpIVE1MRWxlbWVudCA9IGNsaWNrRXZlbnQudGFyZ2V0IGFzIEhUTUxFbGVtZW50O1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoIXRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMob3B0aW9uQ2xhc3MpKSByZXR1cm47IC8vIFRoZSBjbGljayB3YXMgbm90IG9uIGFuIG9wdGlvblxuICAgICAgICAgICAgaWYgKHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMob3B0aW9uQWN0aXZlQ2xhc3MpKSByZXR1cm47IC8vIFRoZSBjbGljayB3YXMgb24gYW4gYWN0aXZlIG9wdGlvblxuXG4gICAgICAgICAgICB0aGlzLnNlbGVjdE9wdGlvbkVsZW1lbnQodGFyZ2V0IGFzIE9wdGlvbkVsZW1lbnQpO1xuICAgICAgICB9XG5cbiAgICAgICAgcHJpdmF0ZSBzZWxlY3RPcHRpb25FbGVtZW50KG9wdGlvbkVsZW1lbnQ6T3B0aW9uRWxlbWVudCwgdHJpZ2dlckNoYW5nZTpib29sZWFuID0gdHJ1ZSkge1xuICAgICAgICAgICAgY29uc3QgbmV3VmFsdWU6c3RyaW5nID0gb3B0aW9uRWxlbWVudC52YWx1ZTtcblxuICAgICAgICAgICAgaWYgKHRoaXMudmFsdWUgPT09IG5ld1ZhbHVlKSByZXR1cm47XG5cbiAgICAgICAgICAgIHRoaXMudmFsdWUgPSBuZXdWYWx1ZTtcblxuICAgICAgICAgICAgZm9yIChsZXQgY2hpbGRJbmRleCA9IDA7IGNoaWxkSW5kZXggPCB0aGlzLmNvbXBvbmVudC5jaGlsZHJlbi5sZW5ndGg7IGNoaWxkSW5kZXgrKykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNoaWxkT3B0aW9uRWxlbWVudDpPcHRpb25FbGVtZW50ID0gdGhpcy5jb21wb25lbnQuY2hpbGRyZW5bY2hpbGRJbmRleF0gYXMgT3B0aW9uRWxlbWVudDtcbiAgICAgICAgICAgICAgICBjaGlsZE9wdGlvbkVsZW1lbnQuY2xhc3NMaXN0LnRvZ2dsZShvcHRpb25BY3RpdmVDbGFzcywgY2hpbGRPcHRpb25FbGVtZW50ID09PSBvcHRpb25FbGVtZW50KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHR5cGVvZiB0aGlzLm9uQ2hhbmdlZCA9PT0gJ2Z1bmN0aW9uJyAmJiB0cmlnZ2VyQ2hhbmdlKSB0aGlzLm9uQ2hhbmdlZChuZXdWYWx1ZSk7XG4gICAgICAgIH1cblxuICAgICAgICBwdWJsaWMgc2V0VmFsdWUodmFsdWU6c3RyaW5nKSB7XG4gICAgICAgICAgICBpZiAodGhpcy52YWx1ZSA9PT0gdmFsdWUpIHJldHVybjtcblxuICAgICAgICAgICAgZm9yIChsZXQgY2hpbGRJbmRleCA9IDA7IGNoaWxkSW5kZXggPCB0aGlzLmNvbXBvbmVudC5jaGlsZHJlbi5sZW5ndGg7IGNoaWxkSW5kZXgrKykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNoaWxkT3B0aW9uRWxlbWVudDpPcHRpb25FbGVtZW50ID0gdGhpcy5jb21wb25lbnQuY2hpbGRyZW5bY2hpbGRJbmRleF0gYXMgT3B0aW9uRWxlbWVudDtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBpZiAoY2hpbGRPcHRpb25FbGVtZW50LnZhbHVlID09PSB2YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdE9wdGlvbkVsZW1lbnQoY2hpbGRPcHRpb25FbGVtZW50KTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHB1YmxpYyBzZXRPcHRpb25zKG9wdGlvbnM6T3B0aW9uW10pIHtcbiAgICAgICAgICAgIEhUTUxIZWxwZXIuZW1wdHkodGhpcy5jb21wb25lbnQpO1xuICAgICAgICAgICAgdGhpcy52YWx1ZSA9IHVuZGVmaW5lZDtcblxuICAgICAgICAgICAgZm9yIChjb25zdCBvcHRpb24gb2Ygb3B0aW9ucykge1xuICAgICAgICAgICAgICAgIHRoaXMuYWRkT3B0aW9uKG9wdGlvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBwdWJsaWMgYWRkT3B0aW9uKG9wdGlvbjpPcHRpb24pIHtcbiAgICAgICAgICAgIGNvbnN0IG9wdGlvbkVsZW1lbnQ6T3B0aW9uRWxlbWVudCA9IE9iamVjdEhlbHBlci5hc3NpZ24oSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KCdzcGFuJywge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogb3B0aW9uQ2xhc3MsXG4gICAgICAgICAgICAgICAgdGV4dDogb3B0aW9uLmxhYmVsLFxuICAgICAgICAgICAgICAgIGFwcGVuZFRvOiB0aGlzLmNvbXBvbmVudFxuICAgICAgICAgICAgfSksIHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogb3B0aW9uLnZhbHVlXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgaWYgKHRoaXMudmFsdWUgPT09IHVuZGVmaW5lZCkgdGhpcy5zZWxlY3RPcHRpb25FbGVtZW50KG9wdGlvbkVsZW1lbnQsIGZhbHNlKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGV4cG9ydCBuYW1lc3BhY2UgUmlkZVN0eWxlclNob3djYXNlVG9nZ2xlQnV0dG9uIHtcbiAgICAgICAgZXhwb3J0IGludGVyZmFjZSBPcHRpb25FbGVtZW50IGV4dGVuZHMgSFRNTEVsZW1lbnQge1xuICAgICAgICAgICAgdmFsdWU6IHN0cmluZztcbiAgICAgICAgfVxuXG4gICAgICAgIGV4cG9ydCBpbnRlcmZhY2UgT3B0aW9uQ2hhbmdlZENhbGxiYWNrIHtcbiAgICAgICAgICAgICh2YWx1ZTpzdHJpbmcpOnZvaWQ7XG4gICAgICAgIH1cblxuICAgICAgICBleHBvcnQgaW50ZXJmYWNlIE9wdGlvbiB7XG4gICAgICAgICAgICBsYWJlbDpzdHJpbmc7XG4gICAgICAgICAgICB2YWx1ZTpzdHJpbmc7XG4gICAgICAgIH1cbiAgICB9XG59Il19

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var RideStylerShowcase;
(function (RideStylerShowcase) {
    var RideStylerShowcaseVehicleSelection = function (_RideStylerShowcase$M) {
        _inherits(RideStylerShowcaseVehicleSelection, _RideStylerShowcase$M);

        function RideStylerShowcaseVehicleSelection() {
            _classCallCheck(this, RideStylerShowcaseVehicleSelection);

            return _possibleConstructorReturn(this, (RideStylerShowcaseVehicleSelection.__proto__ || Object.getPrototypeOf(RideStylerShowcaseVehicleSelection)).apply(this, arguments));
        }

        _createClass(RideStylerShowcaseVehicleSelection, [{
            key: 'initializeMainComponent',
            value: function initializeMainComponent() {
                var _this2 = this;

                this.modal = new RideStylerVehicleSelectionModal({
                    container: function container() {
                        return _this2.component.parentElement;
                    },
                    callback: function callback(selection) {
                        if (selection.FinalSelectionMade) {
                            _this2.onVehicleSelected(selection.Vehicle);
                        }
                    },
                    ImageSettings: function ImageSettings(options) {
                        return _this2.generateVehiclePreviewSettings();
                    },
                    IncludeOETireOption: true
                });
                RideStylerShowcase.api.afterAuthenticated(function () {
                    return _this2.onAuthenticated();
                });
            }
        }, {
            key: 'buildComponent',
            value: function buildComponent(container) {
                var _this3 = this;

                //URL CHECK LOGIC
                container.classList.add('ridestyler-showcase-vehicle-selection');
                this.contentContainer = RideStylerShowcase.HTMLHelper.createElement('div', {
                    className: 'ridestyler-showcase-content ridestyler-showcase-vehicle-selection-content',
                    appendTo: container
                });
                this.buildCopy();
                this.chooseVehicleButton = RideStylerShowcase.HTMLHelper.createButton({
                    text: RideStylerShowcase.strings.getString('select-your-vehicle'),
                    appendTo: this.contentContainer,
                    disabled: true,
                    large: true,
                    id: 'ridestyler-showcase-select-your-vehicle',
                    wrap: RideStylerShowcase.HTMLHelper.createElementWithID('div', 'ridestyler-showcase-select-your-vehicle-wrapper')
                });
                this.chooseVehicleButton.addEventListener('click', function () {
                    _this3.modal.Show();
                });
            }
        }, {
            key: 'buildCopy',
            value: function buildCopy() {
                function emboldenFirstWord(string) {
                    var firstWord = RideStylerShowcase.StringHelper.getFirstWord(string);
                    var remainingString = string.substr(firstWord.length);
                    return [RideStylerShowcase.HTMLHelper.createElementWithText('strong', firstWord), RideStylerShowcase.HTMLHelper.createTextElement(remainingString)];
                }
                var visualizeString = RideStylerShowcase.HTMLHelper.createElement('h1', {
                    append: emboldenFirstWord(RideStylerShowcase.strings.getString("vehicle-select-visualize-intro")),
                    appendTo: this.contentContainer
                });
                var shareString = RideStylerShowcase.HTMLHelper.createElement('h1', {
                    append: emboldenFirstWord(RideStylerShowcase.strings.getString("vehicle-select-share-intro")),
                    appendTo: this.contentContainer
                });
            }
        }, {
            key: 'onAuthenticated',
            value: function onAuthenticated() {
                var _this4 = this;

                this.chooseVehicleButton.disabled = false;
                RideStylerShowcase.api.request("wheel/getmodels", {
                    Count: 3,
                    HasCatalogImage: true
                }).done(function (response) {
                    return _this4.showWheels(response.Models);
                });
            }
        }, {
            key: 'onVehicleSelected',
            value: function onVehicleSelected(selection) {
                // The user has selected a vehicle using the vehicle selection modal.
                // Now we need to obtain a OE tire option for them.
                this.events.trigger("vehicle-selected", selection);
            }
            /**
             * Show the passed in wheel models in the wheel showcase section of the vehicle selection screen
             * @param models The wheel models to show
             */

        }, {
            key: 'showWheels',
            value: function showWheels(models) {
                var wheelContainer = void 0;
                if (!this.wheelContainer) {
                    wheelContainer = this.wheelContainer = RideStylerShowcase.HTMLHelper.createElement('div', {
                        className: 'ridestyler-showcase-vehicle-selection-wheel-showcase',
                        appendTo: this.component
                    });
                } else {
                    wheelContainer = this.wheelContainer;
                    RideStylerShowcase.HTMLHelper.empty(wheelContainer);
                }
                var modelImages = [];
                var onModelImageLoad = function onModelImageLoad() {
                    var _iteratorNormalCompletion = true;
                    var _didIteratorError = false;
                    var _iteratorError = undefined;

                    try {
                        for (var _iterator = modelImages[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
                            var modelImage = _step.value;

                            if (!modelImage.complete) return;
                        }
                    } catch (err) {
                        _didIteratorError = true;
                        _iteratorError = err;
                    } finally {
                        try {
                            if (!_iteratorNormalCompletion && _iterator.return) {
                                _iterator.return();
                            }
                        } finally {
                            if (_didIteratorError) {
                                throw _iteratorError;
                            }
                        }
                    }

                    wheelContainer.style.opacity = '1';
                };
                var _iteratorNormalCompletion2 = true;
                var _didIteratorError2 = false;
                var _iteratorError2 = undefined;

                try {
                    for (var _iterator2 = models[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {
                        var model = _step2.value;

                        var modelImageSource = ridestyler.wheel.image({
                            WheelModel: model.WheelModelID,
                            Width: 400,
                            Height: 400,
                            PositionX: 1 /* Center */
                            , PositionY: 1 /* Center */
                            , WheelFitmentResourceType: 3 /* Catalog */
                            , IncludeShadow: true
                        });
                        var modelImage = RideStylerShowcase.HTMLHelper.createElement('img');
                        modelImage.className = 'ridestyler-showcase-vehicle-selection-wheel-showcase-image';
                        modelImage.addEventListener('load', onModelImageLoad);
                        modelImages.push();
                        modelImage.src = modelImageSource;
                        wheelContainer.appendChild(modelImage);
                    }
                } catch (err) {
                    _didIteratorError2 = true;
                    _iteratorError2 = err;
                } finally {
                    try {
                        if (!_iteratorNormalCompletion2 && _iterator2.return) {
                            _iterator2.return();
                        }
                    } finally {
                        if (_didIteratorError2) {
                            throw _iteratorError2;
                        }
                    }
                }
            }
        }, {
            key: 'generateVehiclePreviewSettings',
            value: function generateVehiclePreviewSettings() {
                var scale = Math.max(window.devicePixelRatio || 0, 1);
                var container = this.component;
                var widthToHeight = .5;
                var maxRequestResolution = 1920;
                // Width is 80% of the container width
                var width = container.clientWidth * .80;
                // Width is 500 if not found
                if (!width) width = 500;
                // Apply our scale
                width *= scale;
                // Limit width to max request resolution
                if (width > maxRequestResolution) width = maxRequestResolution;
                // Determine height
                var height = width * widthToHeight;
                return {
                    Width: ~~width,
                    Height: ~~height
                };
            }
        }]);

        return RideStylerShowcaseVehicleSelection;
    }(RideStylerShowcase.MainComponentBase);

    RideStylerShowcase.RideStylerShowcaseVehicleSelection = RideStylerShowcaseVehicleSelection;
})(RideStylerShowcase || (RideStylerShowcase = {}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvUmlkZVN0eWxlclNob3djYXNlVmVoaWNsZVNlbGVjdGlvbi50cyJdLCJuYW1lcyI6WyJSaWRlU3R5bGVyU2hvd2Nhc2UiLCJSaWRlU3R5bGVyU2hvd2Nhc2VWZWhpY2xlU2VsZWN0aW9uIiwibW9kYWwiLCJSaWRlU3R5bGVyVmVoaWNsZVNlbGVjdGlvbk1vZGFsIiwiY29udGFpbmVyIiwiY29tcG9uZW50IiwicGFyZW50RWxlbWVudCIsImNhbGxiYWNrIiwic2VsZWN0aW9uIiwiRmluYWxTZWxlY3Rpb25NYWRlIiwib25WZWhpY2xlU2VsZWN0ZWQiLCJWZWhpY2xlIiwiSW1hZ2VTZXR0aW5ncyIsImdlbmVyYXRlVmVoaWNsZVByZXZpZXdTZXR0aW5ncyIsIkluY2x1ZGVPRVRpcmVPcHRpb24iLCJhcGkiLCJhZnRlckF1dGhlbnRpY2F0ZWQiLCJvbkF1dGhlbnRpY2F0ZWQiLCJjbGFzc0xpc3QiLCJhZGQiLCJjb250ZW50Q29udGFpbmVyIiwiSFRNTEhlbHBlciIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc05hbWUiLCJhcHBlbmRUbyIsImJ1aWxkQ29weSIsImNob29zZVZlaGljbGVCdXR0b24iLCJjcmVhdGVCdXR0b24iLCJ0ZXh0Iiwic3RyaW5ncyIsImdldFN0cmluZyIsImRpc2FibGVkIiwibGFyZ2UiLCJpZCIsIndyYXAiLCJjcmVhdGVFbGVtZW50V2l0aElEIiwiYWRkRXZlbnRMaXN0ZW5lciIsIlNob3ciLCJlbWJvbGRlbkZpcnN0V29yZCIsInN0cmluZyIsImZpcnN0V29yZCIsIlN0cmluZ0hlbHBlciIsImdldEZpcnN0V29yZCIsInJlbWFpbmluZ1N0cmluZyIsInN1YnN0ciIsImxlbmd0aCIsImNyZWF0ZUVsZW1lbnRXaXRoVGV4dCIsImNyZWF0ZVRleHRFbGVtZW50IiwidmlzdWFsaXplU3RyaW5nIiwiYXBwZW5kIiwic2hhcmVTdHJpbmciLCJyZXF1ZXN0IiwiQ291bnQiLCJIYXNDYXRhbG9nSW1hZ2UiLCJkb25lIiwic2hvd1doZWVscyIsInJlc3BvbnNlIiwiTW9kZWxzIiwiZXZlbnRzIiwidHJpZ2dlciIsIm1vZGVscyIsIndoZWVsQ29udGFpbmVyIiwiZW1wdHkiLCJtb2RlbEltYWdlcyIsIm9uTW9kZWxJbWFnZUxvYWQiLCJtb2RlbEltYWdlIiwiY29tcGxldGUiLCJzdHlsZSIsIm9wYWNpdHkiLCJtb2RlbCIsIm1vZGVsSW1hZ2VTb3VyY2UiLCJyaWRlc3R5bGVyIiwid2hlZWwiLCJpbWFnZSIsIldoZWVsTW9kZWwiLCJXaGVlbE1vZGVsSUQiLCJXaWR0aCIsIkhlaWdodCIsIlBvc2l0aW9uWCIsIlBvc2l0aW9uWSIsIldoZWVsRml0bWVudFJlc291cmNlVHlwZSIsIkluY2x1ZGVTaGFkb3ciLCJwdXNoIiwic3JjIiwiYXBwZW5kQ2hpbGQiLCJzY2FsZSIsIk1hdGgiLCJtYXgiLCJ3aW5kb3ciLCJkZXZpY2VQaXhlbFJhdGlvIiwid2lkdGhUb0hlaWdodCIsIm1heFJlcXVlc3RSZXNvbHV0aW9uIiwid2lkdGgiLCJjbGllbnRXaWR0aCIsImhlaWdodCIsIk1haW5Db21wb25lbnRCYXNlIl0sIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFBLElBQVVBLGtCQUFWO0FBQUEsQ0FBQSxVQUFVQSxrQkFBVixFQUE0QjtBQUFBLFFBQ3hCQyxrQ0FEd0I7QUFBQTs7QUFBQTtBQUFBOztBQUFBO0FBQUE7O0FBQUE7QUFBQTtBQUFBLHNEQU9hO0FBQUE7O0FBQzdCLHFCQUFLQyxLQUFMLEdBQWEsSUFBSUMsK0JBQUosQ0FBb0M7QUFDN0NDLCtCQUFXO0FBQUEsK0JBQU0sT0FBS0MsU0FBTCxDQUFlQyxhQUFyQjtBQUFBLHFCQURrQztBQUU3Q0MsOEJBQVUsa0JBQUNDLFNBQUQsRUFBYztBQUNwQiw0QkFBSUEsVUFBVUMsa0JBQWQsRUFBa0M7QUFDOUIsbUNBQUtDLGlCQUFMLENBQXVCRixVQUFVRyxPQUFqQztBQUNIO0FBQ0oscUJBTjRDO0FBTzdDQyxtQ0FBZTtBQUFBLCtCQUFXLE9BQUtDLDhCQUFMLEVB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cHRzL2NvbXBvbmVudHMvUmlkZVN0eWxlclNob3djYXNlVmVoaWNsZVNlbGVjdGlvbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIm5hbWVzcGFjZSBSaWRlU3R5bGVyU2hvd2Nhc2Uge1xyXG4gICAgZXhwb3J0IGNsYXNzIFJpZGVTdHlsZXJTaG93Y2FzZVZlaGljbGVTZWxlY3Rpb24gZXh0ZW5kcyBNYWluQ29tcG9uZW50QmFzZSB7XHJcbiAgICAgICAgcHJpdmF0ZSBjaG9vc2VWZWhpY2xlQnV0dG9uOkhUTUxCdXR0b25FbGVtZW50O1xyXG4gICAgICAgIHByaXZhdGUgY29udGVudENvbnRhaW5lcjpIVE1MRWxlbWVudDtcclxuICAgICAgICBwcml2YXRlIHdoZWVsQ29udGFpbmVyOkhUTUxFbGVtZW50O1xyXG4gICAgICAgIHByaXZhdGUgbW9kYWw6UmlkZVN0eWxlclZlaGljbGVTZWxlY3Rpb25Nb2RhbDtcclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIGluaXRpYWxpemVNYWluQ29tcG9uZW50KCkge1xyXG4gICAgICAgICAgICB0aGlzLm1vZGFsID0gbmV3IFJpZGVTdHlsZXJWZWhpY2xlU2VsZWN0aW9uTW9kYWwoe1xyXG4gICAgICAgICAgICAgICAgY29udGFpbmVyOiAoKSA9PiB0aGlzLmNvbXBvbmVudC5wYXJlbnRFbGVtZW50LFxyXG4gICAgICAgICAgICAgICAgY2FsbGJhY2s6IChzZWxlY3Rpb24pID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoc2VsZWN0aW9uLkZpbmFsU2VsZWN0aW9uTWFkZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9uVmVoaWNsZVNlbGVjdGVkKHNlbGVjdGlvbi5WZWhpY2xlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgSW1hZ2VTZXR0aW5nczogb3B0aW9ucyA9PiB0aGlzLmdlbmVyYXRlVmVoaWNsZVByZXZpZXdTZXR0aW5ncygpLFxyXG4gICAgICAgICAgICAgICAgSW5jbHVkZU9FVGlyZU9wdGlvbjogdHJ1ZVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGFwaS5hZnRlckF1dGhlbnRpY2F0ZWQoKCkgPT4gdGhpcy5vbkF1dGhlbnRpY2F0ZWQoKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgYnVpbGRDb21wb25lbnQoY29udGFpbmVyOiBIVE1MRWxlbWVudCk6IHZvaWQge1xyXG5cclxuICAgICAgICAgICAgLy9VUkwgQ0hFQ0sgTE9HSUNcclxuXHJcbiAgICAgICAgICAgIGNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdyaWRlc3R5bGVyLXNob3djYXNlLXZlaGljbGUtc2VsZWN0aW9uJyk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmNvbnRlbnRDb250YWluZXIgPSBIVE1MSGVscGVyLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcclxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ3JpZGVzdHlsZXItc2hvd2Nhc2UtY29udGVudCByaWRlc3R5bGVyLXNob3djYXNlLXZlaGljbGUtc2VsZWN0aW9uLWNvbnRlbnQnLFxyXG4gICAgICAgICAgICAgICAgYXBwZW5kVG86IGNvbnRhaW5lclxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHRoaXMuYnVpbGRDb3B5KCk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmNob29zZVZlaGljbGVCdXR0b24gPSBIVE1MSGVscGVyLmNyZWF0ZUJ1dHRvbih7XHJcbiAgICAgICAgICAgICAgICB0ZXh0OiBzdHJpbmdzLmdldFN0cmluZygnc2VsZWN0LXlvdXItdmVoaWNsZScpLFxyXG4gICAgICAgICAgICAgICAgYXBwZW5kVG86IHRoaXMuY29udGVudENvbnRhaW5lcixcclxuICAgICAgICAgICAgICAgIGRpc2FibGVkOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgbGFyZ2U6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBpZDogJ3JpZGVzdHlsZXItc2hvd2Nhc2Utc2VsZWN0LXlvdXItdmVoaWNsZScsXHJcbiAgICAgICAgICAgICAgICB3cmFwOiBIVE1MSGVscGVyLmNyZWF0ZUVsZW1lbnRXaXRoSUQoJ2RpdicsICdyaWRlc3R5bGVyLXNob3djYXNlLXNlbGVjdC15b3VyLXZlaGljbGUtd3JhcHBlcicpXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5jaG9vc2VWZWhpY2xlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5tb2RhbC5TaG93KCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBidWlsZENvcHkoKSB7XHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGVtYm9sZGVuRmlyc3RXb3JkIChzdHJpbmc6c3RyaW5nKSA6IFtIVE1MRWxlbWVudCwgVGV4dF0ge1xyXG4gICAgICAgICAgICAgICAgdmFyIGZpcnN0V29yZCA9IFN0cmluZ0hlbHBlci5nZXRGaXJzdFdvcmQoc3RyaW5nKTtcclxuICAgICAgICAgICAgICAgIHZhciByZW1haW5pbmdTdHJpbmcgPSBzdHJpbmcuc3Vic3RyKGZpcnN0V29yZC5sZW5ndGgpO1xyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiBbXHJcbiAgICAgICAgICAgICAgICAgICAgSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50V2l0aFRleHQoJ3N0cm9uZycsIGZpcnN0V29yZCksXHJcbiAgICAgICAgICAgICAgICAgICAgSFRNTEhlbHBlci5jcmVhdGVUZXh0RWxlbWVudChyZW1haW5pbmdTdHJpbmcpXHJcbiAgICAgICAgICAgICAgICBdO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBsZXQgdmlzdWFsaXplU3RyaW5nID0gSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KCdoMScsIHtcclxuICAgICAgICAgICAgICAgIGFwcGVuZDogZW1ib2xkZW5GaXJzdFdvcmQoc3RyaW5ncy5nZXRTdHJpbmcoXCJ2ZWhpY2xlLXNlbGVjdC12aXN1YWxpemUtaW50cm9cIikpLFxyXG4gICAgICAgICAgICAgICAgYXBwZW5kVG86IHRoaXMuY29udGVudENvbnRhaW5lclxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgbGV0IHNoYXJlU3RyaW5nID0gSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KCdoMScsIHtcclxuICAgICAgICAgICAgICAgIGFwcGVuZDogZW1ib2xkZW5GaXJzdFdvcmQoc3RyaW5ncy5nZXRTdHJpbmcoXCJ2ZWhpY2xlLXNlbGVjdC1zaGFyZS1pbnRyb1wiKSksXHJcbiAgICAgICAgICAgICAgICBhcHBlbmRUbzogdGhpcy5jb250ZW50Q29udGFpbmVyXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBvbkF1dGhlbnRpY2F0ZWQoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2hvb3NlVmVoaWNsZUJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgYXBpLnJlcXVlc3QoXCJ3aGVlbC9nZXRtb2RlbHNcIiwge1xyXG4gICAgICAgICAgICAgICAgQ291bnQ6IDMsXHJcbiAgICAgICAgICAgICAgICBIYXNDYXRhbG9nSW1hZ2U6IHRydWVcclxuICAgICAgICAgICAgfSkuZG9uZShyZXNwb25zZSA9PiB0aGlzLnNob3dXaGVlbHMocmVzcG9uc2UuTW9kZWxzKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIG9uVmVoaWNsZVNlbGVjdGVkKHNlbGVjdGlvbjpSaWRlU3R5bGVyVmVoaWNsZVNlbGVjdGlvbk1vZGFsLlNlbGVjdGVkVmVoaWNsZURhdGEpIHtcclxuICAgICAgICAgICAgLy8gVGhlIHVzZXIgaGFzIHNlbGVjdGVkIGEgdmVoaWNsZSB1c2luZyB0aGUgdmVoaWNsZSBzZWxlY3Rpb24gbW9kYWwuXHJcbiAgICAgICAgICAgIC8vIE5vdyB3ZSBuZWVkIHRvIG9idGFpbiBhIE9FIHRpcmUgb3B0aW9uIGZvciB0aGVtLlxyXG4gICAgICAgICAgICB0aGlzLmV2ZW50cy50cmlnZ2VyKFwidmVoaWNsZS1zZWxlY3RlZFwiLCBzZWxlY3Rpb24pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogU2hvdyB0aGUgcGFzc2VkIGluIHdoZWVsIG1vZGVscyBpbiB0aGUgd2hlZWwgc2hvd2Nhc2Ugc2VjdGlvbiBvZiB0aGUgdmVoaWNsZSBzZWxlY3Rpb24gc2NyZWVuXHJcbiAgICAgICAgICogQHBhcmFtIG1vZGVscyBUaGUgd2hlZWwgbW9kZWxzIHRvIHNob3dcclxuICAgICAgICAgKi9cclxuICAgICAgICBwcml2YXRlIHNob3dXaGVlbHMobW9kZWxzOnJpZGVzdHlsZXIuRGF0YU9iamVjdHMuV2hlZWxNb2RlbERhdGFPYmplY3RbXSkge1xyXG4gICAgICAgICAgICBsZXQgd2hlZWxDb250YWluZXI6SFRNTEVsZW1lbnQ7XHJcblxyXG4gICAgICAgICAgICBpZiAoIXRoaXMud2hlZWxDb250YWluZXIpIHtcclxuICAgICAgICAgICAgICAgIHdoZWVsQ29udGFpbmVyID0gdGhpcy53aGVlbENvbnRhaW5lciA9IEhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCgnZGl2Jywge1xyXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ3JpZGVzdHlsZXItc2hvd2Nhc2UtdmVoaWNsZS1zZWxlY3Rpb24td2hlZWwtc2hvd2Nhc2UnLFxyXG4gICAgICAgICAgICAgICAgICAgIGFwcGVuZFRvOiB0aGlzLmNvbXBvbmVudFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB3aGVlbENvbnRhaW5lciA9IHRoaXMud2hlZWxDb250YWluZXI7XHJcblxyXG4gICAgICAgICAgICAgICAgSFRNTEhlbHBlci5lbXB0eSh3aGVlbENvbnRhaW5lcik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGxldCBtb2RlbEltYWdlczpIVE1MSW1hZ2VFbGVtZW50W10gPSBbXTtcclxuICAgICAgICAgICAgbGV0IG9uTW9kZWxJbWFnZUxvYWQgPSBmdW5jdGlvbiAodGhpczpIVE1MSW1hZ2VFbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBtb2RlbEltYWdlIG9mIG1vZGVsSW1hZ2VzKVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghbW9kZWxJbWFnZS5jb21wbGV0ZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICB3aGVlbENvbnRhaW5lci5zdHlsZS5vcGFjaXR5ID0gJzEnO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgZm9yIChsZXQgbW9kZWwgb2YgbW9kZWxzKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgbW9kZWxJbWFnZVNvdXJjZSA9IHJpZGVzdHlsZXIud2hlZWwuaW1hZ2Uoe1xyXG4gICAgICAgICAgICAgICAgICAgIFdoZWVsTW9kZWw6IG1vZGVsLldoZWVsTW9kZWxJRCxcclxuICAgICAgICAgICAgICAgICAgICBXaWR0aDogNDAwLFxyXG4gICAgICAgICAgICAgICAgICAgIEhlaWdodDogNDAwLFxyXG4gICAgICAgICAgICAgICAgICAgIFBvc2l0aW9uWDogcmlkZXN0eWxlci5SZXF1ZXN0cy5JbWFnZVBvc2l0aW9uLkNlbnRlcixcclxuICAgICAgICAgICAgICAgICAgICBQb3NpdGlvblk6IHJpZGVzdHlsZXIuUmVxdWVzdHMuSW1hZ2VQb3NpdGlvbi5DZW50ZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgV2hlZWxGaXRtZW50UmVzb3VyY2VUeXBlOiByaWRlc3R5bGVyLkRhdGFPYmplY3RzLldoZWVsRml0bWVudFJlc291cmNlVHlwZS5DYXRhbG9nLFxyXG4gICAgICAgICAgICAgICAgICAgIEluY2x1ZGVTaGFkb3c6IHRydWVcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBsZXQgbW9kZWxJbWFnZSA9IEhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCgnaW1nJyk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIG1vZGVsSW1hZ2UuY2xhc3NOYW1lID0gJ3JpZGVzdHlsZXItc2hvd2Nhc2UtdmVoaWNsZS1zZWxlY3Rpb24td2hlZWwtc2hvd2Nhc2UtaW1hZ2UnO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBtb2RlbEltYWdlLmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCBvbk1vZGVsSW1hZ2VMb2FkKTtcclxuICAgICAgICAgICAgICAgIG1vZGVsSW1hZ2VzLnB1c2goICk7XHJcblxyXG4gICAgICAgICAgICAgICAgbW9kZWxJbWFnZS5zcmMgPSBtb2RlbEltYWdlU291cmNlO1xyXG4gICAgICAgICAgICAgICAgd2hlZWxDb250YWluZXIuYXBwZW5kQ2hpbGQobW9kZWxJbWFnZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgZ2VuZXJhdGVWZWhpY2xlUHJldmlld1NldHRpbmdzKCk6cmlkZXN0eWxlci5SZXF1ZXN0cy5JbWFnZVJlbmRlclJlcXVlc3Qge1xyXG4gICAgICAgICAgICBsZXQgc2NhbGUgPSBNYXRoLm1heCh3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyB8fCAwLCAxKTtcclxuICAgICAgICAgICAgbGV0IGNvbnRhaW5lciA9IHRoaXMuY29tcG9uZW50O1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc3Qgd2lkdGhUb0hlaWdodCA9IC41O1xyXG4gICAgICAgICAgICBjb25zdCBtYXhSZXF1ZXN0UmVzb2x1dGlvbiA9IDE5MjA7XHJcblxyXG4gICAgICAgICAgICAvLyBXaWR0aCBpcyA4MCUgb2YgdGhlIGNvbnRhaW5lciB3aWR0aFxyXG4gICAgICAgICAgICBsZXQgd2lkdGggPSBjb250YWluZXIuY2xpZW50V2lkdGggKiAuODA7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBXaWR0aCBpcyA1MDAgaWYgbm90IGZvdW5kXHJcbiAgICAgICAgICAgIGlmICghd2lkdGgpIHdpZHRoID0gNTAwO1xyXG5cclxuICAgICAgICAgICAgLy8gQXBwbHkgb3VyIHNjYWxlXHJcbiAgICAgICAgICAgIHdpZHRoICo9IHNjYWxlO1xyXG5cclxuICAgICAgICAgICAgLy8gTGltaXQgd2lkdGggdG8gbWF4IHJlcXVlc3QgcmVzb2x1dGlvblxyXG4gICAgICAgICAgICBpZiAod2lkdGggPiBtYXhSZXF1ZXN0UmVzb2x1dGlvbikgd2lkdGggPSBtYXhSZXF1ZXN0UmVzb2x1dGlvbjtcclxuXHJcbiAgICAgICAgICAgIC8vIERldGVybWluZSBoZWlnaHRcclxuICAgICAgICAgICAgbGV0IGhlaWdodCA9IHdpZHRoICogd2lkdGhUb0hlaWdodDtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBXaWR0aDogfn53aWR0aCxcclxuICAgICAgICAgICAgICAgIEhlaWdodDogfn5oZWlnaHRcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iXX0=

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var RideStylerShowcase;
(function (RideStylerShowcase) {
    var customizationsClass = 'ridestyler-showcase-customizations';
    var loadingClass = customizationsClass + '-loading';

    var RideStylerShowcaseVehicleVisualization = function (_RideStylerShowcase$M) {
        _inherits(RideStylerShowcaseVehicleVisualization, _RideStylerShowcase$M);

        function RideStylerShowcaseVehicleVisualization() {
            _classCallCheck(this, RideStylerShowcaseVehicleVisualization);

            var _this = _possibleConstructorReturn(this, (RideStylerShowcaseVehicleVisualization.__proto__ || Object.getPrototypeOf(RideStylerShowcaseVehicleVisualization)).apply(this, arguments));

            _this.customizationComponentOrder = ['paint', 'wheels', 'tires', 'suspension'];
            _this.customizationComponentSettings = {
                paint: {
                    title: RideStylerShowcase.strings.getString('select-paint'),
                    showFilterButton: false,
                    enabled: true
                },
                wheels: {
                    title: RideStylerShowcase.strings.getString('select-wheels'),
                    showFilterButton: true,
                    enabled: true
                },
                tires: {
                    title: RideStylerShowcase.strings.getString('select-tires'),
                    showFilterButton: true,
                    enabled: true
                },
                suspension: {
                    title: RideStylerShowcase.strings.getString('adjust-suspension'),
                    showFilterButton: false,
                    enabled: true
                }
            };
            return _this;
        }

        _createClass(RideStylerShowcaseVehicleVisualization, [{
            key: 'buildComponent',
            value: function buildComponent(container) {
                var _this2 = this;

                // Wait for initialization before creating the viewport because it detects
                // the offset positioning of the viewport element when created and our CSS
                // isn't guaranteed to be loaded until the initialized event
                this.events.on('initialized', function () {
                    _this2.setupViewport(container);
                    // Setup initial tab layout
                    _this2.updateTabLayout();
                    _this2.events.on('vehicle-selected', function () {
                        if (_this2.vehicleDifferentFromState()) _this2.viewport.Reset();
                    });
                    // Hide the share button if sharing is disabled
                    if (!_this2.showcase.settingsFromAPI.EnableSharing) shareButton.style.display = 'none';
                    var countTireBrands = RideStylerShowcase.api.request("tire/countbrands", _this2.showcase.filters.tireFilters.getFilters());
                    var countWheelBrands = RideStylerShowcase.api.request("wheel/countbrands", _this2.showcase.filters.wheelFilters.getFilters());
                    RideStylerShowcase.PromiseHelper.all([countTireBrands, countWheelBrands]).done(function (results) {
                        var tireBrandCount = results[0].Count;
                        var wheelBrandCount = results[1].Count;
                        if (!tireBrandCount) _this2.customizationComponentSettings.tires.enabled = false;
                        if (!wheelBrandCount) _this2.customizationComponentSettings.wheels.enabled = false;
                        _this2.updateTabs();
                    });
                });
                this.setupTabs();
                this.changeWheelSize = new RideStylerShowcase.RideStylerShowcaseChangeWheelSize(this.showcase);
                this.changeWheelSize.optionSelectedCallback = function (newOption) {
                    _this2.state.extendData({
                        currentWheelFitment: newOption
                    });
                    _this2.updateViewport({
                        WheelFitment: newOption.WheelFitmentID
                    });
                };
                this.components = [this.vehicleDetails = new RideStylerShowcase.VehicleDetails(this.showcase), new RideStylerShowcase.WheelDetails(this.showcase), new RideStylerShowcase.TireDetails(this.showcase), this.tabBar, this.changeWheelSize];
                this.customizationComponentContainer = RideStylerShowcase.HTMLHelper.createElement('div', {
                    className: customizationsClass,
                    appendTo: this.component
                });
                // Append any sub components
                var _iteratorNormalCompletion = true;
                var _didIteratorError = false;
                var _iteratorError = undefined;

                try {
                    for (var _iterator = this.components[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
                        var component = _step.value;

                        this.component.appendChild(component.component);
                    }
                } catch (err) {
                    _didIteratorError = true;
                    _iteratorError = err;
                } finally {
                    try {
                        if (!_iteratorNormalCompletion && _iterator.return) {
                            _iterator.return();
                        }
                    } finally {
                        if (_didIteratorError) {
                            throw _iteratorError;
                        }
                    }
                }

                this.rotateElement = RideStylerShowcase.HTMLHelper.createElement('div', {
                    className: 'ridestyler-showcase-rotate-vehicle',
                    appendTo: this.component
                });
                this.rotateElement.addEventListener('click', function () {
                    _this2.switchAngle();
                });
                RideStylerShowcase.HTMLHelper.createElement({
                    className: 'ridestyler-showcase-customization-component-title-container',
                    appendTo: this.component,
                    append: [this.titleElement = RideStylerShowcase.HTMLHelper.createElement({
                        className: 'ridestyler-showcase-customization-component-title',
                        appendTo: this.component
                    }), this.filterButton = RideStylerShowcase.HTMLHelper.createButton({
                        text: RideStylerShowcase.strings.getString('filter-results'),
                        skinny: true
                    })]
                });
                this.filterButton.addEventListener('click', function () {
                    _this2.showFilters();
                });
                var shareButton = RideStylerShowcase.HTMLHelper.createButton({
                    className: 'ridestyler-share-my-vehicle-button',
                    text: RideStylerShowcase.strings.getString('share-my-vehicle'),
                    appendTo: this.component,
                    style: {
                        opacity: '1'
                    },
                    disabled: true
                });
                shareButton.addEventListener('click', function () {
                    new RideStylerShowcase.RideStylerShowcaseShareModal(_this2.showcase, _this2.currentRenderInstructions).show();
                });
                this.state.afterDataChange(function (stateData) {
                    shareButton.disabled = stateData.currentWheel ? false : true;
                });
                // Start listening for resize events
                this.events.on('resized', function () {
                    if (_this2.isVisible()) {
                        _this2.updateViewport();
                    }
                });
                // Start listening for breakpoint changes
                this.events.on('breakpoint-changed', function (newBreakpoint) {
                    _this2.updateTabLayout();
                });
                this.vehicleDetails.paintSwatchClickCallback = function () {
                    _this2.setActiveCustomizationComponent(_this2.customizationComponents.paint);
                };
            }
        }, {
            key: 'setupViewport',
            value: function setupViewport(container) {
                var _this3 = this;

                var viewportElement = RideStylerShowcase.HTMLHelper.createElement('div', {
                    className: 'ridestyler-showcase-viewport',
                    appendTo: container
                });
                viewportElement.addEventListener('click', function () {
                    _this3.switchAngle();
                });
                this.viewport = new RideStylerViewport(viewportElement);
                //Listens for new car selection and hides vehicle between updates
            }
        }, {
            key: 'updateTabs',
            value: function updateTabs() {
                var tabs = [];
                var _iteratorNormalCompletion2 = true;
                var _didIteratorError2 = false;
                var _iteratorError2 = undefined;

                try {
                    for (var _iterator2 = this.customizationComponentOrder[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {
                        var key = _step2.value;

                        // Skip disabled components
                        if (!this.customizationComponentSettings[key].enabled) continue;
                        tabs.push(this.tabs[key]);
                    }
                } catch (err) {
                    _didIteratorError2 = true;
                    _iteratorError2 = err;
                } finally {
                    try {
                        if (!_iteratorNormalCompletion2 && _iterator2.return) {
                            _iterator2.return();
                        }
                    } finally {
                        if (_didIteratorError2) {
                            throw _iteratorError2;
                        }
                    }
                }

                this.tabBar.setTabs(tabs);
                this.updateTabLayout();
            }
        }, {
            key: 'updateTabLayout',
            value: function updateTabLayout() {
                var currentBreakpoint = this.showcase.style.getCurrentBreakpoint();
                var horizontal = currentBreakpoint && currentBreakpoint[0] === 'phone-portrait';
                this.tabBar.setMode(horizontal ? 'horizontal' : 'vertical');
            }
        }, {
            key: 'setupTabs',
            value: function setupTabs() {
                var _this4 = this;

                this.tabBar = new RideStylerShowcase.RideStylerShowcaseTabBar(this.showcase);
                // Define our tabs
                this.tabs = {
                    paint: new RideStylerShowcase.RideStylerShowcaseTabBar.Tab({
                        icon: 'paint',
                        key: 'paint',
                        label: RideStylerShowcase.strings.getString('paint')
                    }),
                    wheels: new RideStylerShowcase.RideStylerShowcaseTabBar.Tab({
                        icon: 'wheel',
                        key: 'wheels',
                        label: RideStylerShowcase.strings.getString('wheels')
                    }),
                    tires: new RideStylerShowcase.RideStylerShowcaseTabBar.Tab({
                        icon: 'tire',
                        key: 'tires',
                        label: RideStylerShowcase.strings.getString('tires')
                    }),
                    suspension: new RideStylerShowcase.RideStylerShowcaseTabBar.Tab({
                        icon: 'suspension',
                        key: 'suspension',
                        label: RideStylerShowcase.strings.getString('suspension')
                    })
                };
                // Switch the bottom view, the customization component when a tab is clicked on
                this.tabBar.tabSwitchedCallback = function (e) {
                    var newTab = e.newTab;
                    var key = newTab.key;
                    if (_this4.customizationComponents && key in _this4.customizationComponents) {
                        _this4.setActiveCustomizationComponent(_this4.customizationComponents[key]);
                    }
                };
            }
        }, {
            key: 'vehicleDifferentFromState',
            value: function vehicleDifferentFromState() {
                var stateData = this.state.getData();
                if (!stateData.currentVehicleConfigurationID || !stateData.currentVehicleTireOptionID) {
                    console.error('Trying to show the visualize screen without a vehicle configuration or tire option.');
                }
                var vehicleChanged = !RideStylerShowcase.GUIDHelper.areEqual(stateData.currentVehicleConfigurationID, this.vehicleConfigurationID);
                var tireOptionChanged = !RideStylerShowcase.GUIDHelper.areEqual(stateData.currentVehicleTireOptionID, this.vehicleTireOptionID);
                return vehicleChanged || tireOptionChanged;
            }
        }, {
            key: 'onDisplay',
            value: function onDisplay() {
                if (this.vehicleDifferentFromState()) {
                    var stateData = this.state.getData();
                    this.vehicleConfigurationID = stateData.currentVehicleConfigurationID;
                    this.vehicleDescription = stateData.currentVehicleDescription;
                    this.vehicleTireOptionID = stateData.currentVehicleTireOptionID;
                    this.vehicleTireOptionDescription = stateData.currentVehicleTireOptionDescription;
                    this.tabBar.clearActiveTab();
                    this.onVehicleChanged();
                }
            }
        }, {
            key: 'onVehicleChanged',
            value: function onVehicleChanged() {
                var _this5 = this;

                RideStylerShowcase.HTMLHelper.empty(this.customizationComponentContainer);
                // Set the customization container as loading while we're loading additional information
                // about the vehicle
                this.customizationComponentContainer.classList.add(loadingClass);
                this.updateTabs();
                // Deselect any active tab
                this.tabBar.clearActiveTab();
                this.rotateElement.classList.remove('in');
                // Load the vehicle's description model
                var getVehicleDescription = RideStylerShowcase.api.request("vehicle/getdescriptions", {
                    Count: 1,
                    VehicleConfiguration: this.vehicleConfigurationID
                });
                var getVehicleTireOption = RideStylerShowcase.api.request('vehicle/gettireoptiondetails', {
                    VehicleConfiguration: this.vehicleConfigurationID
                });
                RideStylerShowcase.PromiseHelper.all([getVehicleDescription, getVehicleTireOption]).done(function (responses) {
                    var vehicleDescription = _this5.vehicleDescriptionModel = responses[0].Descriptions[0];
                    var vehicleTireOption = void 0;
                    var selectedTireOptionID = RideStylerShowcase.GUIDHelper.parse(_this5.vehicleTireOptionID);
                    var _iteratorNormalCompletion3 = true;
                    var _didIteratorError3 = false;
                    var _iteratorError3 = undefined;

                    try {
                        for (var _iterator3 = responses[1].Details[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {
                            var tireOption = _step3.value;

                            if (RideStylerShowcase.GUIDHelper.areEqual(tireOption.TireOptionID, selectedTireOptionID)) {
                                vehicleTireOption = tireOption;
                                break;
                            }
                        }
                    } catch (err) {
                        _didIteratorError3 = true;
                        _iteratorError3 = err;
                    } finally {
                        try {
                            if (!_iteratorNormalCompletion3 && _iterator3.return) {
                                _iterator3.return();
                            }
                        } finally {
                            if (_didIteratorError3) {
                                throw _iteratorError3;
                            }
                        }
                    }

                    _this5.vehicleTireOption = vehicleTireOption;
                    _this5.state.extendData({
                        vehicleHasAngledImage: vehicleDescription.HasAngledImage,
                        vehicleHasSideImage: vehicleDescription.HasSideImage,
                        currentTireOption: vehicleTireOption,
                        currentVehicleDescriptionModel: vehicleDescription
                    });
                    _this5.initializeForNewVehicle();
                });
            }
        }, {
            key: 'initializeForNewVehicle',
            value: function initializeForNewVehicle() {
                var _this6 = this;

                this.events.trigger("vehicle-description-loaded", this.vehicleDescriptionModel);
                this.currentRenderInstructions = {};
                this.tabBar.setActiveTab(this.tabs.paint);
                this.viewport.Reset();
                // Create the components that will be switched with the tabs
                this.customizationComponents = {
                    paint: new RideStylerShowcase.RideStylerShowcasePaintSelector(this.showcase),
                    wheels: new RideStylerShowcase.RideStylerShowcaseWheelSelector(this.showcase),
                    tires: new RideStylerShowcase.RideStylerShowcaseTireSelector(this.showcase),
                    suspension: new RideStylerShowcase.RideStylerShowcaseSuspensionSelector(this.showcase)
                };
                this.customizationComponents.wheels.setFilters(this.showcase.filters.wheelFilters.getFilters());
                this.showcase.filters.wheelFilters.onFiltersChanged = function (filters) {
                    _this6.customizationComponents.wheels.setFilters(filters);
                };
                this.showcase.filters.tireFilters.onFiltersChanged = function (filters) {
                    _this6.customizationComponents.tires.setFilters(filters);
                };
                this.customizationComponents.paint.onPaintSchemeSelected = function (paintScheme) {
                    _this6.customizationComponents.paint.setOptionIsLoading(true);
                    _this6.updateViewport({
                        PaintColor: paintScheme.Colors[0].Hex
                    }).always(function () {
                        _this6.customizationComponents.paint.setOptionIsLoading(false);
                    });
                };
                this.customizationComponents.wheels.productSelectedCallback = function (model) {
                    _this6.customizationComponents.wheels.setOptionIsLoading(true);
                    var canRenderOnCurrentAngle = _this6.imageType === 2 /* Angle */ && model.HasAngleImage || _this6.imageType === 1 /* Side */ && model.HasSideImage;
                    if (!canRenderOnCurrentAngle) _this6.switchAngle();
                    RideStylerShowcase.api.request('wheel/getfitmentdescriptions', {
                        VehicleConfiguration: _this6.vehicleConfigurationID,
                        WheelModel: model.WheelModelID,
                        IncludePricing: true
                    }).done(function (response) {
                        var fitments = response.Fitments;
                        var bestFitment = undefined;
                        var targetDiameter = _this6.vehicleTireOption.Front.InsideDiameter;
                        model.WheelFitments = fitments;
                        fitments.sort(function (a, b) {
                            var aDiff = Math.abs(a.DiameterMin - targetDiameter);
                            var bDiff = Math.abs(b.DiameterMin - targetDiameter);
                            return aDiff - bDiff;
                        });
                        bestFitment = fitments[0];
                        _this6.state.extendData({
                            currentWheel: model,
                            currentWheelFitment: bestFitment
                        });
                        _this6.changeWheelSize.setFitmentOptions(fitments, bestFitment);
                        _this6.changeWheelSize.component.style.display = '';
                        _this6.updateViewport({
                            WheelFitment: bestFitment.WheelFitmentID
                        }).always(function () {
                            _this6.customizationComponents.wheels.setOptionIsLoading(false);
                        });
                    }).fail(function () {
                        return _this6.customizationComponents.wheels.setOptionIsLoading(false);
                    });
                };
                this.customizationComponents.tires.productSelectedCallback = function (model) {
                    _this6.state.extendData({
                        currentTire: model
                    });
                };
                this.customizationComponents.suspension.suspensionChangeCallback = function (renderUpdate) {
                    _this6.updateViewport(renderUpdate);
                };
                this.setActiveCustomizationComponent(this.customizationComponents.wheels);
                var _iteratorNormalCompletion4 = true;
                var _didIteratorError4 = false;
                var _iteratorError4 = undefined;

                try {
                    for (var _iterator4 = RideStylerShowcase.ObjectHelper.getValues(this.customizationComponents)[Symbol.iterator](), _step4; !(_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done); _iteratorNormalCompletion4 = true) {
                        var customizationComponent = _step4.value;

                        customizationComponent.component.classList.add('ridestyler-showcase-customization-component');
                        this.customizationComponentContainer.appendChild(customizationComponent.component);
                    }
                } catch (err) {
                    _didIteratorError4 = true;
                    _iteratorError4 = err;
                } finally {
                    try {
                        if (!_iteratorNormalCompletion4 && _iterator4.return) {
                            _iterator4.return();
                        }
                    } finally {
                        if (_didIteratorError4) {
                            throw _iteratorError4;
                        }
                    }
                }

                this.imageType = 2 /* Angle */;
                if (!this.vehicleDescriptionModel.HasAngledImage) this.imageType = 1 /* Side */;
                this.rotateElement.style.display = this.canSwitchAngle() ? '' : 'none';
                this.updateViewport({
                    VehicleConfiguration: this.vehicleConfigurationID,
                    VehicleTireOption: this.vehicleTireOptionID,
                    PositionX: 1 /* Center */
                    , PositionY: 2 /* Far */
                    , Type: this.imageType
                }).done(function () {
                    _this6.rotateElement.classList.add('in');
                });
                this.customizationComponentContainer.classList.remove(loadingClass);
            }
        }, {
            key: 'setActiveCustomizationComponent',
            value: function setActiveCustomizationComponent(customizationComponent) {
                var stateData = this.state.getData();
                var componentKey = this.getComponentKey(customizationComponent);
                var settings = this.customizationComponentSettings[componentKey];
                var tab = this.tabs[componentKey];
                if (tab) {
                    this.tabBar.setActiveTab(tab);
                }
                if (this.activeCustomizationComponent) {
                    this.activeCustomizationComponent.component.classList.remove('in');
                }
                customizationComponent.component.classList.add('in');
                this.activeCustomizationComponent = customizationComponent;
                if (typeof customizationComponent.update === 'function') customizationComponent.update();
                this.changeWheelSize.component.style.display = customizationComponent instanceof RideStylerShowcase.RideStylerShowcaseWheelSelector && stateData.currentWheel ? '' : 'none';
                this.filterButton.style.display = settings.showFilterButton ? '' : 'none';
                RideStylerShowcase.HTMLHelper.setText(this.titleElement, settings.title);
            }
        }, {
            key: 'getComponentKey',
            value: function getComponentKey(customizationComponent) {
                for (var key in this.customizationComponents) {
                    var component = this.customizationComponents[key];
                    if (component === customizationComponent) {
                        return key;
                    }
                }
            }
        }, {
            key: 'updateViewport',
            value: function updateViewport(instructions) {
                Object.assign(this.currentRenderInstructions, instructions);
                return this.viewport.Update(instructions);
            }
        }, {
            key: 'canSwitchAngle',
            value: function canSwitchAngle() {
                return this.vehicleDescriptionModel.HasAngledImage && this.vehicleDescriptionModel.HasSideImage;
            }
        }, {
            key: 'showFilters',
            value: function showFilters() {
                var activeCustomizationComponent = this.activeCustomizationComponent;
                var filterModal = void 0;
                if (activeCustomizationComponent === this.customizationComponents.tires) {
                    filterModal = new RideStylerShowcase.RideStylerShowcaseFilterModal(this.showcase, {
                        filterProvider: this.showcase.filters.tireFilters,
                        showCountTextFormat: RideStylerShowcase.strings.getString('show-count-format-tires')
                    });
                } else if (activeCustomizationComponent === this.customizationComponents.wheels) {
                    filterModal = new RideStylerShowcase.RideStylerShowcaseFilterModal(this.showcase, {
                        filterProvider: this.showcase.filters.wheelFilters,
                        showCountTextFormat: RideStylerShowcase.strings.getString('show-count-format-wheels')
                    });
                }
                if (filterModal) {
                    filterModal.show();
                }
            }
        }, {
            key: 'switchAngle',
            value: function switchAngle() {
                if (!this.canSwitchAngle() || this.state.getData().currentWheel.HasSideImage === false) return;
                if (this.imageType === 2 /* Angle */) {
                        this.imageType = 1 /* Side */;
                    } else this.imageType = 2 /* Angle */;
                this.updateViewport({
                    Type: this.imageType
                });
            }
        }]);

        return RideStylerShowcaseVehicleVisualization;
    }(RideStylerShowcase.MainComponentBase);

    RideStylerShowcase.RideStylerShowcaseVehicleVisualization = RideStylerShowcaseVehicleVisualization;
})(RideStylerShowcase || (RideStylerShowcase = {}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvUmlkZVN0eWxlclNob3djYXNlVmVoaWNsZVZpc3VhbGl6YXRpb24udHMiLCJzY3JpcHRzL2NvbXBvbmVudHMvUmlkZVN0eWxlclNob3djYXNlVmVoaWNsZVZpc3VhbGl6YXRpb24uanMiXSwibmFtZXMiOlsiUmlkZVN0eWxlclNob3djYXNlIiwiY3VzdG9taXphdGlvbnNDbGFzcyIsImxvYWRpbmdDbGFzcyIsIlJpZGVTdHlsZXJTaG93Y2FzZVZlaGljbGVWaXN1YWxpemF0aW9uIiwiYXJndW1lbnRzIiwiY3VzdG9taXphdGlvbkNvbXBvbmVudE9yZGVyIiwiY3VzdG9taXphdGlvbkNvbXBvbmVudFNldHRpbmdzIiwicGFpbnQiLCJ0aXRsZSIsInN0cmluZ3MiLCJnZXRTdHJpbmciLCJzaG93RmlsdGVyQnV0dG9uIiwiZW5hYmxlZCIsIndoZWVscyIsInRpcmVzIiwic3VzcGVuc2lvbiIsImNvbnRhaW5lciIsImV2ZW50cyIsIm9uIiwic2V0dXBWaWV3cG9ydCIsInVwZGF0ZVRhYkxheW91dCIsInZlaGljbGVEaWZmZXJlbnRGcm9tU3RhdGUiLCJ2aWV3cG9ydCIsIlJlc2V0Iiwic2hvd2Nhc2UiLCJzZXR0aW5nc0Zyb21BUEkiLCJFbmFibGVTaGFyaW5nIiwic2hhcmVCdXR0b24iLCJzdHlsZSIsImRpc3BsYXkiLCJjb3VudFRpcmVCcmFuZHMiLCJhcGkiLCJyZXF1ZXN0IiwiZmlsdGVycyIsInRpcmVGaWx0ZXJzIiwiZ2V0RmlsdGVycyIsImNvdW50V2hlZWxCcmFuZHMiLCJ3aGVlbEZpbHRlcnMiLCJQcm9taXNlSGVscGVyIiwiYWxsIiwiZG9uZSIsInRpcmVCcmFuZENvdW50IiwicmVzdWx0cyIsIkNvdW50Iiwid2hlZWxCcmFuZENvdW50IiwidXBkYXRlVGFicyIsInNldHVwVGFicyIsImNoYW5nZVdoZWVsU2l6ZSIsIlJpZGVTdHlsZXJTaG93Y2FzZUNoYW5nZVdoZWVsU2l6ZSIsIm9wdGlvblNlbGVjdGVkQ2FsbGJhY2siLCJzdGF0ZSIsImV4dGVuZERhdGEiLCJjdXJyZW50V2hlZWxGaXRtZW50IiwibmV3T3B0aW9uIiwidXBkYXRlVmlld3BvcnQiLCJXaGVlbEZpdG1lbnQiLCJXaGVlbEZpdG1lbnRJRCIsImNvbXBvbmVudHMiLCJ2ZWhpY2xlRGV0YWlscyIsIlZlaGljbGVEZXRhaWxzIiwiV2hlZWxEZXRhaWxzIiwiVGlyZURldGFpbHMiLCJ0YWJCYXIiLCJjdXN0b21pemF0aW9uQ29tcG9uZW50Q29udGFpbmVyIiwiSFRNTEhlbHBlciIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc05hbWUiLCJhcHBlbmRUbyIsImNvbXBvbmVudCIsImFwcGVuZENoaWxkIiwicm90YXRlRWxlbWVudCIsImFkZEV2ZW50TGlzdGVuZXIiLCJzd2l0Y2hBbmdsZSIsImFwcGVuZCIsInRpdGxlRWxlbWVudCIsImZpbHRlckJ1dHRvbiIsImNyZWF0ZUJ1dHRvbiIsInRleHQiLCJza2lubnkiLCJzaG93RmlsdGVycyIsIm9wYWNpdHkiLCJkaXNhYmxlZCIsIlJpZGVTdHlsZXJTaG93Y2FzZVNoYXJlTW9kYWwiLCJjdXJyZW50UmVuZGVySW5zdHJ1Y3Rpb25zIiwic2hvdyIsImFmdGVyRGF0YUNoYW5nZSIsInN0YXRlRGF0YSIsImN1cnJlbnRXaGVlbCIsImlzVmlzaWJsZSIsInBhaW50U3dhdGNoQ2xpY2tDYWxsYmFjayIsInNldEFjdGl2ZUN1c3RvbWl6YXRpb25Db21wb25lbnQiLCJjdXN0b21pemF0aW9uQ29tcG9uZW50cyIsInZpZXdwb3J0RWxlbWVudCIsIlJpZGVTdHlsZXJWaWV3cG9ydCIsInRhYnMiLCJrZXkiLCJwdXNoIiwic2V0VGFicyIsImN1cnJlbnRCcmVha3BvaW50IiwiZ2V0Q3VycmVudEJyZWFrcG9pbnQiLCJob3Jpem9udGFsIiwic2V0TW9kZSIsIlJpZGVTdHlsZXJTaG93Y2FzZVRhYkJhciIsIlRhYiIsImljb24iLCJsYWJlbCIsInRhYlN3aXRjaGVkQ2FsbGJhY2siLCJuZXdUYWIiLCJlIiwiZ2V0RGF0YSIsImN1cnJlbnRWZWhpY2xlQ29uZmlndXJhdGlvbklEIiwiY3VycmVudFZlaGljbGVUaXJlT3B0aW9uSUQiLCJjb25zb2xlIiwiZXJyb3IiLCJ2ZWhpY2xlQ2hhbmdlZCIsIkdVSURIZWxwZXIiLCJhcmVFcXVhbCIsInZlaGljbGVDb25maWd1cmF0aW9uSUQiLCJ0aXJlT3B0aW9uQ2hhbmdlZCIsInZlaGljbGVUaXJlT3B0aW9uSUQiLCJ2ZWhpY2xlRGVzY3JpcHRpb24iLCJjdXJyZW50VmVoaWNsZURlc2NyaXB0aW9uIiwidmVoaWNsZVRpcmVPcHRpb25EZXNjcmlwdGlvbiIsImN1cnJlbnRWZWhpY2xlVGlyZU9wdGlvbkRlc2NyaXB0aW9uIiwiY2xlYXJBY3RpdmVUYWIiLCJvblZlaGljbGVDaGFuZ2VkIiwiZW1wdHkiLCJjbGFzc0xpc3QiLCJhZGQiLCJyZW1vdmUiLCJnZXRWZWhpY2xlRGVzY3JpcHRpb24iLCJWZWhpY2xlQ29uZmlndXJhdGlvbiIsImdldFZlaGljbGVUaXJlT3B0aW9uIiwidmVoaWNsZURlc2NyaXB0aW9uTW9kZWwiLCJyZXNwb25zZXMiLCJEZXNjcmlwdGlvbnMiLCJ2ZWhpY2xlVGlyZU9wdGlvbiIsInNlbGVjdGVkVGlyZU9wdGlvbklEIiwicGFyc2UiLCJEZXRhaWxzIiwidGlyZU9wdGlvbiIsIlRpcmVPcHRpb25JRCIsInZlaGljbGVIYXNBbmdsZWRJbWFnZSIsIkhhc0FuZ2xlZEltYWdlIiwidmVoaWNsZUhhc1NpZGVJbWFnZSIsIkhhc1NpZGVJbWFnZSIsImN1cnJlbnRUaXJlT3B0aW9uIiwiY3VycmVudFZlaGljbGVEZXNjcmlwdGlvbk1vZGVsIiwiaW5pdGlhbGl6ZUZvck5ld1ZlaGljbGUiLCJ0cmlnZ2VyIiwic2V0QWN0aXZlVGFiIiwiUmlkZVN0eWxlclNob3djYXNlUGFpbnRTZWxlY3RvciIsIlJpZGVTdHlsZXJTaG93Y2FzZVdoZWVsU2VsZWN0b3IiLCJSaWRlU3R5bGVyU2hvd2Nhc2VUaXJlU2VsZWN0b3IiLCJSaWRlU3R5bGVyU2hvd2Nhc2VTdXNwZW5zaW9uU2VsZWN0b3IiLCJzZXRGaWx0ZXJzIiwib25GaWx0ZXJzQ2hhbmdlZCIsIm9uUGFpbnRTY2hlbWVTZWxlY3RlZCIsInNldE9wdGlvbklzTG9hZGluZyIsIlBhaW50Q29sb3IiLCJwYWludFNjaGVtZSIsIkNvbG9ycyIsIkhleCIsImFsd2F5cyIsInByb2R1Y3RTZWxlY3RlZENhbGxiYWNrIiwiY2FuUmVuZGVyT25DdXJyZW50QW5nbGUiLCJpbWFnZVR5cGUiLCJtb2RlbCIsIkhhc0FuZ2xlSW1hZ2UiLCJXaGVlbE1vZGVsIiwiV2hlZWxNb2RlbElEIiwiSW5jbHVkZVByaWNpbmciLCJmaXRtZW50cyIsInJlc3BvbnNlIiwiRml0bWVudHMiLCJiZXN0Rml0bWVudCIsInVuZGVmaW5lZCIsInRhcmdldERpYW1ldGVyIiwiRnJvbnQiLCJJbnNpZGVEaWFtZXRlciIsIldoZWVsRml0bWVudHMiLCJzb3J0IiwiYSIsImIiLCJhRGlmZiIsIk1hdGgiLCJhYnMiLCJEaWFtZXRlck1pbiIsImJEaWZmIiwic2V0Rml0bWVudE9wdGlvbnMiLCJmYWlsIiwiY3VycmVudFRpcmUiLCJzdXNwZW5zaW9uQ2hhbmdlQ2FsbGJhY2siLCJyZW5kZXJVcGRhdGUiLCJPYmplY3RIZWxwZXIiLCJnZXRWYWx1ZXMiLCJjdXN0b21pemF0aW9uQ29tcG9uZW50IiwiY2FuU3dpdGNoQW5nbGUiLCJWZWhpY2xlVGlyZU9wdGlvbiIsIlBvc2l0aW9uWCIsIlBvc2l0aW9uWSIsIlR5cGUiLCJjb21wb25lbnRLZXkiLCJnZXRDb21wb25lbnRLZXkiLCJzZXR0aW5ncyIsInRhYiIsImFjdGl2ZUN1c3RvbWl6YXRpb25Db21wb25lbnQiLCJ1cGRhdGUiLCJzZXRUZXh0IiwiaW5zdHJ1Y3Rpb25zIiwiT2JqZWN0IiwiYXNzaWduIiwiVXBkYXRlIiwiZmlsdGVyTW9kYWwiLCJSaWRlU3R5bGVyU2hvd2Nhc2VGaWx0ZXJNb2RhbCIsImZpbHRlclByb3ZpZGVyIiwic2hvd0NvdW50VGV4dEZvcm1hdCIsIk1haW5Db21wb25lbnRCYXNl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LEtBQUtpSCxjQUFMLEVBQUQsSUFBMEIsS0FBS25KLEtBQUwsQ0FBVzJELE9BQVgsR0FBcUJ0QixZQUFyQixDQUFrQzBELFlBQWxDLEtBQW1ELEtBQWpGLEVBQXdGO0FBRXhGLG9CQUFJLEtBQUtxQixTQUFMLEtBQWMsQ0FBbEIsQ0FBa0IsV0FBbEIsRUFBeUU7QUFFckUsNkJBQUtBLFNBQUwsR0FBYyxDQUFkLENBQWMsVUFBZDtBQUNILHFCQUhELE1BS0ksS0FBS0EsU0FBTCxHQUFjLENBQWQsQ0FBYyxXQUFkO0FBRUoscUJBQUtoSCxjQUFMLENBQW9CO0FBQ2hCbUosMEJBQU0sS0FBS25DO0FBREssaUJBQXBCO0FBR0g7QUFoa0JtQjs7QUFBQTtBQUFBLE1BUW9DdEssbUJBQUF5TixpQkFScEM7O0FBUVh6Tix1QkFBQUcsc0NBQUEsR0FBc0NBLHNDQUF0QztBQWlrQmhCLENBemtCRCxFQUFVSCx1QkFBQUEscUJBQWtCLEVBQWxCLENBQVYiLCJmaWxlIjoic2NyaXB0cy9jb21wb25lbnRzL1JpZGVTdHlsZXJTaG93Y2FzZVZlaGljbGVWaXN1YWxpemF0aW9uLmpzIiwic291cmNlc0NvbnRlbnQiOlsibmFtZXNwYWNlIFJpZGVTdHlsZXJTaG93Y2FzZSB7XHJcbiAgICBpbXBvcnQgVGFiID0gUmlkZVN0eWxlclNob3djYXNlVGFiQmFyLlRhYjtcclxuXHJcbiAgICBjb25zdCBjdXN0b21pemF0aW9uc0NsYXNzID0gJ3JpZGVzdHlsZXItc2hvd2Nhc2UtY3VzdG9taXphdGlvbnMnO1xyXG4gICAgY29uc3QgbG9hZGluZ0NsYXNzID0gY3VzdG9taXphdGlvbnNDbGFzcyArICctbG9hZGluZyc7XHJcblxyXG4gICAgdHlwZSBjdXN0b21pemF0aW9uQ29tcG9uZW50S2V5cyA9ICdwYWludCcgfCAnd2hlZWxzJyB8ICd0aXJlcycgfCAnc3VzcGVuc2lvbic7XHJcblxyXG4gICAgZXhwb3J0IGNsYXNzIFJpZGVTdHlsZXJTaG93Y2FzZVZlaGljbGVWaXN1YWxpemF0aW9uIGV4dGVuZHMgTWFpbkNvbXBvbmVudEJhc2Uge1xyXG4gICAgICAgIHByaXZhdGUgdmlld3BvcnQ6UmlkZVN0eWxlclZpZXdwb3J0O1xyXG4gICAgICAgIHByaXZhdGUgdGFiQmFyOlJpZGVTdHlsZXJTaG93Y2FzZVRhYkJhcjtcclxuICAgICAgICBwcml2YXRlIGNoYW5nZVdoZWVsU2l6ZTpSaWRlU3R5bGVyU2hvd2Nhc2VDaGFuZ2VXaGVlbFNpemU7XHJcblxyXG4gICAgICAgIHByaXZhdGUgdGl0bGVFbGVtZW50OkhUTUxFbGVtZW50O1xyXG4gICAgICAgIHByaXZhdGUgcm90YXRlRWxlbWVudDpIVE1MRWxlbWVudDtcclxuICAgICAgICBwcml2YXRlIGZpbHRlckJ1dHRvbjpIVE1MQnV0dG9uRWxlbWVudDtcclxuICAgICAgICBwcml2YXRlIHNoYXJlQnV0dG9uOkhUTUxCdXR0b25FbGVtZW50O1xyXG5cclxuICAgICAgICBwcml2YXRlIHZlaGljbGVEZXRhaWxzOlZlaGljbGVEZXRhaWxzO1xyXG5cclxuICAgICAgICBwcml2YXRlIHRhYnM6IHtcclxuICAgICAgICAgICAgW2tleSBpbiBjdXN0b21pemF0aW9uQ29tcG9uZW50S2V5c106IFRhYjtcclxuICAgICAgICB9O1xyXG4gICAgICAgIFxyXG4gICAgICAgIHByaXZhdGUgY3VzdG9taXphdGlvbkNvbXBvbmVudE9yZGVyOmN1c3RvbWl6YXRpb25Db21wb25lbnRLZXlzW10gPSBbJ3BhaW50JywgJ3doZWVscycsICd0aXJlcycsICdzdXNwZW5zaW9uJ107XHJcbiAgICAgICAgXHJcbiAgICAgICAgcHJpdmF0ZSBjdXN0b21pemF0aW9uQ29tcG9uZW50Q29udGFpbmVyOkhUTUxFbGVtZW50O1xyXG4gICAgICAgIHByaXZhdGUgY3VzdG9taXphdGlvbkNvbXBvbmVudHM6e1xyXG4gICAgICAgICAgICBwYWludDogUmlkZVN0eWxlclNob3djYXNlUGFpbnRTZWxlY3RvcjtcclxuICAgICAgICAgICAgd2hlZWxzOiBSaWRlU3R5bGVyU2hvd2Nhc2VXaGVlbFNlbGVjdG9yO1xyXG4gICAgICAgICAgICB0aXJlczogUmlkZVN0eWxlclNob3djYXNlVGlyZVNlbGVjdG9yO1xyXG4gICAgICAgICAgICBzdXNwZW5zaW9uOiBSaWRlU3R5bGVyU2hvd2Nhc2VTdXNwZW5zaW9uU2VsZWN0b3I7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgcHJpdmF0ZSBjdXN0b21pemF0aW9uQ29tcG9uZW50U2V0dGluZ3M6IHtcclxuICAgICAgICAgICAgW2tleSBpbiBjdXN0b21pemF0aW9uQ29tcG9uZW50S2V5c106IEN1c3RvbWl6YXRpb25Db21wb25lbnRTZXR0aW5ncztcclxuICAgICAgICB9ID0ge1xyXG4gICAgICAgICAgICBwYWludDoge1xyXG4gICAgICAgICAgICAgICAgdGl0bGU6IHN0cmluZ3MuZ2V0U3RyaW5nKCdzZWxlY3QtcGFpbnQnKSxcclxuICAgICAgICAgICAgICAgIHNob3dGaWx0ZXJCdXR0b246IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgZW5hYmxlZDogdHJ1ZVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB3aGVlbHM6IHtcclxuICAgICAgICAgICAgICAgIHRpdGxlOiBzdHJpbmdzLmdldFN0cmluZygnc2VsZWN0LXdoZWVscycpLFxyXG4gICAgICAgICAgICAgICAgc2hvd0ZpbHRlckJ1dHRvbjogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIGVuYWJsZWQ6IHRydWVcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgdGlyZXM6IHtcclxuICAgICAgICAgICAgICAgIHRpdGxlOiBzdHJpbmdzLmdldFN0cmluZygnc2VsZWN0LXRpcmVzJyksXHJcbiAgICAgICAgICAgICAgICBzaG93RmlsdGVyQnV0dG9uOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgZW5hYmxlZDogdHJ1ZVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBzdXNwZW5zaW9uOiB7XHJcbiAgICAgICAgICAgICAgICB0aXRsZTogc3RyaW5ncy5nZXRTdHJpbmcoJ2FkanVzdC1zdXNwZW5zaW9uJyksXHJcbiAgICAgICAgICAgICAgICBzaG93RmlsdGVyQnV0dG9uOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIGVuYWJsZWQ6IHRydWVcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBjb21wb25lbnRzOklDb21wb25lbnRbXTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBUaGUgSUQgb2YgdGhlIGN1cnJlbnRseSBkaXNwbGF5ZWQgdmVoaWNsZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHByaXZhdGUgdmVoaWNsZUNvbmZpZ3VyYXRpb25JRDpzdHJpbmc7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFRoZSBkZXNjcmlwdGlvbiBvZiB0aGUgY3VycmVudGx5IGRpc3BsYXllZCB2ZWhpY2xlXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHJpdmF0ZSB2ZWhpY2xlRGVzY3JpcHRpb246c3RyaW5nO1xyXG5cclxuICAgICAgICBwcml2YXRlIHZlaGljbGVTdXNwZW5zaW9uOnN0cmluZztcclxuXHJcbiAgICAgICAgcHJpdmF0ZSBpbWFnZVR5cGU6cmlkZXN0eWxlci5EYXRhT2JqZWN0cy5WZWhpY2xlUmVzb3VyY2VUeXBlO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBUaGUgSUQgb2YgdGhlIGN1cnJlbnRseSBkaXNwbGF5ZWQgT0UgdGlyZSBvcHRpb24gZm9yIHRoZSB2ZWhpY2xlXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHJpdmF0ZSB2ZWhpY2xlVGlyZU9wdGlvbklEOnN0cmluZztcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQSBkZXNjcmlwdGlvbiBvZiB0aGUgY3VycmVudGx5IHNlbGVjdGVkIE9FIHRpcmUgb3B0aW9uXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHJpdmF0ZSB2ZWhpY2xlVGlyZU9wdGlvbkRlc2NyaXB0aW9uOnN0cmluZztcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVGhlIGN1cnJlbnRseSBzZWxlY3RlZCBPRSB0aXJlIG9wdGlvblxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHByaXZhdGUgdmVoaWNsZVRpcmVPcHRpb246cmlkZXN0eWxlci5EZXNjcmlwdGlvbnMuVmVoaWNsZVRpcmVPcHRpb25EZXNjcmlwdGlvbk1vZGVsO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBUaGUgZGVzY3JpcHRpb24gbW9kZWwgb2YgdGhlIGN1cnJlbnRseSBkaXNwbGF5ZWQgdmVoaWNsZSxcclxuICAgICAgICAgKiBsb2FkZWQgZnJvbSB0aGUgQVBJXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHJpdmF0ZSB2ZWhpY2xlRGVzY3JpcHRpb25Nb2RlbDogcmlkZXN0eWxlci5EZXNjcmlwdGlvbnMuVmVoaWNsZURlc2NyaXB0aW9uTW9kZWw7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFRoZSByZW5kZXIgaW5zdHJ1Y3Rpb25zIGZvciB0aGUgY3VycmVudGx5IGRpc3BsYXllZCB2ZWhpY2xlXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHJpdmF0ZSBjdXJyZW50UmVuZGVySW5zdHJ1Y3Rpb25zOiByaWRlc3R5bGVyLlJlcXVlc3RzLlZlaGljbGVSZW5kZXJJbnN0cnVjdGlvbnM7XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBidWlsZENvbXBvbmVudChjb250YWluZXI6IEhUTUxFbGVtZW50KSB7XHJcbiAgICAgICAgICAgIC8vIFdhaXQgZm9yIGluaXRpYWxpemF0aW9uIGJlZm9yZSBjcmVhdGluZyB0aGUgdmlld3BvcnQgYmVjYXVzZSBpdCBkZXRlY3RzXHJcbiAgICAgICAgICAgIC8vIHRoZSBvZmZzZXQgcG9zaXRpb25pbmcgb2YgdGhlIHZpZXdwb3J0IGVsZW1lbnQgd2hlbiBjcmVhdGVkIGFuZCBvdXIgQ1NTXHJcbiAgICAgICAgICAgIC8vIGlzbid0IGd1YXJhbnRlZWQgdG8gYmUgbG9hZGVkIHVudGlsIHRoZSBpbml0aWFsaXplZCBldmVudFxyXG4gICAgICAgICAgICB0aGlzLmV2ZW50cy5vbignaW5pdGlhbGl6ZWQnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldHVwVmlld3BvcnQoY29udGFpbmVyKTtcclxuICAgICAgICAgICAgICAgIC8vIFNldHVwIGluaXRpYWwgdGFiIGxheW91dFxyXG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVUYWJMYXlvdXQoKTtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLmV2ZW50cy5vbigndmVoaWNsZS1zZWxlY3RlZCcsICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy52ZWhpY2xlRGlmZmVyZW50RnJvbVN0YXRlKCkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudmlld3BvcnQuUmVzZXQoKTtcclxuICAgICAgICAgICAgICAgIH0pXHJcblxyXG4gICAgICAgICAgICAgICAgLy8gSGlkZSB0aGUgc2hhcmUgYnV0dG9uIGlmIHNoYXJpbmcgaXMgZGlzYWJsZWRcclxuICAgICAgICAgICAgICAgIGlmICghdGhpcy5zaG93Y2FzZS5zZXR0aW5nc0Zyb21BUEkuRW5hYmxlU2hhcmluZylcclxuICAgICAgICAgICAgICAgICAgICBzaGFyZUJ1dHRvbi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBsZXQgY291bnRUaXJlQnJhbmRzID0gYXBpLnJlcXVlc3QoXCJ0aXJlL2NvdW50YnJhbmRzXCIsIHRoaXMuc2hvd2Nhc2UuZmlsdGVycy50aXJlRmlsdGVycy5nZXRGaWx0ZXJzKCkpO1xyXG4gICAgICAgICAgICAgICAgbGV0IGNvdW50V2hlZWxCcmFuZHMgPSBhcGkucmVxdWVzdChcIndoZWVsL2NvdW50YnJhbmRzXCIsIHRoaXMuc2hvd2Nhc2UuZmlsdGVycy53aGVlbEZpbHRlcnMuZ2V0RmlsdGVycygpKTtcclxuXHJcbiAgICAgICAgICAgICAgICBQcm9taXNlSGVscGVyLmFsbChbY291bnRUaXJlQnJhbmRzLCBjb3VudFdoZWVsQnJhbmRzXSkuZG9uZShyZXN1bHRzID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgdGlyZUJyYW5kQ291bnQgPSByZXN1bHRzWzBdLkNvdW50O1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCB3aGVlbEJyYW5kQ291bnQgPSByZXN1bHRzWzFdLkNvdW50O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoIXRpcmVCcmFuZENvdW50KSB0aGlzLmN1c3RvbWl6YXRpb25Db21wb25lbnRTZXR0aW5ncy50aXJlcy5lbmFibGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF3aGVlbEJyYW5kQ291bnQpIHRoaXMuY3VzdG9taXphdGlvbkNvbXBvbmVudFNldHRpbmdzLndoZWVscy5lbmFibGVkID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlVGFicygpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5zZXR1cFRhYnMoKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuY2hhbmdlV2hlZWxTaXplID0gbmV3IFJpZGVTdHlsZXJTaG93Y2FzZUNoYW5nZVdoZWVsU2l6ZSh0aGlzLnNob3djYXNlKTtcclxuICAgICAgICAgICAgdGhpcy5jaGFuZ2VXaGVlbFNpemUub3B0aW9uU2VsZWN0ZWRDYWxsYmFjayA9IG5ld09wdGlvbiA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLmV4dGVuZERhdGEoe1xyXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRXaGVlbEZpdG1lbnQ6IG5ld09wdGlvblxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVZpZXdwb3J0KHtcclxuICAgICAgICAgICAgICAgICAgICBXaGVlbEZpdG1lbnQ6IG5ld09wdGlvbi5XaGVlbEZpdG1lbnRJRFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMuY29tcG9uZW50cyA9IFtcclxuICAgICAgICAgICAgICAgIHRoaXMudmVoaWNsZURldGFpbHMgPSBuZXcgVmVoaWNsZURldGFpbHModGhpcy5zaG93Y2FzZSksXHJcbiAgICAgICAgICAgICAgICBuZXcgV2hlZWxEZXRhaWxzKHRoaXMuc2hvd2Nhc2UpLFxyXG4gICAgICAgICAgICAgICAgbmV3IFRpcmVEZXRhaWxzKHRoaXMuc2hvd2Nhc2UpLFxyXG4gICAgICAgICAgICAgICAgdGhpcy50YWJCYXIsXHJcbiAgICAgICAgICAgICAgICB0aGlzLmNoYW5nZVdoZWVsU2l6ZVxyXG4gICAgICAgICAgICBdO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5jdXN0b21pemF0aW9uQ29tcG9uZW50Q29udGFpbmVyID0gSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XHJcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IGN1c3RvbWl6YXRpb25zQ2xhc3MsXHJcbiAgICAgICAgICAgICAgICBhcHBlbmRUbzogdGhpcy5jb21wb25lbnRcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAvLyBBcHBlbmQgYW55IHN1YiBjb21wb25lbnRzXHJcbiAgICAgICAgICAgIGZvciAobGV0IGNvbXBvbmVudCBvZiB0aGlzLmNvbXBvbmVudHMpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY29tcG9uZW50LmFwcGVuZENoaWxkKGNvbXBvbmVudC5jb21wb25lbnQpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLnJvdGF0ZUVsZW1lbnQgPSBIVE1MSGVscGVyLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcclxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ3JpZGVzdHlsZXItc2hvd2Nhc2Utcm90YXRlLXZlaGljbGUnLFxyXG4gICAgICAgICAgICAgICAgYXBwZW5kVG86IHRoaXMuY29tcG9uZW50XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5yb3RhdGVFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zd2l0Y2hBbmdsZSgpO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIEhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCh7XHJcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdyaWRlc3R5bGVyLXNob3djYXNlLWN1c3RvbWl6YXRpb24tY29tcG9uZW50LXRpdGxlLWNvbnRhaW5lcicsXHJcbiAgICAgICAgICAgICAgICBhcHBlbmRUbzogdGhpcy5jb21wb25lbnQsXHJcbiAgICAgICAgICAgICAgICBhcHBlbmQ6IFtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnRpdGxlRWxlbWVudCA9IEhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ3JpZGVzdHlsZXItc2hvd2Nhc2UtY3VzdG9taXphdGlvbi1jb21wb25lbnQtdGl0bGUnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhcHBlbmRUbzogdGhpcy5jb21wb25lbnRcclxuICAgICAgICAgICAgICAgICAgICB9KSxcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmZpbHRlckJ1dHRvbiA9IEhUTUxIZWxwZXIuY3JlYXRlQnV0dG9uKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogc3RyaW5ncy5nZXRTdHJpbmcoJ2ZpbHRlci1yZXN1bHRzJyksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNraW5ueTogdHJ1ZVxyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICBdXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgdGhpcy5maWx0ZXJCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNob3dGaWx0ZXJzKCk7XHJcbiAgICAgICAgICAgIH0pXHJcblxyXG4gICAgICAgICAgICBsZXQgc2hhcmVCdXR0b24gPSBIVE1MSGVscGVyLmNyZWF0ZUJ1dHRvbih7XHJcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdyaWRlc3R5bGVyLXNoYXJlLW15LXZlaGljbGUtYnV0dG9uJyxcclxuICAgICAgICAgICAgICAgIHRleHQ6IHN0cmluZ3MuZ2V0U3RyaW5nKCdzaGFyZS1teS12ZWhpY2xlJyksXHJcbiAgICAgICAgICAgICAgICBhcHBlbmRUbzogdGhpcy5jb21wb25lbnQsXHJcbiAgICAgICAgICAgICAgICBzdHlsZToge1xyXG4gICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6ICcxJ1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGRpc2FibGVkOiB0cnVlXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgc2hhcmVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBuZXcgUmlkZVN0eWxlclNob3djYXNlU2hhcmVNb2RhbCh0aGlzLnNob3djYXNlLCB0aGlzLmN1cnJlbnRSZW5kZXJJbnN0cnVjdGlvbnMpLnNob3coKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnN0YXRlLmFmdGVyRGF0YUNoYW5nZShzdGF0ZURhdGEgPT4ge1xyXG4gICAgICAgICAgICAgICAgc2hhcmVCdXR0b24uZGlzYWJsZWQgPSBzdGF0ZURhdGEuY3VycmVudFdoZWVsID8gZmFsc2UgOiB0cnVlO1xyXG4gICAgICAgICAgICB9KVxyXG5cclxuICAgICAgICAgICAgLy8gU3RhcnQgbGlzdGVuaW5nIGZvciByZXNpemUgZXZlbnRzXHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRzLm9uKCdyZXNpemVkJywgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNWaXNpYmxlKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVZpZXdwb3J0KCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgLy8gU3RhcnQgbGlzdGVuaW5nIGZvciBicmVha3BvaW50IGNoYW5nZXNcclxuICAgICAgICAgICAgdGhpcy5ldmVudHMub24oJ2JyZWFrcG9pbnQtY2hhbmdlZCcsIG5ld0JyZWFrcG9pbnQgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVUYWJMYXlvdXQoKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnZlaGljbGVEZXRhaWxzLnBhaW50U3dhdGNoQ2xpY2tDYWxsYmFjayA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0QWN0aXZlQ3VzdG9taXphdGlvbkNvbXBvbmVudCh0aGlzLmN1c3RvbWl6YXRpb25Db21wb25lbnRzLnBhaW50KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBzZXR1cFZpZXdwb3J0KGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpIHtcclxuICAgICAgICAgICAgbGV0IHZpZXdwb3J0RWxlbWVudCA9IEhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCgnZGl2Jywge1xyXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAncmlkZXN0eWxlci1zaG93Y2FzZS12aWV3cG9ydCcsXHJcbiAgICAgICAgICAgICAgICBhcHBlbmRUbzogY29udGFpbmVyXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgdmlld3BvcnRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zd2l0Y2hBbmdsZSgpO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMudmlld3BvcnQgPSBuZXcgUmlkZVN0eWxlclZpZXdwb3J0KHZpZXdwb3J0RWxlbWVudCk7XHJcblxyXG4gICAgICAgICAgICAvL0xpc3RlbnMgZm9yIG5ldyBjYXIgc2VsZWN0aW9uIGFuZCBoaWRlcyB2ZWhpY2xlIGJldHdlZW4gdXBkYXRlc1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSB1cGRhdGVUYWJzKCkge1xyXG4gICAgICAgICAgICBsZXQgdGFiczpUYWJbXSA9IFtdO1xyXG5cclxuICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgb2YgdGhpcy5jdXN0b21pemF0aW9uQ29tcG9uZW50T3JkZXIpIHtcclxuICAgICAgICAgICAgICAgIC8vIFNraXAgZGlzYWJsZWQgY29tcG9uZW50c1xyXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLmN1c3RvbWl6YXRpb25Db21wb25lbnRTZXR0aW5nc1trZXldLmVuYWJsZWQpIGNvbnRpbnVlO1xyXG5cclxuICAgICAgICAgICAgICAgIHRhYnMucHVzaCh0aGlzLnRhYnNba2V5XSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMudGFiQmFyLnNldFRhYnModGFicyk7XHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlVGFiTGF5b3V0KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIHVwZGF0ZVRhYkxheW91dCgpIHtcclxuICAgICAgICAgICAgY29uc3QgY3VycmVudEJyZWFrcG9pbnQgPSB0aGlzLnNob3djYXNlLnN0eWxlLmdldEN1cnJlbnRCcmVha3BvaW50KCk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBob3Jpem9udGFsOmJvb2xlYW4gPSBjdXJyZW50QnJlYWtwb2ludCAmJiBjdXJyZW50QnJlYWtwb2ludFswXSA9PT0gJ3Bob25lLXBvcnRyYWl0JztcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHRoaXMudGFiQmFyLnNldE1vZGUoaG9yaXpvbnRhbCA/ICdob3Jpem9udGFsJyA6ICd2ZXJ0aWNhbCcpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBzZXR1cFRhYnMoKSB7XHJcbiAgICAgICAgICAgIHRoaXMudGFiQmFyICA9IG5ldyBSaWRlU3R5bGVyU2hvd2Nhc2VUYWJCYXIodGhpcy5zaG93Y2FzZSk7XHJcblxyXG4gICAgICAgICAgICAvLyBEZWZpbmUgb3VyIHRhYnNcclxuICAgICAgICAgICAgdGhpcy50YWJzID0ge1xyXG4gICAgICAgICAgICAgICAgcGFpbnQ6IG5ldyBSaWRlU3R5bGVyU2hvd2Nhc2VUYWJCYXIuVGFiKHtcclxuICAgICAgICAgICAgICAgICAgICBpY29uOiAncGFpbnQnLFxyXG4gICAgICAgICAgICAgICAgICAgIGtleTogJ3BhaW50JyxcclxuICAgICAgICAgICAgICAgICAgICBsYWJlbDogc3RyaW5ncy5nZXRTdHJpbmcoJ3BhaW50JylcclxuICAgICAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICAgICAgd2hlZWxzOiBuZXcgUmlkZVN0eWxlclNob3djYXNlVGFiQmFyLlRhYih7XHJcbiAgICAgICAgICAgICAgICAgICAgaWNvbjogJ3doZWVsJyxcclxuICAgICAgICAgICAgICAgICAgICBrZXk6ICd3aGVlbHMnLFxyXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsOiBzdHJpbmdzLmdldFN0cmluZygnd2hlZWxzJylcclxuICAgICAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICAgICAgdGlyZXM6IG5ldyBSaWRlU3R5bGVyU2hvd2Nhc2VUYWJCYXIuVGFiKHtcclxuICAgICAgICAgICAgICAgICAgICBpY29uOiAndGlyZScsXHJcbiAgICAgICAgICAgICAgICAgICAga2V5OiAndGlyZXMnLFxyXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsOiBzdHJpbmdzLmdldFN0cmluZygndGlyZXMnKVxyXG4gICAgICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICAgICAgICBzdXNwZW5zaW9uOiBuZXcgUmlkZVN0eWxlclNob3djYXNlVGFiQmFyLlRhYih7XHJcbiAgICAgICAgICAgICAgICAgICAgaWNvbjogJ3N1c3BlbnNpb24nLFxyXG4gICAgICAgICAgICAgICAgICAgIGtleTogJ3N1c3BlbnNpb24nLFxyXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsOiBzdHJpbmdzLmdldFN0cmluZygnc3VzcGVuc2lvbicpXHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgLy8gU3dpdGNoIHRoZSBib3R0b20gdmlldywgdGhlIGN1c3RvbWl6YXRpb24gY29tcG9uZW50IHdoZW4gYSB0YWIgaXMgY2xpY2tlZCBvblxyXG4gICAgICAgICAgICB0aGlzLnRhYkJhci50YWJTd2l0Y2hlZENhbGxiYWNrID0gZSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBuZXdUYWIgPSBlLm5ld1RhYjtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGtleSA9IG5ld1RhYi5rZXk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmN1c3RvbWl6YXRpb25Db21wb25lbnRzICYmIGtleSBpbiB0aGlzLmN1c3RvbWl6YXRpb25Db21wb25lbnRzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRBY3RpdmVDdXN0b21pemF0aW9uQ29tcG9uZW50KHRoaXMuY3VzdG9taXphdGlvbkNvbXBvbmVudHNba2V5XSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIHZlaGljbGVEaWZmZXJlbnRGcm9tU3RhdGUoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgICAgIGxldCBzdGF0ZURhdGEgPSB0aGlzLnN0YXRlLmdldERhdGEoKTtcclxuICAgICAgICAgICAgaWYgKCFzdGF0ZURhdGEuY3VycmVudFZlaGljbGVDb25maWd1cmF0aW9uSUQgfHwgIXN0YXRlRGF0YS5jdXJyZW50VmVoaWNsZVRpcmVPcHRpb25JRCkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignVHJ5aW5nIHRvIHNob3cgdGhlIHZpc3VhbGl6ZSBzY3JlZW4gd2l0aG91dCBhIHZlaGljbGUgY29uZmlndXJhdGlvbiBvciB0aXJlIG9wdGlvbi4nKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgbGV0IHZlaGljbGVDaGFuZ2VkID0gIUdVSURIZWxwZXIuYXJlRXF1YWwoc3RhdGVEYXRhLmN1cnJlbnRWZWhpY2xlQ29uZmlndXJhdGlvbklELCB0aGlzLnZlaGljbGVDb25maWd1cmF0aW9uSUQpO1xyXG4gICAgICAgICAgICBsZXQgdGlyZU9wdGlvbkNoYW5nZWQgPSAhR1VJREhlbHBlci5hcmVFcXVhbChzdGF0ZURhdGEuY3VycmVudFZlaGljbGVUaXJlT3B0aW9uSUQsIHRoaXMudmVoaWNsZVRpcmVPcHRpb25JRCk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdmVoaWNsZUNoYW5nZWQgfHwgdGlyZU9wdGlvbkNoYW5nZWQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgb25EaXNwbGF5KCkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy52ZWhpY2xlRGlmZmVyZW50RnJvbVN0YXRlKCkpIHtcclxuICAgICAgICAgICAgICAgIGxldCBzdGF0ZURhdGEgPSB0aGlzLnN0YXRlLmdldERhdGEoKTtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLnZlaGljbGVDb25maWd1cmF0aW9uSUQgPSBzdGF0ZURhdGEuY3VycmVudFZlaGljbGVDb25maWd1cmF0aW9uSURcclxuICAgICAgICAgICAgICAgIHRoaXMudmVoaWNsZURlc2NyaXB0aW9uID0gc3RhdGVEYXRhLmN1cnJlbnRWZWhpY2xlRGVzY3JpcHRpb247ICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgdGhpcy52ZWhpY2xlVGlyZU9wdGlvbklEID0gc3RhdGVEYXRhLmN1cnJlbnRWZWhpY2xlVGlyZU9wdGlvbklEO1xyXG4gICAgICAgICAgICAgICAgdGhpcy52ZWhpY2xlVGlyZU9wdGlvbkRlc2NyaXB0aW9uID0gc3RhdGVEYXRhLmN1cnJlbnRWZWhpY2xlVGlyZU9wdGlvbkRlc2NyaXB0aW9uO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICB0aGlzLnRhYkJhci5jbGVhckFjdGl2ZVRhYigpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vblZlaGljbGVDaGFuZ2VkKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgb25WZWhpY2xlQ2hhbmdlZCgpIHtcclxuICAgICAgICAgICAgSFRNTEhlbHBlci5lbXB0eSh0aGlzLmN1c3RvbWl6YXRpb25Db21wb25lbnRDb250YWluZXIpO1xyXG5cclxuICAgICAgICAgICAgLy8gU2V0IHRoZSBjdXN0b21pemF0aW9uIGNvbnRhaW5lciBhcyBsb2FkaW5nIHdoaWxlIHdlJ3JlIGxvYWRpbmcgYWRkaXRpb25hbCBpbmZvcm1hdGlvblxyXG4gICAgICAgICAgICAvLyBhYm91dCB0aGUgdmVoaWNsZVxyXG4gICAgICAgICAgICB0aGlzLmN1c3RvbWl6YXRpb25Db21wb25lbnRDb250YWluZXIuY2xhc3NMaXN0LmFkZChsb2FkaW5nQ2xhc3MpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgdGhpcy51cGRhdGVUYWJzKCk7XHJcblxyXG4gICAgICAgICAgICAvLyBEZXNlbGVjdCBhbnkgYWN0aXZlIHRhYlxyXG4gICAgICAgICAgICB0aGlzLnRhYkJhci5jbGVhckFjdGl2ZVRhYigpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5yb3RhdGVFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2luJyk7XHJcblxyXG4gICAgICAgICAgICAvLyBMb2FkIHRoZSB2ZWhpY2xlJ3MgZGVzY3JpcHRpb24gbW9kZWxcclxuICAgICAgICAgICAgbGV0IGdldFZlaGljbGVEZXNjcmlwdGlvbiA9IGFwaS5yZXF1ZXN0KFwidmVoaWNsZS9nZXRkZXNjcmlwdGlvbnNcIiwge1xyXG4gICAgICAgICAgICAgICAgQ291bnQ6IDEsXHJcbiAgICAgICAgICAgICAgICBWZWhpY2xlQ29uZmlndXJhdGlvbjogdGhpcy52ZWhpY2xlQ29uZmlndXJhdGlvbklEXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgbGV0IGdldFZlaGljbGVUaXJlT3B0aW9uID0gYXBpLnJlcXVlc3QoJ3ZlaGljbGUvZ2V0dGlyZW9wdGlvbmRldGFpbHMnLCB7XHJcbiAgICAgICAgICAgICAgICBWZWhpY2xlQ29uZmlndXJhdGlvbjogdGhpcy52ZWhpY2xlQ29uZmlndXJhdGlvbklEXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgUHJvbWlzZUhlbHBlci5hbGwoW2dldFZlaGljbGVEZXNjcmlwdGlvbiwgZ2V0VmVoaWNsZVRpcmVPcHRpb25dKS5kb25lKHJlc3BvbnNlcyA9PiB7XHJcbiAgICAgICAgICAgICAgICBsZXQgdmVoaWNsZURlc2NyaXB0aW9uID0gdGhpcy52ZWhpY2xlRGVzY3JpcHRpb25Nb2RlbCA9IHJlc3BvbnNlc1swXS5EZXNjcmlwdGlvbnNbMF07XHJcbiAgICAgICAgICAgICAgICBsZXQgdmVoaWNsZVRpcmVPcHRpb246cmlkZXN0eWxlci5EZXNjcmlwdGlvbnMuVmVoaWNsZVRpcmVPcHRpb25EZXNjcmlwdGlvbk1vZGVsO1xyXG4gICAgICAgICAgICAgICAgbGV0IHNlbGVjdGVkVGlyZU9wdGlvbklEOkd1aWQgPSBHVUlESGVscGVyLnBhcnNlKHRoaXMudmVoaWNsZVRpcmVPcHRpb25JRCk7XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgdGlyZU9wdGlvbiBvZiByZXNwb25zZXNbMV0uRGV0YWlscykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChHVUlESGVscGVyLmFyZUVxdWFsKHRpcmVPcHRpb24uVGlyZU9wdGlvbklELCBzZWxlY3RlZFRpcmVPcHRpb25JRCkpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2ZWhpY2xlVGlyZU9wdGlvbiA9IHRpcmVPcHRpb247XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLnZlaGljbGVUaXJlT3B0aW9uID0gdmVoaWNsZVRpcmVPcHRpb247XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5leHRlbmREYXRhKHtcclxuICAgICAgICAgICAgICAgICAgICB2ZWhpY2xlSGFzQW5nbGVkSW1hZ2U6IHZlaGljbGVEZXNjcmlwdGlvbi5IYXNBbmdsZWRJbWFnZSxcclxuICAgICAgICAgICAgICAgICAgICB2ZWhpY2xlSGFzU2lkZUltYWdlOiB2ZWhpY2xlRGVzY3JpcHRpb24uSGFzU2lkZUltYWdlLFxyXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRUaXJlT3B0aW9uOiB2ZWhpY2xlVGlyZU9wdGlvbixcclxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50VmVoaWNsZURlc2NyaXB0aW9uTW9kZWw6IHZlaGljbGVEZXNjcmlwdGlvbixcclxuXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHRoaXMuaW5pdGlhbGl6ZUZvck5ld1ZlaGljbGUoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGluaXRpYWxpemVGb3JOZXdWZWhpY2xlKCkge1xyXG4gICAgICAgICAgICB0aGlzLmV2ZW50cy50cmlnZ2VyKFwidmVoaWNsZS1kZXNjcmlwdGlvbi1sb2FkZWRcIiwgdGhpcy52ZWhpY2xlRGVzY3JpcHRpb25Nb2RlbCk7XHJcbiAgICAgICAgICAgIHRoaXMuY3VycmVudFJlbmRlckluc3RydWN0aW9ucyA9IHt9O1xyXG4gICAgICAgICAgICB0aGlzLnRhYkJhci5zZXRBY3RpdmVUYWIodGhpcy50YWJzLnBhaW50KTtcclxuICAgICAgICAgICAgdGhpcy52aWV3cG9ydC5SZXNldCgpO1xyXG5cclxuICAgICAgICAgICAgLy8gQ3JlYXRlIHRoZSBjb21wb25lbnRzIHRoYXQgd2lsbCBiZSBzd2l0Y2hlZCB3aXRoIHRoZSB0YWJzXHJcbiAgICAgICAgICAgIHRoaXMuY3VzdG9taXphdGlvbkNvbXBvbmVudHMgPSB7XHJcbiAgICAgICAgICAgICAgICBwYWludDogbmV3IFJpZGVTdHlsZXJTaG93Y2FzZVBhaW50U2VsZWN0b3IodGhpcy5zaG93Y2FzZSksXHJcbiAgICAgICAgICAgICAgICB3aGVlbHM6IG5ldyBSaWRlU3R5bGVyU2hvd2Nhc2VXaGVlbFNlbGVjdG9yKHRoaXMuc2hvd2Nhc2UpLFxyXG4gICAgICAgICAgICAgICAgdGlyZXM6IG5ldyBSaWRlU3R5bGVyU2hvd2Nhc2VUaXJlU2VsZWN0b3IodGhpcy5zaG93Y2FzZSksXHJcbiAgICAgICAgICAgICAgICBzdXNwZW5zaW9uOiBuZXcgUmlkZVN0eWxlclNob3djYXNlU3VzcGVuc2lvblNlbGVjdG9yKHRoaXMuc2hvd2Nhc2UpXHJcbiAgICAgICAgICAgIH07XHJcblxyXG5cclxuICAgICAgICAgICAgdGhpcy5jdXN0b21pemF0aW9uQ29tcG9uZW50cy53aGVlbHMuc2V0RmlsdGVycyh0aGlzLnNob3djYXNlLmZpbHRlcnMud2hlZWxGaWx0ZXJzLmdldEZpbHRlcnMoKSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnNob3djYXNlLmZpbHRlcnMud2hlZWxGaWx0ZXJzLm9uRmlsdGVyc0NoYW5nZWQgPSBmaWx0ZXJzID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY3VzdG9taXphdGlvbkNvbXBvbmVudHMud2hlZWxzLnNldEZpbHRlcnMoZmlsdGVycyk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB0aGlzLnNob3djYXNlLmZpbHRlcnMudGlyZUZpbHRlcnMub25GaWx0ZXJzQ2hhbmdlZCA9IGZpbHRlcnMgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jdXN0b21pemF0aW9uQ29tcG9uZW50cy50aXJlcy5zZXRGaWx0ZXJzKGZpbHRlcnMpO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgdGhpcy5jdXN0b21pemF0aW9uQ29tcG9uZW50cy5wYWludC5vblBhaW50U2NoZW1lU2VsZWN0ZWQgPSBwYWludFNjaGVtZSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmN1c3RvbWl6YXRpb25Db21wb25lbnRzLnBhaW50LnNldE9wdGlvbklzTG9hZGluZyh0cnVlKTtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVZpZXdwb3J0KHtcclxuICAgICAgICAgICAgICAgICAgICBQYWludENvbG9yOiBwYWludFNjaGVtZS5Db2xvcnNbMF0uSGV4XHJcbiAgICAgICAgICAgICAgICB9KS5hbHdheXMoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY3VzdG9taXphdGlvbkNvbXBvbmVudHMucGFpbnQuc2V0T3B0aW9uSXNMb2FkaW5nKGZhbHNlKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgdGhpcy5jdXN0b21pemF0aW9uQ29tcG9uZW50cy53aGVlbHMucHJvZHVjdFNlbGVjdGVkQ2FsbGJhY2sgPSBtb2RlbCA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmN1c3RvbWl6YXRpb25Db21wb25lbnRzLndoZWVscy5zZXRPcHRpb25Jc0xvYWRpbmcodHJ1ZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgY2FuUmVuZGVyT25DdXJyZW50QW5nbGUgPVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaW1hZ2VUeXBlID09PSByaWRlc3R5bGVyLkRhdGFPYmplY3RzLlZlaGljbGVSZXNvdXJjZVR5cGUuQW5nbGUgJiYgbW9kZWwuSGFzQW5nbGVJbWFnZSB8fFxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaW1hZ2VUeXBlID09PSByaWRlc3R5bGVyLkRhdGFPYmplY3RzLlZlaGljbGVSZXNvdXJjZVR5cGUuU2lkZSAmJiBtb2RlbC5IYXNTaWRlSW1hZ2U7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWNhblJlbmRlck9uQ3VycmVudEFuZ2xlKSB0aGlzLnN3aXRjaEFuZ2xlKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgYXBpLnJlcXVlc3QoJ3doZWVsL2dldGZpdG1lbnRkZXNjcmlwdGlvbnMnLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgVmVoaWNsZUNvbmZpZ3VyYXRpb246IHRoaXMudmVoaWNsZUNvbmZpZ3VyYXRpb25JRCxcclxuICAgICAgICAgICAgICAgICAgICBXaGVlbE1vZGVsOiBtb2RlbC5XaGVlbE1vZGVsSUQsXHJcbiAgICAgICAgICAgICAgICAgICAgSW5jbHVkZVByaWNpbmc6IHRydWVcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgLmRvbmUocmVzcG9uc2UgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgZml0bWVudHM6cmlkZXN0eWxlci5EZXNjcmlwdGlvbnMuV2hlZWxGaXRtZW50RGVzY3JpcHRpb25Nb2RlbFtdID0gcmVzcG9uc2UuRml0bWVudHM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBiZXN0Rml0bWVudDpyaWRlc3R5bGVyLkRlc2NyaXB0aW9ucy5XaGVlbEZpdG1lbnREZXNjcmlwdGlvbk1vZGVsID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgdGFyZ2V0RGlhbWV0ZXIgPSB0aGlzLnZlaGljbGVUaXJlT3B0aW9uLkZyb250Lkluc2lkZURpYW1ldGVyO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgbW9kZWwuV2hlZWxGaXRtZW50cyA9IGZpdG1lbnRzO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgZml0bWVudHMuc29ydChmdW5jdGlvbiAoYSxiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhRGlmZiA9IE1hdGguYWJzKGEuRGlhbWV0ZXJNaW4gLSB0YXJnZXREaWFtZXRlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBiRGlmZiA9IE1hdGguYWJzKGIuRGlhbWV0ZXJNaW4gLSB0YXJnZXREaWFtZXRlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhRGlmZiAtIGJEaWZmO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJlc3RGaXRtZW50ID0gZml0bWVudHNbMF07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLmV4dGVuZERhdGEoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFdoZWVsOiBtb2RlbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRXaGVlbEZpdG1lbnQ6IGJlc3RGaXRtZW50XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGFuZ2VXaGVlbFNpemUuc2V0Rml0bWVudE9wdGlvbnMoZml0bWVudHMsIGJlc3RGaXRtZW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGFuZ2VXaGVlbFNpemUuY29tcG9uZW50LnN0eWxlLmRpc3BsYXkgPSAnJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVWaWV3cG9ydCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBXaGVlbEZpdG1lbnQ6IGJlc3RGaXRtZW50LldoZWVsRml0bWVudElEXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pLmFsd2F5cygoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmN1c3RvbWl6YXRpb25Db21wb25lbnRzLndoZWVscy5zZXRPcHRpb25Jc0xvYWRpbmcoZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgIC5mYWlsKCgpID0+IHRoaXMuY3VzdG9taXphdGlvbkNvbXBvbmVudHMud2hlZWxzLnNldE9wdGlvbklzTG9hZGluZyhmYWxzZSkpO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgdGhpcy5jdXN0b21pemF0aW9uQ29tcG9uZW50cy50aXJlcy5wcm9kdWN0U2VsZWN0ZWRDYWxsYmFjayA9IG1vZGVsID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUuZXh0ZW5kRGF0YSh7XHJcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudFRpcmU6IG1vZGVsXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuY3VzdG9taXphdGlvbkNvbXBvbmVudHMuc3VzcGVuc2lvbi5zdXNwZW5zaW9uQ2hhbmdlQ2FsbGJhY2sgPSByZW5kZXJVcGRhdGUgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVWaWV3cG9ydChyZW5kZXJVcGRhdGUpO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgdGhpcy5zZXRBY3RpdmVDdXN0b21pemF0aW9uQ29tcG9uZW50KHRoaXMuY3VzdG9taXphdGlvbkNvbXBvbmVudHMud2hlZWxzKTtcclxuXHJcbiAgICAgICAgICAgIGZvciAobGV0IGN1c3RvbWl6YXRpb25Db21wb25lbnQgb2YgT2JqZWN0SGVscGVyLmdldFZhbHVlczxJQ29tcG9uZW50Pih0aGlzLmN1c3RvbWl6YXRpb25Db21wb25lbnRzKSkge1xyXG4gICAgICAgICAgICAgICAgY3VzdG9taXphdGlvbkNvbXBvbmVudC5jb21wb25lbnQuY2xhc3NMaXN0LmFkZCgncmlkZXN0eWxlci1zaG93Y2FzZS1jdXN0b21pemF0aW9uLWNvbXBvbmVudCcpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jdXN0b21pemF0aW9uQ29tcG9uZW50Q29udGFpbmVyLmFwcGVuZENoaWxkKGN1c3RvbWl6YXRpb25Db21wb25lbnQuY29tcG9uZW50KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5pbWFnZVR5cGUgPSByaWRlc3R5bGVyLkRhdGFPYmplY3RzLlZlaGljbGVSZXNvdXJjZVR5cGUuQW5nbGU7XHJcblxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKCF0aGlzLnZlaGljbGVEZXNjcmlwdGlvbk1vZGVsLkhhc0FuZ2xlZEltYWdlKSB0aGlzLmltYWdlVHlwZSA9IHJpZGVzdHlsZXIuRGF0YU9iamVjdHMuVmVoaWNsZVJlc291cmNlVHlwZS5TaWRlO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5yb3RhdGVFbGVtZW50LnN0eWxlLmRpc3BsYXkgPSB0aGlzLmNhblN3aXRjaEFuZ2xlKCkgPyAnJyA6ICdub25lJztcclxuXHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlVmlld3BvcnQoeyBcclxuICAgICAgICAgICAgICAgIFZlaGljbGVDb25maWd1cmF0aW9uOiB0aGlzLnZlaGljbGVDb25maWd1cmF0aW9uSUQsXHJcbiAgICAgICAgICAgICAgICBWZWhpY2xlVGlyZU9wdGlvbjogdGhpcy52ZWhpY2xlVGlyZU9wdGlvbklELFxyXG4gICAgICAgICAgICAgICAgUG9zaXRpb25YOiByaWRlc3R5bGVyLlJlcXVlc3RzLkltYWdlUG9zaXRpb24uQ2VudGVyLFxyXG4gICAgICAgICAgICAgICAgUG9zaXRpb25ZOiByaWRlc3R5bGVyLlJlcXVlc3RzLkltYWdlUG9zaXRpb24uRmFyLFxyXG4gICAgICAgICAgICAgICAgVHlwZTogdGhpcy5pbWFnZVR5cGVcclxuICAgICAgICAgICAgfSkuZG9uZSgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJvdGF0ZUVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnaW4nKTtcclxuICAgICAgICAgICAgfSlcclxuXHJcbiAgICAgICAgICAgIHRoaXMuY3VzdG9taXphdGlvbkNvbXBvbmVudENvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKGxvYWRpbmdDbGFzcyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGFjdGl2ZUN1c3RvbWl6YXRpb25Db21wb25lbnQ6SUNvbXBvbmVudDtcclxuICAgICAgICBwcml2YXRlIHNldEFjdGl2ZUN1c3RvbWl6YXRpb25Db21wb25lbnQoY3VzdG9taXphdGlvbkNvbXBvbmVudDpJQ29tcG9uZW50KSB7XHJcbiAgICAgICAgICAgIGxldCBzdGF0ZURhdGEgPSB0aGlzLnN0YXRlLmdldERhdGEoKTtcclxuICAgICAgICAgICAgbGV0IGNvbXBvbmVudEtleTpzdHJpbmcgPSB0aGlzLmdldENvbXBvbmVudEtleShjdXN0b21pemF0aW9uQ29tcG9uZW50KTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGxldCBzZXR0aW5nczpDdXN0b21pemF0aW9uQ29tcG9uZW50U2V0dGluZ3MgPSB0aGlzLmN1c3RvbWl6YXRpb25Db21wb25lbnRTZXR0aW5nc1tjb21wb25lbnRLZXldO1xyXG4gICAgICAgICAgICBsZXQgdGFiOlJpZGVTdHlsZXJTaG93Y2FzZVRhYkJhci5UYWIgPSB0aGlzLnRhYnNbY29tcG9uZW50S2V5XTtcclxuXHJcbiAgICAgICAgICAgIGlmICh0YWIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudGFiQmFyLnNldEFjdGl2ZVRhYih0YWIpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5hY3RpdmVDdXN0b21pemF0aW9uQ29tcG9uZW50KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFjdGl2ZUN1c3RvbWl6YXRpb25Db21wb25lbnQuY29tcG9uZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2luJyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGN1c3RvbWl6YXRpb25Db21wb25lbnQuY29tcG9uZW50LmNsYXNzTGlzdC5hZGQoJ2luJyk7XHJcbiAgICAgICAgICAgIHRoaXMuYWN0aXZlQ3VzdG9taXphdGlvbkNvbXBvbmVudCA9IGN1c3RvbWl6YXRpb25Db21wb25lbnQ7XHJcblxyXG4gICAgICAgICAgICBpZiAodHlwZW9mIChjdXN0b21pemF0aW9uQ29tcG9uZW50IGFzIFJpZGVTdHlsZXJTaG93Y2FzZVBhZ2luYXRpb25Db21wb25lbnQpLnVwZGF0ZSA9PT0gJ2Z1bmN0aW9uJylcclxuICAgICAgICAgICAgICAgIChjdXN0b21pemF0aW9uQ29tcG9uZW50IGFzIFJpZGVTdHlsZXJTaG93Y2FzZVBhZ2luYXRpb25Db21wb25lbnQpLnVwZGF0ZSgpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5jaGFuZ2VXaGVlbFNpemUuY29tcG9uZW50LnN0eWxlLmRpc3BsYXkgPSBcclxuICAgICAgICAgICAgICAgIGN1c3RvbWl6YXRpb25Db21wb25lbnQgaW5zdGFuY2VvZiBSaWRlU3R5bGVyU2hvd2Nhc2VXaGVlbFNlbGVjdG9yICYmIHN0YXRlRGF0YS5jdXJyZW50V2hlZWwgPyBcclxuICAgICAgICAgICAgICAgICcnIDogJ25vbmUnO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5maWx0ZXJCdXR0b24uc3R5bGUuZGlzcGxheSA9IHNldHRpbmdzLnNob3dGaWx0ZXJCdXR0b24gPyAnJyA6ICdub25lJztcclxuXHJcbiAgICAgICAgICAgIEhUTUxIZWxwZXIuc2V0VGV4dCh0aGlzLnRpdGxlRWxlbWVudCwgc2V0dGluZ3MudGl0bGUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBnZXRDb21wb25lbnRLZXkoY3VzdG9taXphdGlvbkNvbXBvbmVudDpJQ29tcG9uZW50KTpzdHJpbmcge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBrZXkgaW4gdGhpcy5jdXN0b21pemF0aW9uQ29tcG9uZW50cykge1xyXG4gICAgICAgICAgICAgICAgbGV0IGNvbXBvbmVudCA9IHRoaXMuY3VzdG9taXphdGlvbkNvbXBvbmVudHNba2V5XTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoY29tcG9uZW50ID09PSBjdXN0b21pemF0aW9uQ29tcG9uZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGtleTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSB1cGRhdGVWaWV3cG9ydChpbnN0cnVjdGlvbnM/OnJpZGVzdHlsZXIuUmVxdWVzdHMuVmVoaWNsZVJlbmRlckluc3RydWN0aW9ucykge1xyXG4gICAgICAgICAgICBPYmplY3QuYXNzaWduKHRoaXMuY3VycmVudFJlbmRlckluc3RydWN0aW9ucywgaW5zdHJ1Y3Rpb25zKTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMudmlld3BvcnQuVXBkYXRlKGluc3RydWN0aW9ucyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGNhblN3aXRjaEFuZ2xlKCk6Ym9vbGVhbiB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnZlaGljbGVEZXNjcmlwdGlvbk1vZGVsLkhhc0FuZ2xlZEltYWdlICYmIHRoaXMudmVoaWNsZURlc2NyaXB0aW9uTW9kZWwuSGFzU2lkZUltYWdlIDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgc2hvd0ZpbHRlcnMoKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGFjdGl2ZUN1c3RvbWl6YXRpb25Db21wb25lbnQgPSB0aGlzLmFjdGl2ZUN1c3RvbWl6YXRpb25Db21wb25lbnQ7XHJcbiAgICAgICAgICAgIGxldCBmaWx0ZXJNb2RhbDpSaWRlU3R5bGVyU2hvd2Nhc2VGaWx0ZXJNb2RhbDxhbnksIGFueT47XHJcblxyXG4gICAgICAgICAgICBpZiAoYWN0aXZlQ3VzdG9taXphdGlvbkNvbXBvbmVudCA9PT0gdGhpcy5jdXN0b21pemF0aW9uQ29tcG9uZW50cy50aXJlcykge1xyXG4gICAgICAgICAgICAgICAgZmlsdGVyTW9kYWwgPSBuZXcgUmlkZVN0eWxlclNob3djYXNlRmlsdGVyTW9kYWwodGhpcy5zaG93Y2FzZSwge1xyXG4gICAgICAgICAgICAgICAgICAgIGZpbHRlclByb3ZpZGVyOiB0aGlzLnNob3djYXNlLmZpbHRlcnMudGlyZUZpbHRlcnMsXHJcbiAgICAgICAgICAgICAgICAgICAgc2hvd0NvdW50VGV4dEZvcm1hdDogc3RyaW5ncy5nZXRTdHJpbmcoJ3Nob3ctY291bnQtZm9ybWF0LXRpcmVzJylcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGFjdGl2ZUN1c3RvbWl6YXRpb25Db21wb25lbnQgPT09IHRoaXMuY3VzdG9taXphdGlvbkNvbXBvbmVudHMud2hlZWxzKSB7XHJcbiAgICAgICAgICAgICAgICBmaWx0ZXJNb2RhbCA9IG5ldyBSaWRlU3R5bGVyU2hvd2Nhc2VGaWx0ZXJNb2RhbCh0aGlzLnNob3djYXNlLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgZmlsdGVyUHJvdmlkZXI6IHRoaXMuc2hvd2Nhc2UuZmlsdGVycy53aGVlbEZpbHRlcnMsXHJcbiAgICAgICAgICAgICAgICAgICAgc2hvd0NvdW50VGV4dEZvcm1hdDogc3RyaW5ncy5nZXRTdHJpbmcoJ3Nob3ctY291bnQtZm9ybWF0LXdoZWVscycpXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKGZpbHRlck1vZGFsKSB7XHJcbiAgICAgICAgICAgICAgICBmaWx0ZXJNb2RhbC5zaG93KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgc3dpdGNoQW5nbGUoKSB7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5jYW5Td2l0Y2hBbmdsZSgpIHx8IHRoaXMuc3RhdGUuZ2V0RGF0YSgpLmN1cnJlbnRXaGVlbC5IYXNTaWRlSW1hZ2UgPT09IGZhbHNlKSByZXR1cm47XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5pbWFnZVR5cGUgPT09IHJpZGVzdHlsZXIuRGF0YU9iamVjdHMuVmVoaWNsZVJlc291cmNlVHlwZS5BbmdsZSkge1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuaW1hZ2VUeXBlID0gcmlkZXN0eWxlci5EYXRhT2JqZWN0cy5WZWhpY2xlUmVzb3VyY2VUeXBlLlNpZGU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgdGhpcy5pbWFnZVR5cGUgPSByaWRlc3R5bGVyLkRhdGFPYmplY3RzLlZlaGljbGVSZXNvdXJjZVR5cGUuQW5nbGU7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVZpZXdwb3J0KHtcclxuICAgICAgICAgICAgICAgIFR5cGU6IHRoaXMuaW1hZ2VUeXBlXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcblxyXG4gICAgaW50ZXJmYWNlIEN1c3RvbWl6YXRpb25Db21wb25lbnRTZXR0aW5ncyB7XHJcbiAgICAgICAgdGl0bGU6c3RyaW5nO1xyXG4gICAgICAgIHNob3dGaWx0ZXJCdXR0b246IGJvb2xlYW47XHJcbiAgICAgICAgZW5hYmxlZDogYm9vbGVhbjtcclxuICAgIH1cclxufSIsInZhciBSaWRlU3R5bGVyU2hvd2Nhc2U7XG4oZnVuY3Rpb24gKFJpZGVTdHlsZXJTaG93Y2FzZSkge1xuICAgIGNvbnN0IGN1c3RvbWl6YXRpb25zQ2xhc3MgPSAncmlkZXN0eWxlci1zaG93Y2FzZS1jdXN0b21pemF0aW9ucyc7XG4gICAgY29uc3QgbG9hZGluZ0NsYXNzID0gY3VzdG9taXphdGlvbnNDbGFzcyArICctbG9hZGluZyc7XG4gICAgY2xhc3MgUmlkZVN0eWxlclNob3djYXNlVmVoaWNsZVZpc3VhbGl6YXRpb24gZXh0ZW5kcyBSaWRlU3R5bGVyU2hvd2Nhc2UuTWFpbkNvbXBvbmVudEJhc2Uge1xuICAgICAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgICAgICB0aGlzLmN1c3RvbWl6YXRpb25Db21wb25lbnRPcmRlciA9IFsncGFpbnQnLCAnd2hlZWxzJywgJ3RpcmVzJywgJ3N1c3BlbnNpb24nXTtcbiAgICAgICAgICAgIHRoaXMuY3VzdG9taXphdGlvbkNvbXBvbmVudFNldHRpbmdzID0ge1xuICAgICAgICAgICAgICAgIHBhaW50OiB7XG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiBSaWRlU3R5bGVyU2hvd2Nhc2Uuc3RyaW5ncy5nZXRTdHJpbmcoJ3NlbGVjdC1wYWludCcpLFxuICAgICAgICAgICAgICAgICAgICBzaG93RmlsdGVyQnV0dG9uOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgZW5hYmxlZDogdHJ1ZVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgd2hlZWxzOiB7XG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiBSaWRlU3R5bGVyU2hvd2Nhc2Uuc3RyaW5ncy5nZXRTdHJpbmcoJ3NlbGVjdC13aGVlbHMnKSxcbiAgICAgICAgICAgICAgICAgICAgc2hvd0ZpbHRlckJ1dHRvbjogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgZW5hYmxlZDogdHJ1ZVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgdGlyZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IFJpZGVTdHlsZXJTaG93Y2FzZS5zdHJpbmdzLmdldFN0cmluZygnc2VsZWN0LXRpcmVzJyksXG4gICAgICAgICAgICAgICAgICAgIHNob3dGaWx0ZXJCdXR0b246IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGVuYWJsZWQ6IHRydWVcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHN1c3BlbnNpb246IHtcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IFJpZGVTdHlsZXJTaG93Y2FzZS5zdHJpbmdzLmdldFN0cmluZygnYWRqdXN0LXN1c3BlbnNpb24nKSxcbiAgICAgICAgICAgICAgICAgICAgc2hvd0ZpbHRlckJ1dHRvbjogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGVuYWJsZWQ6IHRydWVcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGJ1aWxkQ29tcG9uZW50KGNvbnRhaW5lcikge1xuICAgICAgICAgICAgLy8gV2FpdCBmb3IgaW5pdGlhbGl6YXRpb24gYmVmb3JlIGNyZWF0aW5nIHRoZSB2aWV3cG9ydCBiZWNhdXNlIGl0IGRldGVjdHNcbiAgICAgICAgICAgIC8vIHRoZSBvZmZzZXQgcG9zaXRpb25pbmcgb2YgdGhlIHZpZXdwb3J0IGVsZW1lbnQgd2hlbiBjcmVhdGVkIGFuZCBvdXIgQ1NTXG4gICAgICAgICAgICAvLyBpc24ndCBndWFyYW50ZWVkIHRvIGJlIGxvYWRlZCB1bnRpbCB0aGUgaW5pdGlhbGl6ZWQgZXZlbnRcbiAgICAgICAgICAgIHRoaXMuZXZlbnRzLm9uKCdpbml0aWFsaXplZCcsICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldHVwVmlld3BvcnQoY29udGFpbmVyKTtcbiAgICAgICAgICAgICAgICAvLyBTZXR1cCBpbml0aWFsIHRhYiBsYXlvdXRcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVRhYkxheW91dCgpO1xuICAgICAgICAgICAgICAgIHRoaXMuZXZlbnRzLm9uKCd2ZWhpY2xlLXNlbGVjdGVkJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy52ZWhpY2xlRGlmZmVyZW50RnJvbVN0YXRlKCkpXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnZpZXdwb3J0LlJlc2V0KCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgLy8gSGlkZSB0aGUgc2hhcmUgYnV0dG9uIGlmIHNoYXJpbmcgaXMgZGlzYWJsZWRcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuc2hvd2Nhc2Uuc2V0dGluZ3NGcm9tQVBJLkVuYWJsZVNoYXJpbmcpXG4gICAgICAgICAgICAgICAgICAgIHNoYXJlQnV0dG9uLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgbGV0IGNvdW50VGlyZUJyYW5kcyA9IFJpZGVTdHlsZXJTaG93Y2FzZS5hcGkucmVxdWVzdChcInRpcmUvY291bnRicmFuZHNcIiwgdGhpcy5zaG93Y2FzZS5maWx0ZXJzLnRpcmVGaWx0ZXJzLmdldEZpbHRlcnMoKSk7XG4gICAgICAgICAgICAgICAgbGV0IGNvdW50V2hlZWxCcmFuZHMgPSBSaWRlU3R5bGVyU2hvd2Nhc2UuYXBpLnJlcXVlc3QoXCJ3aGVlbC9jb3VudGJyYW5kc1wiLCB0aGlzLnNob3djYXNlLmZpbHRlcnMud2hlZWxGaWx0ZXJzLmdldEZpbHRlcnMoKSk7XG4gICAgICAgICAgICAgICAgUmlkZVN0eWxlclNob3djYXNlLlByb21pc2VIZWxwZXIuYWxsKFtjb3VudFRpcmVCcmFuZHMsIGNvdW50V2hlZWxCcmFuZHNdKS5kb25lKHJlc3VsdHMgPT4ge1xuICAgICAgICAgICAgICAgICAgICBsZXQgdGlyZUJyYW5kQ291bnQgPSByZXN1bHRzWzBdLkNvdW50O1xuICAgICAgICAgICAgICAgICAgICBsZXQgd2hlZWxCcmFuZENvdW50ID0gcmVzdWx0c1sxXS5Db3VudDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0aXJlQnJhbmRDb3VudClcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3VzdG9taXphdGlvbkNvbXBvbmVudFNldHRpbmdzLnRpcmVzLmVuYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF3aGVlbEJyYW5kQ291bnQpXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmN1c3RvbWl6YXRpb25Db21wb25lbnRTZXR0aW5ncy53aGVlbHMuZW5hYmxlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVRhYnMoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5zZXR1cFRhYnMoKTtcbiAgICAgICAgICAgIHRoaXMuY2hhbmdlV2hlZWxTaXplID0gbmV3IFJpZGVTdHlsZXJTaG93Y2FzZS5SaWRlU3R5bGVyU2hvd2Nhc2VDaGFuZ2VXaGVlbFNpemUodGhpcy5zaG93Y2FzZSk7XG4gICAgICAgICAgICB0aGlzLmNoYW5nZVdoZWVsU2l6ZS5vcHRpb25TZWxlY3RlZENhbGxiYWNrID0gbmV3T3B0aW9uID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLmV4dGVuZERhdGEoe1xuICAgICAgICAgICAgICAgICAgICBjdXJyZW50V2hlZWxGaXRtZW50OiBuZXdPcHRpb25cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVZpZXdwb3J0KHtcbiAgICAgICAgICAgICAgICAgICAgV2hlZWxGaXRtZW50OiBuZXdPcHRpb24uV2hlZWxGaXRtZW50SURcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLmNvbXBvbmVudHMgPSBbXG4gICAgICAgICAgICAgICAgdGhpcy52ZWhpY2xlRGV0YWlscyA9IG5ldyBSaWRlU3R5bGVyU2hvd2Nhc2UuVmVoaWNsZURldGFpbHModGhpcy5zaG93Y2FzZSksXG4gICAgICAgICAgICAgICAgbmV3IFJpZGVTdHlsZXJTaG93Y2FzZS5XaGVlbERldGFpbHModGhpcy5zaG93Y2FzZSksXG4gICAgICAgICAgICAgICAgbmV3IFJpZGVTdHlsZXJTaG93Y2FzZS5UaXJlRGV0YWlscyh0aGlzLnNob3djYXNlKSxcbiAgICAgICAgICAgICAgICB0aGlzLnRhYkJhcixcbiAgICAgICAgICAgICAgICB0aGlzLmNoYW5nZVdoZWVsU2l6ZVxuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIHRoaXMuY3VzdG9taXphdGlvbkNvbXBvbmVudENvbnRhaW5lciA9IFJpZGVTdHlsZXJTaG93Y2FzZS5IVE1MSGVscGVyLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IGN1c3RvbWl6YXRpb25zQ2xhc3MsXG4gICAgICAgICAgICAgICAgYXBwZW5kVG86IHRoaXMuY29tcG9uZW50XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8vIEFwcGVuZCBhbnkgc3ViIGNvbXBvbmVudHNcbiAgICAgICAgICAgIGZvciAobGV0IGNvbXBvbmVudCBvZiB0aGlzLmNvbXBvbmVudHMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbXBvbmVudC5hcHBlbmRDaGlsZChjb21wb25lbnQuY29tcG9uZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucm90YXRlRWxlbWVudCA9IFJpZGVTdHlsZXJTaG93Y2FzZS5IVE1MSGVscGVyLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdyaWRlc3R5bGVyLXNob3djYXNlLXJvdGF0ZS12ZWhpY2xlJyxcbiAgICAgICAgICAgICAgICBhcHBlbmRUbzogdGhpcy5jb21wb25lbnRcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5yb3RhdGVFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuc3dpdGNoQW5nbGUoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgUmlkZVN0eWxlclNob3djYXNlLkhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCh7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAncmlkZXN0eWxlci1zaG93Y2FzZS1jdXN0b21pemF0aW9uLWNvbXBvbmVudC10aXRsZS1jb250YWluZXInLFxuICAgICAgICAgICAgICAgIGFwcGVuZFRvOiB0aGlzLmNvbXBvbmVudCxcbiAgICAgICAgICAgICAgICBhcHBlbmQ6IFtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50aXRsZUVsZW1lbnQgPSBSaWRlU3R5bGVyU2hvd2Nhc2UuSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ3JpZGVzdHlsZXItc2hvd2Nhc2UtY3VzdG9taXphdGlvbi1jb21wb25lbnQtdGl0bGUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgYXBwZW5kVG86IHRoaXMuY29tcG9uZW50XG4gICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICAgICB0aGlzLmZpbHRlckJ1dHRvbiA9IFJpZGVTdHlsZXJTaG93Y2FzZS5IVE1MSGVscGVyLmNyZWF0ZUJ1dHRvbih7XG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiBSaWRlU3R5bGVyU2hvd2Nhc2Uuc3RyaW5ncy5nZXRTdHJpbmcoJ2ZpbHRlci1yZXN1bHRzJyksXG4gICAgICAgICAgICAgICAgICAgICAgICBza2lubnk6IHRydWVcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuZmlsdGVyQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuc2hvd0ZpbHRlcnMoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgbGV0IHNoYXJlQnV0dG9uID0gUmlkZVN0eWxlclNob3djYXNlLkhUTUxIZWxwZXIuY3JlYXRlQnV0dG9uKHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdyaWRlc3R5bGVyLXNoYXJlLW15LXZlaGljbGUtYnV0dG9uJyxcbiAgICAgICAgICAgICAgICB0ZXh0OiBSaWRlU3R5bGVyU2hvd2Nhc2Uuc3RyaW5ncy5nZXRTdHJpbmcoJ3NoYXJlLW15LXZlaGljbGUnKSxcbiAgICAgICAgICAgICAgICBhcHBlbmRUbzogdGhpcy5jb21wb25lbnQsXG4gICAgICAgICAgICAgICAgc3R5bGU6IHtcbiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogJzEnXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBkaXNhYmxlZDogdHJ1ZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBzaGFyZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgICAgICBuZXcgUmlkZVN0eWxlclNob3djYXNlLlJpZGVTdHlsZXJTaG93Y2FzZVNoYXJlTW9kYWwodGhpcy5zaG93Y2FzZSwgdGhpcy5jdXJyZW50UmVuZGVySW5zdHJ1Y3Rpb25zKS5zaG93KCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuc3RhdGUuYWZ0ZXJEYXRhQ2hhbmdlKHN0YXRlRGF0YSA9PiB7XG4gICAgICAgICAgICAgICAgc2hhcmVCdXR0b24uZGlzYWJsZWQgPSBzdGF0ZURhdGEuY3VycmVudFdoZWVsID8gZmFsc2UgOiB0cnVlO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAvLyBTdGFydCBsaXN0ZW5pbmcgZm9yIHJlc2l6ZSBldmVudHNcbiAgICAgICAgICAgIHRoaXMuZXZlbnRzLm9uKCdyZXNpemVkJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzVmlzaWJsZSgpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlVmlld3BvcnQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8vIFN0YXJ0IGxpc3RlbmluZyBmb3IgYnJlYWtwb2ludCBjaGFuZ2VzXG4gICAgICAgICAgICB0aGlzLmV2ZW50cy5vbignYnJlYWtwb2ludC1jaGFuZ2VkJywgbmV3QnJlYWtwb2ludCA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVUYWJMYXlvdXQoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy52ZWhpY2xlRGV0YWlscy5wYWludFN3YXRjaENsaWNrQ2FsbGJhY2sgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRBY3RpdmVDdXN0b21pemF0aW9uQ29tcG9uZW50KHRoaXMuY3VzdG9taXphdGlvbkNvbXBvbmVudHMucGFpbnQpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBzZXR1cFZpZXdwb3J0KGNvbnRhaW5lcikge1xuICAgICAgICAgICAgbGV0IHZpZXdwb3J0RWxlbWVudCA9IFJpZGVTdHlsZXJTaG93Y2FzZS5IVE1MSGVscGVyLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdyaWRlc3R5bGVyLXNob3djYXNlLXZpZXdwb3J0JyxcbiAgICAgICAgICAgICAgICBhcHBlbmRUbzogY29udGFpbmVyXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHZpZXdwb3J0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnN3aXRjaEFuZ2xlKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMudmlld3BvcnQgPSBuZXcgUmlkZVN0eWxlclZpZXdwb3J0KHZpZXdwb3J0RWxlbWVudCk7XG4gICAgICAgICAgICAvL0xpc3RlbnMgZm9yIG5ldyBjYXIgc2VsZWN0aW9uIGFuZCBoaWRlcyB2ZWhpY2xlIGJldHdlZW4gdXBkYXRlc1xuICAgICAgICB9XG4gICAgICAgIHVwZGF0ZVRhYnMoKSB7XG4gICAgICAgICAgICBsZXQgdGFicyA9IFtdO1xuICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgb2YgdGhpcy5jdXN0b21pemF0aW9uQ29tcG9uZW50T3JkZXIpIHtcbiAgICAgICAgICAgICAgICAvLyBTa2lwIGRpc2FibGVkIGNvbXBvbmVudHNcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuY3VzdG9taXphdGlvbkNvbXBvbmVudFNldHRpbmdzW2tleV0uZW5hYmxlZClcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgdGFicy5wdXNoKHRoaXMudGFic1trZXldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMudGFiQmFyLnNldFRhYnModGFicyk7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVRhYkxheW91dCgpO1xuICAgICAgICB9XG4gICAgICAgIHVwZGF0ZVRhYkxheW91dCgpIHtcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRCcmVha3BvaW50ID0gdGhpcy5zaG93Y2FzZS5zdHlsZS5nZXRDdXJyZW50QnJlYWtwb2ludCgpO1xuICAgICAgICAgICAgY29uc3QgaG9yaXpvbnRhbCA9IGN1cnJlbnRCcmVha3BvaW50ICYmIGN1cnJlbnRCcmVha3BvaW50WzBdID09PSAncGhvbmUtcG9ydHJhaXQnO1xuICAgICAgICAgICAgdGhpcy50YWJCYXIuc2V0TW9kZShob3Jpem9udGFsID8gJ2hvcml6b250YWwnIDogJ3ZlcnRpY2FsJyk7XG4gICAgICAgIH1cbiAgICAgICAgc2V0dXBUYWJzKCkge1xuICAgICAgICAgICAgdGhpcy50YWJCYXIgPSBuZXcgUmlkZVN0eWxlclNob3djYXNlLlJpZGVTdHlsZXJTaG93Y2FzZVRhYkJhcih0aGlzLnNob3djYXNlKTtcbiAgICAgICAgICAgIC8vIERlZmluZSBvdXIgdGFic1xuICAgICAgICAgICAgdGhpcy50YWJzID0ge1xuICAgICAgICAgICAgICAgIHBhaW50OiBuZXcgUmlkZVN0eWxlclNob3djYXNlLlJpZGVTdHlsZXJTaG93Y2FzZVRhYkJhci5UYWIoe1xuICAgICAgICAgICAgICAgICAgICBpY29uOiAncGFpbnQnLFxuICAgICAgICAgICAgICAgICAgICBrZXk6ICdwYWludCcsXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsOiBSaWRlU3R5bGVyU2hvd2Nhc2Uuc3RyaW5ncy5nZXRTdHJpbmcoJ3BhaW50JylcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICB3aGVlbHM6IG5ldyBSaWRlU3R5bGVyU2hvd2Nhc2UuUmlkZVN0eWxlclNob3djYXNlVGFiQmFyLlRhYih7XG4gICAgICAgICAgICAgICAgICAgIGljb246ICd3aGVlbCcsXG4gICAgICAgICAgICAgICAgICAgIGtleTogJ3doZWVscycsXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsOiBSaWRlU3R5bGVyU2hvd2Nhc2Uuc3RyaW5ncy5nZXRTdHJpbmcoJ3doZWVscycpXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgdGlyZXM6IG5ldyBSaWRlU3R5bGVyU2hvd2Nhc2UuUmlkZVN0eWxlclNob3djYXNlVGFiQmFyLlRhYih7XG4gICAgICAgICAgICAgICAgICAgIGljb246ICd0aXJlJyxcbiAgICAgICAgICAgICAgICAgICAga2V5OiAndGlyZXMnLFxuICAgICAgICAgICAgICAgICAgICBsYWJlbDogUmlkZVN0eWxlclNob3djYXNlLnN0cmluZ3MuZ2V0U3RyaW5nKCd0aXJlcycpXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgc3VzcGVuc2lvbjogbmV3IFJpZGVTdHlsZXJTaG93Y2FzZS5SaWRlU3R5bGVyU2hvd2Nhc2VUYWJCYXIuVGFiKHtcbiAgICAgICAgICAgICAgICAgICAgaWNvbjogJ3N1c3BlbnNpb24nLFxuICAgICAgICAgICAgICAgICAgICBrZXk6ICdzdXNwZW5zaW9uJyxcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw6IFJpZGVTdHlsZXJTaG93Y2FzZS5zdHJpbmdzLmdldFN0cmluZygnc3VzcGVuc2lvbicpXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICAvLyBTd2l0Y2ggdGhlIGJvdHRvbSB2aWV3LCB0aGUgY3VzdG9taXphdGlvbiBjb21wb25lbnQgd2hlbiBhIHRhYiBpcyBjbGlja2VkIG9uXG4gICAgICAgICAgICB0aGlzLnRhYkJhci50YWJTd2l0Y2hlZENhbGxiYWNrID0gZSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgbmV3VGFiID0gZS5uZXdUYWI7XG4gICAgICAgICAgICAgICAgY29uc3Qga2V5ID0gbmV3VGFiLmtleTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5jdXN0b21pemF0aW9uQ29tcG9uZW50cyAmJiBrZXkgaW4gdGhpcy5jdXN0b21pemF0aW9uQ29tcG9uZW50cykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldEFjdGl2ZUN1c3RvbWl6YXRpb25Db21wb25lbnQodGhpcy5jdXN0b21pemF0aW9uQ29tcG9uZW50c1trZXldKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIHZlaGljbGVEaWZmZXJlbnRGcm9tU3RhdGUoKSB7XG4gICAgICAgICAgICBsZXQgc3RhdGVEYXRhID0gdGhpcy5zdGF0ZS5nZXREYXRhKCk7XG4gICAgICAgICAgICBpZiAoIXN0YXRlRGF0YS5jdXJyZW50VmVoaWNsZUNvbmZpZ3VyYXRpb25JRCB8fCAhc3RhdGVEYXRhLmN1cnJlbnRWZWhpY2xlVGlyZU9wdGlvbklEKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignVHJ5aW5nIHRvIHNob3cgdGhlIHZpc3VhbGl6ZSBzY3JlZW4gd2l0aG91dCBhIHZlaGljbGUgY29uZmlndXJhdGlvbiBvciB0aXJlIG9wdGlvbi4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCB2ZWhpY2xlQ2hhbmdlZCA9ICFSaWRlU3R5bGVyU2hvd2Nhc2UuR1VJREhlbHBlci5hcmVFcXVhbChzdGF0ZURhdGEuY3VycmVudFZlaGljbGVDb25maWd1cmF0aW9uSUQsIHRoaXMudmVoaWNsZUNvbmZpZ3VyYXRpb25JRCk7XG4gICAgICAgICAgICBsZXQgdGlyZU9wdGlvbkNoYW5nZWQgPSAhUmlkZVN0eWxlclNob3djYXNlLkdVSURIZWxwZXIuYXJlRXF1YWwoc3RhdGVEYXRhLmN1cnJlbnRWZWhpY2xlVGlyZU9wdGlvbklELCB0aGlzLnZlaGljbGVUaXJlT3B0aW9uSUQpO1xuICAgICAgICAgICAgcmV0dXJuIHZlaGljbGVDaGFuZ2VkIHx8IHRpcmVPcHRpb25DaGFuZ2VkO1xuICAgICAgICB9XG4gICAgICAgIG9uRGlzcGxheSgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnZlaGljbGVEaWZmZXJlbnRGcm9tU3RhdGUoKSkge1xuICAgICAgICAgICAgICAgIGxldCBzdGF0ZURhdGEgPSB0aGlzLnN0YXRlLmdldERhdGEoKTtcbiAgICAgICAgICAgICAgICB0aGlzLnZlaGljbGVDb25maWd1cmF0aW9uSUQgPSBzdGF0ZURhdGEuY3VycmVudFZlaGljbGVDb25maWd1cmF0aW9uSUQ7XG4gICAgICAgICAgICAgICAgdGhpcy52ZWhpY2xlRGVzY3JpcHRpb24gPSBzdGF0ZURhdGEuY3VycmVudFZlaGljbGVEZXNjcmlwdGlvbjtcbiAgICAgICAgICAgICAgICB0aGlzLnZlaGljbGVUaXJlT3B0aW9uSUQgPSBzdGF0ZURhdGEuY3VycmVudFZlaGljbGVUaXJlT3B0aW9uSUQ7XG4gICAgICAgICAgICAgICAgdGhpcy52ZWhpY2xlVGlyZU9wdGlvbkRlc2NyaXB0aW9uID0gc3RhdGVEYXRhLmN1cnJlbnRWZWhpY2xlVGlyZU9wdGlvbkRlc2NyaXB0aW9uO1xuICAgICAgICAgICAgICAgIHRoaXMudGFiQmFyLmNsZWFyQWN0aXZlVGFiKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5vblZlaGljbGVDaGFuZ2VkKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgb25WZWhpY2xlQ2hhbmdlZCgpIHtcbiAgICAgICAgICAgIFJpZGVTdHlsZXJTaG93Y2FzZS5IVE1MSGVscGVyLmVtcHR5KHRoaXMuY3VzdG9taXphdGlvbkNvbXBvbmVudENvbnRhaW5lcik7XG4gICAgICAgICAgICAvLyBTZXQgdGhlIGN1c3RvbWl6YXRpb24gY29udGFpbmVyIGFzIGxvYWRpbmcgd2hpbGUgd2UncmUgbG9hZGluZyBhZGRpdGlvbmFsIGluZm9ybWF0aW9uXG4gICAgICAgICAgICAvLyBhYm91dCB0aGUgdmVoaWNsZVxuICAgICAgICAgICAgdGhpcy5jdXN0b21pemF0aW9uQ29tcG9uZW50Q29udGFpbmVyLmNsYXNzTGlzdC5hZGQobG9hZGluZ0NsYXNzKTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlVGFicygpO1xuICAgICAgICAgICAgLy8gRGVzZWxlY3QgYW55IGFjdGl2ZSB0YWJcbiAgICAgICAgICAgIHRoaXMudGFiQmFyLmNsZWFyQWN0aXZlVGFiKCk7XG4gICAgICAgICAgICB0aGlzLnJvdGF0ZUVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnaW4nKTtcbiAgICAgICAgICAgIC8vIExvYWQgdGhlIHZlaGljbGUncyBkZXNjcmlwdGlvbiBtb2RlbFxuICAgICAgICAgICAgbGV0IGdldFZlaGljbGVEZXNjcmlwdGlvbiA9IFJpZGVTdHlsZXJTaG93Y2FzZS5hcGkucmVxdWVzdChcInZlaGljbGUvZ2V0ZGVzY3JpcHRpb25zXCIsIHtcbiAgICAgICAgICAgICAgICBDb3VudDogMSxcbiAgICAgICAgICAgICAgICBWZWhpY2xlQ29uZmlndXJhdGlvbjogdGhpcy52ZWhpY2xlQ29uZmlndXJhdGlvbklEXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGxldCBnZXRWZWhpY2xlVGlyZU9wdGlvbiA9IFJpZGVTdHlsZXJTaG93Y2FzZS5hcGkucmVxdWVzdCgndmVoaWNsZS9nZXR0aXJlb3B0aW9uZGV0YWlscycsIHtcbiAgICAgICAgICAgICAgICBWZWhpY2xlQ29uZmlndXJhdGlvbjogdGhpcy52ZWhpY2xlQ29uZmlndXJhdGlvbklEXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIFJpZGVTdHlsZXJTaG93Y2FzZS5Qcm9taXNlSGVscGVyLmFsbChbZ2V0VmVoaWNsZURlc2NyaXB0aW9uLCBnZXRWZWhpY2xlVGlyZU9wdGlvbl0pLmRvbmUocmVzcG9uc2VzID0+IHtcbiAgICAgICAgICAgICAgICBsZXQgdmVoaWNsZURlc2NyaXB0aW9uID0gdGhpcy52ZWhpY2xlRGVzY3JpcHRpb25Nb2RlbCA9IHJlc3BvbnNlc1swXS5EZXNjcmlwdGlvbnNbMF07XG4gICAgICAgICAgICAgICAgbGV0IHZlaGljbGVUaXJlT3B0aW9uO1xuICAgICAgICAgICAgICAgIGxldCBzZWxlY3RlZFRpcmVPcHRpb25JRCA9IFJpZGVTdHlsZXJTaG93Y2FzZS5HVUlESGVscGVyLnBhcnNlKHRoaXMudmVoaWNsZVRpcmVPcHRpb25JRCk7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgdGlyZU9wdGlvbiBvZiByZXNwb25zZXNbMV0uRGV0YWlscykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoUmlkZVN0eWxlclNob3djYXNlLkdVSURIZWxwZXIuYXJlRXF1YWwodGlyZU9wdGlvbi5UaXJlT3B0aW9uSUQsIHNlbGVjdGVkVGlyZU9wdGlvbklEKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmVoaWNsZVRpcmVPcHRpb24gPSB0aXJlT3B0aW9uO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy52ZWhpY2xlVGlyZU9wdGlvbiA9IHZlaGljbGVUaXJlT3B0aW9uO1xuICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUuZXh0ZW5kRGF0YSh7XG4gICAgICAgICAgICAgICAgICAgIHZlaGljbGVIYXNBbmdsZWRJbWFnZTogdmVoaWNsZURlc2NyaXB0aW9uLkhhc0FuZ2xlZEltYWdlLFxuICAgICAgICAgICAgICAgICAgICB2ZWhpY2xlSGFzU2lkZUltYWdlOiB2ZWhpY2xlRGVzY3JpcHRpb24uSGFzU2lkZUltYWdlLFxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50VGlyZU9wdGlvbjogdmVoaWNsZVRpcmVPcHRpb24sXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRWZWhpY2xlRGVzY3JpcHRpb25Nb2RlbDogdmVoaWNsZURlc2NyaXB0aW9uLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRoaXMuaW5pdGlhbGl6ZUZvck5ld1ZlaGljbGUoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGluaXRpYWxpemVGb3JOZXdWZWhpY2xlKCkge1xuICAgICAgICAgICAgdGhpcy5ldmVudHMudHJpZ2dlcihcInZlaGljbGUtZGVzY3JpcHRpb24tbG9hZGVkXCIsIHRoaXMudmVoaWNsZURlc2NyaXB0aW9uTW9kZWwpO1xuICAgICAgICAgICAgdGhpcy5jdXJyZW50UmVuZGVySW5zdHJ1Y3Rpb25zID0ge307XG4gICAgICAgICAgICB0aGlzLnRhYkJhci5zZXRBY3RpdmVUYWIodGhpcy50YWJzLnBhaW50KTtcbiAgICAgICAgICAgIHRoaXMudmlld3BvcnQuUmVzZXQoKTtcbiAgICAgICAgICAgIC8vIENyZWF0ZSB0aGUgY29tcG9uZW50cyB0aGF0IHdpbGwgYmUgc3dpdGNoZWQgd2l0aCB0aGUgdGFic1xuICAgICAgICAgICAgdGhpcy5jdXN0b21pemF0aW9uQ29tcG9uZW50cyA9IHtcbiAgICAgICAgICAgICAgICBwYWludDogbmV3IFJpZGVTdHlsZXJTaG93Y2FzZS5SaWRlU3R5bGVyU2hvd2Nhc2VQYWludFNlbGVjdG9yKHRoaXMuc2hvd2Nhc2UpLFxuICAgICAgICAgICAgICAgIHdoZWVsczogbmV3IFJpZGVTdHlsZXJTaG93Y2FzZS5SaWRlU3R5bGVyU2hvd2Nhc2VXaGVlbFNlbGVjdG9yKHRoaXMuc2hvd2Nhc2UpLFxuICAgICAgICAgICAgICAgIHRpcmVzOiBuZXcgUmlkZVN0eWxlclNob3djYXNlLlJpZGVTdHlsZXJTaG93Y2FzZVRpcmVTZWxlY3Rvcih0aGlzLnNob3djYXNlKSxcbiAgICAgICAgICAgICAgICBzdXNwZW5zaW9uOiBuZXcgUmlkZVN0eWxlclNob3djYXNlLlJpZGVTdHlsZXJTaG93Y2FzZVN1c3BlbnNpb25TZWxlY3Rvcih0aGlzLnNob3djYXNlKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMuY3VzdG9taXphdGlvbkNvbXBvbmVudHMud2hlZWxzLnNldEZpbHRlcnModGhpcy5zaG93Y2FzZS5maWx0ZXJzLndoZWVsRmlsdGVycy5nZXRGaWx0ZXJzKCkpO1xuICAgICAgICAgICAgdGhpcy5zaG93Y2FzZS5maWx0ZXJzLndoZWVsRmlsdGVycy5vbkZpbHRlcnNDaGFuZ2VkID0gZmlsdGVycyA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5jdXN0b21pemF0aW9uQ29tcG9uZW50cy53aGVlbHMuc2V0RmlsdGVycyhmaWx0ZXJzKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLnNob3djYXNlLmZpbHRlcnMudGlyZUZpbHRlcnMub25GaWx0ZXJzQ2hhbmdlZCA9IGZpbHRlcnMgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuY3VzdG9taXphdGlvbkNvbXBvbmVudHMudGlyZXMuc2V0RmlsdGVycyhmaWx0ZXJzKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLmN1c3RvbWl6YXRpb25Db21wb25lbnRzLnBhaW50Lm9uUGFpbnRTY2hlbWVTZWxlY3RlZCA9IHBhaW50U2NoZW1lID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmN1c3RvbWl6YXRpb25Db21wb25lbnRzLnBhaW50LnNldE9wdGlvbklzTG9hZGluZyh0cnVlKTtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVZpZXdwb3J0KHtcbiAgICAgICAgICAgICAgICAgICAgUGFpbnRDb2xvcjogcGFpbnRTY2hlbWUuQ29sb3JzWzBdLkhleFxuICAgICAgICAgICAgICAgIH0pLmFsd2F5cygoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY3VzdG9taXphdGlvbkNvbXBvbmVudHMucGFpbnQuc2V0T3B0aW9uSXNMb2FkaW5nKGZhbHNlKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLmN1c3RvbWl6YXRpb25Db21wb25lbnRzLndoZWVscy5wcm9kdWN0U2VsZWN0ZWRDYWxsYmFjayA9IG1vZGVsID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmN1c3RvbWl6YXRpb25Db21wb25lbnRzLndoZWVscy5zZXRPcHRpb25Jc0xvYWRpbmcodHJ1ZSk7XG4gICAgICAgICAgICAgICAgY29uc3QgY2FuUmVuZGVyT25DdXJyZW50QW5nbGUgPSB0aGlzLmltYWdlVHlwZSA9PT0gMiAvKiBBbmdsZSAqLyAmJiBtb2RlbC5IYXNBbmdsZUltYWdlIHx8XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaW1hZ2VUeXBlID09PSAxIC8qIFNpZGUgKi8gJiYgbW9kZWwuSGFzU2lkZUltYWdlO1xuICAgICAgICAgICAgICAgIGlmICghY2FuUmVuZGVyT25DdXJyZW50QW5nbGUpXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3dpdGNoQW5nbGUoKTtcbiAgICAgICAgICAgICAgICBSaWRlU3R5bGVyU2hvd2Nhc2UuYXBpLnJlcXVlc3QoJ3doZWVsL2dldGZpdG1lbnRkZXNjcmlwdGlvbnMnLCB7XG4gICAgICAgICAgICAgICAgICAgIFZlaGljbGVDb25maWd1cmF0aW9uOiB0aGlzLnZlaGljbGVDb25maWd1cmF0aW9uSUQsXG4gICAgICAgICAgICAgICAgICAgIFdoZWVsTW9kZWw6IG1vZGVsLldoZWVsTW9kZWxJRCxcbiAgICAgICAgICAgICAgICAgICAgSW5jbHVkZVByaWNpbmc6IHRydWVcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAuZG9uZShyZXNwb25zZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBmaXRtZW50cyA9IHJlc3BvbnNlLkZpdG1lbnRzO1xuICAgICAgICAgICAgICAgICAgICBsZXQgYmVzdEZpdG1lbnQgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICAgIGxldCB0YXJnZXREaWFtZXRlciA9IHRoaXMudmVoaWNsZVRpcmVPcHRpb24uRnJvbnQuSW5zaWRlRGlhbWV0ZXI7XG4gICAgICAgICAgICAgICAgICAgIG1vZGVsLldoZWVsRml0bWVudHMgPSBmaXRtZW50cztcbiAgICAgICAgICAgICAgICAgICAgZml0bWVudHMuc29ydChmdW5jdGlvbiAoYSwgYikge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYURpZmYgPSBNYXRoLmFicyhhLkRpYW1ldGVyTWluIC0gdGFyZ2V0RGlhbWV0ZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYkRpZmYgPSBNYXRoLmFicyhiLkRpYW1ldGVyTWluIC0gdGFyZ2V0RGlhbWV0ZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFEaWZmIC0gYkRpZmY7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBiZXN0Rml0bWVudCA9IGZpdG1lbnRzWzBdO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLmV4dGVuZERhdGEoe1xuICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFdoZWVsOiBtb2RlbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRXaGVlbEZpdG1lbnQ6IGJlc3RGaXRtZW50XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNoYW5nZVdoZWVsU2l6ZS5zZXRGaXRtZW50T3B0aW9ucyhmaXRtZW50cywgYmVzdEZpdG1lbnQpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNoYW5nZVdoZWVsU2l6ZS5jb21wb25lbnQuc3R5bGUuZGlzcGxheSA9ICcnO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVZpZXdwb3J0KHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFdoZWVsRml0bWVudDogYmVzdEZpdG1lbnQuV2hlZWxGaXRtZW50SURcbiAgICAgICAgICAgICAgICAgICAgfSkuYWx3YXlzKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3VzdG9taXphdGlvbkNvbXBvbmVudHMud2hlZWxzLnNldE9wdGlvbklzTG9hZGluZyhmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIC5mYWlsKCgpID0+IHRoaXMuY3VzdG9taXphdGlvbkNvbXBvbmVudHMud2hlZWxzLnNldE9wdGlvbklzTG9hZGluZyhmYWxzZSkpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMuY3VzdG9taXphdGlvbkNvbXBvbmVudHMudGlyZXMucHJvZHVjdFNlbGVjdGVkQ2FsbGJhY2sgPSBtb2RlbCA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5leHRlbmREYXRhKHtcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudFRpcmU6IG1vZGVsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5jdXN0b21pemF0aW9uQ29tcG9uZW50cy5zdXNwZW5zaW9uLnN1c3BlbnNpb25DaGFuZ2VDYWxsYmFjayA9IHJlbmRlclVwZGF0ZSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVWaWV3cG9ydChyZW5kZXJVcGRhdGUpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMuc2V0QWN0aXZlQ3VzdG9taXphdGlvbkNvbXBvbmVudCh0aGlzLmN1c3RvbWl6YXRpb25Db21wb25lbnRzLndoZWVscyk7XG4gICAgICAgICAgICBmb3IgKGxldCBjdXN0b21pemF0aW9uQ29tcG9uZW50IG9mIFJpZGVTdHlsZXJTaG93Y2FzZS5PYmplY3RIZWxwZXIuZ2V0VmFsdWVzKHRoaXMuY3VzdG9taXphdGlvbkNvbXBvbmVudHMpKSB7XG4gICAgICAgICAgICAgICAgY3VzdG9taXphdGlvbkNvbXBvbmVudC5jb21wb25lbnQuY2xhc3NMaXN0LmFkZCgncmlkZXN0eWxlci1zaG93Y2FzZS1jdXN0b21pemF0aW9uLWNvbXBvbmVudCcpO1xuICAgICAgICAgICAgICAgIHRoaXMuY3VzdG9taXphdGlvbkNvbXBvbmVudENvbnRhaW5lci5hcHBlbmRDaGlsZChjdXN0b21pemF0aW9uQ29tcG9uZW50LmNvbXBvbmVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmltYWdlVHlwZSA9IDIgLyogQW5nbGUgKi87XG4gICAgICAgICAgICBpZiAoIXRoaXMudmVoaWNsZURlc2NyaXB0aW9uTW9kZWwuSGFzQW5nbGVkSW1hZ2UpXG4gICAgICAgICAgICAgICAgdGhpcy5pbWFnZVR5cGUgPSAxIC8qIFNpZGUgKi87XG4gICAgICAgICAgICB0aGlzLnJvdGF0ZUVsZW1lbnQuc3R5bGUuZGlzcGxheSA9IHRoaXMuY2FuU3dpdGNoQW5nbGUoKSA/ICcnIDogJ25vbmUnO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVWaWV3cG9ydCh7XG4gICAgICAgICAgICAgICAgVmVoaWNsZUNvbmZpZ3VyYXRpb246IHRoaXMudmVoaWNsZUNvbmZpZ3VyYXRpb25JRCxcbiAgICAgICAgICAgICAgICBWZWhpY2xlVGlyZU9wdGlvbjogdGhpcy52ZWhpY2xlVGlyZU9wdGlvbklELFxuICAgICAgICAgICAgICAgIFBvc2l0aW9uWDogMSAvKiBDZW50ZXIgKi8sXG4gICAgICAgICAgICAgICAgUG9zaXRpb25ZOiAyIC8qIEZhciAqLyxcbiAgICAgICAgICAgICAgICBUeXBlOiB0aGlzLmltYWdlVHlwZVxuICAgICAgICAgICAgfSkuZG9uZSgoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5yb3RhdGVFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2luJyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuY3VzdG9taXphdGlvbkNvbXBvbmVudENvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKGxvYWRpbmdDbGFzcyk7XG4gICAgICAgIH1cbiAgICAgICAgc2V0QWN0aXZlQ3VzdG9taXphdGlvbkNvbXBvbmVudChjdXN0b21pemF0aW9uQ29tcG9uZW50KSB7XG4gICAgICAgICAgICBsZXQgc3RhdGVEYXRhID0gdGhpcy5zdGF0ZS5nZXREYXRhKCk7XG4gICAgICAgICAgICBsZXQgY29tcG9uZW50S2V5ID0gdGhpcy5nZXRDb21wb25lbnRLZXkoY3VzdG9taXphdGlvbkNvbXBvbmVudCk7XG4gICAgICAgICAgICBsZXQgc2V0dGluZ3MgPSB0aGlzLmN1c3RvbWl6YXRpb25Db21wb25lbnRTZXR0aW5nc1tjb21wb25lbnRLZXldO1xuICAgICAgICAgICAgbGV0IHRhYiA9IHRoaXMudGFic1tjb21wb25lbnRLZXldO1xuICAgICAgICAgICAgaWYgKHRhYikge1xuICAgICAgICAgICAgICAgIHRoaXMudGFiQmFyLnNldEFjdGl2ZVRhYih0YWIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuYWN0aXZlQ3VzdG9taXphdGlvbkNvbXBvbmVudCkge1xuICAgICAgICAgICAgICAgIHRoaXMuYWN0aXZlQ3VzdG9taXphdGlvbkNvbXBvbmVudC5jb21wb25lbnQuY2xhc3NMaXN0LnJlbW92ZSgnaW4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGN1c3RvbWl6YXRpb25Db21wb25lbnQuY29tcG9uZW50LmNsYXNzTGlzdC5hZGQoJ2luJyk7XG4gICAgICAgICAgICB0aGlzLmFjdGl2ZUN1c3RvbWl6YXRpb25Db21wb25lbnQgPSBjdXN0b21pemF0aW9uQ29tcG9uZW50O1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBjdXN0b21pemF0aW9uQ29tcG9uZW50LnVwZGF0ZSA9PT0gJ2Z1bmN0aW9uJylcbiAgICAgICAgICAgICAgICBjdXN0b21pemF0aW9uQ29tcG9uZW50LnVwZGF0ZSgpO1xuICAgICAgICAgICAgdGhpcy5jaGFuZ2VXaGVlbFNpemUuY29tcG9uZW50LnN0eWxlLmRpc3BsYXkgPVxuICAgICAgICAgICAgICAgIGN1c3RvbWl6YXRpb25Db21wb25lbnQgaW5zdGFuY2VvZiBSaWRlU3R5bGVyU2hvd2Nhc2UuUmlkZVN0eWxlclNob3djYXNlV2hlZWxTZWxlY3RvciAmJiBzdGF0ZURhdGEuY3VycmVudFdoZWVsID9cbiAgICAgICAgICAgICAgICAgICAgJycgOiAnbm9uZSc7XG4gICAgICAgICAgICB0aGlzLmZpbHRlckJ1dHRvbi5zdHlsZS5kaXNwbGF5ID0gc2V0dGluZ3Muc2hvd0ZpbHRlckJ1dHRvbiA/ICcnIDogJ25vbmUnO1xuICAgICAgICAgICAgUmlkZVN0eWxlclNob3djYXNlLkhUTUxIZWxwZXIuc2V0VGV4dCh0aGlzLnRpdGxlRWxlbWVudCwgc2V0dGluZ3MudGl0bGUpO1xuICAgICAgICB9XG4gICAgICAgIGdldENvbXBvbmVudEtleShjdXN0b21pemF0aW9uQ29tcG9uZW50KSB7XG4gICAgICAgICAgICBmb3IgKGxldCBrZXkgaW4gdGhpcy5jdXN0b21pemF0aW9uQ29tcG9uZW50cykge1xuICAgICAgICAgICAgICAgIGxldCBjb21wb25lbnQgPSB0aGlzLmN1c3RvbWl6YXRpb25Db21wb25lbnRzW2tleV07XG4gICAgICAgICAgICAgICAgaWYgKGNvbXBvbmVudCA9PT0gY3VzdG9taXphdGlvbkNvbXBvbmVudCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4ga2V5O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB1cGRhdGVWaWV3cG9ydChpbnN0cnVjdGlvbnMpIHtcbiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24odGhpcy5jdXJyZW50UmVuZGVySW5zdHJ1Y3Rpb25zLCBpbnN0cnVjdGlvbnMpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudmlld3BvcnQuVXBkYXRlKGluc3RydWN0aW9ucyk7XG4gICAgICAgIH1cbiAgICAgICAgY2FuU3dpdGNoQW5nbGUoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy52ZWhpY2xlRGVzY3JpcHRpb25Nb2RlbC5IYXNBbmdsZWRJbWFnZSAmJiB0aGlzLnZlaGljbGVEZXNjcmlwdGlvbk1vZGVsLkhhc1NpZGVJbWFnZTtcbiAgICAgICAgfVxuICAgICAgICBzaG93RmlsdGVycygpIHtcbiAgICAgICAgICAgIGNvbnN0IGFjdGl2ZUN1c3RvbWl6YXRpb25Db21wb25lbnQgPSB0aGlzLmFjdGl2ZUN1c3RvbWl6YXRpb25Db21wb25lbnQ7XG4gICAgICAgICAgICBsZXQgZmlsdGVyTW9kYWw7XG4gICAgICAgICAgICBpZiAoYWN0aXZlQ3VzdG9taXphdGlvbkNvbXBvbmVudCA9PT0gdGhpcy5jdXN0b21pemF0aW9uQ29tcG9uZW50cy50aXJlcykge1xuICAgICAgICAgICAgICAgIGZpbHRlck1vZGFsID0gbmV3IFJpZGVTdHlsZXJTaG93Y2FzZS5SaWRlU3R5bGVyU2hvd2Nhc2VGaWx0ZXJNb2RhbCh0aGlzLnNob3djYXNlLCB7XG4gICAgICAgICAgICAgICAgICAgIGZpbHRlclByb3ZpZGVyOiB0aGlzLnNob3djYXNlLmZpbHRlcnMudGlyZUZpbHRlcnMsXG4gICAgICAgICAgICAgICAgICAgIHNob3dDb3VudFRleHRGb3JtYXQ6IFJpZGVTdHlsZXJTaG93Y2FzZS5zdHJpbmdzLmdldFN0cmluZygnc2hvdy1jb3VudC1mb3JtYXQtdGlyZXMnKVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoYWN0aXZlQ3VzdG9taXphdGlvbkNvbXBvbmVudCA9PT0gdGhpcy5jdXN0b21pemF0aW9uQ29tcG9uZW50cy53aGVlbHMpIHtcbiAgICAgICAgICAgICAgICBmaWx0ZXJNb2RhbCA9IG5ldyBSaWRlU3R5bGVyU2hvd2Nhc2UuUmlkZVN0eWxlclNob3djYXNlRmlsdGVyTW9kYWwodGhpcy5zaG93Y2FzZSwge1xuICAgICAgICAgICAgICAgICAgICBmaWx0ZXJQcm92aWRlcjogdGhpcy5zaG93Y2FzZS5maWx0ZXJzLndoZWVsRmlsdGVycyxcbiAgICAgICAgICAgICAgICAgICAgc2hvd0NvdW50VGV4dEZvcm1hdDogUmlkZVN0eWxlclNob3djYXNlLnN0cmluZ3MuZ2V0U3RyaW5nKCdzaG93LWNvdW50LWZvcm1hdC13aGVlbHMnKVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGZpbHRlck1vZGFsKSB7XG4gICAgICAgICAgICAgICAgZmlsdGVyTW9kYWwuc2hvdygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHN3aXRjaEFuZ2xlKCkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmNhblN3aXRjaEFuZ2xlKCkgfHwgdGhpcy5zdGF0ZS5nZXREYXRhKCkuY3VycmVudFdoZWVsLkhhc1NpZGVJbWFnZSA9PT0gZmFsc2UpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgaWYgKHRoaXMuaW1hZ2VUeXBlID09PSAyIC8qIEFuZ2xlICovKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pbWFnZVR5cGUgPSAxIC8qIFNpZGUgKi87XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgdGhpcy5pbWFnZVR5cGUgPSAyIC8qIEFuZ2xlICovO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVWaWV3cG9ydCh7XG4gICAgICAgICAgICAgICAgVHlwZTogdGhpcy5pbWFnZVR5cGVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIFJpZGVTdHlsZXJTaG93Y2FzZS5SaWRlU3R5bGVyU2hvd2Nhc2VWZWhpY2xlVmlzdWFsaXphdGlvbiA9IFJpZGVTdHlsZXJTaG93Y2FzZVZlaGljbGVWaXN1YWxpemF0aW9uO1xufSkoUmlkZVN0eWxlclNob3djYXNlIHx8IChSaWRlU3R5bGVyU2hvd2Nhc2UgPSB7fSkpO1xuIl19


//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzY3JpcHRzL2NvbXBvbmVudHMvUmlkZVN0eWxlclNob3djYXNlVmlld3BvcnQuanMiLCJzb3VyY2VzQ29udGVudCI6W119

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var RideStylerShowcase;
(function (RideStylerShowcase) {
    var RideStylerShowcaseWheelModal = function (_RideStylerShowcase$R) {
        _inherits(RideStylerShowcaseWheelModal, _RideStylerShowcase$R);

        function RideStylerShowcaseWheelModal(showcaseInstance, wheelModel) {
            _classCallCheck(this, RideStylerShowcaseWheelModal);

            // Image
            var _this = _possibleConstructorReturn(this, (RideStylerShowcaseWheelModal.__proto__ || Object.getPrototypeOf(RideStylerShowcaseWheelModal)).call(this, showcaseInstance));

            _this.image.update({
                WheelFitmentResourceType: 3 /* Catalog */
                , WheelModel: wheelModel.WheelModelID
            });
            // Brand
            RideStylerShowcase.HTMLHelper.setText(_this.brandTitleElement, wheelModel.WheelBrandName);
            // Model Name
            RideStylerShowcase.HTMLHelper.setText(_this.titleElement, wheelModel.WheelModelName);
            // Finish
            RideStylerShowcase.HTMLHelper.setText(_this.subtitleElement, wheelModel.WheelModelFinishDescription);
            // Summary Table
            _this.summaryTable = new RideStylerShowcase.RideStylerShowcaseTable(_this.showcase, {
                columns: [{
                    header: RideStylerShowcase.strings.getString('size'),
                    cell: 'size'
                }, {
                    header: RideStylerShowcase.strings.getString('price'),
                    cell: 'price'
                }],
                startLoading: true
            });
            _this.summaryElement.appendChild(_this.summaryTable.component);
            _this.buildSpecsPage();
            RideStylerShowcase.api.request('wheel/getfitmentdescriptions', {
                WheelModel: wheelModel.WheelModelID,
                IncludePromotions: true,
                IncludePricing: true
            }).done(function (response) {
                _this.summaryTable.appendRows(_this.buildSummaryTable(response.Fitments));
                _this.specsTable.appendRows(response.Fitments);
            });
            return _this;
        }

        _createClass(RideStylerShowcaseWheelModal, [{
            key: 'buildSummaryTable',
            value: function buildSummaryTable(fitments) {
                var allSizePriceCombinations = [];
                // Get a list of each fitment size/price combination
                var _iteratorNormalCompletion = true;
                var _didIteratorError = false;
                var _iteratorError = undefined;

                try {
                    for (var _iterator = fitments[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
                        var fitment = _step.value;

                        var fitmentPrice = RideStylerShowcaseWheelModal.getFitmentRetailPriceDataObject(fitment);
                        var fitmentPriceAmount = fitmentPrice ? fitmentPrice.WheelPricingAmount : undefined;
                        allSizePriceCombinations.push({
                            diameter: fitment.DiameterMin,
                            width: fitment.WidthMin,
                            price: fitmentPriceAmount
                        });
                        allSizePriceCombinations.push({
                            diameter: fitment.DiameterMin,
                            width: fitment.WidthMax,
                            price: fitmentPriceAmount
                        });
                        allSizePriceCombinations.push({
                            diameter: fitment.DiameterMax,
                            width: fitment.WidthMin,
                            price: fitmentPriceAmount
                        });
                        allSizePriceCombinations.push({
                            diameter: fitment.DiameterMax,
                            width: fitment.WidthMax,
                            price: fitmentPriceAmount
                        });
                    }
                } catch (err) {
                    _didIteratorError = true;
                    _iteratorError = err;
                } finally {
                    try {
                        if (!_iteratorNormalCompletion && _iterator.return) {
                            _iterator.return();
                        }
                    } finally {
                        if (_didIteratorError) {
                            throw _iteratorError;
                        }
                    }
                }

                var sizePriceRanges = {};
                // Generate price ranges for each unique size description created above
                var _iteratorNormalCompletion2 = true;
                var _didIteratorError2 = false;
                var _iteratorError2 = undefined;

                try {
                    for (var _iterator2 = allSizePriceCombinations[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {
                        var sizePriceCombo = _step2.value;
                        var diameter = sizePriceCombo.diameter,
                            price = sizePriceCombo.price,
                            width = sizePriceCombo.width;

                        var size = diameter + '″ x ' + width;
                        var priceRange = void 0;
                        if (size in sizePriceRanges === false) {
                            priceRange = sizePriceRanges[size] = {
                                min: Infinity,
                                max: -Infinity
                            };
                        } else {
                            priceRange = sizePriceRanges[size];
                        }
                        if (price) {
                            RideStylerShowcase.NumberHelper.extendRange(price, priceRange);
                        }
                    }
                    // Translate sizePriceRanges into SummaryTableRows
                } catch (err) {
                    _didIteratorError2 = true;
                    _iteratorError2 = err;
                } finally {
                    try {
                        if (!_iteratorNormalCompletion2 && _iterator2.return) {
                            _iterator2.return();
                        }
                    } finally {
                        if (_didIteratorError2) {
                            throw _iteratorError2;
                        }
                    }
                }

                var summaryTableRows = [];
                var priceIsUnspecified = function priceIsUnspecified(price) {
                    // Price must be a number, and not +- infinity
                    return typeof price !== 'number' || isNaN(price) || price === Infinity || price === -Infinity;
                };
                for (var size in sizePriceRanges) {
                    if (!sizePriceRanges.hasOwnProperty(size)) continue;
                    var priceRange = sizePriceRanges[size];
                    var priceString = void 0;
                    if (priceIsUnspecified(priceRange.min) || priceIsUnspecified(priceRange.max)) {
                        priceString = RideStylerShowcase.strings.getString('call');
                    } else {
                        if (priceRange.min === priceRange.max) priceString = RideStylerShowcase.strings.format().currency(priceRange.min, '$');else priceString = RideStylerShowcase.strings.format().currency(priceRange.min, '$') + ' - ' + RideStylerShowcase.strings.format().currency(priceRange.max, '$');
                    }
                    summaryTableRows.push({
                        size: size,
                        price: priceString
                    });
                }
                return summaryTableRows;
            }
        }, {
            key: 'buildSpecsPage',
            value: function buildSpecsPage() {
                this.specsTable = new RideStylerShowcase.RideStylerShowcaseTable(this.showcase, {
                    columns: [{
                        header: RideStylerShowcase.strings.getString('size'),
                        cell: RideStylerShowcaseWheelModal.getFitmentSizeDescription
                    }, {
                        header: RideStylerShowcase.strings.getString('offset'),
                        cell: function cell(fitment) {
                            return RideStylerShowcase.RideStylerShowcaseTable.formatCell(fitment, 'OffsetMin', 'mm');
                        }
                    }, {
                        header: RideStylerShowcase.strings.getString('bolt-pattern'),
                        cell: 'BoltPatternDescription'
                    }, {
                        header: RideStylerShowcase.strings.getString('centerbore'),
                        cell: function cell(fitment) {
                            return RideStylerShowcase.RideStylerShowcaseTable.formatCell(fitment, 'CenterboreMM', 'mm');
                        }
                    }, {
                        header: 'Price',
                        cell: RideStylerShowcaseWheelModal.getFitmentPrice
                    }, {
                        header: RideStylerShowcase.strings.getString('item-number'),
                        cell: RideStylerShowcaseWheelModal.getFitmentItemNumber
                    }]
                });
                var specsContainer = RideStylerShowcase.HTMLHelper.createElement({
                    className: 'scrollable',
                    append: this.specsTable.component
                });
                this.addPage({
                    container: specsContainer,
                    label: RideStylerShowcase.strings.getString('specifications')
                });
            }
        }, {
            key: 'createImage',
            value: function createImage() {
                return new RideStylerShowcase.ResizeableResourceImage(this.imageContainer, {
                    action: "wheel/image",
                    baseInstructions: {
                        PositionX: 1 /* Center */
                        , PositionY: 0 /* Near */
                        , IncludeShadow: true
                    }
                });
            }
        }], [{
            key: 'getFitmentRetailPriceDataObject',
            value: function getFitmentRetailPriceDataObject(fitment) {
                return fitment.Pricing && fitment.Pricing['Retail'] || undefined;
            }
        }, {
            key: 'getFitmentSizeDescription',
            value: function getFitmentSizeDescription(fitment) {
                var DiameterMin = fitment.DiameterMin,
                    WidthMin = fitment.WidthMin;

                if (!DiameterMin || !WidthMin) return RideStylerShowcase.RideStylerShowcaseTable.emptyCellString;
                return DiameterMin + '\u2033 x ' + WidthMin;
            }
        }, {
            key: 'getFitmentPrice',
            value: function getFitmentPrice(fitment) {
                var noPriceString = RideStylerShowcase.strings.getString('call');
                var retailPriceDataObject = RideStylerShowcaseWheelModal.getFitmentRetailPriceDataObject(fitment);
                if (!retailPriceDataObject) return noPriceString;
                var price = retailPriceDataObject.WheelPricingAmount;
                return price ? RideStylerShowcase.strings.format().currency(price, '$') : noPriceString;
            }
        }, {
            key: 'getFitmentItemNumber',
            value: function getFitmentItemNumber(fitment) {
                var retailPriceDataObject = RideStylerShowcaseWheelModal.getFitmentRetailPriceDataObject(fitment);
                var itemNumber = void 0;
                // Item number is the retail pricing item number by default
                if (retailPriceDataObject) itemNumber = retailPriceDataObject.WheelPricingItemNumber;
                // If there's no retail pricing, or the retail price doesn't have a item number use the fitment's part number
                if (!itemNumber) itemNumber = fitment.PartNumber;
                return itemNumber || RideStylerShowcase.RideStylerShowcaseTable.emptyCellString;
            }
        }]);

        return RideStylerShowcaseWheelModal;
    }(RideStylerShowcase.RideStylerShowcaseProductModal);

    RideStylerShowcase.RideStylerShowcaseWheelModal = RideStylerShowcaseWheelModal;
})(RideStylerShowcase || (RideStylerShowcase = {}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvUmlkZVN0eWxlclNob3djYXNlV2hlZWxNb2RhbC50cyJdLCJuYW1lcyI6WyJSaWRlU3R5bGVyU2hvd2Nhc2UiLCJSaWRlU3R5bGVyU2hvd2Nhc2VXaGVlbE1vZGFsIiwic2hvd2Nhc2VJbnN0YW5jZSIsIndoZWVsTW9kZWwiLCJpbWFnZSIsInVwZGF0ZSIsIldoZWVsRml0bWVudFJlc291cmNlVHlwZSIsIldoZWVsTW9kZWwiLCJXaGVlbE1vZGVsSUQiLCJIVE1MSGVscGVyIiwic2V0VGV4dCIsImJyYW5kVGl0bGVFbGVtZW50IiwiV2hlZWxCcmFuZE5hbWUiLCJ0aXRsZUVsZW1lbnQiLCJXaGVlbE1vZGVsTmFtZSIsInN1YnRpdGxlRWxlbWVudCIsIldoZWVsTW9kZWxGaW5pc2hEZXNjcmlwdGlvbiIsInN1bW1hcnlUYWJsZSIsIlJpZGVTdHlsZXJTaG93Y2FzZVRhYmxlIiwic2hvd2Nhc2UiLCJjb2x1bW5zIiwiaGVhZGVyIiwic3RyaW5ncyIsImdldFN0cmluZyIsImNlbGwiLCJzdGFydExvYWRpbmciLCJzdW1tYXJ5RWxlbWVudCIsImFwcGVuZENoaWxkIiwiY29tcG9uZW50IiwiYnVpbGRTcGVjc1BhZ2UiLCJhcGkiLCJyZXF1ZXN0IiwiSW5jbHVkZVByb21vdGlvbnMiLCJJbmNsdWRlUHJpY2luZyIsImRvbmUiLCJhcHBlbmRSb3dzIiwiYnVpbGRTdW1tYXJ5VGFibGUiLCJyZXNwb25zZSIsIkZpdG1lbnRzIiwic3BlY3NUYWJsZSIsImZpdG1lbnRzIiwiYWxsU2l6ZVByaWNlQ29tYmluYXRpb25zIiwiZml0bWVudCIsImZpdG1lbnRQcmljZSIsImdldEZpdG1lbnRSZXRhaWxQcmljZURhdGFPYmplY3QiLCJmaXRtZW50UHJpY2VBbW91bnQiLCJXaGVlbFByaWNpbmdBbW91bnQiLCJ1bmRlZmluZWQiLCJwdXNoIiwiZGlhbWV0ZXIiLCJEaWFtZXRlck1pbiIsIndpZHRoIiwiV2lkdGhNaW4iLCJwcmljZSIsIldpZHRoTWF4IiwiRGlhbWV0ZXJNYXgiLCJzaXplUHJpY2VSYW5nZXMiLCJzaXplUHJpY2VDb21ibyIsInNpemUiLCJwcmljZVJhbmdlIiwibWluIiwiSW5maW5pdHkiLCJtYXgiLCJOdW1iZXJIZWxwZXIiLCJleHRlbmRSYW5nZSIsInN1bW1hcnlUYWJsZVJvd3MiLCJwcmljZUlzVW5zcGVjaWZpZWQiLCJpc05hTiIsImhhc093blByb3BlcnR5IiwicHJpY2VTdHJpbmciLCJmb3JtYXQiLCJjdXJyZW5jeSIsImdldEZpdG1lbnRTaXplRGVzY3JpcHRpb24iLCJmb3JtYXRDZWxsIiwiZ2V0Rml0bWVudFByaWNlIiwiZ2V0Rml0bWVudEl0ZW1OdW1iZXIiLCJzcGVjc0NvbnRhaW5lciIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc05hbWUiLCJhcHBlbmQiLCJhZGRQYWdlIiwiY29udGFpbmVyIiwibGFiZWwiLCJSZXNpemVhYmxlUmVzb3VyY2VJbWFnZSIsImltYWdlQ29udGFpbmVyIiwiYWN0aW9uIiwiYmFzZUluc3RydWN0aW9ucyIsIlBvc2l0aW9uWCIsIlBvc2l0aW9uWSIsIkluY2x1ZGVTaGFkb3ciLCJQcmljaW5nIiwiZW1wdHlDZWxsU3RyaW5nIiwibm9QcmljZVN0cmluZyIsInJldGFpbFByaWNlRGF0YU9iamVjdCIsIml0ZW1OdW1iZXIiLCJXaGVlbFByaWNpbmdJdGVtTnVtYmVyIiwiUGFydE51bWJlciIsIlJpZGVTdHlsZXJTaG93Y2FzZVByb2R1Y3RNb2RhbCJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQSxJQUFVQSxrQkFBVjtBQUFBLENBQUEsVUFBVUEsa0JBQVYsRUFBNEI7QUFBQSxRQUl4QkMsNEJBSndCO0FBQUE7O0FBVXBCLDhDQUFZQyxnQkFBWixFQUF5REMsVUFBekQsRUFBOEY7QUFBQTs7QUFHMUY7QUFIMEYsb0tBQ3BGRCxnQkFEb0Y7O0FBSTFGLGtCQUFLRSxLQUFMLENBQVdDLE1BQVgsQ0FBa0I7QUFDZEMsMENBQXdCLENBRFYsQ0FDVTtBQURWLGtCQUVkQyxZQUFZ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Qix1QkFBQSxDQUF3QnlFLGVBQTdDO0FBQ0g7QUF4T21COztBQUFBO0FBQUEsTUFJMEIzRixtQkFBQWlHLDhCQUoxQjs7QUFJWGpHLHVCQUFBQyw0QkFBQSxHQUE0QkEsNEJBQTVCO0FBZ1BoQixDQXBQRCxFQUFVRCx1QkFBQUEscUJBQWtCLEVBQWxCLENBQVYiLCJmaWxlIjoic2NyaXB0cy9jb21wb25lbnRzL1JpZGVTdHlsZXJTaG93Y2FzZVdoZWVsTW9kYWwuanMiLCJzb3VyY2VzQ29udGVudCI6WyJuYW1lc3BhY2UgUmlkZVN0eWxlclNob3djYXNlIHtcclxuICAgIGltcG9ydCBXaGVlbE1vZGVsRGVzY3JpcHRpb25Nb2RlbCA9IHJpZGVzdHlsZXIuRGVzY3JpcHRpb25zLldoZWVsTW9kZWxEZXNjcmlwdGlvbk1vZGVsXHJcbiAgICBpbXBvcnQgV2hlZWxGaXRtZW50RGVzY3JpcHRpb25Nb2RlbCA9IHJpZGVzdHlsZXIuRGVzY3JpcHRpb25zLldoZWVsRml0bWVudERlc2NyaXB0aW9uTW9kZWw7XHJcbiAgICBpbXBvcnQgV2hlZWxQcmljaW5nRGF0YU9iamVjdCA9IHJpZGVzdHlsZXIuRGF0YU9iamVjdHMuV2hlZWxQcmljaW5nRGF0YU9iamVjdDtcclxuICAgIGV4cG9ydCBjbGFzcyBSaWRlU3R5bGVyU2hvd2Nhc2VXaGVlbE1vZGFsIGV4dGVuZHMgUmlkZVN0eWxlclNob3djYXNlUHJvZHVjdE1vZGFsIHtcclxuICAgICAgICBwcm90ZWN0ZWQgaW1hZ2U6UmVzaXplYWJsZVJlc291cmNlSW1hZ2U8XCJ3aGVlbC9pbWFnZVwiPjtcclxuXHJcbiAgICAgICAgcHJpdmF0ZSBzcGVjc1RhYmxlOiBSaWRlU3R5bGVyU2hvd2Nhc2VUYWJsZTxXaGVlbEZpdG1lbnREZXNjcmlwdGlvbk1vZGVsPjtcclxuICAgICAgICBwcml2YXRlIHN1bW1hcnlUYWJsZTpSaWRlU3R5bGVyU2hvd2Nhc2VUYWJsZTxTdW1tYXJ5VGFibGVSb3c+O1xyXG5cclxuICAgICAgICBjb25zdHJ1Y3RvcihzaG93Y2FzZUluc3RhbmNlOlJpZGVTdHlsZXJTaG93Y2FzZUluc3RhbmNlLCB3aGVlbE1vZGVsOldoZWVsTW9kZWxEZXNjcmlwdGlvbk1vZGVsKSB7XHJcbiAgICAgICAgICAgIHN1cGVyKHNob3djYXNlSW5zdGFuY2UpO1xyXG5cclxuICAgICAgICAgICAgLy8gSW1hZ2VcclxuICAgICAgICAgICAgdGhpcy5pbWFnZS51cGRhdGUoe1xyXG4gICAgICAgICAgICAgICAgV2hlZWxGaXRtZW50UmVzb3VyY2VUeXBlOiByaWRlc3R5bGVyLkRhdGFPYmplY3RzLldoZWVsRml0bWVudFJlc291cmNlVHlwZS5DYXRhbG9nLFxyXG4gICAgICAgICAgICAgICAgV2hlZWxNb2RlbDogd2hlZWxNb2RlbC5XaGVlbE1vZGVsSURcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAvLyBCcmFuZFxyXG4gICAgICAgICAgICBIVE1MSGVscGVyLnNldFRleHQodGhpcy5icmFuZFRpdGxlRWxlbWVudCwgd2hlZWxNb2RlbC5XaGVlbEJyYW5kTmFtZSk7XHJcblxyXG4gICAgICAgICAgICAvLyBNb2RlbCBOYW1lXHJcbiAgICAgICAgICAgIEhUTUxIZWxwZXIuc2V0VGV4dCh0aGlzLnRpdGxlRWxlbWVudCwgd2hlZWxNb2RlbC5XaGVlbE1vZGVsTmFtZSk7XHJcblxyXG4gICAgICAgICAgICAvLyBGaW5pc2hcclxuICAgICAgICAgICAgSFRNTEhlbHBlci5zZXRUZXh0KHRoaXMuc3VidGl0bGVFbGVtZW50LCB3aGVlbE1vZGVsLldoZWVsTW9kZWxGaW5pc2hEZXNjcmlwdGlvbik7XHJcblxyXG4gICAgICAgICAgICAvLyBTdW1tYXJ5IFRhYmxlXHJcbiAgICAgICAgICAgIHRoaXMuc3VtbWFyeVRhYmxlID0gbmV3IFJpZGVTdHlsZXJTaG93Y2FzZVRhYmxlPFN1bW1hcnlUYWJsZVJvdz4odGhpcy5zaG93Y2FzZSwge1xyXG4gICAgICAgICAgICAgICAgY29sdW1uczogW1xyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyOiBzdHJpbmdzLmdldFN0cmluZygnc2l6ZScpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjZWxsOiAnc2l6ZSdcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyOiBzdHJpbmdzLmdldFN0cmluZygncHJpY2UnKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2VsbDogJ3ByaWNlJ1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIF0sXHJcbiAgICAgICAgICAgICAgICBzdGFydExvYWRpbmc6IHRydWVcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB0aGlzLnN1bW1hcnlFbGVtZW50LmFwcGVuZENoaWxkKHRoaXMuc3VtbWFyeVRhYmxlLmNvbXBvbmVudCk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmJ1aWxkU3BlY3NQYWdlKCk7XHJcblxyXG4gICAgICAgICAgICBhcGkucmVxdWVzdCgnd2hlZWwvZ2V0Zml0bWVudGRlc2NyaXB0aW9ucycsIHtcclxuICAgICAgICAgICAgICAgIFdoZWVsTW9kZWw6IHdoZWVsTW9kZWwuV2hlZWxNb2RlbElELFxyXG4gICAgICAgICAgICAgICAgSW5jbHVkZVByb21vdGlvbnM6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBJbmNsdWRlUHJpY2luZzogdHJ1ZVxyXG4gICAgICAgICAgICB9KS5kb25lKHJlc3BvbnNlID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc3VtbWFyeVRhYmxlLmFwcGVuZFJvd3ModGhpcy5idWlsZFN1bW1hcnlUYWJsZShyZXNwb25zZS5GaXRtZW50cykpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zcGVjc1RhYmxlLmFwcGVuZFJvd3MocmVzcG9uc2UuRml0bWVudHMpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgYnVpbGRTdW1tYXJ5VGFibGUoZml0bWVudHM6IFdoZWVsRml0bWVudERlc2NyaXB0aW9uTW9kZWxbXSk6U3VtbWFyeVRhYmxlUm93W10ge1xyXG4gICAgICAgICAgICBjb25zdCBhbGxTaXplUHJpY2VDb21iaW5hdGlvbnM6e2RpYW1ldGVyOiBudW1iZXIsIHdpZHRoOiBudW1iZXIsIHByaWNlOm51bWJlcn1bXSA9IFtdO1xyXG5cclxuICAgICAgICAgICAgLy8gR2V0IGEgbGlzdCBvZiBlYWNoIGZpdG1lbnQgc2l6ZS9wcmljZSBjb21iaW5hdGlvblxyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGZpdG1lbnQgb2YgZml0bWVudHMpIHtcclxuICAgICAgICAgICAgICAgIGxldCBmaXRtZW50UHJpY2UgPSBSaWRlU3R5bGVyU2hvd2Nhc2VXaGVlbE1vZGFsLmdldEZpdG1lbnRSZXRhaWxQcmljZURhdGFPYmplY3QoZml0bWVudCk7XHJcbiAgICAgICAgICAgICAgICBsZXQgZml0bWVudFByaWNlQW1vdW50ID0gZml0bWVudFByaWNlID8gZml0bWVudFByaWNlLldoZWVsUHJpY2luZ0Ftb3VudCA6IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgYWxsU2l6ZVByaWNlQ29tYmluYXRpb25zLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgIGRpYW1ldGVyOiBmaXRtZW50LkRpYW1ldGVyTWluLFxyXG4gICAgICAgICAgICAgICAgICAgIHdpZHRoOiBmaXRtZW50LldpZHRoTWluLFxyXG4gICAgICAgICAgICAgICAgICAgIHByaWNlOiBmaXRtZW50UHJpY2VBbW91bnRcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBhbGxTaXplUHJpY2VDb21iaW5hdGlvbnMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgZGlhbWV0ZXI6IGZpdG1lbnQuRGlhbWV0ZXJNaW4sXHJcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IGZpdG1lbnQuV2lkdGhNYXgsXHJcbiAgICAgICAgICAgICAgICAgICAgcHJpY2U6IGZpdG1lbnRQcmljZUFtb3VudFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGFsbFNpemVQcmljZUNvbWJpbmF0aW9ucy5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICBkaWFtZXRlcjogZml0bWVudC5EaWFtZXRlck1heCxcclxuICAgICAgICAgICAgICAgICAgICB3aWR0aDogZml0bWVudC5XaWR0aE1pbixcclxuICAgICAgICAgICAgICAgICAgICBwcmljZTogZml0bWVudFByaWNlQW1vdW50XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgYWxsU2l6ZVByaWNlQ29tYmluYXRpb25zLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgIGRpYW1ldGVyOiBmaXRtZW50LkRpYW1ldGVyTWF4LFxyXG4gICAgICAgICAgICAgICAgICAgIHdpZHRoOiBmaXRtZW50LldpZHRoTWF4LFxyXG4gICAgICAgICAgICAgICAgICAgIHByaWNlOiBmaXRtZW50UHJpY2VBbW91bnRcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb25zdCBzaXplUHJpY2VSYW5nZXM6e1xyXG4gICAgICAgICAgICAgICAgW3NpemU6c3RyaW5nXTpQcmljZVJhbmdlXHJcbiAgICAgICAgICAgIH0gPSB7fTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIEdlbmVyYXRlIHByaWNlIHJhbmdlcyBmb3IgZWFjaCB1bmlxdWUgc2l6ZSBkZXNjcmlwdGlvbiBjcmVhdGVkIGFib3ZlXHJcbiAgICAgICAgICAgIGZvciAoY29uc3Qgc2l6ZVByaWNlQ29tYm8gb2YgYWxsU2l6ZVByaWNlQ29tYmluYXRpb25zKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB7ZGlhbWV0ZXIsIHByaWNlLCB3aWR0aH0gPSBzaXplUHJpY2VDb21ibztcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNpemU6c3RyaW5nID0gZGlhbWV0ZXIgKyAn4oCzIHggJyArIHdpZHRoO1xyXG5cclxuICAgICAgICAgICAgICAgIGxldCBwcmljZVJhbmdlOlByaWNlUmFuZ2U7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHNpemUgaW4gc2l6ZVByaWNlUmFuZ2VzID09PSBmYWxzZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHByaWNlUmFuZ2UgPSBzaXplUHJpY2VSYW5nZXNbc2l6ZV0gPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1pbjogSW5maW5pdHksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1heDogLUluZmluaXR5XHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcHJpY2VSYW5nZSA9IHNpemVQcmljZVJhbmdlc1tzaXplXTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAocHJpY2UpIHtcclxuICAgICAgICAgICAgICAgICAgICBOdW1iZXJIZWxwZXIuZXh0ZW5kUmFuZ2UocHJpY2UsIHByaWNlUmFuZ2UpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBUcmFuc2xhdGUgc2l6ZVByaWNlUmFuZ2VzIGludG8gU3VtbWFyeVRhYmxlUm93c1xyXG4gICAgICAgICAgICBsZXQgc3VtbWFyeVRhYmxlUm93czpTdW1tYXJ5VGFibGVSb3dbXSA9IFtdO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgcHJpY2VJc1Vuc3BlY2lmaWVkID0gKHByaWNlOm51bWJlcikgPT4ge1xyXG4gICAgICAgICAgICAgICAgLy8gUHJpY2UgbXVzdCBiZSBhIG51bWJlciwgYW5kIG5vdCArLSBpbmZpbml0eVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHR5cGVvZiBwcmljZSAhPT0gJ251bWJlcicgfHwgaXNOYU4ocHJpY2UpIHx8IHByaWNlID09PSBJbmZpbml0eSB8fCBwcmljZSA9PT0gLUluZmluaXR5O1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgZm9yIChjb25zdCBzaXplIGluIHNpemVQcmljZVJhbmdlcykge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFzaXplUHJpY2VSYW5nZXMuaGFzT3duUHJvcGVydHkoc2l6ZSkpIGNvbnRpbnVlO1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IHByaWNlUmFuZ2UgPSBzaXplUHJpY2VSYW5nZXNbc2l6ZV07XHJcblxyXG4gICAgICAgICAgICAgICAgbGV0IHByaWNlU3RyaW5nOnN0cmluZztcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAocHJpY2VJc1Vuc3BlY2lmaWVkKHByaWNlUmFuZ2UubWluKSB8fCBwcmljZUlzVW5zcGVjaWZpZWQocHJpY2VSYW5nZS5tYXgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcHJpY2VTdHJpbmcgPSBzdHJpbmdzLmdldFN0cmluZygnY2FsbCcpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocHJpY2VSYW5nZS5taW4gPT09IHByaWNlUmFuZ2UubWF4KSBwcmljZVN0cmluZyA9IHN0cmluZ3MuZm9ybWF0KCkuY3VycmVuY3kocHJpY2VSYW5nZS5taW4sICckJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBwcmljZVN0cmluZyA9IHN0cmluZ3MuZm9ybWF0KCkuY3VycmVuY3kocHJpY2VSYW5nZS5taW4sICckJykgKyAnIC0gJyArIHN0cmluZ3MuZm9ybWF0KCkuY3VycmVuY3kocHJpY2VSYW5nZS5tYXgsICckJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgc3VtbWFyeVRhYmxlUm93cy5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICBzaXplOiBzaXplLFxyXG4gICAgICAgICAgICAgICAgICAgIHByaWNlOiBwcmljZVN0cmluZ1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBzdW1tYXJ5VGFibGVSb3dzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBidWlsZFNwZWNzUGFnZSgpIHtcclxuICAgICAgICAgICAgdGhpcy5zcGVjc1RhYmxlID0gbmV3IFJpZGVTdHlsZXJTaG93Y2FzZVRhYmxlPFdoZWVsRml0bWVudERlc2NyaXB0aW9uTW9kZWw+KHRoaXMuc2hvd2Nhc2UsIHtcclxuICAgICAgICAgICAgICAgIGNvbHVtbnM6IFtcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcjogc3RyaW5ncy5nZXRTdHJpbmcoJ3NpemUnKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2VsbDogUmlkZVN0eWxlclNob3djYXNlV2hlZWxNb2RhbC5nZXRGaXRtZW50U2l6ZURlc2NyaXB0aW9uXHJcbiAgICAgICAgICAgICAgICAgICAgfSwgXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXI6IHN0cmluZ3MuZ2V0U3RyaW5nKCdvZmZzZXQnKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2VsbDogZml0bWVudCA9PiBSaWRlU3R5bGVyU2hvd2Nhc2VUYWJsZS5mb3JtYXRDZWxsKGZpdG1lbnQsICdPZmZzZXRNaW4nLCAnbW0nKVxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXI6IHN0cmluZ3MuZ2V0U3RyaW5nKCdib2x0LXBhdHRlcm4nKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2VsbDogJ0JvbHRQYXR0ZXJuRGVzY3JpcHRpb24nXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcjogc3RyaW5ncy5nZXRTdHJpbmcoJ2NlbnRlcmJvcmUnKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2VsbDogZml0bWVudCA9PiBSaWRlU3R5bGVyU2hvd2Nhc2VUYWJsZS5mb3JtYXRDZWxsKGZpdG1lbnQsICdDZW50ZXJib3JlTU0nLCAnbW0nKVxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXI6ICdQcmljZScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNlbGw6IFJpZGVTdHlsZXJTaG93Y2FzZVdoZWVsTW9kYWwuZ2V0Rml0bWVudFByaWNlXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcjogc3RyaW5ncy5nZXRTdHJpbmcoJ2l0ZW0tbnVtYmVyJyksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNlbGw6IFJpZGVTdHlsZXJTaG93Y2FzZVdoZWVsTW9kYWwuZ2V0Rml0bWVudEl0ZW1OdW1iZXJcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBdXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgY29uc3Qgc3BlY3NDb250YWluZXIgPSBIVE1MSGVscGVyLmNyZWF0ZUVsZW1lbnQoe1xyXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnc2Nyb2xsYWJsZScsXHJcbiAgICAgICAgICAgICAgICBhcHBlbmQ6IHRoaXMuc3BlY3NUYWJsZS5jb21wb25lbnRcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmFkZFBhZ2Uoe1xyXG4gICAgICAgICAgICAgICAgY29udGFpbmVyOiBzcGVjc0NvbnRhaW5lcixcclxuICAgICAgICAgICAgICAgIGxhYmVsOiBzdHJpbmdzLmdldFN0cmluZygnc3BlY2lmaWNhdGlvbnMnKVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBjcmVhdGVJbWFnZSgpOlJlc2l6ZWFibGVSZXNvdXJjZUltYWdlPFwid2hlZWwvaW1hZ2VcIj4ge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFJlc2l6ZWFibGVSZXNvdXJjZUltYWdlPFwid2hlZWwvaW1hZ2VcIj4odGhpcy5pbWFnZUNvbnRhaW5lciwge1xyXG4gICAgICAgICAgICAgICAgYWN0aW9uOiBcIndoZWVsL2ltYWdlXCIsXHJcbiAgICAgICAgICAgICAgICBiYXNlSW5zdHJ1Y3Rpb25zOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgUG9zaXRpb25YOiByaWRlc3R5bGVyLlJlcXVlc3RzLkltYWdlUG9zaXRpb24uQ2VudGVyLFxyXG4gICAgICAgICAgICAgICAgICAgIFBvc2l0aW9uWTogcmlkZXN0eWxlci5SZXF1ZXN0cy5JbWFnZVBvc2l0aW9uLk5lYXIsXHJcbiAgICAgICAgICAgICAgICAgICAgSW5jbHVkZVNoYWRvdzogdHJ1ZVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIGdldEZpdG1lbnRSZXRhaWxQcmljZURhdGFPYmplY3QoZml0bWVudDogV2hlZWxGaXRtZW50RGVzY3JpcHRpb25Nb2RlbCk6V2hlZWxQcmljaW5nRGF0YU9iamVjdCB7XHJcbiAgICAgICAgICAgIHJldHVybiBmaXRtZW50LlByaWNpbmcgJiYgZml0bWVudC5QcmljaW5nWydSZXRhaWwnXSB8fCB1bmRlZmluZWQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBnZXRGaXRtZW50U2l6ZURlc2NyaXB0aW9uKGZpdG1lbnQ6V2hlZWxGaXRtZW50RGVzY3JpcHRpb25Nb2RlbCk6c3RyaW5nIHtcclxuICAgICAgICAgICAgbGV0IHtEaWFtZXRlck1pbiwgV2lkdGhNaW59ID0gZml0bWVudDtcclxuXHJcbiAgICAgICAgICAgIGlmICghRGlhbWV0ZXJNaW4gfHwgIVdpZHRoTWluKSByZXR1cm4gUmlkZVN0eWxlclNob3djYXNlVGFibGUuZW1wdHlDZWxsU3RyaW5nO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGAke0RpYW1ldGVyTWlufeKAsyB4ICR7V2lkdGhNaW59YDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIGdldEZpdG1lbnRQcmljZShmaXRtZW50OiBXaGVlbEZpdG1lbnREZXNjcmlwdGlvbk1vZGVsKTpzdHJpbmcge1xyXG4gICAgICAgICAgICBjb25zdCBub1ByaWNlU3RyaW5nID0gc3RyaW5ncy5nZXRTdHJpbmcoJ2NhbGwnKTtcclxuICAgICAgICAgICAgbGV0IHJldGFpbFByaWNlRGF0YU9iamVjdDpXaGVlbFByaWNpbmdEYXRhT2JqZWN0ID0gUmlkZVN0eWxlclNob3djYXNlV2hlZWxNb2RhbC5nZXRGaXRtZW50UmV0YWlsUHJpY2VEYXRhT2JqZWN0KGZpdG1lbnQpO1xyXG4gICAgXHJcbiAgICAgICAgICAgIGlmICghcmV0YWlsUHJpY2VEYXRhT2JqZWN0KSByZXR1cm4gbm9QcmljZVN0cmluZztcclxuICAgIFxyXG4gICAgICAgICAgICBsZXQgcHJpY2U6bnVtYmVyID0gcmV0YWlsUHJpY2VEYXRhT2JqZWN0LldoZWVsUHJpY2luZ0Ftb3VudDtcclxuICAgIFxyXG4gICAgICAgICAgICByZXR1cm4gcHJpY2UgPyBzdHJpbmdzLmZvcm1hdCgpLmN1cnJlbmN5KHByaWNlLCAnJCcpIDogbm9QcmljZVN0cmluZztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIGdldEZpdG1lbnRJdGVtTnVtYmVyKGZpdG1lbnQ6IFdoZWVsRml0bWVudERlc2NyaXB0aW9uTW9kZWwpOnN0cmluZyB7XHJcbiAgICAgICAgICAgIGxldCByZXRhaWxQcmljZURhdGFPYmplY3Q6V2hlZWxQcmljaW5nRGF0YU9iamVjdCA9IFJpZGVTdHlsZXJTaG93Y2FzZVdoZWVsTW9kYWwuZ2V0Rml0bWVudFJldGFpbFByaWNlRGF0YU9iamVjdChmaXRtZW50KTtcclxuXHJcbiAgICAgICAgICAgIGxldCBpdGVtTnVtYmVyOnN0cmluZztcclxuXHJcbiAgICAgICAgICAgIC8vIEl0ZW0gbnVtYmVyIGlzIHRoZSByZXRhaWwgcHJpY2luZyBpdGVtIG51bWJlciBieSBkZWZhdWx0XHJcbiAgICAgICAgICAgIGlmIChyZXRhaWxQcmljZURhdGFPYmplY3QpIGl0ZW1OdW1iZXIgPSByZXRhaWxQcmljZURhdGFPYmplY3QuV2hlZWxQcmljaW5nSXRlbU51bWJlcjtcclxuICAgICAgICAgICAgLy8gSWYgdGhlcmUncyBubyByZXRhaWwgcHJpY2luZywgb3IgdGhlIHJldGFpbCBwcmljZSBkb2Vzbid0IGhhdmUgYSBpdGVtIG51bWJlciB1c2UgdGhlIGZpdG1lbnQncyBwYXJ0IG51bWJlclxyXG4gICAgICAgICAgICBpZiAoIWl0ZW1OdW1iZXIpIGl0ZW1OdW1iZXIgPSBmaXRtZW50LlBhcnROdW1iZXI7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gaXRlbU51bWJlciB8fCBSaWRlU3R5bGVyU2hvd2Nhc2VUYWJsZS5lbXB0eUNlbGxTdHJpbmc7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGludGVyZmFjZSBQcmljZVJhbmdlIHtcclxuICAgICAgICBtaW46IG51bWJlcixcclxuICAgICAgICBtYXg6IG51bWJlclxyXG4gICAgfVxyXG5cclxuICAgIGludGVyZmFjZSBTdW1tYXJ5VGFibGVSb3cge1xyXG4gICAgICAgIHNpemU6IHN0cmluZztcclxuICAgICAgICBwcmljZTogc3RyaW5nO1xyXG4gICAgfVxyXG59Il19

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var RideStylerShowcase;
(function (RideStylerShowcase) {
    var optionClass = 'ridestyler-showcase-pagination-option';
    var noResultsClass = optionClass + '-no-results';

    var RideStylerShowcaseWheelSelector = function (_RideStylerShowcase$R) {
        _inherits(RideStylerShowcaseWheelSelector, _RideStylerShowcase$R);

        function RideStylerShowcaseWheelSelector(showcaseInstance) {
            _classCallCheck(this, RideStylerShowcaseWheelSelector);

            return _possibleConstructorReturn(this, (RideStylerShowcaseWheelSelector.__proto__ || Object.getPrototypeOf(RideStylerShowcaseWheelSelector)).call(this, showcaseInstance));
        }

        _createClass(RideStylerShowcaseWheelSelector, [{
            key: 'showNoResults',
            value: function showNoResults() {
                var _this2 = this;

                this.noResultsElement = RideStylerShowcase.HTMLHelper.createElement('div', {
                    className: optionClass + ' ' + noResultsClass,
                    text: RideStylerShowcase.strings.getString('no-wheel-results') + ' ',
                    appendTo: this.optionContainer
                });
                RideStylerShowcase.HTMLHelper.createButton({
                    appendTo: this.noResultsElement,
                    text: RideStylerShowcase.strings.getString('change-vehicle'),
                    link: true
                }).addEventListener('click', function () {
                    _this2.state.changeState(RideStylerShowcase.States.ChooseVehicle);
                });
            }
        }, {
            key: 'countResults',
            value: function countResults(filters) {
                return RideStylerShowcase.PromiseHelper.then(RideStylerShowcase.api.request("wheel/countmodels", filters), function (response) {
                    return response.Count;
                });
            }
        }, {
            key: 'getResults',
            value: function getResults(filters) {
                return RideStylerShowcase.PromiseHelper.then(RideStylerShowcase.api.request("wheel/getmodeldescriptions", RideStylerShowcase.ObjectHelper.assign({
                    IncludeMetaKeys: ['Description', 'Highlights'],
                    HasFitments: true
                }, filters)), function (response) {
                    return response.Models;
                });
            }
        }, {
            key: 'productFilter',
            value: function productFilter(product) {
                return true;
            }
        }, {
            key: 'productImageSource',
            value: function productImageSource(product) {
                return ridestyler.wheel.image({
                    WheelFitmentResourceType: 3 /* Catalog */
                    , WheelModel: product.WheelModelID,
                    Width: 100,
                    Height: 100,
                    PositionX: 1 /* Center */
                    , PositionY: 1 /* Center */
                    , IncludeShadow: true
                });
            }
        }, {
            key: 'productImageLabels',
            value: function productImageLabels(product) {
                return {
                    primary: product.WheelBrandName,
                    secondary: product.WheelModelName,
                    tertiary: product.WheelModelFinishDescription
                };
            }
        }]);

        return RideStylerShowcaseWheelSelector;
    }(RideStylerShowcase.RideStylerShowcaseProductSelector);

    RideStylerShowcase.RideStylerShowcaseWheelSelector = RideStylerShowcaseWheelSelector;
})(RideStylerShowcase || (RideStylerShowcase = {}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvUmlkZVN0eWxlclNob3djYXNlV2hlZWxTZWxlY3Rvci50cyJdLCJuYW1lcyI6WyJSaWRlU3R5bGVyU2hvd2Nhc2UiLCJvcHRpb25DbGFzcyIsIm5vUmVzdWx0c0NsYXNzIiwiUmlkZVN0eWxlclNob3djYXNlV2hlZWxTZWxlY3RvciIsInNob3djYXNlSW5zdGFuY2UiLCJub1Jlc3VsdHNFbGVtZW50IiwiSFRNTEhlbHBlciIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc05hbWUiLCJ0ZXh0Iiwic3RyaW5ncyIsImdldFN0cmluZyIsImFwcGVuZFRvIiwib3B0aW9uQ29udGFpbmVyIiwiY3JlYXRlQnV0dG9uIiwibGluayIsImFkZEV2ZW50TGlzdGVuZXIiLCJzdGF0ZSIsImNoYW5nZVN0YXRlIiwiU3RhdGVzIiwiQ2hvb3NlVmVoaWNsZSIsImZpbHRlcnMiLCJQcm9taXNlSGVscGVyIiwidGhlbiIsImFwaSIsInJlcXVlc3QiLCJyZXNwb25zZSIsIkNvdW50IiwiT2JqZWN0SGVscGVyIiwiYXNzaWduIiwiSW5jbHVkZU1ldGFLZXlzIiwiSGFzRml0bWVudHMiLCJNb2RlbHMiLCJwcm9kdWN0IiwicmlkZXN0eWxlciIsIndoZWVsIiwiaW1hZ2UiLCJXaGVlbEZpdG1lbnRSZXNvdXJjZVR5cGUiLCJXaGVlbE1vZGVsIiwiV2hlZWxNb2RlbElEIiwiV2lkdGgiLCJIZWlnaHQiLCJQb3NpdGlvblgiLCJQb3NpdGlvblkiLCJJbmNsdWRlU2hhZG93IiwicHJpbWFyeSIsIldoZWVsQnJhbmROYW1lIiwic2Vjb25kYXJ5IiwiV2hlZWxNb2RlbE5hbWUiLCJ0ZXJ0aWFyeSIsIldoZWVsTW9kZWxGaW5pc2hEZXNjcmlwdGlvbiIsIlJpZGVTdHlsZXJTaG93Y2FzZVByb2R1Y3RTZWxlY3RvciJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQSxJQUFVQSxrQkFBVjtBQUFBLENBQUEsVUFBVUEsa0JBQVYsRUFBNEI7QUFLeEIsUUFBTUMsY0FBYyx1Q0FBcEI7QUFDQSxRQUFNQyxpQkFBaUJELGNBQWMsYUFBckM7O0FBTndCLFFBUXhCRSwrQkFSd0I7QUFBQTs7QUFrQnBCLGlEQUFZQyxnQkFBWixFQUF1RDtBQUFBOztBQUFBLHFLQUM3Q0EsZ0JBRDZDO0FBRXREOztBQXBCbUI7QUFBQTtBQUFBLDRDQXNCRztBQUFBOztBQUNuQixxQkFBS0MsZ0JBQUwsR0FBd0JMLG1CQUFBTSxVQUFBLENBQVdDLGFBQVgsQ0FBeUIsS0FBekIsRUFBZ0M7QUFDcERDLCtCQUFXUCxjQUFjLEdBQWQsR0FBb0JDLGNBRHFCO0FBRXBETywwQkFBTVQsbUJBQUFVLE9BQUEsQ0FBUUMsU0FBUixDQUFrQixrQkFBbEIsSUFBd0MsR0FGTTtBQUdwREMsOEJBQVUsS0FBS0M7QUFIcUMsaUJBQWhDLENBQXhCO0FBTUFiLG1DQUFBTSxVQUFBLENBQVdRLFlBQVgsQ0FBd0I7QUFDcEJGLDhCQUFVLEtBQUtQLGdCQURLO0FBRXBCSSwwQkFBTVQsbUJBQUFVLE9BQUEsQ0FBUUMsU0FBUixDQUFrQixnQkFBbEIsQ0FGYztBQUdwQkksMEJBQU07QUFIYyxpQkFBeEIsRUFJR0MsZ0JBSkgsQ0FJb0IsT0FKcEIsRUFJNkIsWUFBSztBQUM5QiwyQkFBS0MsS0FBTCxDQUFXQyxXQUFYLENBQXVCbEIsbUJBQUFtQixNQUFBLENBQU9DLGFBQTlCO0FBQ0gsaUJBTkQ7QUFPSDtBQXBDbUI7QUFBQTtBQUFBLHlDQXNDR0MsT0F0Q0gsRUFzQzRCO0FBQzVDLHVCQUFPckIsbUJBQUFzQixhQUFBLENBQWNDLElBQWQsQ0FBbUJ2QixtQkFBQXdCLEdBQUEsQ0FBSUMsT0FBSixDQUFZLG1CQUFaLEVBQWlDSixPQUFqQyxDQUFuQixFQUE4RDtBQUFBLDJCQUFZSyxTQUFTQyxLQUFyQjtBQUFBLGlCQUE5RCxDQUFQO0FBQ0g7QUF4Q21CO0FBQUE7QUFBQSx1Q0F5Q0NOLE9BekNELEVBeUMwQjtBQUMxQyx1QkFBT3JCLG1CQUFBc0IsYUFBQSxDQUFjQyxJQUFkLENBQW1CdkIsbUJBQUF3QixHQUFBLENBQUlDLE9BQUosQ0FBWSw0QkFBWixFQUEwQ3pCLG1CQUFBNEIsWUFBQSxDQUFhQyxNQUFiLENBQXVDO0FBQ3ZHQyxxQ0FBaUIsQ0FDYixhQURhLEVBRWIsWUFGYSxDQURzRjtBQUt2R0MsaUNBQWE7QUFMMEYsaUJBQXZDLEVBTWpFVixPQU5pRSxDQUExQyxDQUFuQixFQU1PO0FBQUEsMkJBQVlLLFNBQVNNLE1BQXJCO0FBQUEsaUJBTlAsQ0FBUDtBQU9IO0FBakRtQjtBQUFBO0FBQUEsMENBa0RJQyxPQWxESixFQWtEdUM7QUFDdkQsdUJBQU8sSUFBUDtBQUNIO0FBcERtQjtBQUFBO0FBQUEsK0NBcURTQSxPQXJEVCxFQXFENEM7QUFDNUQsdUJBQU9DLFdBQVdDLEtBQVgsQ0FBaUJDLEtBQWpCLENBQXVCO0FBQzFCQyw4Q0FBd0IsQ0FERSxDQUNGO0FBREUsc0JBRTFCQyxZQUFZTCxRQUFRTSxZQUZNO0FBRzFCQywyQkFBTyxHQUhtQjtBQUkxQkMsNEJBQVEsR0FKa0I7QUFLMUJDLCtCQUFTLENBTGlCLENBS2pCO0FBTGlCLHNCQU0xQkMsV0FBUyxDQU5pQixDQU1qQjtBQU5pQixzQkFPMUJDLGVBQWU7QUFQVyxpQkFBdkIsQ0FBUDtBQVNIO0FBL0RtQjtBQUFBO0FBQUEsK0NBZ0VTWCxPQWhFVCxFQWdFNEM7QUFDNUQsdUJBQU87QUFDSFksNkJBQVNaLFFBQVFhLGNBRGQ7QUFFSEMsK0JBQVdkLFFBQVFlLGNBRmhCO0FBR0hDLDhCQUFVaEIsUUFBUWlCO0FBSGYsaUJBQVA7QUFLSDtBQXRFbUI7O0FBQUE7QUFBQSxNQVE2QmxELG1CQUFBbUQsaUNBUjdCOztBQVFYbkQsdUJBQUFHLCtCQUFBLEdBQStCQSwrQkFBL0I7QUFnRWhCLENBeEVELEVBQVVILHVCQUFBQSxxQkFBa0IsRUFBbEIsQ0FBViIsImZpbGUiOiJzY3JpcHRzL2NvbXBvbmVudHMvUmlkZVN0eWxlclNob3djYXNlV2hlZWxTZWxlY3Rvci5qcyIsInNvdXJjZXNDb250ZW50IjpbIm5hbWVzcGFjZSBSaWRlU3R5bGVyU2hvd2Nhc2Uge1xyXG4gICAgaW1wb3J0IFdoZWVsRmlsdGVyTW9kZWwgPSByaWRlc3R5bGVyLlJlcXVlc3RzLldoZWVsRmlsdGVyTW9kZWw7XHJcbiAgICBpbXBvcnQgV2hlZWxNb2RlbERlc2NyaXB0aW9uTW9kZWwgPSByaWRlc3R5bGVyLkRlc2NyaXB0aW9ucy5XaGVlbE1vZGVsRGVzY3JpcHRpb25Nb2RlbDtcclxuICAgIGltcG9ydCBXaGVlbE1vZGVsUmVxdWVzdCA9IHJpZGVzdHlsZXIuUmVxdWVzdHMuV2hlZWxNb2RlbERlc2NyaXB0aW9uUmVxdWVzdE1vZGVsO1xyXG5cclxuICAgIGNvbnN0IG9wdGlvbkNsYXNzID0gJ3JpZGVzdHlsZXItc2hvd2Nhc2UtcGFnaW5hdGlvbi1vcHRpb24nO1xyXG4gICAgY29uc3Qgbm9SZXN1bHRzQ2xhc3MgPSBvcHRpb25DbGFzcyArICctbm8tcmVzdWx0cydcclxuXHJcbiAgICBleHBvcnQgY2xhc3MgUmlkZVN0eWxlclNob3djYXNlV2hlZWxTZWxlY3RvciBleHRlbmRzIFJpZGVTdHlsZXJTaG93Y2FzZVByb2R1Y3RTZWxlY3RvcjxXaGVlbE1vZGVsRGVzY3JpcHRpb25Nb2RlbCwgV2hlZWxGaWx0ZXJNb2RlbD4ge1xyXG4gICAgICAgIHByaXZhdGUgcmVhZG9ubHkgdmVoaWNsZUNvbmZpZ3VyYXRpb25JRDpzdHJpbmc7XHJcbiAgICAgICAgcHJpdmF0ZSByZWFkb25seSBzdXBwb3J0ZWRWZWhpY2xlSW1hZ2VyeToge1xyXG4gICAgICAgICAgICBhbmdsZWQ6IGJvb2xlYW47XHJcbiAgICAgICAgICAgIHNpZGU6IGJvb2xlYW47XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIHJlYWRvbmx5IGRlZmF1bHRGaWx0ZXJzOiBXaGVlbEZpbHRlck1vZGVsO1xyXG4gICAgICAgIHByb3RlY3RlZCBjdXJyZW50RmlsdGVyczogV2hlZWxGaWx0ZXJNb2RlbDtcclxuXHJcbiAgICAgICAgY29uc3RydWN0b3Ioc2hvd2Nhc2VJbnN0YW5jZTpSaWRlU3R5bGVyU2hvd2Nhc2VJbnN0YW5jZSkge1xyXG4gICAgICAgICAgICBzdXBlcihzaG93Y2FzZUluc3RhbmNlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBzaG93Tm9SZXN1bHRzKCkge1xyXG4gICAgICAgICAgICB0aGlzLm5vUmVzdWx0c0VsZW1lbnQgPSBIVE1MSGVscGVyLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcclxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogb3B0aW9uQ2xhc3MgKyAnICcgKyBub1Jlc3VsdHNDbGFzcyxcclxuICAgICAgICAgICAgICAgIHRleHQ6IHN0cmluZ3MuZ2V0U3RyaW5nKCduby13aGVlbC1yZXN1bHRzJykgKyAnICcsXHJcbiAgICAgICAgICAgICAgICBhcHBlbmRUbzogdGhpcy5vcHRpb25Db250YWluZXJcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBIVE1MSGVscGVyLmNyZWF0ZUJ1dHRvbih7XHJcbiAgICAgICAgICAgICAgICBhcHBlbmRUbzogdGhpcy5ub1Jlc3VsdHNFbGVtZW50LFxyXG4gICAgICAgICAgICAgICAgdGV4dDogc3RyaW5ncy5nZXRTdHJpbmcoJ2NoYW5nZS12ZWhpY2xlJyksXHJcbiAgICAgICAgICAgICAgICBsaW5rOiB0cnVlXHJcbiAgICAgICAgICAgIH0pLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5jaGFuZ2VTdGF0ZShTdGF0ZXMuQ2hvb3NlVmVoaWNsZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIGNvdW50UmVzdWx0cyhmaWx0ZXJzOiBXaGVlbEZpbHRlck1vZGVsKTogcmlkZXN0eWxlci5SaWRlU3R5bGVyUHJvbWlzZTxudW1iZXIsIHJpZGVzdHlsZXIuUmlkZVN0eWxlckFQSVJlc3BvbnNlPiB7XHJcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlSGVscGVyLnRoZW4oYXBpLnJlcXVlc3QoXCJ3aGVlbC9jb3VudG1vZGVsc1wiLCBmaWx0ZXJzKSwgcmVzcG9uc2UgPT4gcmVzcG9uc2UuQ291bnQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwcm90ZWN0ZWQgZ2V0UmVzdWx0cyhmaWx0ZXJzOiBXaGVlbEZpbHRlck1vZGVsKTogcmlkZXN0eWxlci5SaWRlU3R5bGVyUHJvbWlzZTxXaGVlbE1vZGVsRGVzY3JpcHRpb25Nb2RlbFtdLCByaWRlc3R5bGVyLlJpZGVTdHlsZXJBUElSZXNwb25zZT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZUhlbHBlci50aGVuKGFwaS5yZXF1ZXN0KFwid2hlZWwvZ2V0bW9kZWxkZXNjcmlwdGlvbnNcIiwgT2JqZWN0SGVscGVyLmFzc2lnbjxXaGVlbE1vZGVsUmVxdWVzdD4oe1xyXG4gICAgICAgICAgICAgICAgSW5jbHVkZU1ldGFLZXlzOiBbXHJcbiAgICAgICAgICAgICAgICAgICAgJ0Rlc2NyaXB0aW9uJyxcclxuICAgICAgICAgICAgICAgICAgICAnSGlnaGxpZ2h0cydcclxuICAgICAgICAgICAgICAgIF0sXHJcbiAgICAgICAgICAgICAgICBIYXNGaXRtZW50czogdHJ1ZVxyXG4gICAgICAgICAgICB9LCBmaWx0ZXJzKSksIHJlc3BvbnNlID0+IHJlc3BvbnNlLk1vZGVscyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHByb3RlY3RlZCBwcm9kdWN0RmlsdGVyKHByb2R1Y3Q6IFdoZWVsTW9kZWxEZXNjcmlwdGlvbk1vZGVsKTogYm9vbGVhbiB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwcm90ZWN0ZWQgcHJvZHVjdEltYWdlU291cmNlKHByb2R1Y3Q6IFdoZWVsTW9kZWxEZXNjcmlwdGlvbk1vZGVsKTogc3RyaW5nIHtcclxuICAgICAgICAgICAgcmV0dXJuIHJpZGVzdHlsZXIud2hlZWwuaW1hZ2Uoe1xyXG4gICAgICAgICAgICAgICAgV2hlZWxGaXRtZW50UmVzb3VyY2VUeXBlOiByaWRlc3R5bGVyLkRhdGFPYmplY3RzLldoZWVsRml0bWVudFJlc291cmNlVHlwZS5DYXRhbG9nLFxyXG4gICAgICAgICAgICAgICAgV2hlZWxNb2RlbDogcHJvZHVjdC5XaGVlbE1vZGVsSUQsXHJcbiAgICAgICAgICAgICAgICBXaWR0aDogMTAwLFxyXG4gICAgICAgICAgICAgICAgSGVpZ2h0OiAxMDAsXHJcbiAgICAgICAgICAgICAgICBQb3NpdGlvblg6IHJpZGVzdHlsZXIuUmVxdWVzdHMuSW1hZ2VQb3NpdGlvbi5DZW50ZXIsXHJcbiAgICAgICAgICAgICAgICBQb3NpdGlvblk6IHJpZGVzdHlsZXIuUmVxdWVzdHMuSW1hZ2VQb3NpdGlvbi5DZW50ZXIsXHJcbiAgICAgICAgICAgICAgICBJbmNsdWRlU2hhZG93OiB0cnVlXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwcm90ZWN0ZWQgcHJvZHVjdEltYWdlTGFiZWxzKHByb2R1Y3Q6IFdoZWVsTW9kZWxEZXNjcmlwdGlvbk1vZGVsKTogeyBwcmltYXJ5OiBzdHJpbmc7IHNlY29uZGFyeT86IHN0cmluZzsgdGVydGlhcnk/OiBzdHJpbmc7IH0ge1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgcHJpbWFyeTogcHJvZHVjdC5XaGVlbEJyYW5kTmFtZSxcclxuICAgICAgICAgICAgICAgIHNlY29uZGFyeTogcHJvZHVjdC5XaGVlbE1vZGVsTmFtZSxcclxuICAgICAgICAgICAgICAgIHRlcnRpYXJ5OiBwcm9kdWN0LldoZWVsTW9kZWxGaW5pc2hEZXNjcmlwdGlvblxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSJdfQ==

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var RideStylerShowcase;
(function (RideStylerShowcase) {
    var className = 'ridestyler-showcase-tire-details';

    var TireDetails = function (_RideStylerShowcase$C) {
        _inherits(TireDetails, _RideStylerShowcase$C);

        function TireDetails() {
            _classCallCheck(this, TireDetails);

            return _possibleConstructorReturn(this, (TireDetails.__proto__ || Object.getPrototypeOf(TireDetails)).apply(this, arguments));
        }

        _createClass(TireDetails, [{
            key: 'initializeComponent',
            value: function initializeComponent() {
                var _this2 = this;

                this.component = RideStylerShowcase.HTMLHelper.createElementWithClass('div', className + " ridestyler-showcase-details");
                RideStylerShowcase.HTMLHelper.createElement('div', {
                    className: className + '-title' + " ridestyler-showcase-details-title",
                    text: RideStylerShowcase.strings.getString('tire-details'),
                    appendTo: this.component
                });
                this.tireNameElement = RideStylerShowcase.HTMLHelper.createElement('div', {
                    className: className + '-name',
                    appendTo: this.component
                });
                this.tireDescriptionElement = RideStylerShowcase.HTMLHelper.createElement('div', {
                    className: className + '-description ridestyler-showcase-details-secondary',
                    appendTo: this.component
                });
                this.state.afterDataChange(function (data) {
                    return _this2.onDataChange(data);
                });
            }
        }, {
            key: 'onDataChange',
            value: function onDataChange(data) {
                var currentTire = data.currentTire;
                this.component.style.display = currentTire ? '' : 'none';
                if (currentTire) {
                    RideStylerShowcase.HTMLHelper.setText(this.tireNameElement, currentTire.TireBrandName + ' ' + currentTire.TireModelName);
                    RideStylerShowcase.HTMLHelper.setText(this.tireDescriptionElement, currentTire.Attributes && currentTire.Attributes.length ? currentTire.Attributes.join(', ') : '');
                }
            }
        }]);

        return TireDetails;
    }(RideStylerShowcase.ComponentBase);

    RideStylerShowcase.TireDetails = TireDetails;
})(RideStylerShowcase || (RideStylerShowcase = {}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvVGlyZURldGFpbHMudHMiXSwibmFtZXMiOlsiUmlkZVN0eWxlclNob3djYXNlIiwiY2xhc3NOYW1lIiwiVGlyZURldGFpbHMiLCJjb21wb25lbnQiLCJIVE1MSGVscGVyIiwiY3JlYXRlRWxlbWVudFdpdGhDbGFzcyIsImNyZWF0ZUVsZW1lbnQiLCJ0ZXh0Iiwic3RyaW5ncyIsImdldFN0cmluZyIsImFwcGVuZFRvIiwidGlyZU5hbWVFbGVtZW50IiwidGlyZURlc2NyaXB0aW9uRWxlbWVudCIsInN0YXRlIiwiYWZ0ZXJEYXRhQ2hhbmdlIiwib25EYXRhQ2hhbmdlIiwiZGF0YSIsImN1cnJlbnRUaXJlIiwic3R5bGUiLCJkaXNwbGF5Iiwic2V0VGV4dCIsIlRpcmVCcmFuZE5hbWUiLCJUaXJlTW9kZWxOYW1lIiwiQXR0cmlidXRlcyIsImxlbmd0aCIsImpvaW4iLCJDb21wb25lbnRCYXNlIl0sIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFBLElBQVVBLGtCQUFWO0FBQUEsQ0FBQSxVQUFVQSxrQkFBVixFQUE0QjtBQUN4QixRQUFNQyxZQUFZLGtDQUFsQjs7QUFEd0IsUUFHeEJDLFdBSHdCO0FBQUE7O0FBQUE7QUFBQTs7QUFBQTtBQUFBOztBQUFBO0FBQUE7QUFBQSxrREFPUztBQUFBOztBQUN6QixxQkFBS0MsU0FBTCxHQUFpQkgsbUJBQUFJLFVBQUEsQ0FBV0Msc0JBQVgsQ0FBa0MsS0FBbEMsRUFBeUNKLFlBQVksOEJBQXJELENBQWpCO0FBRUFELG1DQUFBSSxVQUFBLENBQVdFLGFBQVgsQ0FBeUIsS0FBekIsRUFBZ0M7QUFDNUJMLCtCQUFXQSxZQUFZLFFBQVosR0FBdUIsb0NBRE47QUFFNUJNLDBCQUFNUCxtQkFBQVEsT0FBQSxDQUFRQyxTQUFSLENBQWtCLGNBQWxCLENBRnNCO0FBRzVCQyw4QkFBVSxLQUFLUDtBQUhhLGlCQUFoQztBQU1BLHFCQUFLUSxlQUFMLEdBQXVCWCxtQkFBQUksVUFBQSxDQUFXRSxhQUFYLENBQXlCLEtBQXpCLEVBQWdDO0FBQ25ETCwrQkFBV0EsWUFBWSxPQUQ0QjtBQUVuRFMsOEJBQVUsS0FBS1A7QUFGb0MsaUJBQWhDLENBQXZCO0FBS0EscUJBQUtTLHNCQUFMLEdBQThCWixtQkFBQUksVUFBQSxDQUFXRSxhQUFYLENBQXlCLEtBQXpCLEVBQWdDO0FBQzFETCwrQkFBV0EsWUFBWSxvREFEbUM7QUFFMURTLDhCQUFVLEtBQUtQO0FBRjJDLGlCQUFoQyxDQUE5QjtBQUtBLHFCQUFLVSxLQUFMLENBQVdDLGVBQVgsQ0FBMkI7QUFBQSwyQkFBUSxPQUFLQyxZQUFMLENBQWtCQyxJQUFsQixDQUFSO0FBQUEsaUJBQTNCO0FBQ0g7QUEzQm1CO0FBQUE7QUFBQSx5Q0E2QkNBLElBN0JELEVBNkJxQjtBQUNyQyxvQkFBTUMsY0FBY0QsS0FBS0MsV0FBekI7QUFFQSxxQkFBS2QsU0FBTCxDQUFlZSxLQUFmLENBQXFCQyxPQUFyQixHQUErQkYsY0FBYyxFQUFkLEdBQW1CLE1BQWxEO0FBRUEsb0JBQUlBLFdBQUosRUFBaUI7QUFDYmpCLHVDQUFBSSxVQUFBLENBQVdnQixPQUFYLENBQW1CLEtBQUtULGVBQXhCLEVBQXlDTSxZQUFZSSxhQUFaLEdBQTRCLEdBQTVCLEdBQWtDSixZQUFZSyxhQUF2RjtBQUNBdEIsdUNBQUFJLFVBQUEsQ0FBV2dCLE9BQVgsQ0FBbUIsS0FBS1Isc0JBQXhCLEVBQWdESyxZQUFZTSxVQUFaLElBQTBCTixZQUFZTSxVQUFaLENBQXVCQyxNQUFqRCxHQUM1Q1AsWUFBWU0sVUFBWixDQUF1QkUsSUFBdkIsQ0FBNEIsSUFBNUIsQ0FENEMsR0FDUixFQUR4QztBQUVIO0FBQ0o7QUF2Q21COztBQUFBO0FBQUEsTUFHU3pCLG1CQUFBMEIsYUFIVDs7QUFHWDFCLHVCQUFBRSxXQUFBLEdBQVdBLFdBQVg7QUFzQ2hCLENBekNELEVBQVVGLHVCQUFBQSxxQkFBa0IsRUFBbEIsQ0FBViIsImZpbGUiOiJzY3JpcHRzL2NvbXBvbmVudHMvVGlyZURldGFpbHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJuYW1lc3BhY2UgUmlkZVN0eWxlclNob3djYXNlIHtcbiAgICBjb25zdCBjbGFzc05hbWUgPSAncmlkZXN0eWxlci1zaG93Y2FzZS10aXJlLWRldGFpbHMnXG5cbiAgICBleHBvcnQgY2xhc3MgVGlyZURldGFpbHMgZXh0ZW5kcyBDb21wb25lbnRCYXNlIHtcbiAgICAgICAgcHJpdmF0ZSB0aXJlTmFtZUVsZW1lbnQ6SFRNTEVsZW1lbnQ7XG4gICAgICAgIHByaXZhdGUgdGlyZURlc2NyaXB0aW9uRWxlbWVudDpIVE1MRWxlbWVudDtcblxuICAgICAgICBwcm90ZWN0ZWQgaW5pdGlhbGl6ZUNvbXBvbmVudCgpIHtcbiAgICAgICAgICAgIHRoaXMuY29tcG9uZW50ID0gSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50V2l0aENsYXNzKCdkaXYnLCBjbGFzc05hbWUgKyBcIiByaWRlc3R5bGVyLXNob3djYXNlLWRldGFpbHNcIik7XG5cbiAgICAgICAgICAgIEhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCgnZGl2Jywge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogY2xhc3NOYW1lICsgJy10aXRsZScgKyBcIiByaWRlc3R5bGVyLXNob3djYXNlLWRldGFpbHMtdGl0bGVcIixcbiAgICAgICAgICAgICAgICB0ZXh0OiBzdHJpbmdzLmdldFN0cmluZygndGlyZS1kZXRhaWxzJyksXG4gICAgICAgICAgICAgICAgYXBwZW5kVG86IHRoaXMuY29tcG9uZW50XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdGhpcy50aXJlTmFtZUVsZW1lbnQgPSBIVE1MSGVscGVyLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IGNsYXNzTmFtZSArICctbmFtZScsXG4gICAgICAgICAgICAgICAgYXBwZW5kVG86IHRoaXMuY29tcG9uZW50XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdGhpcy50aXJlRGVzY3JpcHRpb25FbGVtZW50ID0gSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBjbGFzc05hbWUgKyAnLWRlc2NyaXB0aW9uIHJpZGVzdHlsZXItc2hvd2Nhc2UtZGV0YWlscy1zZWNvbmRhcnknLFxuICAgICAgICAgICAgICAgIGFwcGVuZFRvOiB0aGlzLmNvbXBvbmVudFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHRoaXMuc3RhdGUuYWZ0ZXJEYXRhQ2hhbmdlKGRhdGEgPT4gdGhpcy5vbkRhdGFDaGFuZ2UoZGF0YSkpO1xuICAgICAgICB9XG5cbiAgICAgICAgcHJpdmF0ZSBvbkRhdGFDaGFuZ2UoZGF0YTpzdGF0ZS5TdGF0ZURhdGEpIHtcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRUaXJlID0gZGF0YS5jdXJyZW50VGlyZTtcblxuICAgICAgICAgICAgdGhpcy5jb21wb25lbnQuc3R5bGUuZGlzcGxheSA9IGN1cnJlbnRUaXJlID8gJycgOiAnbm9uZSc7XG5cbiAgICAgICAgICAgIGlmIChjdXJyZW50VGlyZSkge1xuICAgICAgICAgICAgICAgIEhUTUxIZWxwZXIuc2V0VGV4dCh0aGlzLnRpcmVOYW1lRWxlbWVudCwgY3VycmVudFRpcmUuVGlyZUJyYW5kTmFtZSArICcgJyArIGN1cnJlbnRUaXJlLlRpcmVNb2RlbE5hbWUpO1xuICAgICAgICAgICAgICAgIEhUTUxIZWxwZXIuc2V0VGV4dCh0aGlzLnRpcmVEZXNjcmlwdGlvbkVsZW1lbnQsIGN1cnJlbnRUaXJlLkF0dHJpYnV0ZXMgJiYgY3VycmVudFRpcmUuQXR0cmlidXRlcy5sZW5ndGggP1xuICAgICAgICAgICAgICAgICAgICBjdXJyZW50VGlyZS5BdHRyaWJ1dGVzLmpvaW4oJywgJykgOiAnJylcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn0iXX0=

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var RideStylerShowcase;
(function (RideStylerShowcase) {
    var className = 'ridestyler-showcase-vehicle-details';
    var firstPaintColor = '#999';

    var VehicleDetails = function (_RideStylerShowcase$C) {
        _inherits(VehicleDetails, _RideStylerShowcase$C);

        function VehicleDetails() {
            _classCallCheck(this, VehicleDetails);

            return _possibleConstructorReturn(this, (VehicleDetails.__proto__ || Object.getPrototypeOf(VehicleDetails)).apply(this, arguments));
        }

        _createClass(VehicleDetails, [{
            key: 'initializeComponent',
            value: function initializeComponent() {
                var _this2 = this;

                this.component = RideStylerShowcase.HTMLHelper.createElementWithClass('div', className + " ridestyler-showcase-details");
                // Title
                RideStylerShowcase.HTMLHelper.createElement('div', {
                    className: className + '-title' + " ridestyler-showcase-details-title",
                    text: RideStylerShowcase.strings.getString('vehicle-details'),
                    appendTo: this.component
                });
                // Vehicle Description/Paint Swatch Container
                RideStylerShowcase.HTMLHelper.createElement('div', {
                    className: className + '-vehicle',
                    append: [
                    // Paint Swatch
                    this.vehiclePaintSwatchElement = RideStylerShowcase.HTMLHelper.createElement('div', {
                        className: className + '-vehicle-swatch ridestyler-showcase-paint-swatch',
                        style: {
                            backgroundColor: firstPaintColor
                        }
                    }),
                    // Vehicle Description
                    this.vehicleDescriptionElement = RideStylerShowcase.HTMLHelper.createElement('div', {
                        className: className + '-vehicle-details'
                    })],
                    appendTo: this.component
                });
                // Tire Size
                this.tireSizeElement = RideStylerShowcase.HTMLHelper.createElement('div', {
                    className: className + '-tire-size ridestyler-showcase-details-secondary',
                    appendTo: this.component
                });
                // Change Vehicle Button
                RideStylerShowcase.HTMLHelper.createButton({
                    className: className + '-change-vehicle',
                    appendTo: this.component,
                    text: RideStylerShowcase.strings.getString('change-vehicle'),
                    link: true
                }).addEventListener('click', function () {
                    _this2.state.changeState(RideStylerShowcase.States.ChooseVehicle);
                });
                // Listen for data changes
                this.state.afterDataChange(function (data) {
                    return _this2.onDataChange(data);
                });
                // Switch to paint when clicking on the paint swatch
                this.vehiclePaintSwatchElement.addEventListener('click', function () {
                    if (typeof _this2.paintSwatchClickCallback === 'function') _this2.paintSwatchClickCallback();
                });
            }
        }, {
            key: 'onDataChange',
            value: function onDataChange(data) {
                var vehicleDescription = data.currentVehicleDescription;
                var shortVehicleDescription = vehicleDescription.length > 40 ? vehicleDescription.substring(0, 38) + '...' : vehicleDescription;
                this.vehiclePaintSwatchElement.style.backgroundColor = data.currentPaintScheme ? data.currentPaintScheme.Colors[0].Hex : firstPaintColor;
                RideStylerShowcase.HTMLHelper.setText(this.vehicleDescriptionElement, shortVehicleDescription);
                RideStylerShowcase.HTMLHelper.setText(this.tireSizeElement, data.currentVehicleTireOptionDescription);
            }
        }]);

        return VehicleDetails;
    }(RideStylerShowcase.ComponentBase);

    RideStylerShowcase.VehicleDetails = VehicleDetails;
})(RideStylerShowcase || (RideStylerShowcase = {}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvVmVoaWNsZURldGFpbHMudHMiXSwibmFtZXMiOlsiUmlkZVN0eWxlclNob3djYXNlIiwiY2xhc3NOYW1lIiwiZmlyc3RQYWludENvbG9yIiwiVmVoaWNsZURldGFpbHMiLCJjb21wb25lbnQiLCJIVE1MSGVscGVyIiwiY3JlYXRlRWxlbWVudFdpdGhDbGFzcyIsImNyZWF0ZUVsZW1lbnQiLCJ0ZXh0Iiwic3RyaW5ncyIsImdldFN0cmluZyIsImFwcGVuZFRvIiwiYXBwZW5kIiwidmVoaWNsZVBhaW50U3dhdGNoRWxlbWVudCIsInN0eWxlIiwiYmFja2dyb3VuZENvbG9yIiwidmVoaWNsZURlc2NyaXB0aW9uRWxlbWVudCIsInRpcmVTaXplRWxlbWVudCIsImNyZWF0ZUJ1dHRvbiIsImxpbmsiLCJhZGRFdmVudExpc3RlbmVyIiwic3RhdGUiLCJjaGFuZ2VTdGF0ZSIsIlN0YXRlcyIsIkNob29zZVZlaGljbGUiLCJhZnRlckRhdGFDaGFuZ2UiLCJvbkRhdGFDaGFuZ2UiLCJkYXRhIiwicGFpbnRTd2F0Y2hDbGlja0NhbGxiYWNrIiwidmVoaWNsZURlc2NyaXB0aW9uIiwiY3VycmVudFZlaGljbGVEZXNjcmlwdGlvbiIsInNob3J0VmVoaWNsZURlc2NyaXB0aW9uIiwibGVuZ3RoIiwic3Vic3RyaW5nIiwiY3VycmVudFBhaW50U2NoZW1lIiwiQ29sb3JzIiwiSGV4Iiwic2V0VGV4dCIsImN1cnJlbnRWZWhpY2xlVGlyZU9wdGlvbkRlc2NyaXB0aW9uIiwiQ29tcG9uZW50QmFzZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQSxJQUFVQSxrQkFBVjtBQUFBLENBQUEsVUFBVUEsa0JBQVYsRUFBNEI7QUFDeEIsUUFBTUMsWUFBWSxxQ0FBbEI7QUFDQSxRQUFNQyxrQkFBa0IsTUFBeEI7O0FBRndCLFFBSXhCQyxjQUp3QjtBQUFBOztBQUFBO0FBQUE7O0FBQUE7QUFBQTs7QUFBQTtBQUFBO0FBQUEsa0RBbUJTO0FB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QkFBQUcsY0FBQSxHQUFjQSxjQUFkO0FBd0ZoQixDQTVGRCxFQUFVSCx1QkFBQUEscUJBQWtCLEVBQWxCLENBQVYiLCJmaWxlIjoic2NyaXB0cy9jb21wb25lbnRzL1ZlaGljbGVEZXRhaWxzLmpzIiwic291cmNlc0NvbnRlbnQiOlsibmFtZXNwYWNlIFJpZGVTdHlsZXJTaG93Y2FzZSB7XHJcbiAgICBjb25zdCBjbGFzc05hbWUgPSAncmlkZXN0eWxlci1zaG93Y2FzZS12ZWhpY2xlLWRldGFpbHMnXHJcbiAgICBjb25zdCBmaXJzdFBhaW50Q29sb3IgPSAnIzk5OSc7XHJcblxyXG4gICAgZXhwb3J0IGNsYXNzIFZlaGljbGVEZXRhaWxzIGV4dGVuZHMgQ29tcG9uZW50QmFzZSB7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFRoZSB2ZWhpY2xlIGRlc2NyaXB0aW9uXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHJpdmF0ZSB2ZWhpY2xlRGVzY3JpcHRpb25FbGVtZW50OkhUTUxFbGVtZW50O1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFRoZSBwYWludCBzd2F0Y2ggbmV4dCB0byB0aGUgdmVoaWNsZSBkZXNjcmlwdGlvblxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHByaXZhdGUgdmVoaWNsZVBhaW50U3dhdGNoRWxlbWVudDpIVE1MRWxlbWVudDtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBUaGUgdGlyZSBzaXplXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHJpdmF0ZSB0aXJlU2l6ZUVsZW1lbnQ6SFRNTEVsZW1lbnQ7XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBpbml0aWFsaXplQ29tcG9uZW50KCkge1xyXG4gICAgICAgICAgICB0aGlzLmNvbXBvbmVudCA9IEhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudFdpdGhDbGFzcygnZGl2JywgY2xhc3NOYW1lICsgXCIgcmlkZXN0eWxlci1zaG93Y2FzZS1kZXRhaWxzXCIpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gVGl0bGVcclxuICAgICAgICAgICAgSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XHJcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IGNsYXNzTmFtZSArICctdGl0bGUnICsgXCIgcmlkZXN0eWxlci1zaG93Y2FzZS1kZXRhaWxzLXRpdGxlXCIsXHJcbiAgICAgICAgICAgICAgICB0ZXh0OiBzdHJpbmdzLmdldFN0cmluZygndmVoaWNsZS1kZXRhaWxzJyksXHJcbiAgICAgICAgICAgICAgICBhcHBlbmRUbzogdGhpcy5jb21wb25lbnRcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAvLyBWZWhpY2xlIERlc2NyaXB0aW9uL1BhaW50IFN3YXRjaCBDb250YWluZXJcclxuICAgICAgICAgICAgSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XHJcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IGNsYXNzTmFtZSArICctdmVoaWNsZScsXHJcbiAgICAgICAgICAgICAgICBhcHBlbmQ6IFtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAvLyBQYWludCBTd2F0Y2hcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnZlaGljbGVQYWludFN3YXRjaEVsZW1lbnQgPSBIVE1MSGVscGVyLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBjbGFzc05hbWUgKyAnLXZlaGljbGUtc3dhdGNoIHJpZGVzdHlsZXItc2hvd2Nhc2UtcGFpbnQtc3dhdGNoJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogZmlyc3RQYWludENvbG9yXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KSxcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gVmVoaWNsZSBEZXNjcmlwdGlvblxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudmVoaWNsZURlc2NyaXB0aW9uRWxlbWVudCA9IEhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCgnZGl2Jywge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IGNsYXNzTmFtZSArICctdmVoaWNsZS1kZXRhaWxzJ1xyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcblxyXG4gICAgICAgICAgICAgICAgXSxcclxuICAgICAgICAgICAgICAgIGFwcGVuZFRvOiB0aGlzLmNvbXBvbmVudFxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIC8vIFRpcmUgU2l6ZVxyXG4gICAgICAgICAgICB0aGlzLnRpcmVTaXplRWxlbWVudCA9IEhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCgnZGl2Jywge1xyXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBjbGFzc05hbWUgKyAnLXRpcmUtc2l6ZSByaWRlc3R5bGVyLXNob3djYXNlLWRldGFpbHMtc2Vjb25kYXJ5JyxcclxuICAgICAgICAgICAgICAgIGFwcGVuZFRvOiB0aGlzLmNvbXBvbmVudFxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIC8vIENoYW5nZSBWZWhpY2xlIEJ1dHRvblxyXG4gICAgICAgICAgICBIVE1MSGVscGVyLmNyZWF0ZUJ1dHRvbih7XHJcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IGNsYXNzTmFtZSArICctY2hhbmdlLXZlaGljbGUnLFxyXG4gICAgICAgICAgICAgICAgYXBwZW5kVG86IHRoaXMuY29tcG9uZW50LFxyXG4gICAgICAgICAgICAgICAgdGV4dDogc3RyaW5ncy5nZXRTdHJpbmcoJ2NoYW5nZS12ZWhpY2xlJyksXHJcbiAgICAgICAgICAgICAgICBsaW5rOiB0cnVlXHJcbiAgICAgICAgICAgIH0pLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5jaGFuZ2VTdGF0ZShTdGF0ZXMuQ2hvb3NlVmVoaWNsZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgLy8gTGlzdGVuIGZvciBkYXRhIGNoYW5nZXNcclxuICAgICAgICAgICAgdGhpcy5zdGF0ZS5hZnRlckRhdGFDaGFuZ2UoZGF0YSA9PiB0aGlzLm9uRGF0YUNoYW5nZShkYXRhKSk7XHJcblxyXG4gICAgICAgICAgICAvLyBTd2l0Y2ggdG8gcGFpbnQgd2hlbiBjbGlja2luZyBvbiB0aGUgcGFpbnQgc3dhdGNoXHJcbiAgICAgICAgICAgIHRoaXMudmVoaWNsZVBhaW50U3dhdGNoRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdGhpcy5wYWludFN3YXRjaENsaWNrQ2FsbGJhY2sgPT09ICdmdW5jdGlvbicpIFxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFpbnRTd2F0Y2hDbGlja0NhbGxiYWNrKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQSBjYWxsIGJhY2sgZm9yIHdoZW4gdGhlIHBhaW50IHN3YXRjaCB3YXMgY2xpY2tlZCBvblxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBwYWludFN3YXRjaENsaWNrQ2FsbGJhY2s6KCkgPT4gdm9pZDtcclxuXHJcbiAgICAgICAgcHJpdmF0ZSBvbkRhdGFDaGFuZ2UoZGF0YTpzdGF0ZS5TdGF0ZURhdGEpIHtcclxuICAgICAgICAgICAgY29uc3QgdmVoaWNsZURlc2NyaXB0aW9uID0gZGF0YS5jdXJyZW50VmVoaWNsZURlc2NyaXB0aW9uO1xyXG4gICAgICAgICAgICBjb25zdCBzaG9ydFZlaGljbGVEZXNjcmlwdGlvbiAgPSB2ZWhpY2xlRGVzY3JpcHRpb24ubGVuZ3RoID4gNDAgPyB2ZWhpY2xlRGVzY3JpcHRpb24uc3Vic3RyaW5nKDAsIDM4KSArICcuLi4nIDogdmVoaWNsZURlc2NyaXB0aW9uO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgdGhpcy52ZWhpY2xlUGFpbnRTd2F0Y2hFbGVtZW50LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IGRhdGEuY3VycmVudFBhaW50U2NoZW1lID8gZGF0YS5jdXJyZW50UGFpbnRTY2hlbWUuQ29sb3JzWzBdLkhleCA6IGZpcnN0UGFpbnRDb2xvcjtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIEhUTUxIZWxwZXIuc2V0VGV4dCh0aGlzLnZlaGljbGVEZXNjcmlwdGlvbkVsZW1lbnQsIHNob3J0VmVoaWNsZURlc2NyaXB0aW9uKTtcclxuICAgICAgICAgICAgSFRNTEhlbHBlci5zZXRUZXh0KHRoaXMudGlyZVNpemVFbGVtZW50LCBkYXRhLmN1cnJlbnRWZWhpY2xlVGlyZU9wdGlvbkRlc2NyaXB0aW9uKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iXX0=

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var RideStylerShowcase;
(function (RideStylerShowcase) {
    var className = 'ridestyler-showcase-wheel-details';

    var WheelDetails = function (_RideStylerShowcase$C) {
        _inherits(WheelDetails, _RideStylerShowcase$C);

        function WheelDetails() {
            _classCallCheck(this, WheelDetails);

            return _possibleConstructorReturn(this, (WheelDetails.__proto__ || Object.getPrototypeOf(WheelDetails)).apply(this, arguments));
        }

        _createClass(WheelDetails, [{
            key: 'initializeComponent',
            value: function initializeComponent() {
                var _this2 = this;

                this.component = RideStylerShowcase.HTMLHelper.createElementWithClass('div', className + " ridestyler-showcase-details");
                RideStylerShowcase.HTMLHelper.createElement('div', {
                    className: className + '-title' + " ridestyler-showcase-details-title",
                    text: RideStylerShowcase.strings.getString('wheel-details'),
                    appendTo: this.component
                });
                this.wheelNameElement = RideStylerShowcase.HTMLHelper.createElement('div', {
                    className: className + '-name',
                    appendTo: this.component
                });
                this.wheelDescriptionElement = RideStylerShowcase.HTMLHelper.createElement('div', {
                    className: className + '-description ridestyler-showcase-details-secondary',
                    appendTo: this.component
                });
                RideStylerShowcase.HTMLHelper.createButton({
                    className: className + '-features-specs',
                    appendTo: this.component,
                    text: RideStylerShowcase.strings.getString('wheel-features-specs'),
                    link: true
                }).addEventListener('click', function () {
                    _this2.showWheelModal();
                });
                this.state.afterDataChange(function (data) {
                    return _this2.onDataChange(data);
                });
            }
        }, {
            key: 'showWheelModal',
            value: function showWheelModal() {
                var stateData = this.state.getData();
                new RideStylerShowcase.RideStylerShowcaseWheelModal(this.showcase, stateData.currentWheel).show();
            }
        }, {
            key: 'onDataChange',
            value: function onDataChange(data) {
                var currentWheel = data.currentWheel;
                var currentWheelFitment = data.currentWheelFitment;
                this.component.style.display = currentWheel ? '' : 'none';
                if (currentWheel) {
                    RideStylerShowcase.HTMLHelper.setText(this.wheelNameElement, currentWheel.WheelBrandName + ' ' + currentWheel.WheelModelName);
                    if (currentWheelFitment) {
                        var diameter = currentWheelFitment.DiameterMin.toString() + '″';
                        if (currentWheelFitment.DiameterMin !== currentWheelFitment.DiameterMax) diameter = '(' + currentWheelFitment.DiameterMin + '-' + currentWheelFitment.DiameterMax + ')″';
                        RideStylerShowcase.HTMLHelper.setText(this.wheelDescriptionElement, diameter + ' ' + currentWheel.WheelModelFinishDescription);
                    } else {
                        RideStylerShowcase.HTMLHelper.setText(this.wheelDescriptionElement, currentWheel.WheelModelFinishDescription);
                    }
                }
            }
        }]);

        return WheelDetails;
    }(RideStylerShowcase.ComponentBase);

    RideStylerShowcase.WheelDetails = WheelDetails;
})(RideStylerShowcase || (RideStylerShowcase = {}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvV2hlZWxEZXRhaWxzLnRzIl0sIm5hbWVzIjpbIlJpZGVTdHlsZXJTaG93Y2FzZSIsImNsYXNzTmFtZSIsIldoZWVsRGV0YWlscyIsImNvbXBvbmVudCIsIkhUTUxIZWxwZXIiLCJjcmVhdGVFbGVtZW50V2l0aENsYXNzIiwiY3JlYXRlRWxlbWVudCIsInRleHQiLCJzdHJpbmdzIiwiZ2V0U3RyaW5nIiwiYXBwZW5kVG8iLCJ3aGVlbE5hbWVFbGVtZW50Iiwid2hlZWxEZXNjcmlwdGlvbkVsZW1lbnQiLCJjcmVhdGVCdXR0b24iLCJsaW5rIiwiYWRkRXZlbnRMaXN0ZW5lciIsInNob3dXaGVlbE1vZGFsIiwic3RhdGUiLCJhZnRlckRhdGFDaGFuZ2UiLCJvbkRhdGFDaGFuZ2UiLCJkYXRhIiwic3RhdGVEYXRhIiwiZ2V0RGF0YSIsIlJpZGVTdHlsZXJTaG93Y2FzZVdoZWVsTW9kYWwiLCJzaG93Y2FzZSIsImN1cnJlbnRXaGVlbCIsInNob3ciLCJjdXJyZW50V2hlZWxGaXRtZW50Iiwic3R5bGUiLCJkaXNwbGF5Iiwic2V0VGV4dCIsIldoZWVsQnJhbmROYW1lIiwiV2hlZWxNb2RlbE5hbWUiLCJkaWFtZXRlciIsIkRpYW1ldGVyTWluIiwidG9TdHJpbmciLCJEaWFtZXRlck1heCIsIldoZWVsTW9kZWxGaW5pc2hEZXNjcmlwdGlvbiIsIkNvbXBvbmVudEJhc2UiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUEsSUFBVUEsa0JBQVY7QUFBQSxDQUFBLFVBQVVBLGtCQUFWLEVBQTRCO0FBQ3hCLFFBQU1DLFlBQVksbUNBQWxCOztBQUR3QixRQUd4QkMsWUFId0I7QUFBQTs7QUFBQTtBQUFBOztBQUFBO0FBQUE7O0FBQUE7QUFBQTtBQUFBLGtEQU9TO0FBQUE7O0FBQ3pCLHFCQUFLQyxTQUFMLEdBQWlCSCxtQkFBQUksVUFBQSxDQUFXQyxzQkFBWCxDQUFrQyxLQUFsQyxFQUF5Q0osWUFBWSw4QkFBckQsQ0FBakI7QUFFQUQsbUNBQUFJLFVBQUEsQ0FBV0UsYUFBWCxDQUF5QixLQUF6QixFQUFnQztBQUM1QkwsK0JBQVdBLFlBQVksUUFBWixHQUF1QixvQ0FETjtBQUU1Qk0sMEJBQU1QLG1CQUFBUSxPQUFBLENBQVFDLFNBQVIsQ0FBa0IsZUFBbEIsQ0FGc0I7QUFHNUJDLDhCQUFVLEtBQUtQO0FBSGEsaUJBQWhDO0FBTUEscUJBQUtRLGdCQUFMLEdBQXdCWCxtQkFBQUksVUFBQSxDQUFXRSxhQUFYLENBQXlCLEtBQXpCLEVBQWdDO0FBQ3BETCwrQkFBV0EsWUFBWSxPQUQ2QjtBQUVwRFMsOEJBQVUsS0FBS1A7QUFGcUMsaUJBQWhDLENBQXhCO0FBS0EscUJBQUtTLHVCQUFMLEdBQStCWixtQkFBQUksVUFBQSxDQUFXRSxhQUFYLENBQXlCLEtBQXpCLEVBQWdDO0FBQzNETCwrQkFBV0EsWUFBWSxvREFEb0M7QUFFM0RTLDhCQUFVLEtBQUtQO0FBRjRDLGlCQUFoQyxDQUEvQjtBQUtBSCxtQ0FBQUksVUFBQSxDQUFXUyxZQUFYLENBQXdCO0FBQ3BCWiwrQkFBV0EsWUFBWSxpQkFESDtBQUVwQlMsOEJBQVUsS0FBS1AsU0FGSztBQUdwQkksMEJBQU1QLG1CQUFBUSxPQUFBLENBQVFDLFNBQVIsQ0FBa0Isc0JBQWxCLENBSGM7QUFJcEJLLDBCQUFNO0FBSmMsaUJBQXhCLEVBS0dDLGdCQUxILENBS29CLE9BTHBCLEVBSzZCLFlBQUs7QUFDOUIsMkJBQUtDLGNBQUw7QUFDSCxpQkFQRDtBQVNBLHFCQUFLQyxLQUFMLENBQVdDLGVBQVgsQ0FBMkI7QUFBQSwyQkFBUSxPQUFLQyxZQUFMLENBQWtCQyxJQUFsQixDQUFSO0FBQUEsaUJBQTNCO0FBQ0g7QUFwQ21CO0FBQUE7QUFBQSw2Q0FzQ0k7QUFDcEIsb0JBQU1DLFlBQVksS0FBS0osS0FBTCxDQUFXSyxPQUFYLEVBQWxCO0FBRUEsb0JBQUl0QixtQkFBQXVCLDRCQUFKLENBQWlDLEtBQUtDLFFBQXRDLEVBQWdESCxVQUFVSSxZQUExRCxFQUF3RUMsSUFBeEU7QUFDSDtBQTFDbUI7QUFBQTtBQUFBLHlDQTRDR04sSUE1Q0gsRUE0Q3VCO0FBQ3ZDLG9CQUFNSyxlQUFlTCxLQUFLSyxZQUExQjtBQUNBLG9CQUFNRSxzQkFBc0JQLEtBQUtPLG1CQUFqQztBQUVBLHFCQUFLeEIsU0FBTCxDQUFleUIsS0FBZixDQUFxQkMsT0FBckIsR0FBK0JKLGVBQWUsRUFBZixHQUFvQixNQUFuRDtBQUVBLG9CQUFJQSxZQUFKLEVBQWtCO0FBQ2R6Qix1Q0FBQUksVUFBQSxDQUFXMEIsT0FBWCxDQUFtQixLQUFLbkIsZ0JBQXhCLEVBQTBDYyxhQUFhTSxjQUFiLEdBQThCLEdBQTlCLEdBQW9DTixhQUFhTyxjQUEzRjtBQUVBLHdCQUFJTCxtQkFBSixFQUF5QjtBQUNyQiw0QkFBSU0sV0FBa0JOLG9CQUFvQk8sV0FBcEIsQ0FBZ0NDLFFBQWhDLEtBQTZDLEdBQW5FO0FBRUEsNEJBQUlSLG9CQUFvQk8sV0FBcEIsS0FBb0NQLG9CQUFvQlMsV0FBNUQsRUFDSUgsV0FBVyxNQUFNTixvQkFBb0JPLFdBQTFCLEdBQXdDLEdBQXhDLEdBQThDUCxvQkFBb0JTLFdBQWxFLEdBQWdGLElBQTNGO0FBRUpwQywyQ0FBQUksVUFBQSxDQUFXMEIsT0FBWCxDQUFtQixLQUFLbEIsdUJBQXhCLEVBQWlEcUIsV0FBVyxHQUFYLEdBQWlCUixhQUFhWSwyQkFBL0U7QUFDSCxxQkFQRCxNQU9PO0FBQ0hyQywyQ0FBQUksVUFBQSxDQUFXMEIsT0FBWCxDQUFtQixLQUFLbEIsdUJBQXhCLEVBQWlEYSxhQUFhWSwyQkFBOUQ7QUFDSDtBQUNKO0FBQ0o7QUFoRW1COztBQUFBO0FBQUEsTUFHVXJDLG1CQUFBc0MsYUFIVjs7QUFHWHRDLHVCQUFBRSxZQUFBLEdBQVlBLFlBQVo7QUErRGhCLENBbEVELEVBQVVGLHVCQUFBQSxxQkFBa0IsRUFBbEIsQ0FBViIsImZpbGUiOiJzY3JpcHRzL2NvbXBvbmVudHMvV2hlZWxEZXRhaWxzLmpzIiwic291cmNlc0NvbnRlbnQiOlsibmFtZXNwYWNlIFJpZGVTdHlsZXJTaG93Y2FzZSB7XG4gICAgY29uc3QgY2xhc3NOYW1lID0gJ3JpZGVzdHlsZXItc2hvd2Nhc2Utd2hlZWwtZGV0YWlscydcblxuICAgIGV4cG9ydCBjbGFzcyBXaGVlbERldGFpbHMgZXh0ZW5kcyBDb21wb25lbnRCYXNlIHtcbiAgICAgICAgcHJpdmF0ZSB3aGVlbE5hbWVFbGVtZW50OkhUTUxFbGVtZW50O1xuICAgICAgICBwcml2YXRlIHdoZWVsRGVzY3JpcHRpb25FbGVtZW50OkhUTUxFbGVtZW50O1xuXG4gICAgICAgIHByb3RlY3RlZCBpbml0aWFsaXplQ29tcG9uZW50KCkge1xuICAgICAgICAgICAgdGhpcy5jb21wb25lbnQgPSBIVE1MSGVscGVyLmNyZWF0ZUVsZW1lbnRXaXRoQ2xhc3MoJ2RpdicsIGNsYXNzTmFtZSArIFwiIHJpZGVzdHlsZXItc2hvd2Nhc2UtZGV0YWlsc1wiKTtcblxuICAgICAgICAgICAgSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBjbGFzc05hbWUgKyAnLXRpdGxlJyArIFwiIHJpZGVzdHlsZXItc2hvd2Nhc2UtZGV0YWlscy10aXRsZVwiLFxuICAgICAgICAgICAgICAgIHRleHQ6IHN0cmluZ3MuZ2V0U3RyaW5nKCd3aGVlbC1kZXRhaWxzJyksXG4gICAgICAgICAgICAgICAgYXBwZW5kVG86IHRoaXMuY29tcG9uZW50XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdGhpcy53aGVlbE5hbWVFbGVtZW50ID0gSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBjbGFzc05hbWUgKyAnLW5hbWUnLFxuICAgICAgICAgICAgICAgIGFwcGVuZFRvOiB0aGlzLmNvbXBvbmVudFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHRoaXMud2hlZWxEZXNjcmlwdGlvbkVsZW1lbnQgPSBIVE1MSGVscGVyLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IGNsYXNzTmFtZSArICctZGVzY3JpcHRpb24gcmlkZXN0eWxlci1zaG93Y2FzZS1kZXRhaWxzLXNlY29uZGFyeScsXG4gICAgICAgICAgICAgICAgYXBwZW5kVG86IHRoaXMuY29tcG9uZW50XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgSFRNTEhlbHBlci5jcmVhdGVCdXR0b24oe1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogY2xhc3NOYW1lICsgJy1mZWF0dXJlcy1zcGVjcycsXG4gICAgICAgICAgICAgICAgYXBwZW5kVG86IHRoaXMuY29tcG9uZW50LFxuICAgICAgICAgICAgICAgIHRleHQ6IHN0cmluZ3MuZ2V0U3RyaW5nKCd3aGVlbC1mZWF0dXJlcy1zcGVjcycpLFxuICAgICAgICAgICAgICAgIGxpbms6IHRydWVcbiAgICAgICAgICAgIH0pLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuc2hvd1doZWVsTW9kYWwoKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB0aGlzLnN0YXRlLmFmdGVyRGF0YUNoYW5nZShkYXRhID0+IHRoaXMub25EYXRhQ2hhbmdlKGRhdGEpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHByb3RlY3RlZCBzaG93V2hlZWxNb2RhbCgpIHtcbiAgICAgICAgICAgIGNvbnN0IHN0YXRlRGF0YSA9IHRoaXMuc3RhdGUuZ2V0RGF0YSgpO1xuXG4gICAgICAgICAgICBuZXcgUmlkZVN0eWxlclNob3djYXNlV2hlZWxNb2RhbCh0aGlzLnNob3djYXNlLCBzdGF0ZURhdGEuY3VycmVudFdoZWVsKS5zaG93KCk7XG4gICAgICAgIH1cblxuICAgICAgICBwcm90ZWN0ZWQgb25EYXRhQ2hhbmdlKGRhdGE6c3RhdGUuU3RhdGVEYXRhKSB7XG4gICAgICAgICAgICBjb25zdCBjdXJyZW50V2hlZWwgPSBkYXRhLmN1cnJlbnRXaGVlbDtcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRXaGVlbEZpdG1lbnQgPSBkYXRhLmN1cnJlbnRXaGVlbEZpdG1lbnQ7XG5cbiAgICAgICAgICAgIHRoaXMuY29tcG9uZW50LnN0eWxlLmRpc3BsYXkgPSBjdXJyZW50V2hlZWwgPyAnJyA6ICdub25lJztcblxuICAgICAgICAgICAgaWYgKGN1cnJlbnRXaGVlbCkge1xuICAgICAgICAgICAgICAgIEhUTUxIZWxwZXIuc2V0VGV4dCh0aGlzLndoZWVsTmFtZUVsZW1lbnQsIGN1cnJlbnRXaGVlbC5XaGVlbEJyYW5kTmFtZSArICcgJyArIGN1cnJlbnRXaGVlbC5XaGVlbE1vZGVsTmFtZSk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRXaGVlbEZpdG1lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGRpYW1ldGVyOnN0cmluZyA9IGN1cnJlbnRXaGVlbEZpdG1lbnQuRGlhbWV0ZXJNaW4udG9TdHJpbmcoKSArICfigLMnO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50V2hlZWxGaXRtZW50LkRpYW1ldGVyTWluICE9PSBjdXJyZW50V2hlZWxGaXRtZW50LkRpYW1ldGVyTWF4KVxuICAgICAgICAgICAgICAgICAgICAgICAgZGlhbWV0ZXIgPSAnKCcgKyBjdXJyZW50V2hlZWxGaXRtZW50LkRpYW1ldGVyTWluICsgJy0nICsgY3VycmVudFdoZWVsRml0bWVudC5EaWFtZXRlck1heCArICcp4oCzJztcblxuICAgICAgICAgICAgICAgICAgICBIVE1MSGVscGVyLnNldFRleHQodGhpcy53aGVlbERlc2NyaXB0aW9uRWxlbWVudCwgZGlhbWV0ZXIgKyAnICcgKyBjdXJyZW50V2hlZWwuV2hlZWxNb2RlbEZpbmlzaERlc2NyaXB0aW9uKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBIVE1MSGVscGVyLnNldFRleHQodGhpcy53aGVlbERlc2NyaXB0aW9uRWxlbWVudCwgY3VycmVudFdoZWVsLldoZWVsTW9kZWxGaW5pc2hEZXNjcmlwdGlvbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufSJdfQ==

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var RideStylerShowcase;
(function (RideStylerShowcase) {
    var filterModalClass = 'ridestyler-showcase-filter-modal';
    var filterModalMenuTitleClass = filterModalClass + '-menu-title';
    var countFormatToken = '{count}';

    var RideStylerShowcaseFilterModal = function (_RideStylerShowcase$R) {
        _inherits(RideStylerShowcaseFilterModal, _RideStylerShowcase$R);

        function RideStylerShowcaseFilterModal(showcaseInstance, options) {
            _classCallCheck(this, RideStylerShowcaseFilterModal);

            var _this = _possibleConstructorReturn(this, (RideStylerShowcaseFilterModal.__proto__ || Object.getPrototypeOf(RideStylerShowcaseFilterModal)).call(this, showcaseInstance, {
                removeOnHidden: true
            }));

            _this.filterProvider = options.filterProvider;
            _this.showCountTextFormat = options.showCountTextFormat;
            _this.component.classList.add(filterModalClass);
            _this.buildShowButton();
            _this.buildFilterMenus().done(function () {
                _this.updateCount();
            });
            _this.component.appendChild(_this.showButton);
            return _this;
        }

        _createClass(RideStylerShowcaseFilterModal, [{
            key: 'buildFilterMenus',
            value: function buildFilterMenus() {
                var _this2 = this;

                var menusContainer = RideStylerShowcase.HTMLHelper.createElement({
                    className: filterModalClass + '-menus',
                    appendTo: this.component
                });
                var filterProvider = this.filterProvider;
                var menuLoadedPromises = [];
                var currentFilters = filterProvider.getFilters();
                this.menus = [];

                var _loop = function _loop(filterOption) {
                    // Don't show non-visible filter options or filter options without labels
                    if (!(filterOption.visible !== false && filterOption.label)) return 'continue';
                    var menu = new RideStylerShowcase.RideStylerShowcaseOptionMenu(filterOption.key);
                    var menuContainer = RideStylerShowcase.HTMLHelper.createElement({
                        className: filterModalClass + '-menu-container',
                        appendTo: menusContainer,
                        append: [RideStylerShowcase.HTMLHelper.createElement({
                            className: filterModalMenuTitleClass,
                            text: filterOption.label
                        }), menu.component]
                    });
                    var menuLoadedPromise = filterProvider.retrieveOptions(filterOption).done(function (options) {
                        options.unshift({
                            label: filterOption.unselectedOptionLabel || RideStylerShowcase.strings.getString('all'),
                            value: undefined
                        });
                        menu.setOptions(options);
                        if (typeof filterOption.getValueFromFilters === 'function') menu.setValue(filterOption.getValueFromFilters(currentFilters));else menu.setValue(undefined);
                    });
                    menu.onChange = function () {
                        _this2.updateCount();
                    };
                    menuLoadedPromises.push(menuLoadedPromise);
                    _this2.menus.push(menu);
                };

                var _iteratorNormalCompletion = true;
                var _didIteratorError = false;
                var _iteratorError = undefined;

                try {
                    for (var _iterator = filterProvider.filterOptions[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
                        var filterOption = _step.value;

                        var _ret = _loop(filterOption);

                        if (_ret === 'continue') continue;
                    }
                } catch (err) {
                    _didIteratorError = true;
                    _iteratorError = err;
                } finally {
                    try {
                        if (!_iteratorNormalCompletion && _iterator.return) {
                            _iterator.return();
                        }
                    } finally {
                        if (_didIteratorError) {
                            throw _iteratorError;
                        }
                    }
                }

                return RideStylerShowcase.PromiseHelper.all(menuLoadedPromises);
            }
        }, {
            key: 'buildShowButton',
            value: function buildShowButton() {
                var _this3 = this;

                this.showButton = RideStylerShowcase.HTMLHelper.createButton({
                    large: true,
                    disabled: true,
                    text: RideStylerShowcase.strings.getString('loading-ellipsis')
                });
                this.showButton.addEventListener('click', function () {
                    _this3.filterProvider.setFilters(_this3.getValues());
                    _this3.hide();
                });
            }
        }, {
            key: 'getValues',
            value: function getValues() {
                var values = [];
                var _iteratorNormalCompletion2 = true;
                var _didIteratorError2 = false;
                var _iteratorError2 = undefined;

                try {
                    for (var _iterator2 = this.menus[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {
                        var _menu = _step2.value;

                        values.push({
                            key: _menu.name,
                            value: _menu.value
                        });
                    }
                } catch (err) {
                    _didIteratorError2 = true;
                    _iteratorError2 = err;
                } finally {
                    try {
                        if (!_iteratorNormalCompletion2 && _iterator2.return) {
                            _iterator2.return();
                        }
                    } finally {
                        if (_didIteratorError2) {
                            throw _iteratorError2;
                        }
                    }
                }

                return values;
            }
        }, {
            key: 'getFilters',
            value: function getFilters() {
                return this.filterProvider.previewFilters(this.getValues());
            }
        }, {
            key: 'updateCount',
            value: function updateCount() {
                var _this4 = this;

                this.setCountText(false);
                this.filterProvider.getCount(this.getFilters()).done(function (count) {
                    _this4.setCountText(count);
                });
            }
        }, {
            key: 'setCountText',
            value: function setCountText(count) {
                if (count === false) {
                    RideStylerShowcase.HTMLHelper.setText(this.showButton, RideStylerShowcase.strings.getString('loading-ellipsis'));
                    this.showButton.disabled = true;
                } else {
                    RideStylerShowcase.HTMLHelper.setText(this.showButton, this.showCountTextFormat.replace(countFormatToken, count.toString()));
                    this.showButton.disabled = count === 0;
                }
            }
        }]);

        return RideStylerShowcaseFilterModal;
    }(RideStylerShowcase.RideStylerShowcaseModal);

    RideStylerShowcase.RideStylerShowcaseFilterModal = RideStylerShowcaseFilterModal;
})(RideStylerShowcase || (RideStylerShowcase = {}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvbW9kYWxzL1JpZGVTdHlsZXJTaG93Y2FzZUZpbHRlck1vZGFsLnRzIl0sIm5hbWVzIjpbIlJpZGVTdHlsZXJTaG93Y2FzZSIsImZpbHRlck1vZGFsQ2xhc3MiLCJmaWx0ZXJNb2RhbE1lbnVUaXRsZUNsYXNzIiwiY291bnRGb3JtYXRUb2tlbiIsIlJpZGVTdHlsZXJTaG93Y2FzZUZpbHRlck1vZGFsIiwic2hvd2Nhc2VJbnN0YW5jZSIsIm9wdGlvbnMiLCJyZW1vdmVPbkhpZGRlbiIsImZpbHRlclByb3ZpZGVyIiwic2hvd0NvdW50VGV4dEZvcm1hdCIsImNvbXBvbmVudCIsImNsYXNzTGlzdCIsImFkZCIsImJ1aWxkU2hvd0J1dHRvbiIsImJ1aWxkRmlsdGVyTWVudXMiLCJkb25lIiwidXBkYXRlQ291bnQiLCJhcHBlbmRDaGlsZCIsInNob3dCdXR0b24iLCJtZW51c0NvbnRhaW5lciIsIkhUTUxIZWxwZXIiLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NOYW1lIiwiYXBwZW5kVG8iLCJtZW51TG9hZGVkUHJvbWlzZXMiLCJjdXJyZW50RmlsdGVycyIsImdldEZpbHRlcnMiLCJtZW51cyIsImZpbHRlck9wdGlvbiIsInZpc2libGUiLCJsYWJlbCIsIm1lbnUiLCJSaWRlU3R5bGVyU2hvd2Nhc2VPcHRpb25NZW51Iiwia2V5IiwibWVudUNvbnRhaW5lciIsImFwcGVuZCIsInRleHQiLCJtZW51TG9hZGVkUHJvbWlzZSIsInJldHJpZXZlT3B0aW9ucyIsInVuc2hpZnQiLCJ1bnNlbGVjdGVkT3B0aW9uTGFiZWwiLCJzdHJpbmdzIiwiZ2V0U3RyaW5nIiwidmFsdWUiLCJ1bmRlZmluZWQiLCJzZXRPcHRpb25zIiwiZ2V0VmFsdWVGcm9tRmlsdGVycyIsInNldFZhbHVlIiwib25DaGFuZ2UiLCJwdXNoIiwiZmlsdGVyT3B0aW9ucyIsIlByb21pc2VIZWxwZXIiLCJhbGwiLCJjcmVhdGVCdXR0b24iLCJsYXJnZSIsImRpc2FibGVkIiwiYWRkRXZlbnRMaXN0ZW5lciIsInNldEZpbHRlcnMiLCJnZXRWYWx1ZXMiLCJoaWRlIiwidmFsdWVzIiwibmFtZSIsInByZXZpZXdGaWx0ZXJzIiwic2V0Q291bnRUZXh0IiwiZ2V0Q291bnQiLCJjb3VudCIsInNldFRleHQiLCJyZXBsYWNlIiwidG9TdHJpbmciLCJSaWRlU3R5bGVyU2hvd2Nhc2VNb2RhbCJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQSxJQUFVQSxrQkFBVjtBQUFBLENBQUEsVUFBVUEsa0JBQVYsRUFBNEI7QUFHeEIsUUFBTUMsbUJBQW1CLGtDQUF6QjtBQUNBLFFBQU1DLDRCQUE0QkQsbUJBQW1CLGFBQXJEO0FBRUEsUUFBTUUsbUJBQW1CLFNBQXpCOztBQU53QixRQVF4QkMsNkJBUndCO0FBQUE7O0FBZXBCLCtDQUFZQyxnQkFBWixFQUF5REMsT0FBekQsRUFBMkg7QUFBQTs7QUFBQSxzS0FDakhELGdCQURpSCxFQUMvRjtBQUNwQkUsZ0NBQWdCO0FBREksYUFEK0Y7O0FBS3ZILGtCQUFLQyxjQUFMLEdBQXNCRixRQUFRRSxjQUE5QjtBQUNBLGtCQUFLQyxtQkFBTCxHQUEyQkgsUUFBUUcsbUJBQW5DO0FBRUEsa0JBQUtDLFNBQUwsQ0FBZUMsU0FBZixDQUF5QkMsR0FBekIsQ0FBNkJYLGdCQUE3QjtBQUVBLGtCQUFLWSxlQUFMO0FBRUEsa0JBQUtDLGdCQUFMLEdBQXdCQyxJQUF4QixDQUE2QixZQUFLO0FBQzlCLHNCQUFLQyxXQUFMO0FBQ0gsYUFGRDtBQUlBLGtCQUFLTixTQUFMLENBQWVPLFdBQWYsQ0FBMkIsTUFBS0MsVUFBaEM7QUFoQnVIO0FBaUIxSDs7QUFoQ21CO0FBQUE7QUFBQSwrQ0FrQ0k7QUFBQTs7QUFDcEIsb0JBQU1DLGlCQUFpQm5CLG1CQUFBb0IsVUFBQSxDQUFXQyxhQUFYLENBQXlCO0FBQzVDQywrQkFBV3JCLG1CQUFtQixRQURjO0FBRTVDc0IsOEJBQVUsS0FBS2I7QUFGNkIsaUJBQXpCLENBQXZCO0FBS0Esb0JBQU1GLGlCQUFpQixL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QkEsNkJBQTdCO0FBb0poQixDQTVKRCxFQUFVSix1QkFBQUEscUJBQWtCLEVBQWxCLENBQVYiLCJmaWxlIjoic2NyaXB0cy9jb21wb25lbnRzL21vZGFscy9SaWRlU3R5bGVyU2hvd2Nhc2VGaWx0ZXJNb2RhbC5qcyIsInNvdXJjZXNDb250ZW50IjpbIm5hbWVzcGFjZSBSaWRlU3R5bGVyU2hvd2Nhc2Uge1xuICAgIGltcG9ydCBGaWx0ZXJQcm92aWRlciA9IGZpbHRlcnMuRmlsdGVyUHJvdmlkZXI7XG5cbiAgICBjb25zdCBmaWx0ZXJNb2RhbENsYXNzID0gJ3JpZGVzdHlsZXItc2hvd2Nhc2UtZmlsdGVyLW1vZGFsJztcbiAgICBjb25zdCBmaWx0ZXJNb2RhbE1lbnVUaXRsZUNsYXNzID0gZmlsdGVyTW9kYWxDbGFzcyArICctbWVudS10aXRsZSc7XG5cbiAgICBjb25zdCBjb3VudEZvcm1hdFRva2VuID0gJ3tjb3VudH0nO1xuXG4gICAgZXhwb3J0IGNsYXNzIFJpZGVTdHlsZXJTaG93Y2FzZUZpbHRlck1vZGFsPEZpbHRlclR5cGUgZXh0ZW5kcyBvYmplY3QsIEZpbHRlclByb3ZpZGVyVHlwZSBleHRlbmRzIEZpbHRlclByb3ZpZGVyPEZpbHRlclR5cGU+PiBleHRlbmRzIFJpZGVTdHlsZXJTaG93Y2FzZU1vZGFsIHtcbiAgICAgICAgcHJpdmF0ZSByZWFkb25seSBmaWx0ZXJQcm92aWRlcjogRmlsdGVyUHJvdmlkZXJUeXBlO1xuICAgICAgICBwcml2YXRlIG1lbnVzOiBSaWRlU3R5bGVyU2hvd2Nhc2VPcHRpb25NZW51W107XG4gICAgICAgIHByaXZhdGUgcmVhZG9ubHkgc2hvd0NvdW50VGV4dEZvcm1hdDpzdHJpbmc7XG5cbiAgICAgICAgcHJpdmF0ZSBzaG93QnV0dG9uOkhUTUxCdXR0b25FbGVtZW50O1xuXG4gICAgICAgIGNvbnN0cnVjdG9yKHNob3djYXNlSW5zdGFuY2U6UmlkZVN0eWxlclNob3djYXNlSW5zdGFuY2UsIG9wdGlvbnM6IFJpZGVTdHlsZXJTaG93Y2FzZUZpbHRlck1vZGFsLk9wdGlvbnM8RmlsdGVyUHJvdmlkZXJUeXBlPikge1xuICAgICAgICAgICAgc3VwZXIoc2hvd2Nhc2VJbnN0YW5jZSwge1xuICAgICAgICAgICAgICAgIHJlbW92ZU9uSGlkZGVuOiB0cnVlXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdGhpcy5maWx0ZXJQcm92aWRlciA9IG9wdGlvbnMuZmlsdGVyUHJvdmlkZXI7XG4gICAgICAgICAgICB0aGlzLnNob3dDb3VudFRleHRGb3JtYXQgPSBvcHRpb25zLnNob3dDb3VudFRleHRGb3JtYXQ7XG5cbiAgICAgICAgICAgIHRoaXMuY29tcG9uZW50LmNsYXNzTGlzdC5hZGQoZmlsdGVyTW9kYWxDbGFzcyk7XG5cbiAgICAgICAgICAgIHRoaXMuYnVpbGRTaG93QnV0dG9uKCk7XG5cbiAgICAgICAgICAgIHRoaXMuYnVpbGRGaWx0ZXJNZW51cygpLmRvbmUoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlQ291bnQoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGlzLmNvbXBvbmVudC5hcHBlbmRDaGlsZCh0aGlzLnNob3dCdXR0b24pO1xuICAgICAgICB9XG5cbiAgICAgICAgcHJpdmF0ZSBidWlsZEZpbHRlck1lbnVzKCk6UmlkZVN0eWxlclByb21pc2Uge1xuICAgICAgICAgICAgY29uc3QgbWVudXNDb250YWluZXIgPSBIVE1MSGVscGVyLmNyZWF0ZUVsZW1lbnQoe1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogZmlsdGVyTW9kYWxDbGFzcyArICctbWVudXMnLFxuICAgICAgICAgICAgICAgIGFwcGVuZFRvOiB0aGlzLmNvbXBvbmVudFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGNvbnN0IGZpbHRlclByb3ZpZGVyID0gdGhpcy5maWx0ZXJQcm92aWRlcjtcbiAgICAgICAgICAgIGNvbnN0IG1lbnVMb2FkZWRQcm9taXNlcyA9IFtdO1xuXG4gICAgICAgICAgICBjb25zdCBjdXJyZW50RmlsdGVycyA9IGZpbHRlclByb3ZpZGVyLmdldEZpbHRlcnMoKTtcblxuICAgICAgICAgICAgdGhpcy5tZW51cyA9IFtdO1xuXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGZpbHRlck9wdGlvbiBvZiBmaWx0ZXJQcm92aWRlci5maWx0ZXJPcHRpb25zKSB7XG4gICAgICAgICAgICAgICAgLy8gRG9uJ3Qgc2hvdyBub24tdmlzaWJsZSBmaWx0ZXIgb3B0aW9ucyBvciBmaWx0ZXIgb3B0aW9ucyB3aXRob3V0IGxhYmVsc1xuICAgICAgICAgICAgICAgIGlmICghKGZpbHRlck9wdGlvbi52aXNpYmxlICE9PSBmYWxzZSAmJiBmaWx0ZXJPcHRpb24ubGFiZWwpKSBjb250aW51ZTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBsZXQgbWVudTpSaWRlU3R5bGVyU2hvd2Nhc2VPcHRpb25NZW51ID0gbmV3IFJpZGVTdHlsZXJTaG93Y2FzZU9wdGlvbk1lbnUoZmlsdGVyT3B0aW9uLmtleSk7XG5cbiAgICAgICAgICAgICAgICBjb25zdCBtZW51Q29udGFpbmVyID0gSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KHtcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBmaWx0ZXJNb2RhbENsYXNzICsgJy1tZW51LWNvbnRhaW5lcicsXG4gICAgICAgICAgICAgICAgICAgIGFwcGVuZFRvOiBtZW51c0NvbnRhaW5lcixcbiAgICAgICAgICAgICAgICAgICAgYXBwZW5kOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICBIVE1MSGVscGVyLmNyZWF0ZUVsZW1lbnQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogZmlsdGVyTW9kYWxNZW51VGl0bGVDbGFzcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiBmaWx0ZXJPcHRpb24ubGFiZWxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVudS5jb21wb25lbnRcbiAgICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgbGV0IG1lbnVMb2FkZWRQcm9taXNlID0gZmlsdGVyUHJvdmlkZXIucmV0cmlldmVPcHRpb25zKGZpbHRlck9wdGlvbilcbiAgICAgICAgICAgICAgICAgICAgLmRvbmUob3B0aW9ucyA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLnVuc2hpZnQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiBmaWx0ZXJPcHRpb24udW5zZWxlY3RlZE9wdGlvbkxhYmVsIHx8IHN0cmluZ3MuZ2V0U3RyaW5nKCdhbGwnKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgbWVudS5zZXRPcHRpb25zKG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGZpbHRlck9wdGlvbi5nZXRWYWx1ZUZyb21GaWx0ZXJzID09PSAnZnVuY3Rpb24nKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lbnUuc2V0VmFsdWUoZmlsdGVyT3B0aW9uLmdldFZhbHVlRnJvbUZpbHRlcnMoY3VycmVudEZpbHRlcnMpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVudS5zZXRWYWx1ZSh1bmRlZmluZWQpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIG1lbnUub25DaGFuZ2UgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlQ291bnQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgbWVudUxvYWRlZFByb21pc2VzLnB1c2gobWVudUxvYWRlZFByb21pc2UpO1xuICAgICAgICAgICAgICAgIHRoaXMubWVudXMucHVzaChtZW51KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIFByb21pc2VIZWxwZXIuYWxsKG1lbnVMb2FkZWRQcm9taXNlcyk7XG4gICAgICAgIH1cblxuICAgICAgICBwcml2YXRlIGJ1aWxkU2hvd0J1dHRvbigpOnZvaWQge1xuICAgICAgICAgICAgdGhpcy5zaG93QnV0dG9uID0gSFRNTEhlbHBlci5jcmVhdGVCdXR0b24oe1xuICAgICAgICAgICAgICAgIGxhcmdlOiB0cnVlLFxuICAgICAgICAgICAgICAgIGRpc2FibGVkOiB0cnVlLFxuICAgICAgICAgICAgICAgIHRleHQ6IHN0cmluZ3MuZ2V0U3RyaW5nKCdsb2FkaW5nLWVsbGlwc2lzJylcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB0aGlzLnNob3dCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5maWx0ZXJQcm92aWRlci5zZXRGaWx0ZXJzKHRoaXMuZ2V0VmFsdWVzKCkpO1xuICAgICAgICAgICAgICAgIHRoaXMuaGlkZSgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBwcml2YXRlIGdldFZhbHVlcygpOmZpbHRlcnMuRmlsdGVyVmFsdWVbXSB7XG4gICAgICAgICAgICBsZXQgdmFsdWVzOiBmaWx0ZXJzLkZpbHRlclZhbHVlW10gPSBbXTtcblxuICAgICAgICAgICAgZm9yIChjb25zdCBtZW51IG9mIHRoaXMubWVudXMpIHtcbiAgICAgICAgICAgICAgICB2YWx1ZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIGtleTogbWVudS5uYW1lLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogbWVudS52YWx1ZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gdmFsdWVzO1xuICAgICAgICB9XG5cbiAgICAgICAgcHJpdmF0ZSBnZXRGaWx0ZXJzKCk6RmlsdGVyVHlwZSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5maWx0ZXJQcm92aWRlci5wcmV2aWV3RmlsdGVycyh0aGlzLmdldFZhbHVlcygpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHByaXZhdGUgdXBkYXRlQ291bnQoKSB7XG4gICAgICAgICAgICB0aGlzLnNldENvdW50VGV4dChmYWxzZSk7XG5cbiAgICAgICAgICAgIHRoaXMuZmlsdGVyUHJvdmlkZXIuZ2V0Q291bnQodGhpcy5nZXRGaWx0ZXJzKCkpLmRvbmUoY291bnQgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0Q291bnRUZXh0KGNvdW50KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNldCB0aGUgY291bnQgdGV4dCB0byBhIGxvYWRpbmcgc3RhdGVcbiAgICAgICAgICogQHBhcmFtIGNvdW50IFxuICAgICAgICAgKi9cbiAgICAgICAgcHJpdmF0ZSBzZXRDb3VudFRleHQoY291bnQ6ZmFsc2UpO1xuICAgICAgICAvKipcbiAgICAgICAgICogU2V0cyB0aGUgY291bnQgdGV4dFxuICAgICAgICAgKiBAcGFyYW0gY291bnQgVGhlIGNvdW50IHRvIHNldFxuICAgICAgICAgKi9cbiAgICAgICAgcHJpdmF0ZSBzZXRDb3VudFRleHQoY291bnQ6bnVtYmVyKTtcbiAgICAgICAgcHJpdmF0ZSBzZXRDb3VudFRleHQoY291bnQ6bnVtYmVyfGZhbHNlKSB7XG4gICAgICAgICAgICBpZiAoY291bnQgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgSFRNTEhlbHBlci5zZXRUZXh0KHRoaXMuc2hvd0J1dHRvbiwgc3RyaW5ncy5nZXRTdHJpbmcoJ2xvYWRpbmctZWxsaXBzaXMnKSk7XG4gICAgICAgICAgICAgICAgdGhpcy5zaG93QnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgSFRNTEhlbHBlci5zZXRUZXh0KHRoaXMuc2hvd0J1dHRvbiwgdGhpcy5zaG93Q291bnRUZXh0Rm9ybWF0LnJlcGxhY2UoY291bnRGb3JtYXRUb2tlbiwgY291bnQudG9TdHJpbmcoKSkpO1xuICAgICAgICAgICAgICAgIHRoaXMuc2hvd0J1dHRvbi5kaXNhYmxlZCA9IGNvdW50ID09PSAwO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgZXhwb3J0IG5hbWVzcGFjZSBSaWRlU3R5bGVyU2hvd2Nhc2VGaWx0ZXJNb2RhbCB7XG4gICAgICAgIGV4cG9ydCBpbnRlcmZhY2UgT3B0aW9uczxGaWx0ZXJQcm92aWRlclR5cGU+IHtcbiAgICAgICAgICAgIGZpbHRlclByb3ZpZGVyOiBGaWx0ZXJQcm92aWRlclR5cGU7XG4gICAgICAgICAgICBzaG93Q291bnRUZXh0Rm9ybWF0OiBzdHJpbmc7XG4gICAgICAgIH1cbiAgICB9XG59Il19

var RideStylerShowcase;
(function (RideStylerShowcase) {
    var ArrayHelper;
    (function (ArrayHelper) {
        function copy(array) {
            var copy = new Array(array.length);
            for (var index = 0; index < array.length; index++) {
                copy[index] = array[index];
            }return copy;
        }
        ArrayHelper.copy = copy;
        function remove(array, itemMatch) {
            var newArray = new Array(array.length);
            var newArrayIndex = -1;
            for (var arrayIndex = 0; arrayIndex < array.length; arrayIndex++) {
                var item = array[arrayIndex];
                if (typeof itemMatch === 'function' && itemMatch(item) || item === itemMatch) {
                    // Skip items that match the itemMatch function or value
                    continue;
                }
                newArray[++newArrayIndex] = item;
            }
            // Shorten array to exclude length from removed items
            newArray.length = newArrayIndex + 1;
            return newArray;
        }
        ArrayHelper.remove = remove;
        function filter(array, itemMatch) {
            return remove(array, function (item) {
                return !itemMatch(item);
            });
        }
        ArrayHelper.filter = filter;
        function map(array, mapFunction, thisArg) {
            if (typeof Array.prototype.map === 'function') return array.map(mapFunction, thisArg);
            var result = new Array(array.length);
            for (var i = 0; i < array.length; i++) {
                var element = array[i];
                if (typeof thisArg === 'undefined') result[i] = mapFunction(array[i], i, array);else result[i] = mapFunction.call(thisArg, array[i], i, array);
            }
            return result;
        }
        ArrayHelper.map = map;
        function reduce(array, reducer, initialValue) {
            if (typeof Array.prototype.reduce === 'function') return array.reduce(reducer, initialValue);
            var accumulator = initialValue;
            for (var i = 0; i < array.length; i++) {
                accumulator = accumulator !== undefined ? reducer.call(undefined, accumulator, array[i], i, array) : array[i];
            }return accumulator;
        }
        ArrayHelper.reduce = reduce;
    })(ArrayHelper = RideStylerShowcase.ArrayHelper || (RideStylerShowcase.ArrayHelper = {}));
})(RideStylerShowcase || (RideStylerShowcase = {}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9zY3JpcHRzL2hlbHBlcnMvQXJyYXlIZWxwZXIudHMiXSwibmFtZXMiOlsiUmlkZVN0eWxlclNob3djYXNlIiwiQXJyYXlIZWxwZXIiLCJjb3B5IiwiYXJyYXkiLCJBcnJheSIsImxlbmd0aCIsImluZGV4IiwicmVtb3ZlIiwiaXRlbU1hdGNoIiwibmV3QXJyYXkiLCJuZXdBcnJheUluZGV4IiwiYXJyYXlJbmRleCIsIml0ZW0iLCJmaWx0ZXIiLCJtYXAiLCJtYXBGdW5jdGlvbiIsInRoaXNBcmciLCJwcm90b3R5cGUiLCJyZXN1bHQiLCJpIiwiZWxlbWVudCIsImNhbGwiLCJyZWR1Y2UiLCJyZWR1Y2VyIiwiaW5pdGlhbFZhbHVlIiwiYWNjdW11bGF0b3IiLCJ1bmRlZmluZWQiXSwibWFwcGluZ3MiOiJBQUFBLElBQVVBLGtCQUFWO0FBQUEsQ0FBQSxVQUFVQSxrQkFBVixFQUE0QjtBQUFDLFFBQUFDLFdBQUE7QUFBQSxLQUFBLFVBQUFBLFdBQUEsRUFBVztBQUNwQyxpQkFBQUMsSUFBQSxDQUFtREMsS0FBbkQsRUFBa0U7QUFDOUQsZ0JBQUlELE9BQU8sSUFBSUUsS0FBSixDQUFVRCxNQUFNRSxNQUFoQixDQUFYO0FBRUEsaUJBQUssSUFBSUMsUUFBUSxDQUFqQixFQUFvQkEsUUFBUUgsTUFBTUUsTUFBbEMsRUFBMENDLE9BQTFDO0FBQ0lKLHFCQUFLSSxLQUFMLElBQWNILE1BQU1HLEtBQU4sQ0FBZDtBQURKLGFBR0EsT0FBT0osSUFBUDtBQUNIO0FBUGVELG9CQUFBQyxJQUFBLEdBQUlBLElBQUo7QUFXaEIsaUJBQUFLLE1BQUEsQ0FBMEJKLEtBQTFCLEVBQXFDSyxTQUFyQyxFQUErRDtBQUMzRCxnQkFBSUMsV0FBZSxJQUFJTCxLQUFKLENBQVVELE1BQU1FLE1BQWhCLENBQW5CO0FBRUEsZ0JBQUlLLGdCQUFnQixDQUFDLENBQXJCO0FBRUEsaUJBQUssSUFBSUMsYUFBYSxDQUF0QixFQUF5QkEsYUFBYVIsTUFBTUUsTUFBNUMsRUFBb0RNLFlBQXBELEVBQWtFO0FBQzlELG9CQUFJQyxPQUFTVCxNQUFNUSxVQUFOLENBQWI7QUFFQSxvQkFBSSxPQUFPSCxTQUFQLEtBQXFCLFVBQXJCLElBQW1DQSxVQUFVSSxJQUFWLENBQW5DLElBQXNEQSxTQUFTSixTQUFuRSxFQUE4RTtBQUMxRTtBQUNBO0FBQ0g7QUFFREMseUJBQVMsRUFBRUMsYUFBWCxJQUE0QkUsSUFBNUI7QUFDSDtBQUVEO0FBQ0FILHFCQUFTSixNQUFULEdBQWtCSyxnQkFBZ0IsQ0FBbEM7QUFFQSxtQkFBT0QsUUFBUDtBQUNIO0FBcEJlUixvQkFBQU0sTUFBQSxHQUFNQSxNQUFOO0FBc0JoQixpQkFBQU0sTUFBQSxDQUEwQlYsS0FBMUIsRUFBcUNLLFNBQXJDLEVBQTJEO0FBQ3ZELG1CQUFPRCxPQUFPSixLQUFQLEVBQWM7QUFBQSx1QkFBUSxDQUFDSyxVQUFVSSxJQUFWLENBQVQ7QUFBQSxhQUFkLENBQVA7QUFDSDtBQUZlWCxvQkFBQVksTUFBQSxHQUFNQSxNQUFOO0FBSWhCLGlCQUFBQyxHQUFBLENBQTBCWCxLQUExQixFQUFxQ1ksV0FBckMsRUFBOEZDLE9BQTlGLEVBQTJHO0FBQ3ZHLGdCQUFJLE9BQU9aLE1BQU1hLFNBQU4sQ0FBZ0JILEdBQXZCLEtBQStCLFVBQW5DLEVBQStDLE9BQU9YLE1BQU1XLEdBQU4sQ0FBVUMsV0FBVixFQUF1QkMsT0FBdkIsQ0FBUDtBQUUvQyxnQkFBSUUsU0FBYSxJQUFJZCxLQUFKLENBQVVELE1BQU1FLE1BQWhCLENBQWpCO0FBRUEsaUJBQUssSUFBSWMsSUFBSSxDQUFiLEVBQWdCQSxJQUFJaEIsTUFBTUUsTUFBMUIsRUFBa0NjLEdBQWxDLEVBQXVDO0FBQ25DLG9CQUFJQyxVQUFVakIsTUFBTWdCLENBQU4sQ0FBZDtBQUVBLG9CQUFJLE9BQU9ILE9BQVAsS0FBbUIsV0FBdkIsRUFBb0NFLE9BQU9DLENBQVAsSUFBWUosWUFBWVosTUFBTWdCLENBQU4sQ0FBWixFQUFzQkEsQ0FBdEIsRUFBeUJoQixLQUF6QixDQUFaLENBQXBDLEtBQ0tlLE9BQU9DLENBQVAsSUFBWUosWUFBWU0sSUFBWixDQUFpQkwsT0FBakIsRUFBMEJiLE1BQU1nQixDQUFOLENBQTFCLEVBQW9DQSxDQUFwQyxFQUF1Q2hCLEtBQXZDLENBQVo7QUFDUjtBQUVELG1CQUFPZSxNQUFQO0FBQ0g7QUFiZWpCLG9CQUFBYSxHQUFBLEdBQUdBLEdBQUg7QUFpQmhCLGlCQUFBUSxNQUFBLENBQTBCbkIsS0FBMUIsRUFBcUNvQixPQUFyQyxFQUEwSEMsWUFBMUgsRUFBeUk7QUFDckksZ0JBQUksT0FBT3BCLE1BQU1hLFNBQU4sQ0FBZ0JLLE1BQXZCLEtBQWtDLFVBQXRDLEVBQWtELE9BQU9uQixNQUFNbUIsTUFBTixDQUFhQyxPQUFiLEVBQXNCQyxZQUF0QixDQUFQO0FBRWxELGdCQUFJQyxjQUFnQkQsWUFBcEI7QUFFQSxpQkFBSyxJQUFJTCxJQUFJLENBQWIsRUFBZ0JBLElBQUloQixNQUFNRSxNQUExQixFQUFrQ2MsR0FBbEM7QUFDSU0sOEJBQWNBLGdCQUFnQkMsU0FBaEIsR0FDVkgsUUFBUUYsSUFBUixDQUFhSyxTQUFiLEVBQXdCRCxXQUF4QixFQUFxQ3RCLE1BQU1nQixDQUFOLENBQXJDLEVBQStDQSxDQUEvQyxFQUFrRGhCLEtBQWxELENBRFUsR0FFVkEsTUFBTWdCLENBQU4sQ0FGSjtBQURKLGFBS0EsT0FBT00sV0FBUDtBQUNIO0FBWGV4QixvQkFBQXFCLE1BQUEsR0FBTUEsTUFBTjtBQVluQixLQW5FNEIsRUFBQXJCLGNBQUFELG1CQUFBQyxXQUFBLEtBQUFELG1CQUFBQyxXQUFBLEdBQVcsRUFBWCxDQUFBO0FBbUU1QixDQW5FRCxFQUFVRCx1QkFBQUEscUJBQWtCLEVBQWxCLENBQVYiLCJmaWxlIjoic2NyaXB0cy9oZWxwZXJzL0FycmF5SGVscGVyLmpzIiwic291cmNlc0NvbnRlbnQiOlsibmFtZXNwYWNlIFJpZGVTdHlsZXJTaG93Y2FzZS5BcnJheUhlbHBlciB7XG4gICAgZXhwb3J0IGZ1bmN0aW9uIGNvcHk8QXJyYXlUeXBlIGV4dGVuZHMgQXJyYXk8YW55Pj4oYXJyYXk6QXJyYXlUeXBlKTpBcnJheVR5cGUge1xuICAgICAgICBsZXQgY29weSA9IG5ldyBBcnJheShhcnJheS5sZW5ndGgpIGFzIEFycmF5VHlwZTtcblxuICAgICAgICBmb3IgKHZhciBpbmRleCA9IDA7IGluZGV4IDwgYXJyYXkubGVuZ3RoOyBpbmRleCsrKVxuICAgICAgICAgICAgY29weVtpbmRleF0gPSBhcnJheVtpbmRleF07XG5cbiAgICAgICAgcmV0dXJuIGNvcHk7XG4gICAgfVxuXG4gICAgZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZTxUPihhcnJheTpUW10sIGl0ZW1NYXRjaDpUKTogVFtdO1xuICAgIGV4cG9ydCBmdW5jdGlvbiByZW1vdmU8VD4oYXJyYXk6VFtdLCBpdGVtTWF0Y2g6KFQpPT5ib29sZWFuKTogVFtdO1xuICAgIGV4cG9ydCBmdW5jdGlvbiByZW1vdmU8VD4oYXJyYXk6VFtdLCBpdGVtTWF0Y2g6VHwoKFQpPT5ib29sZWFuKSk6IFRbXSB7XG4gICAgICAgIGxldCBuZXdBcnJheTpUW10gPSBuZXcgQXJyYXkoYXJyYXkubGVuZ3RoKTtcblxuICAgICAgICBsZXQgbmV3QXJyYXlJbmRleCA9IC0xO1xuXG4gICAgICAgIGZvciAobGV0IGFycmF5SW5kZXggPSAwOyBhcnJheUluZGV4IDwgYXJyYXkubGVuZ3RoOyBhcnJheUluZGV4KyspIHtcbiAgICAgICAgICAgIGxldCBpdGVtOlQgPSBhcnJheVthcnJheUluZGV4XTtcblxuICAgICAgICAgICAgaWYgKHR5cGVvZiBpdGVtTWF0Y2ggPT09ICdmdW5jdGlvbicgJiYgaXRlbU1hdGNoKGl0ZW0pIHx8IGl0ZW0gPT09IGl0ZW1NYXRjaCkge1xuICAgICAgICAgICAgICAgIC8vIFNraXAgaXRlbXMgdGhhdCBtYXRjaCB0aGUgaXRlbU1hdGNoIGZ1bmN0aW9uIG9yIHZhbHVlXG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIG5ld0FycmF5WysrbmV3QXJyYXlJbmRleF0gPSBpdGVtO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gU2hvcnRlbiBhcnJheSB0byBleGNsdWRlIGxlbmd0aCBmcm9tIHJlbW92ZWQgaXRlbXNcbiAgICAgICAgbmV3QXJyYXkubGVuZ3RoID0gbmV3QXJyYXlJbmRleCArIDE7XG5cbiAgICAgICAgcmV0dXJuIG5ld0FycmF5O1xuICAgIH1cblxuICAgIGV4cG9ydCBmdW5jdGlvbiBmaWx0ZXI8VD4oYXJyYXk6VFtdLCBpdGVtTWF0Y2g6KFQpPT5ib29sZWFuKTogVFtdIHtcbiAgICAgICAgcmV0dXJuIHJlbW92ZShhcnJheSwgaXRlbSA9PiAhaXRlbU1hdGNoKGl0ZW0pKTtcbiAgICB9XG5cbiAgICBleHBvcnQgZnVuY3Rpb24gbWFwPFQsIFU+KGFycmF5OlRbXSwgbWFwRnVuY3Rpb246ICh2YWx1ZTogVCwgaW5kZXg6IG51bWJlciwgYXJyYXk6IFRbXSkgPT4gVSwgdGhpc0FyZz86IGFueSk6IFVbXSB7XG4gICAgICAgIGlmICh0eXBlb2YgQXJyYXkucHJvdG90eXBlLm1hcCA9PT0gJ2Z1bmN0aW9uJykgcmV0dXJuIGFycmF5Lm1hcChtYXBGdW5jdGlvbiwgdGhpc0FyZyk7XG5cbiAgICAgICAgbGV0IHJlc3VsdDpVW10gPSBuZXcgQXJyYXkoYXJyYXkubGVuZ3RoKTtcblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFycmF5Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBsZXQgZWxlbWVudCA9IGFycmF5W2ldO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAodHlwZW9mIHRoaXNBcmcgPT09ICd1bmRlZmluZWQnKSByZXN1bHRbaV0gPSBtYXBGdW5jdGlvbihhcnJheVtpXSwgaSwgYXJyYXkpO1xuICAgICAgICAgICAgZWxzZSByZXN1bHRbaV0gPSBtYXBGdW5jdGlvbi5jYWxsKHRoaXNBcmcsIGFycmF5W2ldLCBpLCBhcnJheSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIGV4cG9ydCBmdW5jdGlvbiByZWR1Y2U8VD4oYXJyYXk6VFtdLCByZWR1Y2VyOiAocHJldmlvdXNWYWx1ZTogVCwgY3VycmVudFZhbHVlOiBULCBjdXJyZW50SW5kZXg6IG51bWJlciwgYXJyYXk6IFRbXSkgPT4gVCwgaW5pdGlhbFZhbHVlPzogVCk6IFQ7XG4gICAgZXhwb3J0IGZ1bmN0aW9uIHJlZHVjZTxULCBVID0gVD4oYXJyYXk6VFtdLCByZWR1Y2VyOiAocHJldmlvdXNWYWx1ZTogVSwgY3VycmVudFZhbHVlOiBULCBjdXJyZW50SW5kZXg6IG51bWJlciwgYXJyYXk6IFRbXSkgPT4gVSwgaW5pdGlhbFZhbHVlOiBVKTogVTtcbiAgICBleHBvcnQgZnVuY3Rpb24gcmVkdWNlPFQ+KGFycmF5OlRbXSwgcmVkdWNlcjogKHByZXZpb3VzVmFsdWU6IFQsIGN1cnJlbnRWYWx1ZTogVCwgY3VycmVudEluZGV4OiBudW1iZXIsIGFycmF5OiBUW10pID0+IFQsIGluaXRpYWxWYWx1ZTogVCk6IFQge1xuICAgICAgICBpZiAodHlwZW9mIEFycmF5LnByb3RvdHlwZS5yZWR1Y2UgPT09ICdmdW5jdGlvbicpIHJldHVybiBhcnJheS5yZWR1Y2UocmVkdWNlciwgaW5pdGlhbFZhbHVlKTtcblxuICAgICAgICBsZXQgYWNjdW11bGF0b3I6VCA9IGluaXRpYWxWYWx1ZTtcblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFycmF5Lmxlbmd0aDsgaSsrKVxuICAgICAgICAgICAgYWNjdW11bGF0b3IgPSBhY2N1bXVsYXRvciAhPT0gdW5kZWZpbmVkID9cbiAgICAgICAgICAgICAgICByZWR1Y2VyLmNhbGwodW5kZWZpbmVkLCBhY2N1bXVsYXRvciwgYXJyYXlbaV0sIGksIGFycmF5KSA6XG4gICAgICAgICAgICAgICAgYXJyYXlbaV07XG5cbiAgICAgICAgcmV0dXJuIGFjY3VtdWxhdG9yO1xuICAgIH1cbn0iXX0=

var RideStylerShowcase;
(function (RideStylerShowcase) {
    var BoxHelper;
    (function (BoxHelper) {
        /**
         * Bound a box to a minimum and/or maximum bounding box
         * @param box The box to bound
         * @param boundsMin The minimum bounding box
         * @param boundsMax The maximum bounding box
         */
        function bound(box, boundsMin, boundsMax) {
            if (typeof boundsMin === 'number') boundsMin = {
                width: boundsMin,
                height: boundsMin
            };
            if (typeof boundsMax === 'number') boundsMax = {
                width: boundsMax,
                height: boundsMax
            };
            // Get the scale change to scale box down to maximum bounds
            var scaleToMax = boundsMax ? Math.min(boundsMax.width / box.width, boundsMax.height / box.height) : 1;
            // Get the scale change to scale box up to minimum bounds
            var scaleToMin = boundsMin ? Math.max(boundsMin.width / box.width, boundsMin.height / box.height) : 1;
            var scalar = void 0;
            if (scaleToMax < 1) scalar = scaleToMax;else if (scaleToMin > 1) scalar = scaleToMin;else return box;
            return scale(box, scalar);
        }
        BoxHelper.bound = bound;
        /**
         * Scale a box by a scalar
         * @param box The box
         * @param scalar The number to scale the box by
         */
        function scale(box, scalar) {
            if (typeof scalar === 'number') scalar = {
                width: scalar,
                height: scalar
            };
            return {
                width: box.width * scalar.width,
                height: box.height * scalar.height
            };
        }
        BoxHelper.scale = scale;
        /**
         * Returns the box, without decimals
         * @param box The box
         */
        function floor(box) {
            return {
                width: ~~box.width,
                height: ~~box.height
            };
        }
        BoxHelper.floor = floor;
    })(BoxHelper = RideStylerShowcase.BoxHelper || (RideStylerShowcase.BoxHelper = {}));
})(RideStylerShowcase || (RideStylerShowcase = {}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9zY3JpcHRzL2hlbHBlcnMvQm94SGVscGVyLnRzIl0sIm5hbWVzIjpbIlJpZGVTdHlsZXJTaG93Y2FzZSIsIkJveEhlbHBlciIsImJvdW5kIiwiYm94IiwiYm91bmRzTWluIiwiYm91bmRzTWF4Iiwid2lkdGgiLCJoZWlnaHQiLCJzY2FsZVRvTWF4IiwiTWF0aCIsIm1pbiIsInNjYWxlVG9NaW4iLCJtYXgiLCJzY2FsYXIiLCJzY2FsZSIsImZsb29yIl0sIm1hcHBpbmdzIjoiQUFBQSxJQUFVQSxrQkFBVjtBQUFBLENBQUEsVUFBVUEsa0JBQVYsRUFBNEI7QUFBQyxRQUFBQyxTQUFBO0FBQUEsS0FBQSxVQUFBQSxTQUFBLEVBQVM7QUFDbEM7Ozs7OztBQU1BLGlCQUFBQyxLQUFBLENBQXNCQyxHQUF0QixFQUErQkMsU0FBL0IsRUFBc0RDLFNBQXRELEVBQTJFO0FBQ3ZFLGdCQUFJLE9BQU9ELFNBQVAsS0FBcUIsUUFBekIsRUFBbUNBLFlBQVk7QUFDM0NFLHVCQUFPRixTQURvQztBQUUzQ0csd0JBQVFIO0FBRm1DLGFBQVo7QUFLbkMsZ0JBQUksT0FBT0MsU0FBUCxLQUFxQixRQUF6QixFQUFtQ0EsWUFBWTtBQUMzQ0MsdUJBQU9ELFNBRG9DO0FBRTNDRSx3QkFBUUY7QUFGbUMsYUFBWjtBQUtuQztBQUNBLGdCQUFJRyxhQUFvQkgsWUFBWUksS0FBS0MsR0FBTCxDQUFTTCxVQUFVQyxLQUFWLEdBQWdCSCxJQUFJRyxLQUE3QixFQUFvQ0QsVUFBVUUsTUFBVixHQUFpQkosSUFBSUksTUFBekQsQ0FBWixHQUErRSxDQUF2RztBQUNBO0FBQ0EsZ0JBQUlJLGFBQW9CUCxZQUFZSyxLQUFLRyxHQUFMLENBQVNSLFVBQVVFLEtBQVYsR0FBZ0JILElBQUlHLEtBQTdCLEVBQW9DRixVQUFVRyxNQUFWLEdBQWlCSixJQUFJSSxNQUF6RCxDQUFaLEdBQStFLENBQXZHO0FBRUEsZ0JBQUlNLGVBQUo7QUFFQSxnQkFBSUwsYUFBYSxDQUFqQixFQUFvQkssU0FBU0wsVUFBVCxDQUFwQixLQUNLLElBQUlHLGFBQWEsQ0FBakIsRUFBb0JFLFNBQVNGLFVBQVQsQ0FBcEIsS0FDQSxPQUFPUixHQUFQO0FBRUwsbUJBQU9XLE1BQU1YLEdBQU4sRUFBV1UsTUFBWCxDQUFQO0FBQ0g7QUF2QmVaLGtCQUFBQyxLQUFBLEdBQUtBLEtBQUw7QUF5QmhCOzs7OztBQUtBLGlCQUFBWSxLQUFBLENBQXNCWCxHQUF0QixFQUErQlUsTUFBL0IsRUFBZ0Q7QUFDNUMsZ0JBQUksT0FBT0EsTUFBUCxLQUFrQixRQUF0QixFQUFnQ0EsU0FBUztBQUNyQ1AsdUJBQU9PLE1BRDhCO0FBRXJDTix3QkFBUU07QUFGNkIsYUFBVDtBQUtoQyxtQkFBTztBQUNIUCx1QkFBT0gsSUFBSUcsS0FBSixHQUFZTyxPQUFPUCxLQUR2QjtBQUVIQyx3QkFBUUosSUFBSUksTUFBSixHQUFhTSxPQUFPTjtBQUZ6QixhQUFQO0FBSUg7QUFWZU4sa0JBQUFhLEtBQUEsR0FBS0EsS0FBTDtBQVloQjs7OztBQUlBLGlCQUFBQyxLQUFBLENBQXNCWixHQUF0QixFQUE2QjtBQUN6QixtQkFBTztBQUNIRyx1QkFBTyxDQUFDLENBQUNILElBQUlHLEtBRFY7QUFFSEMsd0JBQVEsQ0FBQyxDQUFDSixJQUFJSTtBQUZYLGFBQVA7QUFJSDtBQUxlTixrQkFBQWMsS0FBQSxHQUFLQSxLQUFMO0FBV25CLEtBaEU0QixFQUFBZCxZQUFBRCxtQkFBQUMsU0FBQSxLQUFBRCxtQkFBQUMsU0FBQSxHQUFTLEVBQVQsQ0FBQTtBQWdFNUIsQ0FoRUQsRUFBVUQsdUJBQUFBLHFCQUFrQixFQUFsQixDQUFWIiwiZmlsZSI6InNjcmlwdHMvaGVscGVycy9Cb3hIZWxwZXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyJuYW1lc3BhY2UgUmlkZVN0eWxlclNob3djYXNlLkJveEhlbHBlciB7XG4gICAgLyoqXG4gICAgICogQm91bmQgYSBib3ggdG8gYSBtaW5pbXVtIGFuZC9vciBtYXhpbXVtIGJvdW5kaW5nIGJveFxuICAgICAqIEBwYXJhbSBib3ggVGhlIGJveCB0byBib3VuZFxuICAgICAqIEBwYXJhbSBib3VuZHNNaW4gVGhlIG1pbmltdW0gYm91bmRpbmcgYm94XG4gICAgICogQHBhcmFtIGJvdW5kc01heCBUaGUgbWF4aW11bSBib3VuZGluZyBib3hcbiAgICAgKi9cbiAgICBleHBvcnQgZnVuY3Rpb24gYm91bmQoYm94OkJveCwgYm91bmRzTWluPzpCb3h8bnVtYmVyLCBib3VuZHNNYXg/OkJveHxudW1iZXIpOkJveCB7XG4gICAgICAgIGlmICh0eXBlb2YgYm91bmRzTWluID09PSAnbnVtYmVyJykgYm91bmRzTWluID0ge1xuICAgICAgICAgICAgd2lkdGg6IGJvdW5kc01pbixcbiAgICAgICAgICAgIGhlaWdodDogYm91bmRzTWluXG4gICAgICAgIH07XG5cbiAgICAgICAgaWYgKHR5cGVvZiBib3VuZHNNYXggPT09ICdudW1iZXInKSBib3VuZHNNYXggPSB7XG4gICAgICAgICAgICB3aWR0aDogYm91bmRzTWF4LFxuICAgICAgICAgICAgaGVpZ2h0OiBib3VuZHNNYXhcbiAgICAgICAgfTtcblxuICAgICAgICAvLyBHZXQgdGhlIHNjYWxlIGNoYW5nZSB0byBzY2FsZSBib3ggZG93biB0byBtYXhpbXVtIGJvdW5kc1xuICAgICAgICBsZXQgc2NhbGVUb01heDpudW1iZXIgPSBib3VuZHNNYXggPyBNYXRoLm1pbihib3VuZHNNYXgud2lkdGgvYm94LndpZHRoLCBib3VuZHNNYXguaGVpZ2h0L2JveC5oZWlnaHQpIDogMTtcbiAgICAgICAgLy8gR2V0IHRoZSBzY2FsZSBjaGFuZ2UgdG8gc2NhbGUgYm94IHVwIHRvIG1pbmltdW0gYm91bmRzXG4gICAgICAgIGxldCBzY2FsZVRvTWluOm51bWJlciA9IGJvdW5kc01pbiA/IE1hdGgubWF4KGJvdW5kc01pbi53aWR0aC9ib3gud2lkdGgsIGJvdW5kc01pbi5oZWlnaHQvYm94LmhlaWdodCkgOiAxO1xuXG4gICAgICAgIGxldCBzY2FsYXI6bnVtYmVyO1xuXG4gICAgICAgIGlmIChzY2FsZVRvTWF4IDwgMSkgc2NhbGFyID0gc2NhbGVUb01heDtcbiAgICAgICAgZWxzZSBpZiAoc2NhbGVUb01pbiA+IDEpIHNjYWxhciA9IHNjYWxlVG9NaW47XG4gICAgICAgIGVsc2UgcmV0dXJuIGJveDtcblxuICAgICAgICByZXR1cm4gc2NhbGUoYm94LCBzY2FsYXIpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNjYWxlIGEgYm94IGJ5IGEgc2NhbGFyXG4gICAgICogQHBhcmFtIGJveCBUaGUgYm94XG4gICAgICogQHBhcmFtIHNjYWxhciBUaGUgbnVtYmVyIHRvIHNjYWxlIHRoZSBib3ggYnlcbiAgICAgKi9cbiAgICBleHBvcnQgZnVuY3Rpb24gc2NhbGUoYm94OkJveCwgc2NhbGFyOm51bWJlcnxCb3gpOkJveCB7XG4gICAgICAgIGlmICh0eXBlb2Ygc2NhbGFyID09PSAnbnVtYmVyJykgc2NhbGFyID0ge1xuICAgICAgICAgICAgd2lkdGg6IHNjYWxhcixcbiAgICAgICAgICAgIGhlaWdodDogc2NhbGFyXG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHdpZHRoOiBib3gud2lkdGggKiBzY2FsYXIud2lkdGgsXG4gICAgICAgICAgICBoZWlnaHQ6IGJveC5oZWlnaHQgKiBzY2FsYXIuaGVpZ2h0XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgYm94LCB3aXRob3V0IGRlY2ltYWxzXG4gICAgICogQHBhcmFtIGJveCBUaGUgYm94XG4gICAgICovXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGZsb29yKGJveDpCb3gpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHdpZHRoOiB+fmJveC53aWR0aCxcbiAgICAgICAgICAgIGhlaWdodDogfn5ib3guaGVpZ2h0XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBleHBvcnQgaW50ZXJmYWNlIEJveCB7XG4gICAgICAgIHdpZHRoOiBudW1iZXI7XG4gICAgICAgIGhlaWdodDogbnVtYmVyO1xuICAgIH1cbn0iXX0=

var RideStylerShowcase;
(function (RideStylerShowcase) {
    var GUIDHelper = void 0;
    (function (GUIDHelper) {
        // Maps for number <-> hex string conversion
        var byteToHex = [];
        var hexToByte = {};
        for (var i = 0; i < 256; i++) {
            byteToHex[i] = (i + 0x100).toString(16).substr(1);
            hexToByte[byteToHex[i]] = i;
        }
        /**
         * Parse a Guid into a common format
         * @param id The ID to parse
         * @param buffer An existing Guid/array to write to
         * @param offset The offset to begin writing at
         */
        function parse(id, buffer, offset) {
            var i = buffer && offset || 0;
            var j = 0;
            buffer = buffer || [];
            id.toLowerCase().replace(/[0-9a-f]{2}/g, function (oct) {
                if (j < 16) buffer[i + j++] = hexToByte[oct];
                return '';
            });
            // Zero out remaining bytes if string was short
            while (j < 16) {
                buffer[i + j++] = 0;
            }return buffer;
        }
        GUIDHelper.parse = parse;
        /**
         * Convert a parsed Guid back into a string
         * @param id A parsed Guid to unparse
         * @param offset Starting index in the id to begin reading from
         */
        function unparse(id, offset) {
            var i = offset || 0;
            var bth = byteToHex;
            return bth[id[i++]] + bth[id[i++]] + bth[id[i++]] + bth[id[i++]] + '-' + bth[id[i++]] + bth[id[i++]] + '-' + bth[id[i++]] + bth[id[i++]] + '-' + bth[id[i++]] + bth[id[i++]] + '-' + bth[id[i++]] + bth[id[i++]] + bth[id[i++]] + bth[id[i++]] + bth[id[i++]] + bth[id[i++]];
        }
        GUIDHelper.unparse = unparse;
        /**
         * Compare two Guids to determine if they are equal
         * @param idA The first ID to parse (if needed) and then compare
         * @param idB The second ID to parse (if needed) and then compare
         */
        function areEqual(idA, idB) {
            // Handle undefined/unspecified parameters
            {
                if (!idA) {
                    if (!idB) return true;
                    return false;
                }
                if (!idB) return false;
            }
            var guidA = void 0;
            var guidB = void 0;
            if (typeof idA === 'string') guidA = parse(idA);else guidA = idA;
            if (typeof idB === 'string') guidB = parse(idB);else guidB = idB;
            for (var _i = 0; _i < guidA.length; _i++) {
                var byteA = guidA[_i];
                var byteB = guidB[_i];
                if (byteA !== byteB) return false;
            }
            return true;
        }
        GUIDHelper.areEqual = areEqual;
    })(GUIDHelper = RideStylerShowcase.GUIDHelper || (RideStylerShowcase.GUIDHelper = {}));
})(RideStylerShowcase || (RideStylerShowcase = {}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9zY3JpcHRzL2hlbHBlcnMvR1VJREhlbHBlci50cyJdLCJuYW1lcyI6WyJSaWRlU3R5bGVyU2hvd2Nhc2UiLCJHVUlESGVscGVyIiwiYnl0ZVRvSGV4IiwiaGV4VG9CeXRlIiwiaSIsInRvU3RyaW5nIiwic3Vic3RyIiwicGFyc2UiLCJpZCIsImJ1ZmZlciIsIm9mZnNldCIsImoiLCJ0b0xvd2VyQ2FzZSIsInJlcGxhY2UiLCJvY3QiLCJ1bnBhcnNlIiwiYnRoIiwiYXJlRXF1YWwiLCJpZEEiLCJpZEIiLCJndWlkQSIsImd1aWRCIiwibGVuZ3RoIiwiYnl0ZUEiLCJieXRlQiJdLCJtYXBwaW5ncyI6IkFBQUEsSUFBVUEsa0JBQVY7QUFBQSxDQUFBLFVBQVVBLGtCQUFWLEVBQTRCO0FBRXhCLFFBQWlCQyxtQkFBakI7QUFBQSxLQUFBLFVBQWlCQSxVQUFqQixFQUEyQjtBQUN2QjtBQUNBLFlBQUlDLFlBQXFCLEVBQXpCO0FBQ0EsWUFBSUMsWUFBa0MsRUFBdEM7QUFFQSxhQUFLLElBQUlDLElBQUksQ0FBYixFQUFnQkEsSUFBSSxHQUFwQixFQUF5QkEsR0FBekIsRUFBOEI7QUFDMUJGLHNCQUFVRSxDQUFWLElBQWUsQ0FBQ0EsSUFBSSxLQUFMLEVBQVlDLFFBQVosQ0FBcUIsRUFBckIsRUFBeUJDLE1BQXpCLENBQWdDLENBQWhDLENBQWY7QUFDQUgsc0JBQVVELFVBQVVFLENBQVYsQ0FBVixJQUEwQkEsQ0FBMUI7QUFDSDtBQUVEOzs7Ozs7QUFNQSxpQkFBQUcsS0FBQSxDQUFzQkMsRUFBdEIsRUFBaUNDLE1BQWpDLEVBQStDQyxNQUEvQyxFQUE2RDtBQUN6RCxnQkFBTU4sSUFBS0ssVUFBVUMsTUFBWCxJQUFzQixDQUFoQztBQUNBLGdCQUFJQyxJQUFJLENBQVI7QUFFQUYscUJBQVNBLFVBQVUsRUFBbkI7QUFFQUQsZUFBR0ksV0FBSCxHQUFpQkMsT0FBakIsQ0FBeUIsY0FBekIsRUFBeUMsVUFBU0MsR0FBVCxFQUFZO0FBQ2pELG9CQUFJSCxJQUFJLEVBQVIsRUFDSUYsT0FBT0wsSUFBSU8sR0FBWCxJQUFrQlIsVUFBVVcsR0FBVixDQUFsQjtBQUVKLHVCQUFPLEVBQVA7QUFDSCxhQUxEO0FBT0E7QUFDQSxtQkFBT0gsSUFBSSxFQUFYO0FBQWVGLHVCQUFPTCxJQUFJTyxHQUFYLElBQWtCLENBQWxCO0FBQWYsYUFFQSxPQUFPRixNQUFQO0FBQ0g7QUFqQmVSLG1CQUFBTSxLQUFBLEdBQUtBLEtBQUw7QUFtQmhCOzs7OztBQUtBLGlCQUFBUSxPQUFBLENBQXdCUCxFQUF4QixFQUFpQ0UsTUFBakMsRUFBK0M7QUFDM0MsZ0JBQUlOLElBQUlNLFVBQVUsQ0FBbEI7QUFDQSxnQkFBTU0sTUFBTWQsU0FBWjtBQUVBLG1CQUFRYyxJQUFJUixHQUFHSixHQUFILENBQUosSUFBZVksSUFBSVIsR0FBR0osR0FBSCxDQUFKLENBQWYsR0FDQVksSUFBSVIsR0FBR0osR0FBSCxDQUFKLENBREEsR0FDZVksSUFBSVIsR0FBR0osR0FBSCxDQUFKLENBRGYsR0FDOEIsR0FEOUIsR0FFQVksSUFBSVIsR0FBR0osR0FBSCxDQUFKLENBRkEsR0FFZVksSUFBSVIsR0FBR0osR0FBSCxDQUFKLENBRmYsR0FFOEIsR0FGOUIsR0FHQVksSUFBSVIsR0FBR0osR0FBSCxDQUFKLENBSEEsR0FHZVksSUFBSVIsR0FBR0osR0FBSCxDQUFKLENBSGYsR0FHOEIsR0FIOUIsR0FJQVksSUFBSVIsR0FBR0osR0FBSCxDQUFKLENBSkEsR0FJZVksSUFBSVIsR0FBR0osR0FBSCxDQUFKLENBSmYsR0FJOEIsR0FKOUIsR0FLQVksSUFBSVIsR0FBR0osR0FBSCxDQUFKLENBTEEsR0FLZVksSUFBSVIsR0FBR0osR0FBSCxDQUFKLENBTGYsR0FNQVksSUFBSVIsR0FBR0osR0FBSCxDQUFKLENBTkEsR0FNZVksSUFBSVIsR0FBR0osR0FBSCxDQUFKLENBTmYsR0FPQVksSUFBSVIsR0FBR0osR0FBSCxDQUFKLENBUEEsR0FPZVksSUFBSVIsR0FBR0osR0FBSCxDQUFKLENBUHZCO0FBUUg7QUFaZUgsbUJBQUFjLE9BQUEsR0FBT0EsT0FBUDtBQWNoQjs7Ozs7QUFLQSxpQkFBQUUsUUFBQSxDQUF5QkMsR0FBekIsRUFBMENDLEdBQTFDLEVBQXlEO0FBQ3JEO0FBQ0E7QUFDSSxvQkFBSSxDQUFDRCxHQUFMLEVBQVU7QUFDTix3QkFBSSxDQUFDQyxHQUFMLEVBQVUsT0FBTyxJQUFQO0FBQ1YsMkJBQU8sS0FBUDtBQUNIO0FBQ0Qsb0JBQUksQ0FBQ0EsR0FBTCxFQUFVLE9BQU8sS0FBUDtBQUNiO0FBRUQsZ0JBQUlDLGNBQUo7QUFDQSxnQkFBSUMsY0FBSjtBQUVBLGdCQUFJLE9BQU9ILEdBQVAsS0FBZSxRQUFuQixFQUE2QkUsUUFBUWIsTUFBTVcsR0FBTixDQUFSLENBQTdCLEtBQ0tFLFFBQVFGLEdBQVI7QUFFTCxnQkFBSSxPQUFPQyxHQUFQLEtBQWUsUUFBbkIsRUFBNkJFLFFBQVFkLE1BQU1ZLEdBQU4sQ0FBUixDQUE3QixLQUNLRSxRQUFRRixHQUFSO0FBRUwsaUJBQUssSUFBSWYsS0FBSSxDQUFiLEVBQWdCQSxLQUFJZ0IsTUFBTUUsTUFBMUIsRUFBa0NsQixJQUFsQyxFQUF1QztBQUNuQyxvQkFBSW1CLFFBQWVILE1BQU1oQixFQUFOLENBQW5CO0FBQ0Esb0JBQUlvQixRQUFlSCxNQUFNakIsRUFBTixDQUFuQjtBQUVBLG9CQUFJbUIsVUFBVUMsS0FBZCxFQUFxQixPQUFPLEtBQVA7QUFDeEI7QUFFRCxtQkFBTyxJQUFQO0FBQ0g7QUEzQmV2QixtQkFBQWdCLFFBQUEsR0FBUUEsUUFBUjtBQTRCbkIsS0F2RkQsRUFBaUJoQixhQUFBRCxtQkFBQUMsVUFBQSxLQUFBRCxtQkFBQUMsVUFBQSxHQUFVLEVBQVYsQ0FBakI7QUF3RkgsQ0ExRkQsRUFBVUQsdUJBQUFBLHFCQUFrQixFQUFsQixDQUFWIiwiZmlsZSI6InNjcmlwdHMvaGVscGVycy9HVUlESGVscGVyLmpzIiwic291cmNlc0NvbnRlbnQiOlsibmFtZXNwYWNlIFJpZGVTdHlsZXJTaG93Y2FzZXtcbiAgICBleHBvcnQgdHlwZSBHdWlkID0gbnVtYmVyW107XG4gICAgZXhwb3J0IG5hbWVzcGFjZSBHVUlESGVscGVyIHtcbiAgICAgICAgLy8gTWFwcyBmb3IgbnVtYmVyIDwtPiBoZXggc3RyaW5nIGNvbnZlcnNpb25cbiAgICAgICAgbGV0IGJ5dGVUb0hleDpzdHJpbmdbXSA9IFtdO1xuICAgICAgICBsZXQgaGV4VG9CeXRlOntbaGV4OnN0cmluZ106bnVtYmVyfSA9IHt9O1xuICAgICAgICBcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAyNTY7IGkrKykge1xuICAgICAgICAgICAgYnl0ZVRvSGV4W2ldID0gKGkgKyAweDEwMCkudG9TdHJpbmcoMTYpLnN1YnN0cigxKTtcbiAgICAgICAgICAgIGhleFRvQnl0ZVtieXRlVG9IZXhbaV1dID0gaTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBQYXJzZSBhIEd1aWQgaW50byBhIGNvbW1vbiBmb3JtYXRcbiAgICAgICAgICogQHBhcmFtIGlkIFRoZSBJRCB0byBwYXJzZVxuICAgICAgICAgKiBAcGFyYW0gYnVmZmVyIEFuIGV4aXN0aW5nIEd1aWQvYXJyYXkgdG8gd3JpdGUgdG9cbiAgICAgICAgICogQHBhcmFtIG9mZnNldCBUaGUgb2Zmc2V0IHRvIGJlZ2luIHdyaXRpbmcgYXRcbiAgICAgICAgICovXG4gICAgICAgIGV4cG9ydCBmdW5jdGlvbiBwYXJzZShpZDpzdHJpbmcsIGJ1ZmZlcj86R3VpZCwgb2Zmc2V0PzpudW1iZXIpOkd1aWQge1xuICAgICAgICAgICAgY29uc3QgaSA9IChidWZmZXIgJiYgb2Zmc2V0KSB8fCAwO1xuICAgICAgICAgICAgbGV0IGogPSAwO1xuICAgICAgICAgIFxuICAgICAgICAgICAgYnVmZmVyID0gYnVmZmVyIHx8IFtdO1xuXG4gICAgICAgICAgICBpZC50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoL1swLTlhLWZdezJ9L2csIGZ1bmN0aW9uKG9jdCkge1xuICAgICAgICAgICAgICAgIGlmIChqIDwgMTYpIC8vIERvbid0IG92ZXJmbG93IVxuICAgICAgICAgICAgICAgICAgICBidWZmZXJbaSArIGorK10gPSBoZXhUb0J5dGVbb2N0XTtcblxuICAgICAgICAgICAgICAgIHJldHVybiAnJztcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIFxuICAgICAgICAgICAgLy8gWmVybyBvdXQgcmVtYWluaW5nIGJ5dGVzIGlmIHN0cmluZyB3YXMgc2hvcnRcbiAgICAgICAgICAgIHdoaWxlIChqIDwgMTYpIGJ1ZmZlcltpICsgaisrXSA9IDA7XG4gICAgICAgICAgXG4gICAgICAgICAgICByZXR1cm4gYnVmZmVyO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENvbnZlcnQgYSBwYXJzZWQgR3VpZCBiYWNrIGludG8gYSBzdHJpbmdcbiAgICAgICAgICogQHBhcmFtIGlkIEEgcGFyc2VkIEd1aWQgdG8gdW5wYXJzZVxuICAgICAgICAgKiBAcGFyYW0gb2Zmc2V0IFN0YXJ0aW5nIGluZGV4IGluIHRoZSBpZCB0byBiZWdpbiByZWFkaW5nIGZyb21cbiAgICAgICAgICovXG4gICAgICAgIGV4cG9ydCBmdW5jdGlvbiB1bnBhcnNlKGlkOkd1aWQsIG9mZnNldD86bnVtYmVyKTpzdHJpbmcge1xuICAgICAgICAgICAgbGV0IGkgPSBvZmZzZXQgfHwgMDtcbiAgICAgICAgICAgIGNvbnN0IGJ0aCA9IGJ5dGVUb0hleDtcblxuICAgICAgICAgICAgcmV0dXJuICBidGhbaWRbaSsrXV0gKyBidGhbaWRbaSsrXV0gK1xuICAgICAgICAgICAgICAgICAgICBidGhbaWRbaSsrXV0gKyBidGhbaWRbaSsrXV0gKyAnLScgK1xuICAgICAgICAgICAgICAgICAgICBidGhbaWRbaSsrXV0gKyBidGhbaWRbaSsrXV0gKyAnLScgK1xuICAgICAgICAgICAgICAgICAgICBidGhbaWRbaSsrXV0gKyBidGhbaWRbaSsrXV0gKyAnLScgK1xuICAgICAgICAgICAgICAgICAgICBidGhbaWRbaSsrXV0gKyBidGhbaWRbaSsrXV0gKyAnLScgK1xuICAgICAgICAgICAgICAgICAgICBidGhbaWRbaSsrXV0gKyBidGhbaWRbaSsrXV0gK1xuICAgICAgICAgICAgICAgICAgICBidGhbaWRbaSsrXV0gKyBidGhbaWRbaSsrXV0gK1xuICAgICAgICAgICAgICAgICAgICBidGhbaWRbaSsrXV0gKyBidGhbaWRbaSsrXV07XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogQ29tcGFyZSB0d28gR3VpZHMgdG8gZGV0ZXJtaW5lIGlmIHRoZXkgYXJlIGVxdWFsXG4gICAgICAgICAqIEBwYXJhbSBpZEEgVGhlIGZpcnN0IElEIHRvIHBhcnNlIChpZiBuZWVkZWQpIGFuZCB0aGVuIGNvbXBhcmVcbiAgICAgICAgICogQHBhcmFtIGlkQiBUaGUgc2Vjb25kIElEIHRvIHBhcnNlIChpZiBuZWVkZWQpIGFuZCB0aGVuIGNvbXBhcmVcbiAgICAgICAgICovXG4gICAgICAgIGV4cG9ydCBmdW5jdGlvbiBhcmVFcXVhbChpZEE6c3RyaW5nfEd1aWQsIGlkQjpzdHJpbmd8R3VpZCk6Ym9vbGVhbiB7XG4gICAgICAgICAgICAvLyBIYW5kbGUgdW5kZWZpbmVkL3Vuc3BlY2lmaWVkIHBhcmFtZXRlcnNcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBpZiAoIWlkQSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWlkQikgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCFpZEIpIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbGV0IGd1aWRBOkd1aWQ7XG4gICAgICAgICAgICBsZXQgZ3VpZEI6R3VpZDtcblxuICAgICAgICAgICAgaWYgKHR5cGVvZiBpZEEgPT09ICdzdHJpbmcnKSBndWlkQSA9IHBhcnNlKGlkQSk7XG4gICAgICAgICAgICBlbHNlIGd1aWRBID0gaWRBO1xuXG4gICAgICAgICAgICBpZiAodHlwZW9mIGlkQiA9PT0gJ3N0cmluZycpIGd1aWRCID0gcGFyc2UoaWRCKTtcbiAgICAgICAgICAgIGVsc2UgZ3VpZEIgPSBpZEI7XG5cbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZ3VpZEEubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBsZXQgYnl0ZUE6bnVtYmVyID0gZ3VpZEFbaV07XG4gICAgICAgICAgICAgICAgbGV0IGJ5dGVCOm51bWJlciA9IGd1aWRCW2ldXG5cbiAgICAgICAgICAgICAgICBpZiAoYnl0ZUEgIT09IGJ5dGVCKSByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgfVxufSJdfQ==

var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

var RideStylerShowcase;
(function (RideStylerShowcase) {
    var HTMLHelper;
    (function (HTMLHelper) {
        /**
         * Returns a new set of elements matched from the original set
         * @param elements The elements to match
         * @param match The matching function
         */
        function elementsMatching(elements, match) {
            var matchingElements = new Array(elements.length);
            var matchingElementsIndex = 0;
            for (var index = 0; index < elements.length; index++) {
                var child = elements[index];
                if (match(child)) {
                    matchingElements[matchingElementsIndex++] = child;
                }
            }
            matchingElements.length = matchingElementsIndex;
            return matchingElements;
        }
        HTMLHelper.elementsMatching = elementsMatching;
        /**
         * Returns the first element in the set to match the function
         * @param elements The set of elements to search in
         * @param match The matching function
         */
        function firstElementMatching(elements, match) {
            for (var index = 0; index < elements.length; index++) {
                var child = elements[index];
                if (match(child)) return child;
            }
            return null;
        }
        HTMLHelper.firstElementMatching = firstElementMatching;
        /**
         * Returns the last element in the set to match the function
         * @param elements The set of elements to search in
         * @param match The matching function
         */
        function lastElementMatching(elements, match) {
            for (var index = elements.length - 1; index >= 0; index--) {
                var child = elements[index];
                if (match(child)) return child;
            }
            return null;
        }
        HTMLHelper.lastElementMatching = lastElementMatching;
        function childrenMatching(element, match) {
            return elementsMatching(element.children, match);
        }
        HTMLHelper.childrenMatching = childrenMatching;
        /**
         * Search an element for the first child matching the match function
         * @param element The element to search children of
         * @param match The match function
         */
        function firstChildMatching(element, match) {
            return firstElementMatching(element.children, match);
        }
        HTMLHelper.firstChildMatching = firstChildMatching;
        /**
         * Returns an array of element's children matching the passed in set of
         * @param element The element to search the children of
         * @param classes The set of classes to match children with
         */
        function childrenWithClasses(element) {
            for (var _len = arguments.length, classes = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
                classes[_key - 1] = arguments[_key];
            }

            classes = RideStylerShowcase.StyleHelper.flattenClassList(classes);
            return childrenMatching(element, function (child) {
                return RideStylerShowcase.StyleHelper.hasClasses(child, classes);
            });
        }
        HTMLHelper.childrenWithClasses = childrenWithClasses;
        /**
         * Removes children from the element matching a class or set of classes
         * @param element The element to search the children
         * @param classes The classes to match children to remove
         */
        function removeChildrenWithClasses(element) {
            for (var _len2 = arguments.length, classes = Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {
                classes[_key2 - 1] = arguments[_key2];
            }

            var _iteratorNormalCompletion = true;
            var _didIteratorError = false;
            var _iteratorError = undefined;

            try {
                for (var _iterator = childrenWithClasses.apply(undefined, [element].concat(classes))[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
                    var child = _step.value;

                    element.removeChild(child);
                }
            } catch (err) {
                _didIteratorError = true;
                _iteratorError = err;
            } finally {
                try {
                    if (!_iteratorNormalCompletion && _iterator.return) {
                        _iterator.return();
                    }
                } finally {
                    if (_didIteratorError) {
                        throw _iteratorError;
                    }
                }
            }
        }
        HTMLHelper.removeChildrenWithClasses = removeChildrenWithClasses;
        /**
         * Search an element for the first child with the specified tag
         * @param element The element to search children of
         * @param tagName The tag to look for
         */
        function firstChildWithTag(element, tagName) {
            tagName = tagName.toUpperCase();
            return firstChildMatching(element, function (child) {
                return child.tagName === tagName;
            });
        }
        HTMLHelper.firstChildWithTag = firstChildWithTag;
        /**
         * Search an element for the first child with the specified class(es) in its class list
         * @param element The element to search children of
         * @param classes The classes to look for
         */
        function firstChildWithClass(element) {
            for (var _len3 = arguments.length, classes = Array(_len3 > 1 ? _len3 - 1 : 0), _key3 = 1; _key3 < _len3; _key3++) {
                classes[_key3 - 1] = arguments[_key3];
            }

            return firstChildMatching(element, function (child) {
                return RideStylerShowcase.StyleHelper.hasClasses(child, classes);
            });
        }
        HTMLHelper.firstChildWithClass = firstChildWithClass;
        /**
         * Detects if an element has a child with the specified class(es)
         * @param element The element to search the children of
         * @param classes The class(es) to look for
         */
        function hasChildWithClass(element) {
            for (var _len4 = arguments.length, classes = Array(_len4 > 1 ? _len4 - 1 : 0), _key4 = 1; _key4 < _len4; _key4++) {
                classes[_key4 - 1] = arguments[_key4];
            }

            return !!firstChildWithClass.apply(undefined, [element].concat(classes));
        }
        HTMLHelper.hasChildWithClass = hasChildWithClass;
        /**
         * Detects if an element has a sibling with the specified class(es)
         * @param element The element to search the siblings of
         * @param classes The class(es) to look for
         */
        function hasSiblingWithClass(element) {
            for (var _len5 = arguments.length, classes = Array(_len5 > 1 ? _len5 - 1 : 0), _key5 = 1; _key5 < _len5; _key5++) {
                classes[_key5 - 1] = arguments[_key5];
            }

            return hasChildWithClass.apply(undefined, [element.parentElement].concat(classes));
        }
        HTMLHelper.hasSiblingWithClass = hasSiblingWithClass;
        /**
         * Returns the last sibling of an element matching a specified class (or specified classes)
         * @param element The element to search siblings
         * @param classes The classes to look for
         */
        function lastSiblingWithClass(element) {
            for (var _len6 = arguments.length, classes = Array(_len6 > 1 ? _len6 - 1 : 0), _key6 = 1; _key6 < _len6; _key6++) {
                classes[_key6 - 1] = arguments[_key6];
            }

            return lastElementMatching(element.parentElement.children, function (sibling) {
                return sibling !== element && RideStylerShowcase.StyleHelper.hasClasses(sibling, classes);
            });
        }
        HTMLHelper.lastSiblingWithClass = lastSiblingWithClass;
        function applyOptions(element, options) {
            var htmlElement = element;
            if ((typeof options === 'undefined' ? 'undefined' : _typeof(options)) !== 'object') return;
            if (typeof options.className === 'string') element.className = options.className;
            if (typeof options.id === 'string') element.id = options.id;
            if (options.wrap) options.wrap.appendChild(element);
            if (options.appendTo) options.appendTo.appendChild(options.wrap || element);
            if (typeof options.text === 'string') element.appendChild(document.createTextNode(options.text));
            if (options.append) {
                if (options.append instanceof Array) {
                    var _iteratorNormalCompletion2 = true;
                    var _didIteratorError2 = false;
                    var _iteratorError2 = undefined;

                    try {
                        for (var _iterator2 = options.append[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {
                            var childElement = _step2.value;

                            element.appendChild(childElement);
                        }
                    } catch (err) {
                        _didIteratorError2 = true;
                        _iteratorError2 = err;
                    } finally {
                        try {
                            if (!_iteratorNormalCompletion2 && _iterator2.return) {
                                _iterator2.return();
                            }
                        } finally {
                            if (_didIteratorError2) {
                                throw _iteratorError2;
                            }
                        }
                    }
                } else {
                    element.appendChild(options.append);
                }
                document.createElementNS;
            }
            if (options.attributes) {
                for (var key in options.attributes) {
                    if (options.attributes.hasOwnProperty(key)) {
                        element.setAttribute(key, options.attributes[key]);
                    }
                }
            }
            if (options.style && _typeof(htmlElement.style) === 'object') {
                for (var _key7 in options.style) {
                    if (options.style.hasOwnProperty(_key7)) {
                        htmlElement.style[_key7] = options.style[_key7];
                    }
                }
            }
            if (options.properties) {
                for (var _key8 in options.properties) {
                    if (options.properties.hasOwnProperty(_key8)) {
                        element[_key8] = options.properties[_key8];
                    }
                }
            }
        }
        function createElement(tagNameOrDivOptions, options) {
            var tagName = void 0;
            if (typeof tagNameOrDivOptions === 'string') tagName = tagNameOrDivOptions;else {
                tagName = 'div';
                options = tagNameOrDivOptions;
            }
            var element = document.createElement(tagName);
            applyOptions(element, options);
            return element;
        }
        HTMLHelper.createElement = createElement;
        /**
         * Creates an element with the specified text
         * @param tagName The tag of the element to create
         * @param text The text to add to the created element
         */
        function createElementWithText(tagName, text) {
            return createElement(tagName, { text: text });
        }
        HTMLHelper.createElementWithText = createElementWithText;
        function createElementWithClass(tagNameOrClassName, className) {
            var tagName = tagNameOrClassName;
            if (typeof className === 'undefined') {
                tagName = 'div';
                className = tagNameOrClassName;
            }
            return createElement(tagName, { className: className });
        }
        HTMLHelper.createElementWithClass = createElementWithClass;
        /**
         * Creates an element with the specified id
         * @param tagName The tag of the element to create
         * @param id The id to add to the element
         */
        function createElementWithID(tagName, id) {
            return createElement(tagName, { id: id });
        }
        HTMLHelper.createElementWithID = createElementWithID;
        /**
         * Create a new text element
         * @param text The text to create the text element with
         */
        function createTextElement(text) {
            return document.createTextNode(text);
        }
        HTMLHelper.createTextElement = createTextElement;
        function createButton(options) {
            var element = createElement('button', options);
            var buttonClassName = 'ridestyler-showcase-button';
            element.classList.add(buttonClassName);
            if (options.large) element.classList.add(buttonClassName + '-large');
            if (options.disabled) element.disabled = true;
            if (options.link) element.classList.add(buttonClassName + '-link');
            if (options.skinny) element.classList.add(buttonClassName + '-skinny');
            return element;
        }
        HTMLHelper.createButton = createButton;
        var iconClassPrefix = 'ridestyler-showcase-icon ridestyler-showcase-icon-';
        function createIcon(iconOrOptions) {
            var options = void 0;
            // Setup options
            if (typeof iconOrOptions === 'string') {
                options = {
                    icon: iconOrOptions
                };
            } else {
                options = iconOrOptions;
            }
            // Build icon className
            {
                var iconClass = options.icon;
                if (!iconClass.startsWith(iconClassPrefix)) iconClass = iconClassPrefix + iconClass;
                if (typeof options.className === 'string') iconClass = options.className + ' ' + iconClass;
                options.className = iconClass;
            }
            return createElement('i', options);
        }
        HTMLHelper.createIcon = createIcon;
        function createSVGElement(tagName, options) {
            var element = document.createElementNS('http://www.w3.org/2000/svg', tagName);
            applyOptions(element, options);
            return element;
        }
        HTMLHelper.createSVGElement = createSVGElement;
        function createDescriptionList(values) {
            var descriptionList = HTMLHelper.createElement('dl', {
                className: 'ridestyler-showcase-description-list',
                appendTo: this.summaryElement
            });
            if (values) appendDescriptionListValues(descriptionList, values);
            return descriptionList;
        }
        HTMLHelper.createDescriptionList = createDescriptionList;
        function appendDescriptionListValues(descriptionList, values) {
            var _iteratorNormalCompletion3 = true;
            var _didIteratorError3 = false;
            var _iteratorError3 = undefined;

            try {
                for (var _iterator3 = values[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {
                    var value = _step3.value;

                    HTMLHelper.createElement('dt', {
                        text: value.label,
                        appendTo: descriptionList
                    });
                    HTMLHelper.createElement('dd', {
                        text: value.description,
                        appendTo: descriptionList
                    });
                }
            } catch (err) {
                _didIteratorError3 = true;
                _iteratorError3 = err;
            } finally {
                try {
                    if (!_iteratorNormalCompletion3 && _iterator3.return) {
                        _iterator3.return();
                    }
                } finally {
                    if (_didIteratorError3) {
                        throw _iteratorError3;
                    }
                }
            }
        }
        HTMLHelper.appendDescriptionListValues = appendDescriptionListValues;
        /**
         * Removes all children from an element
         * @param element The element to empty
         */
        function empty(element) {
            var child = void 0;
            while (child = element.lastChild) {
                element.removeChild(child);
            }
        }
        HTMLHelper.empty = empty;
        function once(element, type, listener, useCapture) {
            var onceListener = function onceListener(evt) {
                element.removeEventListener(type, onceListener, useCapture);
                if ((typeof listener === 'undefined' ? 'undefined' : _typeof(listener)) === 'object') listener = listener.handleEvent;
                return listener.call(this, evt);
            };
            element.addEventListener(type, onceListener, useCapture);
        }
        HTMLHelper.once = once;
        /**
         * Returns the document that the element is a part of (if there is one)
         * @param element The element
         */
        function getDocument(element) {
            return element.ownerDocument;
        }
        HTMLHelper.getDocument = getDocument;
        /**
         * Returns the window that the element is a part of (if there is one)
         * @param element The element
         */
        function getWindow(element) {
            return getDocument(element).defaultView;
        }
        HTMLHelper.getWindow = getWindow;
        /**
         * Sets the content of an element to a string
         * @param element The element
         * @param text The text
         * @returns The element that was passed in
         */
        function setText(element, text) {
            empty(element);
            element.appendChild(document.createTextNode(text));
            return element;
        }
        HTMLHelper.setText = setText;
    })(HTMLHelper = RideStylerShowcase.HTMLHelper || (RideStylerShowcase.HTMLHelper = {}));
})(RideStylerShowcase || (RideStylerShowcase = {}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9zY3JpcHRzL2hlbHBlcnMvSFRNTEhlbHBlci50cyJdLCJuYW1lcyI6WyJSaWRlU3R5bGVyU2hvd2Nhc2UiLCJIVE1MSGVscGVyIiwiZWxlbWVudHNNYXRjaGluZyIsImVsZW1lbnRzIiwibWF0Y2giLCJtYXRjaGluZ0VsZW1lbnRzIiwiQXJyYXkiLCJsZW5ndGgiLCJtYXRjaGluZ0VsZW1lbnRzSW5kZXgiLCJpbmRleCIsImNoaWxkIiwiZmlyc3RFbGVtZW50TWF0Y2hpbmciLCJsYXN0RWxlbWVudE1hdGNoaW5nIiwiY2hpbGRyZW5NYXRjaGluZyIsImVsZW1lbnQiLCJjaGlsZHJlbiIsImZpcnN0Q2hpbGRNYXRjaGluZyIsImNoaWxkcmVuV2l0aENsYXNzZXMiLCJjbGFzc2VzIiwiU3R5bGVIZWxwZXIiLCJmbGF0dGVuQ2xhc3NMaXN0IiwiaGFzQ2xhc3NlcyIsInJlbW92ZUNoaWxkcmVuV2l0aENsYXNzZXMiLCJyZW1vdmVDaGlsZCIsImZpcnN0Q2hpbGRXaXRoVGFnIiwidGFnTmFtZSIsInRvVXBwZXJDYXNlIiwiZmlyc3RDaGlsZFdpdGhDbGFzcyIsImhhc0NoaWxkV2l0aENsYXNzIiwiaGFzU2libGluZ1dpdGhDbGFzcyIsInBhcmVudEVsZW1lbnQiLCJsYXN0U2libGluZ1dpdGhDbGFzcyIsInNpYmxpbmciLCJhcHBseU9wdGlvbnMiLCJvcHRpb25zIiwiaHRtbEVsZW1lbnQiLCJjbGFzc05hbWUiLCJpZCIsIndyYXAiLCJhcHBlbmRDaGlsZCIsImFwcGVuZFRvIiwidGV4dCIsImRvY3VtZW50IiwiY3JlYXRlVGV4dE5vZGUiLCJhcHBlbmQiLCJjaGlsZEVsZW1lbnQiLCJjcmVhdGVFbGVtZW50TlMiLCJhdHRyaWJ1dGVzIiwia2V5IiwiaGFzT3duUHJvcGVydHkiLCJzZXRBdHRyaWJ1dGUiLCJzdHlsZSIsInByb3BlcnRpZXMiLCJjcmVhdGVFbGVtZW50IiwidGFnTmFtZU9yRGl2T3B0aW9ucyIsImNyZWF0ZUVsZW1lbnRXaXRoVGV4dCIsImNyZWF0ZUVsZW1lbnRXaXRoQ2xhc3MiLCJ0YWdOYW1lT3JDbGFzc05hbWUiLCJjcmVhdGVFbGVtZW50V2l0aElEIiwiY3JlYXRlVGV4dEVsZW1lbnQiLCJjcmVhdGVCdXR0b24iLCJidXR0b25DbGFzc05hbWUiLCJjbGFzc0xpc3QiLCJhZGQiLCJsYXJnZSIsImRpc2FibGVkIiwibGluayIsInNraW5ueSIsImljb25DbGFzc1ByZWZpeCIsImNyZWF0ZUljb24iLCJpY29uT3JPcHRpb25zIiwiaWNvbiIsImljb25DbGFzcyIsInN0YXJ0c1dpdGgiLCJjcmVhdGVTVkdFbGVtZW50IiwiY3JlYXRlRGVzY3JpcHRpb25MaXN0IiwidmFsdWVzIiwiZGVzY3JpcHRpb25MaXN0Iiwic3VtbWFyeUVsZW1lbnQiLCJhcHBlbmREZXNjcmlwdGlvbkxpc3RWYWx1ZXMiLCJ2YWx1ZSIsImxhYmVsIiwiZGVzY3JpcHRpb24iLCJlbXB0eSIsImxhc3RDaGlsZCIsIm9uY2UiLCJ0eXBlIiwibGlzdGVuZXIiLCJ1c2VDYXB0dXJlIiwib25jZUxpc3RlbmVyIiwiZXZ0IiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImhhbmRsZUV2ZW50IiwiY2FsbCIsImFkZEV2ZW50TGlzdGVuZXIiLCJnZXREb2N1bWVudCIsIm93bmVyRG9jdW1lbnQiLCJnZXRXaW5kb3ciLCJkZWZhdWx0VmlldyIsInNldFRleHQiXSwibWFwcGluZ3MiOiI7O0FBQUEsSUFBVUEsa0JBQVY7QUFBQSxDQUFBLFVBQVVBLGtCQUFWLEVBQTRCO0FBQUMsUUFBQUMsVUFBQTtBQUFBLEtBQUEsVUFBQUEsVUFBQSxFQUFVO0FBT25DOzs7OztBQUtBLGlCQUFBQyxnQkFBQSxDQUFvREMsUUFBcEQsRUFBNkVDLEtBQTdFLEVBQThHO0FBQzFHLGdCQUFJQyxtQkFBd0IsSUFBSUMsS0FBSixDQUFVSCxTQUFTSSxNQUFuQixDQUE1QjtBQUVBLGdCQUFJQyx3QkFBd0IsQ0FBNUI7QUFDQSxpQkFBSyxJQUFJQyxRQUFRLENBQWpCLEVBQW9CQSxRQUFRTixTQUFTSSxN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QyxtQkFBT2lGLFlBQVlqRixPQUFaLEVBQXFCb0YsV0FBNUI7QUFDSDtBQUZlakcsbUJBQUFnRyxTQUFBLEdBQVNBLFNBQVQ7QUFJaEI7Ozs7OztBQU1BLGlCQUFBRSxPQUFBLENBQXdCckYsT0FBeEIsRUFBNkMyQixJQUE3QyxFQUF3RDtBQUNwRDBDLGtCQUFNckUsT0FBTjtBQUNBQSxvQkFBUXlCLFdBQVIsQ0FBb0JHLFNBQVNDLGNBQVQsQ0FBd0JGLElBQXhCLENBQXBCO0FBQ0EsbUJBQU8zQixPQUFQO0FBQ0g7QUFKZWIsbUJBQUFrRyxPQUFBLEdBQU9BLE9BQVA7QUFLbkIsS0FsZjRCLEVBQUFsRyxhQUFBRCxtQkFBQUMsVUFBQSxLQUFBRCxtQkFBQUMsVUFBQSxHQUFVLEVBQVYsQ0FBQTtBQWtmNUIsQ0FsZkQsRUFBVUQsdUJBQUFBLHFCQUFrQixFQUFsQixDQUFWIiwiZmlsZSI6InNjcmlwdHMvaGVscGVycy9IVE1MSGVscGVyLmpzIiwic291cmNlc0NvbnRlbnQiOlsibmFtZXNwYWNlIFJpZGVTdHlsZXJTaG93Y2FzZS5IVE1MSGVscGVyIHtcbiAgICBleHBvcnQgaW50ZXJmYWNlIEVsZW1lbnRMaXN0PFQgZXh0ZW5kcyBFbGVtZW50ID0gSFRNTEVsZW1lbnQ+IHtcbiAgICAgICAgbGVuZ3RoOiBudW1iZXI7XG4gICAgICAgIFtpbmRleDogbnVtYmVyXTogVDtcbiAgICB9XG5cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBuZXcgc2V0IG9mIGVsZW1lbnRzIG1hdGNoZWQgZnJvbSB0aGUgb3JpZ2luYWwgc2V0XG4gICAgICogQHBhcmFtIGVsZW1lbnRzIFRoZSBlbGVtZW50cyB0byBtYXRjaFxuICAgICAqIEBwYXJhbSBtYXRjaCBUaGUgbWF0Y2hpbmcgZnVuY3Rpb25cbiAgICAgKi9cbiAgICBleHBvcnQgZnVuY3Rpb24gZWxlbWVudHNNYXRjaGluZzxUIGV4dGVuZHMgRWxlbWVudD4oZWxlbWVudHM6RWxlbWVudExpc3Q8VD4sIG1hdGNoOiAoZWxlbWVudDpFbGVtZW50KT0+Ym9vbGVhbik6IFRbXSB7XG4gICAgICAgIGxldCBtYXRjaGluZ0VsZW1lbnRzOiBUW10gPSBuZXcgQXJyYXkoZWxlbWVudHMubGVuZ3RoKTtcblxuICAgICAgICBsZXQgbWF0Y2hpbmdFbGVtZW50c0luZGV4ID0gMDtcbiAgICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IGVsZW1lbnRzLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgICAgICAgbGV0IGNoaWxkID0gZWxlbWVudHNbaW5kZXhdIGFzIFQ7XG5cbiAgICAgICAgICAgIGlmIChtYXRjaChjaGlsZCkpIHtcbiAgICAgICAgICAgICAgICBtYXRjaGluZ0VsZW1lbnRzW21hdGNoaW5nRWxlbWVudHNJbmRleCsrXSA9IGNoaWxkO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgbWF0Y2hpbmdFbGVtZW50cy5sZW5ndGggPSBtYXRjaGluZ0VsZW1lbnRzSW5kZXg7XG4gICAgICAgIHJldHVybiBtYXRjaGluZ0VsZW1lbnRzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIGZpcnN0IGVsZW1lbnQgaW4gdGhlIHNldCB0byBtYXRjaCB0aGUgZnVuY3Rpb25cbiAgICAgKiBAcGFyYW0gZWxlbWVudHMgVGhlIHNldCBvZiBlbGVtZW50cyB0byBzZWFyY2ggaW5cbiAgICAgKiBAcGFyYW0gbWF0Y2ggVGhlIG1hdGNoaW5nIGZ1bmN0aW9uXG4gICAgICovXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGZpcnN0RWxlbWVudE1hdGNoaW5nPFQgZXh0ZW5kcyBFbGVtZW50PihlbGVtZW50czpFbGVtZW50TGlzdDxUPiwgbWF0Y2g6IChlbGVtZW50OkVsZW1lbnQpPT5ib29sZWFuKTogVCB7XG4gICAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBlbGVtZW50cy5sZW5ndGg7IGluZGV4KyspIHtcbiAgICAgICAgICAgIGxldCBjaGlsZCA9IGVsZW1lbnRzW2luZGV4XTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKG1hdGNoKGNoaWxkKSkgcmV0dXJuIGNoaWxkIGFzIFQ7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBcbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBsYXN0IGVsZW1lbnQgaW4gdGhlIHNldCB0byBtYXRjaCB0aGUgZnVuY3Rpb25cbiAgICAgKiBAcGFyYW0gZWxlbWVudHMgVGhlIHNldCBvZiBlbGVtZW50cyB0byBzZWFyY2ggaW5cbiAgICAgKiBAcGFyYW0gbWF0Y2ggVGhlIG1hdGNoaW5nIGZ1bmN0aW9uXG4gICAgICovXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGxhc3RFbGVtZW50TWF0Y2hpbmc8VCBleHRlbmRzIEVsZW1lbnQ+KGVsZW1lbnRzOkVsZW1lbnRMaXN0PFQ+LCBtYXRjaDogKGVsZW1lbnQ6RWxlbWVudCk9PmJvb2xlYW4pOiBUIHtcbiAgICAgICAgZm9yIChsZXQgaW5kZXggPSBlbGVtZW50cy5sZW5ndGggLSAxOyBpbmRleCA+PSAwOyBpbmRleC0tKSB7XG4gICAgICAgICAgICBsZXQgY2hpbGQgPSBlbGVtZW50c1tpbmRleF07XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChtYXRjaChjaGlsZCkpIHJldHVybiBjaGlsZCBhcyBUO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBleHBvcnQgZnVuY3Rpb24gY2hpbGRyZW5NYXRjaGluZzxUIGV4dGVuZHMgRWxlbWVudD4oZWxlbWVudDpFbGVtZW50LCBtYXRjaDogKGVsZW1lbnQ6RWxlbWVudCk9PmJvb2xlYW4pOiBUW10ge1xuICAgICAgICByZXR1cm4gZWxlbWVudHNNYXRjaGluZyhlbGVtZW50LmNoaWxkcmVuLCBtYXRjaCkgYXMgVFtdO1xuICAgIH1cbiAgICBcbiAgICAvKipcbiAgICAgKiBTZWFyY2ggYW4gZWxlbWVudCBmb3IgdGhlIGZpcnN0IGNoaWxkIG1hdGNoaW5nIHRoZSBtYXRjaCBmdW5jdGlvblxuICAgICAqIEBwYXJhbSBlbGVtZW50IFRoZSBlbGVtZW50IHRvIHNlYXJjaCBjaGlsZHJlbiBvZlxuICAgICAqIEBwYXJhbSBtYXRjaCBUaGUgbWF0Y2ggZnVuY3Rpb25cbiAgICAgKi9cbiAgICBleHBvcnQgZnVuY3Rpb24gZmlyc3RDaGlsZE1hdGNoaW5nPFQgZXh0ZW5kcyBFbGVtZW50PihlbGVtZW50OkVsZW1lbnQsIG1hdGNoOiAoZWxlbWVudDpFbGVtZW50KT0+Ym9vbGVhbik6VCB7XG4gICAgICAgIHJldHVybiBmaXJzdEVsZW1lbnRNYXRjaGluZyhlbGVtZW50LmNoaWxkcmVuLCBtYXRjaCkgYXMgVDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGFuIGFycmF5IG9mIGVsZW1lbnQncyBjaGlsZHJlbiBtYXRjaGluZyB0aGUgcGFzc2VkIGluIHNldCBvZiBcbiAgICAgKiBAcGFyYW0gZWxlbWVudCBUaGUgZWxlbWVudCB0byBzZWFyY2ggdGhlIGNoaWxkcmVuIG9mXG4gICAgICogQHBhcmFtIGNsYXNzZXMgVGhlIHNldCBvZiBjbGFzc2VzIHRvIG1hdGNoIGNoaWxkcmVuIHdpdGhcbiAgICAgKi9cbiAgICBleHBvcnQgZnVuY3Rpb24gY2hpbGRyZW5XaXRoQ2xhc3NlczxUIGV4dGVuZHMgRWxlbWVudD4oZWxlbWVudDpFbGVtZW50LCAuLi5jbGFzc2VzOnN0cmluZ1tdKTpUW10ge1xuICAgICAgICBjbGFzc2VzID0gU3R5bGVIZWxwZXIuZmxhdHRlbkNsYXNzTGlzdChjbGFzc2VzKTtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiBjaGlsZHJlbk1hdGNoaW5nKGVsZW1lbnQsIGNoaWxkID0+IFN0eWxlSGVscGVyLmhhc0NsYXNzZXMoY2hpbGQgYXMgSFRNTEVsZW1lbnQsIGNsYXNzZXMpKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIGNoaWxkcmVuIGZyb20gdGhlIGVsZW1lbnQgbWF0Y2hpbmcgYSBjbGFzcyBvciBzZXQgb2YgY2xhc3Nlc1xuICAgICAqIEBwYXJhbSBlbGVtZW50IFRoZSBlbGVtZW50IHRvIHNlYXJjaCB0aGUgY2hpbGRyZW5cbiAgICAgKiBAcGFyYW0gY2xhc3NlcyBUaGUgY2xhc3NlcyB0byBtYXRjaCBjaGlsZHJlbiB0byByZW1vdmVcbiAgICAgKi9cbiAgICBleHBvcnQgZnVuY3Rpb24gcmVtb3ZlQ2hpbGRyZW5XaXRoQ2xhc3NlcyhlbGVtZW50OkhUTUxFbGVtZW50LCAuLi5jbGFzc2VzOnN0cmluZ1tdKSB7XG4gICAgICAgIGZvciAobGV0IGNoaWxkIG9mIGNoaWxkcmVuV2l0aENsYXNzZXMoZWxlbWVudCwgLi4uY2xhc3NlcykpIHtcbiAgICAgICAgICAgIGVsZW1lbnQucmVtb3ZlQ2hpbGQoY2hpbGQpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2VhcmNoIGFuIGVsZW1lbnQgZm9yIHRoZSBmaXJzdCBjaGlsZCB3aXRoIHRoZSBzcGVjaWZpZWQgdGFnXG4gICAgICogQHBhcmFtIGVsZW1lbnQgVGhlIGVsZW1lbnQgdG8gc2VhcmNoIGNoaWxkcmVuIG9mXG4gICAgICogQHBhcmFtIHRhZ05hbWUgVGhlIHRhZyB0byBsb29rIGZvclxuICAgICAqL1xuICAgIGV4cG9ydCBmdW5jdGlvbiBmaXJzdENoaWxkV2l0aFRhZzxUIGV4dGVuZHMgSFRNTEVsZW1lbnQ+KGVsZW1lbnQ6SFRNTEVsZW1lbnQsIHRhZ05hbWU6c3RyaW5nKTpUIHtcbiAgICAgICAgdGFnTmFtZSA9IHRhZ05hbWUudG9VcHBlckNhc2UoKTtcblxuICAgICAgICByZXR1cm4gZmlyc3RDaGlsZE1hdGNoaW5nKGVsZW1lbnQsIGNoaWxkID0+IGNoaWxkLnRhZ05hbWUgPT09IHRhZ05hbWUpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNlYXJjaCBhbiBlbGVtZW50IGZvciB0aGUgZmlyc3QgY2hpbGQgd2l0aCB0aGUgc3BlY2lmaWVkIGNsYXNzKGVzKSBpbiBpdHMgY2xhc3MgbGlzdFxuICAgICAqIEBwYXJhbSBlbGVtZW50IFRoZSBlbGVtZW50IHRvIHNlYXJjaCBjaGlsZHJlbiBvZlxuICAgICAqIEBwYXJhbSBjbGFzc2VzIFRoZSBjbGFzc2VzIHRvIGxvb2sgZm9yXG4gICAgICovXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGZpcnN0Q2hpbGRXaXRoQ2xhc3M8VCBleHRlbmRzIEVsZW1lbnQ+KGVsZW1lbnQ6IEVsZW1lbnQsIC4uLmNsYXNzZXM6IHN0cmluZ1tdKTpUIHtcbiAgICAgICAgcmV0dXJuIGZpcnN0Q2hpbGRNYXRjaGluZyhlbGVtZW50LCBjaGlsZCA9PiBTdHlsZUhlbHBlci5oYXNDbGFzc2VzKGNoaWxkIGFzIEhUTUxFbGVtZW50LCBjbGFzc2VzKSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRGV0ZWN0cyBpZiBhbiBlbGVtZW50IGhhcyBhIGNoaWxkIHdpdGggdGhlIHNwZWNpZmllZCBjbGFzcyhlcylcbiAgICAgKiBAcGFyYW0gZWxlbWVudCBUaGUgZWxlbWVudCB0byBzZWFyY2ggdGhlIGNoaWxkcmVuIG9mXG4gICAgICogQHBhcmFtIGNsYXNzZXMgVGhlIGNsYXNzKGVzKSB0byBsb29rIGZvclxuICAgICAqL1xuICAgIGV4cG9ydCBmdW5jdGlvbiBoYXNDaGlsZFdpdGhDbGFzcyhlbGVtZW50OiBIVE1MRWxlbWVudCwgLi4uY2xhc3Nlczogc3RyaW5nW10pOmJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gISFmaXJzdENoaWxkV2l0aENsYXNzKGVsZW1lbnQsIC4uLmNsYXNzZXMpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIERldGVjdHMgaWYgYW4gZWxlbWVudCBoYXMgYSBzaWJsaW5nIHdpdGggdGhlIHNwZWNpZmllZCBjbGFzcyhlcylcbiAgICAgKiBAcGFyYW0gZWxlbWVudCBUaGUgZWxlbWVudCB0byBzZWFyY2ggdGhlIHNpYmxpbmdzIG9mXG4gICAgICogQHBhcmFtIGNsYXNzZXMgVGhlIGNsYXNzKGVzKSB0byBsb29rIGZvclxuICAgICAqL1xuICAgIGV4cG9ydCBmdW5jdGlvbiBoYXNTaWJsaW5nV2l0aENsYXNzKGVsZW1lbnQ6RWxlbWVudCwgLi4uY2xhc3NlczpzdHJpbmdbXSk6Ym9vbGVhbiB7XG4gICAgICAgIHJldHVybiBoYXNDaGlsZFdpdGhDbGFzcyhlbGVtZW50LnBhcmVudEVsZW1lbnQsIC4uLmNsYXNzZXMpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIGxhc3Qgc2libGluZyBvZiBhbiBlbGVtZW50IG1hdGNoaW5nIGEgc3BlY2lmaWVkIGNsYXNzIChvciBzcGVjaWZpZWQgY2xhc3NlcylcbiAgICAgKiBAcGFyYW0gZWxlbWVudCBUaGUgZWxlbWVudCB0byBzZWFyY2ggc2libGluZ3NcbiAgICAgKiBAcGFyYW0gY2xhc3NlcyBUaGUgY2xhc3NlcyB0byBsb29rIGZvclxuICAgICAqL1xuICAgIGV4cG9ydCBmdW5jdGlvbiBsYXN0U2libGluZ1dpdGhDbGFzczxUIGV4dGVuZHMgRWxlbWVudD4oZWxlbWVudDpFbGVtZW50LCAuLi5jbGFzc2VzOnN0cmluZ1tdKTpUIHtcbiAgICAgICAgcmV0dXJuIGxhc3RFbGVtZW50TWF0Y2hpbmcoZWxlbWVudC5wYXJlbnRFbGVtZW50LmNoaWxkcmVuLCBzaWJsaW5nID0+IHNpYmxpbmcgIT09IGVsZW1lbnQgJiYgU3R5bGVIZWxwZXIuaGFzQ2xhc3NlcyhzaWJsaW5nIGFzIEhUTUxFbGVtZW50LCBjbGFzc2VzKSkgYXMgVDtcbiAgICB9XG5cbiAgICBleHBvcnQgaW50ZXJmYWNlIGNyZWF0ZUVsZW1lbnRPcHRpb25zPEVsZW1lbnRUeXBlIGV4dGVuZHMgRWxlbWVudD4ge1xuICAgICAgICAvKipcbiAgICAgICAgICogU3BlY2lmaWVzIGEgY2xhc3MgdG8gYWRkIHRvIHRoZSBlbGVtZW50XG4gICAgICAgICAqL1xuICAgICAgICBjbGFzc05hbWU/OnN0cmluZztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNwZWNpZmllcyBhbiBJRCB0byBhZGQgdG8gdGhlIGVsZW1lbnRcbiAgICAgICAgICovXG4gICAgICAgIGlkPzogc3RyaW5nO1xuICAgICAgICAvKipcbiAgICAgICAgICogU3BlY2lmaWVzIGFuIGVsZW1lbnQgdG8gYXBwZW5kIHRoZSBjcmVhdGVkIGVsZW1lbnQgdG9cbiAgICAgICAgICovXG4gICAgICAgIGFwcGVuZFRvPzpOb2RlO1xuICAgICAgICAvKipcbiAgICAgICAgICogU3BlY2lmaWVzIHRleHQgdG8gYWRkIHRvIHRoZSBlbGVtZW50XG4gICAgICAgICAqL1xuICAgICAgICB0ZXh0PzpzdHJpbmc7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTcGVjaWZpZXMgYW4gZWxlbWVudCBvciBlbGVtZW50cyB0byBhcHBlbmQgdG8gdGhlIGNyZWF0ZWQgZWxlbWVudFxuICAgICAgICAgKi9cbiAgICAgICAgYXBwZW5kPzogTm9kZXxOb2RlW107XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTcGVjaWZpZXMgYXR0cmlidXRlcyB0byBhZGQgdG8gdGhlIGNyZWF0ZWQgZWxlbWVudFxuICAgICAgICAgKi9cbiAgICAgICAgYXR0cmlidXRlcz86IHtcbiAgICAgICAgICAgIFtrZXk6c3RyaW5nXTogc3RyaW5nO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTcGVjaWZpZXMgc3R5bGVzIHRvIHNldCBvbiB0aGUgY3JlYXRlZCBlbGVtZW50XG4gICAgICAgICAqL1xuICAgICAgICBzdHlsZT86IHtcbiAgICAgICAgICAgIFtwIGluIGtleW9mIENTU1N0eWxlRGVjbGFyYXRpb25dPzogQ1NTU3R5bGVEZWNsYXJhdGlvbltwXTtcbiAgICAgICAgfTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNwZWNpZmllcyBwcm9wZXJ0aWVzIHRvIHNldCBvbiB0aGUgY3JlYXRlZCBlbGVtZW50XG4gICAgICAgICAqL1xuICAgICAgICBwcm9wZXJ0aWVzPzoge1xuICAgICAgICAgICAgW2tleSBpbiBrZXlvZiBFbGVtZW50VHlwZV0/OkVsZW1lbnRUeXBlW2tleV07XG4gICAgICAgIH07XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTcGVjaWZpZXMgYSBIVE1MIGVsZW1lbnQgdG8gd3JhcCB0aGUgY3JlYXRlZCBlbGVtZW50IGluLiBXaGVuIHVzZWQgaW4gY29tYmluYXRpb24gd2l0aFxuICAgICAgICAgKiBhcHBlbmRUbywgdGhlIHdyYXBwZXIgd2lsbCBiZSBhcHBlbmRlZCB0byB0aGUgZWxlbWVudC5cbiAgICAgICAgICovXG4gICAgICAgIHdyYXA/OiBIVE1MRWxlbWVudDtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBhcHBseU9wdGlvbnMoZWxlbWVudDpFbGVtZW50LCBvcHRpb25zOiBjcmVhdGVFbGVtZW50T3B0aW9uczxFbGVtZW50Pikge1xuICAgICAgICBsZXQgaHRtbEVsZW1lbnQgPSBlbGVtZW50IGFzIEhUTUxFbGVtZW50O1xuXG4gICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucyAhPT0gJ29iamVjdCcpIHJldHVybjtcbiAgICAgICAgXG4gICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5jbGFzc05hbWUgPT09ICdzdHJpbmcnKSBlbGVtZW50LmNsYXNzTmFtZSA9IG9wdGlvbnMuY2xhc3NOYW1lO1xuICAgICAgICBpZiAodHlwZW9mIG9wdGlvbnMuaWQgPT09ICdzdHJpbmcnKSBlbGVtZW50LmlkID0gb3B0aW9ucy5pZDtcbiAgICAgICAgaWYgKG9wdGlvbnMud3JhcCkgb3B0aW9ucy53cmFwLmFwcGVuZENoaWxkKGVsZW1lbnQpO1xuICAgICAgICBpZiAob3B0aW9ucy5hcHBlbmRUbykgb3B0aW9ucy5hcHBlbmRUby5hcHBlbmRDaGlsZChvcHRpb25zLndyYXAgfHwgZWxlbWVudCk7XG4gICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucy50ZXh0ID09PSAnc3RyaW5nJykgZWxlbWVudC5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShvcHRpb25zLnRleHQpKTtcbiAgICAgICAgaWYgKG9wdGlvbnMuYXBwZW5kKSB7XG4gICAgICAgICAgICBpZiAob3B0aW9ucy5hcHBlbmQgaW5zdGFuY2VvZiBBcnJheSkge1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGNoaWxkRWxlbWVudCBvZiBvcHRpb25zLmFwcGVuZCkge1xuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmFwcGVuZENoaWxkKGNoaWxkRWxlbWVudCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBlbGVtZW50LmFwcGVuZENoaWxkKG9wdGlvbnMuYXBwZW5kKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TXG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9wdGlvbnMuYXR0cmlidXRlcykge1xuICAgICAgICAgICAgZm9yIChsZXQga2V5IGluIG9wdGlvbnMuYXR0cmlidXRlcykge1xuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLmF0dHJpYnV0ZXMuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZShrZXksIG9wdGlvbnMuYXR0cmlidXRlc1trZXldKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9wdGlvbnMuc3R5bGUgJiYgdHlwZW9mIGh0bWxFbGVtZW50LnN0eWxlID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgZm9yIChsZXQga2V5IGluIG9wdGlvbnMuc3R5bGUpIHtcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5zdHlsZS5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICAgICAgICAgICAgICAgIGh0bWxFbGVtZW50LnN0eWxlW2tleV0gPSBvcHRpb25zLnN0eWxlW2tleV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRpb25zLnByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgIGZvciAobGV0IGtleSBpbiBvcHRpb25zLnByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5wcm9wZXJ0aWVzLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudFtrZXldID0gb3B0aW9ucy5wcm9wZXJ0aWVzW2tleV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgRElWXG4gICAgICogQHBhcmFtIG9wdGlvbnMgQWRkaXRpb25hbCBvcGVyYXRpb25zIHRvIHBlcmZvcm0gb24gdGhlIGVsZW1lbnRcbiAgICAgKi9cbiAgICBleHBvcnQgZnVuY3Rpb24gY3JlYXRlRWxlbWVudChvcHRpb25zPzpjcmVhdGVFbGVtZW50T3B0aW9uczxIVE1MRGl2RWxlbWVudD4pOiBIVE1MRGl2RWxlbWVudDtcbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYW4gZWxlbWVudFxuICAgICAqIEBwYXJhbSB0YWdOYW1lIFRoZSB0YWcgb2YgdGhlIGVsZW1lbnQgdG8gY3JlYXRlXG4gICAgICogQHBhcmFtIG9wdGlvbnMgQWRkaXRpb25hbCBvcGVyYXRpb25zIHRvIHBlcmZvcm0gb24gdGhlIGVsZW1lbnRcbiAgICAgKi9cbiAgICBleHBvcnQgZnVuY3Rpb24gY3JlYXRlRWxlbWVudDxLIGV4dGVuZHMga2V5b2YgSFRNTEVsZW1lbnRUYWdOYW1lTWFwPih0YWdOYW1lOiBLLCBvcHRpb25zPzpjcmVhdGVFbGVtZW50T3B0aW9uczxIVE1MRWxlbWVudFRhZ05hbWVNYXBbS10+KTogSFRNTEVsZW1lbnRUYWdOYW1lTWFwW0tdO1xuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhbiBlbGVtZW50XG4gICAgICogQHBhcmFtIHRhZ05hbWUgVGhlIHRhZyBvZiB0aGUgZWxlbWVudCB0byBjcmVhdGVcbiAgICAgKiBAcGFyYW0gb3B0aW9ucyBBZGRpdGlvbmFsIG9wZXJhdGlvbnMgdG8gcGVyZm9ybSBvbiB0aGUgZWxlbWVudFxuICAgICAqL1xuICAgIGV4cG9ydCBmdW5jdGlvbiBjcmVhdGVFbGVtZW50KHRhZ05hbWU6IHN0cmluZywgb3B0aW9ucz86Y3JlYXRlRWxlbWVudE9wdGlvbnM8SFRNTEVsZW1lbnQ+KTogSFRNTEVsZW1lbnQ7XG4gICAgZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUVsZW1lbnQodGFnTmFtZU9yRGl2T3B0aW9uczpzdHJpbmd8Y3JlYXRlRWxlbWVudE9wdGlvbnM8SFRNTERpdkVsZW1lbnQ+LCBvcHRpb25zPzpjcmVhdGVFbGVtZW50T3B0aW9uczxIVE1MRWxlbWVudD4pOiBIVE1MRWxlbWVudCB7XG4gICAgICAgIGxldCB0YWdOYW1lOnN0cmluZztcbiAgICAgICAgXG4gICAgICAgIGlmICh0eXBlb2YgdGFnTmFtZU9yRGl2T3B0aW9ucyA9PT0gJ3N0cmluZycpIHRhZ05hbWUgPSB0YWdOYW1lT3JEaXZPcHRpb25zO1xuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRhZ05hbWUgPSAnZGl2JztcbiAgICAgICAgICAgIG9wdGlvbnMgPSB0YWdOYW1lT3JEaXZPcHRpb25zO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KHRhZ05hbWUpO1xuXG4gICAgICAgIGFwcGx5T3B0aW9ucyhlbGVtZW50LCBvcHRpb25zKTtcblxuICAgICAgICByZXR1cm4gZWxlbWVudDtcbiAgICB9XG5cbiAgICBleHBvcnQgZnVuY3Rpb24gY3JlYXRlRWxlbWVudFdpdGhUZXh0PEsgZXh0ZW5kcyBrZXlvZiBIVE1MRWxlbWVudFRhZ05hbWVNYXA+KHRhZ05hbWU6IEssIHRleHQ6c3RyaW5nKTogSFRNTEVsZW1lbnRUYWdOYW1lTWFwW0tdO1xuICAgIGV4cG9ydCBmdW5jdGlvbiBjcmVhdGVFbGVtZW50V2l0aFRleHQodGFnTmFtZTogc3RyaW5nLCB0ZXh0OnN0cmluZyk6IEhUTUxFbGVtZW50O1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gZWxlbWVudCB3aXRoIHRoZSBzcGVjaWZpZWQgdGV4dFxuICAgICAqIEBwYXJhbSB0YWdOYW1lIFRoZSB0YWcgb2YgdGhlIGVsZW1lbnQgdG8gY3JlYXRlXG4gICAgICogQHBhcmFtIHRleHQgVGhlIHRleHQgdG8gYWRkIHRvIHRoZSBjcmVhdGVkIGVsZW1lbnRcbiAgICAgKi9cbiAgICBleHBvcnQgZnVuY3Rpb24gY3JlYXRlRWxlbWVudFdpdGhUZXh0KHRhZ05hbWU6c3RyaW5nLCB0ZXh0OnN0cmluZyk6IEhUTUxFbGVtZW50IHtcbiAgICAgICAgcmV0dXJuIGNyZWF0ZUVsZW1lbnQodGFnTmFtZSwge3RleHQ6IHRleHR9KTtcbiAgICB9XG4gICAgXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBlbGVtZW50IHdpdGggdGhlIHNwZWNpZmllZCBjbGFzc1xuICAgICAqIEBwYXJhbSB0YWdOYW1lIFRoZSB0YWcgb2YgdGhlIGVsZW1lbnQgdG8gY3JlYXRlXG4gICAgICogQHBhcmFtIGNsYXNzTmFtZSBUaGUgY2xhc3MgdG8gYWRkIHRvIHRoZSBlbGVtZW50XG4gICAgICovXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUVsZW1lbnRXaXRoQ2xhc3M8SyBleHRlbmRzIGtleW9mIEhUTUxFbGVtZW50VGFnTmFtZU1hcD4odGFnTmFtZTogSywgY2xhc3NOYW1lOnN0cmluZyk6IEhUTUxFbGVtZW50VGFnTmFtZU1hcFtLXTtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGVsZW1lbnQgd2l0aCB0aGUgc3BlY2lmaWVkIGNsYXNzXG4gICAgICogQHBhcmFtIHRhZ05hbWUgVGhlIHRhZyBvZiB0aGUgZWxlbWVudCB0byBjcmVhdGVcbiAgICAgKiBAcGFyYW0gY2xhc3NOYW1lIFRoZSBjbGFzcyB0byBhZGQgdG8gdGhlIGVsZW1lbnRcbiAgICAgKi9cbiAgICBleHBvcnQgZnVuY3Rpb24gY3JlYXRlRWxlbWVudFdpdGhDbGFzcyh0YWdOYW1lOiBzdHJpbmcsIGNsYXNzTmFtZTpzdHJpbmcpOiBIVE1MRWxlbWVudDtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgRElWIGVsZW1lbnQgd2l0aCB0aGUgc3BlY2lmaWVkIGNsYXNzXG4gICAgICogQHBhcmFtIGNsYXNzTmFtZSBUaGUgY2xhc3MgdG8gYWRkIHRvIHRoZSBlbGVtZW50XG4gICAgICovXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUVsZW1lbnRXaXRoQ2xhc3MoY2xhc3NOYW1lOnN0cmluZyk6SFRNTERpdkVsZW1lbnQ7XG4gICAgZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUVsZW1lbnRXaXRoQ2xhc3ModGFnTmFtZU9yQ2xhc3NOYW1lOnN0cmluZywgY2xhc3NOYW1lPzpzdHJpbmcpOiBIVE1MRWxlbWVudCB7XG4gICAgICAgIGxldCB0YWdOYW1lID0gdGFnTmFtZU9yQ2xhc3NOYW1lO1xuXG4gICAgICAgIGlmICh0eXBlb2YgY2xhc3NOYW1lID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgdGFnTmFtZSA9ICdkaXYnO1xuICAgICAgICAgICAgY2xhc3NOYW1lID0gdGFnTmFtZU9yQ2xhc3NOYW1lO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGNyZWF0ZUVsZW1lbnQodGFnTmFtZSwge2NsYXNzTmFtZTogY2xhc3NOYW1lfSk7XG4gICAgfVxuXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUVsZW1lbnRXaXRoSUQ8SyBleHRlbmRzIGtleW9mIEhUTUxFbGVtZW50VGFnTmFtZU1hcD4odGFnTmFtZTogSywgaWQ6c3RyaW5nKTogSFRNTEVsZW1lbnRUYWdOYW1lTWFwW0tdO1xuICAgIGV4cG9ydCBmdW5jdGlvbiBjcmVhdGVFbGVtZW50V2l0aElEKHRhZ05hbWU6IHN0cmluZywgaWQ6c3RyaW5nKTogSFRNTEVsZW1lbnQ7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBlbGVtZW50IHdpdGggdGhlIHNwZWNpZmllZCBpZFxuICAgICAqIEBwYXJhbSB0YWdOYW1lIFRoZSB0YWcgb2YgdGhlIGVsZW1lbnQgdG8gY3JlYXRlXG4gICAgICogQHBhcmFtIGlkIFRoZSBpZCB0byBhZGQgdG8gdGhlIGVsZW1lbnRcbiAgICAgKi9cbiAgICBleHBvcnQgZnVuY3Rpb24gY3JlYXRlRWxlbWVudFdpdGhJRCh0YWdOYW1lOnN0cmluZywgaWQ6c3RyaW5nKTogSFRNTEVsZW1lbnQge1xuICAgICAgICByZXR1cm4gY3JlYXRlRWxlbWVudCh0YWdOYW1lLCB7aWQ6IGlkfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgbmV3IHRleHQgZWxlbWVudFxuICAgICAqIEBwYXJhbSB0ZXh0IFRoZSB0ZXh0IHRvIGNyZWF0ZSB0aGUgdGV4dCBlbGVtZW50IHdpdGhcbiAgICAgKi9cbiAgICBleHBvcnQgZnVuY3Rpb24gY3JlYXRlVGV4dEVsZW1lbnQodGV4dDpzdHJpbmcpOiBUZXh0IHtcbiAgICAgICAgcmV0dXJuIGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHRleHQpO1xuICAgIH1cblxuICAgIGV4cG9ydCBpbnRlcmZhY2UgY3JlYXRlQnV0dG9uT3B0aW9ucyBleHRlbmRzIGNyZWF0ZUVsZW1lbnRPcHRpb25zPEhUTUxCdXR0b25FbGVtZW50PiB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJZiB0cnVlLCBkaXNhYmxlIHRoZSBjcmVhdGVkIGJ1dHRvblxuICAgICAgICAgKi9cbiAgICAgICAgZGlzYWJsZWQ/OmJvb2xlYW47XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJZiB0cnVlLCBjcmVhdGUgYSBsYXJnZSBidXR0b25cbiAgICAgICAgICovXG4gICAgICAgIGxhcmdlPzpib29sZWFuO1xuICAgICAgICAvKipcbiAgICAgICAgICogSWYgdHJ1ZSwgY3JlYXRlIGEgbGluayBidXR0b25cbiAgICAgICAgICovXG4gICAgICAgIGxpbms/OiBib29sZWFuO1xuICAgICAgICAvKipcbiAgICAgICAgICogSWYgdHJ1ZSwgY3JlYXRlIGEgc2tpbm55IGJ1dHRvblxuICAgICAgICAgKi9cbiAgICAgICAgc2tpbm55PzogYm9vbGVhbjtcbiAgICB9XG4gICAgZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUJ1dHRvbihvcHRpb25zOmNyZWF0ZUJ1dHRvbk9wdGlvbnMpIHtcbiAgICAgICAgdmFyIGVsZW1lbnQgPSBjcmVhdGVFbGVtZW50KCdidXR0b24nLCBvcHRpb25zKTtcblxuICAgICAgICBjb25zdCBidXR0b25DbGFzc05hbWUgPSAncmlkZXN0eWxlci1zaG93Y2FzZS1idXR0b24nO1xuICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoYnV0dG9uQ2xhc3NOYW1lKTtcblxuICAgICAgICBpZiAob3B0aW9ucy5sYXJnZSkgZWxlbWVudC5jbGFzc0xpc3QuYWRkKGJ1dHRvbkNsYXNzTmFtZSArICctbGFyZ2UnKTtcbiAgICAgICAgaWYgKG9wdGlvbnMuZGlzYWJsZWQpIGVsZW1lbnQuZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgICBpZiAob3B0aW9ucy5saW5rKSBlbGVtZW50LmNsYXNzTGlzdC5hZGQoYnV0dG9uQ2xhc3NOYW1lICsgJy1saW5rJylcbiAgICAgICAgaWYgKG9wdGlvbnMuc2tpbm55KSBlbGVtZW50LmNsYXNzTGlzdC5hZGQoYnV0dG9uQ2xhc3NOYW1lICsgJy1za2lubnknKTtcblxuICAgICAgICByZXR1cm4gZWxlbWVudDtcbiAgICB9XG5cbiAgICBjb25zdCBpY29uQ2xhc3NQcmVmaXggPSAncmlkZXN0eWxlci1zaG93Y2FzZS1pY29uIHJpZGVzdHlsZXItc2hvd2Nhc2UtaWNvbi0nO1xuICAgIGV4cG9ydCBpbnRlcmZhY2UgY3JlYXRlSWNvbk9wdGlvbnMgZXh0ZW5kcyBjcmVhdGVFbGVtZW50T3B0aW9uczxIVE1MRWxlbWVudD4ge1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGNsYXNzIG9mIHRoZSBpY29uIHRvIGNyZWF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgaWNvbjogc3RyaW5nO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYW4gaWNvblxuICAgICAqIEBwYXJhbSBpY29uIFRoZSBjbGFzcyBvZiB0aGUgaWNvbiB0byBjcmVhdGVcbiAgICAgKi9cbiAgICBleHBvcnQgZnVuY3Rpb24gY3JlYXRlSWNvbihpY29uOnN0cmluZykgOiBIVE1MRWxlbWVudDtcbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYW4gaWNvblxuICAgICAqIEBwYXJhbSBvcHRpb25zIE9wdGlvbnMgdG8gY3JlYXRlIHRoZSBpY29uIHdpdGhcbiAgICAgKi9cbiAgICBleHBvcnQgZnVuY3Rpb24gY3JlYXRlSWNvbihvcHRpb25zOmNyZWF0ZUljb25PcHRpb25zKSA6IEhUTUxFbGVtZW50O1xuICAgIGV4cG9ydCBmdW5jdGlvbiBjcmVhdGVJY29uKGljb25Pck9wdGlvbnM6IHN0cmluZ3xjcmVhdGVJY29uT3B0aW9ucykgOiBIVE1MRWxlbWVudCB7XG4gICAgICAgIGxldCBvcHRpb25zOmNyZWF0ZUljb25PcHRpb25zO1xuXG4gICAgICAgIC8vIFNldHVwIG9wdGlvbnNcbiAgICAgICAgaWYgKHR5cGVvZiBpY29uT3JPcHRpb25zID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgb3B0aW9ucyA9IHtcbiAgICAgICAgICAgICAgICBpY29uOiBpY29uT3JPcHRpb25zXG4gICAgICAgICAgICB9O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgb3B0aW9ucyA9IGljb25Pck9wdGlvbnM7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIEJ1aWxkIGljb24gY2xhc3NOYW1lXG4gICAgICAgIHtcbiAgICAgICAgICAgIGxldCBpY29uQ2xhc3MgPSBvcHRpb25zLmljb247XG5cbiAgICAgICAgICAgIGlmICghaWNvbkNsYXNzLnN0YXJ0c1dpdGgoaWNvbkNsYXNzUHJlZml4KSlcbiAgICAgICAgICAgICAgICBpY29uQ2xhc3MgPSBpY29uQ2xhc3NQcmVmaXggKyBpY29uQ2xhc3M7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5jbGFzc05hbWUgPT09ICdzdHJpbmcnKVxuICAgICAgICAgICAgICAgIGljb25DbGFzcyA9IG9wdGlvbnMuY2xhc3NOYW1lICsgJyAnICsgaWNvbkNsYXNzO1xuXG4gICAgICAgICAgICBvcHRpb25zLmNsYXNzTmFtZSA9IGljb25DbGFzcztcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgcmV0dXJuIGNyZWF0ZUVsZW1lbnQoJ2knLCBvcHRpb25zKTtcbiAgICB9XG5cbiAgICBleHBvcnQgZnVuY3Rpb24gY3JlYXRlU1ZHRWxlbWVudDxLIGV4dGVuZHMga2V5b2YgRWxlbWVudFRhZ05hbWVNYXA+KHRhZ05hbWU6Sywgb3B0aW9uczpjcmVhdGVFbGVtZW50T3B0aW9uczxFbGVtZW50VGFnTmFtZU1hcFtLXT4pIDogRWxlbWVudFRhZ05hbWVNYXBbS107XG4gICAgZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVNWR0VsZW1lbnQodGFnTmFtZTpzdHJpbmcsIG9wdGlvbnM6Y3JlYXRlRWxlbWVudE9wdGlvbnM8U1ZHRWxlbWVudD4pIDogU1ZHRWxlbWVudDtcbiAgICBleHBvcnQgZnVuY3Rpb24gY3JlYXRlU1ZHRWxlbWVudCh0YWdOYW1lOnN0cmluZywgb3B0aW9uczpjcmVhdGVFbGVtZW50T3B0aW9uczxTVkdFbGVtZW50PikgOiBTVkdFbGVtZW50IHtcbiAgICAgICAgbGV0IGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJywgdGFnTmFtZSk7XG5cbiAgICAgICAgYXBwbHlPcHRpb25zKGVsZW1lbnQsIG9wdGlvbnMpO1xuXG4gICAgICAgIHJldHVybiBlbGVtZW50O1xuICAgIH1cblxuICAgIGV4cG9ydCBmdW5jdGlvbiBjcmVhdGVEZXNjcmlwdGlvbkxpc3QodmFsdWVzPzp7bGFiZWw6IHN0cmluZywgZGVzY3JpcHRpb246IHN0cmluZ31bXSk6SFRNTERMaXN0RWxlbWVudCB7XG4gICAgICAgIGxldCBkZXNjcmlwdGlvbkxpc3QgPSBIVE1MSGVscGVyLmNyZWF0ZUVsZW1lbnQoJ2RsJywge1xuICAgICAgICAgICAgY2xhc3NOYW1lOiAncmlkZXN0eWxlci1zaG93Y2FzZS1kZXNjcmlwdGlvbi1saXN0JyxcbiAgICAgICAgICAgIGFwcGVuZFRvOiB0aGlzLnN1bW1hcnlFbGVtZW50XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmICh2YWx1ZXMpIGFwcGVuZERlc2NyaXB0aW9uTGlzdFZhbHVlcyhkZXNjcmlwdGlvbkxpc3QsIHZhbHVlcyk7XG5cbiAgICAgICAgcmV0dXJuIGRlc2NyaXB0aW9uTGlzdDtcbiAgICB9XG5cbiAgICBleHBvcnQgZnVuY3Rpb24gYXBwZW5kRGVzY3JpcHRpb25MaXN0VmFsdWVzKGRlc2NyaXB0aW9uTGlzdDpIVE1MRExpc3RFbGVtZW50LCB2YWx1ZXM/OntsYWJlbDogc3RyaW5nLCBkZXNjcmlwdGlvbjogc3RyaW5nfVtdKSB7XG4gICAgICAgIGZvciAoY29uc3QgdmFsdWUgb2YgdmFsdWVzKSB7XG4gICAgICAgICAgICBIVE1MSGVscGVyLmNyZWF0ZUVsZW1lbnQoJ2R0Jywge1xuICAgICAgICAgICAgICAgIHRleHQ6IHZhbHVlLmxhYmVsLFxuICAgICAgICAgICAgICAgIGFwcGVuZFRvOiBkZXNjcmlwdGlvbkxpc3RcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KCdkZCcsIHtcbiAgICAgICAgICAgICAgICB0ZXh0OiB2YWx1ZS5kZXNjcmlwdGlvbixcbiAgICAgICAgICAgICAgICBhcHBlbmRUbzogZGVzY3JpcHRpb25MaXN0XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIGFsbCBjaGlsZHJlbiBmcm9tIGFuIGVsZW1lbnRcbiAgICAgKiBAcGFyYW0gZWxlbWVudCBUaGUgZWxlbWVudCB0byBlbXB0eVxuICAgICAqL1xuICAgIGV4cG9ydCBmdW5jdGlvbiBlbXB0eShlbGVtZW50OkhUTUxFbGVtZW50KSB7XG4gICAgICAgIGxldCBjaGlsZDpOb2RlO1xuICAgICAgICBcbiAgICAgICAgd2hpbGUgKGNoaWxkID0gZWxlbWVudC5sYXN0Q2hpbGQpXG4gICAgICAgICAgICBlbGVtZW50LnJlbW92ZUNoaWxkKGNoaWxkKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBCaW5kcyBhbiBldmVudCBsaXN0ZW5lciB0aGF0IGlzIGV4ZWN1dGVkIG9uY2UgYW5kIHRoZW4gcmVtb3ZlZCBmcm9tIHRoZSBlbGVtZW50XG4gICAgICogQHBhcmFtIGVsZW1lbnQgVGhlIGVsZW1lbnQgdG8gYmluZCBhIGxpc3RlbmVyIHRvXG4gICAgICogQHBhcmFtIHR5cGUgVGhlIHR5cGUgb2YgZXZlbnQgdG8gbGlzdGVuIHRvXG4gICAgICogQHBhcmFtIGxpc3RlbmVyIFRoZSBldmVudCBsaXN0ZW5lciB0byBjYWxsIHdoZW4gdGhlIGV2ZW50IGlzIHRyaWdnZXJlZFxuICAgICAqIEBwYXJhbSB1c2VDYXB0dXJlIElmIHRydWUsIHJ1biB0aGUgbGlzdGVuZXIgaW4gdGhlIGNhcHR1cmUgcGhhc2Ugb2YgdGhlIGV2ZW50XG4gICAgICovXG4gICAgZXhwb3J0IGZ1bmN0aW9uIG9uY2U8SyBleHRlbmRzIGtleW9mIEhUTUxFbGVtZW50RXZlbnRNYXA+KGVsZW1lbnQ6SFRNTEVsZW1lbnQsIHR5cGU6IEssIGxpc3RlbmVyOiAodGhpczogSFRNTEVsZW1lbnQsIGV2OiBIVE1MRWxlbWVudEV2ZW50TWFwW0tdKSA9PiBhbnksIHVzZUNhcHR1cmU/OiBib29sZWFuKTogdm9pZDtcbiAgICAvKipcbiAgICAgKiBCaW5kcyBhbiBldmVudCBsaXN0ZW5lciB0aGF0IGlzIGV4ZWN1dGVkIG9uY2UgYW5kIHRoZW4gcmVtb3ZlZCBmcm9tIHRoZSBlbGVtZW50XG4gICAgICogQHBhcmFtIGVsZW1lbnQgVGhlIGVsZW1lbnQgdG8gYmluZCBhIGxpc3RlbmVyIHRvXG4gICAgICogQHBhcmFtIHR5cGUgVGhlIHR5cGUgb2YgZXZlbnQgdG8gbGlzdGVuIHRvXG4gICAgICogQHBhcmFtIGxpc3RlbmVyIFRoZSBldmVudCBsaXN0ZW5lciB0byBjYWxsIHdoZW4gdGhlIGV2ZW50IGlzIHRyaWdnZXJlZFxuICAgICAqIEBwYXJhbSB1c2VDYXB0dXJlIElmIHRydWUsIHJ1biB0aGUgbGlzdGVuZXIgaW4gdGhlIGNhcHR1cmUgcGhhc2Ugb2YgdGhlIGV2ZW50XG4gICAgICovXG4gICAgZXhwb3J0IGZ1bmN0aW9uIG9uY2UoZWxlbWVudDpIVE1MRWxlbWVudCwgdHlwZTogc3RyaW5nLCBsaXN0ZW5lcjogRXZlbnRMaXN0ZW5lck9yRXZlbnRMaXN0ZW5lck9iamVjdCwgdXNlQ2FwdHVyZT86IGJvb2xlYW4pOiB2b2lkO1xuICAgIGV4cG9ydCBmdW5jdGlvbiBvbmNlKGVsZW1lbnQ6SFRNTEVsZW1lbnQsIHR5cGU6IHN0cmluZywgbGlzdGVuZXI6IEV2ZW50TGlzdGVuZXJPckV2ZW50TGlzdGVuZXJPYmplY3QsIHVzZUNhcHR1cmU/OiBib29sZWFuKTogdm9pZCB7XG4gICAgICAgIGxldCBvbmNlTGlzdGVuZXI6RXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uIChldnQpIHtcbiAgICAgICAgICAgIGVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcih0eXBlLCBvbmNlTGlzdGVuZXIsIHVzZUNhcHR1cmUpO1xuXG4gICAgICAgICAgICBpZiAodHlwZW9mIGxpc3RlbmVyID09PSAnb2JqZWN0JykgbGlzdGVuZXIgPSBsaXN0ZW5lci5oYW5kbGVFdmVudDtcblxuICAgICAgICAgICAgcmV0dXJuIGxpc3RlbmVyLmNhbGwodGhpcywgZXZ0KTtcbiAgICAgICAgfTtcblxuICAgICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIodHlwZSwgb25jZUxpc3RlbmVyLCB1c2VDYXB0dXJlKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBkb2N1bWVudCB0aGF0IHRoZSBlbGVtZW50IGlzIGEgcGFydCBvZiAoaWYgdGhlcmUgaXMgb25lKVxuICAgICAqIEBwYXJhbSBlbGVtZW50IFRoZSBlbGVtZW50XG4gICAgICovXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGdldERvY3VtZW50KGVsZW1lbnQ6SFRNTEVsZW1lbnQpOkRvY3VtZW50IHtcbiAgICAgICAgcmV0dXJuIGVsZW1lbnQub3duZXJEb2N1bWVudDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSB3aW5kb3cgdGhhdCB0aGUgZWxlbWVudCBpcyBhIHBhcnQgb2YgKGlmIHRoZXJlIGlzIG9uZSlcbiAgICAgKiBAcGFyYW0gZWxlbWVudCBUaGUgZWxlbWVudFxuICAgICAqL1xuICAgIGV4cG9ydCBmdW5jdGlvbiBnZXRXaW5kb3coZWxlbWVudDpIVE1MRWxlbWVudCk6V2luZG93IHtcbiAgICAgICAgcmV0dXJuIGdldERvY3VtZW50KGVsZW1lbnQpLmRlZmF1bHRWaWV3O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIGNvbnRlbnQgb2YgYW4gZWxlbWVudCB0byBhIHN0cmluZ1xuICAgICAqIEBwYXJhbSBlbGVtZW50IFRoZSBlbGVtZW50XG4gICAgICogQHBhcmFtIHRleHQgVGhlIHRleHRcbiAgICAgKiBAcmV0dXJucyBUaGUgZWxlbWVudCB0aGF0IHdhcyBwYXNzZWQgaW5cbiAgICAgKi9cbiAgICBleHBvcnQgZnVuY3Rpb24gc2V0VGV4dChlbGVtZW50OkhUTUxFbGVtZW50LCB0ZXh0OnN0cmluZyk6SFRNTEVsZW1lbnQge1xuICAgICAgICBlbXB0eShlbGVtZW50KTtcbiAgICAgICAgZWxlbWVudC5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSh0ZXh0KSk7XG4gICAgICAgIHJldHVybiBlbGVtZW50O1xuICAgIH1cbn0iXX0=

var RideStylerShowcase;
(function (RideStylerShowcase) {
    var NumberHelper;
    (function (NumberHelper) {
        /**
         * Returns the number bounded to a range
         * @param number The number to bound
         * @param min The minimum allowable number
         * @param max The maximum allowable number
         */
        function bound(number, min, max) {
            return number < min ? min : number > max ? max : number;
        }
        NumberHelper.bound = bound;
        /**
         * Extend a number range with a number
         * @param number The number to extend the range with
         * @param range The range to extend
         *
         * @returns The range object that was passed in extended by the number
         */
        function extendRange(number, range) {
            if (!range) range = {
                min: Infinity,
                max: -Infinity
            };
            if (number < range.min) range.min = number;
            if (number > range.max) range.max = number;
            return range;
        }
        NumberHelper.extendRange = extendRange;
    })(NumberHelper = RideStylerShowcase.NumberHelper || (RideStylerShowcase.NumberHelper = {}));
})(RideStylerShowcase || (RideStylerShowcase = {}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9zY3JpcHRzL2hlbHBlcnMvTnVtYmVySGVscGVyLnRzIl0sIm5hbWVzIjpbIlJpZGVTdHlsZXJTaG93Y2FzZSIsIk51bWJlckhlbHBlciIsImJvdW5kIiwibnVtYmVyIiwibWluIiwibWF4IiwiZXh0ZW5kUmFuZ2UiLCJyYW5nZSIsIkluZmluaXR5Il0sIm1hcHBpbmdzIjoiQUFBQSxJQUFVQSxrQkFBVjtBQUFBLENBQUEsVUFBVUEsa0JBQVYsRUFBNEI7QUFBQyxRQUFBQyxZQUFBO0FBQUEsS0FBQSxVQUFBQSxZQUFBLEVBQVk7QUFDckM7Ozs7OztBQU1BLGlCQUFBQyxLQUFBLENBQXNCQyxNQUF0QixFQUFxQ0MsR0FBckMsRUFBaURDLEdBQWpELEVBQTJEO0FBQ3ZELG1CQUFPRixTQUFTQyxHQUFULEdBQWVBLEdBQWYsR0FBc0JELFNBQVNFLEdBQVQsR0FBZUEsR0FBZixHQUFxQkYsTUFBbEQ7QUFDSDtBQUZlRixxQkFBQUMsS0FBQSxHQUFLQSxLQUFMO0FBSWhCOzs7Ozs7O0FBT0EsaUJBQUFJLFdBQUEsQ0FBNEJILE1BQTVCLEVBQTJDSSxLQUEzQyxFQUFzRDtBQUNsRCxnQkFBSSxDQUFDQSxLQUFMLEVBQVlBLFFBQVE7QUFDaEJILHFCQUFLSSxRQURXO0FBRWhCSCxxQkFBSyxDQUFDRztBQUZVLGFBQVI7QUFLWixnQkFBSUwsU0FBU0ksTUFBTUgsR0FBbkIsRUFBd0JHLE1BQU1ILEdBQU4sR0FBWUQsTUFBWjtBQUN4QixnQkFBSUEsU0FBU0ksTUFBTUYsR0FBbkIsRUFBd0JFLE1BQU1GLEdBQU4sR0FBWUYsTUFBWjtBQUV4QixtQkFBT0ksS0FBUDtBQUNIO0FBVmVOLHFCQUFBSyxXQUFBLEdBQVdBLFdBQVg7QUFnQm5CLEtBbEM0QixFQUFBTCxlQUFBRCxtQkFBQUMsWUFBQSxLQUFBRCxtQkFBQUMsWUFBQSxHQUFZLEVBQVosQ0FBQTtBQWtDNUIsQ0FsQ0QsRUFBVUQsdUJBQUFBLHFCQUFrQixFQUFsQixDQUFWIiwiZmlsZSI6InNjcmlwdHMvaGVscGVycy9OdW1iZXJIZWxwZXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyJuYW1lc3BhY2UgUmlkZVN0eWxlclNob3djYXNlLk51bWJlckhlbHBlciB7XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgbnVtYmVyIGJvdW5kZWQgdG8gYSByYW5nZVxuICAgICAqIEBwYXJhbSBudW1iZXIgVGhlIG51bWJlciB0byBib3VuZFxuICAgICAqIEBwYXJhbSBtaW4gVGhlIG1pbmltdW0gYWxsb3dhYmxlIG51bWJlclxuICAgICAqIEBwYXJhbSBtYXggVGhlIG1heGltdW0gYWxsb3dhYmxlIG51bWJlclxuICAgICAqL1xuICAgIGV4cG9ydCBmdW5jdGlvbiBib3VuZChudW1iZXI6bnVtYmVyLCBtaW46bnVtYmVyLCBtYXg6bnVtYmVyKTpudW1iZXIge1xuICAgICAgICByZXR1cm4gbnVtYmVyIDwgbWluID8gbWluIDogKG51bWJlciA+IG1heCA/IG1heCA6IG51bWJlcik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRXh0ZW5kIGEgbnVtYmVyIHJhbmdlIHdpdGggYSBudW1iZXJcbiAgICAgKiBAcGFyYW0gbnVtYmVyIFRoZSBudW1iZXIgdG8gZXh0ZW5kIHRoZSByYW5nZSB3aXRoXG4gICAgICogQHBhcmFtIHJhbmdlIFRoZSByYW5nZSB0byBleHRlbmRcbiAgICAgKiBcbiAgICAgKiBAcmV0dXJucyBUaGUgcmFuZ2Ugb2JqZWN0IHRoYXQgd2FzIHBhc3NlZCBpbiBleHRlbmRlZCBieSB0aGUgbnVtYmVyXG4gICAgICovXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGV4dGVuZFJhbmdlKG51bWJlcjpudW1iZXIsIHJhbmdlOlJhbmdlKTpSYW5nZSB7XG4gICAgICAgIGlmICghcmFuZ2UpIHJhbmdlID0ge1xuICAgICAgICAgICAgbWluOiBJbmZpbml0eSxcbiAgICAgICAgICAgIG1heDogLUluZmluaXR5XG4gICAgICAgIH07XG5cbiAgICAgICAgaWYgKG51bWJlciA8IHJhbmdlLm1pbikgcmFuZ2UubWluID0gbnVtYmVyO1xuICAgICAgICBpZiAobnVtYmVyID4gcmFuZ2UubWF4KSByYW5nZS5tYXggPSBudW1iZXI7XG5cbiAgICAgICAgcmV0dXJuIHJhbmdlO1xuICAgIH1cblxuICAgIGV4cG9ydCBpbnRlcmZhY2UgUmFuZ2Uge1xuICAgICAgICBtaW46IG51bWJlcjtcbiAgICAgICAgbWF4OiBudW1iZXI7XG4gICAgfVxufSJdfQ==

var RideStylerShowcase;
(function (RideStylerShowcase) {
    var ObjectHelper = void 0;
    (function (ObjectHelper) {
        function assign(target) {
            if (target == null) throw new TypeError("Cannot convert undefined or null to object");
            var to = Object(target);

            for (var _len = arguments.length, assignObjects = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
                assignObjects[_key - 1] = arguments[_key];
            }

            var _iteratorNormalCompletion = true;
            var _didIteratorError = false;
            var _iteratorError = undefined;

            try {
                for (var _iterator = assignObjects[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
                    var source = _step.value;

                    if (!source) continue;
                    for (var key in source) {
                        if (Object.prototype.hasOwnProperty.call(source, key)) to[key] = source[key];
                    }
                }
            } catch (err) {
                _didIteratorError = true;
                _iteratorError = err;
            } finally {
                try {
                    if (!_iteratorNormalCompletion && _iterator.return) {
                        _iterator.return();
                    }
                } finally {
                    if (_didIteratorError) {
                        throw _iteratorError;
                    }
                }
            }

            return to;
        }
        ObjectHelper.assign = assign;
        function copy(target) {
            return assign({}, target);
        }
        ObjectHelper.copy = copy;
        /**
         * Returns all of the keys for own properties on an object
         * @param target The object
         */
        function getKeys(target) {
            var keys = [];
            for (var key in target) {
                if (target.hasOwnProperty(key)) keys.push(key);
            }return keys;
        }
        ObjectHelper.getKeys = getKeys;
        /**
         * Returns all of the values for own properties on an object
         * @param target The object
         */
        function getValues(target) {
            var values = [];
            for (var key in target) {
                if (target.hasOwnProperty(key)) values.push(target[key]);
            }return values;
        }
        ObjectHelper.getValues = getValues;
    })(ObjectHelper = RideStylerShowcase.ObjectHelper || (RideStylerShowcase.ObjectHelper = {}));
})(RideStylerShowcase || (RideStylerShowcase = {}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9zY3JpcHRzL2hlbHBlcnMvT2JqZWN0SGVscGVyLnRzIl0sIm5hbWVzIjpbIlJpZGVTdHlsZXJTaG93Y2FzZSIsIk9iamVjdEhlbHBlciIsImFzc2lnbiIsInRhcmdldCIsIlR5cGVFcnJvciIsInRvIiwiT2JqZWN0IiwiYXNzaWduT2JqZWN0cyIsInNvdXJjZSIsImtleSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsImNvcHkiLCJnZXRLZXlzIiwia2V5cyIsInB1c2giLCJnZXRWYWx1ZXMiLCJ2YWx1ZXMiXSwibWFwcGluZ3MiOiJBQUFBLElBQVVBLGtCQUFWO0FBQUEsQ0FBQSxVQUFVQSxrQkFBVixFQUE0QjtBQUN4QixRQUFpQkMscUJBQWpCO0FBQUEsS0FBQSxVQUFpQkEsWUFBakIsRUFBNkI7QUFTekIsaUJBQUFDLE1BQUEsQ0FBdUJDLE1BQXZCLEVBQStEO0FBQzNELGdCQUFJQSxVQUFVLElBQWQsRUFBb0IsTUFBTSxJQUFJQyxTQUFKLENBQWMsNENBQWQsQ0FBTjtBQUVwQixnQkFBSUMsS0FBWUMsT0FBT0gsTUFBUCxDQUFoQjs7QUFIMkQsOENBQXRCSSxhQUFzQjtBQUF0QkEsNkJBQXNCO0FBQUE7O0FBQUE7QUFBQTtBQUFBOztBQUFBO0FBSzNELHFDQUFtQkEsYUFBbkIsOEhBQWtDO0FBQUEsd0JBQXpCQyxNQUF5Qjs7QUFDOUIsd0JBQUksQ0FBQ0EsTUFBTCxFQUFhO0FBRWIseUJBQUssSUFBSUMsR0FBVCxJQUFnQkQsTUFBaEI7QUFDSSw0QkFBSUYsT0FBT0ksU0FBUCxDQUFpQkMsY0FBakIsQ0FBZ0NDLElBQWhDLENBQXFDSixNQUFyQyxFQUE2Q0MsR0FBN0MsQ0FBSixFQUNJSixHQUFHSSxHQUFILElBQVVELE9BQU9DLEdBQVAsQ0FBVjtBQUZSO0FBR0g7QUFYMEQ7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7QUFhM0QsbUJBQU9KLEVBQVA7QUFDSDtBQWRlSixxQkFBQUMsTUFBQSxHQUFNQSxNQUFOO0FBZ0JoQixpQkFBQVcsSUFBQSxDQUF3QlYsTUFBeEIsRUFBZ0M7QUFDNUIsbUJBQU9ELE9BQU8sRUFBUCxFQUFXQyxNQUFYLENBQVA7QUFDSDtBQUZlRixxQkFBQVksSUFBQSxHQUFJQSxJQUFKO0FBSWhCOzs7O0FBSUEsaUJBQUFDLE9BQUEsQ0FBd0JYLE1BQXhCLEVBQXFDO0FBQ2pDLGdCQUFJWSxPQUFnQixFQUFwQjtBQUVBLGlCQUFLLElBQUlOLEdBQVQsSUFBZ0JOLE1BQWhCO0FBQ0ksb0JBQUlBLE9BQU9RLGNBQVAsQ0FBc0JGLEdBQXRCLENBQUosRUFDSU0sS0FBS0MsSUFBTCxDQUFVUCxHQUFWO0FBRlIsYUFJQSxPQUFPTSxJQUFQO0FBQ0g7QUFSZWQscUJBQUFhLE9BQUEsR0FBT0EsT0FBUDtBQVVoQjs7OztBQUlBLGlCQUFBRyxTQUFBLENBQTZCZCxNQUE3QixFQUVDO0FBQ0csZ0JBQUllLFNBQWEsRUFBakI7QUFFQSxpQkFBSyxJQUFJVCxHQUFULElBQWdCTixNQUFoQjtBQUNJLG9CQUFJQSxPQUFPUSxjQUFQLENBQXNCRixHQUF0QixDQUFKLEVBQ0lTLE9BQU9GLElBQVAsQ0FBWWIsT0FBT00sR0FBUCxDQUFaO0FBRlIsYUFJQSxPQUFPUyxNQUFQO0FBQ0g7QUFWZWpCLHFCQUFBZ0IsU0FBQSxHQUFTQSxTQUFUO0FBV25CLEtBMURELEVBQWlCaEIsZUFBQUQsbUJBQUFDLFlBQUEsS0FBQUQsbUJBQUFDLFlBQUEsR0FBWSxFQUFaLENBQWpCO0FBMkRILENBNURELEVBQVVELHVCQUFBQSxxQkFBa0IsRUFBbEIsQ0FBViIsImZpbGUiOiJzY3JpcHRzL2hlbHBlcnMvT2JqZWN0SGVscGVyLmpzIiwic291cmNlc0NvbnRlbnQiOlsibmFtZXNwYWNlIFJpZGVTdHlsZXJTaG93Y2FzZSB7XG4gICAgZXhwb3J0IG5hbWVzcGFjZSBPYmplY3RIZWxwZXIge1xuICAgICAgICAvKipcbiAgICAgICAgICogQ29weSBhbGwgZW51bWVyYWJsZSBvd24gcHJvcGVydGllcyBmcm9tIG9uZSBvciBtb3JlIHNvdXJjZSBvYmplY3RzIHRvIGEgdGFyZ2V0IG9iamVjdFxuICAgICAgICAgKiBAcGFyYW0gdGFyZ2V0IFRoZSB0YXJnZXQgb2JqZWN0XG4gICAgICAgICAqIEBwYXJhbSBhc3NpZ25PYmplY3RzIFRoZSBzb3VyY2Ugb2JqZWN0KHMpXG4gICAgICAgICAqL1xuICAgICAgICBleHBvcnQgZnVuY3Rpb24gYXNzaWduPFQxLFQyPih0YXJnZXQ6VDEsIC4uLmFzc2lnbk9iamVjdHM6VDJbXSkgOiBUMSAmIFQyO1xuICAgICAgICBleHBvcnQgZnVuY3Rpb24gYXNzaWduPFQ+KHRhcmdldDpULCAuLi5hc3NpZ25PYmplY3RzOlRbXSk6IFQ7XG4gICAgICAgIGV4cG9ydCBmdW5jdGlvbiBhc3NpZ24odGFyZ2V0Om9iamVjdCwgLi4uYXNzaWduT2JqZWN0czpvYmplY3RbXSk6b2JqZWN0O1xuICAgICAgICBleHBvcnQgZnVuY3Rpb24gYXNzaWduKHRhcmdldDpvYmplY3QsIC4uLmFzc2lnbk9iamVjdHM6b2JqZWN0W10pOm9iamVjdCB7XG4gICAgICAgICAgICBpZiAodGFyZ2V0ID09IG51bGwpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY29udmVydCB1bmRlZmluZWQgb3IgbnVsbCB0byBvYmplY3RcIik7XG5cbiAgICAgICAgICAgIGxldCB0bzpvYmplY3QgPSBPYmplY3QodGFyZ2V0KTtcblxuICAgICAgICAgICAgZm9yIChsZXQgc291cmNlIG9mIGFzc2lnbk9iamVjdHMpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXNvdXJjZSkgY29udGludWU7XG5cbiAgICAgICAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gc291cmNlKSBcbiAgICAgICAgICAgICAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpXG4gICAgICAgICAgICAgICAgICAgICAgICB0b1trZXldID0gc291cmNlW2tleV07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiB0bztcbiAgICAgICAgfVxuXG4gICAgICAgIGV4cG9ydCBmdW5jdGlvbiBjb3B5PFQ+KHRhcmdldDpUKTpUIHtcbiAgICAgICAgICAgIHJldHVybiBhc3NpZ24oe30sIHRhcmdldCk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogUmV0dXJucyBhbGwgb2YgdGhlIGtleXMgZm9yIG93biBwcm9wZXJ0aWVzIG9uIGFuIG9iamVjdFxuICAgICAgICAgKiBAcGFyYW0gdGFyZ2V0IFRoZSBvYmplY3RcbiAgICAgICAgICovXG4gICAgICAgIGV4cG9ydCBmdW5jdGlvbiBnZXRLZXlzKHRhcmdldDpvYmplY3QpOnN0cmluZ1tdIHtcbiAgICAgICAgICAgIGxldCBrZXlzOnN0cmluZ1tdID0gW107XG5cbiAgICAgICAgICAgIGZvciAodmFyIGtleSBpbiB0YXJnZXQpXG4gICAgICAgICAgICAgICAgaWYgKHRhcmdldC5oYXNPd25Qcm9wZXJ0eShrZXkpKVxuICAgICAgICAgICAgICAgICAgICBrZXlzLnB1c2goa2V5KTtcblxuICAgICAgICAgICAgcmV0dXJuIGtleXM7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogUmV0dXJucyBhbGwgb2YgdGhlIHZhbHVlcyBmb3Igb3duIHByb3BlcnRpZXMgb24gYW4gb2JqZWN0XG4gICAgICAgICAqIEBwYXJhbSB0YXJnZXQgVGhlIG9iamVjdFxuICAgICAgICAgKi9cbiAgICAgICAgZXhwb3J0IGZ1bmN0aW9uIGdldFZhbHVlczxUPih0YXJnZXQ6e1xuICAgICAgICAgICAgW2s6c3RyaW5nXTpUO1xuICAgICAgICB9KTpUW10ge1xuICAgICAgICAgICAgbGV0IHZhbHVlczpUW10gPSBbXTtcblxuICAgICAgICAgICAgZm9yIChsZXQga2V5IGluIHRhcmdldClcbiAgICAgICAgICAgICAgICBpZiAodGFyZ2V0Lmhhc093blByb3BlcnR5KGtleSkpXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlcy5wdXNoKHRhcmdldFtrZXldKTtcblxuICAgICAgICAgICAgcmV0dXJuIHZhbHVlcztcbiAgICAgICAgfVxuICAgIH1cbn0iXX0=

var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

var RideStylerShowcase;
(function (RideStylerShowcase) {
    var PromiseHelper;
    (function (PromiseHelper) {
        function all(promises) {
            var results = [];
            var merged = RideStylerShowcase.ArrayHelper.reduce(promises, function (accumulator, currentPromise) {
                return then(then(accumulator, function () {
                    return currentPromise;
                }), function (r) {
                    return results.push(r);
                });
            }, resolved(null));
            Promise.all;
            return then(merged, function () {
                return results;
            });
        }
        PromiseHelper.all = all;
        /**
        * Attaches callbacks for the resolution and/or rejection of the Promise.
        * @param onfulfilled The callback to execute when the Promise is resolved.
        * @param onrejected The callback to execute when the Promise is rejected.
        * @returns A Promise for the completion of which ever callback is executed.
        */
        function then(promise, onfulfilled, onrejected) {
            var returnPromise = ridestyler.promise();
            promise.done(function (result) {
                if (typeof onfulfilled === 'function') {
                    var onfulfilledResult = onfulfilled(result);
                    if (isPromise(onfulfilledResult)) {
                        // Resolve the promise when the returned promise is resolved
                        onfulfilledResult.done(function (result) {
                            return returnPromise.resolve(result);
                        }).fail(function (result) {
                            return returnPromise.reject(result);
                        });
                    } else {
                        // Resolve the promise with the returned value
                        returnPromise.resolve(onfulfilledResult);
                    }
                } else {
                    returnPromise.resolve(result);
                }
            });
            promise.fail(function (result) {
                if (typeof onrejected === 'function') {
                    var onrejectedResult = onrejected(result);
                    if (isPromise(onrejectedResult)) {
                        // Resolve the promise when the returned promise is resolved
                        onrejectedResult.done(function (result) {
                            return returnPromise.resolve(result);
                        }).fail(function (result) {
                            return returnPromise.reject(result);
                        });
                    } else {
                        returnPromise.resolve(onrejectedResult);
                    }
                } else {
                    returnPromise.reject(result);
                }
            });
            return returnPromise;
        }
        PromiseHelper.then = then;
        /**
         * Returns a new resolved promise with an optional value
         * @param value Optionally, a value to resolve the promise with
         */
        function resolved(value) {
            var promise = ridestyler.promise();
            promise.resolve(value);
            return promise;
        }
        PromiseHelper.resolved = resolved;
        /**
         * Tests an object for a RidestylerPromise-like interface, testing for
         * done, fail and always functions.
         * @param o The object to test
         */
        function isPromise(o) {
            return (typeof o === 'undefined' ? 'undefined' : _typeof(o)) === 'object' && typeof o.done === 'function' && typeof o.fail === 'function' && typeof o.always === 'function';
        }
        PromiseHelper.isPromise = isPromise;
    })(PromiseHelper = RideStylerShowcase.PromiseHelper || (RideStylerShowcase.PromiseHelper = {}));
})(RideStylerShowcase || (RideStylerShowcase = {}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9zY3JpcHRzL2hlbHBlcnMvUHJvbWlzZUhlbHBlci50cyJdLCJuYW1lcyI6WyJSaWRlU3R5bGVyU2hvd2Nhc2UiLCJQcm9taXNlSGVscGVyIiwiYWxsIiwicHJvbWlzZXMiLCJyZXN1bHRzIiwibWVyZ2VkIiwiQXJyYXlIZWxwZXIiLCJyZWR1Y2UiLCJhY2N1bXVsYXRvciIsImN1cnJlbnRQcm9taXNlIiwidGhlbiIsInB1c2giLCJyIiwicmVzb2x2ZWQiLCJQcm9taXNlIiwicHJvbWlzZSIsIm9uZnVsZmlsbGVkIiwib25yZWplY3RlZCIsInJldHVyblByb21pc2UiLCJyaWRlc3R5bGVyIiwiZG9uZSIsInJlc3VsdCIsIm9uZnVsZmlsbGVkUmVzdWx0IiwiaXNQcm9taXNlIiwicmVzb2x2ZSIsImZhaWwiLCJyZWplY3QiLCJvbnJlamVjdGVkUmVzdWx0IiwidmFsdWUiLCJvIiwiYWx3YXlzIl0sIm1hcHBpbmdzIjoiOztBQUFBLElBQVVBLGtCQUFWO0FBQUEsQ0FBQSxVQUFVQSxrQkFBVixFQUE0QjtBQUFDLFFBQUFDLGFBQUE7QUFBQSxLQUFBLFVBQUFBLGFBQUEsRUFBYTtBQUt0QyxpQkFBQUMsR0FBQSxDQUFvQkMsUUFBcEIsRUFBNEQ7QUFDeEQsZ0JBQU1DLFVBQVUsRUFBaEI7QUFDQSxnQkFBTUMsU0FBU0wsbUJBQUFNLFdBQUEsQ0FBWUMsTUFBWixDQUFtQkosUUFBbkIsRUFBNkIsVUFBVUssV0FBVixFQUF1QkMsY0FBdkIsRUFBcUM7QUFDN0UsdUJBQU9DLEtBQUtBLEtBQUtGLFdBQUwsRUFDUjtBQUFBLDJCQUFNQyxjQUFOO0FBQUEsaUJBRFEsQ0FBTCxFQUVIO0FBQUEsMkJBQUtMLFFBQVFPLElBQVIsQ0FBYUMsQ0FBYixDQUFMO0FBQUEsaUJBRkcsQ0FBUDtBQUdILGFBSmMsRUFJWkMsU0FBUyxJQUFULENBSlksQ0FBZjtBQU1BQyxvQkFBUVosR0FBUjtBQUVBLG1CQUFPUSxLQUFLTCxNQUFMLEVBQWtDO0FBQUEsdUJBQU1ELE9BQU47QUFBQSxhQUFsQyxDQUFQO0FBQ0g7QUFYZUgsc0JBQUFDLEdBQUEsR0FBR0EsR0FBSDtBQWFoQjs7Ozs7O0FBTUEsaUJBQUFRLElBQUEsQ0FBOERLLE9BQTlELEVBQXFHQyxXQUFyRyxFQUFrTUMsVUFBbE0sRUFBZ1I7QUFDNVEsZ0JBQU1DLGdCQUFnQkMsV0FBV0osT0FBWCxFQUF0QjtBQUVBQSxvQkFBUUssSUFBUixDQUFhLFVBQVVDLE1BQVYsRUFBZ0I7QUFDekIsb0JBQUksT0FBT0wsV0FBUCxLQUF1QixVQUEzQixFQUF1QztBQUMvQix3QkFBSU0sb0JBQW9CTixZQUFZSyxNQUFaLENBQXhCO0FBRUEsd0JBQUlFLFVBQVVELGlCQUFWLENBQUosRUFBa0M7QUFDOUI7QUFDQUEsMENBQ0tGLElBREwsQ0FDVTtBQUFBLG1DQUFVRixjQUFjTSxPQUFkLENBQXNCSCxNQUF0QixDQUFWO0FBQUEseUJBRFYsRUFFS0ksSUFGTCxDQUVVO0FBQUEsbUNBQVVQLGNBQWNRLE1BQWQsQ0FBcUJMLE1BQXJCLENBQVY7QUFBQSx5QkFGVjtBQUlILHFCQU5ELE1BTU87QUFDSDtBQUNBSCxzQ0FBY00sT0FBZCxDQUFzQkYsaUJBQXRCO0FBQ0g7QUFDUixpQkFiRCxNQWFPO0FBQ0hKLGtDQUFjTSxPQUFkLENBQXNCSCxNQUF0QjtBQUNIO0FBQ0osYUFqQkQ7QUFtQkFOLG9CQUFRVSxJQUFSLENBQWEsVUFBVUosTUFBVixFQUFnQjtBQUN6QixvQkFBSSxPQUFPSixVQUFQLEtBQXNCLFVBQTFCLEVBQXNDO0FBQzlCLHdCQUFJVSxtQkFBbUJWLFdBQVdJLE1BQVgsQ0FBdkI7QUFFQSx3QkFBSUUsVUFBVUksZ0JBQVYsQ0FBSixFQUFpQztBQUM3QjtBQUNBQSx5Q0FDS1AsSUFETCxDQUNVO0FBQUEsbUNBQVVGLGNBQWNNLE9BQWQsQ0FBc0JILE1BQXRCLENBQVY7QUFBQSx5QkFEVixFQUVLSSxJQUZMLENBRVU7QUFBQSxtQ0FBVVAsY0FBY1EsTUFBZCxDQUFxQkwsTUFBckIsQ0FBVjtBQUFBLHlCQUZWO0FBSUgscUJBTkQsTUFNTztBQUFFSCxzQ0FBY00sT0FBZCxDQUFzQkcsZ0JBQXRCO0FBQTBDO0FBRTFELGlCQVhELE1BV087QUFDSFQsa0NBQWNRLE1BQWQsQ0FBcUJMLE1BQXJCO0FBQ0g7QUFDSixhQWZEO0FBaUJBLG1CQUFPSCxhQUFQO0FBQ0g7QUF4Q2VqQixzQkFBQVMsSUFBQSxHQUFJQSxJQUFKO0FBMENoQjs7OztBQUlBLGlCQUFBRyxRQUFBLENBQTRCZSxLQUE1QixFQUFvQztBQUNoQyxnQkFBTWIsVUFBVUksV0FBV0osT0FBWCxFQUFoQjtBQUNNQSxvQkFBUVMsT0FBUixDQUFnQkksS0FBaEI7QUFFTixtQkFBT2IsT0FBUDtBQUNIO0FBTGVkLHNCQUFBWSxRQUFBLEdBQVFBLFFBQVI7QUFPaEI7Ozs7O0FBS0EsaUJBQUFVLFNBQUEsQ0FBMEJNLENBQTFCLEVBQWdDO0FBQzVCLG1CQUFPLFFBQU9BLENBQVAseUNBQU9BLENBQVAsT0FBYSxRQUFiLElBQ0EsT0FBT0EsRUFBRVQsSUFBVCxLQUFrQixVQURsQixJQUVBLE9BQU9TLEVBQUVKLElBQVQsS0FBa0IsVUFGbEIsSUFHQSxPQUFPSSxFQUFFQyxNQUFULEtBQW9CLFVBSDNCO0FBSUg7QUFMZTdCLHNCQUFBc0IsU0FBQSxHQUFTQSxTQUFUO0FBTW5CLEtBeEY0QixFQUFBdEIsZ0JBQUFELG1CQUFBQyxhQUFBLEtBQUFELG1CQUFBQyxhQUFBLEdBQWEsRUFBYixDQUFBO0FBd0Y1QixDQXhGRCxFQUFVRCx1QkFBQUEscUJBQWtCLEVBQWxCLENBQVYiLCJmaWxlIjoic2NyaXB0cy9oZWxwZXJzL1Byb21pc2VIZWxwZXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyJuYW1lc3BhY2UgUmlkZVN0eWxlclNob3djYXNlLlByb21pc2VIZWxwZXIge1xyXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGFsbDxUPihwcm9taXNlczogKFQgfCBSaWRlU3R5bGVyUHJvbWlzZTxUPilbXSk6IFJpZGVTdHlsZXJQcm9taXNlPFRbXT47XHJcbiAgICBleHBvcnQgZnVuY3Rpb24gYWxsPFQxLCBUMiwgVDMsIFQ0Pihwcm9taXNlczogW1QxIHwgUmlkZVN0eWxlclByb21pc2U8VDE+LCBUMiB8IFJpZGVTdHlsZXJQcm9taXNlPFQyPiwgVDMgfCBSaWRlU3R5bGVyUHJvbWlzZTxUMz4sIFQ0IHwgUmlkZVN0eWxlclByb21pc2U8VDQ+XSk6IFJpZGVTdHlsZXJQcm9taXNlPFtUMSwgVDIsIFQzLCBUNF0+O1xyXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGFsbDxUMSwgVDIsIFQzPihwcm9taXNlczogW1QxIHwgUmlkZVN0eWxlclByb21pc2U8VDE+LCBUMiB8IFJpZGVTdHlsZXJQcm9taXNlPFQyPiwgVDMgfCBSaWRlU3R5bGVyUHJvbWlzZTxUMz5dKTogUmlkZVN0eWxlclByb21pc2U8W1QxLCBUMiwgVDNdPjtcclxuICAgIGV4cG9ydCBmdW5jdGlvbiBhbGw8VDEsIFQyPihwcm9taXNlczogW1QxIHwgUmlkZVN0eWxlclByb21pc2U8VDE+LCBUMiB8IFJpZGVTdHlsZXJQcm9taXNlPFQyPl0pOiBSaWRlU3R5bGVyUHJvbWlzZTxbVDEsIFQyXT47XHJcbiAgICBleHBvcnQgZnVuY3Rpb24gYWxsKHByb21pc2VzOiAob2JqZWN0IHwgUmlkZVN0eWxlclByb21pc2UpW10pOiBSaWRlU3R5bGVyUHJvbWlzZSB7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0cyA9IFtdO1xyXG4gICAgICAgIGNvbnN0IG1lcmdlZCA9IEFycmF5SGVscGVyLnJlZHVjZShwcm9taXNlcywgZnVuY3Rpb24gKGFjY3VtdWxhdG9yLCBjdXJyZW50UHJvbWlzZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhlbih0aGVuKGFjY3VtdWxhdG9yIGFzIFJpZGVTdHlsZXJQcm9taXNlLCBcclxuICAgICAgICAgICAgICAgICgpID0+IGN1cnJlbnRQcm9taXNlKSwgXHJcbiAgICAgICAgICAgICAgICByID0+IHJlc3VsdHMucHVzaChyKSk7XHJcbiAgICAgICAgfSwgcmVzb2x2ZWQobnVsbCkpO1xyXG5cclxuICAgICAgICBQcm9taXNlLmFsbFxyXG5cclxuICAgICAgICByZXR1cm4gdGhlbihtZXJnZWQgYXMgUmlkZVN0eWxlclByb21pc2UsICgpID0+IHJlc3VsdHMpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgKiBBdHRhY2hlcyBjYWxsYmFja3MgZm9yIHRoZSByZXNvbHV0aW9uIGFuZC9vciByZWplY3Rpb24gb2YgdGhlIFByb21pc2UuXHJcbiAgICAqIEBwYXJhbSBvbmZ1bGZpbGxlZCBUaGUgY2FsbGJhY2sgdG8gZXhlY3V0ZSB3aGVuIHRoZSBQcm9taXNlIGlzIHJlc29sdmVkLlxyXG4gICAgKiBAcGFyYW0gb25yZWplY3RlZCBUaGUgY2FsbGJhY2sgdG8gZXhlY3V0ZSB3aGVuIHRoZSBQcm9taXNlIGlzIHJlamVjdGVkLlxyXG4gICAgKiBAcmV0dXJucyBBIFByb21pc2UgZm9yIHRoZSBjb21wbGV0aW9uIG9mIHdoaWNoIGV2ZXIgY2FsbGJhY2sgaXMgZXhlY3V0ZWQuXHJcbiAgICAqL1xyXG4gICAgZXhwb3J0IGZ1bmN0aW9uIHRoZW48VF9JbiwgRV9Jbj1UX0luLCBUX091dD1UX0luLCBFX091dD1FX0luPihwcm9taXNlOlJpZGVTdHlsZXJQcm9taXNlPFRfSW4sIEVfSW4+LCBvbmZ1bGZpbGxlZD86ICgodmFsdWU6IFRfSW4pID0+IFRfT3V0IHwgUmlkZVN0eWxlclByb21pc2U8VF9PdXQsIEVfT3V0PikgfCB1bmRlZmluZWQgfCBudWxsLCBvbnJlamVjdGVkPzogKChyZWFzb246IEVfSW4pID0+IFRfT3V0IHwgUHJvbWlzZUxpa2U8VF9PdXQ+KSB8IHVuZGVmaW5lZCB8IG51bGwpOiBSaWRlU3R5bGVyUHJvbWlzZTxUX091dCwgRV9PdXQ+IHtcclxuICAgICAgICBjb25zdCByZXR1cm5Qcm9taXNlID0gcmlkZXN0eWxlci5wcm9taXNlPGFueT4oKTtcclxuXHJcbiAgICAgICAgcHJvbWlzZS5kb25lKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBvbmZ1bGZpbGxlZCA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBvbmZ1bGZpbGxlZFJlc3VsdCA9IG9uZnVsZmlsbGVkKHJlc3VsdCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpc1Byb21pc2Uob25mdWxmaWxsZWRSZXN1bHQpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJlc29sdmUgdGhlIHByb21pc2Ugd2hlbiB0aGUgcmV0dXJuZWQgcHJvbWlzZSBpcyByZXNvbHZlZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbmZ1bGZpbGxlZFJlc3VsdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmRvbmUocmVzdWx0ID0+IHJldHVyblByb21pc2UucmVzb2x2ZShyZXN1bHQpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZhaWwocmVzdWx0ID0+IHJldHVyblByb21pc2UucmVqZWN0KHJlc3VsdCkpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBSZXNvbHZlIHRoZSBwcm9taXNlIHdpdGggdGhlIHJldHVybmVkIHZhbHVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVyblByb21pc2UucmVzb2x2ZShvbmZ1bGZpbGxlZFJlc3VsdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuUHJvbWlzZS5yZXNvbHZlKHJlc3VsdCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcHJvbWlzZS5mYWlsKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBvbnJlamVjdGVkID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IG9ucmVqZWN0ZWRSZXN1bHQgPSBvbnJlamVjdGVkKHJlc3VsdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzUHJvbWlzZShvbnJlamVjdGVkUmVzdWx0KSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBSZXNvbHZlIHRoZSBwcm9taXNlIHdoZW4gdGhlIHJldHVybmVkIHByb21pc2UgaXMgcmVzb2x2ZWRcclxuICAgICAgICAgICAgICAgICAgICAgICAgb25yZWplY3RlZFJlc3VsdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmRvbmUocmVzdWx0ID0+IHJldHVyblByb21pc2UucmVzb2x2ZShyZXN1bHQpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZhaWwocmVzdWx0ID0+IHJldHVyblByb21pc2UucmVqZWN0KHJlc3VsdCkpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgeyByZXR1cm5Qcm9taXNlLnJlc29sdmUob25yZWplY3RlZFJlc3VsdCk7IH1cclxuXHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm5Qcm9taXNlLnJlamVjdChyZXN1bHQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuXHJcbiAgICAgICAgcmV0dXJuIHJldHVyblByb21pc2U7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIGEgbmV3IHJlc29sdmVkIHByb21pc2Ugd2l0aCBhbiBvcHRpb25hbCB2YWx1ZVxyXG4gICAgICogQHBhcmFtIHZhbHVlIE9wdGlvbmFsbHksIGEgdmFsdWUgdG8gcmVzb2x2ZSB0aGUgcHJvbWlzZSB3aXRoXHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBmdW5jdGlvbiByZXNvbHZlZDxUPih2YWx1ZT86VCk6IFJpZGVTdHlsZXJQcm9taXNlPFQsIG5ldmVyPiB7XHJcbiAgICAgICAgY29uc3QgcHJvbWlzZSA9IHJpZGVzdHlsZXIucHJvbWlzZTxULCBuZXZlcj4oKTtcclxuICAgICAgICAgICAgICBwcm9taXNlLnJlc29sdmUodmFsdWUpO1xyXG5cclxuICAgICAgICByZXR1cm4gcHJvbWlzZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFRlc3RzIGFuIG9iamVjdCBmb3IgYSBSaWRlc3R5bGVyUHJvbWlzZS1saWtlIGludGVyZmFjZSwgdGVzdGluZyBmb3JcclxuICAgICAqIGRvbmUsIGZhaWwgYW5kIGFsd2F5cyBmdW5jdGlvbnMuXHJcbiAgICAgKiBAcGFyYW0gbyBUaGUgb2JqZWN0IHRvIHRlc3RcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGlzUHJvbWlzZShvOiBhbnkpOiBvIGlzIFJpZGVTdHlsZXJQcm9taXNlIHtcclxuICAgICAgICByZXR1cm4gdHlwZW9mIG8gPT09ICdvYmplY3QnICYmXHJcbiAgICAgICAgICAgICAgIHR5cGVvZiBvLmRvbmUgPT09ICdmdW5jdGlvbicgJiYgXHJcbiAgICAgICAgICAgICAgIHR5cGVvZiBvLmZhaWwgPT09ICdmdW5jdGlvbicgJiZcclxuICAgICAgICAgICAgICAgdHlwZW9mIG8uYWx3YXlzID09PSAnZnVuY3Rpb24nO1xyXG4gICAgfVxyXG59Il19

var RideStylerShowcase;
(function (RideStylerShowcase) {
    var ScrollHelper;
    (function (ScrollHelper) {
        var scrollEvent = void 0;
        var mousewheelEventScale = -1 / 40;
        {
            var testElement = document.createElement('div');
            scrollEvent = 'onwheel' in testElement ? 'wheel' : // Modern browers support "wheel"
            document.onmousewheel !== undefined ? 'mousewheel' : // Webkit and IE support at least "mousewheel"
            'MozMousePixelScroll'; // older Firefox
        }
        function attachWheelListener(element, listener) {
            if (scrollEvent === 'wheel') {
                element.addEventListener('wheel', function (event) {
                    var normalizedEvent = RideStylerShowcase.ObjectHelper.assign(event, {
                        originalEvent: event
                    });
                    return listener(normalizedEvent);
                });
                return;
            }
            element.addEventListener(scrollEvent, function (event) {
                if (!event) event = window.event;
                var normalizedEvent = {
                    originalEvent: event,
                    target: event.target || event.srcElement,
                    type: 'wheel',
                    deltaMode: event.type === 'MozMousePixelScroll' ? 0 : 1,
                    deltaX: 0,
                    deltaY: 0,
                    deltaZ: 0,
                    preventDefault: function preventDefault() {
                        if (typeof event.preventDefault === 'function') event.preventDefault();else {
                            event.returnValue = false;
                        }
                    }
                };
                if (scrollEvent === 'mousewheel') {
                    normalizedEvent.deltaY = mousewheelEventScale * event.wheelDelta;
                    if (event.wheelDeltaX) normalizedEvent.deltaX = mousewheelEventScale * event.wheelDeltaX;
                } else {
                    normalizedEvent.deltaY = event.detail;
                }
                return listener(normalizedEvent);
            });
        }
        ScrollHelper.attachWheelListener = attachWheelListener;
    })(ScrollHelper = RideStylerShowcase.ScrollHelper || (RideStylerShowcase.ScrollHelper = {}));
})(RideStylerShowcase || (RideStylerShowcase = {}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9zY3JpcHRzL2hlbHBlcnMvU2Nyb2xsSGVscGVyLnRzIl0sIm5hbWVzIjpbIlJpZGVTdHlsZXJTaG93Y2FzZSIsIlNjcm9sbEhlbHBlciIsInNjcm9sbEV2ZW50IiwibW91c2V3aGVlbEV2ZW50U2NhbGUiLCJ0ZXN0RWxlbWVudCIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsIm9ubW91c2V3aGVlbCIsInVuZGVmaW5lZCIsImF0dGFjaFdoZWVsTGlzdGVuZXIiLCJlbGVtZW50IiwibGlzdGVuZXIiLCJhZGRFdmVudExpc3RlbmVyIiwiZXZlbnQiLCJub3JtYWxpemVkRXZlbnQiLCJPYmplY3RIZWxwZXIiLCJhc3NpZ24iLCJvcmlnaW5hbEV2ZW50Iiwid2luZG93IiwidGFyZ2V0Iiwic3JjRWxlbWVudCIsInR5cGUiLCJkZWx0YU1vZGUiLCJkZWx0YVgiLCJkZWx0YVkiLCJkZWx0YVoiLCJwcmV2ZW50RGVmYXVsdCIsInJldHVyblZhbHVlIiwid2hlZWxEZWx0YSIsIndoZWVsRGVsdGFYIiwiZGV0YWlsIl0sIm1hcHBpbmdzIjoiQUFBQSxJQUFVQSxrQkFBVjtBQUFBLENBQUEsVUFBVUEsa0JBQVYsRUFBNEI7QUFBQyxRQUFBQyxZQUFBO0FBQUEsS0FBQSxVQUFBQSxZQUFBLEVBQVk7QUFDckMsWUFBSUMsb0JBQUo7QUFDQSxZQUFNQyx1QkFBdUIsQ0FBQyxDQUFELEdBQUcsRUFBaEM7QUFFQTtBQUNJLGdCQUFNQyxjQUFjQyxTQUFTQyxhQUFULENBQXVCLEtBQXZCLENBQXBCO0FBRUFKLDBCQUFjLGFBQWFFLFdBQWIsR0FBMkIsT0FBM0IsR0FBcUQ7QUFDckRDLHFCQUFTRSxZQUFULEtBQTBCQyxTQUExQixHQUFzQyxZQUF0QyxHQUFxRDtBQUNyRCxpQ0FGZCxDQUhKLENBS3VFO0FBQ3RFO0FBRUQsaUJBQUFDLG1CQUFBLENBQW9DQyxPQUFwQyxFQUF5REMsUUFBekQsRUFBcUc7QUFDakcsZ0JBQUlULGdCQUFnQixPQUFwQixFQUE2QjtBQUN6QlEsd0JBQVFFLGdCQUFSLENBQXlCLE9BQXpCLEVBQWtDLFVBQUNDLEtBQUQsRUFBcUI7QUFDbkQsd0JBQU1DLGtCQUF1Q2QsbUJBQUFlLFlBQUEsQ0FBYUMsTUFBYixDQUFvQkgsS0FBcEIsRUFBMkI7QUFDcEVJLHVDQUFlSjtBQURxRCxxQkFBM0IsQ0FBN0M7QUFJQSwyQkFBT0YsU0FBU0csZUFBVCxDQUFQO0FBQ0gsaUJBTkQ7QUFRQTtBQUNIO0FBRURKLG9CQUFRRSxnQkFBUixDQUF5QlYsV0FBekIsRUFBc0MsVUFBQ1csS0FBRCxFQUFxQjtBQUN2RCxvQkFBSSxDQUFDQSxLQUFMLEVBQVlBLFFBQVFLLE9BQU9MLEtBQWY7QUFFWixvQkFBTUMsa0JBQXVDO0FBQ3pDRyxtQ0FBZUosS0FEMEI7QUFFekNNLDRCQUFRTixNQUFNTSxNQUFOLElBQWdCTixNQUFNTyxVQUZXO0FBR3pDQywwQkFBTSxPQUhtQztBQUl6Q0MsK0JBQVdULE1BQU1RLElBQU4sS0FBZSxxQkFBZixHQUF1QyxDQUF2QyxHQUEyQyxDQUpiO0FBS3pDRSw0QkFBUSxDQUxpQztBQU16Q0MsNEJBQVEsQ0FOaUM7QUFPekNDLDRCQUFRLENBUGlDO0FBU3pDQyxvQ0FBZ0IsMEJBQUs7QUFDakIsNEJBQUksT0FBT2IsTUFBTWEsY0FBYixLQUFnQyxVQUFwQyxFQUFnRGIsTUFBTWEsY0FBTixHQUFoRCxLQUNLO0FBQ0RiLGtDQUFNYyxXQUFOLEdBQW9CLEtBQXBCO0FBQ0g7QUFDSjtBQWR3QyxpQkFBN0M7QUFpQkEsb0JBQUl6QixnQkFBZ0IsWUFBcEIsRUFBa0M7QUFDOUJZLG9DQUFnQlUsTUFBaEIsR0FBeUJyQix1QkFBdUJVLE1BQU1lLFVBQXREO0FBRUEsd0JBQUlmLE1BQU1nQixXQUFWLEVBQ0lmLGdCQUFnQlMsTUFBaEIsR0FBeUJwQix1QkFBdUJVLE1BQU1nQixXQUF0RDtBQUNQLGlCQUxELE1BS087QUFDSGYsb0NBQWdCVSxNQUFoQixHQUF5QlgsTUFBTWlCLE1BQS9CO0FBQ0g7QUFFRCx1QkFBT25CLFNBQVNHLGVBQVQsQ0FBUDtBQUNILGFBOUJEO0FBK0JIO0FBNUNlYixxQkFBQVEsbUJBQUEsR0FBbUJBLG1CQUFuQjtBQXdEbkIsS0FwRTRCLEVBQUFSLGVBQUFELG1CQUFBQyxZQUFBLEtBQUFELG1CQUFBQyxZQUFBLEdBQVksRUFBWixDQUFBO0FBb0U1QixDQXBFRCxFQUFVRCx1QkFBQUEscUJBQWtCLEVBQWxCLENBQVYiLCJmaWxlIjoic2NyaXB0cy9oZWxwZXJzL1Njcm9sbEhlbHBlci5qcyIsInNvdXJjZXNDb250ZW50IjpbIm5hbWVzcGFjZSBSaWRlU3R5bGVyU2hvd2Nhc2UuU2Nyb2xsSGVscGVyIHtcbiAgICBsZXQgc2Nyb2xsRXZlbnQ6J3doZWVsJ3wnbW91c2V3aGVlbCd8J01vek1vdXNlUGl4ZWxTY3JvbGwnO1xuICAgIGNvbnN0IG1vdXNld2hlZWxFdmVudFNjYWxlID0gLTEvNDA7XG5cbiAgICB7XG4gICAgICAgIGNvbnN0IHRlc3RFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cbiAgICAgICAgc2Nyb2xsRXZlbnQgPSAnb253aGVlbCcgaW4gdGVzdEVsZW1lbnQgPyAnd2hlZWwnIDogICAgICAgICAgICAgICAgIC8vIE1vZGVybiBicm93ZXJzIHN1cHBvcnQgXCJ3aGVlbFwiXG4gICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQub25tb3VzZXdoZWVsICE9PSB1bmRlZmluZWQgPyAnbW91c2V3aGVlbCcgOiAvLyBXZWJraXQgYW5kIElFIHN1cHBvcnQgYXQgbGVhc3QgXCJtb3VzZXdoZWVsXCJcbiAgICAgICAgICAgICAgICAgICAgICAnTW96TW91c2VQaXhlbFNjcm9sbCc7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG9sZGVyIEZpcmVmb3hcbiAgICB9XG5cbiAgICBleHBvcnQgZnVuY3Rpb24gYXR0YWNoV2hlZWxMaXN0ZW5lcihlbGVtZW50OkhUTUxFbGVtZW50LCBsaXN0ZW5lcjooZXZlbnQ6Tm9ybWFsaXplZFdoZWVsRXZlbnQpID0+IGFueSkge1xuICAgICAgICBpZiAoc2Nyb2xsRXZlbnQgPT09ICd3aGVlbCcpIHtcbiAgICAgICAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignd2hlZWwnLCAoZXZlbnQ6V2hlZWxFdmVudCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IG5vcm1hbGl6ZWRFdmVudDpOb3JtYWxpemVkV2hlZWxFdmVudCA9IE9iamVjdEhlbHBlci5hc3NpZ24oZXZlbnQsIHtcbiAgICAgICAgICAgICAgICAgICAgb3JpZ2luYWxFdmVudDogZXZlbnRcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIHJldHVybiBsaXN0ZW5lcihub3JtYWxpemVkRXZlbnQpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihzY3JvbGxFdmVudCwgKGV2ZW50OldoZWVsRXZlbnQpID0+IHtcbiAgICAgICAgICAgIGlmICghZXZlbnQpIGV2ZW50ID0gd2luZG93LmV2ZW50IGFzIFdoZWVsRXZlbnQ7XG5cbiAgICAgICAgICAgIGNvbnN0IG5vcm1hbGl6ZWRFdmVudDpOb3JtYWxpemVkV2hlZWxFdmVudCA9IHtcbiAgICAgICAgICAgICAgICBvcmlnaW5hbEV2ZW50OiBldmVudCxcbiAgICAgICAgICAgICAgICB0YXJnZXQ6IGV2ZW50LnRhcmdldCB8fCBldmVudC5zcmNFbGVtZW50LFxuICAgICAgICAgICAgICAgIHR5cGU6ICd3aGVlbCcsXG4gICAgICAgICAgICAgICAgZGVsdGFNb2RlOiBldmVudC50eXBlID09PSAnTW96TW91c2VQaXhlbFNjcm9sbCcgPyAwIDogMSxcbiAgICAgICAgICAgICAgICBkZWx0YVg6IDAsXG4gICAgICAgICAgICAgICAgZGVsdGFZOiAwLFxuICAgICAgICAgICAgICAgIGRlbHRhWjogMCxcblxuICAgICAgICAgICAgICAgIHByZXZlbnREZWZhdWx0OiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgZXZlbnQucHJldmVudERlZmF1bHQgPT09ICdmdW5jdGlvbicpIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQucmV0dXJuVmFsdWUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGlmIChzY3JvbGxFdmVudCA9PT0gJ21vdXNld2hlZWwnKSB7XG4gICAgICAgICAgICAgICAgbm9ybWFsaXplZEV2ZW50LmRlbHRhWSA9IG1vdXNld2hlZWxFdmVudFNjYWxlICogZXZlbnQud2hlZWxEZWx0YTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBpZiAoZXZlbnQud2hlZWxEZWx0YVgpXG4gICAgICAgICAgICAgICAgICAgIG5vcm1hbGl6ZWRFdmVudC5kZWx0YVggPSBtb3VzZXdoZWVsRXZlbnRTY2FsZSAqIGV2ZW50LndoZWVsRGVsdGFYO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBub3JtYWxpemVkRXZlbnQuZGVsdGFZID0gZXZlbnQuZGV0YWlsO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gbGlzdGVuZXIobm9ybWFsaXplZEV2ZW50KTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZXhwb3J0IGludGVyZmFjZSBOb3JtYWxpemVkV2hlZWxFdmVudCB7XG4gICAgICAgIG9yaWdpbmFsRXZlbnQ6IFdoZWVsRXZlbnQ7XG4gICAgICAgIHRhcmdldDogRXZlbnRUYXJnZXQ7XG4gICAgICAgIHR5cGU6IHN0cmluZztcbiAgICAgICAgZGVsdGFNb2RlOiBudW1iZXI7XG4gICAgICAgIGRlbHRhWDogbnVtYmVyO1xuICAgICAgICBkZWx0YVk6IG51bWJlcjtcbiAgICAgICAgZGVsdGFaOiBudW1iZXI7XG4gICAgICAgIHByZXZlbnREZWZhdWx0KCk6IHZvaWQ7XG4gICAgfVxufSJdfQ==

var RideStylerShowcase;
(function (RideStylerShowcase) {
    var StringHelper;
    (function (StringHelper) {
        /**
         * Returns the first word of the specified string
         * @param string The string to get the first word of
         */
        function getFirstWord(string) {
            if (typeof string !== 'string') return undefined;
            return string.trim().substr(0, string.indexOf(' '));
        }
        StringHelper.getFirstWord = getFirstWord;
        /**
         * Returns true if the sequence of elements of searchString converted to a String is the
         * same as the corresponding elements of this object (converted to a String) starting at
         * endPosition – length(this). Otherwise returns false.
         */
        function endsWith(string, ending, index) {
            if (!(index < this.length)) index = this.length;else index |= 0;
            var endingLength = ending.length;
            return string.substr(index - endingLength, endingLength) === ending;
        }
        StringHelper.endsWith = endsWith;
        function escapeRegExp(string) {
            /**
             * Used to match `RegExp`
             * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).
             */
            var reRegExpChar = /[\\^$.*+?()[\]{}|]/g;
            var reHasRegExpChar = RegExp(reRegExpChar.source);
            return string && reHasRegExpChar.test(string) ? string.replace(reRegExpChar, '\\$&') : string;
        }
        StringHelper.escapeRegExp = escapeRegExp;
    })(StringHelper = RideStylerShowcase.StringHelper || (RideStylerShowcase.StringHelper = {}));
})(RideStylerShowcase || (RideStylerShowcase = {}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9zY3JpcHRzL2hlbHBlcnMvU3RyaW5nSGVscGVyLnRzIl0sIm5hbWVzIjpbIlJpZGVTdHlsZXJTaG93Y2FzZSIsIlN0cmluZ0hlbHBlciIsImdldEZpcnN0V29yZCIsInN0cmluZyIsInVuZGVmaW5lZCIsInRyaW0iLCJzdWJzdHIiLCJpbmRleE9mIiwiZW5kc1dpdGgiLCJlbmRpbmciLCJpbmRleCIsImxlbmd0aCIsImVuZGluZ0xlbmd0aCIsImVzY2FwZVJlZ0V4cCIsInJlUmVnRXhwQ2hhciIsInJlSGFzUmVnRXhwQ2hhciIsIlJlZ0V4cCIsInNvdXJjZSIsInRlc3QiLCJyZXBsYWNlIl0sIm1hcHBpbmdzIjoiQUFBQSxJQUFVQSxrQkFBVjtBQUFBLENBQUEsVUFBVUEsa0JBQVYsRUFBNEI7QUFBQyxRQUFBQyxZQUFBO0FBQUEsS0FBQSxVQUFBQSxZQUFBLEVBQVk7QUFDckM7Ozs7QUFJQSxpQkFBQUMsWUFBQSxDQUE2QkMsTUFBN0IsRUFBMEM7QUFDdEMsZ0JBQUksT0FBT0EsTUFBUCxLQUFrQixRQUF0QixFQUFnQyxPQUFPQyxTQUFQO0FBQ2hDLG1CQUFPRCxPQUFPRSxJQUFQLEdBQWNDLE1BQWQsQ0FBcUIsQ0FBckIsRUFBd0JILE9BQU9JLE9BQVAsQ0FBZSxHQUFmLENBQXhCLENBQVA7QUFDSDtBQUhlTixxQkFBQUMsWUFBQSxHQUFZQSxZQUFaO0FBS2hCOzs7OztBQUtBLGlCQUFBTSxRQUFBLENBQXlCTCxNQUF6QixFQUF3Q00sTUFBeEMsRUFBdURDLEtBQXZELEVBQW9FO0FBQ2hFLGdCQUFJLEVBQUVBLFFBQVEsS0FBS0MsTUFBZixDQUFKLEVBQTRCRCxRQUFRLEtBQUtDLE1BQWIsQ0FBNUIsS0FDS0QsU0FBUyxDQUFUO0FBRUwsZ0JBQUlFLGVBQWVILE9BQU9FLE1BQTFCO0FBQ0EsbUJBQU9SLE9BQU9HLE1BQVAsQ0FBY0ksUUFBUUUsWUFBdEIsRUFBb0NBLFlBQXBDLE1BQXNESCxNQUE3RDtBQUNIO0FBTmVSLHFCQUFBTyxRQUFBLEdBQVFBLFFBQVI7QUFRaEIsaUJBQUFLLFlBQUEsQ0FBNkJWLE1BQTdCLEVBQTBDO0FBQ3RDOzs7O0FBSUEsZ0JBQU1XLGVBQWUscUJBQXJCO0FBQ0EsZ0JBQU1DLGtCQUFrQkMsT0FBT0YsYUFBYUcsTUFBcEIsQ0FBeEI7QUFFQSxtQkFBUWQsVUFBVVksZ0JBQWdCRyxJQUFoQixDQUFxQmYsTUFBckIsQ0FBWCxHQUNEQSxPQUFPZ0IsT0FBUCxDQUFlTCxZQUFmLEVBQTZCLE1BQTdCLENBREMsR0FFRFgsTUFGTjtBQUdIO0FBWGVGLHFCQUFBWSxZQUFBLEdBQVlBLFlBQVo7QUFZbkIsS0FuQzRCLEVBQUFaLGVBQUFELG1CQUFBQyxZQUFBLEtBQUFELG1CQUFBQyxZQUFBLEdBQVksRUFBWixDQUFBO0FBbUM1QixDQW5DRCxFQUFVRCx1QkFBQUEscUJBQWtCLEVBQWxCLENBQVYiLCJmaWxlIjoic2NyaXB0cy9oZWxwZXJzL1N0cmluZ0hlbHBlci5qcyIsInNvdXJjZXNDb250ZW50IjpbIm5hbWVzcGFjZSBSaWRlU3R5bGVyU2hvd2Nhc2UuU3RyaW5nSGVscGVyIHtcbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBmaXJzdCB3b3JkIG9mIHRoZSBzcGVjaWZpZWQgc3RyaW5nXG4gICAgICogQHBhcmFtIHN0cmluZyBUaGUgc3RyaW5nIHRvIGdldCB0aGUgZmlyc3Qgd29yZCBvZlxuICAgICAqL1xuICAgIGV4cG9ydCBmdW5jdGlvbiBnZXRGaXJzdFdvcmQoc3RyaW5nOnN0cmluZyk6c3RyaW5nIHtcbiAgICAgICAgaWYgKHR5cGVvZiBzdHJpbmcgIT09ICdzdHJpbmcnKSByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICByZXR1cm4gc3RyaW5nLnRyaW0oKS5zdWJzdHIoMCwgc3RyaW5nLmluZGV4T2YoJyAnKSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHRoZSBzZXF1ZW5jZSBvZiBlbGVtZW50cyBvZiBzZWFyY2hTdHJpbmcgY29udmVydGVkIHRvIGEgU3RyaW5nIGlzIHRoZVxuICAgICAqIHNhbWUgYXMgdGhlIGNvcnJlc3BvbmRpbmcgZWxlbWVudHMgb2YgdGhpcyBvYmplY3QgKGNvbnZlcnRlZCB0byBhIFN0cmluZykgc3RhcnRpbmcgYXRcbiAgICAgKiBlbmRQb3NpdGlvbiDigJMgbGVuZ3RoKHRoaXMpLiBPdGhlcndpc2UgcmV0dXJucyBmYWxzZS5cbiAgICAgKi9cbiAgICBleHBvcnQgZnVuY3Rpb24gZW5kc1dpdGgoc3RyaW5nOnN0cmluZywgZW5kaW5nOnN0cmluZywgaW5kZXg/Om51bWJlcikge1xuICAgICAgICBpZiAoIShpbmRleCA8IHRoaXMubGVuZ3RoKSkgaW5kZXggPSB0aGlzLmxlbmd0aDtcbiAgICAgICAgZWxzZSBpbmRleCB8PSAwO1xuICAgICAgICBcbiAgICAgICAgbGV0IGVuZGluZ0xlbmd0aCA9IGVuZGluZy5sZW5ndGg7XG4gICAgICAgIHJldHVybiBzdHJpbmcuc3Vic3RyKGluZGV4IC0gZW5kaW5nTGVuZ3RoLCBlbmRpbmdMZW5ndGgpID09PSBlbmRpbmc7XG4gICAgfVxuXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGVzY2FwZVJlZ0V4cChzdHJpbmc6c3RyaW5nKTpzdHJpbmcge1xuICAgICAgICAvKipcbiAgICAgICAgICogVXNlZCB0byBtYXRjaCBgUmVnRXhwYFxuICAgICAgICAgKiBbc3ludGF4IGNoYXJhY3RlcnNdKGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzcuMC8jc2VjLXBhdHRlcm5zKS5cbiAgICAgICAgICovXG4gICAgICAgIGNvbnN0IHJlUmVnRXhwQ2hhciA9IC9bXFxcXF4kLiorPygpW1xcXXt9fF0vZztcbiAgICAgICAgY29uc3QgcmVIYXNSZWdFeHBDaGFyID0gUmVnRXhwKHJlUmVnRXhwQ2hhci5zb3VyY2UpO1xuXG4gICAgICAgIHJldHVybiAoc3RyaW5nICYmIHJlSGFzUmVnRXhwQ2hhci50ZXN0KHN0cmluZykpXG4gICAgICAgICAgICA/IHN0cmluZy5yZXBsYWNlKHJlUmVnRXhwQ2hhciwgJ1xcXFwkJicpXG4gICAgICAgICAgICA6IHN0cmluZztcbiAgICB9XG59Il19

var RideStylerShowcase;
(function (RideStylerShowcase) {
    var StyleHelper;
    (function (StyleHelper) {
        /**
         * If true, the window.getComputedStyle is available
         */
        var hasGetComputedStyle = 'getComputedStyle' in window;
        /**
         * If true, HTMLElement.currentStyle is available
         */
        var hasCurrentStyleSupport = false;
        // Test for support on element properties
        (function () {
            var testElement = document.createElement('div');
            hasCurrentStyleSupport = 'currentStyle' in testElement;
            StyleHelper.transitionEndEvent = function () {
                // Transition event mapping
                var transitions = {
                    'transition': 'transitionend',
                    'WebkitTransition': 'webkitTransitionEnd',
                    'MozTransition': 'transitionend',
                    'OTransition': 'oTransitionEnd'
                };
                for (var k in transitions) {
                    if (k in testElement.style) return transitions[k];
                }return undefined;
            }();
            StyleHelper.transitionsSupported = !!StyleHelper.transitionEndEvent;
        })();
        /**
         * If false, this is not a touch device
         */
        StyleHelper.isTouchDevice = 'ontouchstart' in window || navigator.maxTouchPoints > 0;
        /**
         * If false, SVGs are not supported by the browser
         */
        StyleHelper.svgSupported = !!document.createElementNS && !!document.createElementNS('http://www.w3.org/2000/svg', 'svg').createSVGRect;
        /**
         * Get the current computed style of an element
         * @param element The element
         */
        function getComputedStyle(element) {
            if (hasGetComputedStyle) return window.getComputedStyle(element);
            if (hasCurrentStyleSupport && element['currentStyle'] !== null) return element['currentStyle'];
            throw "Unable to get computed style";
        }
        StyleHelper.getComputedStyle = getComputedStyle;
        var offsetPositionings = ['absolute', 'relative', 'fixed'];
        /**
         * Detects whether or not absolute/relative/fixed positioning is enabled on an element
         * @param element The element
         */
        function isOffsetPositioned(element) {
            var position = element.style.position;
            if (!position) position = getComputedStyle(element).position;
            // If we still don't have a position at this point it's not offset positioned
            if (!position) return false;
            // The element is offset positioned if its one of the above list
            position = position.toLowerCase();
            var _iteratorNormalCompletion = true;
            var _didIteratorError = false;
            var _iteratorError = undefined;

            try {
                for (var _iterator = offsetPositionings[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
                    var positioning = _step.value;

                    if (position === positioning) return true;
                }
            } catch (err) {
                _didIteratorError = true;
                _iteratorError = err;
            } finally {
                try {
                    if (!_iteratorNormalCompletion && _iterator.return) {
                        _iterator.return();
                    }
                } finally {
                    if (_didIteratorError) {
                        throw _iteratorError;
                    }
                }
            }

            return false;
        }
        StyleHelper.isOffsetPositioned = isOffsetPositioned;
        function flattenClassList() {
            for (var _len = arguments.length, classes = Array(_len), _key = 0; _key < _len; _key++) {
                classes[_key] = arguments[_key];
            }

            return RideStylerShowcase.ArrayHelper.reduce(classes, function (classList, className) {
                var subclassList = void 0;
                if (typeof className === 'string') subclassList = [className];else subclassList = className;
                var _iteratorNormalCompletion2 = true;
                var _didIteratorError2 = false;
                var _iteratorError2 = undefined;

                try {
                    for (var _iterator2 = subclassList[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {
                        var c = _step2.value;

                        classList = classList.concat(c.split(/\s+/));
                    }
                } catch (err) {
                    _didIteratorError2 = true;
                    _iteratorError2 = err;
                } finally {
                    try {
                        if (!_iteratorNormalCompletion2 && _iterator2.return) {
                            _iterator2.return();
                        }
                    } finally {
                        if (_didIteratorError2) {
                            throw _iteratorError2;
                        }
                    }
                }

                return classList;
            }, []);
        }
        StyleHelper.flattenClassList = flattenClassList;
        /**
         * Causes the browser to recalculate the styles of the specified element
         * @param element The element
         */
        function triggerReflow(element) {
            element.offsetHeight;
        }
        StyleHelper.triggerReflow = triggerReflow;
        /**
         * Skip a transition on an element preformed by a callback function
         * @param element The element
         * @param callback A function to run causing a transition to be fired on the element
         */
        function skipTransition(element, callback) {
            if (!StyleHelper.transitionsSupported) return callback();
            var oldTransition = element.style.transition;
            element.style.transition = 'none';
            callback.call(this);
            triggerReflow(element);
            element.style.transition = oldTransition;
        }
        StyleHelper.skipTransition = skipTransition;
        function onNextTransitionEnd(element, listener) {
            return RideStylerShowcase.HTMLHelper.once(element, StyleHelper.transitionEndEvent, listener);
        }
        StyleHelper.onNextTransitionEnd = onNextTransitionEnd;
        function hasClasses(element, classArray) {
            var classes = void 0;
            if (typeof classArray === 'string') {
                for (var _len2 = arguments.length, classList = Array(_len2 > 2 ? _len2 - 2 : 0), _key2 = 2; _key2 < _len2; _key2++) {
                    classList[_key2 - 2] = arguments[_key2];
                }

                classes = classList || [];
                classes.push(classArray);
            } else classes = classArray;
            var _iteratorNormalCompletion3 = true;
            var _didIteratorError3 = false;
            var _iteratorError3 = undefined;

            try {
                for (var _iterator3 = classes[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {
                    var className = _step3.value;

                    if (!element.classList.contains(className)) return false;
                }
            } catch (err) {
                _didIteratorError3 = true;
                _iteratorError3 = err;
            } finally {
                try {
                    if (!_iteratorNormalCompletion3 && _iterator3.return) {
                        _iterator3.return();
                    }
                } finally {
                    if (_didIteratorError3) {
                        throw _iteratorError3;
                    }
                }
            }

            return true;
        }
        StyleHelper.hasClasses = hasClasses;
        function parsePixels(pixels) {
            if (!RideStylerShowcase.StringHelper.endsWith(pixels, 'px')) return undefined;
            return parseInt(pixels);
        }
        StyleHelper.parsePixels = parsePixels;
        function calculatePadding(element) {
            var _getComputedStyle = getComputedStyle(element),
                paddingBottom = _getComputedStyle.paddingBottom,
                paddingTop = _getComputedStyle.paddingTop,
                paddingLeft = _getComputedStyle.paddingLeft,
                paddingRight = _getComputedStyle.paddingRight;

            var width = parsePixels(paddingLeft) + parsePixels(paddingRight);
            var height = parsePixels(paddingTop) + parsePixels(paddingBottom);
            if (isNaN(width)) width = 0;
            if (isNaN(height)) height = 0;
            return {
                width: width,
                height: height
            };
        }
        StyleHelper.calculatePadding = calculatePadding;
    })(StyleHelper = RideStylerShowcase.StyleHelper || (RideStylerShowcase.StyleHelper = {}));
})(RideStylerShowcase || (RideStylerShowcase = {}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9zY3JpcHRzL2hlbHBlcnMvU3R5bGVIZWxwZXIudHMiXSwibmFtZXMiOlsiUmlkZVN0eWxlclNob3djYXNlIiwiU3R5bGVIZWxwZXIiLCJoYXNHZXRDb21wdXRlZFN0eWxlIiwid2luZG93IiwiaGFzQ3VycmVudFN0eWxlU3VwcG9ydCIsInRlc3RFbGVtZW50IiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwidHJhbnNpdGlvbkVuZEV2ZW50IiwidHJhbnNpdGlvbnMiLCJrIiwic3R5bGUiLCJ1bmRlZmluZWQiLCJ0cmFuc2l0aW9uc1N1cHBvcnRlZCIsImlzVG91Y2hEZXZpY2UiLCJuYXZpZ2F0b3IiLCJtYXhUb3VjaFBvaW50cyIsInN2Z1N1cHBvcnRlZCIsImNyZWF0ZUVsZW1lbnROUyIsImNyZWF0ZVNWR1JlY3QiLCJnZXRDb21wdXRlZFN0eWxlIiwiZWxlbWVudCIsIm9mZnNldFBvc2l0aW9uaW5ncyIsImlzT2Zmc2V0UG9zaXRpb25lZCIsInBvc2l0aW9uIiwidG9Mb3dlckNhc2UiLCJwb3NpdGlvbmluZyIsImZsYXR0ZW5DbGFzc0xpc3QiLCJjbGFzc2VzIiwiQXJyYXlIZWxwZXIiLCJyZWR1Y2UiLCJjbGFzc0xpc3QiLCJjbGFzc05hbWUiLCJzdWJjbGFzc0xpc3QiLCJjIiwiY29uY2F0Iiwic3BsaXQiLCJ0cmlnZ2VyUmVmbG93Iiwib2Zmc2V0SGVpZ2h0Iiwic2tpcFRyYW5zaXRpb24iLCJjYWxsYmFjayIsIm9sZFRyYW5zaXRpb24iLCJ0cmFuc2l0aW9uIiwiY2FsbCIsIm9uTmV4dFRyYW5zaXRpb25FbmQiLCJsaXN0ZW5lciIsIkhUTUxIZWxwZXIiLCJvbmNlIiwiaGFzQ2xhc3NlcyIsImNsYXNzQXJyYXkiLCJwdXNoIiwiY29udGFpbnMiLCJwYXJzZVBpeGVscyIsInBpeGVscyIsIlN0cmluZ0hlbHBlciIsImVuZHNXaXRoIiwicGFyc2VJbnQiLCJjYWxjdWxhdGVQYWRkaW5nIiwicGFkZGluZ0JvdHRvbSIsInBhZGRpbmdU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QUFBLGdCQUk1Q0MsV0FKNEMscUJBSTVDQSxXQUo0QztBQUFBLGdCQUs1Q0MsWUFMNEMscUJBSzVDQSxZQUw0Qzs7QUFRaEQsZ0JBQUlDLFFBQVFWLFlBQVlRLFdBQVosSUFBMkJSLFlBQVlTLFlBQVosQ0FBdkM7QUFDQSxnQkFBSUUsU0FBU1gsWUFBWU8sVUFBWixJQUEwQlAsWUFBWU0sYUFBWixDQUF2QztBQUVBLGdCQUFJTSxNQUFNRixLQUFOLENBQUosRUFBa0JBLFFBQVEsQ0FBUjtBQUNsQixnQkFBSUUsTUFBTUQsTUFBTixDQUFKLEVBQW1CQSxTQUFTLENBQVQ7QUFFbkIsbUJBQU87QUFDSEQsdUJBQU9BLEtBREo7QUFFSEMsd0JBQVFBO0FBRkwsYUFBUDtBQUlIO0FBbEJlOUQsb0JBQUF3RCxnQkFBQSxHQUFnQkEsZ0JBQWhCO0FBbUJuQixLQTFMNEIsRUFBQXhELGNBQUFELG1CQUFBQyxXQUFBLEtBQUFELG1CQUFBQyxXQUFBLEdBQVcsRUFBWCxDQUFBO0FBMEw1QixDQTFMRCxFQUFVRCx1QkFBQUEscUJBQWtCLEVBQWxCLENBQVYiLCJmaWxlIjoic2NyaXB0cy9oZWxwZXJzL1N0eWxlSGVscGVyLmpzIiwic291cmNlc0NvbnRlbnQiOlsibmFtZXNwYWNlIFJpZGVTdHlsZXJTaG93Y2FzZS5TdHlsZUhlbHBlciB7XG4gICAgLyoqXG4gICAgICogSWYgdHJ1ZSwgdGhlIHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlIGlzIGF2YWlsYWJsZVxuICAgICAqL1xuICAgIGxldCBoYXNHZXRDb21wdXRlZFN0eWxlID0gJ2dldENvbXB1dGVkU3R5bGUnIGluIHdpbmRvdztcblxuICAgIC8qKlxuICAgICAqIElmIHRydWUsIEhUTUxFbGVtZW50LmN1cnJlbnRTdHlsZSBpcyBhdmFpbGFibGVcbiAgICAgKi9cbiAgICBsZXQgaGFzQ3VycmVudFN0eWxlU3VwcG9ydCA9IGZhbHNlO1xuXG4gICAgLy8gVGVzdCBmb3Igc3VwcG9ydCBvbiBlbGVtZW50IHByb3BlcnRpZXNcbiAgICAoZnVuY3Rpb24gKCkge1xuICAgICAgICBsZXQgdGVzdEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblxuICAgICAgICBoYXNDdXJyZW50U3R5bGVTdXBwb3J0ID0gJ2N1cnJlbnRTdHlsZScgaW4gdGVzdEVsZW1lbnQ7XG5cbiAgICAgICAgdHJhbnNpdGlvbkVuZEV2ZW50ID0gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIC8vIFRyYW5zaXRpb24gZXZlbnQgbWFwcGluZ1xuICAgICAgICAgICAgdmFyIHRyYW5zaXRpb25zID0ge1xuICAgICAgICAgICAgICAgICd0cmFuc2l0aW9uJyAgICAgICA6ICd0cmFuc2l0aW9uZW5kJyxcbiAgICAgICAgICAgICAgICAnV2Via2l0VHJhbnNpdGlvbicgOiAnd2Via2l0VHJhbnNpdGlvbkVuZCcsXG4gICAgICAgICAgICAgICAgJ01velRyYW5zaXRpb24nICAgIDogJ3RyYW5zaXRpb25lbmQnLFxuICAgICAgICAgICAgICAgICdPVHJhbnNpdGlvbicgICAgICA6ICdvVHJhbnNpdGlvbkVuZCdcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGZvciAodmFyIGsgaW4gdHJhbnNpdGlvbnMpXG4gICAgICAgICAgICAgICAgaWYgKGsgaW4gdGVzdEVsZW1lbnQuc3R5bGUpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cmFuc2l0aW9uc1trXTtcblxuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfSkoKTtcblxuICAgICAgICB0cmFuc2l0aW9uc1N1cHBvcnRlZCA9ICEhdHJhbnNpdGlvbkVuZEV2ZW50O1xuICAgIH0pKCk7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgbmFtZSBvZiB0aGUgdHJhbnNpdGlvbiBlbmQgZXZlbnQgZm9yIHRoaXMgYnJvd3NlclxuICAgICAqL1xuICAgIGV4cG9ydCBsZXQgdHJhbnNpdGlvbkVuZEV2ZW50OnN0cmluZztcblxuICAgIC8qKlxuICAgICAqIElmIGZhbHNlLCB0cmFuc2l0aW9ucyBhcmUgbm90IHN1cHBvcnRlZCBieSB0aGUgYnJvd3NlclxuICAgICAqL1xuICAgIGV4cG9ydCBsZXQgdHJhbnNpdGlvbnNTdXBwb3J0ZWQ6Ym9vbGVhbjtcblxuICAgIC8qKlxuICAgICAqIElmIGZhbHNlLCB0aGlzIGlzIG5vdCBhIHRvdWNoIGRldmljZVxuICAgICAqL1xuICAgIGV4cG9ydCBsZXQgaXNUb3VjaERldmljZTpib29sZWFuID0gJ29udG91Y2hzdGFydCcgaW4gd2luZG93IHx8IG5hdmlnYXRvci5tYXhUb3VjaFBvaW50cyA+IDA7XG5cbiAgICAvKipcbiAgICAgKiBJZiBmYWxzZSwgU1ZHcyBhcmUgbm90IHN1cHBvcnRlZCBieSB0aGUgYnJvd3NlclxuICAgICAqL1xuICAgIGV4cG9ydCBsZXQgc3ZnU3VwcG9ydGVkOmJvb2xlYW4gPSAhIWRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyAmJiAhIWRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLCAnc3ZnJykuY3JlYXRlU1ZHUmVjdDtcblxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgY3VycmVudCBjb21wdXRlZCBzdHlsZSBvZiBhbiBlbGVtZW50XG4gICAgICogQHBhcmFtIGVsZW1lbnQgVGhlIGVsZW1lbnRcbiAgICAgKi9cbiAgICBleHBvcnQgZnVuY3Rpb24gZ2V0Q29tcHV0ZWRTdHlsZShlbGVtZW50OkhUTUxFbGVtZW50KTpDU1NTdHlsZURlY2xhcmF0aW9uIHtcbiAgICAgICAgaWYgKGhhc0dldENvbXB1dGVkU3R5bGUpIHJldHVybiB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShlbGVtZW50KTtcbiAgICAgICAgaWYgKGhhc0N1cnJlbnRTdHlsZVN1cHBvcnQgJiYgZWxlbWVudFsnY3VycmVudFN0eWxlJ10gIT09IG51bGwpIHJldHVybiBlbGVtZW50WydjdXJyZW50U3R5bGUnXTtcblxuICAgICAgICB0aHJvdyBcIlVuYWJsZSB0byBnZXQgY29tcHV0ZWQgc3R5bGVcIjtcbiAgICB9XG5cbiAgICBsZXQgb2Zmc2V0UG9zaXRpb25pbmdzID0gWydhYnNvbHV0ZScsICdyZWxhdGl2ZScsICdmaXhlZCddO1xuICAgIC8qKlxuICAgICAqIERldGVjdHMgd2hldGhlciBvciBub3QgYWJzb2x1dGUvcmVsYXRpdmUvZml4ZWQgcG9zaXRpb25pbmcgaXMgZW5hYmxlZCBvbiBhbiBlbGVtZW50XG4gICAgICogQHBhcmFtIGVsZW1lbnQgVGhlIGVsZW1lbnRcbiAgICAgKi9cbiAgICBleHBvcnQgZnVuY3Rpb24gaXNPZmZzZXRQb3NpdGlvbmVkKGVsZW1lbnQ6SFRNTEVsZW1lbnQpOmJvb2xlYW4ge1xuICAgICAgICB2YXIgcG9zaXRpb24gPSBlbGVtZW50LnN0eWxlLnBvc2l0aW9uO1xuXG4gICAgICAgIGlmICghcG9zaXRpb24pXG4gICAgICAgICAgICBwb3NpdGlvbiA9IGdldENvbXB1dGVkU3R5bGUoZWxlbWVudCkucG9zaXRpb247XG5cbiAgICAgICAgLy8gSWYgd2Ugc3RpbGwgZG9uJ3QgaGF2ZSBhIHBvc2l0aW9uIGF0IHRoaXMgcG9pbnQgaXQncyBub3Qgb2Zmc2V0IHBvc2l0aW9uZWRcbiAgICAgICAgaWYgKCFwb3NpdGlvbikgcmV0dXJuIGZhbHNlO1xuXG4gICAgICAgIC8vIFRoZSBlbGVtZW50IGlzIG9mZnNldCBwb3NpdGlvbmVkIGlmIGl0cyBvbmUgb2YgdGhlIGFib3ZlIGxpc3RcbiAgICAgICAgcG9zaXRpb24gPSBwb3NpdGlvbi50b0xvd2VyQ2FzZSgpO1xuICAgICAgICBmb3IgKGxldCBwb3NpdGlvbmluZyBvZiBvZmZzZXRQb3NpdGlvbmluZ3MpXG4gICAgICAgICAgICBpZiAocG9zaXRpb24gPT09IHBvc2l0aW9uaW5nKSByZXR1cm4gdHJ1ZTtcblxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGZsYXR0ZW5DbGFzc0xpc3QoLi4uY2xhc3Nlczooc3RyaW5nfHN0cmluZ1tdKVtdKTpzdHJpbmdbXSB7XG4gICAgICAgIHJldHVybiBBcnJheUhlbHBlci5yZWR1Y2U8c3RyaW5nfHN0cmluZ1tdLCBzdHJpbmdbXT4oY2xhc3NlcywgKGNsYXNzTGlzdCwgY2xhc3NOYW1lKSA9PiB7XG4gICAgICAgICAgICBsZXQgc3ViY2xhc3NMaXN0OnN0cmluZ1tdO1xuXG4gICAgICAgICAgICBpZiAodHlwZW9mIGNsYXNzTmFtZSA9PT0gJ3N0cmluZycpIHN1YmNsYXNzTGlzdCA9IFtjbGFzc05hbWVdO1xuICAgICAgICAgICAgZWxzZSBzdWJjbGFzc0xpc3QgPSBjbGFzc05hbWU7XG5cbiAgICAgICAgICAgIGZvciAobGV0IGMgb2Ygc3ViY2xhc3NMaXN0KSB7XG4gICAgICAgICAgICAgICAgY2xhc3NMaXN0ID0gY2xhc3NMaXN0LmNvbmNhdChjLnNwbGl0KC9cXHMrLykpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gY2xhc3NMaXN0O1xuICAgICAgICAgfSwgW10pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENhdXNlcyB0aGUgYnJvd3NlciB0byByZWNhbGN1bGF0ZSB0aGUgc3R5bGVzIG9mIHRoZSBzcGVjaWZpZWQgZWxlbWVudFxuICAgICAqIEBwYXJhbSBlbGVtZW50IFRoZSBlbGVtZW50XG4gICAgICovXG4gICAgZXhwb3J0IGZ1bmN0aW9uIHRyaWdnZXJSZWZsb3coZWxlbWVudDpIVE1MRWxlbWVudCkge1xuICAgICAgICBlbGVtZW50Lm9mZnNldEhlaWdodDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTa2lwIGEgdHJhbnNpdGlvbiBvbiBhbiBlbGVtZW50IHByZWZvcm1lZCBieSBhIGNhbGxiYWNrIGZ1bmN0aW9uXG4gICAgICogQHBhcmFtIGVsZW1lbnQgVGhlIGVsZW1lbnRcbiAgICAgKiBAcGFyYW0gY2FsbGJhY2sgQSBmdW5jdGlvbiB0byBydW4gY2F1c2luZyBhIHRyYW5zaXRpb24gdG8gYmUgZmlyZWQgb24gdGhlIGVsZW1lbnRcbiAgICAgKi9cbiAgICBleHBvcnQgZnVuY3Rpb24gc2tpcFRyYW5zaXRpb24oZWxlbWVudDpIVE1MRWxlbWVudCwgY2FsbGJhY2s6RnVuY3Rpb24pOnZvaWQge1xuICAgICAgICBpZiAoIXRyYW5zaXRpb25zU3VwcG9ydGVkKSByZXR1cm4gY2FsbGJhY2soKTtcblxuICAgICAgICBsZXQgb2xkVHJhbnNpdGlvbiA9IGVsZW1lbnQuc3R5bGUudHJhbnNpdGlvbjtcblxuICAgICAgICBlbGVtZW50LnN0eWxlLnRyYW5zaXRpb24gPSAnbm9uZSc7XG4gICAgICAgIGNhbGxiYWNrLmNhbGwodGhpcyk7XG4gICAgICAgIHRyaWdnZXJSZWZsb3coZWxlbWVudCk7XG5cbiAgICAgICAgZWxlbWVudC5zdHlsZS50cmFuc2l0aW9uID0gb2xkVHJhbnNpdGlvbjtcbiAgICB9XG5cbiAgICBleHBvcnQgZnVuY3Rpb24gb25OZXh0VHJhbnNpdGlvbkVuZChlbGVtZW50OkhUTUxFbGVtZW50LCBsaXN0ZW5lcjpFdmVudExpc3RlbmVyT3JFdmVudExpc3RlbmVyT2JqZWN0KSB7XG4gICAgICAgIHJldHVybiBIVE1MSGVscGVyLm9uY2UoZWxlbWVudCwgdHJhbnNpdGlvbkVuZEV2ZW50LCBsaXN0ZW5lcik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2sgaWYgYW4gZWxlbWVudCBoYXMgYWxsIG9mIHRoZSBzdXBwbGllZCBjbGFzc2VzXG4gICAgICogQHBhcmFtIGVsZW1lbnQgVGhlIGVsZW1lbnRcbiAgICAgKiBAcGFyYW0gY2xhc3NlcyBUaGUgY2xhc3NlcyB0byBjaGVja1xuICAgICAqL1xuICAgIGV4cG9ydCBmdW5jdGlvbiBoYXNDbGFzc2VzKGVsZW1lbnQ6SFRNTEVsZW1lbnQsIGNsYXNzZXM6IHN0cmluZ1tdKTpib29sZWFuO1xuICAgIC8qKlxuICAgICAqIENoZWNrIGlmIGFuIGVsZW1lbnQgaGFzIGFsbCBvZiB0aGUgc3VwcGxpZWQgY2xhc3Nlc1xuICAgICAqIEBwYXJhbSBlbGVtZW50IFRoZSBlbGVtZW50XG4gICAgICogQHBhcmFtIGNsYXNzZXMgVGhlIGNsYXNzZXMgdG8gY2hlY2tcbiAgICAgKi9cbiAgICBleHBvcnQgZnVuY3Rpb24gaGFzQ2xhc3NlcyhlbGVtZW50OkhUTUxFbGVtZW50LCAuLi5jbGFzc2VzOiBzdHJpbmdbXSk6Ym9vbGVhbjtcbiAgICBleHBvcnQgZnVuY3Rpb24gaGFzQ2xhc3NlcyhlbGVtZW50OkhUTUxFbGVtZW50LCBjbGFzc0FycmF5OiBzdHJpbmdbXXxzdHJpbmcsIC4uLmNsYXNzTGlzdDpzdHJpbmdbXSk6Ym9vbGVhbiB7XG4gICAgICAgIGxldCBjbGFzc2VzOiBzdHJpbmdbXTtcblxuICAgICAgICBpZiAodHlwZW9mIGNsYXNzQXJyYXkgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICBjbGFzc2VzID0gY2xhc3NMaXN0IHx8IFtdO1xuICAgICAgICAgICAgY2xhc3Nlcy5wdXNoKGNsYXNzQXJyYXkpO1xuICAgICAgICB9IGVsc2UgY2xhc3NlcyA9IGNsYXNzQXJyYXk7XG5cbiAgICAgICAgZm9yIChsZXQgY2xhc3NOYW1lIG9mIGNsYXNzZXMpIHtcbiAgICAgICAgICAgIGlmICghZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoY2xhc3NOYW1lKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICBleHBvcnQgZnVuY3Rpb24gcGFyc2VQaXhlbHMocGl4ZWxzOnN0cmluZyk6bnVtYmVyIHtcbiAgICAgICAgaWYgKCFTdHJpbmdIZWxwZXIuZW5kc1dpdGgocGl4ZWxzLCAncHgnKSkgcmV0dXJuIHVuZGVmaW5lZDtcblxuICAgICAgICByZXR1cm4gcGFyc2VJbnQocGl4ZWxzKTtcbiAgICB9XG5cbiAgICBleHBvcnQgZnVuY3Rpb24gY2FsY3VsYXRlUGFkZGluZyhlbGVtZW50OkhUTUxFbGVtZW50KSB7XG4gICAgICAgIGxldCB7XG4gICAgICAgICAgICBwYWRkaW5nQm90dG9tLFxuICAgICAgICAgICAgcGFkZGluZ1RvcCxcbiAgICAgICAgICAgIHBhZGRpbmdMZWZ0LFxuICAgICAgICAgICAgcGFkZGluZ1JpZ2h0XG4gICAgICAgIH0gPSBnZXRDb21wdXRlZFN0eWxlKGVsZW1lbnQpO1xuXG4gICAgICAgIGxldCB3aWR0aCA9IHBhcnNlUGl4ZWxzKHBhZGRpbmdMZWZ0KSArIHBhcnNlUGl4ZWxzKHBhZGRpbmdSaWdodCk7XG4gICAgICAgIGxldCBoZWlnaHQgPSBwYXJzZVBpeGVscyhwYWRkaW5nVG9wKSArIHBhcnNlUGl4ZWxzKHBhZGRpbmdCb3R0b20pO1xuXG4gICAgICAgIGlmIChpc05hTih3aWR0aCkpIHdpZHRoID0gMDtcbiAgICAgICAgaWYgKGlzTmFOKGhlaWdodCkpIGhlaWdodCA9IDA7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHdpZHRoOiB3aWR0aCxcbiAgICAgICAgICAgIGhlaWdodDogaGVpZ2h0XG4gICAgICAgIH07XG4gICAgfVxufVxuIl19

var RideStylerShowcase;
(function (RideStylerShowcase) {
    var VisibilityHelper;
    (function (VisibilityHelper) {
        var defaultTransitionInClass = 'in';
        function show(element) {
            var transitionClass = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : defaultTransitionInClass;

            setVisibility(element, true);
            RideStylerShowcase.StyleHelper.triggerReflow(element);
            element.classList.add(transitionClass);
            var promise = ridestyler.promise();
            if (!RideStylerShowcase.StyleHelper.transitionsSupported) promise.resolve();else RideStylerShowcase.StyleHelper.onNextTransitionEnd(element, function () {
                return promise.resolve();
            });
            return promise;
        }
        VisibilityHelper.show = show;
        function hide(element) {
            var transitionClass = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : defaultTransitionInClass;

            element.classList.remove(transitionClass);
            var promise = ridestyler.promise();
            promise.done(function () {
                return setVisibility(element, false);
            });
            if (!RideStylerShowcase.StyleHelper.transitionsSupported) promise.resolve();else RideStylerShowcase.StyleHelper.onNextTransitionEnd(element, function () {
                return promise.resolve();
            });
            return promise;
        }
        VisibilityHelper.hide = hide;
        function setVisibility(element, visible) {
            if (!visible) {
                element.style.visibility = 'hidden';
                element.style.pointerEvents = 'none';
            } else {
                element.style.visibility = '';
                element.style.pointerEvents = '';
            }
        }
        VisibilityHelper.setVisibility = setVisibility;
    })(VisibilityHelper = RideStylerShowcase.VisibilityHelper || (RideStylerShowcase.VisibilityHelper = {}));
})(RideStylerShowcase || (RideStylerShowcase = {}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9zY3JpcHRzL2hlbHBlcnMvVmlzaWJpbGl0eUhlbHBlci50cyJdLCJuYW1lcyI6WyJSaWRlU3R5bGVyU2hvd2Nhc2UiLCJWaXNpYmlsaXR5SGVscGVyIiwiZGVmYXVsdFRyYW5zaXRpb25JbkNsYXNzIiwic2hvdyIsImVsZW1lbnQiLCJ0cmFuc2l0aW9uQ2xhc3MiLCJzZXRWaXNpYmlsaXR5IiwiU3R5bGVIZWxwZXIiLCJ0cmlnZ2VyUmVmbG93IiwiY2xhc3NMaXN0IiwiYWRkIiwicHJvbWlzZSIsInJpZGVzdHlsZXIiLCJ0cmFuc2l0aW9uc1N1cHBvcnRlZCIsInJlc29sdmUiLCJvbk5leHRUcmFuc2l0aW9uRW5kIiwiaGlkZSIsInJlbW92ZSIsImRvbmUiLCJ2aXNpYmxlIiwic3R5bGUiLCJ2aXNpYmlsaXR5IiwicG9pbnRlckV2ZW50cyJdLCJtYXBwaW5ncyI6IkFBQUEsSUFBVUEsa0JBQVY7QUFBQSxDQUFBLFVBQVVBLGtCQUFWLEVBQTRCO0FBQUMsUUFBQUMsZ0JBQUE7QUFBQSxLQUFBLFVBQUFBLGdCQUFBLEVBQWdCO0FBQ3pDLFlBQU1DLDJCQUEyQixJQUFqQztBQUVBLGlCQUFBQyxJQUFBLENBQXFCQyxPQUFyQixFQUEyRjtBQUFBLGdCQUFqREMsZUFBaUQsdUVBQXhCSCx3QkFBd0I7O0FBQ3ZGSSwwQkFBY0YsT0FBZCxFQUF1QixJQUF2QjtBQUVBSiwrQkFBQU8sV0FBQSxDQUFZQyxhQUFaLENBQTBCSixPQUExQjtBQUVBQSxvQkFBUUssU0FBUixDQUFrQkMsR0FBbEIsQ0FBc0JMLGVBQXRCO0FBRUEsZ0JBQUlNLFVBQVVDLFdBQVdELE9BQVgsRUFBZDtBQUVBLGdCQUFJLENBQUNYLG1CQUFBTyxXQUFBLENBQVlNLG9CQUFqQixFQUF1Q0YsUUFBUUcsT0FBUixHQUF2QyxLQUNLZCxtQkFBQU8sV0FBQSxDQUFZUSxtQkFBWixDQUFnQ1gsT0FBaEMsRUFBeUM7QUFBQSx1QkFBTU8sUUFBUUcsT0FBUixFQUFOO0FBQUEsYUFBekM7QUFFTCxtQkFBT0gsT0FBUDtBQUNIO0FBYmVWLHlCQUFBRSxJQUFBLEdBQUlBLElBQUo7QUFlaEIsaUJBQUFhLElBQUEsQ0FBcUJaLE9BQXJCLEVBQTJGO0FBQUEsZ0JBQWpEQyxlQUFpRCx1RUFBeEJILHdCQUF3Qjs7QUFDdkZFLG9CQUFRSyxTQUFSLENBQWtCUSxNQUFsQixDQUF5QlosZUFBekI7QUFFQSxnQkFBSU0sVUFBVUMsV0FBV0QsT0FBWCxFQUFkO0FBRUFBLG9CQUFRTyxJQUFSLENBQWE7QUFBQSx1QkFBTVosY0FBY0YsT0FBZCxFQUF1QixLQUF2QixDQUFOO0FBQUEsYUFBYjtBQUVBLGdCQUFJLENBQUNKLG1CQUFBTyxXQUFBLENBQVlNLG9CQUFqQixFQUF1Q0YsUUFBUUcsT0FBUixHQUF2QyxLQUNLZCxtQkFBQU8sV0FBQSxDQUFZUSxtQkFBWixDQUFnQ1gsT0FBaEMsRUFBeUM7QUFBQSx1QkFBTU8sUUFBUUcsT0FBUixFQUFOO0FBQUEsYUFBekM7QUFFTCxtQkFBT0gsT0FBUDtBQUNIO0FBWGVWLHlCQUFBZSxJQUFBLEdBQUlBLElBQUo7QUFhaEIsaUJBQUFWLGFBQUEsQ0FBOEJGLE9BQTlCLEVBQW1EZSxPQUFuRCxFQUFtRTtBQUMvRCxnQkFBSSxDQUFDQSxPQUFMLEVBQWM7QUFDVmYsd0JBQVFnQixLQUFSLENBQWNDLFVBQWQsR0FBMkIsUUFBM0I7QUFDQWpCLHdCQUFRZ0IsS0FBUixDQUFjRSxhQUFkLEdBQThCLE1BQTlCO0FBQ0gsYUFIRCxNQUdPO0FBQ0hsQix3QkFBUWdCLEtBQVIsQ0FBY0MsVUFBZCxHQUEyQixFQUEzQjtBQUNBakIsd0JBQVFnQixLQUFSLENBQWNFLGFBQWQsR0FBOEIsRUFBOUI7QUFDSDtBQUNKO0FBUmVyQix5QkFBQUssYUFBQSxHQUFhQSxhQUFiO0FBU25CLEtBeEM0QixFQUFBTCxtQkFBQUQsbUJBQUFDLGdCQUFBLEtBQUFELG1CQUFBQyxnQkFBQSxHQUFnQixFQUFoQixDQUFBO0FBd0M1QixDQXhDRCxFQUFVRCx1QkFBQUEscUJBQWtCLEVBQWxCLENBQVYiLCJmaWxlIjoic2NyaXB0cy9oZWxwZXJzL1Zpc2liaWxpdHlIZWxwZXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyJuYW1lc3BhY2UgUmlkZVN0eWxlclNob3djYXNlLlZpc2liaWxpdHlIZWxwZXIge1xuICAgIGNvbnN0IGRlZmF1bHRUcmFuc2l0aW9uSW5DbGFzcyA9ICdpbidcblxuICAgIGV4cG9ydCBmdW5jdGlvbiBzaG93KGVsZW1lbnQ6SFRNTEVsZW1lbnQsIHRyYW5zaXRpb25DbGFzczpzdHJpbmcgPSBkZWZhdWx0VHJhbnNpdGlvbkluQ2xhc3MpOlJpZGVTdHlsZXJQcm9taXNlIHtcbiAgICAgICAgc2V0VmlzaWJpbGl0eShlbGVtZW50LCB0cnVlKTtcblxuICAgICAgICBTdHlsZUhlbHBlci50cmlnZ2VyUmVmbG93KGVsZW1lbnQpO1xuXG4gICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0cmFuc2l0aW9uQ2xhc3MpO1xuXG4gICAgICAgIGxldCBwcm9taXNlID0gcmlkZXN0eWxlci5wcm9taXNlKCk7XG5cbiAgICAgICAgaWYgKCFTdHlsZUhlbHBlci50cmFuc2l0aW9uc1N1cHBvcnRlZCkgcHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICAgIGVsc2UgU3R5bGVIZWxwZXIub25OZXh0VHJhbnNpdGlvbkVuZChlbGVtZW50LCAoKSA9PiBwcm9taXNlLnJlc29sdmUoKSk7XG5cbiAgICAgICAgcmV0dXJuIHByb21pc2U7XG4gICAgfVxuXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGhpZGUoZWxlbWVudDpIVE1MRWxlbWVudCwgdHJhbnNpdGlvbkNsYXNzOnN0cmluZyA9IGRlZmF1bHRUcmFuc2l0aW9uSW5DbGFzcyk6UmlkZVN0eWxlclByb21pc2Uge1xuICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodHJhbnNpdGlvbkNsYXNzKTtcblxuICAgICAgICBsZXQgcHJvbWlzZSA9IHJpZGVzdHlsZXIucHJvbWlzZSgpO1xuXG4gICAgICAgIHByb21pc2UuZG9uZSgoKSA9PiBzZXRWaXNpYmlsaXR5KGVsZW1lbnQsIGZhbHNlKSk7XG5cbiAgICAgICAgaWYgKCFTdHlsZUhlbHBlci50cmFuc2l0aW9uc1N1cHBvcnRlZCkgcHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICAgIGVsc2UgU3R5bGVIZWxwZXIub25OZXh0VHJhbnNpdGlvbkVuZChlbGVtZW50LCAoKSA9PiBwcm9taXNlLnJlc29sdmUoKSk7XG5cbiAgICAgICAgcmV0dXJuIHByb21pc2U7XG4gICAgfVxuXG4gICAgZXhwb3J0IGZ1bmN0aW9uIHNldFZpc2liaWxpdHkoZWxlbWVudDpIVE1MRWxlbWVudCwgdmlzaWJsZTogYm9vbGVhbikge1xuICAgICAgICBpZiAoIXZpc2libGUpIHtcbiAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUudmlzaWJpbGl0eSA9ICdoaWRkZW4nO1xuICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5wb2ludGVyRXZlbnRzID0gJ25vbmUnO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZWxlbWVudC5zdHlsZS52aXNpYmlsaXR5ID0gJyc7XG4gICAgICAgICAgICBlbGVtZW50LnN0eWxlLnBvaW50ZXJFdmVudHMgPSAnJztcbiAgICAgICAgfVxuICAgIH1cbn0iXX0=

var RideStylerShowcase;
(function (RideStylerShowcase) {
    var strings;
    (function (strings) {
        strings.registerLanguage(RideStylerShowcase.LanguageKeys.En, {
            "vehicle-select-visualize-intro": "Visualize wheels, tires and suspension modifications on your vehicle.",
            "vehicle-select-share-intro": "Share with your friends, or save for inspiration.",
            "select-your-vehicle": "Select Your Vehicle",
            "paint": "Paint",
            "suspension": "Suspension",
            "wheels": "Wheels",
            "tires": "Tires",
            "front": "Front",
            "rear": "Rear",
            "vehicle-details": "Vehicle Details",
            "change-vehicle": "Change Vehicle",
            "wheel-details": "Wheel Details",
            "tire-details": "Tire Details",
            "select-paint": "Select Paint",
            "select-wheels": "Select Wheels",
            "select-tires": "Select Tires",
            "adjust-suspension": "Adjust Suspension",
            "change-wheel-size": "Wheel Size",
            "no-results": "No Results Found",
            "no-wheel-results": "No wheels found for this vehicle.",
            "wheel-features-specs": "Features & Specs.",
            "share-my-vehicle": "Share My Vehicle",
            "share-instructions": "Use the buttons to share or save your vehicle configuration.",
            "no-description-wheel": "We don't have a description for this wheel yet",
            'show-specs': "Show Specs",
            'call': "Call",
            'size': "Size",
            'offset': "Offset",
            'bolt-pattern': "Bolt Pattern",
            'centerbore': "Centerbore",
            'price': "Price",
            'item-number': "Item #",
            'brands': "Brands",
            'finishes': "Finishes",
            'sizes': "Sizes",
            'all': "All",
            'all-brands': "All Brands",
            'all-finishes': "All Finishes",
            'all-sizes': "All Sizes",
            'filter-results': "Filter Results",
            'loading-ellipsis': "Loading...",
            'show-count-format-tires': "Show {count} Tires",
            'show-count-format-wheels': "Show {count} Wheels",
            'specifications': "Specifications",
            'speed-rating': "Speed Rating",
            'any-speed-ratings': "Any Speed Ratings",
            'features': "Features",
            'any-features': "Any Features",
            'finish': "Finish",
            'summary': "Summary",
            'check-out-my-vehicle': "Check out my vehicle!"
        });
    })(strings = RideStylerShowcase.strings || (RideStylerShowcase.strings = {}));
})(RideStylerShowcase || (RideStylerShowcase = {}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9zY3JpcHRzL3N0cmluZ3MvUmlkZVN0eWxlclNob3djYXNlLnN0cmluZ3MuZW4udHMiXSwibmFtZXMiOlsiUmlkZVN0eWxlclNob3djYXNlIiwic3RyaW5ncyIsInJlZ2lzdGVyTGFuZ3VhZ2UiLCJMYW5ndWFnZUtleXMiLCJFbiJdLCJtYXBwaW5ncyI6IkFBQUEsSUFBVUEsa0JBQVY7QUFBQSxDQUFBLFVBQVVBLGtCQUFWLEVBQTRCO0FBQUMsUUFBQUMsT0FBQTtBQUFBLEtBQUEsVUFBQUEsT0FBQSxFQUFPO0FBQ2hDQSxnQkFBQUMsZ0JBQUEsQ0FBaUJGLG1CQUFBRyxZQUFBLENBQWFDLEVBQTlCLEVBQWtDO0FBQzlCLDhDQUFrQyx1RUFESjtBQUU5QiwwQ0FBa0MsbURBRko7QUFHOUIsbUNBQWtDLHFCQUhKO0FBSTlCLHFCQUFrQyxPQUpKO0FBSzlCLDBCQUFrQyxZQUxKO0FBTTlCLHNCQUFrQyxRQU5KO0FBTzlCLHFCQUFrQyxPQVBKO0FBUTlCLHFCQUFrQyxPQVJKO0FBUzlCLG9CQUFrQyxNQVRKO0FBVTlCLCtCQUFrQyxpQkFWSjtBQVc5Qiw4QkFBa0MsZ0JBWEo7QUFZOUIsNkJBQWtDLGVBWko7QUFhOUIsNEJBQWtDLGNBYko7QUFjOUIsNEJBQWtDLGNBZEo7QUFlOUIsNkJBQWtDLGVBZko7QUFnQjlCLDRCQUFrQyxjQWhCSjtBQWlCOUIsaUNBQWtDLG1CQWpCSjtBQWtCOUIsaUNBQWtDLFlBbEJKO0FBbUI5QiwwQkFBa0Msa0JBbkJKO0FBb0I5QixnQ0FBa0MsbUNBcEJKO0FBcUI5QixvQ0FBa0MsbUJBckJKO0FBc0I5QixnQ0FBa0Msa0JBdEJKO0FBdUI5QixrQ0FBa0MsOERBdkJKO0FBd0I5QixvQ0FBa0MsZ0RBeEJKO0FBeUI5QiwwQkFBa0MsWUF6Qko7QUEwQjlCLG9CQUFrQyxNQTFCSjtBQTJCOUIsb0JBQWtDLE1BM0JKO0FBNEI5QixzQkFBa0MsUUE1Qko7QUE2QjlCLDRCQUFrQyxjQTdCSjtBQThCOUIsMEJBQWtDLFlBOUJKO0FBK0I5QixxQkFBa0MsT0EvQko7QUFnQzlCLDJCQUFrQyxRQWhDSjtBQWlDOUIsc0JBQWtDLFFBakNKO0FBa0M5Qix3QkFBa0MsVUFsQ0o7QUFtQzlCLHFCQUFrQyxPQW5DSjtBQW9DOUIsbUJBQWtDLEtBcENKO0FBcUM5QiwwQkFBa0MsWUFyQ0o7QUFzQzlCLDRCQUFrQyxjQXRDSjtBQXVDOUIseUJBQWtDLFdBdkNKO0FBd0M5Qiw4QkFBa0MsZ0JBeENKO0FBeUM5QixnQ0FBa0MsWUF6Q0o7QUEwQzlCLHVDQUFrQyxvQkExQ0o7QUEyQzlCLHdDQUFrQyxxQkEzQ0o7QUE0QzlCLDhCQUFrQyxnQkE1Q0o7QUE2QzlCLDRCQUFrQyxjQTdDSjtBQThDOUIsaUNBQWtDLG1CQTlDSjtBQStDOUIsd0JBQWtDLFVBL0NKO0FBZ0Q5Qiw0QkFBa0MsY0FoREo7QUFpRDlCLHNCQUFrQyxRQWpESjtBQWtEOUIsdUJBQWtDLFNBbERKO0FBbUQ5QixvQ0FBa0M7QUFuREosU0FBbEM7QUFxREgsS0F0RDRCLEVBQUFILFVBQUFELG1CQUFBQyxPQUFBLEtBQUFELG1CQUFBQyxPQUFBLEdBQU8sRUFBUCxDQUFBO0FBc0Q1QixDQXRERCxFQUFVRCx1QkFBQUEscUJBQWtCLEVBQWxCLENBQVYiLCJmaWxlIjoic2NyaXB0cy9zdHJpbmdzL1JpZGVTdHlsZXJTaG93Y2FzZS5zdHJpbmdzLmVuLmpzIiwic291cmNlc0NvbnRlbnQiOlsibmFtZXNwYWNlIFJpZGVTdHlsZXJTaG93Y2FzZS5zdHJpbmdzIHtcclxuICAgIHJlZ2lzdGVyTGFuZ3VhZ2UoTGFuZ3VhZ2VLZXlzLkVuLCB7XHJcbiAgICAgICAgXCJ2ZWhpY2xlLXNlbGVjdC12aXN1YWxpemUtaW50cm9cIjogXCJWaXN1YWxpemUgd2hlZWxzLCB0aXJlcyBhbmQgc3VzcGVuc2lvbiBtb2RpZmljYXRpb25zIG9uIHlvdXIgdmVoaWNsZS5cIixcclxuICAgICAgICBcInZlaGljbGUtc2VsZWN0LXNoYXJlLWludHJvXCI6ICAgICBcIlNoYXJlIHdpdGggeW91ciBmcmllbmRzLCBvciBzYXZlIGZvciBpbnNwaXJhdGlvbi5cIixcclxuICAgICAgICBcInNlbGVjdC15b3VyLXZlaGljbGVcIjogICAgICAgICAgICBcIlNlbGVjdCBZb3VyIFZlaGljbGVcIixcclxuICAgICAgICBcInBhaW50XCI6ICAgICAgICAgICAgICAgICAgICAgICAgICBcIlBhaW50XCIsXHJcbiAgICAgICAgXCJzdXNwZW5zaW9uXCI6ICAgICAgICAgICAgICAgICAgICAgXCJTdXNwZW5zaW9uXCIsXHJcbiAgICAgICAgXCJ3aGVlbHNcIjogICAgICAgICAgICAgICAgICAgICAgICAgXCJXaGVlbHNcIixcclxuICAgICAgICBcInRpcmVzXCI6ICAgICAgICAgICAgICAgICAgICAgICAgICBcIlRpcmVzXCIsXHJcbiAgICAgICAgXCJmcm9udFwiOiAgICAgICAgICAgICAgICAgICAgICAgICAgXCJGcm9udFwiLFxyXG4gICAgICAgIFwicmVhclwiOiAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiUmVhclwiLFxyXG4gICAgICAgIFwidmVoaWNsZS1kZXRhaWxzXCI6ICAgICAgICAgICAgICAgIFwiVmVoaWNsZSBEZXRhaWxzXCIsXHJcbiAgICAgICAgXCJjaGFuZ2UtdmVoaWNsZVwiOiAgICAgICAgICAgICAgICAgXCJDaGFuZ2UgVmVoaWNsZVwiLFxyXG4gICAgICAgIFwid2hlZWwtZGV0YWlsc1wiOiAgICAgICAgICAgICAgICAgIFwiV2hlZWwgRGV0YWlsc1wiLFxyXG4gICAgICAgIFwidGlyZS1kZXRhaWxzXCI6ICAgICAgICAgICAgICAgICAgIFwiVGlyZSBEZXRhaWxzXCIsXHJcbiAgICAgICAgXCJzZWxlY3QtcGFpbnRcIjogICAgICAgICAgICAgICAgICAgXCJTZWxlY3QgUGFpbnRcIixcclxuICAgICAgICBcInNlbGVjdC13aGVlbHNcIjogICAgICAgICAgICAgICAgICBcIlNlbGVjdCBXaGVlbHNcIixcclxuICAgICAgICBcInNlbGVjdC10aXJlc1wiOiAgICAgICAgICAgICAgICAgICBcIlNlbGVjdCBUaXJlc1wiLFxyXG4gICAgICAgIFwiYWRqdXN0LXN1c3BlbnNpb25cIjogICAgICAgICAgICAgIFwiQWRqdXN0IFN1c3BlbnNpb25cIixcclxuICAgICAgICBcImNoYW5nZS13aGVlbC1zaXplXCI6ICAgICAgICAgICAgICBcIldoZWVsIFNpemVcIixcclxuICAgICAgICBcIm5vLXJlc3VsdHNcIjogICAgICAgICAgICAgICAgICAgICBcIk5vIFJlc3VsdHMgRm91bmRcIixcclxuICAgICAgICBcIm5vLXdoZWVsLXJlc3VsdHNcIjogICAgICAgICAgICAgICBcIk5vIHdoZWVscyBmb3VuZCBmb3IgdGhpcyB2ZWhpY2xlLlwiLFxyXG4gICAgICAgIFwid2hlZWwtZmVhdHVyZXMtc3BlY3NcIjogICAgICAgICAgIFwiRmVhdHVyZXMgJiBTcGVjcy5cIixcclxuICAgICAgICBcInNoYXJlLW15LXZlaGljbGVcIjogICAgICAgICAgICAgICBcIlNoYXJlIE15IFZlaGljbGVcIixcclxuICAgICAgICBcInNoYXJlLWluc3RydWN0aW9uc1wiOiAgICAgICAgICAgICBcIlVzZSB0aGUgYnV0dG9ucyB0byBzaGFyZSBvciBzYXZlIHlvdXIgdmVoaWNsZSBjb25maWd1cmF0aW9uLlwiLFxyXG4gICAgICAgIFwibm8tZGVzY3JpcHRpb24td2hlZWxcIjogICAgICAgICAgIFwiV2UgZG9uJ3QgaGF2ZSBhIGRlc2NyaXB0aW9uIGZvciB0aGlzIHdoZWVsIHlldFwiLFxyXG4gICAgICAgICdzaG93LXNwZWNzJzogICAgICAgICAgICAgICAgICAgICBcIlNob3cgU3BlY3NcIixcclxuICAgICAgICAnY2FsbCc6ICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJDYWxsXCIsXHJcbiAgICAgICAgJ3NpemUnOiAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiU2l6ZVwiLFxyXG4gICAgICAgICdvZmZzZXQnOiAgICAgICAgICAgICAgICAgICAgICAgICBcIk9mZnNldFwiLFxyXG4gICAgICAgICdib2x0LXBhdHRlcm4nOiAgICAgICAgICAgICAgICAgICBcIkJvbHQgUGF0dGVyblwiLFxyXG4gICAgICAgICdjZW50ZXJib3JlJzogICAgICAgICAgICAgICAgICAgICBcIkNlbnRlcmJvcmVcIixcclxuICAgICAgICAncHJpY2UnOiAgICAgICAgICAgICAgICAgICAgICAgICAgXCJQcmljZVwiLFxyXG4gICAgICAgICdpdGVtLW51bWJlcic6ICAgICAgICAgICAgICAgICAgICBcIkl0ZW0gI1wiLFxyXG4gICAgICAgICdicmFuZHMnOiAgICAgICAgICAgICAgICAgICAgICAgICBcIkJyYW5kc1wiLFxyXG4gICAgICAgICdmaW5pc2hlcyc6ICAgICAgICAgICAgICAgICAgICAgICBcIkZpbmlzaGVzXCIsXHJcbiAgICAgICAgJ3NpemVzJzogICAgICAgICAgICAgICAgICAgICAgICAgIFwiU2l6ZXNcIixcclxuICAgICAgICAnYWxsJzogICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJBbGxcIixcclxuICAgICAgICAnYWxsLWJyYW5kcyc6ICAgICAgICAgICAgICAgICAgICAgXCJBbGwgQnJhbmRzXCIsXHJcbiAgICAgICAgJ2FsbC1maW5pc2hlcyc6ICAgICAgICAgICAgICAgICAgIFwiQWxsIEZpbmlzaGVzXCIsXHJcbiAgICAgICAgJ2FsbC1zaXplcyc6ICAgICAgICAgICAgICAgICAgICAgIFwiQWxsIFNpemVzXCIsXHJcbiAgICAgICAgJ2ZpbHRlci1yZXN1bHRzJzogICAgICAgICAgICAgICAgIFwiRmlsdGVyIFJlc3VsdHNcIixcclxuICAgICAgICAnbG9hZGluZy1lbGxpcHNpcyc6ICAgICAgICAgICAgICAgXCJMb2FkaW5nLi4uXCIsXHJcbiAgICAgICAgJ3Nob3ctY291bnQtZm9ybWF0LXRpcmVzJzogICAgICAgIFwiU2hvdyB7Y291bnR9IFRpcmVzXCIsXHJcbiAgICAgICAgJ3Nob3ctY291bnQtZm9ybWF0LXdoZWVscyc6ICAgICAgIFwiU2hvdyB7Y291bnR9IFdoZWVsc1wiLFxyXG4gICAgICAgICdzcGVjaWZpY2F0aW9ucyc6ICAgICAgICAgICAgICAgICBcIlNwZWNpZmljYXRpb25zXCIsXHJcbiAgICAgICAgJ3NwZWVkLXJhdGluZyc6ICAgICAgICAgICAgICAgICAgIFwiU3BlZWQgUmF0aW5nXCIsXHJcbiAgICAgICAgJ2FueS1zcGVlZC1yYXRpbmdzJzogICAgICAgICAgICAgIFwiQW55IFNwZWVkIFJhdGluZ3NcIixcclxuICAgICAgICAnZmVhdHVyZXMnOiAgICAgICAgICAgICAgICAgICAgICAgXCJGZWF0dXJlc1wiLFxyXG4gICAgICAgICdhbnktZmVhdHVyZXMnOiAgICAgICAgICAgICAgICAgICBcIkFueSBGZWF0dXJlc1wiLFxyXG4gICAgICAgICdmaW5pc2gnOiAgICAgICAgICAgICAgICAgICAgICAgICBcIkZpbmlzaFwiLFxyXG4gICAgICAgICdzdW1tYXJ5JzogICAgICAgICAgICAgICAgICAgICAgICBcIlN1bW1hcnlcIixcclxuICAgICAgICAnY2hlY2stb3V0LW15LXZlaGljbGUnOiAgICAgICAgICAgXCJDaGVjayBvdXQgbXkgdmVoaWNsZSFcIlxyXG4gICAgfSk7XHJcbn0iXX0=

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vdWlzbGlkZXIuanMiLCJxcmNvZGUuanMiLCJUaW55QW5pbWF0ZS5qcyIsImltcGV0dXMuanMiLCJyc3ZzbS5qcyIsInJzdnIuanMiLCJpbmRleC5qcyIsImllOC5tYXguanMiLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUuanMiLCIuLi9zcmMvc2NyaXB0cy9SaWRlU3R5bGVyU2hvd2Nhc2UuYXBpLmF1dGgudHMiLCIuLi9zcmMvc2NyaXB0cy9SaWRlU3R5bGVyU2hvd2Nhc2UuYXBpLnNldHRpbmdzLnRzIiwiLi4vc3JjL3NjcmlwdHMvUmlkZVN0eWxlclNob3djYXNlLmFwaS50cyIsInNjcmlwdHMvUmlkZVN0eWxlclNob3djYXNlLmRhdGEuanMiLCIuLi9zcmMvc2NyaXB0cy9SaWRlU3R5bGVyU2hvd2Nhc2UuZXZlbnRzLnRzIiwiLi4vc3JjL3NjcmlwdHMvUmlkZVN0eWxlclNob3djYXNlLmZpbHRlcnMudHMiLCJzY3JpcHRzL1JpZGVTdHlsZXJTaG93Y2FzZS5maWx0ZXJzLmpzIiwiLi4vc3JjL3NjcmlwdHMvUmlkZVN0eWxlclNob3djYXNlLnN0YXRlLnRzIiwiLi4vc3JjL3NjcmlwdHMvUmlkZVN0eWxlclNob3djYXNlLnN0cmluZ3MudHMiLCIuLi9zcmMvc2NyaXB0cy9SaWRlU3R5bGVyU2hvd2Nhc2Uuc3R5bGVzLnRzIiwiLi4vc3JjL3NjcmlwdHMvUmlkZVN0eWxlclNob3djYXNlLnRzIiwiLi4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9Db21wb25lbnRCYXNlLnRzIiwic2NyaXB0cy9jb21wb25lbnRzL0lDb21wb25lbnQuanMiLCIuLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL01haW5Db21wb25lbnRCYXNlLnRzIiwiLi4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9SZXNpemVhYmxlUmVzb3VyY2VJbWFnZS50cyIsIi4uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvUmlkZVN0eWxlclNob3djYXNlQmFja2dyb3VuZC50cyIsIi4uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvUmlkZVN0eWxlclNob3djYXNlQnV0dG9uUGlja2VyLnRzIiwiLi4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9SaWRlU3R5bGVyU2hvd2Nhc2VDaGFuZ2VXaGVlbFNpemUudHMiLCIuLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL1JpZGVTdHlsZXJTaG93Y2FzZU1vZGFsLnRzIiwiLi4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9SaWRlU3R5bGVyU2hvd2Nhc2VPcHRpb25NZW51LnRzIiwiLi4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9SaWRlU3R5bGVyU2hvd2Nhc2VQYWdpbmF0aW9uQ29tcG9uZW50LnRzIiwic2NyaXB0cy9jb21wb25lbnRzL1JpZGVTdHlsZXJTaG93Y2FzZVBhZ2luYXRpb25Db21wb25lbnQuanMiLCIuLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL1JpZGVTdHlsZXJTaG93Y2FzZVBhaW50U2VsZWN0b3IudHMiLCIuLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL1JpZGVTdHlsZXJTaG93Y2FzZVBvcG92ZXIudHMiLCIuLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL1JpZGVTdHlsZXJTaG93Y2FzZVByb2R1Y3RNb2RhbC50cyIsIi4uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvUmlkZVN0eWxlclNob3djYXNlUHJvZHVjdFNlbGVjdG9yLnRzIiwic2NyaXB0cy9jb21wb25lbnRzL1JpZGVTdHlsZXJTaG93Y2FzZVByb2R1Y3RTZWxlY3Rvci5qcyIsIi4uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvUmlkZVN0eWxlclNob3djYXNlUVJDb2RlQ29tcG9uZW50LnRzIiwiLi4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9SaWRlU3R5bGVyU2hvd2Nhc2VTaGFyZUJ1dHRvbi50cyIsIi4uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvUmlkZVN0eWxlclNob3djYXNlU2hhcmVNb2RhbC50cyIsIi4uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvUmlkZVN0eWxlclNob3djYXNlU3VzcGVuc2lvblNlbGVjdG9yLnRzIiwiLi4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9SaWRlU3R5bGVyU2hvd2Nhc2VUYWJCYXIudHMiLCIuLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL1JpZGVTdHlsZXJTaG93Y2FzZVRhYmxlLnRzIiwiLi4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9SaWRlU3R5bGVyU2hvd2Nhc2VUaXJlU2VsZWN0b3IudHMiLCIuLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL1JpZGVTdHlsZXJTaG93Y2FzZVRvZ2dsZUJ1dHRvbi50cyIsIi4uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvUmlkZVN0eWxlclNob3djYXNlVmVoaWNsZVNlbGVjdGlvbi50cyIsIi4uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvUmlkZVN0eWxlclNob3djYXNlVmVoaWNsZVZpc3VhbGl6YXRpb24udHMiLCJzY3JpcHRzL2NvbXBvbmVudHMvUmlkZVN0eWxlclNob3djYXNlVmVoaWNsZVZpc3VhbGl6YXRpb24uanMiLCJzY3JpcHRzL2NvbXBvbmVudHMvUmlkZVN0eWxlclNob3djYXNlVmlld3BvcnQuanMiLCIuLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL1JpZGVTdHlsZXJTaG93Y2FzZVdoZWVsTW9kYWwudHMiLCIuLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL1JpZGVTdHlsZXJTaG93Y2FzZVdoZWVsU2VsZWN0b3IudHMiLCIuLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL1RpcmVEZXRhaWxzLnRzIiwiLi4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9WZWhpY2xlRGV0YWlscy50cyIsIi4uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvV2hlZWxEZXRhaWxzLnRzIiwiLi4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9tb2RhbHMvUmlkZVN0eWxlclNob3djYXNlRmlsdGVyTW9kYWwudHMiLCIuLi9zcmMvc2NyaXB0cy9oZWxwZXJzL0FycmF5SGVscGVyLnRzIiwiLi4vc3JjL3NjcmlwdHMvaGVscGVycy9Cb3hIZWxwZXIudHMiLCIuLi9zcmMvc2NyaXB0cy9oZWxwZXJzL0dVSURIZWxwZXIudHMiLCIuLi9zcmMvc2NyaXB0cy9oZWxwZXJzL0hUTUxIZWxwZXIudHMiLCIuLi9zcmMvc2NyaXB0cy9oZWxwZXJzL051bWJlckhlbHBlci50cyIsIi4uL3NyYy9zY3JpcHRzL2hlbHBlcnMvT2JqZWN0SGVscGVyLnRzIiwiLi4vc3JjL3NjcmlwdHMvaGVscGVycy9Qcm9taXNlSGVscGVyLnRzIiwiLi4vc3JjL3NjcmlwdHMvaGVscGVycy9TY3JvbGxIZWxwZXIudHMiLCIuLi9zcmMvc2NyaXB0cy9oZWxwZXJzL1N0cmluZ0hlbHBlci50cyIsIi4uL3NyYy9zY3JpcHRzL2hlbHBlcnMvU3R5bGVIZWxwZXIudHMiLCIuLi9zcmMvc2NyaXB0cy9oZWxwZXJzL1Zpc2liaWxpdHlIZWxwZXIudHMiLCIuLi9zcmMvc2NyaXB0cy9zdHJpbmdzL1JpZGVTdHlsZXJTaG93Y2FzZS5zdHJpbmdzLmVuLnRzIl0sIm5hbWVzIjpbIlJpZGVTdHlsZXJTaG93Y2FzZSIsImFwaSIsImF1dGgiLCJ2YWxpZGF0ZSIsInJlcXVlc3QiLCJzZXR0aW5ncyIsInNldHRpbmdzXzEiLCJkZWZhdWx0U2V0dGluZ3MiLCJFbmFibGVTaGFyaW5nIiwiU3VzcGVuc2lvblJhbmdlcyIsIkRlZmF1bHQiLCJNaW4iLCJNYXgiLCJUcnVjazRXRCIsIlZhbjRXRCIsIlVzZVJhd1RpcmVEZXNjcmlwdGlvbiIsImdldFNldHRpbmdzIiwiUHJvbWlzZUhlbHBlciIsInRoZW4iLCJLZXlzIiwicmVzcG9uc2UiLCJTZXR0aW5ncyIsInBhcnNlQm9vbGVhbiIsInBhcnNlU3VzcGVuc2lvblJhbmdlcyIsImJvb2xlYW4iLCJmaXJzdENoYXIiLCJzdXNwZW5zaW9uUmFuZ2VzU2V0dGluZyIsInN1c3BlbnNpb25SYW5nZXMiLCJKU09OIiwicGFyc2UiLCJlIiwiY29uc29sZSIsImVycm9yIiwiaW5pdGlhbGl6ZSIsInJpZGVzdHlsZXIiLCJzdGFydCIsImRhdGEiLCJVc2VybmFtZSIsInVzZXJuYW1lIiwiUGFzc3dvcmQiLCJwYXNzd29yZCIsImNhbGxiYWNrIiwiU3VjY2VzcyIsImF1dGhlbnRpY2F0ZWQiLCJyZXNvbHZlIiwicmVqZWN0IiwiZ2V0VVJMIiwic2V0IiwiZG9uZSIsInVybCIsImFqYXgiLCJ1bmRlZmluZWQiLCJ0ZXN0IiwiZW52aXJvbm1lbnQiLCJFbnZpcm9ubWVudCIsIkFscGhhIiwiQmV0YSIsIkxpdmUiLCJPdGhlciIsImZhaWwiLCJwcm9taXNlIiwiaXNBdXRoZW50aWNhdGVkIiwic3RhdGUiLCJhZnRlckF1dGhlbnRpY2F0ZWQiLCJhY3Rpb24iLCJzZW5kIiwiZXZlbnRzIiwiRXZlbnRIYW5kbGVyIiwiZXZlbnRIYW5kbGVycyIsImV2ZW50TmFtZSIsInB1c2giLCJBcnJheUhlbHBlciIsInJlbW92ZSIsImV2IiwiZGVidWdDYWxsYmFjayIsImV2ZW50SGFuZGxlciIsImZpbHRlcnMiLCJmaWx0ZXJzXzEiLCJGaWx0ZXJDb250cm9sbGVyIiwiZ2xvYmFsRmlsdGVycyIsIkdsb2JhbEZpbHRlclByb3ZpZGVyIiwidGlyZUZpbHRlcnMiLCJUaXJlRmlsdGVyUHJvdmlkZXIiLCJ3aGVlbEZpbHRlcnMiLCJXaGVlbEZpbHRlclByb3ZpZGVyIiwidmVoaWNsZSIsImNsZWFyRmlsdGVycyIsInNldFZlaGljbGUiLCJ2ZWhpY2xlRGVzY3JpcHRpb24iLCJzZXRWZWhpY2xlRGVzY3JpcHRpb24iLCJ0cmlnZ2VyQ2hhbmdlIiwiY2xlYXIiLCJGaWx0ZXJQcm92aWRlciIsInR5cGUiLCJnbG9iYWxGaWx0ZXJQcm92aWRlciIsImN1cnJlbnRGaWx0ZXJzIiwib25GaWx0ZXJzQ2hhbmdlZCIsImdldEZpbHRlcnMiLCJmaWx0ZXJWYWx1ZXMiLCJiYXNlRmlsdGVycyIsImZpbHRlclZhbHVlIiwia2V5IiwidmFsdWUiLCJzZXRGaWx0ZXIiLCJPYmplY3RIZWxwZXIiLCJhc3NpZ24iLCJmaWx0ZXIiLCJyZXRyaWV2ZU9wdGlvbnMiLCJmaWx0ZXJPcHRpb24iLCJmaW5kRmlsdGVyT3B0aW9uIiwiYXBwbHkiLCJmaWx0ZXJPcHRpb25zIiwic2VsZWN0ZWRGaWx0ZXJzT3JLZXkiLCJuZXdGaWx0ZXJzIiwic2VsZWN0ZWRGaWx0ZXJzIiwic2VsZWN0ZWRGaWx0ZXIiLCJoYXNDaGFuZ2VkIiwiaGFzT3duUHJvcGVydHkiLCJuZXdGaWx0ZXJWYWx1ZSIsImN1cnJlbnRGaWx0ZXJWYWx1ZSIsInRyaWdnZXJGaWx0ZXJDaGFuZ2UiLCJ2ZWhpY2xlQ29uZmlnRmlsdGVyS2V5IiwiSGFzRml0bWVudHMiLCJIYXNDYXRhbG9nSW1hZ2UiLCJ2aXNpYmxlIiwidmVoaWNsZUNvbmZpZ3VyYXRpb25JRCIsInZlaGljbGVUaXJlT3B0aW9uSUQiLCJWZWhpY2xlQ29uZmlndXJhdGlvbiIsIlZlaGljbGVUaXJlT3B0aW9uIiwiSGFzU2lkZUltYWdlIiwiSGFzQW5nbGVkSW1hZ2UiLCJSZXF1aXJlZEZpdG1lbnRSZXNvdXJjZVR5cGVzIiwibGFiZWwiLCJzdHJpbmdzIiwiZ2V0U3RyaW5nIiwidW5zZWxlY3RlZE9wdGlvbkxhYmVsIiwibWFwIiwiQnJhbmRzIiwiYnJhbmQiLCJUaXJlQnJhbmROYW1lIiwiVGlyZUJyYW5kSUQiLCJnZXRWYWx1ZUZyb21GaWx0ZXJzIiwiVGlyZUJyYW5kIiwidGlyZUJyYW5kSUQiLCJBdHRyaWJ1dGVzIiwiYXR0cmlidXRlIiwiVGlyZU1vZGVsQXR0cmlidXRlTmFtZSIsIlRpcmVNb2RlbEF0dHJpYnV0ZUlEIiwiUmVxdWlyZWRUaXJlTW9kZWxBdHRyaWJ1dGUiLCJhdHRyaWJ1dGVJRCIsIlNwZWVkUmF0aW5ncyIsIlRpcmVTcGVlZFJhdGluZ0NvZGUiLCJUaXJlU3BlZWRSYXRpbmdJRCIsIlNwZWVkUmF0aW5nIiwic3BlZWRSYXRpbmdJRCIsIkNvdW50IiwiV2hlZWxCcmFuZE5hbWUiLCJXaGVlbEJyYW5kSUQiLCJXaGVlbEJyYW5kIiwid2hlZWxCcmFuZElEIiwiRmluaXNoZXMiLCJmaW5pc2hDYXRlZ29yeSIsIldoZWVsRmluaXNoQ2F0ZWdvcnlOYW1lIiwiV2hlZWxGaW5pc2hDYXRlZ29yeUlEIiwiV2hlZWxGaW5pc2hDYXRlZ29yeSIsIndoZWVsRmluaXNoQ2F0ZWdvcnlJRCIsIkRpYW1ldGVycyIsImRpYW1ldGVyIiwidG9TdHJpbmciLCJnZXRGaXRtZW50RmlsdGVyVmFsdWUiLCJGaXRtZW50RmlsdGVycyIsImFwcGx5Rml0bWVudEZpbHRlciIsIkRpYW1ldGVyIiwiZml0bWVudEZpbHRlciIsIkdyb3VwS2V5IiwiZml0bWVudEZpbHRlckdyb3VwS2V5IiwiZml0bWVudEZpbHRlcnMiLCJleGlzdGluZ0ZpdG1lbnRGaWx0ZXJHcm91cCIsImFwcGxpZWRGaXRtZW50RmlsdGVyIiwiU3RhdGVzIiwic3RhdGVfMSIsIlN0YXRlQ2FsbGJhY2tSZWdpc3RlciIsImV4aXRDYWxsYmFja3MiLCJlbnRlckNhbGxiYWNrcyIsImN1cnJlbnRTdGF0ZSIsIm5ld1N0YXRlIiwibmV3RGF0YSIsImV4aXRDYWxsYmFjayIsIm9sZFN0YXRlIiwiZW50ZXJDYWxsYmFjayIsIlJpZGVTdHlsZXJTaG93Y2FzZVN0YXRlIiwiaW5pdGlhbFN0YXRlIiwiY3VycmVudERhdGEiLCJjdXJyZW50VmVoaWNsZUNvbmZpZ3VyYXRpb25JRCIsImN1cnJlbnRWZWhpY2xlRGVzY3JpcHRpb24iLCJ2ZWhpY2xlSGFzQW5nbGVkSW1hZ2UiLCJ2ZWhpY2xlSGFzU2lkZUltYWdlIiwiY3VycmVudFZlaGljbGVUaXJlT3B0aW9uRGVzY3JpcHRpb24iLCJjdXJyZW50VmVoaWNsZVRpcmVPcHRpb25JRCIsImN1cnJlbnRQYWludFNjaGVtZSIsImN1cnJlbnRUaXJlIiwiY3VycmVudFdoZWVsIiwiY3VycmVudFdoZWVsRml0bWVudCIsImN1cnJlbnRUaXJlT3B0aW9uIiwiY3VycmVudFZlaGljbGVEZXNjcmlwdGlvbk1vZGVsIiwiY2FsbGJhY2tzIiwiY2hhbmdlQ2FsbGJhY2tzIiwiZGF0YUNoYW5nZWRDYWxsYmFja3MiLCJiZWZvcmVDYWxsYmFja3MiLCJhZnRlckNhbGxiYWNrcyIsImRhdGFDaGFuZ2VkQ2FsbGJhY2siLCJiZWZvcmUiLCJkYXRhRXh0ZW5zaW9uIiwiY3VycmVudFZhbHVlIiwibmV3VmFsdWUiLCJzZXREYXRhIiwiY2FsbGJhY2tzRm9yU3RhdGUiLCJwcmV2aW91c1N0YXRlIiwic3RhdGVDaGFuZ2VkRXZlbnQiLCJ0cmlnZ2VyRXhpdENhbGxiYWNrcyIsInRyaWdnZXJFbnRlckNhbGxiYWNrcyIsImRlZmF1bHRMYW5ndWFnZUZvcm1hdFByb3ZpZGVyIiwiY3VycmVuY3kiLCJudW1iZXIiLCJzeW1ib2wiLCJ0b0ZpeGVkIiwidG9Mb2NhbGVTdHJpbmciLCJMYW5ndWFnZUtleXMiLCJMYW5ndWFnZVJlZ2lzdGVyIiwibGFuZ3VhZ2UiLCJmb3JtYXQiLCJkZWZhdWx0TGFuZ3VhZ2UiLCJsYW5ndWFnZVJlZ2lzdGVycyIsInJlZ2lzdGVyTGFuZ3VhZ2UiLCJsYW5ndWFnZUtleSIsInNldEFzRGVmYXVsdCIsImxhbmd1YWdlUmVnaXN0ZXIiLCJzZXREZWZhdWx0TGFuZ3VhZ2UiLCJsYW5ndWFnZUlzUmVnaXN0ZXJlZCIsImdldExhbmd1YWdlIiwic3RyaW5nIiwic3R5bGVzIiwid2lkdGhCcmVha3BvaW50cyIsIlN0eWxlTWFuYWdlciIsImVsZW1lbnQiLCJpbml0aWFsaXplZCIsImluaXRpYWxpemVCcmVha3BvaW50cyIsIndhdGNoU2l6ZSIsImluaXRpYWxpemVDU1MiLCJyZXNvbHZlT25ET01Mb2FkIiwiaW5pdGlhbGl6ZVN0eWxlQ2xhc3NlcyIsImRvY3VtZW50IiwicmVhZHlTdGF0ZSIsIndpbmRvdyIsImFkZEV2ZW50TGlzdGVuZXIiLCJTdHlsZUhlbHBlciIsImlzT2Zmc2V0UG9zaXRpb25lZCIsInN0eWxlIiwicG9zaXRpb24iLCJjb250YWluZXJEb2N1bWVudCIsIm93bmVyRG9jdW1lbnQiLCJoZWFkIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJpdGVtIiwiY3JlYXRlRWxlbWVudCIsImRvY3VtZW50RWxlbWVudCIsImluc2VydEJlZm9yZSIsImZpcnN0Q2hpbGQiLCJzdHlsZXNoZWV0IiwiYXBwZW5kQ2hpbGQiLCJjcmVhdGVUZXh0Tm9kZSIsImNzcyIsIkhUTUxIZWxwZXIiLCJmaXJzdENoaWxkV2l0aFRhZyIsImlzVG91Y2hEZXZpY2UiLCJjbGFzc0xpc3QiLCJhZGQiLCJzb3J0IiwiYSIsImIiLCJhcHBseUJyZWFrcG9pbnRDbGFzc2VzIiwiZ2V0RG9jdW1lbnQiLCJnZXRXaW5kb3ciLCJvblJlc2l6ZSIsIm9uUmVzaXplZCIsIm5ld0JyZWFrcG9pbnQiLCJvbkJyZWFrcG9pbnRDaGFuZ2VkIiwidGltZXIiLCJyZXNpemVkRXZlbnREZWxheSIsImVsZW1lbnRTaXplIiwid2lkdGgiLCJjbGllbnRXaWR0aCIsImhlaWdodCIsImNsaWVudEhlaWdodCIsIm5ld0VsZW1lbnRTaXplIiwicmVzaXplIiwiY2xlYXJUaW1lb3V0Iiwic2V0VGltZW91dCIsInJlc2l6ZWQiLCJjdXJyZW50QnJlYWtwb2ludCIsIm9mZnNldEhlaWdodCIsIm9mZnNldFdpZHRoIiwiaSIsImxlbmd0aCIsIm9yaWdpbmFsQ2xhc3NOYW1lIiwiY2xhc3NOYW1lIiwicmVwbGFjZSIsInRyaW0iLCJicmVha3BvaW50Q2hhbmdlZCIsIlJpZGVTdHlsZXJTaG93Y2FzZUluc3RhbmNlIiwiY29udGFpbmVyIiwiYWN0aXZlTG9hZGluZ1Nlc3Npb25LZXlzIiwiZGVidWciLCJuYW1lIiwiaGFuZGxlcnMiLCJsb2ciLCJnZXRFbGVtZW50QnlJZCIsIm90aGVyQ29tcG9uZW50cyIsIlJpZGVTdHlsZXJTaG93Y2FzZUJhY2tncm91bmQiLCJzdGF0ZUNvbXBvbmVudE1hcHBpbmciLCJDaG9vc2VWZWhpY2xlIiwiUmlkZVN0eWxlclNob3djYXNlVmVoaWNsZVNlbGVjdGlvbiIsIlZpc3VhbGl6ZSIsIlJpZGVTdHlsZXJTaG93Y2FzZVZlaGljbGVWaXN1YWxpemF0aW9uIiwibWFpbkNvbXBvbmVudHMiLCJyaWRlc3R5bGVyU2hvd2Nhc2UiLCJpbml0aWFsaXplU3RhdGUiLCJyZWdpc3RlckNvbXBvbmVudHMiLCJpbml0aWFsaXplU3R5bGUiLCJpbml0aWFsaXplRmlsdGVycyIsImluaXRpYWxpemVDb21wb25lbnRzIiwib24iLCJjaGFuZ2VTdGF0ZSIsInNlbGVjdGlvbiIsIlZlaGljbGVEZXNjcmlwdGlvbiIsIlRpcmVPcHRpb25JRCIsIlRpcmVPcHRpb25TdHJpbmciLCJzZXR0aW5nc1JldHJpZXZlZCIsInNldHRpbmdzRnJvbUFQSSIsImFsbCIsInRyaWdnZXIiLCJvblN0YXRlQ2hhbmdlZCIsImZpbmlzaGVkIiwiZmluaXNoZWRTdHJpbmciLCJzdGF0ZUNoYW5nZSIsIm9uQ2hhbmdlIiwiY29udGFpbnMiLCJzZWxlY3RlZFZlaGljbGUiLCJjb21wb25lbnQiLCJzZXRWaXNpYmxlIiwidXBkYXRlQ3VycmVudENvbXBvbmVudCIsIm5ld0NvbXBvbmVudCIsIm9sZENvbXBvbmVudCIsInN0YXRlQ2xhc3NQcmVmaXgiLCJ0b0xvd2VyQ2FzZSIsImlzVmlzaWJsZSIsImhpZGUiLCJzaG93IiwiY3JlYXRlIiwiQ29tcG9uZW50QmFzZSIsInNob3djYXNlSW5zdGFuY2UiLCJzaG93Y2FzZSIsImluaXRpYWxpemVDb21wb25lbnQiLCJNYWluQ29tcG9uZW50QmFzZSIsInRyYW5zaXRpb25zU3VwcG9ydGVkIiwidHJhbnNpdGlvbkVuZEV2ZW50IiwidGFyZ2V0Iiwib25UcmFuc2l0aW9uRW5kIiwiYnVpbGRDb21wb25lbnQiLCJpbml0aWFsaXplTWFpbkNvbXBvbmVudCIsIl92aXNpYmxlIiwic2V0VmlzaWJsZVN0eWxpbmciLCJza2lwVHJhbnNpdGlvbiIsInZpc2liaWxpdHkiLCJ0b3AiLCJfYW5pbWF0aW5nIiwib25OZXh0VHJhbnNpdGlvbkVuZCIsImNhbGwiLCJjYWxsV2hlbkRvbmVBbmltYXRpbmciLCJvblNob3ciLCJ0cmlnZ2VyUmVmbG93Iiwib25EaXNwbGF5Iiwib25TaG93biIsIm9uSGlkZSIsIm9uSGlkZGVuIiwiZGVmYXVsdFNpemUiLCJtaW5pbXVtU2l6ZSIsIm1heGltdW1TaXplIiwiZGVmYXVsdFBvc2l0aW9uIiwiUG9zaXRpb25ZIiwiUG9zaXRpb25YIiwiUmVzaXplYWJsZVJlc291cmNlSW1hZ2UiLCJvcHRpb25zIiwicmVzaXplQ2FsbGJhY2siLCJ1cGRhdGUiLCJpbWFnZSIsInRyYW5zaXRpb25DbGFzcyIsInVzZVRyYW5zaXRpb25zIiwidHJhbnNpdGlvbkluQ2xhc3MiLCJwYWRkaW5nIiwiY2FsY3VsYXRlUGFkZGluZyIsImltYWdlTG9hZENhbGxiYWNrIiwib25Mb2FkIiwiaW1hZ2VFcnJvckNhbGxiYWNrIiwib25FcnJvciIsIm9uSW1hZ2VFcnJvciIsIm9uSW1hZ2VMb2FkIiwiZXZlbnQiLCJiYXNlSW5zdHJ1Y3Rpb25zIiwiaW5zdHJ1Y3Rpb25zIiwibG9hZEluaXRpYWxseSIsImxpc3RlblRvV2luZG93UmVzaXplIiwidGltZW91dCIsIndhaXRNcyIsInJlZ2lzdGVyZWRFdmVudCIsImV2ZW50VHlwZSIsImxpc3RlbmVyIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImVycm9yRXZlbnQiLCJWaXNpYmlsaXR5SGVscGVyIiwiaW1hZ2VEaXNwbGF5Q2FsbGJhY2siLCJkZXRlY3RlZFNpemUiLCJwaXhlbFJhdGlvIiwiZGV2aWNlUGl4ZWxSYXRpbyIsIkJveEhlbHBlciIsImZsb29yIiwiYm91bmQiLCJib3giLCJjdXJyZW50U2l6ZSIsInRoaXNXaWR0aCIsInRoaXNIZWlnaHQiLCJib3hXaWR0aCIsImJveEhlaWdodCIsIm5lZWRzVXBkYXRlIiwicmVuZGVyU2l6ZSIsImNhbGN1bGF0ZVJlbmRlclNpemUiLCJzaXplSXNEaWZmZXJlbnQiLCJzcmMiLCJXaWR0aCIsIkhlaWdodCIsImJhY2tncm91bmRFbGVtZW50IiwiYmFja2dyb3VuZFRleHR1cmUiLCJhcHBlbmRUbyIsIm9wdGlvbkNsYXNzIiwiYWN0aXZlQ2xhc3MiLCJvcHRpb25zQ291bnQiLCJSaWRlU3R5bGVyU2hvd2Nhc2VCdXR0b25QaWNrZXIiLCJ0ZXh0IiwidGl0bGUiLCJvcHRpb25Db250YWluZXIiLCJvcGFjaXR5IiwidHJhbnNmb3JtIiwib25PcHRpb25DbGljayIsImVtcHR5IiwiZnJhZ21lbnQiLCJjcmVhdGVEb2N1bWVudEZyYWdtZW50Iiwib3B0aW9uIiwib3B0aW9uRWxlbWVudCIsIk9iamVjdCIsImFjdGl2ZSIsImN1cnJlbnRUYXJnZXQiLCJjaGlsZHJlbldpdGhDbGFzc2VzIiwiY2hpbGQiLCJvcHRpb25TZWxlY3RlZENhbGxiYWNrIiwicGFyZW50RWxlbWVudCIsIlJpZGVTdHlsZXJTaG93Y2FzZUNoYW5nZVdoZWVsU2l6ZSIsImZpdG1lbnRzIiwiYWN0aXZlRml0bWVudCIsInNlZW5EaWFtZXRlcnMiLCJkaWFtZXRlckZpdG1lbnRzIiwiZml0bWVudCIsIkRpYW1ldGVyTWluIiwiZGlzcGxheSIsInNldE9wdGlvbnMiLCJkaWFtZXRlckZpdG1lbnQiLCJtb2RhbENsYXNzIiwiYmFja2Ryb3BDbGFzcyIsIlJpZGVTdHlsZXJTaG93Y2FzZU1vZGFsIiwiY3JlYXRlQmFja2Ryb3BJZk5lZWRlZCIsImJ1aWxkTW9kYWwiLCJzZXRWaXNpYmlsaXR5IiwicGFyZW50IiwibW9kYWwiLCJmdWxsIiwiYWN0aW9ucyIsImJ1aWxkQWN0aW9ucyIsImFjdGlvbkNvbnRhaW5lciIsImFjdGlvbkJ1dHRvbiIsImNyZWF0ZUJ1dHRvbiIsInJlbW92ZU9uSGlkZGVuIiwicmVtb3ZlQ2hpbGQiLCJoYXNDaGlsZFdpdGhDbGFzcyIsIlJpZGVTdHlsZXJTaG93Y2FzZU1vZGFsQmFja2Ryb3AiLCJidWlsZEJhY2tkcm9wIiwiY3JlYXRlRWxlbWVudFdpdGhDbGFzcyIsInRvcFZpc2libGVNb2RhbCIsImxhc3RTaWJsaW5nV2l0aENsYXNzIiwiaGFzVmlzaWJsZU1vZGFsIiwiaGFzU2libGluZ1dpdGhDbGFzcyIsIm9wdGlvbk1lbnVDbGFzcyIsIm9wdGlvbk1lbnVPcHRpb25DbGFzcyIsIm9wdGlvbk1lbnVPcHRpb25BY3RpdmVDbGFzcyIsIm9wdGlvbk1lbnVMb2FkaW5nQ2xhc3MiLCJSaWRlU3R5bGVyU2hvd2Nhc2VPcHRpb25NZW51Iiwib25DbGlja2VkIiwiY2xpY2tFdmVudCIsInNldExvYWRpbmciLCJsb2FkaW5nIiwidG9nZ2xlIiwiZ2VuZXJhdGVPcHRpb25FbGVtZW50IiwiY2xlYXJPcHRpb25zIiwiYXBwZW5kT3B0aW9ucyIsImluZGV4IiwiY2hpbGRyZW4iLCJwcmV2aW91c2x5U2VsZWN0ZWRPcHRpb24iLCJmaXJzdENoaWxkV2l0aENsYXNzIiwibmV3U2VsZWN0ZWRPcHRpb24iLCJwcmV2QnV0dG9uQ2xhc3MiLCJuZXh0QnV0dG9uQ2xhc3MiLCJvcHRpb25TZWxlY3RlZENsYXNzIiwib3B0aW9uTG9hZGluZ0NsYXNzIiwib3B0aW9uTG9hZGVyQ2xhc3MiLCJub1Jlc3VsdHNDbGFzcyIsIlJpZGVTdHlsZXJTaG93Y2FzZVBhZ2luYXRpb25Db21wb25lbnQiLCJhcmd1bWVudHMiLCJoYXNNb3JlUmVzdWx0cyIsImlzTG9hZGluZyIsImlzRmlyc3RMb2FkIiwiZW5hYmxlU2hvd05vUmVzdWx0cyIsInByZXZCdXR0b24iLCJhcHBlbmQiLCJjcmVhdGVJY29uIiwibmV4dEJ1dHRvbiIsIm9uQ29tcG9uZW50Q2xpY2siLCJsb2FkTW9yZSIsIlNjcm9sbEhlbHBlciIsImF0dGFjaFdoZWVsTGlzdGVuZXIiLCJkZWx0YSIsImRlbHRhWCIsImRlbHRhWSIsInNjcm9sbExlZnQiLCJzY3JvbGxXaWR0aCIsIk1hdGgiLCJtaW4iLCJ0b3VjaFNjcm9sbEhhbmRsZXIiLCJzZXRWYWx1ZXMiLCJvblNjcm9sbCIsIkltcGV0dXMiLCJzb3VyY2UiLCJib3VuY2UiLCJtdWx0aXBsaWVyIiwieCIsInkiLCJzY3JvbGxUb3AiLCJib3VuZFkiLCJfbG9hZE1vcmUiLCJhbHdheXMiLCJjbGVhck9wdGlvbkxvYWRlciIsInVwZGF0ZUJvdW5kcyIsInNldEJvdW5kWCIsInVwZGF0ZVBhZ2luYXRpb25CdXR0b25zIiwicmVhY2hlZEVuZFRvbGVyYW5jZSIsIm9uRW5kVmlzaWJsZSIsImFkZE9wdGlvbkxvYWRlciIsInByZXZpb3VzUGFnZSIsIm5leHRQYWdlIiwiZGlzYWJsZWQiLCJyZW1vdmVDaGlsZHJlbldpdGhDbGFzc2VzIiwiZWxlbWVudHMiLCJoYXNOb1Jlc3VsdHMiLCJEb2N1bWVudEZyYWdtZW50IiwiY2hpbGROb2RlcyIsIk5vZGUiLCJzaG93Tm9SZXN1bHRzIiwibm9SZXN1bHRzRWxlbWVudCIsIm5ld0xlZnQiLCJzdGFydExlZnQiLCJkdXJhdGlvbiIsImFicyIsIlRpbnlBbmltYXRlIiwiYW5pbWF0ZSIsImN1cnJlbnRMZWZ0Iiwic2Nyb2xsVG8iLCJzZWxlY3RlZE9wdGlvbiIsIm9sZE9wdGlvbkVsZW1lbnQiLCJzZWxlY3RPcHRpb24iLCJyZXN1bHRzUGVyUmVxdWVzdCIsIlJpZGVTdHlsZXJTaG93Y2FzZVBhaW50U2VsZWN0b3IiLCJnZXREYXRhIiwiY3JlYXRlT3B0aW9ucyIsIlNjaGVtZXMiLCJzY2hlbWVzIiwic2NoZW1lIiwicGFpbnRTY2hlbWUiLCJjb2xvciIsIkNvbG9ycyIsInN3YXRjaCIsImJhY2tncm91bmRDb2xvciIsIkhleCIsIlNjaGVtZU5hbWUiLCJhdHRyaWJ1dGVzIiwiY3JlYXRlQXR0cmlidXRlTGFiZWwiLCJleHRlbmREYXRhIiwib25QYWludFNjaGVtZVNlbGVjdGVkIiwiZGVmYXVsdEF0dHJpYnV0ZVN0cmluZyIsInN0cmluZ0F0dHJpYnV0ZXMiLCJqb2luIiwicG9wb3ZlckNsYXNzIiwicG9wb3ZlckluQ2xhc3MiLCJSaWRlU3R5bGVyU2hvd2Nhc2VQb3BvdmVyIiwicHJvZHVjdE1vZGFsQ2xhc3MiLCJ0aXRsZUNsYXNzIiwicGFnZUNsYXNzIiwiUmlkZVN0eWxlclNob3djYXNlUHJvZHVjdE1vZGFsIiwidG9nZ2xlQnV0dG9uIiwiUmlkZVN0eWxlclNob3djYXNlVG9nZ2xlQnV0dG9uIiwib25DaGFuZ2VkIiwicGFnZXMiLCJwYWdlIiwic2hvd1BhZ2UiLCJicmFuZFRpdGxlRWxlbWVudCIsInRpdGxlRWxlbWVudCIsInN1YnRpdGxlRWxlbWVudCIsInN1bW1hcnlDb250YWluZXIiLCJpbWFnZUNvbnRhaW5lciIsImNyZWF0ZUltYWdlIiwic3VtbWFyeUVsZW1lbnQiLCJhZGRQYWdlIiwiYWRkT3B0aW9uIiwibmV3UGFnZSIsInNldFZhbHVlIiwiZGVzdHJveSIsIlJpZGVTdHlsZXJTaG93Y2FzZVByb2R1Y3RTZWxlY3RvciIsInJlc3VsdHNQZXJMb2FkIiwiY291bnQiLCJjb3VudFByb21pc2UiLCJyZXNvbHZlZCIsImNvdW50UmVzdWx0cyIsInByb2R1Y3RDb3VudCIsIlN0YXJ0IiwiZ2V0UmVzdWx0cyIsInByb2R1Y3RzIiwiZmlsdGVyVXBkYXRlcyIsInNldEZpbHRlcnMiLCJwcm9kdWN0IiwicHJvZHVjdEZpbHRlciIsImltYWdlU291cmNlIiwicHJvZHVjdEltYWdlU291cmNlIiwicHJvcGVydGllcyIsInByb2R1Y3RJbWFnZUxhYmVscyIsInByaW1hcnkiLCJzZWNvbmRhcnkiLCJ0ZXJ0aWFyeSIsImFkZE9wdGlvbkVsZW1lbnRzIiwib25Qcm9kdWN0Q2xpY2siLCJwcm9kdWN0U2VsZWN0ZWRDYWxsYmFjayIsIlJpZGVTdHlsZXJTaG93Y2FzZVFSQ29kZUNvbXBvbmVudCIsImxpbmsiLCJxckNvZGVFbGVtZW50IiwicXJDb2RlIiwiUVJDb2RlIiwiZGlzcGxheVVSTCIsImhyZWYiLCJtYWtlQ29kZSIsInNoYXJlIiwiYnV0dG9uQ2xhc3MiLCJTaGFyZUJ1dHRvbiIsIm9uQ2xpY2siLCJjdXJyZW50VVJMIiwidGFncyIsIm1lc3NhZ2UiLCJkZWZhdWx0SGVpZ2h0IiwiZGVmYXVsdFdpZHRoIiwic2NyZWVuSGVpZ2h0Iiwic2NyZWVuIiwic2NyZWVuV2lkdGgiLCJyb3VuZCIsImxlZnQiLCJ3aW5kb3dTZXR0aW5ncyIsImFkZFNldHRpbmciLCJhZGRCb29sZWFuU2V0dGluZyIsImVuYWJsZWQiLCJlbmFibGVkQnlEZWZhdWx0IiwiZW5hYmxlU2Nyb2xsYmFycyIsImVuYWJsZVJlc2l6ZWFibGUiLCJlbmFibGVUb29sYmFyIiwiZW5hYmxlTG9jYXRpb24iLCJvcGVuIiwiYXBwVVJMIiwidHdpdHRlckludGVudFVSTCIsIlR3aXR0ZXJTaGFyZUJ1dHRvbiIsInR3aXR0ZXJJbnRlbnRQYXJhbWV0ZXJzIiwiZW5jb2RlVVJJQ29tcG9uZW50IiwidGFnIiwib3Blbk5ld1dpbmRvdyIsIkZhY2Vib29rU2hhcmVCdXR0b24iLCJmYWNlYm9va0RpYWxvZ1BhcmFtZXRlcnMiLCJnZXRTaGFyZVJlZGlyZWN0VVJMIiwiTmV3V2luZG93U2hhcmVCdXR0b24iLCJRUlNoYXJlQnV0dG9uIiwicG9wb3ZlciIsInNoYXJlTW9kYWxDbGFzcyIsIlJpZGVTdHlsZXJTaG93Y2FzZVNoYXJlTW9kYWwiLCJ2ZWhpY2xlUmVuZGVySW5zdHJ1Y3Rpb25zIiwiaW1hZ2VUeXBlIiwicmVzaXplZENhbGxiYWNrIiwidXBkYXRlVmlld3BvcnQiLCJvbkluc3RydWN0aW9uc0NoYW5nZWQiLCJiYWNrZ3JvdW5kIiwiY3JlYXRlU2hhcmVCdXR0b25zIiwiY2FuU3dpdGNoQW5nbGUiLCJyb3RhdGVFbGVtZW50Iiwic3dpdGNoQW5nbGUiLCJzaGFyZUJ1dHRvbnMiLCJzaGFyZUJ1dHRvbkNvbnRhaW5lciIsInNoYXJlQnV0dG9uIiwic2V0dXBWaWV3cG9ydCIsIm9mZiIsInZlaGljbGVWaWV3cG9ydCIsIlVwZGF0ZSIsInNoYXJlUGF0aCIsInNoYXJlUGFyYW1zIiwidXRpbHMiLCJ0b1BhcmFtU3RyaW5nIiwiYXV0aGVudGljYXRlRGF0YSIsInZpZXdwb3J0RWxlbWVudCIsIlJpZGVTdHlsZXJWaWV3cG9ydCIsInZpZXdwb3J0VXBkYXRlZCIsInNoYXJlVVJMIiwiZ2V0U2hhcmVVUkwiLCJzZXRFbmFibGVkIiwiVVJMIiwidXBkYXRlVVJMIiwiU2hvcnRVUkwiLCJzaGFyZVRhZ3MiLCJzaGFyZU1lc3NhZ2UiLCJXaGVlbEZpdG1lbnQiLCJzZXRVUkwiLCJzZXRUYWdzIiwic2V0TWVzc2FnZSIsIlR5cGUiLCJlbGVtZW50Q2xhc3NOYW1lIiwiZGVmYXVsdFN1c3BlbnNpb25SYW5nZSIsIlJpZGVTdHlsZXJTaG93Y2FzZVN1c3BlbnNpb25TZWxlY3RvciIsInN1c3BlbnNpb25PcHRpb25zIiwibWF4Iiwic3RlcCIsImRlY2ltYWxQbGFjZXMiLCJ1bml0QWJicmV2aWF0aW9uIiwiU3R5bGVUeXBlIiwiRHJpdmVUeXBlIiwic3VzcGVuc2lvblJhbmdlS2V5Iiwic3VzcGVuc2lvblJhbmdlIiwiZnJvbnRBbmRSZWFyIiwiTm9VSVN1c3BlbnNpb25FbGVtZW50Iiwic3VzcGVuc2lvbkNoYW5nZWRDYWxsYmFjayIsInN1c3BlbnNpb25DaGFuZ2VDYWxsYmFjayIsIlN1c3BlbnNpb24iLCJTdXNwZW5zaW9uVUlFbGVtZW50Iiwic2xpZGVyRWxlbWVudCIsIm5vVWlTbGlkZXIiLCJyYW5nZSIsInBpcHMiLCJtb2RlIiwicG9zdGZpeCIsInRvIiwiZnJvbSIsInBhcnNlRmxvYXQiLCJSZWdFeHAiLCJTdHJpbmdIZWxwZXIiLCJlc2NhcGVSZWdFeHAiLCJzbGlkZXIiLCJmb3JtYXR0ZWRWYWx1ZXMiLCJoYW5kbGUiLCJ2YWx1ZXMiLCJvblN1c3BlbnNpb25DaGFuZ2VkIiwiYmFyQ2xhc3MiLCJ0YWJDbGFzcyIsInRhYkJhY2tncm91bmRDbGFzcyIsImFjdGl2ZVRhYkNsYXNzIiwibW9kZUNsYXNzIiwiUmlkZVN0eWxlclNob3djYXNlVGFiQmFyIiwic2V0TW9kZSIsImZvcmNlIiwidXBkYXRlVGFiRGlzcGxheSIsInRhYnMiLCJ0YWJQZXJjZW50IiwidGFiIiwidXBkYXRlQmFja2dyb3VuZFBvbHlnb24iLCJ0YWJzT3JUYWJDcmVhdGVPcHRpb25zIiwiVGFiIiwiQXJyYXkiLCJjb3B5IiwiY3VycmVudFRhYiIsInNldEFjdGl2ZVRhYiIsIm5ld1RhYiIsIm9sZFRhYiIsInRhYlN3aXRjaGVkQ2FsbGJhY2siLCJjbGlja1RhcmdldCIsImN1cnJlbnRFbGVtZW50Iiwib25UYWJDbGljayIsInRhYkZvckVsZW1lbnQiLCJpY29uQ2xhc3MiLCJpY29uIiwiYmFja2dyb3VuZE1vZGUiLCJ3cmFwIiwic3ZnU3VwcG9ydGVkIiwiY3JlYXRlU1ZHRWxlbWVudCIsInByZXNlcnZlQXNwZWN0UmF0aW8iLCJ2aWV3Qm94IiwiYmFja2dyb3VuZFBvbHlnb24iLCJmaWxsIiwidHJpYW5nbGVIZWlnaHQiLCJ0cmlhbmdsZVdpZHRoIiwic2V0QXR0cmlidXRlIiwidGFibGVDbGFzcyIsImhlYWRDbGFzcyIsImJvZHlDbGFzcyIsImJvZHlMb2FkaW5nQ2xhc3MiLCJjb250YWluZXJDbGFzcyIsIlJpZGVTdHlsZXJTaG93Y2FzZVRhYmxlIiwiY29sdW1ucyIsInRhYmxlIiwidGhlYWQiLCJ0Ym9keSIsImdlbmVyYXRlSGVhZGVycyIsInJvd3MiLCJhcHBlbmRSb3dzIiwic3RhcnRMb2FkaW5nIiwiY29sdW1uIiwiaGVhZGVyIiwiZ2VuZXJhdGVkSGVhZGVyIiwidGgiLCJoZWFkZXJSb3ciLCJnZW5lcmF0ZUhlYWRlckNlbGwiLCJyb3ciLCJjZWxsIiwiZ2VuZXJhdGVkQ2VsbCIsInRkIiwidHIiLCJnZW5lcmF0ZVJvd0NlbGwiLCJyb3dzRnJhZ21lbnQiLCJnZW5lcmF0ZVJvdyIsIm9iamVjdCIsImVtcHR5Q2VsbFN0cmluZyIsIlJpZGVTdHlsZXJTaG93Y2FzZVRpcmVTZWxlY3RvciIsInN0YXRlRGF0YSIsInN1cHBvcnRlZFZlaGljbGVJbWFnZXJ5IiwiYW5nbGVkIiwic2lkZSIsImRlZmF1bHRGaWx0ZXJzIiwiTW9kZWxzIiwidGlyZSIsIlRpcmVGaXRtZW50UmVzb3VyY2VUeXBlIiwiVGlyZU1vZGVsIiwiVGlyZU1vZGVsSUQiLCJJbmNsdWRlU2hhZG93IiwiVGlyZU1vZGVsTmFtZSIsInRvZ2dsZUJ1dHRvbkNsYXNzIiwib3B0aW9uQWN0aXZlQ2xhc3MiLCJzZWxlY3RPcHRpb25FbGVtZW50IiwiY2hpbGRJbmRleCIsImNoaWxkT3B0aW9uRWxlbWVudCIsIlJpZGVTdHlsZXJWZWhpY2xlU2VsZWN0aW9uTW9kYWwiLCJGaW5hbFNlbGVjdGlvbk1hZGUiLCJvblZlaGljbGVTZWxlY3RlZCIsIlZlaGljbGUiLCJJbWFnZVNldHRpbmdzIiwiZ2VuZXJhdGVWZWhpY2xlUHJldmlld1NldHRpbmdzIiwiSW5jbHVkZU9FVGlyZU9wdGlvbiIsIm9uQXV0aGVudGljYXRlZCIsImNvbnRlbnRDb250YWluZXIiLCJidWlsZENvcHkiLCJjaG9vc2VWZWhpY2xlQnV0dG9uIiwibGFyZ2UiLCJpZCIsImNyZWF0ZUVsZW1lbnRXaXRoSUQiLCJTaG93IiwiZW1ib2xkZW5GaXJzdFdvcmQiLCJmaXJzdFdvcmQiLCJnZXRGaXJzdFdvcmQiLCJyZW1haW5pbmdTdHJpbmciLCJzdWJzdHIiLCJjcmVhdGVFbGVtZW50V2l0aFRleHQiLCJjcmVhdGVUZXh0RWxlbWVudCIsInZpc3VhbGl6ZVN0cmluZyIsInNoYXJlU3RyaW5nIiwic2hvd1doZWVscyIsIm1vZGVscyIsIndoZWVsQ29udGFpbmVyIiwibW9kZWxJbWFnZXMiLCJvbk1vZGVsSW1hZ2VMb2FkIiwibW9kZWxJbWFnZSIsImNvbXBsZXRlIiwibW9kZWwiLCJtb2RlbEltYWdlU291cmNlIiwid2hlZWwiLCJXaGVlbE1vZGVsIiwiV2hlZWxNb2RlbElEIiwiV2hlZWxGaXRtZW50UmVzb3VyY2VUeXBlIiwic2NhbGUiLCJ3aWR0aFRvSGVpZ2h0IiwibWF4UmVxdWVzdFJlc29sdXRpb24iLCJjdXN0b21pemF0aW9uc0NsYXNzIiwibG9hZGluZ0NsYXNzIiwiY3VzdG9taXphdGlvbkNvbXBvbmVudE9yZGVyIiwiY3VzdG9taXphdGlvbkNvbXBvbmVudFNldHRpbmdzIiwicGFpbnQiLCJzaG93RmlsdGVyQnV0dG9uIiwid2hlZWxzIiwidGlyZXMiLCJzdXNwZW5zaW9uIiwidXBkYXRlVGFiTGF5b3V0IiwidmVoaWNsZURpZmZlcmVudEZyb21TdGF0ZSIsInZpZXdwb3J0IiwiUmVzZXQiLCJjb3VudFRpcmVCcmFuZHMiLCJjb3VudFdoZWVsQnJhbmRzIiwidGlyZUJyYW5kQ291bnQiLCJyZXN1bHRzIiwid2hlZWxCcmFuZENvdW50IiwidXBkYXRlVGFicyIsInNldHVwVGFicyIsImNoYW5nZVdoZWVsU2l6ZSIsIm5ld09wdGlvbiIsIldoZWVsRml0bWVudElEIiwiY29tcG9uZW50cyIsInZlaGljbGVEZXRhaWxzIiwiVmVoaWNsZURldGFpbHMiLCJXaGVlbERldGFpbHMiLCJUaXJlRGV0YWlscyIsInRhYkJhciIsImN1c3RvbWl6YXRpb25Db21wb25lbnRDb250YWluZXIiLCJmaWx0ZXJCdXR0b24iLCJza2lubnkiLCJzaG93RmlsdGVycyIsImN1cnJlbnRSZW5kZXJJbnN0cnVjdGlvbnMiLCJhZnRlckRhdGFDaGFuZ2UiLCJwYWludFN3YXRjaENsaWNrQ2FsbGJhY2siLCJzZXRBY3RpdmVDdXN0b21pemF0aW9uQ29tcG9uZW50IiwiY3VzdG9taXphdGlvbkNvbXBvbmVudHMiLCJzZXRUYWJzIiwiZ2V0Q3VycmVudEJyZWFrcG9pbnQiLCJob3Jpem9udGFsIiwidmVoaWNsZUNoYW5nZWQiLCJHVUlESGVscGVyIiwiYXJlRXF1YWwiLCJ0aXJlT3B0aW9uQ2hhbmdlZCIsInZlaGljbGVUaXJlT3B0aW9uRGVzY3JpcHRpb24iLCJjbGVhckFjdGl2ZVRhYiIsIm9uVmVoaWNsZUNoYW5nZWQiLCJnZXRWZWhpY2xlRGVzY3JpcHRpb24iLCJnZXRWZWhpY2xlVGlyZU9wdGlvbiIsInZlaGljbGVEZXNjcmlwdGlvbk1vZGVsIiwicmVzcG9uc2VzIiwiRGVzY3JpcHRpb25zIiwidmVoaWNsZVRpcmVPcHRpb24iLCJzZWxlY3RlZFRpcmVPcHRpb25JRCIsIkRldGFpbHMiLCJ0aXJlT3B0aW9uIiwiaW5pdGlhbGl6ZUZvck5ld1ZlaGljbGUiLCJSaWRlU3R5bGVyU2hvd2Nhc2VXaGVlbFNlbGVjdG9yIiwic2V0T3B0aW9uSXNMb2FkaW5nIiwiUGFpbnRDb2xvciIsImNhblJlbmRlck9uQ3VycmVudEFuZ2xlIiwiSGFzQW5nbGVJbWFnZSIsIkluY2x1ZGVQcmljaW5nIiwiRml0bWVudHMiLCJiZXN0Rml0bWVudCIsInRhcmdldERpYW1ldGVyIiwiRnJvbnQiLCJJbnNpZGVEaWFtZXRlciIsIldoZWVsRml0bWVudHMiLCJhRGlmZiIsImJEaWZmIiwic2V0Rml0bWVudE9wdGlvbnMiLCJyZW5kZXJVcGRhdGUiLCJnZXRWYWx1ZXMiLCJjdXN0b21pemF0aW9uQ29tcG9uZW50IiwiY29tcG9uZW50S2V5IiwiZ2V0Q29tcG9uZW50S2V5IiwiYWN0aXZlQ3VzdG9taXphdGlvbkNvbXBvbmVudCIsInNldFRleHQiLCJmaWx0ZXJNb2RhbCIsIlJpZGVTdHlsZXJTaG93Y2FzZUZpbHRlck1vZGFsIiwiZmlsdGVyUHJvdmlkZXIiLCJzaG93Q291bnRUZXh0Rm9ybWF0IiwiUmlkZVN0eWxlclNob3djYXNlV2hlZWxNb2RhbCIsIndoZWVsTW9kZWwiLCJXaGVlbE1vZGVsTmFtZSIsIldoZWVsTW9kZWxGaW5pc2hEZXNjcmlwdGlvbiIsInN1bW1hcnlUYWJsZSIsImJ1aWxkU3BlY3NQYWdlIiwiSW5jbHVkZVByb21vdGlvbnMiLCJidWlsZFN1bW1hcnlUYWJsZSIsInNwZWNzVGFibGUiLCJhbGxTaXplUHJpY2VDb21iaW5hdGlvbnMiLCJmaXRtZW50UHJpY2UiLCJnZXRGaXRtZW50UmV0YWlsUHJpY2VEYXRhT2JqZWN0IiwiZml0bWVudFByaWNlQW1vdW50IiwiV2hlZWxQcmljaW5nQW1vdW50IiwiV2lkdGhNaW4iLCJwcmljZSIsIldpZHRoTWF4IiwiRGlhbWV0ZXJNYXgiLCJzaXplUHJpY2VSYW5nZXMiLCJzaXplUHJpY2VDb21ibyIsInNpemUiLCJwcmljZVJhbmdlIiwiSW5maW5pdHkiLCJOdW1iZXJIZWxwZXIiLCJleHRlbmRSYW5nZSIsInN1bW1hcnlUYWJsZVJvd3MiLCJwcmljZUlzVW5zcGVjaWZpZWQiLCJpc05hTiIsInByaWNlU3RyaW5nIiwiZ2V0Rml0bWVudFNpemVEZXNjcmlwdGlvbiIsImZvcm1hdENlbGwiLCJnZXRGaXRtZW50UHJpY2UiLCJnZXRGaXRtZW50SXRlbU51bWJlciIsInNwZWNzQ29udGFpbmVyIiwiUHJpY2luZyIsIm5vUHJpY2VTdHJpbmciLCJyZXRhaWxQcmljZURhdGFPYmplY3QiLCJpdGVtTnVtYmVyIiwiV2hlZWxQcmljaW5nSXRlbU51bWJlciIsIlBhcnROdW1iZXIiLCJJbmNsdWRlTWV0YUtleXMiLCJ0aXJlTmFtZUVsZW1lbnQiLCJ0aXJlRGVzY3JpcHRpb25FbGVtZW50Iiwib25EYXRhQ2hhbmdlIiwiZmlyc3RQYWludENvbG9yIiwidmVoaWNsZVBhaW50U3dhdGNoRWxlbWVudCIsInZlaGljbGVEZXNjcmlwdGlvbkVsZW1lbnQiLCJ0aXJlU2l6ZUVsZW1lbnQiLCJzaG9ydFZlaGljbGVEZXNjcmlwdGlvbiIsInN1YnN0cmluZyIsIndoZWVsTmFtZUVsZW1lbnQiLCJ3aGVlbERlc2NyaXB0aW9uRWxlbWVudCIsInNob3dXaGVlbE1vZGFsIiwiZmlsdGVyTW9kYWxDbGFzcyIsImZpbHRlck1vZGFsTWVudVRpdGxlQ2xhc3MiLCJjb3VudEZvcm1hdFRva2VuIiwiYnVpbGRTaG93QnV0dG9uIiwiYnVpbGRGaWx0ZXJNZW51cyIsInVwZGF0ZUNvdW50Iiwic2hvd0J1dHRvbiIsIm1lbnVzQ29udGFpbmVyIiwibWVudUxvYWRlZFByb21pc2VzIiwibWVudXMiLCJtZW51IiwibWVudUNvbnRhaW5lciIsIm1lbnVMb2FkZWRQcm9taXNlIiwidW5zaGlmdCIsInByZXZpZXdGaWx0ZXJzIiwic2V0Q291bnRUZXh0IiwiZ2V0Q291bnQiLCJhcnJheSIsIml0ZW1NYXRjaCIsIm5ld0FycmF5IiwibmV3QXJyYXlJbmRleCIsImFycmF5SW5kZXgiLCJtYXBGdW5jdGlvbiIsInRoaXNBcmciLCJwcm90b3R5cGUiLCJyZXN1bHQiLCJyZWR1Y2UiLCJyZWR1Y2VyIiwiaW5pdGlhbFZhbHVlIiwiYWNjdW11bGF0b3IiLCJib3VuZHNNaW4iLCJib3VuZHNNYXgiLCJzY2FsZVRvTWF4Iiwic2NhbGVUb01pbiIsInNjYWxhciIsImJ5dGVUb0hleCIsImhleFRvQnl0ZSIsImJ1ZmZlciIsIm9mZnNldCIsImoiLCJvY3QiLCJ1bnBhcnNlIiwiYnRoIiwiaWRBIiwiaWRCIiwiZ3VpZEEiLCJndWlkQiIsImJ5dGVBIiwiYnl0ZUIiLCJlbGVtZW50c01hdGNoaW5nIiwibWF0Y2giLCJtYXRjaGluZ0VsZW1lbnRzIiwibWF0Y2hpbmdFbGVtZW50c0luZGV4IiwiZmlyc3RFbGVtZW50TWF0Y2hpbmciLCJsYXN0RWxlbWVudE1hdGNoaW5nIiwiY2hpbGRyZW5NYXRjaGluZyIsImZpcnN0Q2hpbGRNYXRjaGluZyIsImNsYXNzZXMiLCJmbGF0dGVuQ2xhc3NMaXN0IiwiaGFzQ2xhc3NlcyIsInRhZ05hbWUiLCJ0b1VwcGVyQ2FzZSIsInNpYmxpbmciLCJhcHBseU9wdGlvbnMiLCJodG1sRWxlbWVudCIsImNoaWxkRWxlbWVudCIsImNyZWF0ZUVsZW1lbnROUyIsInRhZ05hbWVPckRpdk9wdGlvbnMiLCJ0YWdOYW1lT3JDbGFzc05hbWUiLCJidXR0b25DbGFzc05hbWUiLCJpY29uQ2xhc3NQcmVmaXgiLCJpY29uT3JPcHRpb25zIiwic3RhcnRzV2l0aCIsImNyZWF0ZURlc2NyaXB0aW9uTGlzdCIsImRlc2NyaXB0aW9uTGlzdCIsImFwcGVuZERlc2NyaXB0aW9uTGlzdFZhbHVlcyIsImRlc2NyaXB0aW9uIiwibGFzdENoaWxkIiwib25jZSIsInVzZUNhcHR1cmUiLCJvbmNlTGlzdGVuZXIiLCJldnQiLCJoYW5kbGVFdmVudCIsImRlZmF1bHRWaWV3IiwiVHlwZUVycm9yIiwiYXNzaWduT2JqZWN0cyIsImdldEtleXMiLCJrZXlzIiwicHJvbWlzZXMiLCJtZXJnZWQiLCJjdXJyZW50UHJvbWlzZSIsInIiLCJQcm9taXNlIiwib25mdWxmaWxsZWQiLCJvbnJlamVjdGVkIiwicmV0dXJuUHJvbWlzZSIsIm9uZnVsZmlsbGVkUmVzdWx0IiwiaXNQcm9taXNlIiwib25yZWplY3RlZFJlc3VsdCIsIm8iLCJzY3JvbGxFdmVudCIsIm1vdXNld2hlZWxFdmVudFNjYWxlIiwidGVzdEVsZW1lbnQiLCJvbm1vdXNld2hlZWwiLCJub3JtYWxpemVkRXZlbnQiLCJvcmlnaW5hbEV2ZW50Iiwic3JjRWxlbWVudCIsImRlbHRhTW9kZSIsImRlbHRhWiIsInByZXZlbnREZWZhdWx0IiwicmV0dXJuVmFsdWUiLCJ3aGVlbERlbHRhIiwid2hlZWxEZWx0YVgiLCJkZXRhaWwiLCJpbmRleE9mIiwiZW5kc1dpdGgiLCJlbmRpbmciLCJlbmRpbmdMZW5ndGgiLCJyZVJlZ0V4cENoYXIiLCJyZUhhc1JlZ0V4cENoYXIiLCJoYXNHZXRDb21wdXRlZFN0eWxlIiwiaGFzQ3VycmVudFN0eWxlU3VwcG9ydCIsInRyYW5zaXRpb25zIiwiayIsIm5hdmlnYXRvciIsIm1heFRvdWNoUG9pbnRzIiwiY3JlYXRlU1ZHUmVjdCIsImdldENvbXB1dGVkU3R5bGUiLCJvZmZzZXRQb3NpdGlvbmluZ3MiLCJwb3NpdGlvbmluZyIsInN1YmNsYXNzTGlzdCIsImMiLCJjb25jYXQiLCJzcGxpdCIsIm9sZFRyYW5zaXRpb24iLCJ0cmFuc2l0aW9uIiwiY2xhc3NBcnJheSIsInBhcnNlUGl4ZWxzIiwicGl4ZWxzIiwicGFyc2VJbnQiLCJwYWRkaW5nQm90dG9tIiwicGFkZGluZ1RvcCIsInBhZGRpbmdMZWZ0IiwicGFkZGluZ1JpZ2h0IiwiZGVmYXVsdFRyYW5zaXRpb25JbkNsYXNzIiwicG9pbnRlckV2ZW50cyIsIkVuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDdndFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDcm1CQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDM1JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDbmVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQzU0QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDcFRBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDaFBBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7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QUEsR0FBTyxFQUFQLENBQUE7QUFzRDVCLENBdERELEVBQVVySSx1QkFBQUEscUJBQWtCLEVBQWxCLENBQVYiLCJmaWxlIjoicmlkZXN0eWxlci5zaG93Y2FzZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qISBub3Vpc2xpZGVyIC0gMTAuMS4wIC0gMjAxNy0wNy0yOCAxNzoxMToxOCAqL1xuXG4oZnVuY3Rpb24gKGZhY3RvcnkpIHtcblxuICAgIGlmICggdHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kICkge1xuXG4gICAgICAgIC8vIEFNRC4gUmVnaXN0ZXIgYXMgYW4gYW5vbnltb3VzIG1vZHVsZS5cbiAgICAgICAgZGVmaW5lKFtdLCBmYWN0b3J5KTtcblxuICAgIH0gZWxzZSBpZiAoIHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyApIHtcblxuICAgICAgICAvLyBOb2RlL0NvbW1vbkpTXG4gICAgICAgIG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpO1xuXG4gICAgfSBlbHNlIHtcblxuICAgICAgICAvLyBCcm93c2VyIGdsb2JhbHNcbiAgICAgICAgd2luZG93Lm5vVWlTbGlkZXIgPSBmYWN0b3J5KCk7XG4gICAgfVxuXG59KGZ1bmN0aW9uKCApe1xuXG5cdCd1c2Ugc3RyaWN0JztcblxuXHR2YXIgVkVSU0lPTiA9ICcxMC4xLjAnO1xuXG5cblx0ZnVuY3Rpb24gaXNWYWxpZEZvcm1hdHRlciAoIGVudHJ5ICkge1xuXHRcdHJldHVybiB0eXBlb2YgZW50cnkgPT09ICdvYmplY3QnICYmIHR5cGVvZiBlbnRyeS50byA9PT0gJ2Z1bmN0aW9uJyAmJiB0eXBlb2YgZW50cnkuZnJvbSA9PT0gJ2Z1bmN0aW9uJztcblx0fVxuXG5cdGZ1bmN0aW9uIHJlbW92ZUVsZW1lbnQgKCBlbCApIHtcblx0XHRlbC5wYXJlbnRFbGVtZW50LnJlbW92ZUNoaWxkKGVsKTtcblx0fVxuXG5cdC8vIEJpbmRhYmxlIHZlcnNpb25cblx0ZnVuY3Rpb24gcHJldmVudERlZmF1bHQgKCBlICkge1xuXHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0fVxuXG5cdC8vIFJlbW92ZXMgZHVwbGljYXRlcyBmcm9tIGFuIGFycmF5LlxuXHRmdW5jdGlvbiB1bmlxdWUgKCBhcnJheSApIHtcblx0XHRyZXR1cm4gYXJyYXkuZmlsdGVyKGZ1bmN0aW9uKGEpe1xuXHRcdFx0cmV0dXJuICF0aGlzW2FdID8gdGhpc1thXSA9IHRydWUgOiBmYWxzZTtcblx0XHR9LCB7fSk7XG5cdH1cblxuXHQvLyBSb3VuZCBhIHZhbHVlIHRvIHRoZSBjbG9zZXN0ICd0bycuXG5cdGZ1bmN0aW9uIGNsb3Nlc3QgKCB2YWx1ZSwgdG8gKSB7XG5cdFx0cmV0dXJuIE1hdGgucm91bmQodmFsdWUgLyB0bykgKiB0bztcblx0fVxuXG5cdC8vIEN1cnJlbnQgcG9zaXRpb24gb2YgYW4gZWxlbWVudCByZWxhdGl2ZSB0byB0aGUgZG9jdW1lbnQuXG5cdGZ1bmN0aW9uIG9mZnNldCAoIGVsZW0sIG9yaWVudGF0aW9uICkge1xuXG5cdFx0dmFyIHJlY3QgPSBlbGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuXHRcdHZhciBkb2MgPSBlbGVtLm93bmVyRG9jdW1lbnQ7XG5cdFx0dmFyIGRvY0VsZW0gPSBkb2MuZG9jdW1lbnRFbGVtZW50O1xuXHRcdHZhciBwYWdlT2Zmc2V0ID0gZ2V0UGFnZU9mZnNldChkb2MpO1xuXG5cdFx0Ly8gZ2V0Qm91bmRpbmdDbGllbnRSZWN0IGNvbnRhaW5zIGxlZnQgc2Nyb2xsIGluIENocm9tZSBvbiBBbmRyb2lkLlxuXHRcdC8vIEkgaGF2ZW4ndCBmb3VuZCBhIGZlYXR1cmUgZGV0ZWN0aW9uIHRoYXQgcHJvdmVzIHRoaXMuIFdvcnN0IGNhc2Vcblx0XHQvLyBzY2VuYXJpbyBvbiBtaXMtbWF0Y2g6IHRoZSAndGFwJyBmZWF0dXJlIG9uIGhvcml6b250YWwgc2xpZGVycyBicmVha3MuXG5cdFx0aWYgKCAvd2Via2l0LipDaHJvbWUuKk1vYmlsZS9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkgKSB7XG5cdFx0XHRwYWdlT2Zmc2V0LnggPSAwO1xuXHRcdH1cblxuXHRcdHJldHVybiBvcmllbnRhdGlvbiA/IChyZWN0LnRvcCArIHBhZ2VPZmZzZXQueSAtIGRvY0VsZW0uY2xpZW50VG9wKSA6IChyZWN0LmxlZnQgKyBwYWdlT2Zmc2V0LnggLSBkb2NFbGVtLmNsaWVudExlZnQpO1xuXHR9XG5cblx0Ly8gQ2hlY2tzIHdoZXRoZXIgYSB2YWx1ZSBpcyBudW1lcmljYWwuXG5cdGZ1bmN0aW9uIGlzTnVtZXJpYyAoIGEgKSB7XG5cdFx0cmV0dXJuIHR5cGVvZiBhID09PSAnbnVtYmVyJyAmJiAhaXNOYU4oIGEgKSAmJiBpc0Zpbml0ZSggYSApO1xuXHR9XG5cblx0Ly8gU2V0cyBhIGNsYXNzIGFuZCByZW1vdmVzIGl0IGFmdGVyIFtkdXJhdGlvbl0gbXMuXG5cdGZ1bmN0aW9uIGFkZENsYXNzRm9yICggZWxlbWVudCwgY2xhc3NOYW1lLCBkdXJhdGlvbiApIHtcblx0XHRpZiAoZHVyYXRpb24gPiAwKSB7XG5cdFx0YWRkQ2xhc3MoZWxlbWVudCwgY2xhc3NOYW1lKTtcblx0XHRcdHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcblx0XHRcdFx0cmVtb3ZlQ2xhc3MoZWxlbWVudCwgY2xhc3NOYW1lKTtcblx0XHRcdH0sIGR1cmF0aW9uKTtcblx0XHR9XG5cdH1cblxuXHQvLyBMaW1pdHMgYSB2YWx1ZSB0byAwIC0gMTAwXG5cdGZ1bmN0aW9uIGxpbWl0ICggYSApIHtcblx0XHRyZXR1cm4gTWF0aC5tYXgoTWF0aC5taW4oYSwgMTAwKSwgMCk7XG5cdH1cblxuXHQvLyBXcmFwcyBhIHZhcmlhYmxlIGFzIGFuIGFycmF5LCBpZiBpdCBpc24ndCBvbmUgeWV0LlxuXHQvLyBOb3RlIHRoYXQgYW4gaW5wdXQgYXJyYXkgaXMgcmV0dXJuZWQgYnkgcmVmZXJlbmNlIVxuXHRmdW5jdGlvbiBhc0FycmF5ICggYSApIHtcblx0XHRyZXR1cm4gQXJyYXkuaXNBcnJheShhKSA/IGEgOiBbYV07XG5cdH1cblxuXHQvLyBDb3VudHMgZGVjaW1hbHNcblx0ZnVuY3Rpb24gY291bnREZWNpbWFscyAoIG51bVN0ciApIHtcblx0XHRudW1TdHIgPSBTdHJpbmcobnVtU3RyKTtcblx0XHR2YXIgcGllY2VzID0gbnVtU3RyLnNwbGl0KFwiLlwiKTtcblx0XHRyZXR1cm4gcGllY2VzLmxlbmd0aCA+IDEgPyBwaWVjZXNbMV0ubGVuZ3RoIDogMDtcblx0fVxuXG5cdC8vIGh0dHA6Ly95b3VtaWdodG5vdG5lZWRqcXVlcnkuY29tLyNhZGRfY2xhc3Ncblx0ZnVuY3Rpb24gYWRkQ2xhc3MgKCBlbCwgY2xhc3NOYW1lICkge1xuXHRcdGlmICggZWwuY2xhc3NMaXN0ICkge1xuXHRcdFx0ZWwuY2xhc3NMaXN0LmFkZChjbGFzc05hbWUpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRlbC5jbGFzc05hbWUgKz0gJyAnICsgY2xhc3NOYW1lO1xuXHRcdH1cblx0fVxuXG5cdC8vIGh0dHA6Ly95b3VtaWdodG5vdG5lZWRqcXVlcnkuY29tLyNyZW1vdmVfY2xhc3Ncblx0ZnVuY3Rpb24gcmVtb3ZlQ2xhc3MgKCBlbCwgY2xhc3NOYW1lICkge1xuXHRcdGlmICggZWwuY2xhc3NMaXN0ICkge1xuXHRcdFx0ZWwuY2xhc3NMaXN0LnJlbW92ZShjbGFzc05hbWUpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRlbC5jbGFzc05hbWUgPSBlbC5jbGFzc05hbWUucmVwbGFjZShuZXcgUmVnRXhwKCcoXnxcXFxcYiknICsgY2xhc3NOYW1lLnNwbGl0KCcgJykuam9pbignfCcpICsgJyhcXFxcYnwkKScsICdnaScpLCAnICcpO1xuXHRcdH1cblx0fVxuXG5cdC8vIGh0dHBzOi8vcGxhaW5qcy5jb20vamF2YXNjcmlwdC9hdHRyaWJ1dGVzL2FkZGluZy1yZW1vdmluZy1hbmQtdGVzdGluZy1mb3ItY2xhc3Nlcy05L1xuXHRmdW5jdGlvbiBoYXNDbGFzcyAoIGVsLCBjbGFzc05hbWUgKSB7XG5cdFx0cmV0dXJuIGVsLmNsYXNzTGlzdCA/IGVsLmNsYXNzTGlzdC5jb250YWlucyhjbGFzc05hbWUpIDogbmV3IFJlZ0V4cCgnXFxcXGInICsgY2xhc3NOYW1lICsgJ1xcXFxiJykudGVzdChlbC5jbGFzc05hbWUpO1xuXHR9XG5cblx0Ly8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL1dpbmRvdy9zY3JvbGxZI05vdGVzXG5cdGZ1bmN0aW9uIGdldFBhZ2VPZmZzZXQgKCBkb2MgKSB7XG5cblx0XHR2YXIgc3VwcG9ydFBhZ2VPZmZzZXQgPSB3aW5kb3cucGFnZVhPZmZzZXQgIT09IHVuZGVmaW5lZDtcblx0XHR2YXIgaXNDU1MxQ29tcGF0ID0gKChkb2MuY29tcGF0TW9kZSB8fCBcIlwiKSA9PT0gXCJDU1MxQ29tcGF0XCIpO1xuXHRcdHZhciB4ID0gc3VwcG9ydFBhZ2VPZmZzZXQgPyB3aW5kb3cucGFnZVhPZmZzZXQgOiBpc0NTUzFDb21wYXQgPyBkb2MuZG9jdW1lbnRFbGVtZW50LnNjcm9sbExlZnQgOiBkb2MuYm9keS5zY3JvbGxMZWZ0O1xuXHRcdHZhciB5ID0gc3VwcG9ydFBhZ2VPZmZzZXQgPyB3aW5kb3cucGFnZVlPZmZzZXQgOiBpc0NTUzFDb21wYXQgPyBkb2MuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcCA6IGRvYy5ib2R5LnNjcm9sbFRvcDtcblxuXHRcdHJldHVybiB7XG5cdFx0XHR4OiB4LFxuXHRcdFx0eTogeVxuXHRcdH07XG5cdH1cblxuXHQvLyB3ZSBwcm92aWRlIGEgZnVuY3Rpb24gdG8gY29tcHV0ZSBjb25zdGFudHMgaW5zdGVhZFxuXHQvLyBvZiBhY2Nlc3Npbmcgd2luZG93LiogYXMgc29vbiBhcyB0aGUgbW9kdWxlIG5lZWRzIGl0XG5cdC8vIHNvIHRoYXQgd2UgZG8gbm90IGNvbXB1dGUgYW55dGhpbmcgaWYgbm90IG5lZWRlZFxuXHRmdW5jdGlvbiBnZXRBY3Rpb25zICggKSB7XG5cblx0XHQvLyBEZXRlcm1pbmUgdGhlIGV2ZW50cyB0byBiaW5kLiBJRTExIGltcGxlbWVudHMgcG9pbnRlckV2ZW50cyB3aXRob3V0XG5cdFx0Ly8gYSBwcmVmaXgsIHdoaWNoIGJyZWFrcyBjb21wYXRpYmlsaXR5IHdpdGggdGhlIElFMTAgaW1wbGVtZW50YXRpb24uXG5cdFx0cmV0dXJuIHdpbmRvdy5uYXZpZ2F0b3IucG9pbnRlckVuYWJsZWQgPyB7XG5cdFx0XHRzdGFydDogJ3BvaW50ZXJkb3duJyxcblx0XHRcdG1vdmU6ICdwb2ludGVybW92ZScsXG5cdFx0XHRlbmQ6ICdwb2ludGVydXAnXG5cdFx0fSA6IHdpbmRvdy5uYXZpZ2F0b3IubXNQb2ludGVyRW5hYmxlZCA/IHtcblx0XHRcdHN0YXJ0OiAnTVNQb2ludGVyRG93bicsXG5cdFx0XHRtb3ZlOiAnTVNQb2ludGVyTW92ZScsXG5cdFx0XHRlbmQ6ICdNU1BvaW50ZXJVcCdcblx0XHR9IDoge1xuXHRcdFx0c3RhcnQ6ICdtb3VzZWRvd24gdG91Y2hzdGFydCcsXG5cdFx0XHRtb3ZlOiAnbW91c2Vtb3ZlIHRvdWNobW92ZScsXG5cdFx0XHRlbmQ6ICdtb3VzZXVwIHRvdWNoZW5kJ1xuXHRcdH07XG5cdH1cblxuXHQvLyBodHRwczovL2dpdGh1Yi5jb20vV0lDRy9FdmVudExpc3RlbmVyT3B0aW9ucy9ibG9iL2doLXBhZ2VzL2V4cGxhaW5lci5tZFxuXHQvLyBJc3N1ZSAjNzg1XG5cdGZ1bmN0aW9uIGdldFN1cHBvcnRzUGFzc2l2ZSAoICkge1xuXG5cdFx0dmFyIHN1cHBvcnRzUGFzc2l2ZSA9IGZhbHNlO1xuXG5cdFx0dHJ5IHtcblxuXHRcdFx0dmFyIG9wdHMgPSBPYmplY3QuZGVmaW5lUHJvcGVydHkoe30sICdwYXNzaXZlJywge1xuXHRcdFx0XHRnZXQ6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdHN1cHBvcnRzUGFzc2l2ZSA9IHRydWU7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXG5cdFx0XHR3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigndGVzdCcsIG51bGwsIG9wdHMpO1xuXG5cdFx0fSBjYXRjaCAoZSkge31cblxuXHRcdHJldHVybiBzdXBwb3J0c1Bhc3NpdmU7XG5cdH1cblxuXHRmdW5jdGlvbiBnZXRTdXBwb3J0c1RvdWNoQWN0aW9uTm9uZSAoICkge1xuXHRcdHJldHVybiB3aW5kb3cuQ1NTICYmIENTUy5zdXBwb3J0cyAmJiBDU1Muc3VwcG9ydHMoJ3RvdWNoLWFjdGlvbicsICdub25lJyk7XG5cdH1cblxuXG4vLyBWYWx1ZSBjYWxjdWxhdGlvblxuXG5cdC8vIERldGVybWluZSB0aGUgc2l6ZSBvZiBhIHN1Yi1yYW5nZSBpbiByZWxhdGlvbiB0byBhIGZ1bGwgcmFuZ2UuXG5cdGZ1bmN0aW9uIHN1YlJhbmdlUmF0aW8gKCBwYSwgcGIgKSB7XG5cdFx0cmV0dXJuICgxMDAgLyAocGIgLSBwYSkpO1xuXHR9XG5cblx0Ly8gKHBlcmNlbnRhZ2UpIEhvdyBtYW55IHBlcmNlbnQgaXMgdGhpcyB2YWx1ZSBvZiB0aGlzIHJhbmdlP1xuXHRmdW5jdGlvbiBmcm9tUGVyY2VudGFnZSAoIHJhbmdlLCB2YWx1ZSApIHtcblx0XHRyZXR1cm4gKHZhbHVlICogMTAwKSAvICggcmFuZ2VbMV0gLSByYW5nZVswXSApO1xuXHR9XG5cblx0Ly8gKHBlcmNlbnRhZ2UpIFdoZXJlIGlzIHRoaXMgdmFsdWUgb24gdGhpcyByYW5nZT9cblx0ZnVuY3Rpb24gdG9QZXJjZW50YWdlICggcmFuZ2UsIHZhbHVlICkge1xuXHRcdHJldHVybiBmcm9tUGVyY2VudGFnZSggcmFuZ2UsIHJhbmdlWzBdIDwgMCA/XG5cdFx0XHR2YWx1ZSArIE1hdGguYWJzKHJhbmdlWzBdKSA6XG5cdFx0XHRcdHZhbHVlIC0gcmFuZ2VbMF0gKTtcblx0fVxuXG5cdC8vICh2YWx1ZSkgSG93IG11Y2ggaXMgdGhpcyBwZXJjZW50YWdlIG9uIHRoaXMgcmFuZ2U/XG5cdGZ1bmN0aW9uIGlzUGVyY2VudGFnZSAoIHJhbmdlLCB2YWx1ZSApIHtcblx0XHRyZXR1cm4gKCh2YWx1ZSAqICggcmFuZ2VbMV0gLSByYW5nZVswXSApKSAvIDEwMCkgKyByYW5nZVswXTtcblx0fVxuXG5cbi8vIFJhbmdlIGNvbnZlcnNpb25cblxuXHRmdW5jdGlvbiBnZXRKICggdmFsdWUsIGFyciApIHtcblxuXHRcdHZhciBqID0gMTtcblxuXHRcdHdoaWxlICggdmFsdWUgPj0gYXJyW2pdICl7XG5cdFx0XHRqICs9IDE7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGo7XG5cdH1cblxuXHQvLyAocGVyY2VudGFnZSkgSW5wdXQgYSB2YWx1ZSwgZmluZCB3aGVyZSwgb24gYSBzY2FsZSBvZiAwLTEwMCwgaXQgYXBwbGllcy5cblx0ZnVuY3Rpb24gdG9TdGVwcGluZyAoIHhWYWwsIHhQY3QsIHZhbHVlICkge1xuXG5cdFx0aWYgKCB2YWx1ZSA+PSB4VmFsLnNsaWNlKC0xKVswXSApe1xuXHRcdFx0cmV0dXJuIDEwMDtcblx0XHR9XG5cblx0XHR2YXIgaiA9IGdldEooIHZhbHVlLCB4VmFsICksIHZhLCB2YiwgcGEsIHBiO1xuXG5cdFx0dmEgPSB4VmFsW2otMV07XG5cdFx0dmIgPSB4VmFsW2pdO1xuXHRcdHBhID0geFBjdFtqLTFdO1xuXHRcdHBiID0geFBjdFtqXTtcblxuXHRcdHJldHVybiBwYSArICh0b1BlcmNlbnRhZ2UoW3ZhLCB2Yl0sIHZhbHVlKSAvIHN1YlJhbmdlUmF0aW8gKHBhLCBwYikpO1xuXHR9XG5cblx0Ly8gKHZhbHVlKSBJbnB1dCBhIHBlcmNlbnRhZ2UsIGZpbmQgd2hlcmUgaXQgaXMgb24gdGhlIHNwZWNpZmllZCByYW5nZS5cblx0ZnVuY3Rpb24gZnJvbVN0ZXBwaW5nICggeFZhbCwgeFBjdCwgdmFsdWUgKSB7XG5cblx0XHQvLyBUaGVyZSBpcyBubyByYW5nZSBncm91cCB0aGF0IGZpdHMgMTAwXG5cdFx0aWYgKCB2YWx1ZSA+PSAxMDAgKXtcblx0XHRcdHJldHVybiB4VmFsLnNsaWNlKC0xKVswXTtcblx0XHR9XG5cblx0XHR2YXIgaiA9IGdldEooIHZhbHVlLCB4UGN0ICksIHZhLCB2YiwgcGEsIHBiO1xuXG5cdFx0dmEgPSB4VmFsW2otMV07XG5cdFx0dmIgPSB4VmFsW2pdO1xuXHRcdHBhID0geFBjdFtqLTFdO1xuXHRcdHBiID0geFBjdFtqXTtcblxuXHRcdHJldHVybiBpc1BlcmNlbnRhZ2UoW3ZhLCB2Yl0sICh2YWx1ZSAtIHBhKSAqIHN1YlJhbmdlUmF0aW8gKHBhLCBwYikpO1xuXHR9XG5cblx0Ly8gKHBlcmNlbnRhZ2UpIEdldCB0aGUgc3RlcCB0aGF0IGFwcGxpZXMgYXQgYSBjZXJ0YWluIHZhbHVlLlxuXHRmdW5jdGlvbiBnZXRTdGVwICggeFBjdCwgeFN0ZXBzLCBzbmFwLCB2YWx1ZSApIHtcblxuXHRcdGlmICggdmFsdWUgPT09IDEwMCApIHtcblx0XHRcdHJldHVybiB2YWx1ZTtcblx0XHR9XG5cblx0XHR2YXIgaiA9IGdldEooIHZhbHVlLCB4UGN0ICksIGEsIGI7XG5cblx0XHQvLyBJZiAnc25hcCcgaXMgc2V0LCBzdGVwcyBhcmUgdXNlZCBhcyBmaXhlZCBwb2ludHMgb24gdGhlIHNsaWRlci5cblx0XHRpZiAoIHNuYXAgKSB7XG5cblx0XHRcdGEgPSB4UGN0W2otMV07XG5cdFx0XHRiID0geFBjdFtqXTtcblxuXHRcdFx0Ly8gRmluZCB0aGUgY2xvc2VzdCBwb3NpdGlvbiwgYSBvciBiLlxuXHRcdFx0aWYgKCh2YWx1ZSAtIGEpID4gKChiLWEpLzIpKXtcblx0XHRcdFx0cmV0dXJuIGI7XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBhO1xuXHRcdH1cblxuXHRcdGlmICggIXhTdGVwc1tqLTFdICl7XG5cdFx0XHRyZXR1cm4gdmFsdWU7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHhQY3Rbai0xXSArIGNsb3Nlc3QoXG5cdFx0XHR2YWx1ZSAtIHhQY3Rbai0xXSxcblx0XHRcdHhTdGVwc1tqLTFdXG5cdFx0KTtcblx0fVxuXG5cbi8vIEVudHJ5IHBhcnNpbmdcblxuXHRmdW5jdGlvbiBoYW5kbGVFbnRyeVBvaW50ICggaW5kZXgsIHZhbHVlLCB0aGF0ICkge1xuXG5cdFx0dmFyIHBlcmNlbnRhZ2U7XG5cblx0XHQvLyBXcmFwIG51bWVyaWNhbCBpbnB1dCBpbiBhbiBhcnJheS5cblx0XHRpZiAoIHR5cGVvZiB2YWx1ZSA9PT0gXCJudW1iZXJcIiApIHtcblx0XHRcdHZhbHVlID0gW3ZhbHVlXTtcblx0XHR9XG5cblx0XHQvLyBSZWplY3QgYW55IGludmFsaWQgaW5wdXQsIGJ5IHRlc3Rpbmcgd2hldGhlciB2YWx1ZSBpcyBhbiBhcnJheS5cblx0XHRpZiAoIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCggdmFsdWUgKSAhPT0gJ1tvYmplY3QgQXJyYXldJyApe1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKFwibm9VaVNsaWRlciAoXCIgKyBWRVJTSU9OICsgXCIpOiAncmFuZ2UnIGNvbnRhaW5zIGludmFsaWQgdmFsdWUuXCIpO1xuXHRcdH1cblxuXHRcdC8vIENvdmVydCBtaW4vbWF4IHN5bnRheCB0byAwIGFuZCAxMDAuXG5cdFx0aWYgKCBpbmRleCA9PT0gJ21pbicgKSB7XG5cdFx0XHRwZXJjZW50YWdlID0gMDtcblx0XHR9IGVsc2UgaWYgKCBpbmRleCA9PT0gJ21heCcgKSB7XG5cdFx0XHRwZXJjZW50YWdlID0gMTAwO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRwZXJjZW50YWdlID0gcGFyc2VGbG9hdCggaW5kZXggKTtcblx0XHR9XG5cblx0XHQvLyBDaGVjayBmb3IgY29ycmVjdCBpbnB1dC5cblx0XHRpZiAoICFpc051bWVyaWMoIHBlcmNlbnRhZ2UgKSB8fCAhaXNOdW1lcmljKCB2YWx1ZVswXSApICkge1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKFwibm9VaVNsaWRlciAoXCIgKyBWRVJTSU9OICsgXCIpOiAncmFuZ2UnIHZhbHVlIGlzbid0IG51bWVyaWMuXCIpO1xuXHRcdH1cblxuXHRcdC8vIFN0b3JlIHZhbHVlcy5cblx0XHR0aGF0LnhQY3QucHVzaCggcGVyY2VudGFnZSApO1xuXHRcdHRoYXQueFZhbC5wdXNoKCB2YWx1ZVswXSApO1xuXG5cdFx0Ly8gTmFOIHdpbGwgZXZhbHVhdGUgdG8gZmFsc2UgdG9vLCBidXQgdG8ga2VlcFxuXHRcdC8vIGxvZ2dpbmcgY2xlYXIsIHNldCBzdGVwIGV4cGxpY2l0bHkuIE1ha2Ugc3VyZVxuXHRcdC8vIG5vdCB0byBvdmVycmlkZSB0aGUgJ3N0ZXAnIHNldHRpbmcgd2l0aCBmYWxzZS5cblx0XHRpZiAoICFwZXJjZW50YWdlICkge1xuXHRcdFx0aWYgKCAhaXNOYU4oIHZhbHVlWzFdICkgKSB7XG5cdFx0XHRcdHRoYXQueFN0ZXBzWzBdID0gdmFsdWVbMV07XG5cdFx0XHR9XG5cdFx0fSBlbHNlIHtcblx0XHRcdHRoYXQueFN0ZXBzLnB1c2goIGlzTmFOKHZhbHVlWzFdKSA/IGZhbHNlIDogdmFsdWVbMV0gKTtcblx0XHR9XG5cblx0XHR0aGF0LnhIaWdoZXN0Q29tcGxldGVTdGVwLnB1c2goMCk7XG5cdH1cblxuXHRmdW5jdGlvbiBoYW5kbGVTdGVwUG9pbnQgKCBpLCBuLCB0aGF0ICkge1xuXG5cdFx0Ly8gSWdub3JlICdmYWxzZScgc3RlcHBpbmcuXG5cdFx0aWYgKCAhbiApIHtcblx0XHRcdHJldHVybiB0cnVlO1xuXHRcdH1cblxuXHRcdC8vIEZhY3RvciB0byByYW5nZSByYXRpb1xuXHRcdHRoYXQueFN0ZXBzW2ldID0gZnJvbVBlcmNlbnRhZ2UoW1xuXHRcdFx0IHRoYXQueFZhbFtpXVxuXHRcdFx0LHRoYXQueFZhbFtpKzFdXG5cdFx0XSwgbikgLyBzdWJSYW5nZVJhdGlvIChcblx0XHRcdHRoYXQueFBjdFtpXSxcblx0XHRcdHRoYXQueFBjdFtpKzFdICk7XG5cblx0XHR2YXIgdG90YWxTdGVwcyA9ICh0aGF0LnhWYWxbaSsxXSAtIHRoYXQueFZhbFtpXSkgLyB0aGF0LnhOdW1TdGVwc1tpXTtcblx0XHR2YXIgaGlnaGVzdFN0ZXAgPSBNYXRoLmNlaWwoTnVtYmVyKHRvdGFsU3RlcHMudG9GaXhlZCgzKSkgLSAxKTtcblx0XHR2YXIgc3RlcCA9IHRoYXQueFZhbFtpXSArICh0aGF0LnhOdW1TdGVwc1tpXSAqIGhpZ2hlc3RTdGVwKTtcblxuXHRcdHRoYXQueEhpZ2hlc3RDb21wbGV0ZVN0ZXBbaV0gPSBzdGVwO1xuXHR9XG5cblxuLy8gSW50ZXJmYWNlXG5cblx0ZnVuY3Rpb24gU3BlY3RydW0gKCBlbnRyeSwgc25hcCwgc2luZ2xlU3RlcCApIHtcblxuXHRcdHRoaXMueFBjdCA9IFtdO1xuXHRcdHRoaXMueFZhbCA9IFtdO1xuXHRcdHRoaXMueFN0ZXBzID0gWyBzaW5nbGVTdGVwIHx8IGZhbHNlIF07XG5cdFx0dGhpcy54TnVtU3RlcHMgPSBbIGZhbHNlIF07XG5cdFx0dGhpcy54SGlnaGVzdENvbXBsZXRlU3RlcCA9IFtdO1xuXG5cdFx0dGhpcy5zbmFwID0gc25hcDtcblxuXHRcdHZhciBpbmRleCwgb3JkZXJlZCA9IFsgLyogWzAsICdtaW4nXSwgWzEsICc1MCUnXSwgWzIsICdtYXgnXSAqLyBdO1xuXG5cdFx0Ly8gTWFwIHRoZSBvYmplY3Qga2V5cyB0byBhbiBhcnJheS5cblx0XHRmb3IgKCBpbmRleCBpbiBlbnRyeSApIHtcblx0XHRcdGlmICggZW50cnkuaGFzT3duUHJvcGVydHkoaW5kZXgpICkge1xuXHRcdFx0XHRvcmRlcmVkLnB1c2goW2VudHJ5W2luZGV4XSwgaW5kZXhdKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBTb3J0IGFsbCBlbnRyaWVzIGJ5IHZhbHVlIChudW1lcmljIHNvcnQpLlxuXHRcdGlmICggb3JkZXJlZC5sZW5ndGggJiYgdHlwZW9mIG9yZGVyZWRbMF1bMF0gPT09IFwib2JqZWN0XCIgKSB7XG5cdFx0XHRvcmRlcmVkLnNvcnQoZnVuY3Rpb24oYSwgYikgeyByZXR1cm4gYVswXVswXSAtIGJbMF1bMF07IH0pO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRvcmRlcmVkLnNvcnQoZnVuY3Rpb24oYSwgYikgeyByZXR1cm4gYVswXSAtIGJbMF07IH0pO1xuXHRcdH1cblxuXG5cdFx0Ly8gQ29udmVydCBhbGwgZW50cmllcyB0byBzdWJyYW5nZXMuXG5cdFx0Zm9yICggaW5kZXggPSAwOyBpbmRleCA8IG9yZGVyZWQubGVuZ3RoOyBpbmRleCsrICkge1xuXHRcdFx0aGFuZGxlRW50cnlQb2ludChvcmRlcmVkW2luZGV4XVsxXSwgb3JkZXJlZFtpbmRleF1bMF0sIHRoaXMpO1xuXHRcdH1cblxuXHRcdC8vIFN0b3JlIHRoZSBhY3R1YWwgc3RlcCB2YWx1ZXMuXG5cdFx0Ly8geFN0ZXBzIGlzIHNvcnRlZCBpbiB0aGUgc2FtZSBvcmRlciBhcyB4UGN0IGFuZCB4VmFsLlxuXHRcdHRoaXMueE51bVN0ZXBzID0gdGhpcy54U3RlcHMuc2xpY2UoMCk7XG5cblx0XHQvLyBDb252ZXJ0IGFsbCBudW1lcmljIHN0ZXBzIHRvIHRoZSBwZXJjZW50YWdlIG9mIHRoZSBzdWJyYW5nZSB0aGV5IHJlcHJlc2VudC5cblx0XHRmb3IgKCBpbmRleCA9IDA7IGluZGV4IDwgdGhpcy54TnVtU3RlcHMubGVuZ3RoOyBpbmRleCsrICkge1xuXHRcdFx0aGFuZGxlU3RlcFBvaW50KGluZGV4LCB0aGlzLnhOdW1TdGVwc1tpbmRleF0sIHRoaXMpO1xuXHRcdH1cblx0fVxuXG5cdFNwZWN0cnVtLnByb3RvdHlwZS5nZXRNYXJnaW4gPSBmdW5jdGlvbiAoIHZhbHVlICkge1xuXG5cdFx0dmFyIHN0ZXAgPSB0aGlzLnhOdW1TdGVwc1swXTtcblxuXHRcdGlmICggc3RlcCAmJiAoKHZhbHVlIC8gc3RlcCkgJSAxKSAhPT0gMCApIHtcblx0XHRcdHRocm93IG5ldyBFcnJvcihcIm5vVWlTbGlkZXIgKFwiICsgVkVSU0lPTiArIFwiKTogJ2xpbWl0JywgJ21hcmdpbicgYW5kICdwYWRkaW5nJyBtdXN0IGJlIGRpdmlzaWJsZSBieSBzdGVwLlwiKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gdGhpcy54UGN0Lmxlbmd0aCA9PT0gMiA/IGZyb21QZXJjZW50YWdlKHRoaXMueFZhbCwgdmFsdWUpIDogZmFsc2U7XG5cdH07XG5cblx0U3BlY3RydW0ucHJvdG90eXBlLnRvU3RlcHBpbmcgPSBmdW5jdGlvbiAoIHZhbHVlICkge1xuXG5cdFx0dmFsdWUgPSB0b1N0ZXBwaW5nKCB0aGlzLnhWYWwsIHRoaXMueFBjdCwgdmFsdWUgKTtcblxuXHRcdHJldHVybiB2YWx1ZTtcblx0fTtcblxuXHRTcGVjdHJ1bS5wcm90b3R5cGUuZnJvbVN0ZXBwaW5nID0gZnVuY3Rpb24gKCB2YWx1ZSApIHtcblxuXHRcdHJldHVybiBmcm9tU3RlcHBpbmcoIHRoaXMueFZhbCwgdGhpcy54UGN0LCB2YWx1ZSApO1xuXHR9O1xuXG5cdFNwZWN0cnVtLnByb3RvdHlwZS5nZXRTdGVwID0gZnVuY3Rpb24gKCB2YWx1ZSApIHtcblxuXHRcdHZhbHVlID0gZ2V0U3RlcCh0aGlzLnhQY3QsIHRoaXMueFN0ZXBzLCB0aGlzLnNuYXAsIHZhbHVlICk7XG5cblx0XHRyZXR1cm4gdmFsdWU7XG5cdH07XG5cblx0U3BlY3RydW0ucHJvdG90eXBlLmdldE5lYXJieVN0ZXBzID0gZnVuY3Rpb24gKCB2YWx1ZSApIHtcblxuXHRcdHZhciBqID0gZ2V0Sih2YWx1ZSwgdGhpcy54UGN0KTtcblxuXHRcdHJldHVybiB7XG5cdFx0XHRzdGVwQmVmb3JlOiB7IHN0YXJ0VmFsdWU6IHRoaXMueFZhbFtqLTJdLCBzdGVwOiB0aGlzLnhOdW1TdGVwc1tqLTJdLCBoaWdoZXN0U3RlcDogdGhpcy54SGlnaGVzdENvbXBsZXRlU3RlcFtqLTJdIH0sXG5cdFx0XHR0aGlzU3RlcDogeyBzdGFydFZhbHVlOiB0aGlzLnhWYWxbai0xXSwgc3RlcDogdGhpcy54TnVtU3RlcHNbai0xXSwgaGlnaGVzdFN0ZXA6IHRoaXMueEhpZ2hlc3RDb21wbGV0ZVN0ZXBbai0xXSB9LFxuXHRcdFx0c3RlcEFmdGVyOiB7IHN0YXJ0VmFsdWU6IHRoaXMueFZhbFtqLTBdLCBzdGVwOiB0aGlzLnhOdW1TdGVwc1tqLTBdLCBoaWdoZXN0U3RlcDogdGhpcy54SGlnaGVzdENvbXBsZXRlU3RlcFtqLTBdIH1cblx0XHR9O1xuXHR9O1xuXG5cdFNwZWN0cnVtLnByb3RvdHlwZS5jb3VudFN0ZXBEZWNpbWFscyA9IGZ1bmN0aW9uICgpIHtcblx0XHR2YXIgc3RlcERlY2ltYWxzID0gdGhpcy54TnVtU3RlcHMubWFwKGNvdW50RGVjaW1hbHMpO1xuXHRcdHJldHVybiBNYXRoLm1heC5hcHBseShudWxsLCBzdGVwRGVjaW1hbHMpO1xuIFx0fTtcblxuXHQvLyBPdXRzaWRlIHRlc3Rpbmdcblx0U3BlY3RydW0ucHJvdG90eXBlLmNvbnZlcnQgPSBmdW5jdGlvbiAoIHZhbHVlICkge1xuXHRcdHJldHVybiB0aGlzLmdldFN0ZXAodGhpcy50b1N0ZXBwaW5nKHZhbHVlKSk7XG5cdH07XG5cbi8qXHRFdmVyeSBpbnB1dCBvcHRpb24gaXMgdGVzdGVkIGFuZCBwYXJzZWQuIFRoaXMnbGwgcHJldmVudFxuXHRlbmRsZXNzIHZhbGlkYXRpb24gaW4gaW50ZXJuYWwgbWV0aG9kcy4gVGhlc2UgdGVzdHMgYXJlXG5cdHN0cnVjdHVyZWQgd2l0aCBhbiBpdGVtIGZvciBldmVyeSBvcHRpb24gYXZhaWxhYmxlLiBBblxuXHRvcHRpb24gY2FuIGJlIG1hcmtlZCBhcyByZXF1aXJlZCBieSBzZXR0aW5nIHRoZSAncicgZmxhZy5cblx0VGhlIHRlc3RpbmcgZnVuY3Rpb24gaXMgcHJvdmlkZWQgd2l0aCB0aHJlZSBhcmd1bWVudHM6XG5cdFx0LSBUaGUgcHJvdmlkZWQgdmFsdWUgZm9yIHRoZSBvcHRpb247XG5cdFx0LSBBIHJlZmVyZW5jZSB0byB0aGUgb3B0aW9ucyBvYmplY3Q7XG5cdFx0LSBUaGUgbmFtZSBmb3IgdGhlIG9wdGlvbjtcblxuXHRUaGUgdGVzdGluZyBmdW5jdGlvbiByZXR1cm5zIGZhbHNlIHdoZW4gYW4gZXJyb3IgaXMgZGV0ZWN0ZWQsXG5cdG9yIHRydWUgd2hlbiBldmVyeXRoaW5nIGlzIE9LLiBJdCBjYW4gYWxzbyBtb2RpZnkgdGhlIG9wdGlvblxuXHRvYmplY3QsIHRvIG1ha2Ugc3VyZSBhbGwgdmFsdWVzIGNhbiBiZSBjb3JyZWN0bHkgbG9vcGVkIGVsc2V3aGVyZS4gKi9cblxuXHR2YXIgZGVmYXVsdEZvcm1hdHRlciA9IHsgJ3RvJzogZnVuY3Rpb24oIHZhbHVlICl7XG5cdFx0cmV0dXJuIHZhbHVlICE9PSB1bmRlZmluZWQgJiYgdmFsdWUudG9GaXhlZCgyKTtcblx0fSwgJ2Zyb20nOiBOdW1iZXIgfTtcblxuXHRmdW5jdGlvbiB2YWxpZGF0ZUZvcm1hdCAoIGVudHJ5ICkge1xuXG5cdFx0Ly8gQW55IG9iamVjdCB3aXRoIGEgdG8gYW5kIGZyb20gbWV0aG9kIGlzIHN1cHBvcnRlZC5cblx0XHRpZiAoIGlzVmFsaWRGb3JtYXR0ZXIoZW50cnkpICkge1xuXHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0fVxuXG5cdFx0dGhyb3cgbmV3IEVycm9yKFwibm9VaVNsaWRlciAoXCIgKyBWRVJTSU9OICsgXCIpOiAnZm9ybWF0JyByZXF1aXJlcyAndG8nIGFuZCAnZnJvbScgbWV0aG9kcy5cIik7XG5cdH1cblxuXHRmdW5jdGlvbiB0ZXN0U3RlcCAoIHBhcnNlZCwgZW50cnkgKSB7XG5cblx0XHRpZiAoICFpc051bWVyaWMoIGVudHJ5ICkgKSB7XG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJub1VpU2xpZGVyIChcIiArIFZFUlNJT04gKyBcIik6ICdzdGVwJyBpcyBub3QgbnVtZXJpYy5cIik7XG5cdFx0fVxuXG5cdFx0Ly8gVGhlIHN0ZXAgb3B0aW9uIGNhbiBzdGlsbCBiZSB1c2VkIHRvIHNldCBzdGVwcGluZ1xuXHRcdC8vIGZvciBsaW5lYXIgc2xpZGVycy4gT3ZlcndyaXR0ZW4gaWYgc2V0IGluICdyYW5nZScuXG5cdFx0cGFyc2VkLnNpbmdsZVN0ZXAgPSBlbnRyeTtcblx0fVxuXG5cdGZ1bmN0aW9uIHRlc3RSYW5nZSAoIHBhcnNlZCwgZW50cnkgKSB7XG5cblx0XHQvLyBGaWx0ZXIgaW5jb3JyZWN0IGlucHV0LlxuXHRcdGlmICggdHlwZW9mIGVudHJ5ICE9PSAnb2JqZWN0JyB8fCBBcnJheS5pc0FycmF5KGVudHJ5KSApIHtcblx0XHRcdHRocm93IG5ldyBFcnJvcihcIm5vVWlTbGlkZXIgKFwiICsgVkVSU0lPTiArIFwiKTogJ3JhbmdlJyBpcyBub3QgYW4gb2JqZWN0LlwiKTtcblx0XHR9XG5cblx0XHQvLyBDYXRjaCBtaXNzaW5nIHN0YXJ0IG9yIGVuZC5cblx0XHRpZiAoIGVudHJ5Lm1pbiA9PT0gdW5kZWZpbmVkIHx8IGVudHJ5Lm1heCA9PT0gdW5kZWZpbmVkICkge1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKFwibm9VaVNsaWRlciAoXCIgKyBWRVJTSU9OICsgXCIpOiBNaXNzaW5nICdtaW4nIG9yICdtYXgnIGluICdyYW5nZScuXCIpO1xuXHRcdH1cblxuXHRcdC8vIENhdGNoIGVxdWFsIHN0YXJ0IG9yIGVuZC5cblx0XHRpZiAoIGVudHJ5Lm1pbiA9PT0gZW50cnkubWF4ICkge1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKFwibm9VaVNsaWRlciAoXCIgKyBWRVJTSU9OICsgXCIpOiAncmFuZ2UnICdtaW4nIGFuZCAnbWF4JyBjYW5ub3QgYmUgZXF1YWwuXCIpO1xuXHRcdH1cblxuXHRcdHBhcnNlZC5zcGVjdHJ1bSA9IG5ldyBTcGVjdHJ1bShlbnRyeSwgcGFyc2VkLnNuYXAsIHBhcnNlZC5zaW5nbGVTdGVwKTtcblx0fVxuXG5cdGZ1bmN0aW9uIHRlc3RTdGFydCAoIHBhcnNlZCwgZW50cnkgKSB7XG5cblx0XHRlbnRyeSA9IGFzQXJyYXkoZW50cnkpO1xuXG5cdFx0Ly8gVmFsaWRhdGUgaW5wdXQuIFZhbHVlcyBhcmVuJ3QgdGVzdGVkLCBhcyB0aGUgcHVibGljIC52YWwgbWV0aG9kXG5cdFx0Ly8gd2lsbCBhbHdheXMgcHJvdmlkZSBhIHZhbGlkIGxvY2F0aW9uLlxuXHRcdGlmICggIUFycmF5LmlzQXJyYXkoIGVudHJ5ICkgfHwgIWVudHJ5Lmxlbmd0aCApIHtcblx0XHRcdHRocm93IG5ldyBFcnJvcihcIm5vVWlTbGlkZXIgKFwiICsgVkVSU0lPTiArIFwiKTogJ3N0YXJ0JyBvcHRpb24gaXMgaW5jb3JyZWN0LlwiKTtcblx0XHR9XG5cblx0XHQvLyBTdG9yZSB0aGUgbnVtYmVyIG9mIGhhbmRsZXMuXG5cdFx0cGFyc2VkLmhhbmRsZXMgPSBlbnRyeS5sZW5ndGg7XG5cblx0XHQvLyBXaGVuIHRoZSBzbGlkZXIgaXMgaW5pdGlhbGl6ZWQsIHRoZSAudmFsIG1ldGhvZCB3aWxsXG5cdFx0Ly8gYmUgY2FsbGVkIHdpdGggdGhlIHN0YXJ0IG9wdGlvbnMuXG5cdFx0cGFyc2VkLnN0YXJ0ID0gZW50cnk7XG5cdH1cblxuXHRmdW5jdGlvbiB0ZXN0U25hcCAoIHBhcnNlZCwgZW50cnkgKSB7XG5cblx0XHQvLyBFbmZvcmNlIDEwMCUgc3RlcHBpbmcgd2l0aGluIHN1YnJhbmdlcy5cblx0XHRwYXJzZWQuc25hcCA9IGVudHJ5O1xuXG5cdFx0aWYgKCB0eXBlb2YgZW50cnkgIT09ICdib29sZWFuJyApe1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKFwibm9VaVNsaWRlciAoXCIgKyBWRVJTSU9OICsgXCIpOiAnc25hcCcgb3B0aW9uIG11c3QgYmUgYSBib29sZWFuLlwiKTtcblx0XHR9XG5cdH1cblxuXHRmdW5jdGlvbiB0ZXN0QW5pbWF0ZSAoIHBhcnNlZCwgZW50cnkgKSB7XG5cblx0XHQvLyBFbmZvcmNlIDEwMCUgc3RlcHBpbmcgd2l0aGluIHN1YnJhbmdlcy5cblx0XHRwYXJzZWQuYW5pbWF0ZSA9IGVudHJ5O1xuXG5cdFx0aWYgKCB0eXBlb2YgZW50cnkgIT09ICdib29sZWFuJyApe1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKFwibm9VaVNsaWRlciAoXCIgKyBWRVJTSU9OICsgXCIpOiAnYW5pbWF0ZScgb3B0aW9uIG11c3QgYmUgYSBib29sZWFuLlwiKTtcblx0XHR9XG5cdH1cblxuXHRmdW5jdGlvbiB0ZXN0QW5pbWF0aW9uRHVyYXRpb24gKCBwYXJzZWQsIGVudHJ5ICkge1xuXG5cdFx0cGFyc2VkLmFuaW1hdGlvbkR1cmF0aW9uID0gZW50cnk7XG5cblx0XHRpZiAoIHR5cGVvZiBlbnRyeSAhPT0gJ251bWJlcicgKXtcblx0XHRcdHRocm93IG5ldyBFcnJvcihcIm5vVWlTbGlkZXIgKFwiICsgVkVSU0lPTiArIFwiKTogJ2FuaW1hdGlvbkR1cmF0aW9uJyBvcHRpb24gbXVzdCBiZSBhIG51bWJlci5cIik7XG5cdFx0fVxuXHR9XG5cblx0ZnVuY3Rpb24gdGVzdENvbm5lY3QgKCBwYXJzZWQsIGVudHJ5ICkge1xuXG5cdFx0dmFyIGNvbm5lY3QgPSBbZmFsc2VdO1xuXHRcdHZhciBpO1xuXG5cdFx0Ly8gTWFwIGxlZ2FjeSBvcHRpb25zXG5cdFx0aWYgKCBlbnRyeSA9PT0gJ2xvd2VyJyApIHtcblx0XHRcdGVudHJ5ID0gW3RydWUsIGZhbHNlXTtcblx0XHR9XG5cblx0XHRlbHNlIGlmICggZW50cnkgPT09ICd1cHBlcicgKSB7XG5cdFx0XHRlbnRyeSA9IFtmYWxzZSwgdHJ1ZV07XG5cdFx0fVxuXG5cdFx0Ly8gSGFuZGxlIGJvb2xlYW4gb3B0aW9uc1xuXHRcdGlmICggZW50cnkgPT09IHRydWUgfHwgZW50cnkgPT09IGZhbHNlICkge1xuXG5cdFx0XHRmb3IgKCBpID0gMTsgaSA8IHBhcnNlZC5oYW5kbGVzOyBpKysgKSB7XG5cdFx0XHRcdGNvbm5lY3QucHVzaChlbnRyeSk7XG5cdFx0XHR9XG5cblx0XHRcdGNvbm5lY3QucHVzaChmYWxzZSk7XG5cdFx0fVxuXG5cdFx0Ly8gUmVqZWN0IGludmFsaWQgaW5wdXRcblx0XHRlbHNlIGlmICggIUFycmF5LmlzQXJyYXkoIGVudHJ5ICkgfHwgIWVudHJ5Lmxlbmd0aCB8fCBlbnRyeS5sZW5ndGggIT09IHBhcnNlZC5oYW5kbGVzICsgMSApIHtcblx0XHRcdHRocm93IG5ldyBFcnJvcihcIm5vVWlTbGlkZXIgKFwiICsgVkVSU0lPTiArIFwiKTogJ2Nvbm5lY3QnIG9wdGlvbiBkb2Vzbid0IG1hdGNoIGhhbmRsZSBjb3VudC5cIik7XG5cdFx0fVxuXG5cdFx0ZWxzZSB7XG5cdFx0XHRjb25uZWN0ID0gZW50cnk7XG5cdFx0fVxuXG5cdFx0cGFyc2VkLmNvbm5lY3QgPSBjb25uZWN0O1xuXHR9XG5cblx0ZnVuY3Rpb24gdGVzdE9yaWVudGF0aW9uICggcGFyc2VkLCBlbnRyeSApIHtcblxuXHRcdC8vIFNldCBvcmllbnRhdGlvbiB0byBhbiBhIG51bWVyaWNhbCB2YWx1ZSBmb3IgZWFzeVxuXHRcdC8vIGFycmF5IHNlbGVjdGlvbi5cblx0XHRzd2l0Y2ggKCBlbnRyeSApe1xuXHRcdCAgY2FzZSAnaG9yaXpvbnRhbCc6XG5cdFx0XHRwYXJzZWQub3J0ID0gMDtcblx0XHRcdGJyZWFrO1xuXHRcdCAgY2FzZSAndmVydGljYWwnOlxuXHRcdFx0cGFyc2VkLm9ydCA9IDE7XG5cdFx0XHRicmVhaztcblx0XHQgIGRlZmF1bHQ6XG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJub1VpU2xpZGVyIChcIiArIFZFUlNJT04gKyBcIik6ICdvcmllbnRhdGlvbicgb3B0aW9uIGlzIGludmFsaWQuXCIpO1xuXHRcdH1cblx0fVxuXG5cdGZ1bmN0aW9uIHRlc3RNYXJnaW4gKCBwYXJzZWQsIGVudHJ5ICkge1xuXG5cdFx0aWYgKCAhaXNOdW1lcmljKGVudHJ5KSApe1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKFwibm9VaVNsaWRlciAoXCIgKyBWRVJTSU9OICsgXCIpOiAnbWFyZ2luJyBvcHRpb24gbXVzdCBiZSBudW1lcmljLlwiKTtcblx0XHR9XG5cblx0XHQvLyBJc3N1ZSAjNTgyXG5cdFx0aWYgKCBlbnRyeSA9PT0gMCApIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRwYXJzZWQubWFyZ2luID0gcGFyc2VkLnNwZWN0cnVtLmdldE1hcmdpbihlbnRyeSk7XG5cblx0XHRpZiAoICFwYXJzZWQubWFyZ2luICkge1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKFwibm9VaVNsaWRlciAoXCIgKyBWRVJTSU9OICsgXCIpOiAnbWFyZ2luJyBvcHRpb24gaXMgb25seSBzdXBwb3J0ZWQgb24gbGluZWFyIHNsaWRlcnMuXCIpO1xuXHRcdH1cblx0fVxuXG5cdGZ1bmN0aW9uIHRlc3RMaW1pdCAoIHBhcnNlZCwgZW50cnkgKSB7XG5cblx0XHRpZiAoICFpc051bWVyaWMoZW50cnkpICl7XG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJub1VpU2xpZGVyIChcIiArIFZFUlNJT04gKyBcIik6ICdsaW1pdCcgb3B0aW9uIG11c3QgYmUgbnVtZXJpYy5cIik7XG5cdFx0fVxuXG5cdFx0cGFyc2VkLmxpbWl0ID0gcGFyc2VkLnNwZWN0cnVtLmdldE1hcmdpbihlbnRyeSk7XG5cblx0XHRpZiAoICFwYXJzZWQubGltaXQgfHwgcGFyc2VkLmhhbmRsZXMgPCAyICkge1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKFwibm9VaVNsaWRlciAoXCIgKyBWRVJTSU9OICsgXCIpOiAnbGltaXQnIG9wdGlvbiBpcyBvbmx5IHN1cHBvcnRlZCBvbiBsaW5lYXIgc2xpZGVycyB3aXRoIDIgb3IgbW9yZSBoYW5kbGVzLlwiKTtcblx0XHR9XG5cdH1cblxuXHRmdW5jdGlvbiB0ZXN0UGFkZGluZyAoIHBhcnNlZCwgZW50cnkgKSB7XG5cblx0XHRpZiAoICFpc051bWVyaWMoZW50cnkpICl7XG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJub1VpU2xpZGVyIChcIiArIFZFUlNJT04gKyBcIik6ICdwYWRkaW5nJyBvcHRpb24gbXVzdCBiZSBudW1lcmljLlwiKTtcblx0XHR9XG5cblx0XHRpZiAoIGVudHJ5ID09PSAwICkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdHBhcnNlZC5wYWRkaW5nID0gcGFyc2VkLnNwZWN0cnVtLmdldE1hcmdpbihlbnRyeSk7XG5cblx0XHRpZiAoICFwYXJzZWQucGFkZGluZyApIHtcblx0XHRcdHRocm93IG5ldyBFcnJvcihcIm5vVWlTbGlkZXIgKFwiICsgVkVSU0lPTiArIFwiKTogJ3BhZGRpbmcnIG9wdGlvbiBpcyBvbmx5IHN1cHBvcnRlZCBvbiBsaW5lYXIgc2xpZGVycy5cIik7XG5cdFx0fVxuXG5cdFx0aWYgKCBwYXJzZWQucGFkZGluZyA8IDAgKSB7XG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJub1VpU2xpZGVyIChcIiArIFZFUlNJT04gKyBcIik6ICdwYWRkaW5nJyBvcHRpb24gbXVzdCBiZSBhIHBvc2l0aXZlIG51bWJlci5cIik7XG5cdFx0fVxuXG5cdFx0aWYgKCBwYXJzZWQucGFkZGluZyA+PSA1MCApIHtcblx0XHRcdHRocm93IG5ldyBFcnJvcihcIm5vVWlTbGlkZXIgKFwiICsgVkVSU0lPTiArIFwiKTogJ3BhZGRpbmcnIG9wdGlvbiBtdXN0IGJlIGxlc3MgdGhhbiBoYWxmIHRoZSByYW5nZS5cIik7XG5cdFx0fVxuXHR9XG5cblx0ZnVuY3Rpb24gdGVzdERpcmVjdGlvbiAoIHBhcnNlZCwgZW50cnkgKSB7XG5cblx0XHQvLyBTZXQgZGlyZWN0aW9uIGFzIGEgbnVtZXJpY2FsIHZhbHVlIGZvciBlYXN5IHBhcnNpbmcuXG5cdFx0Ly8gSW52ZXJ0IGNvbm5lY3Rpb24gZm9yIFJUTCBzbGlkZXJzLCBzbyB0aGF0IHRoZSBwcm9wZXJcblx0XHQvLyBoYW5kbGVzIGdldCB0aGUgY29ubmVjdC9iYWNrZ3JvdW5kIGNsYXNzZXMuXG5cdFx0c3dpdGNoICggZW50cnkgKSB7XG5cdFx0ICBjYXNlICdsdHInOlxuXHRcdFx0cGFyc2VkLmRpciA9IDA7XG5cdFx0XHRicmVhaztcblx0XHQgIGNhc2UgJ3J0bCc6XG5cdFx0XHRwYXJzZWQuZGlyID0gMTtcblx0XHRcdGJyZWFrO1xuXHRcdCAgZGVmYXVsdDpcblx0XHRcdHRocm93IG5ldyBFcnJvcihcIm5vVWlTbGlkZXIgKFwiICsgVkVSU0lPTiArIFwiKTogJ2RpcmVjdGlvbicgb3B0aW9uIHdhcyBub3QgcmVjb2duaXplZC5cIik7XG5cdFx0fVxuXHR9XG5cblx0ZnVuY3Rpb24gdGVzdEJlaGF2aW91ciAoIHBhcnNlZCwgZW50cnkgKSB7XG5cblx0XHQvLyBNYWtlIHN1cmUgdGhlIGlucHV0IGlzIGEgc3RyaW5nLlxuXHRcdGlmICggdHlwZW9mIGVudHJ5ICE9PSAnc3RyaW5nJyApIHtcblx0XHRcdHRocm93IG5ldyBFcnJvcihcIm5vVWlTbGlkZXIgKFwiICsgVkVSU0lPTiArIFwiKTogJ2JlaGF2aW91cicgbXVzdCBiZSBhIHN0cmluZyBjb250YWluaW5nIG9wdGlvbnMuXCIpO1xuXHRcdH1cblxuXHRcdC8vIENoZWNrIGlmIHRoZSBzdHJpbmcgY29udGFpbnMgYW55IGtleXdvcmRzLlxuXHRcdC8vIE5vbmUgYXJlIHJlcXVpcmVkLlxuXHRcdHZhciB0YXAgPSBlbnRyeS5pbmRleE9mKCd0YXAnKSA+PSAwO1xuXHRcdHZhciBkcmFnID0gZW50cnkuaW5kZXhPZignZHJhZycpID49IDA7XG5cdFx0dmFyIGZpeGVkID0gZW50cnkuaW5kZXhPZignZml4ZWQnKSA+PSAwO1xuXHRcdHZhciBzbmFwID0gZW50cnkuaW5kZXhPZignc25hcCcpID49IDA7XG5cdFx0dmFyIGhvdmVyID0gZW50cnkuaW5kZXhPZignaG92ZXInKSA+PSAwO1xuXG5cdFx0aWYgKCBmaXhlZCApIHtcblxuXHRcdFx0aWYgKCBwYXJzZWQuaGFuZGxlcyAhPT0gMiApIHtcblx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKFwibm9VaVNsaWRlciAoXCIgKyBWRVJTSU9OICsgXCIpOiAnZml4ZWQnIGJlaGF2aW91ciBtdXN0IGJlIHVzZWQgd2l0aCAyIGhhbmRsZXNcIik7XG5cdFx0XHR9XG5cblx0XHRcdC8vIFVzZSBtYXJnaW4gdG8gZW5mb3JjZSBmaXhlZCBzdGF0ZVxuXHRcdFx0dGVzdE1hcmdpbihwYXJzZWQsIHBhcnNlZC5zdGFydFsxXSAtIHBhcnNlZC5zdGFydFswXSk7XG5cdFx0fVxuXG5cdFx0cGFyc2VkLmV2ZW50cyA9IHtcblx0XHRcdHRhcDogdGFwIHx8IHNuYXAsXG5cdFx0XHRkcmFnOiBkcmFnLFxuXHRcdFx0Zml4ZWQ6IGZpeGVkLFxuXHRcdFx0c25hcDogc25hcCxcblx0XHRcdGhvdmVyOiBob3ZlclxuXHRcdH07XG5cdH1cblxuXHRmdW5jdGlvbiB0ZXN0TXVsdGl0b3VjaCAoIHBhcnNlZCwgZW50cnkgKSB7XG5cdFx0cGFyc2VkLm11bHRpdG91Y2ggPSBlbnRyeTtcblxuXHRcdGlmICggdHlwZW9mIGVudHJ5ICE9PSAnYm9vbGVhbicgKXtcblx0XHRcdHRocm93IG5ldyBFcnJvcihcIm5vVWlTbGlkZXIgKFwiICsgVkVSU0lPTiArIFwiKTogJ211bHRpdG91Y2gnIG9wdGlvbiBtdXN0IGJlIGEgYm9vbGVhbi5cIik7XG5cdFx0fVxuXHR9XG5cblx0ZnVuY3Rpb24gdGVzdFRvb2x0aXBzICggcGFyc2VkLCBlbnRyeSApIHtcblxuXHRcdGlmICggZW50cnkgPT09IGZhbHNlICkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdGVsc2UgaWYgKCBlbnRyeSA9PT0gdHJ1ZSApIHtcblxuXHRcdFx0cGFyc2VkLnRvb2x0aXBzID0gW107XG5cblx0XHRcdGZvciAoIHZhciBpID0gMDsgaSA8IHBhcnNlZC5oYW5kbGVzOyBpKysgKSB7XG5cdFx0XHRcdHBhcnNlZC50b29sdGlwcy5wdXNoKHRydWUpO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGVsc2Uge1xuXG5cdFx0XHRwYXJzZWQudG9vbHRpcHMgPSBhc0FycmF5KGVudHJ5KTtcblxuXHRcdFx0aWYgKCBwYXJzZWQudG9vbHRpcHMubGVuZ3RoICE9PSBwYXJzZWQuaGFuZGxlcyApIHtcblx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKFwibm9VaVNsaWRlciAoXCIgKyBWRVJTSU9OICsgXCIpOiBtdXN0IHBhc3MgYSBmb3JtYXR0ZXIgZm9yIGFsbCBoYW5kbGVzLlwiKTtcblx0XHRcdH1cblxuXHRcdFx0cGFyc2VkLnRvb2x0aXBzLmZvckVhY2goZnVuY3Rpb24oZm9ybWF0dGVyKXtcblx0XHRcdFx0aWYgKCB0eXBlb2YgZm9ybWF0dGVyICE9PSAnYm9vbGVhbicgJiYgKHR5cGVvZiBmb3JtYXR0ZXIgIT09ICdvYmplY3QnIHx8IHR5cGVvZiBmb3JtYXR0ZXIudG8gIT09ICdmdW5jdGlvbicpICkge1xuXHRcdFx0XHRcdHRocm93IG5ldyBFcnJvcihcIm5vVWlTbGlkZXIgKFwiICsgVkVSU0lPTiArIFwiKTogJ3Rvb2x0aXBzJyBtdXN0IGJlIHBhc3NlZCBhIGZvcm1hdHRlciBvciAnZmFsc2UnLlwiKTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0fVxuXHR9XG5cblx0ZnVuY3Rpb24gdGVzdEFyaWFGb3JtYXQgKCBwYXJzZWQsIGVudHJ5ICkge1xuXHRcdHBhcnNlZC5hcmlhRm9ybWF0ID0gZW50cnk7XG5cdFx0dmFsaWRhdGVGb3JtYXQoZW50cnkpO1xuXHR9XG5cblx0ZnVuY3Rpb24gdGVzdEZvcm1hdCAoIHBhcnNlZCwgZW50cnkgKSB7XG5cdFx0cGFyc2VkLmZvcm1hdCA9IGVudHJ5O1xuXHRcdHZhbGlkYXRlRm9ybWF0KGVudHJ5KTtcblx0fVxuXG5cdGZ1bmN0aW9uIHRlc3RDc3NQcmVmaXggKCBwYXJzZWQsIGVudHJ5ICkge1xuXG5cdFx0aWYgKCBlbnRyeSAhPT0gdW5kZWZpbmVkICYmIHR5cGVvZiBlbnRyeSAhPT0gJ3N0cmluZycgJiYgZW50cnkgIT09IGZhbHNlICkge1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKFwibm9VaVNsaWRlciAoXCIgKyBWRVJTSU9OICsgXCIpOiAnY3NzUHJlZml4JyBtdXN0IGJlIGEgc3RyaW5nIG9yIGBmYWxzZWAuXCIpO1xuXHRcdH1cblxuXHRcdHBhcnNlZC5jc3NQcmVmaXggPSBlbnRyeTtcblx0fVxuXG5cdGZ1bmN0aW9uIHRlc3RDc3NDbGFzc2VzICggcGFyc2VkLCBlbnRyeSApIHtcblxuXHRcdGlmICggZW50cnkgIT09IHVuZGVmaW5lZCAmJiB0eXBlb2YgZW50cnkgIT09ICdvYmplY3QnICkge1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKFwibm9VaVNsaWRlciAoXCIgKyBWRVJTSU9OICsgXCIpOiAnY3NzQ2xhc3NlcycgbXVzdCBiZSBhbiBvYmplY3QuXCIpO1xuXHRcdH1cblxuXHRcdGlmICggdHlwZW9mIHBhcnNlZC5jc3NQcmVmaXggPT09ICdzdHJpbmcnICkge1xuXHRcdFx0cGFyc2VkLmNzc0NsYXNzZXMgPSB7fTtcblxuXHRcdFx0Zm9yICggdmFyIGtleSBpbiBlbnRyeSApIHtcblx0XHRcdFx0aWYgKCAhZW50cnkuaGFzT3duUHJvcGVydHkoa2V5KSApIHsgY29udGludWU7IH1cblxuXHRcdFx0XHRwYXJzZWQuY3NzQ2xhc3Nlc1trZXldID0gcGFyc2VkLmNzc1ByZWZpeCArIGVudHJ5W2tleV07XG5cdFx0XHR9XG5cdFx0fSBlbHNlIHtcblx0XHRcdHBhcnNlZC5jc3NDbGFzc2VzID0gZW50cnk7XG5cdFx0fVxuXHR9XG5cblx0ZnVuY3Rpb24gdGVzdFVzZVJhZiAoIHBhcnNlZCwgZW50cnkgKSB7XG5cdFx0aWYgKCBlbnRyeSA9PT0gdHJ1ZSB8fCBlbnRyeSA9PT0gZmFsc2UgKSB7XG5cdFx0XHRwYXJzZWQudXNlUmVxdWVzdEFuaW1hdGlvbkZyYW1lID0gZW50cnk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHRocm93IG5ldyBFcnJvcihcIm5vVWlTbGlkZXIgKFwiICsgVkVSU0lPTiArIFwiKTogJ3VzZVJlcXVlc3RBbmltYXRpb25GcmFtZScgb3B0aW9uIHNob3VsZCBiZSB0cnVlIChkZWZhdWx0KSBvciBmYWxzZS5cIik7XG5cdFx0fVxuXHR9XG5cblx0Ly8gVGVzdCBhbGwgZGV2ZWxvcGVyIHNldHRpbmdzIGFuZCBwYXJzZSB0byBhc3N1bXB0aW9uLXNhZmUgdmFsdWVzLlxuXHRmdW5jdGlvbiB0ZXN0T3B0aW9ucyAoIG9wdGlvbnMgKSB7XG5cblx0XHQvLyBUbyBwcm92ZSBhIGZpeCBmb3IgIzUzNywgZnJlZXplIG9wdGlvbnMgaGVyZS5cblx0XHQvLyBJZiB0aGUgb2JqZWN0IGlzIG1vZGlmaWVkLCBhbiBlcnJvciB3aWxsIGJlIHRocm93bi5cblx0XHQvLyBPYmplY3QuZnJlZXplKG9wdGlvbnMpO1xuXG5cdFx0dmFyIHBhcnNlZCA9IHtcblx0XHRcdG1hcmdpbjogMCxcblx0XHRcdGxpbWl0OiAwLFxuXHRcdFx0cGFkZGluZzogMCxcblx0XHRcdGFuaW1hdGU6IHRydWUsXG5cdFx0XHRhbmltYXRpb25EdXJhdGlvbjogMzAwLFxuXHRcdFx0YXJpYUZvcm1hdDogZGVmYXVsdEZvcm1hdHRlcixcblx0XHRcdGZvcm1hdDogZGVmYXVsdEZvcm1hdHRlclxuXHRcdH07XG5cblx0XHQvLyBUZXN0cyBhcmUgZXhlY3V0ZWQgaW4gdGhlIG9yZGVyIHRoZXkgYXJlIHByZXNlbnRlZCBoZXJlLlxuXHRcdHZhciB0ZXN0cyA9IHtcblx0XHRcdCdzdGVwJzogeyByOiBmYWxzZSwgdDogdGVzdFN0ZXAgfSxcblx0XHRcdCdzdGFydCc6IHsgcjogdHJ1ZSwgdDogdGVzdFN0YXJ0IH0sXG5cdFx0XHQnY29ubmVjdCc6IHsgcjogdHJ1ZSwgdDogdGVzdENvbm5lY3QgfSxcblx0XHRcdCdkaXJlY3Rpb24nOiB7IHI6IHRydWUsIHQ6IHRlc3REaXJlY3Rpb24gfSxcblx0XHRcdCdzbmFwJzogeyByOiBmYWxzZSwgdDogdGVzdFNuYXAgfSxcblx0XHRcdCdhbmltYXRlJzogeyByOiBmYWxzZSwgdDogdGVzdEFuaW1hdGUgfSxcblx0XHRcdCdhbmltYXRpb25EdXJhdGlvbic6IHsgcjogZmFsc2UsIHQ6IHRlc3RBbmltYXRpb25EdXJhdGlvbiB9LFxuXHRcdFx0J3JhbmdlJzogeyByOiB0cnVlLCB0OiB0ZXN0UmFuZ2UgfSxcblx0XHRcdCdvcmllbnRhdGlvbic6IHsgcjogZmFsc2UsIHQ6IHRlc3RPcmllbnRhdGlvbiB9LFxuXHRcdFx0J21hcmdpbic6IHsgcjogZmFsc2UsIHQ6IHRlc3RNYXJnaW4gfSxcblx0XHRcdCdsaW1pdCc6IHsgcjogZmFsc2UsIHQ6IHRlc3RMaW1pdCB9LFxuXHRcdFx0J3BhZGRpbmcnOiB7IHI6IGZhbHNlLCB0OiB0ZXN0UGFkZGluZyB9LFxuXHRcdFx0J2JlaGF2aW91cic6IHsgcjogdHJ1ZSwgdDogdGVzdEJlaGF2aW91ciB9LFxuXHRcdFx0J211bHRpdG91Y2gnOiB7IHI6IHRydWUsIHQ6IHRlc3RNdWx0aXRvdWNoIH0sXG5cdFx0XHQnYXJpYUZvcm1hdCc6IHsgcjogZmFsc2UsIHQ6IHRlc3RBcmlhRm9ybWF0IH0sXG5cdFx0XHQnZm9ybWF0JzogeyByOiBmYWxzZSwgdDogdGVzdEZvcm1hdCB9LFxuXHRcdFx0J3Rvb2x0aXBzJzogeyByOiBmYWxzZSwgdDogdGVzdFRvb2x0aXBzIH0sXG5cdFx0XHQnY3NzUHJlZml4JzogeyByOiBmYWxzZSwgdDogdGVzdENzc1ByZWZpeCB9LFxuXHRcdFx0J2Nzc0NsYXNzZXMnOiB7IHI6IGZhbHNlLCB0OiB0ZXN0Q3NzQ2xhc3NlcyB9LFxuXHRcdFx0J3VzZVJlcXVlc3RBbmltYXRpb25GcmFtZSc6IHsgcjogZmFsc2UsIHQ6IHRlc3RVc2VSYWYgfVxuXHRcdH07XG5cblx0XHR2YXIgZGVmYXVsdHMgPSB7XG5cdFx0XHQnY29ubmVjdCc6IGZhbHNlLFxuXHRcdFx0J2RpcmVjdGlvbic6ICdsdHInLFxuXHRcdFx0J2JlaGF2aW91cic6ICd0YXAnLFxuXHRcdFx0J211bHRpdG91Y2gnOiBmYWxzZSxcblx0XHRcdCdvcmllbnRhdGlvbic6ICdob3Jpem9udGFsJyxcblx0XHRcdCdjc3NQcmVmaXgnIDogJ25vVWktJyxcblx0XHRcdCdjc3NDbGFzc2VzJzoge1xuXHRcdFx0XHR0YXJnZXQ6ICd0YXJnZXQnLFxuXHRcdFx0XHRiYXNlOiAnYmFzZScsXG5cdFx0XHRcdG9yaWdpbjogJ29yaWdpbicsXG5cdFx0XHRcdGhhbmRsZTogJ2hhbmRsZScsXG5cdFx0XHRcdGhhbmRsZUxvd2VyOiAnaGFuZGxlLWxvd2VyJyxcblx0XHRcdFx0aGFuZGxlVXBwZXI6ICdoYW5kbGUtdXBwZXInLFxuXHRcdFx0XHRob3Jpem9udGFsOiAnaG9yaXpvbnRhbCcsXG5cdFx0XHRcdHZlcnRpY2FsOiAndmVydGljYWwnLFxuXHRcdFx0XHRiYWNrZ3JvdW5kOiAnYmFja2dyb3VuZCcsXG5cdFx0XHRcdGNvbm5lY3Q6ICdjb25uZWN0Jyxcblx0XHRcdFx0bHRyOiAnbHRyJyxcblx0XHRcdFx0cnRsOiAncnRsJyxcblx0XHRcdFx0ZHJhZ2dhYmxlOiAnZHJhZ2dhYmxlJyxcblx0XHRcdFx0ZHJhZzogJ3N0YXRlLWRyYWcnLFxuXHRcdFx0XHR0YXA6ICdzdGF0ZS10YXAnLFxuXHRcdFx0XHRhY3RpdmU6ICdhY3RpdmUnLFxuXHRcdFx0XHR0b29sdGlwOiAndG9vbHRpcCcsXG5cdFx0XHRcdHBpcHM6ICdwaXBzJyxcblx0XHRcdFx0cGlwc0hvcml6b250YWw6ICdwaXBzLWhvcml6b250YWwnLFxuXHRcdFx0XHRwaXBzVmVydGljYWw6ICdwaXBzLXZlcnRpY2FsJyxcblx0XHRcdFx0bWFya2VyOiAnbWFya2VyJyxcblx0XHRcdFx0bWFya2VySG9yaXpvbnRhbDogJ21hcmtlci1ob3Jpem9udGFsJyxcblx0XHRcdFx0bWFya2VyVmVydGljYWw6ICdtYXJrZXItdmVydGljYWwnLFxuXHRcdFx0XHRtYXJrZXJOb3JtYWw6ICdtYXJrZXItbm9ybWFsJyxcblx0XHRcdFx0bWFya2VyTGFyZ2U6ICdtYXJrZXItbGFyZ2UnLFxuXHRcdFx0XHRtYXJrZXJTdWI6ICdtYXJrZXItc3ViJyxcblx0XHRcdFx0dmFsdWU6ICd2YWx1ZScsXG5cdFx0XHRcdHZhbHVlSG9yaXpvbnRhbDogJ3ZhbHVlLWhvcml6b250YWwnLFxuXHRcdFx0XHR2YWx1ZVZlcnRpY2FsOiAndmFsdWUtdmVydGljYWwnLFxuXHRcdFx0XHR2YWx1ZU5vcm1hbDogJ3ZhbHVlLW5vcm1hbCcsXG5cdFx0XHRcdHZhbHVlTGFyZ2U6ICd2YWx1ZS1sYXJnZScsXG5cdFx0XHRcdHZhbHVlU3ViOiAndmFsdWUtc3ViJ1xuXHRcdFx0fSxcblx0XHRcdCd1c2VSZXF1ZXN0QW5pbWF0aW9uRnJhbWUnOiB0cnVlXG5cdFx0fTtcblxuXHRcdC8vIEFyaWFGb3JtYXQgZGVmYXVsdHMgdG8gcmVndWxhciBmb3JtYXQsIGlmIGFueS5cblx0XHRpZiAoIG9wdGlvbnMuZm9ybWF0ICYmICFvcHRpb25zLmFyaWFGb3JtYXQgKSB7XG5cdFx0XHRvcHRpb25zLmFyaWFGb3JtYXQgPSBvcHRpb25zLmZvcm1hdDtcblx0XHR9XG5cblx0XHQvLyBSdW4gYWxsIG9wdGlvbnMgdGhyb3VnaCBhIHRlc3RpbmcgbWVjaGFuaXNtIHRvIGVuc3VyZSBjb3JyZWN0XG5cdFx0Ly8gaW5wdXQuIEl0IHNob3VsZCBiZSBub3RlZCB0aGF0IG9wdGlvbnMgbWlnaHQgZ2V0IG1vZGlmaWVkIHRvXG5cdFx0Ly8gYmUgaGFuZGxlZCBwcm9wZXJseS4gRS5nLiB3cmFwcGluZyBpbnRlZ2VycyBpbiBhcnJheXMuXG5cdFx0T2JqZWN0LmtleXModGVzdHMpLmZvckVhY2goZnVuY3Rpb24oIG5hbWUgKXtcblxuXHRcdFx0Ly8gSWYgdGhlIG9wdGlvbiBpc24ndCBzZXQsIGJ1dCBpdCBpcyByZXF1aXJlZCwgdGhyb3cgYW4gZXJyb3IuXG5cdFx0XHRpZiAoIG9wdGlvbnNbbmFtZV0gPT09IHVuZGVmaW5lZCAmJiBkZWZhdWx0c1tuYW1lXSA9PT0gdW5kZWZpbmVkICkge1xuXG5cdFx0XHRcdGlmICggdGVzdHNbbmFtZV0uciApIHtcblx0XHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJub1VpU2xpZGVyIChcIiArIFZFUlNJT04gKyBcIik6ICdcIiArIG5hbWUgKyBcIicgaXMgcmVxdWlyZWQuXCIpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHR9XG5cblx0XHRcdHRlc3RzW25hbWVdLnQoIHBhcnNlZCwgb3B0aW9uc1tuYW1lXSA9PT0gdW5kZWZpbmVkID8gZGVmYXVsdHNbbmFtZV0gOiBvcHRpb25zW25hbWVdICk7XG5cdFx0fSk7XG5cblx0XHQvLyBGb3J3YXJkIHBpcHMgb3B0aW9uc1xuXHRcdHBhcnNlZC5waXBzID0gb3B0aW9ucy5waXBzO1xuXG5cdFx0dmFyIHN0eWxlcyA9IFtbJ2xlZnQnLCAndG9wJ10sIFsncmlnaHQnLCAnYm90dG9tJ11dO1xuXG5cdFx0Ly8gUHJlLWRlZmluZSB0aGUgc3R5bGVzLlxuXHRcdHBhcnNlZC5zdHlsZSA9IHN0eWxlc1twYXJzZWQuZGlyXVtwYXJzZWQub3J0XTtcblx0XHRwYXJzZWQuc3R5bGVPcG9zaXRlID0gc3R5bGVzW3BhcnNlZC5kaXI/MDoxXVtwYXJzZWQub3J0XTtcblxuXHRcdHJldHVybiBwYXJzZWQ7XG5cdH1cblxuXG5mdW5jdGlvbiBjbG9zdXJlICggdGFyZ2V0LCBvcHRpb25zLCBvcmlnaW5hbE9wdGlvbnMgKXtcblxuXHR2YXIgYWN0aW9ucyA9IGdldEFjdGlvbnMoKTtcblx0dmFyIHN1cHBvcnRzVG91Y2hBY3Rpb25Ob25lID0gZ2V0U3VwcG9ydHNUb3VjaEFjdGlvbk5vbmUoKTtcblx0dmFyIHN1cHBvcnRzUGFzc2l2ZSA9IHN1cHBvcnRzVG91Y2hBY3Rpb25Ob25lICYmIGdldFN1cHBvcnRzUGFzc2l2ZSgpO1xuXG5cdC8vIEFsbCB2YXJpYWJsZXMgbG9jYWwgdG8gJ2Nsb3N1cmUnIGFyZSBwcmVmaXhlZCB3aXRoICdzY29wZV8nXG5cdHZhciBzY29wZV9UYXJnZXQgPSB0YXJnZXQ7XG5cdHZhciBzY29wZV9Mb2NhdGlvbnMgPSBbXTtcblx0dmFyIHNjb3BlX0Jhc2U7XG5cdHZhciBzY29wZV9IYW5kbGVzO1xuXHR2YXIgc2NvcGVfSGFuZGxlTnVtYmVycyA9IFtdO1xuXHR2YXIgc2NvcGVfQWN0aXZlSGFuZGxlc0NvdW50ID0gMDtcblx0dmFyIHNjb3BlX0Nvbm5lY3RzO1xuXHR2YXIgc2NvcGVfU3BlY3RydW0gPSBvcHRpb25zLnNwZWN0cnVtO1xuXHR2YXIgc2NvcGVfVmFsdWVzID0gW107XG5cdHZhciBzY29wZV9FdmVudHMgPSB7fTtcblx0dmFyIHNjb3BlX1NlbGY7XG5cdHZhciBzY29wZV9QaXBzO1xuXHR2YXIgc2NvcGVfRG9jdW1lbnQgPSB0YXJnZXQub3duZXJEb2N1bWVudDtcblx0dmFyIHNjb3BlX0RvY3VtZW50RWxlbWVudCA9IHNjb3BlX0RvY3VtZW50LmRvY3VtZW50RWxlbWVudDtcblx0dmFyIHNjb3BlX0JvZHkgPSBzY29wZV9Eb2N1bWVudC5ib2R5O1xuXG5cblx0Ly8gQ3JlYXRlcyBhIG5vZGUsIGFkZHMgaXQgdG8gdGFyZ2V0LCByZXR1cm5zIHRoZSBuZXcgbm9kZS5cblx0ZnVuY3Rpb24gYWRkTm9kZVRvICggdGFyZ2V0LCBjbGFzc05hbWUgKSB7XG5cblx0XHR2YXIgZGl2ID0gc2NvcGVfRG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cblx0XHRpZiAoIGNsYXNzTmFtZSApIHtcblx0XHRcdGFkZENsYXNzKGRpdiwgY2xhc3NOYW1lKTtcblx0XHR9XG5cblx0XHR0YXJnZXQuYXBwZW5kQ2hpbGQoZGl2KTtcblxuXHRcdHJldHVybiBkaXY7XG5cdH1cblxuXHQvLyBBcHBlbmQgYSBvcmlnaW4gdG8gdGhlIGJhc2Vcblx0ZnVuY3Rpb24gYWRkT3JpZ2luICggYmFzZSwgaGFuZGxlTnVtYmVyICkge1xuXG5cdFx0dmFyIG9yaWdpbiA9IGFkZE5vZGVUbyhiYXNlLCBvcHRpb25zLmNzc0NsYXNzZXMub3JpZ2luKTtcblx0XHR2YXIgaGFuZGxlID0gYWRkTm9kZVRvKG9yaWdpbiwgb3B0aW9ucy5jc3NDbGFzc2VzLmhhbmRsZSk7XG5cblx0XHRoYW5kbGUuc2V0QXR0cmlidXRlKCdkYXRhLWhhbmRsZScsIGhhbmRsZU51bWJlcik7XG5cblx0XHQvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9IVE1ML0dsb2JhbF9hdHRyaWJ1dGVzL3RhYmluZGV4XG5cdFx0Ly8gMCA9IGZvY3VzYWJsZSBhbmQgcmVhY2hhYmxlXG5cdFx0aGFuZGxlLnNldEF0dHJpYnV0ZSgndGFiaW5kZXgnLCAnMCcpO1xuXHRcdGhhbmRsZS5zZXRBdHRyaWJ1dGUoJ3JvbGUnLCAnc2xpZGVyJyk7XG5cdFx0aGFuZGxlLnNldEF0dHJpYnV0ZSgnYXJpYS1vcmllbnRhdGlvbicsIG9wdGlvbnMub3J0ID8gJ3ZlcnRpY2FsJyA6ICdob3Jpem9udGFsJyk7XG5cblx0XHRpZiAoIGhhbmRsZU51bWJlciA9PT0gMCApIHtcblx0XHRcdGFkZENsYXNzKGhhbmRsZSwgb3B0aW9ucy5jc3NDbGFzc2VzLmhhbmRsZUxvd2VyKTtcblx0XHR9XG5cblx0XHRlbHNlIGlmICggaGFuZGxlTnVtYmVyID09PSBvcHRpb25zLmhhbmRsZXMgLSAxICkge1xuXHRcdFx0YWRkQ2xhc3MoaGFuZGxlLCBvcHRpb25zLmNzc0NsYXNzZXMuaGFuZGxlVXBwZXIpO1xuXHRcdH1cblxuXHRcdHJldHVybiBvcmlnaW47XG5cdH1cblxuXHQvLyBJbnNlcnQgbm9kZXMgZm9yIGNvbm5lY3QgZWxlbWVudHNcblx0ZnVuY3Rpb24gYWRkQ29ubmVjdCAoIGJhc2UsIGFkZCApIHtcblxuXHRcdGlmICggIWFkZCApIHtcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9XG5cblx0XHRyZXR1cm4gYWRkTm9kZVRvKGJhc2UsIG9wdGlvbnMuY3NzQ2xhc3Nlcy5jb25uZWN0KTtcblx0fVxuXG5cdC8vIEFkZCBoYW5kbGVzIHRvIHRoZSBzbGlkZXIgYmFzZS5cblx0ZnVuY3Rpb24gYWRkRWxlbWVudHMgKCBjb25uZWN0T3B0aW9ucywgYmFzZSApIHtcblxuXHRcdHNjb3BlX0hhbmRsZXMgPSBbXTtcblx0XHRzY29wZV9Db25uZWN0cyA9IFtdO1xuXG5cdFx0c2NvcGVfQ29ubmVjdHMucHVzaChhZGRDb25uZWN0KGJhc2UsIGNvbm5lY3RPcHRpb25zWzBdKSk7XG5cblx0XHQvLyBbOjo6Ok89PT09Tz09PT1PPT09PV1cblx0XHQvLyBjb25uZWN0T3B0aW9ucyA9IFswLCAxLCAxLCAxXVxuXG5cdFx0Zm9yICggdmFyIGkgPSAwOyBpIDwgb3B0aW9ucy5oYW5kbGVzOyBpKysgKSB7XG5cdFx0XHQvLyBLZWVwIGEgbGlzdCBvZiBhbGwgYWRkZWQgaGFuZGxlcy5cblx0XHRcdHNjb3BlX0hhbmRsZXMucHVzaChhZGRPcmlnaW4oYmFzZSwgaSkpO1xuXHRcdFx0c2NvcGVfSGFuZGxlTnVtYmVyc1tpXSA9IGk7XG5cdFx0XHRzY29wZV9Db25uZWN0cy5wdXNoKGFkZENvbm5lY3QoYmFzZSwgY29ubmVjdE9wdGlvbnNbaSArIDFdKSk7XG5cdFx0fVxuXHR9XG5cblx0Ly8gSW5pdGlhbGl6ZSBhIHNpbmdsZSBzbGlkZXIuXG5cdGZ1bmN0aW9uIGFkZFNsaWRlciAoIHRhcmdldCApIHtcblxuXHRcdC8vIEFwcGx5IGNsYXNzZXMgYW5kIGRhdGEgdG8gdGhlIHRhcmdldC5cblx0XHRhZGRDbGFzcyh0YXJnZXQsIG9wdGlvbnMuY3NzQ2xhc3Nlcy50YXJnZXQpO1xuXG5cdFx0aWYgKCBvcHRpb25zLmRpciA9PT0gMCApIHtcblx0XHRcdGFkZENsYXNzKHRhcmdldCwgb3B0aW9ucy5jc3NDbGFzc2VzLmx0cik7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGFkZENsYXNzKHRhcmdldCwgb3B0aW9ucy5jc3NDbGFzc2VzLnJ0bCk7XG5cdFx0fVxuXG5cdFx0aWYgKCBvcHRpb25zLm9ydCA9PT0gMCApIHtcblx0XHRcdGFkZENsYXNzKHRhcmdldCwgb3B0aW9ucy5jc3NDbGFzc2VzLmhvcml6b250YWwpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRhZGRDbGFzcyh0YXJnZXQsIG9wdGlvbnMuY3NzQ2xhc3Nlcy52ZXJ0aWNhbCk7XG5cdFx0fVxuXG5cdFx0c2NvcGVfQmFzZSA9IGFkZE5vZGVUbyh0YXJnZXQsIG9wdGlvbnMuY3NzQ2xhc3Nlcy5iYXNlKTtcblx0fVxuXG5cblx0ZnVuY3Rpb24gYWRkVG9vbHRpcCAoIGhhbmRsZSwgaGFuZGxlTnVtYmVyICkge1xuXG5cdFx0aWYgKCAhb3B0aW9ucy50b29sdGlwc1toYW5kbGVOdW1iZXJdICkge1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblxuXHRcdHJldHVybiBhZGROb2RlVG8oaGFuZGxlLmZpcnN0Q2hpbGQsIG9wdGlvbnMuY3NzQ2xhc3Nlcy50b29sdGlwKTtcblx0fVxuXG5cdC8vIFRoZSB0b29sdGlwcyBvcHRpb24gaXMgYSBzaG9ydGhhbmQgZm9yIHVzaW5nIHRoZSAndXBkYXRlJyBldmVudC5cblx0ZnVuY3Rpb24gdG9vbHRpcHMgKCApIHtcblxuXHRcdC8vIFRvb2x0aXBzIGFyZSBhZGRlZCB3aXRoIG9wdGlvbnMudG9vbHRpcHMgaW4gb3JpZ2luYWwgb3JkZXIuXG5cdFx0dmFyIHRpcHMgPSBzY29wZV9IYW5kbGVzLm1hcChhZGRUb29sdGlwKTtcblxuXHRcdGJpbmRFdmVudCgndXBkYXRlJywgZnVuY3Rpb24odmFsdWVzLCBoYW5kbGVOdW1iZXIsIHVuZW5jb2RlZCkge1xuXG5cdFx0XHRpZiAoICF0aXBzW2hhbmRsZU51bWJlcl0gKSB7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0dmFyIGZvcm1hdHRlZFZhbHVlID0gdmFsdWVzW2hhbmRsZU51bWJlcl07XG5cblx0XHRcdGlmICggb3B0aW9ucy50b29sdGlwc1toYW5kbGVOdW1iZXJdICE9PSB0cnVlICkge1xuXHRcdFx0XHRmb3JtYXR0ZWRWYWx1ZSA9IG9wdGlvbnMudG9vbHRpcHNbaGFuZGxlTnVtYmVyXS50byh1bmVuY29kZWRbaGFuZGxlTnVtYmVyXSk7XG5cdFx0XHR9XG5cblx0XHRcdHRpcHNbaGFuZGxlTnVtYmVyXS5pbm5lckhUTUwgPSBmb3JtYXR0ZWRWYWx1ZTtcblx0XHR9KTtcblx0fVxuXG5cblx0ZnVuY3Rpb24gYXJpYSAoICkge1xuXG5cdFx0YmluZEV2ZW50KCd1cGRhdGUnLCBmdW5jdGlvbiAoIHZhbHVlcywgaGFuZGxlTnVtYmVyLCB1bmVuY29kZWQsIHRhcCwgcG9zaXRpb25zICkge1xuXG5cdFx0XHQvLyBVcGRhdGUgQXJpYSBWYWx1ZXMgZm9yIGFsbCBoYW5kbGVzLCBhcyBhIGNoYW5nZSBpbiBvbmUgY2hhbmdlcyBtaW4gYW5kIG1heCB2YWx1ZXMgZm9yIHRoZSBuZXh0LlxuXHRcdFx0c2NvcGVfSGFuZGxlTnVtYmVycy5mb3JFYWNoKGZ1bmN0aW9uKCBoYW5kbGVOdW1iZXIgKXtcblxuXHRcdFx0XHR2YXIgaGFuZGxlID0gc2NvcGVfSGFuZGxlc1toYW5kbGVOdW1iZXJdO1xuXG5cdFx0XHRcdHZhciBtaW4gPSBjaGVja0hhbmRsZVBvc2l0aW9uKHNjb3BlX0xvY2F0aW9ucywgaGFuZGxlTnVtYmVyLCAwLCB0cnVlLCB0cnVlLCB0cnVlKTtcblx0XHRcdFx0dmFyIG1heCA9IGNoZWNrSGFuZGxlUG9zaXRpb24oc2NvcGVfTG9jYXRpb25zLCBoYW5kbGVOdW1iZXIsIDEwMCwgdHJ1ZSwgdHJ1ZSwgdHJ1ZSk7XG5cblx0XHRcdFx0dmFyIG5vdyA9IHBvc2l0aW9uc1toYW5kbGVOdW1iZXJdO1xuXHRcdFx0XHR2YXIgdGV4dCA9IG9wdGlvbnMuYXJpYUZvcm1hdC50byh1bmVuY29kZWRbaGFuZGxlTnVtYmVyXSk7XG5cblx0XHRcdFx0aGFuZGxlLmNoaWxkcmVuWzBdLnNldEF0dHJpYnV0ZSgnYXJpYS12YWx1ZW1pbicsIG1pbi50b0ZpeGVkKDEpKTtcblx0XHRcdFx0aGFuZGxlLmNoaWxkcmVuWzBdLnNldEF0dHJpYnV0ZSgnYXJpYS12YWx1ZW1heCcsIG1heC50b0ZpeGVkKDEpKTtcblx0XHRcdFx0aGFuZGxlLmNoaWxkcmVuWzBdLnNldEF0dHJpYnV0ZSgnYXJpYS12YWx1ZW5vdycsIG5vdy50b0ZpeGVkKDEpKTtcblx0XHRcdFx0aGFuZGxlLmNoaWxkcmVuWzBdLnNldEF0dHJpYnV0ZSgnYXJpYS12YWx1ZXRleHQnLCB0ZXh0KTtcblx0XHRcdH0pO1xuXHRcdH0pO1xuXHR9XG5cblxuXHRmdW5jdGlvbiBnZXRHcm91cCAoIG1vZGUsIHZhbHVlcywgc3RlcHBlZCApIHtcblxuXHRcdC8vIFVzZSB0aGUgcmFuZ2UuXG5cdFx0aWYgKCBtb2RlID09PSAncmFuZ2UnIHx8IG1vZGUgPT09ICdzdGVwcycgKSB7XG5cdFx0XHRyZXR1cm4gc2NvcGVfU3BlY3RydW0ueFZhbDtcblx0XHR9XG5cblx0XHRpZiAoIG1vZGUgPT09ICdjb3VudCcgKSB7XG5cblx0XHRcdGlmICggIXZhbHVlcyApIHtcblx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKFwibm9VaVNsaWRlciAoXCIgKyBWRVJTSU9OICsgXCIpOiAndmFsdWVzJyByZXF1aXJlZCBmb3IgbW9kZSAnY291bnQnLlwiKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gRGl2aWRlIDAgLSAxMDAgaW4gJ2NvdW50JyBwYXJ0cy5cblx0XHRcdHZhciBzcHJlYWQgPSAoIDEwMCAvICh2YWx1ZXMgLSAxKSApO1xuXHRcdFx0dmFyIHY7XG5cdFx0XHR2YXIgaSA9IDA7XG5cblx0XHRcdHZhbHVlcyA9IFtdO1xuXG5cdFx0XHQvLyBMaXN0IHRoZXNlIHBhcnRzIGFuZCBoYXZlIHRoZW0gaGFuZGxlZCBhcyAncG9zaXRpb25zJy5cblx0XHRcdHdoaWxlICggKHYgPSBpKysgKiBzcHJlYWQpIDw9IDEwMCApIHtcblx0XHRcdFx0dmFsdWVzLnB1c2godik7XG5cdFx0XHR9XG5cblx0XHRcdG1vZGUgPSAncG9zaXRpb25zJztcblx0XHR9XG5cblx0XHRpZiAoIG1vZGUgPT09ICdwb3NpdGlvbnMnICkge1xuXG5cdFx0XHQvLyBNYXAgYWxsIHBlcmNlbnRhZ2VzIHRvIG9uLXJhbmdlIHZhbHVlcy5cblx0XHRcdHJldHVybiB2YWx1ZXMubWFwKGZ1bmN0aW9uKCB2YWx1ZSApe1xuXHRcdFx0XHRyZXR1cm4gc2NvcGVfU3BlY3RydW0uZnJvbVN0ZXBwaW5nKCBzdGVwcGVkID8gc2NvcGVfU3BlY3RydW0uZ2V0U3RlcCggdmFsdWUgKSA6IHZhbHVlICk7XG5cdFx0XHR9KTtcblx0XHR9XG5cblx0XHRpZiAoIG1vZGUgPT09ICd2YWx1ZXMnICkge1xuXG5cdFx0XHQvLyBJZiB0aGUgdmFsdWUgbXVzdCBiZSBzdGVwcGVkLCBpdCBuZWVkcyB0byBiZSBjb252ZXJ0ZWQgdG8gYSBwZXJjZW50YWdlIGZpcnN0LlxuXHRcdFx0aWYgKCBzdGVwcGVkICkge1xuXG5cdFx0XHRcdHJldHVybiB2YWx1ZXMubWFwKGZ1bmN0aW9uKCB2YWx1ZSApe1xuXG5cdFx0XHRcdFx0Ly8gQ29udmVydCB0byBwZXJjZW50YWdlLCBhcHBseSBzdGVwLCByZXR1cm4gdG8gdmFsdWUuXG5cdFx0XHRcdFx0cmV0dXJuIHNjb3BlX1NwZWN0cnVtLmZyb21TdGVwcGluZyggc2NvcGVfU3BlY3RydW0uZ2V0U3RlcCggc2NvcGVfU3BlY3RydW0udG9TdGVwcGluZyggdmFsdWUgKSApICk7XG5cdFx0XHRcdH0pO1xuXG5cdFx0XHR9XG5cblx0XHRcdC8vIE90aGVyd2lzZSwgd2UgY2FuIHNpbXBseSB1c2UgdGhlIHZhbHVlcy5cblx0XHRcdHJldHVybiB2YWx1ZXM7XG5cdFx0fVxuXHR9XG5cblx0ZnVuY3Rpb24gZ2VuZXJhdGVTcHJlYWQgKCBkZW5zaXR5LCBtb2RlLCBncm91cCApIHtcblxuXHRcdGZ1bmN0aW9uIHNhZmVJbmNyZW1lbnQodmFsdWUsIGluY3JlbWVudCkge1xuXHRcdFx0Ly8gQXZvaWQgZmxvYXRpbmcgcG9pbnQgdmFyaWFuY2UgYnkgZHJvcHBpbmcgdGhlIHNtYWxsZXN0IGRlY2ltYWwgcGxhY2VzLlxuXHRcdFx0cmV0dXJuICh2YWx1ZSArIGluY3JlbWVudCkudG9GaXhlZCg3KSAvIDE7XG5cdFx0fVxuXG5cdFx0dmFyIGluZGV4ZXMgPSB7fTtcblx0XHR2YXIgZmlyc3RJblJhbmdlID0gc2NvcGVfU3BlY3RydW0ueFZhbFswXTtcblx0XHR2YXIgbGFzdEluUmFuZ2UgPSBzY29wZV9TcGVjdHJ1bS54VmFsW3Njb3BlX1NwZWN0cnVtLnhWYWwubGVuZ3RoLTFdO1xuXHRcdHZhciBpZ25vcmVGaXJzdCA9IGZhbHNlO1xuXHRcdHZhciBpZ25vcmVMYXN0ID0gZmFsc2U7XG5cdFx0dmFyIHByZXZQY3QgPSAwO1xuXG5cdFx0Ly8gQ3JlYXRlIGEgY29weSBvZiB0aGUgZ3JvdXAsIHNvcnQgaXQgYW5kIGZpbHRlciBhd2F5IGFsbCBkdXBsaWNhdGVzLlxuXHRcdGdyb3VwID0gdW5pcXVlKGdyb3VwLnNsaWNlKCkuc29ydChmdW5jdGlvbihhLCBiKXsgcmV0dXJuIGEgLSBiOyB9KSk7XG5cblx0XHQvLyBNYWtlIHN1cmUgdGhlIHJhbmdlIHN0YXJ0cyB3aXRoIHRoZSBmaXJzdCBlbGVtZW50LlxuXHRcdGlmICggZ3JvdXBbMF0gIT09IGZpcnN0SW5SYW5nZSApIHtcblx0XHRcdGdyb3VwLnVuc2hpZnQoZmlyc3RJblJhbmdlKTtcblx0XHRcdGlnbm9yZUZpcnN0ID0gdHJ1ZTtcblx0XHR9XG5cblx0XHQvLyBMaWtld2lzZSBmb3IgdGhlIGxhc3Qgb25lLlxuXHRcdGlmICggZ3JvdXBbZ3JvdXAubGVuZ3RoIC0gMV0gIT09IGxhc3RJblJhbmdlICkge1xuXHRcdFx0Z3JvdXAucHVzaChsYXN0SW5SYW5nZSk7XG5cdFx0XHRpZ25vcmVMYXN0ID0gdHJ1ZTtcblx0XHR9XG5cblx0XHRncm91cC5mb3JFYWNoKGZ1bmN0aW9uICggY3VycmVudCwgaW5kZXggKSB7XG5cblx0XHRcdC8vIEdldCB0aGUgY3VycmVudCBzdGVwIGFuZCB0aGUgbG93ZXIgKyB1cHBlciBwb3NpdGlvbnMuXG5cdFx0XHR2YXIgc3RlcDtcblx0XHRcdHZhciBpO1xuXHRcdFx0dmFyIHE7XG5cdFx0XHR2YXIgbG93ID0gY3VycmVudDtcblx0XHRcdHZhciBoaWdoID0gZ3JvdXBbaW5kZXgrMV07XG5cdFx0XHR2YXIgbmV3UGN0O1xuXHRcdFx0dmFyIHBjdERpZmZlcmVuY2U7XG5cdFx0XHR2YXIgcGN0UG9zO1xuXHRcdFx0dmFyIHR5cGU7XG5cdFx0XHR2YXIgc3RlcHM7XG5cdFx0XHR2YXIgcmVhbFN0ZXBzO1xuXHRcdFx0dmFyIHN0ZXBzaXplO1xuXG5cdFx0XHQvLyBXaGVuIHVzaW5nICdzdGVwcycgbW9kZSwgdXNlIHRoZSBwcm92aWRlZCBzdGVwcy5cblx0XHRcdC8vIE90aGVyd2lzZSwgd2UnbGwgc3RlcCBvbiB0byB0aGUgbmV4dCBzdWJyYW5nZS5cblx0XHRcdGlmICggbW9kZSA9PT0gJ3N0ZXBzJyApIHtcblx0XHRcdFx0c3RlcCA9IHNjb3BlX1NwZWN0cnVtLnhOdW1TdGVwc1sgaW5kZXggXTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gRGVmYXVsdCB0byBhICdmdWxsJyBzdGVwLlxuXHRcdFx0aWYgKCAhc3RlcCApIHtcblx0XHRcdFx0c3RlcCA9IGhpZ2gtbG93O1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBMb3cgY2FuIGJlIDAsIHNvIHRlc3QgZm9yIGZhbHNlLiBJZiBoaWdoIGlzIHVuZGVmaW5lZCxcblx0XHRcdC8vIHdlIGFyZSBhdCB0aGUgbGFzdCBzdWJyYW5nZS4gSW5kZXggMCBpcyBhbHJlYWR5IGhhbmRsZWQuXG5cdFx0XHRpZiAoIGxvdyA9PT0gZmFsc2UgfHwgaGlnaCA9PT0gdW5kZWZpbmVkICkge1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdC8vIE1ha2Ugc3VyZSBzdGVwIGlzbid0IDAsIHdoaWNoIHdvdWxkIGNhdXNlIGFuIGluZmluaXRlIGxvb3AgKCM2NTQpXG5cdFx0XHRzdGVwID0gTWF0aC5tYXgoc3RlcCwgMC4wMDAwMDAxKTtcblxuXHRcdFx0Ly8gRmluZCBhbGwgc3RlcHMgaW4gdGhlIHN1YnJhbmdlLlxuXHRcdFx0Zm9yICggaSA9IGxvdzsgaSA8PSBoaWdoOyBpID0gc2FmZUluY3JlbWVudChpLCBzdGVwKSApIHtcblxuXHRcdFx0XHQvLyBHZXQgdGhlIHBlcmNlbnRhZ2UgdmFsdWUgZm9yIHRoZSBjdXJyZW50IHN0ZXAsXG5cdFx0XHRcdC8vIGNhbGN1bGF0ZSB0aGUgc2l6ZSBmb3IgdGhlIHN1YnJhbmdlLlxuXHRcdFx0XHRuZXdQY3QgPSBzY29wZV9TcGVjdHJ1bS50b1N0ZXBwaW5nKCBpICk7XG5cdFx0XHRcdHBjdERpZmZlcmVuY2UgPSBuZXdQY3QgLSBwcmV2UGN0O1xuXG5cdFx0XHRcdHN0ZXBzID0gcGN0RGlmZmVyZW5jZSAvIGRlbnNpdHk7XG5cdFx0XHRcdHJlYWxTdGVwcyA9IE1hdGgucm91bmQoc3RlcHMpO1xuXG5cdFx0XHRcdC8vIFRoaXMgcmF0aW8gcmVwcmVzZW50cyB0aGUgYW1tb3VudCBvZiBwZXJjZW50YWdlLXNwYWNlIGEgcG9pbnQgaW5kaWNhdGVzLlxuXHRcdFx0XHQvLyBGb3IgYSBkZW5zaXR5IDEgdGhlIHBvaW50cy9wZXJjZW50YWdlID0gMS4gRm9yIGRlbnNpdHkgMiwgdGhhdCBwZXJjZW50YWdlIG5lZWRzIHRvIGJlIHJlLWRldmlkZWQuXG5cdFx0XHRcdC8vIFJvdW5kIHRoZSBwZXJjZW50YWdlIG9mZnNldCB0byBhbiBldmVuIG51bWJlciwgdGhlbiBkaXZpZGUgYnkgdHdvXG5cdFx0XHRcdC8vIHRvIHNwcmVhZCB0aGUgb2Zmc2V0IG9uIGJvdGggc2lkZXMgb2YgdGhlIHJhbmdlLlxuXHRcdFx0XHRzdGVwc2l6ZSA9IHBjdERpZmZlcmVuY2UvcmVhbFN0ZXBzO1xuXG5cdFx0XHRcdC8vIERpdmlkZSBhbGwgcG9pbnRzIGV2ZW5seSwgYWRkaW5nIHRoZSBjb3JyZWN0IG51bWJlciB0byB0aGlzIHN1YnJhbmdlLlxuXHRcdFx0XHQvLyBSdW4gdXAgdG8gPD0gc28gdGhhdCAxMDAlIGdldHMgYSBwb2ludCwgZXZlbnQgaWYgaWdub3JlTGFzdCBpcyBzZXQuXG5cdFx0XHRcdGZvciAoIHEgPSAxOyBxIDw9IHJlYWxTdGVwczsgcSArPSAxICkge1xuXG5cdFx0XHRcdFx0Ly8gVGhlIHJhdGlvIGJldHdlZW4gdGhlIHJvdW5kZWQgdmFsdWUgYW5kIHRoZSBhY3R1YWwgc2l6ZSBtaWdodCBiZSB+MSUgb2ZmLlxuXHRcdFx0XHRcdC8vIENvcnJlY3QgdGhlIHBlcmNlbnRhZ2Ugb2Zmc2V0IGJ5IHRoZSBudW1iZXIgb2YgcG9pbnRzXG5cdFx0XHRcdFx0Ly8gcGVyIHN1YnJhbmdlLiBkZW5zaXR5ID0gMSB3aWxsIHJlc3VsdCBpbiAxMDAgcG9pbnRzIG9uIHRoZVxuXHRcdFx0XHRcdC8vIGZ1bGwgcmFuZ2UsIDIgZm9yIDUwLCA0IGZvciAyNSwgZXRjLlxuXHRcdFx0XHRcdHBjdFBvcyA9IHByZXZQY3QgKyAoIHEgKiBzdGVwc2l6ZSApO1xuXHRcdFx0XHRcdGluZGV4ZXNbcGN0UG9zLnRvRml4ZWQoNSldID0gWyd4JywgMF07XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBEZXRlcm1pbmUgdGhlIHBvaW50IHR5cGUuXG5cdFx0XHRcdHR5cGUgPSAoZ3JvdXAuaW5kZXhPZihpKSA+IC0xKSA/IDEgOiAoIG1vZGUgPT09ICdzdGVwcycgPyAyIDogMCApO1xuXG5cdFx0XHRcdC8vIEVuZm9yY2UgdGhlICdpZ25vcmVGaXJzdCcgb3B0aW9uIGJ5IG92ZXJ3cml0aW5nIHRoZSB0eXBlIGZvciAwLlxuXHRcdFx0XHRpZiAoICFpbmRleCAmJiBpZ25vcmVGaXJzdCApIHtcblx0XHRcdFx0XHR0eXBlID0gMDtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmICggIShpID09PSBoaWdoICYmIGlnbm9yZUxhc3QpKSB7XG5cdFx0XHRcdFx0Ly8gTWFyayB0aGUgJ3R5cGUnIG9mIHRoaXMgcG9pbnQuIDAgPSBwbGFpbiwgMSA9IHJlYWwgdmFsdWUsIDIgPSBzdGVwIHZhbHVlLlxuXHRcdFx0XHRcdGluZGV4ZXNbbmV3UGN0LnRvRml4ZWQoNSldID0gW2ksIHR5cGVdO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gVXBkYXRlIHRoZSBwZXJjZW50YWdlIGNvdW50LlxuXHRcdFx0XHRwcmV2UGN0ID0gbmV3UGN0O1xuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0cmV0dXJuIGluZGV4ZXM7XG5cdH1cblxuXHRmdW5jdGlvbiBhZGRNYXJraW5nICggc3ByZWFkLCBmaWx0ZXJGdW5jLCBmb3JtYXR0ZXIgKSB7XG5cblx0XHR2YXIgZWxlbWVudCA9IHNjb3BlX0RvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXG5cdFx0dmFyIHZhbHVlU2l6ZUNsYXNzZXMgPSBbXG5cdFx0XHRvcHRpb25zLmNzc0NsYXNzZXMudmFsdWVOb3JtYWwsXG5cdFx0XHRvcHRpb25zLmNzc0NsYXNzZXMudmFsdWVMYXJnZSxcblx0XHRcdG9wdGlvbnMuY3NzQ2xhc3Nlcy52YWx1ZVN1YlxuXHRcdF07XG5cdFx0dmFyIG1hcmtlclNpemVDbGFzc2VzID0gW1xuXHRcdFx0b3B0aW9ucy5jc3NDbGFzc2VzLm1hcmtlck5vcm1hbCxcblx0XHRcdG9wdGlvbnMuY3NzQ2xhc3Nlcy5tYXJrZXJMYXJnZSxcblx0XHRcdG9wdGlvbnMuY3NzQ2xhc3Nlcy5tYXJrZXJTdWJcblx0XHRdO1xuXHRcdHZhciB2YWx1ZU9yaWVudGF0aW9uQ2xhc3NlcyA9IFtcblx0XHRcdG9wdGlvbnMuY3NzQ2xhc3Nlcy52YWx1ZUhvcml6b250YWwsXG5cdFx0XHRvcHRpb25zLmNzc0NsYXNzZXMudmFsdWVWZXJ0aWNhbFxuXHRcdF07XG5cdFx0dmFyIG1hcmtlck9yaWVudGF0aW9uQ2xhc3NlcyA9IFtcblx0XHRcdG9wdGlvbnMuY3NzQ2xhc3Nlcy5tYXJrZXJIb3Jpem9udGFsLFxuXHRcdFx0b3B0aW9ucy5jc3NDbGFzc2VzLm1hcmtlclZlcnRpY2FsXG5cdFx0XTtcblxuXHRcdGFkZENsYXNzKGVsZW1lbnQsIG9wdGlvbnMuY3NzQ2xhc3Nlcy5waXBzKTtcblx0XHRhZGRDbGFzcyhlbGVtZW50LCBvcHRpb25zLm9ydCA9PT0gMCA/IG9wdGlvbnMuY3NzQ2xhc3Nlcy5waXBzSG9yaXpvbnRhbCA6IG9wdGlvbnMuY3NzQ2xhc3Nlcy5waXBzVmVydGljYWwpO1xuXG5cdFx0ZnVuY3Rpb24gZ2V0Q2xhc3NlcyggdHlwZSwgc291cmNlICl7XG5cdFx0XHR2YXIgYSA9IHNvdXJjZSA9PT0gb3B0aW9ucy5jc3NDbGFzc2VzLnZhbHVlO1xuXHRcdFx0dmFyIG9yaWVudGF0aW9uQ2xhc3NlcyA9IGEgPyB2YWx1ZU9yaWVudGF0aW9uQ2xhc3NlcyA6IG1hcmtlck9yaWVudGF0aW9uQ2xhc3Nlcztcblx0XHRcdHZhciBzaXplQ2xhc3NlcyA9IGEgPyB2YWx1ZVNpemVDbGFzc2VzIDogbWFya2VyU2l6ZUNsYXNzZXM7XG5cblx0XHRcdHJldHVybiBzb3VyY2UgKyAnICcgKyBvcmllbnRhdGlvbkNsYXNzZXNbb3B0aW9ucy5vcnRdICsgJyAnICsgc2l6ZUNsYXNzZXNbdHlwZV07XG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gYWRkU3ByZWFkICggb2Zmc2V0LCB2YWx1ZXMgKXtcblxuXHRcdFx0Ly8gQXBwbHkgdGhlIGZpbHRlciBmdW5jdGlvbiwgaWYgaXQgaXMgc2V0LlxuXHRcdFx0dmFsdWVzWzFdID0gKHZhbHVlc1sxXSAmJiBmaWx0ZXJGdW5jKSA/IGZpbHRlckZ1bmModmFsdWVzWzBdLCB2YWx1ZXNbMV0pIDogdmFsdWVzWzFdO1xuXG5cdFx0XHQvLyBBZGQgYSBtYXJrZXIgZm9yIGV2ZXJ5IHBvaW50XG5cdFx0XHR2YXIgbm9kZSA9IGFkZE5vZGVUbyhlbGVtZW50LCBmYWxzZSk7XG5cdFx0XHRcdG5vZGUuY2xhc3NOYW1lID0gZ2V0Q2xhc3Nlcyh2YWx1ZXNbMV0sIG9wdGlvbnMuY3NzQ2xhc3Nlcy5tYXJrZXIpO1xuXHRcdFx0XHRub2RlLnN0eWxlW29wdGlvbnMuc3R5bGVdID0gb2Zmc2V0ICsgJyUnO1xuXG5cdFx0XHQvLyBWYWx1ZXMgYXJlIG9ubHkgYXBwZW5kZWQgZm9yIHBvaW50cyBtYXJrZWQgJzEnIG9yICcyJy5cblx0XHRcdGlmICggdmFsdWVzWzFdICkge1xuXHRcdFx0XHRub2RlID0gYWRkTm9kZVRvKGVsZW1lbnQsIGZhbHNlKTtcblx0XHRcdFx0bm9kZS5jbGFzc05hbWUgPSBnZXRDbGFzc2VzKHZhbHVlc1sxXSwgb3B0aW9ucy5jc3NDbGFzc2VzLnZhbHVlKTtcblx0XHRcdFx0bm9kZS5zdHlsZVtvcHRpb25zLnN0eWxlXSA9IG9mZnNldCArICclJztcblx0XHRcdFx0bm9kZS5pbm5lclRleHQgPSBmb3JtYXR0ZXIudG8odmFsdWVzWzBdKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBBcHBlbmQgYWxsIHBvaW50cy5cblx0XHRPYmplY3Qua2V5cyhzcHJlYWQpLmZvckVhY2goZnVuY3Rpb24oYSl7XG5cdFx0XHRhZGRTcHJlYWQoYSwgc3ByZWFkW2FdKTtcblx0XHR9KTtcblxuXHRcdHJldHVybiBlbGVtZW50O1xuXHR9XG5cblx0ZnVuY3Rpb24gcmVtb3ZlUGlwcyAoICkge1xuXHRcdGlmICggc2NvcGVfUGlwcyApIHtcblx0XHRcdHJlbW92ZUVsZW1lbnQoc2NvcGVfUGlwcyk7XG5cdFx0XHRzY29wZV9QaXBzID0gbnVsbDtcblx0XHR9XG5cdH1cblxuXHRmdW5jdGlvbiBwaXBzICggZ3JpZCApIHtcblxuXHRcdC8vIEZpeCAjNjY5XG5cdFx0cmVtb3ZlUGlwcygpO1xuXG5cdFx0dmFyIG1vZGUgPSBncmlkLm1vZGU7XG5cdFx0dmFyIGRlbnNpdHkgPSBncmlkLmRlbnNpdHkgfHwgMTtcblx0XHR2YXIgZmlsdGVyID0gZ3JpZC5maWx0ZXIgfHwgZmFsc2U7XG5cdFx0dmFyIHZhbHVlcyA9IGdyaWQudmFsdWVzIHx8IGZhbHNlO1xuXHRcdHZhciBzdGVwcGVkID0gZ3JpZC5zdGVwcGVkIHx8IGZhbHNlO1xuXHRcdHZhciBncm91cCA9IGdldEdyb3VwKCBtb2RlLCB2YWx1ZXMsIHN0ZXBwZWQgKTtcblx0XHR2YXIgc3ByZWFkID0gZ2VuZXJhdGVTcHJlYWQoIGRlbnNpdHksIG1vZGUsIGdyb3VwICk7XG5cdFx0dmFyIGZvcm1hdCA9IGdyaWQuZm9ybWF0IHx8IHtcblx0XHRcdHRvOiBNYXRoLnJvdW5kXG5cdFx0fTtcblxuXHRcdHNjb3BlX1BpcHMgPSBzY29wZV9UYXJnZXQuYXBwZW5kQ2hpbGQoYWRkTWFya2luZyhcblx0XHRcdHNwcmVhZCxcblx0XHRcdGZpbHRlcixcblx0XHRcdGZvcm1hdFxuXHRcdCkpO1xuXG5cdFx0cmV0dXJuIHNjb3BlX1BpcHM7XG5cdH1cblxuXG5cdC8vIFNob3J0aGFuZCBmb3IgYmFzZSBkaW1lbnNpb25zLlxuXHRmdW5jdGlvbiBiYXNlU2l6ZSAoICkge1xuXHRcdHZhciByZWN0ID0gc2NvcGVfQmFzZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSwgYWx0ID0gJ29mZnNldCcgKyBbJ1dpZHRoJywgJ0hlaWdodCddW29wdGlvbnMub3J0XTtcblx0XHRyZXR1cm4gb3B0aW9ucy5vcnQgPT09IDAgPyAocmVjdC53aWR0aHx8c2NvcGVfQmFzZVthbHRdKSA6IChyZWN0LmhlaWdodHx8c2NvcGVfQmFzZVthbHRdKTtcblx0fVxuXG5cdC8vIEhhbmRsZXIgZm9yIGF0dGFjaGluZyBldmVudHMgdHJvdWdoIGEgcHJveHkuXG5cdGZ1bmN0aW9uIGF0dGFjaEV2ZW50ICggZXZlbnRzLCBlbGVtZW50LCBjYWxsYmFjaywgZGF0YSApIHtcblxuXHRcdC8vIFRoaXMgZnVuY3Rpb24gY2FuIGJlIHVzZWQgdG8gJ2ZpbHRlcicgZXZlbnRzIHRvIHRoZSBzbGlkZXIuXG5cdFx0Ly8gZWxlbWVudCBpcyBhIG5vZGUsIG5vdCBhIG5vZGVMaXN0XG5cblx0XHR2YXIgbWV0aG9kID0gZnVuY3Rpb24gKCBlICl7XG5cblx0XHRcdGlmICggc2NvcGVfVGFyZ2V0Lmhhc0F0dHJpYnV0ZSgnZGlzYWJsZWQnKSApIHtcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBTdG9wIGlmIGFuIGFjdGl2ZSAndGFwJyB0cmFuc2l0aW9uIGlzIHRha2luZyBwbGFjZS5cblx0XHRcdGlmICggaGFzQ2xhc3Moc2NvcGVfVGFyZ2V0LCBvcHRpb25zLmNzc0NsYXNzZXMudGFwKSApIHtcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fVxuXG5cdFx0XHRlID0gZml4RXZlbnQoZSwgZGF0YS5wYWdlT2Zmc2V0LCBkYXRhLnRhcmdldCB8fCBlbGVtZW50KTtcblxuXHRcdFx0Ly8gSGFuZGxlIHJlamVjdCBvZiBtdWx0aXRvdWNoXG5cdFx0XHRpZiAoICFlICkge1xuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9XG5cblx0XHRcdC8vIElnbm9yZSByaWdodCBvciBtaWRkbGUgY2xpY2tzIG9uIHN0YXJ0ICM0NTRcblx0XHRcdGlmICggZXZlbnRzID09PSBhY3Rpb25zLnN0YXJ0ICYmIGUuYnV0dG9ucyAhPT0gdW5kZWZpbmVkICYmIGUuYnV0dG9ucyA+IDEgKSB7XG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gSWdub3JlIHJpZ2h0IG9yIG1pZGRsZSBjbGlja3Mgb24gc3RhcnQgIzQ1NFxuXHRcdFx0aWYgKCBkYXRhLmhvdmVyICYmIGUuYnV0dG9ucyApIHtcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyAnc3VwcG9ydHNQYXNzaXZlJyBpcyBvbmx5IHRydWUgaWYgYSBicm93c2VyIGFsc28gc3VwcG9ydHMgdG91Y2gtYWN0aW9uOiBub25lIGluIENTUy5cblx0XHRcdC8vIGlPUyBzYWZhcmkgZG9lcyBub3QsIHNvIGl0IGRvZXNuJ3QgZ2V0IHRvIGJlbmVmaXQgZnJvbSBwYXNzaXZlIHNjcm9sbGluZy4gaU9TIGRvZXMgc3VwcG9ydFxuXHRcdFx0Ly8gdG91Y2gtYWN0aW9uOiBtYW5pcHVsYXRpb24sIGJ1dCB0aGF0IGFsbG93cyBwYW5uaW5nLCB3aGljaCBicmVha3Ncblx0XHRcdC8vIHNsaWRlcnMgYWZ0ZXIgem9vbWluZy9vbiBub24tcmVzcG9uc2l2ZSBwYWdlcy5cblx0XHRcdC8vIFNlZTogaHR0cHM6Ly9idWdzLndlYmtpdC5vcmcvc2hvd19idWcuY2dpP2lkPTEzMzExMlxuXHRcdFx0aWYgKCAhc3VwcG9ydHNQYXNzaXZlICkge1xuXHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHR9XG5cblx0XHRcdGUuY2FsY1BvaW50ID0gZS5wb2ludHNbIG9wdGlvbnMub3J0IF07XG5cblx0XHRcdC8vIENhbGwgdGhlIGV2ZW50IGhhbmRsZXIgd2l0aCB0aGUgZXZlbnQgWyBhbmQgYWRkaXRpb25hbCBkYXRhIF0uXG5cdFx0XHRjYWxsYmFjayAoIGUsIGRhdGEgKTtcblx0XHR9O1xuXG5cdFx0dmFyIG1ldGhvZHMgPSBbXTtcblxuXHRcdC8vIEJpbmQgYSBjbG9zdXJlIG9uIHRoZSB0YXJnZXQgZm9yIGV2ZXJ5IGV2ZW50IHR5cGUuXG5cdFx0ZXZlbnRzLnNwbGl0KCcgJykuZm9yRWFjaChmdW5jdGlvbiggZXZlbnROYW1lICl7XG5cdFx0XHRlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoZXZlbnROYW1lLCBtZXRob2QsIHN1cHBvcnRzUGFzc2l2ZSA/IHsgcGFzc2l2ZTogdHJ1ZSB9IDogZmFsc2UpO1xuXHRcdFx0bWV0aG9kcy5wdXNoKFtldmVudE5hbWUsIG1ldGhvZF0pO1xuXHRcdH0pO1xuXG5cdFx0cmV0dXJuIG1ldGhvZHM7XG5cdH1cblxuXHQvLyBQcm92aWRlIGEgY2xlYW4gZXZlbnQgd2l0aCBzdGFuZGFyZGl6ZWQgb2Zmc2V0IHZhbHVlcy5cblx0ZnVuY3Rpb24gZml4RXZlbnQgKCBlLCBwYWdlT2Zmc2V0LCB0YXJnZXQgKSB7XG5cblx0XHQvLyBGaWx0ZXIgdGhlIGV2ZW50IHRvIHJlZ2lzdGVyIHRoZSB0eXBlLCB3aGljaCBjYW4gYmVcblx0XHQvLyB0b3VjaCwgbW91c2Ugb3IgcG9pbnRlci4gT2Zmc2V0IGNoYW5nZXMgbmVlZCB0byBiZVxuXHRcdC8vIG1hZGUgb24gYW4gZXZlbnQgc3BlY2lmaWMgYmFzaXMuXG5cdFx0dmFyIHRvdWNoID0gZS50eXBlLmluZGV4T2YoJ3RvdWNoJykgPT09IDA7XG5cdFx0dmFyIG1vdXNlID0gZS50eXBlLmluZGV4T2YoJ21vdXNlJykgPT09IDA7XG5cdFx0dmFyIHBvaW50ZXIgPSBlLnR5cGUuaW5kZXhPZigncG9pbnRlcicpID09PSAwO1xuXG5cdFx0dmFyIHg7XG5cdFx0dmFyIHk7XG5cblx0XHQvLyBJRTEwIGltcGxlbWVudGVkIHBvaW50ZXIgZXZlbnRzIHdpdGggYSBwcmVmaXg7XG5cdFx0aWYgKCBlLnR5cGUuaW5kZXhPZignTVNQb2ludGVyJykgPT09IDAgKSB7XG5cdFx0XHRwb2ludGVyID0gdHJ1ZTtcblx0XHR9XG5cblxuXHRcdC8vIEluIHRoZSBldmVudCB0aGF0IG11bHRpdG91Y2ggaXMgYWN0aXZhdGVkLCB0aGUgb25seSB0aGluZyBvbmUgaGFuZGxlIHNob3VsZCBiZSBjb25jZXJuZWRcblx0XHQvLyBhYm91dCBpcyB0aGUgdG91Y2hlcyB0aGF0IG9yaWdpbmF0ZWQgb24gdG9wIG9mIGl0LlxuXHRcdGlmICggdG91Y2ggJiYgb3B0aW9ucy5tdWx0aXRvdWNoICkge1xuXHRcdFx0Ly8gUmV0dXJucyB0cnVlIGlmIGEgdG91Y2ggb3JpZ2luYXRlZCBvbiB0aGUgdGFyZ2V0LlxuXHRcdFx0dmFyIGlzVG91Y2hPblRhcmdldCA9IGZ1bmN0aW9uICh0b3VjaCkge1xuXHRcdFx0XHRyZXR1cm4gdG91Y2gudGFyZ2V0ID09PSB0YXJnZXQgfHwgdGFyZ2V0LmNvbnRhaW5zKHRvdWNoLnRhcmdldCk7XG5cdFx0XHR9O1xuXHRcdFx0Ly8gSW4gdGhlIGNhc2Ugb2YgdG91Y2hzdGFydCBldmVudHMsIHdlIG5lZWQgdG8gbWFrZSBzdXJlIHRoZXJlIGlzIHN0aWxsIG5vIG1vcmUgdGhhbiBvbmVcblx0XHRcdC8vIHRvdWNoIG9uIHRoZSB0YXJnZXQgc28gd2UgbG9vayBhbW9uZ3N0IGFsbCB0b3VjaGVzLlxuXHRcdFx0aWYgKGUudHlwZSA9PT0gJ3RvdWNoc3RhcnQnKSB7XG5cdFx0XHRcdHZhciB0YXJnZXRUb3VjaGVzID0gQXJyYXkucHJvdG90eXBlLmZpbHRlci5jYWxsKGUudG91Y2hlcywgaXNUb3VjaE9uVGFyZ2V0KTtcblx0XHRcdFx0Ly8gRG8gbm90IHN1cHBvcnQgbW9yZSB0aGFuIG9uZSB0b3VjaCBwZXIgaGFuZGxlLlxuXHRcdFx0XHRpZiAoIHRhcmdldFRvdWNoZXMubGVuZ3RoID4gMSApIHtcblx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHRcdH1cblx0XHRcdFx0eCA9IHRhcmdldFRvdWNoZXNbMF0ucGFnZVg7XG5cdFx0XHRcdHkgPSB0YXJnZXRUb3VjaGVzWzBdLnBhZ2VZO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdC8vIEluIHRoZSBvdGhlciBjYXNlcywgZmluZCBvbiBjaGFuZ2VkVG91Y2hlcyBpcyBlbm91Z2guXG5cdFx0XHRcdHZhciB0YXJnZXRUb3VjaCA9IEFycmF5LnByb3RvdHlwZS5maW5kLmNhbGwoZS5jaGFuZ2VkVG91Y2hlcywgaXNUb3VjaE9uVGFyZ2V0KTtcblx0XHRcdFx0Ly8gQ2FuY2VsIGlmIHRoZSB0YXJnZXQgdG91Y2ggaGFzIG5vdCBtb3ZlZC5cblx0XHRcdFx0aWYgKCAhdGFyZ2V0VG91Y2ggKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHggPSB0YXJnZXRUb3VjaC5wYWdlWDtcblx0XHRcdFx0eSA9IHRhcmdldFRvdWNoLnBhZ2VZO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSBpZiAoIHRvdWNoICkge1xuXHRcdFx0Ly8gRml4IGJ1ZyB3aGVuIHVzZXIgdG91Y2hlcyB3aXRoIHR3byBvciBtb3JlIGZpbmdlcnMgb24gbW9iaWxlIGRldmljZXMuXG5cdFx0XHQvLyBJdCdzIHVzZWZ1bCB3aGVuIHlvdSBoYXZlIHR3byBvciBtb3JlIHNsaWRlcnMgb24gb25lIHBhZ2UsXG5cdFx0XHQvLyB0aGF0IGNhbiBiZSB0b3VjaGVkIHNpbXVsdGFuZW91c2x5LlxuXHRcdFx0Ly8gIzY0OSwgIzY2MywgIzY2OFxuXHRcdFx0aWYgKCBlLnRvdWNoZXMubGVuZ3RoID4gMSApIHtcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBub1VpU2xpZGVyIHN1cHBvcnRzIG9uZSBtb3ZlbWVudCBhdCBhIHRpbWUsXG5cdFx0XHQvLyBzbyB3ZSBjYW4gc2VsZWN0IHRoZSBmaXJzdCAnY2hhbmdlZFRvdWNoJy5cblx0XHRcdHggPSBlLmNoYW5nZWRUb3VjaGVzWzBdLnBhZ2VYO1xuXHRcdFx0eSA9IGUuY2hhbmdlZFRvdWNoZXNbMF0ucGFnZVk7XG5cdFx0fVxuXG5cdFx0cGFnZU9mZnNldCA9IHBhZ2VPZmZzZXQgfHwgZ2V0UGFnZU9mZnNldChzY29wZV9Eb2N1bWVudCk7XG5cblx0XHRpZiAoIG1vdXNlIHx8IHBvaW50ZXIgKSB7XG5cdFx0XHR4ID0gZS5jbGllbnRYICsgcGFnZU9mZnNldC54O1xuXHRcdFx0eSA9IGUuY2xpZW50WSArIHBhZ2VPZmZzZXQueTtcblx0XHR9XG5cblx0XHRlLnBhZ2VPZmZzZXQgPSBwYWdlT2Zmc2V0O1xuXHRcdGUucG9pbnRzID0gW3gsIHldO1xuXHRcdGUuY3Vyc29yID0gbW91c2UgfHwgcG9pbnRlcjsgLy8gRml4ICM0MzVcblxuXHRcdHJldHVybiBlO1xuXHR9XG5cblx0Ly8gVHJhbnNsYXRlIGEgY29vcmRpbmF0ZSBpbiB0aGUgZG9jdW1lbnQgdG8gYSBwZXJjZW50YWdlIG9uIHRoZSBzbGlkZXJcblx0ZnVuY3Rpb24gY2FsY1BvaW50VG9QZXJjZW50YWdlICggY2FsY1BvaW50ICkge1xuXHRcdHZhciBsb2NhdGlvbiA9IGNhbGNQb2ludCAtIG9mZnNldChzY29wZV9CYXNlLCBvcHRpb25zLm9ydCk7XG5cdFx0dmFyIHByb3Bvc2FsID0gKCBsb2NhdGlvbiAqIDEwMCApIC8gYmFzZVNpemUoKTtcblx0XHRyZXR1cm4gb3B0aW9ucy5kaXIgPyAxMDAgLSBwcm9wb3NhbCA6IHByb3Bvc2FsO1xuXHR9XG5cblx0Ly8gRmluZCBoYW5kbGUgY2xvc2VzdCB0byBhIGNlcnRhaW4gcGVyY2VudGFnZSBvbiB0aGUgc2xpZGVyXG5cdGZ1bmN0aW9uIGdldENsb3Nlc3RIYW5kbGUgKCBwcm9wb3NhbCApIHtcblxuXHRcdHZhciBjbG9zZXN0ID0gMTAwO1xuXHRcdHZhciBoYW5kbGVOdW1iZXIgPSBmYWxzZTtcblxuXHRcdHNjb3BlX0hhbmRsZXMuZm9yRWFjaChmdW5jdGlvbihoYW5kbGUsIGluZGV4KXtcblxuXHRcdFx0Ly8gRGlzYWJsZWQgaGFuZGxlcyBhcmUgaWdub3JlZFxuXHRcdFx0aWYgKCBoYW5kbGUuaGFzQXR0cmlidXRlKCdkaXNhYmxlZCcpICkge1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdHZhciBwb3MgPSBNYXRoLmFicyhzY29wZV9Mb2NhdGlvbnNbaW5kZXhdIC0gcHJvcG9zYWwpO1xuXG5cdFx0XHRpZiAoIHBvcyA8IGNsb3Nlc3QgKSB7XG5cdFx0XHRcdGhhbmRsZU51bWJlciA9IGluZGV4O1xuXHRcdFx0XHRjbG9zZXN0ID0gcG9zO1xuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0cmV0dXJuIGhhbmRsZU51bWJlcjtcblx0fVxuXG5cdC8vIE1vdmVzIGhhbmRsZShzKSBieSBhIHBlcmNlbnRhZ2Vcblx0Ly8gKGJvb2wsICUgdG8gbW92ZSwgWyUgd2hlcmUgaGFuZGxlIHN0YXJ0ZWQsIC4uLl0sIFtpbmRleCBpbiBzY29wZV9IYW5kbGVzLCAuLi5dKVxuXHRmdW5jdGlvbiBtb3ZlSGFuZGxlcyAoIHVwd2FyZCwgcHJvcG9zYWwsIGxvY2F0aW9ucywgaGFuZGxlTnVtYmVycyApIHtcblxuXHRcdHZhciBwcm9wb3NhbHMgPSBsb2NhdGlvbnMuc2xpY2UoKTtcblxuXHRcdHZhciBiID0gWyF1cHdhcmQsIHVwd2FyZF07XG5cdFx0dmFyIGYgPSBbdXB3YXJkLCAhdXB3YXJkXTtcblxuXHRcdC8vIENvcHkgaGFuZGxlTnVtYmVycyBzbyB3ZSBkb24ndCBjaGFuZ2UgdGhlIGRhdGFzZXRcblx0XHRoYW5kbGVOdW1iZXJzID0gaGFuZGxlTnVtYmVycy5zbGljZSgpO1xuXG5cdFx0Ly8gQ2hlY2sgdG8gc2VlIHdoaWNoIGhhbmRsZSBpcyAnbGVhZGluZycuXG5cdFx0Ly8gSWYgdGhhdCBvbmUgY2FuJ3QgbW92ZSB0aGUgc2Vjb25kIGNhbid0IGVpdGhlci5cblx0XHRpZiAoIHVwd2FyZCApIHtcblx0XHRcdGhhbmRsZU51bWJlcnMucmV2ZXJzZSgpO1xuXHRcdH1cblxuXHRcdC8vIFN0ZXAgMTogZ2V0IHRoZSBtYXhpbXVtIHBlcmNlbnRhZ2UgdGhhdCBhbnkgb2YgdGhlIGhhbmRsZXMgY2FuIG1vdmVcblx0XHRpZiAoIGhhbmRsZU51bWJlcnMubGVuZ3RoID4gMSApIHtcblxuXHRcdFx0aGFuZGxlTnVtYmVycy5mb3JFYWNoKGZ1bmN0aW9uKGhhbmRsZU51bWJlciwgbykge1xuXG5cdFx0XHRcdHZhciB0byA9IGNoZWNrSGFuZGxlUG9zaXRpb24ocHJvcG9zYWxzLCBoYW5kbGVOdW1iZXIsIHByb3Bvc2Fsc1toYW5kbGVOdW1iZXJdICsgcHJvcG9zYWwsIGJbb10sIGZbb10sIGZhbHNlKTtcblxuXHRcdFx0XHQvLyBTdG9wIGlmIG9uZSBvZiB0aGUgaGFuZGxlcyBjYW4ndCBtb3ZlLlxuXHRcdFx0XHRpZiAoIHRvID09PSBmYWxzZSApIHtcblx0XHRcdFx0XHRwcm9wb3NhbCA9IDA7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0cHJvcG9zYWwgPSB0byAtIHByb3Bvc2Fsc1toYW5kbGVOdW1iZXJdO1xuXHRcdFx0XHRcdHByb3Bvc2Fsc1toYW5kbGVOdW1iZXJdID0gdG87XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdH1cblxuXHRcdC8vIElmIHVzaW5nIG9uZSBoYW5kbGUsIGNoZWNrIGJhY2t3YXJkIEFORCBmb3J3YXJkXG5cdFx0ZWxzZSB7XG5cdFx0XHRiID0gZiA9IFt0cnVlXTtcblx0XHR9XG5cblx0XHR2YXIgc3RhdGUgPSBmYWxzZTtcblxuXHRcdC8vIFN0ZXAgMjogVHJ5IHRvIHNldCB0aGUgaGFuZGxlcyB3aXRoIHRoZSBmb3VuZCBwZXJjZW50YWdlXG5cdFx0aGFuZGxlTnVtYmVycy5mb3JFYWNoKGZ1bmN0aW9uKGhhbmRsZU51bWJlciwgbykge1xuXHRcdFx0c3RhdGUgPSBzZXRIYW5kbGUoaGFuZGxlTnVtYmVyLCBsb2NhdGlvbnNbaGFuZGxlTnVtYmVyXSArIHByb3Bvc2FsLCBiW29dLCBmW29dKSB8fCBzdGF0ZTtcblx0XHR9KTtcblxuXHRcdC8vIFN0ZXAgMzogSWYgYSBoYW5kbGUgbW92ZWQsIGZpcmUgZXZlbnRzXG5cdFx0aWYgKCBzdGF0ZSApIHtcblx0XHRcdGhhbmRsZU51bWJlcnMuZm9yRWFjaChmdW5jdGlvbihoYW5kbGVOdW1iZXIpe1xuXHRcdFx0XHRmaXJlRXZlbnQoJ3VwZGF0ZScsIGhhbmRsZU51bWJlcik7XG5cdFx0XHRcdGZpcmVFdmVudCgnc2xpZGUnLCBoYW5kbGVOdW1iZXIpO1xuXHRcdFx0fSk7XG5cdFx0fVxuXHR9XG5cblx0Ly8gRXh0ZXJuYWwgZXZlbnQgaGFuZGxpbmdcblx0ZnVuY3Rpb24gZmlyZUV2ZW50ICggZXZlbnROYW1lLCBoYW5kbGVOdW1iZXIsIHRhcCApIHtcblxuXHRcdE9iamVjdC5rZXlzKHNjb3BlX0V2ZW50cykuZm9yRWFjaChmdW5jdGlvbiggdGFyZ2V0RXZlbnQgKSB7XG5cblx0XHRcdHZhciBldmVudFR5cGUgPSB0YXJnZXRFdmVudC5zcGxpdCgnLicpWzBdO1xuXG5cdFx0XHRpZiAoIGV2ZW50TmFtZSA9PT0gZXZlbnRUeXBlICkge1xuXHRcdFx0XHRzY29wZV9FdmVudHNbdGFyZ2V0RXZlbnRdLmZvckVhY2goZnVuY3Rpb24oIGNhbGxiYWNrICkge1xuXG5cdFx0XHRcdFx0Y2FsbGJhY2suY2FsbChcblx0XHRcdFx0XHRcdC8vIFVzZSB0aGUgc2xpZGVyIHB1YmxpYyBBUEkgYXMgdGhlIHNjb3BlICgndGhpcycpXG5cdFx0XHRcdFx0XHRzY29wZV9TZWxmLFxuXHRcdFx0XHRcdFx0Ly8gUmV0dXJuIHZhbHVlcyBhcyBhcnJheSwgc28gYXJnXzFbYXJnXzJdIGlzIGFsd2F5cyB2YWxpZC5cblx0XHRcdFx0XHRcdHNjb3BlX1ZhbHVlcy5tYXAob3B0aW9ucy5mb3JtYXQudG8pLFxuXHRcdFx0XHRcdFx0Ly8gSGFuZGxlIGluZGV4LCAwIG9yIDFcblx0XHRcdFx0XHRcdGhhbmRsZU51bWJlcixcblx0XHRcdFx0XHRcdC8vIFVuZm9ybWF0dGVkIHNsaWRlciB2YWx1ZXNcblx0XHRcdFx0XHRcdHNjb3BlX1ZhbHVlcy5zbGljZSgpLFxuXHRcdFx0XHRcdFx0Ly8gRXZlbnQgaXMgZmlyZWQgYnkgdGFwLCB0cnVlIG9yIGZhbHNlXG5cdFx0XHRcdFx0XHR0YXAgfHwgZmFsc2UsXG5cdFx0XHRcdFx0XHQvLyBMZWZ0IG9mZnNldCBvZiB0aGUgaGFuZGxlLCBpbiByZWxhdGlvbiB0byB0aGUgc2xpZGVyXG5cdFx0XHRcdFx0XHRzY29wZV9Mb2NhdGlvbnMuc2xpY2UoKVxuXHRcdFx0XHRcdCk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG5cblxuXHQvLyBGaXJlICdlbmQnIHdoZW4gYSBtb3VzZSBvciBwZW4gbGVhdmVzIHRoZSBkb2N1bWVudC5cblx0ZnVuY3Rpb24gZG9jdW1lbnRMZWF2ZSAoIGV2ZW50LCBkYXRhICkge1xuXHRcdGlmICggZXZlbnQudHlwZSA9PT0gXCJtb3VzZW91dFwiICYmIGV2ZW50LnRhcmdldC5ub2RlTmFtZSA9PT0gXCJIVE1MXCIgJiYgZXZlbnQucmVsYXRlZFRhcmdldCA9PT0gbnVsbCApe1xuXHRcdFx0ZXZlbnRFbmQgKGV2ZW50LCBkYXRhKTtcblx0XHR9XG5cdH1cblxuXHQvLyBIYW5kbGUgbW92ZW1lbnQgb24gZG9jdW1lbnQgZm9yIGhhbmRsZSBhbmQgcmFuZ2UgZHJhZy5cblx0ZnVuY3Rpb24gZXZlbnRNb3ZlICggZXZlbnQsIGRhdGEgKSB7XG5cblx0XHQvLyBGaXggIzQ5OFxuXHRcdC8vIENoZWNrIHZhbHVlIG9mIC5idXR0b25zIGluICdzdGFydCcgdG8gd29yayBhcm91bmQgYSBidWcgaW4gSUUxMCBtb2JpbGUgKGRhdGEuYnV0dG9uc1Byb3BlcnR5KS5cblx0XHQvLyBodHRwczovL2Nvbm5lY3QubWljcm9zb2Z0LmNvbS9JRS9mZWVkYmFjay9kZXRhaWxzLzkyNzAwNS9tb2JpbGUtaWUxMC13aW5kb3dzLXBob25lLWJ1dHRvbnMtcHJvcGVydHktb2YtcG9pbnRlcm1vdmUtZXZlbnQtYWx3YXlzLXplcm9cblx0XHQvLyBJRTkgaGFzIC5idXR0b25zIGFuZCAud2hpY2ggemVybyBvbiBtb3VzZW1vdmUuXG5cdFx0Ly8gRmlyZWZveCBicmVha3MgdGhlIHNwZWMgTUROIGRlZmluZXMuXG5cdFx0aWYgKCBuYXZpZ2F0b3IuYXBwVmVyc2lvbi5pbmRleE9mKFwiTVNJRSA5XCIpID09PSAtMSAmJiBldmVudC5idXR0b25zID09PSAwICYmIGRhdGEuYnV0dG9uc1Byb3BlcnR5ICE9PSAwICkge1xuXHRcdFx0cmV0dXJuIGV2ZW50RW5kKGV2ZW50LCBkYXRhKTtcblx0XHR9XG5cblx0XHQvLyBDaGVjayBpZiB3ZSBhcmUgbW92aW5nIHVwIG9yIGRvd25cblx0XHR2YXIgbW92ZW1lbnQgPSAob3B0aW9ucy5kaXIgPyAtMSA6IDEpICogKGV2ZW50LmNhbGNQb2ludCAtIGRhdGEuc3RhcnRDYWxjUG9pbnQpO1xuXG5cdFx0Ly8gQ29udmVydCB0aGUgbW92ZW1lbnQgaW50byBhIHBlcmNlbnRhZ2Ugb2YgdGhlIHNsaWRlciB3aWR0aC9oZWlnaHRcblx0XHR2YXIgcHJvcG9zYWwgPSAobW92ZW1lbnQgKiAxMDApIC8gZGF0YS5iYXNlU2l6ZTtcblxuXHRcdG1vdmVIYW5kbGVzKG1vdmVtZW50ID4gMCwgcHJvcG9zYWwsIGRhdGEubG9jYXRpb25zLCBkYXRhLmhhbmRsZU51bWJlcnMpO1xuXHR9XG5cblx0Ly8gVW5iaW5kIG1vdmUgZXZlbnRzIG9uIGRvY3VtZW50LCBjYWxsIGNhbGxiYWNrcy5cblx0ZnVuY3Rpb24gZXZlbnRFbmQgKCBldmVudCwgZGF0YSApIHtcblxuXHRcdC8vIFRoZSBoYW5kbGUgaXMgbm8gbG9uZ2VyIGFjdGl2ZSwgc28gcmVtb3ZlIHRoZSBjbGFzcy5cblx0XHRpZiAoIGRhdGEuaGFuZGxlICkge1xuXHRcdFx0cmVtb3ZlQ2xhc3MoZGF0YS5oYW5kbGUsIG9wdGlvbnMuY3NzQ2xhc3Nlcy5hY3RpdmUpO1xuXHRcdFx0c2NvcGVfQWN0aXZlSGFuZGxlc0NvdW50IC09IDE7XG5cdFx0fVxuXG5cdFx0Ly8gVW5iaW5kIHRoZSBtb3ZlIGFuZCBlbmQgZXZlbnRzLCB3aGljaCBhcmUgYWRkZWQgb24gJ3N0YXJ0Jy5cblx0XHRkYXRhLmxpc3RlbmVycy5mb3JFYWNoKGZ1bmN0aW9uKCBjICkge1xuXHRcdFx0c2NvcGVfRG9jdW1lbnRFbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoY1swXSwgY1sxXSk7XG5cdFx0fSk7XG5cblx0XHRpZiAoIHNjb3BlX0FjdGl2ZUhhbmRsZXNDb3VudCA9PT0gMCApIHtcblx0XHRcdC8vIFJlbW92ZSBkcmFnZ2luZyBjbGFzcy5cblx0XHRcdHJlbW92ZUNsYXNzKHNjb3BlX1RhcmdldCwgb3B0aW9ucy5jc3NDbGFzc2VzLmRyYWcpO1xuXHRcdFx0c2V0WmluZGV4KCk7XG5cblx0XHRcdC8vIFJlbW92ZSBjdXJzb3Igc3R5bGVzIGFuZCB0ZXh0LXNlbGVjdGlvbiBldmVudHMgYm91bmQgdG8gdGhlIGJvZHkuXG5cdFx0XHRpZiAoIGV2ZW50LmN1cnNvciApIHtcblx0XHRcdFx0c2NvcGVfQm9keS5zdHlsZS5jdXJzb3IgPSAnJztcblx0XHRcdFx0c2NvcGVfQm9keS5yZW1vdmVFdmVudExpc3RlbmVyKCdzZWxlY3RzdGFydCcsIHByZXZlbnREZWZhdWx0KTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRkYXRhLmhhbmRsZU51bWJlcnMuZm9yRWFjaChmdW5jdGlvbihoYW5kbGVOdW1iZXIpe1xuXHRcdFx0ZmlyZUV2ZW50KCdjaGFuZ2UnLCBoYW5kbGVOdW1iZXIpO1xuXHRcdFx0ZmlyZUV2ZW50KCdzZXQnLCBoYW5kbGVOdW1iZXIpO1xuXHRcdFx0ZmlyZUV2ZW50KCdlbmQnLCBoYW5kbGVOdW1iZXIpO1xuXHRcdH0pO1xuXHR9XG5cblx0Ly8gQmluZCBtb3ZlIGV2ZW50cyBvbiBkb2N1bWVudC5cblx0ZnVuY3Rpb24gZXZlbnRTdGFydCAoIGV2ZW50LCBkYXRhICkge1xuXG5cdFx0dmFyIGhhbmRsZTtcblx0XHRpZiAoIGRhdGEuaGFuZGxlTnVtYmVycy5sZW5ndGggPT09IDEgKSB7XG5cblx0XHRcdHZhciBoYW5kbGVPcmlnaW4gPSBzY29wZV9IYW5kbGVzW2RhdGEuaGFuZGxlTnVtYmVyc1swXV07XG5cblx0XHRcdC8vIElnbm9yZSAnZGlzYWJsZWQnIGhhbmRsZXNcblx0XHRcdGlmICggaGFuZGxlT3JpZ2luLmhhc0F0dHJpYnV0ZSgnZGlzYWJsZWQnKSApIHtcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fVxuXG5cdFx0XHRoYW5kbGUgPSBoYW5kbGVPcmlnaW4uY2hpbGRyZW5bMF07XG5cdFx0XHRzY29wZV9BY3RpdmVIYW5kbGVzQ291bnQgKz0gMTtcblxuXHRcdFx0Ly8gTWFyayB0aGUgaGFuZGxlIGFzICdhY3RpdmUnIHNvIGl0IGNhbiBiZSBzdHlsZWQuXG5cdFx0XHRhZGRDbGFzcyhoYW5kbGUsIG9wdGlvbnMuY3NzQ2xhc3Nlcy5hY3RpdmUpO1xuXHRcdH1cblxuXHRcdC8vIEEgZHJhZyBzaG91bGQgbmV2ZXIgcHJvcGFnYXRlIHVwIHRvIHRoZSAndGFwJyBldmVudC5cblx0XHRldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcblxuXHRcdC8vIFJlY29yZCB0aGUgZXZlbnQgbGlzdGVuZXJzLlxuXHRcdHZhciBsaXN0ZW5lcnMgPSBbXTtcblxuXHRcdC8vIEF0dGFjaCB0aGUgbW92ZSBhbmQgZW5kIGV2ZW50cy5cblx0XHR2YXIgbW92ZUV2ZW50ID0gYXR0YWNoRXZlbnQoYWN0aW9ucy5tb3ZlLCBzY29wZV9Eb2N1bWVudEVsZW1lbnQsIGV2ZW50TW92ZSwge1xuXHRcdFx0Ly8gVGhlIGV2ZW50IHRhcmdldCBoYXMgY2hhbmdlZCBzbyB3ZSBuZWVkIHRvIHByb3BhZ2F0ZSB0aGUgb3JpZ2luYWwgb25lIHNvIHRoYXQgd2Uga2VlcFxuXHRcdFx0Ly8gcmVseWluZyBvbiBpdCB0byBleHRyYWN0IHRhcmdldCB0b3VjaGVzLlxuXHRcdFx0dGFyZ2V0OiBldmVudC50YXJnZXQsXG5cdFx0XHRoYW5kbGU6IGhhbmRsZSxcblx0XHRcdGxpc3RlbmVyczogbGlzdGVuZXJzLFxuXHRcdFx0c3RhcnRDYWxjUG9pbnQ6IGV2ZW50LmNhbGNQb2ludCxcblx0XHRcdGJhc2VTaXplOiBiYXNlU2l6ZSgpLFxuXHRcdFx0cGFnZU9mZnNldDogZXZlbnQucGFnZU9mZnNldCxcblx0XHRcdGhhbmRsZU51bWJlcnM6IGRhdGEuaGFuZGxlTnVtYmVycyxcblx0XHRcdGJ1dHRvbnNQcm9wZXJ0eTogZXZlbnQuYnV0dG9ucyxcblx0XHRcdGxvY2F0aW9uczogc2NvcGVfTG9jYXRpb25zLnNsaWNlKClcblx0XHR9KTtcblxuXHRcdHZhciBlbmRFdmVudCA9IGF0dGFjaEV2ZW50KGFjdGlvbnMuZW5kLCBzY29wZV9Eb2N1bWVudEVsZW1lbnQsIGV2ZW50RW5kLCB7XG5cdFx0XHR0YXJnZXQ6IGV2ZW50LnRhcmdldCxcblx0XHRcdGhhbmRsZTogaGFuZGxlLFxuXHRcdFx0bGlzdGVuZXJzOiBsaXN0ZW5lcnMsXG5cdFx0XHRoYW5kbGVOdW1iZXJzOiBkYXRhLmhhbmRsZU51bWJlcnNcblx0XHR9KTtcblxuXHRcdHZhciBvdXRFdmVudCA9IGF0dGFjaEV2ZW50KFwibW91c2VvdXRcIiwgc2NvcGVfRG9jdW1lbnRFbGVtZW50LCBkb2N1bWVudExlYXZlLCB7XG5cdFx0XHR0YXJnZXQ6IGV2ZW50LnRhcmdldCxcblx0XHRcdGhhbmRsZTogaGFuZGxlLFxuXHRcdFx0bGlzdGVuZXJzOiBsaXN0ZW5lcnMsXG5cdFx0XHRoYW5kbGVOdW1iZXJzOiBkYXRhLmhhbmRsZU51bWJlcnNcblx0XHR9KTtcblxuXHRcdC8vIFdlIHdhbnQgdG8gbWFrZSBzdXJlIHdlIHB1c2hlZCB0aGUgbGlzdGVuZXJzIGluIHRoZSBsaXN0ZW5lciBsaXN0IHJhdGhlciB0aGFuIGNyZWF0aW5nXG5cdFx0Ly8gYSBuZXcgb25lIGFzIGl0IGhhcyBhbHJlYWR5IGJlZW4gcGFzc2VkIHRvIHRoZSBldmVudCBoYW5kbGVycy5cblx0XHRsaXN0ZW5lcnMucHVzaC5hcHBseShsaXN0ZW5lcnMsIG1vdmVFdmVudC5jb25jYXQoZW5kRXZlbnQsIG91dEV2ZW50KSk7XG5cblx0XHQvLyBUZXh0IHNlbGVjdGlvbiBpc24ndCBhbiBpc3N1ZSBvbiB0b3VjaCBkZXZpY2VzLFxuXHRcdC8vIHNvIGFkZGluZyBjdXJzb3Igc3R5bGVzIGNhbiBiZSBza2lwcGVkLlxuXHRcdGlmICggZXZlbnQuY3Vyc29yICkge1xuXG5cdFx0XHQvLyBQcmV2ZW50IHRoZSAnSScgY3Vyc29yIGFuZCBleHRlbmQgdGhlIHJhbmdlLWRyYWcgY3Vyc29yLlxuXHRcdFx0c2NvcGVfQm9keS5zdHlsZS5jdXJzb3IgPSBnZXRDb21wdXRlZFN0eWxlKGV2ZW50LnRhcmdldCkuY3Vyc29yO1xuXG5cdFx0XHQvLyBNYXJrIHRoZSB0YXJnZXQgd2l0aCBhIGRyYWdnaW5nIHN0YXRlLlxuXHRcdFx0aWYgKCBzY29wZV9IYW5kbGVzLmxlbmd0aCA+IDEgKSB7XG5cdFx0XHRcdGFkZENsYXNzKHNjb3BlX1RhcmdldCwgb3B0aW9ucy5jc3NDbGFzc2VzLmRyYWcpO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBQcmV2ZW50IHRleHQgc2VsZWN0aW9uIHdoZW4gZHJhZ2dpbmcgdGhlIGhhbmRsZXMuXG5cdFx0XHQvLyBJbiBub1VpU2xpZGVyIDw9IDkuMi4wLCB0aGlzIHdhcyBoYW5kbGVkIGJ5IGNhbGxpbmcgcHJldmVudERlZmF1bHQgb24gbW91c2UvdG91Y2ggc3RhcnQvbW92ZSxcblx0XHRcdC8vIHdoaWNoIGlzIHNjcm9sbCBibG9ja2luZy4gVGhlIHNlbGVjdHN0YXJ0IGV2ZW50IGlzIHN1cHBvcnRlZCBieSBGaXJlRm94IHN0YXJ0aW5nIGZyb20gdmVyc2lvbiA1Mixcblx0XHRcdC8vIG1lYW5pbmcgdGhlIG9ubHkgaG9sZG91dCBpcyBpT1MgU2FmYXJpLiBUaGlzIGRvZXNuJ3QgbWF0dGVyOiB0ZXh0IHNlbGVjdGlvbiBpc24ndCB0cmlnZ2VyZWQgdGhlcmUuXG5cdFx0XHQvLyBUaGUgJ2N1cnNvcicgZmxhZyBpcyBmYWxzZS5cblx0XHRcdC8vIFNlZTogaHR0cDovL2Nhbml1c2UuY29tLyNzZWFyY2g9c2VsZWN0c3RhcnRcblx0XHRcdHNjb3BlX0JvZHkuYWRkRXZlbnRMaXN0ZW5lcignc2VsZWN0c3RhcnQnLCBwcmV2ZW50RGVmYXVsdCwgZmFsc2UpO1xuXHRcdH1cblxuXHRcdGRhdGEuaGFuZGxlTnVtYmVycy5mb3JFYWNoKGZ1bmN0aW9uKGhhbmRsZU51bWJlcil7XG5cdFx0XHRmaXJlRXZlbnQoJ3N0YXJ0JywgaGFuZGxlTnVtYmVyKTtcblx0XHR9KTtcblx0fVxuXG5cdC8vIE1vdmUgY2xvc2VzdCBoYW5kbGUgdG8gdGFwcGVkIGxvY2F0aW9uLlxuXHRmdW5jdGlvbiBldmVudFRhcCAoIGV2ZW50ICkge1xuXG5cdFx0Ly8gVGhlIHRhcCBldmVudCBzaG91bGRuJ3QgcHJvcGFnYXRlIHVwXG5cdFx0ZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG5cblx0XHR2YXIgcHJvcG9zYWwgPSBjYWxjUG9pbnRUb1BlcmNlbnRhZ2UoZXZlbnQuY2FsY1BvaW50KTtcblx0XHR2YXIgaGFuZGxlTnVtYmVyID0gZ2V0Q2xvc2VzdEhhbmRsZShwcm9wb3NhbCk7XG5cblx0XHQvLyBUYWNrbGUgdGhlIGNhc2UgdGhhdCBhbGwgaGFuZGxlcyBhcmUgJ2Rpc2FibGVkJy5cblx0XHRpZiAoIGhhbmRsZU51bWJlciA9PT0gZmFsc2UgKSB7XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fVxuXG5cdFx0Ly8gRmxhZyB0aGUgc2xpZGVyIGFzIGl0IGlzIG5vdyBpbiBhIHRyYW5zaXRpb25hbCBzdGF0ZS5cblx0XHQvLyBUcmFuc2l0aW9uIHRha2VzIGEgY29uZmlndXJhYmxlIGFtb3VudCBvZiBtcyAoZGVmYXVsdCAzMDApLiBSZS1lbmFibGUgdGhlIHNsaWRlciBhZnRlciB0aGF0LlxuXHRcdGlmICggIW9wdGlvbnMuZXZlbnRzLnNuYXAgKSB7XG5cdFx0XHRhZGRDbGFzc0ZvcihzY29wZV9UYXJnZXQsIG9wdGlvbnMuY3NzQ2xhc3Nlcy50YXAsIG9wdGlvbnMuYW5pbWF0aW9uRHVyYXRpb24pO1xuXHRcdH1cblxuXHRcdHNldEhhbmRsZShoYW5kbGVOdW1iZXIsIHByb3Bvc2FsLCB0cnVlLCB0cnVlKTtcblxuXHRcdHNldFppbmRleCgpO1xuXG5cdFx0ZmlyZUV2ZW50KCdzbGlkZScsIGhhbmRsZU51bWJlciwgdHJ1ZSk7XG5cdFx0ZmlyZUV2ZW50KCd1cGRhdGUnLCBoYW5kbGVOdW1iZXIsIHRydWUpO1xuXHRcdGZpcmVFdmVudCgnY2hhbmdlJywgaGFuZGxlTnVtYmVyLCB0cnVlKTtcblx0XHRmaXJlRXZlbnQoJ3NldCcsIGhhbmRsZU51bWJlciwgdHJ1ZSk7XG5cblx0XHRpZiAoIG9wdGlvbnMuZXZlbnRzLnNuYXAgKSB7XG5cdFx0XHRldmVudFN0YXJ0KGV2ZW50LCB7IGhhbmRsZU51bWJlcnM6IFtoYW5kbGVOdW1iZXJdIH0pO1xuXHRcdH1cblx0fVxuXG5cdC8vIEZpcmVzIGEgJ2hvdmVyJyBldmVudCBmb3IgYSBob3ZlcmVkIG1vdXNlL3BlbiBwb3NpdGlvbi5cblx0ZnVuY3Rpb24gZXZlbnRIb3ZlciAoIGV2ZW50ICkge1xuXG5cdFx0dmFyIHByb3Bvc2FsID0gY2FsY1BvaW50VG9QZXJjZW50YWdlKGV2ZW50LmNhbGNQb2ludCk7XG5cblx0XHR2YXIgdG8gPSBzY29wZV9TcGVjdHJ1bS5nZXRTdGVwKHByb3Bvc2FsKTtcblx0XHR2YXIgdmFsdWUgPSBzY29wZV9TcGVjdHJ1bS5mcm9tU3RlcHBpbmcodG8pO1xuXG5cdFx0T2JqZWN0LmtleXMoc2NvcGVfRXZlbnRzKS5mb3JFYWNoKGZ1bmN0aW9uKCB0YXJnZXRFdmVudCApIHtcblx0XHRcdGlmICggJ2hvdmVyJyA9PT0gdGFyZ2V0RXZlbnQuc3BsaXQoJy4nKVswXSApIHtcblx0XHRcdFx0c2NvcGVfRXZlbnRzW3RhcmdldEV2ZW50XS5mb3JFYWNoKGZ1bmN0aW9uKCBjYWxsYmFjayApIHtcblx0XHRcdFx0XHRjYWxsYmFjay5jYWxsKCBzY29wZV9TZWxmLCB2YWx1ZSApO1xuXHRcdFx0XHR9KTtcblx0XHRcdH1cblx0XHR9KTtcblx0fVxuXG5cdC8vIEF0dGFjaCBldmVudHMgdG8gc2V2ZXJhbCBzbGlkZXIgcGFydHMuXG5cdGZ1bmN0aW9uIGJpbmRTbGlkZXJFdmVudHMgKCBiZWhhdmlvdXIgKSB7XG5cblx0XHQvLyBBdHRhY2ggdGhlIHN0YW5kYXJkIGRyYWcgZXZlbnQgdG8gdGhlIGhhbmRsZXMuXG5cdFx0aWYgKCAhYmVoYXZpb3VyLmZpeGVkICkge1xuXG5cdFx0XHRzY29wZV9IYW5kbGVzLmZvckVhY2goZnVuY3Rpb24oIGhhbmRsZSwgaW5kZXggKXtcblxuXHRcdFx0XHQvLyBUaGVzZSBldmVudHMgYXJlIG9ubHkgYm91bmQgdG8gdGhlIHZpc3VhbCBoYW5kbGVcblx0XHRcdFx0Ly8gZWxlbWVudCwgbm90IHRoZSAncmVhbCcgb3JpZ2luIGVsZW1lbnQuXG5cdFx0XHRcdGF0dGFjaEV2ZW50ICggYWN0aW9ucy5zdGFydCwgaGFuZGxlLmNoaWxkcmVuWzBdLCBldmVudFN0YXJ0LCB7XG5cdFx0XHRcdFx0aGFuZGxlTnVtYmVyczogW2luZGV4XVxuXHRcdFx0XHR9KTtcblx0XHRcdH0pO1xuXHRcdH1cblxuXHRcdC8vIEF0dGFjaCB0aGUgdGFwIGV2ZW50IHRvIHRoZSBzbGlkZXIgYmFzZS5cblx0XHRpZiAoIGJlaGF2aW91ci50YXAgKSB7XG5cdFx0XHRhdHRhY2hFdmVudCAoYWN0aW9ucy5zdGFydCwgc2NvcGVfQmFzZSwgZXZlbnRUYXAsIHt9KTtcblx0XHR9XG5cblx0XHQvLyBGaXJlIGhvdmVyIGV2ZW50c1xuXHRcdGlmICggYmVoYXZpb3VyLmhvdmVyICkge1xuXHRcdFx0YXR0YWNoRXZlbnQgKGFjdGlvbnMubW92ZSwgc2NvcGVfQmFzZSwgZXZlbnRIb3ZlciwgeyBob3ZlcjogdHJ1ZSB9KTtcblx0XHR9XG5cblx0XHQvLyBNYWtlIHRoZSByYW5nZSBkcmFnZ2FibGUuXG5cdFx0aWYgKCBiZWhhdmlvdXIuZHJhZyApe1xuXG5cdFx0XHRzY29wZV9Db25uZWN0cy5mb3JFYWNoKGZ1bmN0aW9uKCBjb25uZWN0LCBpbmRleCApe1xuXG5cdFx0XHRcdGlmICggY29ubmVjdCA9PT0gZmFsc2UgfHwgaW5kZXggPT09IDAgfHwgaW5kZXggPT09IHNjb3BlX0Nvbm5lY3RzLmxlbmd0aCAtIDEgKSB7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0dmFyIGhhbmRsZUJlZm9yZSA9IHNjb3BlX0hhbmRsZXNbaW5kZXggLSAxXTtcblx0XHRcdFx0dmFyIGhhbmRsZUFmdGVyID0gc2NvcGVfSGFuZGxlc1tpbmRleF07XG5cdFx0XHRcdHZhciBldmVudEhvbGRlcnMgPSBbY29ubmVjdF07XG5cblx0XHRcdFx0YWRkQ2xhc3MoY29ubmVjdCwgb3B0aW9ucy5jc3NDbGFzc2VzLmRyYWdnYWJsZSk7XG5cblx0XHRcdFx0Ly8gV2hlbiB0aGUgcmFuZ2UgaXMgZml4ZWQsIHRoZSBlbnRpcmUgcmFuZ2UgY2FuXG5cdFx0XHRcdC8vIGJlIGRyYWdnZWQgYnkgdGhlIGhhbmRsZXMuIFRoZSBoYW5kbGUgaW4gdGhlIGZpcnN0XG5cdFx0XHRcdC8vIG9yaWdpbiB3aWxsIHByb3BhZ2F0ZSB0aGUgc3RhcnQgZXZlbnQgdXB3YXJkLFxuXHRcdFx0XHQvLyBidXQgaXQgbmVlZHMgdG8gYmUgYm91bmQgbWFudWFsbHkgb24gdGhlIG90aGVyLlxuXHRcdFx0XHRpZiAoIGJlaGF2aW91ci5maXhlZCApIHtcblx0XHRcdFx0XHRldmVudEhvbGRlcnMucHVzaChoYW5kbGVCZWZvcmUuY2hpbGRyZW5bMF0pO1xuXHRcdFx0XHRcdGV2ZW50SG9sZGVycy5wdXNoKGhhbmRsZUFmdGVyLmNoaWxkcmVuWzBdKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGV2ZW50SG9sZGVycy5mb3JFYWNoKGZ1bmN0aW9uKCBldmVudEhvbGRlciApIHtcblx0XHRcdFx0XHRhdHRhY2hFdmVudCAoIGFjdGlvbnMuc3RhcnQsIGV2ZW50SG9sZGVyLCBldmVudFN0YXJ0LCB7XG5cdFx0XHRcdFx0XHRoYW5kbGVzOiBbaGFuZGxlQmVmb3JlLCBoYW5kbGVBZnRlcl0sXG5cdFx0XHRcdFx0XHRoYW5kbGVOdW1iZXJzOiBbaW5kZXggLSAxLCBpbmRleF1cblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9KTtcblx0XHR9XG5cdH1cblxuXG5cdC8vIFNwbGl0IG91dCB0aGUgaGFuZGxlIHBvc2l0aW9uaW5nIGxvZ2ljIHNvIHRoZSBNb3ZlIGV2ZW50IGNhbiB1c2UgaXQsIHRvb1xuXHRmdW5jdGlvbiBjaGVja0hhbmRsZVBvc2l0aW9uICggcmVmZXJlbmNlLCBoYW5kbGVOdW1iZXIsIHRvLCBsb29rQmFja3dhcmQsIGxvb2tGb3J3YXJkLCBnZXRWYWx1ZSApIHtcblxuXHRcdC8vIEZvciBzbGlkZXJzIHdpdGggbXVsdGlwbGUgaGFuZGxlcywgbGltaXQgbW92ZW1lbnQgdG8gdGhlIG90aGVyIGhhbmRsZS5cblx0XHQvLyBBcHBseSB0aGUgbWFyZ2luIG9wdGlvbiBieSBhZGRpbmcgaXQgdG8gdGhlIGhhbmRsZSBwb3NpdGlvbnMuXG5cdFx0aWYgKCBzY29wZV9IYW5kbGVzLmxlbmd0aCA+IDEgKSB7XG5cblx0XHRcdGlmICggbG9va0JhY2t3YXJkICYmIGhhbmRsZU51bWJlciA+IDAgKSB7XG5cdFx0XHRcdHRvID0gTWF0aC5tYXgodG8sIHJlZmVyZW5jZVtoYW5kbGVOdW1iZXIgLSAxXSArIG9wdGlvbnMubWFyZ2luKTtcblx0XHRcdH1cblxuXHRcdFx0aWYgKCBsb29rRm9yd2FyZCAmJiBoYW5kbGVOdW1iZXIgPCBzY29wZV9IYW5kbGVzLmxlbmd0aCAtIDEgKSB7XG5cdFx0XHRcdHRvID0gTWF0aC5taW4odG8sIHJlZmVyZW5jZVtoYW5kbGVOdW1iZXIgKyAxXSAtIG9wdGlvbnMubWFyZ2luKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBUaGUgbGltaXQgb3B0aW9uIGhhcyB0aGUgb3Bwb3NpdGUgZWZmZWN0LCBsaW1pdGluZyBoYW5kbGVzIHRvIGFcblx0XHQvLyBtYXhpbXVtIGRpc3RhbmNlIGZyb20gYW5vdGhlci4gTGltaXQgbXVzdCBiZSA+IDAsIGFzIG90aGVyd2lzZVxuXHRcdC8vIGhhbmRsZXMgd291bGQgYmUgdW5tb3ZlYWJsZS5cblx0XHRpZiAoIHNjb3BlX0hhbmRsZXMubGVuZ3RoID4gMSAmJiBvcHRpb25zLmxpbWl0ICkge1xuXG5cdFx0XHRpZiAoIGxvb2tCYWNrd2FyZCAmJiBoYW5kbGVOdW1iZXIgPiAwICkge1xuXHRcdFx0XHR0byA9IE1hdGgubWluKHRvLCByZWZlcmVuY2VbaGFuZGxlTnVtYmVyIC0gMV0gKyBvcHRpb25zLmxpbWl0KTtcblx0XHRcdH1cblxuXHRcdFx0aWYgKCBsb29rRm9yd2FyZCAmJiBoYW5kbGVOdW1iZXIgPCBzY29wZV9IYW5kbGVzLmxlbmd0aCAtIDEgKSB7XG5cdFx0XHRcdHRvID0gTWF0aC5tYXgodG8sIHJlZmVyZW5jZVtoYW5kbGVOdW1iZXIgKyAxXSAtIG9wdGlvbnMubGltaXQpO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIFRoZSBwYWRkaW5nIG9wdGlvbiBrZWVwcyB0aGUgaGFuZGxlcyBhIGNlcnRhaW4gZGlzdGFuY2UgZnJvbSB0aGVcblx0XHQvLyBlZGdlcyBvZiB0aGUgc2xpZGVyLiBQYWRkaW5nIG11c3QgYmUgPiAwLlxuXHRcdGlmICggb3B0aW9ucy5wYWRkaW5nICkge1xuXG5cdFx0XHRpZiAoIGhhbmRsZU51bWJlciA9PT0gMCApIHtcblx0XHRcdFx0dG8gPSBNYXRoLm1heCh0bywgb3B0aW9ucy5wYWRkaW5nKTtcblx0XHRcdH1cblxuXHRcdFx0aWYgKCBoYW5kbGVOdW1iZXIgPT09IHNjb3BlX0hhbmRsZXMubGVuZ3RoIC0gMSApIHtcblx0XHRcdFx0dG8gPSBNYXRoLm1pbih0bywgMTAwIC0gb3B0aW9ucy5wYWRkaW5nKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHR0byA9IHNjb3BlX1NwZWN0cnVtLmdldFN0ZXAodG8pO1xuXG5cdFx0Ly8gTGltaXQgcGVyY2VudGFnZSB0byB0aGUgMCAtIDEwMCByYW5nZVxuXHRcdHRvID0gbGltaXQodG8pO1xuXG5cdFx0Ly8gUmV0dXJuIGZhbHNlIGlmIGhhbmRsZSBjYW4ndCBtb3ZlXG5cdFx0aWYgKCB0byA9PT0gcmVmZXJlbmNlW2hhbmRsZU51bWJlcl0gJiYgIWdldFZhbHVlICkge1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblxuXHRcdHJldHVybiB0bztcblx0fVxuXG5cdGZ1bmN0aW9uIHRvUGN0ICggcGN0ICkge1xuXHRcdHJldHVybiBwY3QgKyAnJSc7XG5cdH1cblxuXHQvLyBVcGRhdGVzIHNjb3BlX0xvY2F0aW9ucyBhbmQgc2NvcGVfVmFsdWVzLCB1cGRhdGVzIHZpc3VhbCBzdGF0ZVxuXHRmdW5jdGlvbiB1cGRhdGVIYW5kbGVQb3NpdGlvbiAoIGhhbmRsZU51bWJlciwgdG8gKSB7XG5cblx0XHQvLyBVcGRhdGUgbG9jYXRpb25zLlxuXHRcdHNjb3BlX0xvY2F0aW9uc1toYW5kbGVOdW1iZXJdID0gdG87XG5cblx0XHQvLyBDb252ZXJ0IHRoZSB2YWx1ZSB0byB0aGUgc2xpZGVyIHN0ZXBwaW5nL3JhbmdlLlxuXHRcdHNjb3BlX1ZhbHVlc1toYW5kbGVOdW1iZXJdID0gc2NvcGVfU3BlY3RydW0uZnJvbVN0ZXBwaW5nKHRvKTtcblxuXHRcdC8vIENhbGxlZCBzeW5jaHJvbm91c2x5IG9yIG9uIHRoZSBuZXh0IGFuaW1hdGlvbkZyYW1lXG5cdFx0dmFyIHN0YXRlVXBkYXRlID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRzY29wZV9IYW5kbGVzW2hhbmRsZU51bWJlcl0uc3R5bGVbb3B0aW9ucy5zdHlsZV0gPSB0b1BjdCh0byk7XG5cdFx0XHR1cGRhdGVDb25uZWN0KGhhbmRsZU51bWJlcik7XG5cdFx0XHR1cGRhdGVDb25uZWN0KGhhbmRsZU51bWJlciArIDEpO1xuXHRcdH07XG5cblx0XHQvLyBTZXQgdGhlIGhhbmRsZSB0byB0aGUgbmV3IHBvc2l0aW9uLlxuXHRcdC8vIFVzZSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUgZm9yIGVmZmljaWVudCBwYWludGluZy5cblx0XHQvLyBObyBzaWduaWZpY2FudCBlZmZlY3QgaW4gQ2hyb21lLCBFZGdlIHNlZXMgZHJhbWF0aWMgcGVyZm9ybWFjZSBpbXByb3ZlbWVudHMuXG5cdFx0Ly8gT3B0aW9uIHRvIGRpc2FibGUgaXMgdXNlZnVsIGZvciB1bml0IHRlc3RzLCBhbmQgc2luZ2xlLXN0ZXAgZGVidWdnaW5nLlxuXHRcdGlmICggd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSAmJiBvcHRpb25zLnVzZVJlcXVlc3RBbmltYXRpb25GcmFtZSApIHtcblx0XHRcdHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoc3RhdGVVcGRhdGUpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRzdGF0ZVVwZGF0ZSgpO1xuXHRcdH1cblx0fVxuXG5cdGZ1bmN0aW9uIHNldFppbmRleCAoICkge1xuXG5cdFx0c2NvcGVfSGFuZGxlTnVtYmVycy5mb3JFYWNoKGZ1bmN0aW9uKGhhbmRsZU51bWJlcil7XG5cdFx0XHQvLyBIYW5kbGVzIGJlZm9yZSB0aGUgc2xpZGVyIG1pZGRsZSBhcmUgc3RhY2tlZCBsYXRlciA9IGhpZ2hlcixcblx0XHRcdC8vIEhhbmRsZXMgYWZ0ZXIgdGhlIG1pZGRsZSBsYXRlciBpcyBsb3dlclxuXHRcdFx0Ly8gW1s3XSBbOF0gLi4uLi4uLi4uLiB8IC4uLi4uLi4uLi4gWzVdIFs0XVxuXHRcdFx0dmFyIGRpciA9IChzY29wZV9Mb2NhdGlvbnNbaGFuZGxlTnVtYmVyXSA+IDUwID8gLTEgOiAxKTtcblx0XHRcdHZhciB6SW5kZXggPSAzICsgKHNjb3BlX0hhbmRsZXMubGVuZ3RoICsgKGRpciAqIGhhbmRsZU51bWJlcikpO1xuXHRcdFx0c2NvcGVfSGFuZGxlc1toYW5kbGVOdW1iZXJdLmNoaWxkTm9kZXNbMF0uc3R5bGUuekluZGV4ID0gekluZGV4O1xuXHRcdH0pO1xuXHR9XG5cblx0Ly8gVGVzdCBzdWdnZXN0ZWQgdmFsdWVzIGFuZCBhcHBseSBtYXJnaW4sIHN0ZXAuXG5cdGZ1bmN0aW9uIHNldEhhbmRsZSAoIGhhbmRsZU51bWJlciwgdG8sIGxvb2tCYWNrd2FyZCwgbG9va0ZvcndhcmQgKSB7XG5cblx0XHR0byA9IGNoZWNrSGFuZGxlUG9zaXRpb24oc2NvcGVfTG9jYXRpb25zLCBoYW5kbGVOdW1iZXIsIHRvLCBsb29rQmFja3dhcmQsIGxvb2tGb3J3YXJkLCBmYWxzZSk7XG5cblx0XHRpZiAoIHRvID09PSBmYWxzZSApIHtcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9XG5cblx0XHR1cGRhdGVIYW5kbGVQb3NpdGlvbihoYW5kbGVOdW1iZXIsIHRvKTtcblxuXHRcdHJldHVybiB0cnVlO1xuXHR9XG5cblx0Ly8gVXBkYXRlcyBzdHlsZSBhdHRyaWJ1dGUgZm9yIGNvbm5lY3Qgbm9kZXNcblx0ZnVuY3Rpb24gdXBkYXRlQ29ubmVjdCAoIGluZGV4ICkge1xuXG5cdFx0Ly8gU2tpcCBjb25uZWN0cyBzZXQgdG8gZmFsc2Vcblx0XHRpZiAoICFzY29wZV9Db25uZWN0c1tpbmRleF0gKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0dmFyIGwgPSAwO1xuXHRcdHZhciBoID0gMTAwO1xuXG5cdFx0aWYgKCBpbmRleCAhPT0gMCApIHtcblx0XHRcdGwgPSBzY29wZV9Mb2NhdGlvbnNbaW5kZXggLSAxXTtcblx0XHR9XG5cblx0XHRpZiAoIGluZGV4ICE9PSBzY29wZV9Db25uZWN0cy5sZW5ndGggLSAxICkge1xuXHRcdFx0aCA9IHNjb3BlX0xvY2F0aW9uc1tpbmRleF07XG5cdFx0fVxuXG5cdFx0c2NvcGVfQ29ubmVjdHNbaW5kZXhdLnN0eWxlW29wdGlvbnMuc3R5bGVdID0gdG9QY3QobCk7XG5cdFx0c2NvcGVfQ29ubmVjdHNbaW5kZXhdLnN0eWxlW29wdGlvbnMuc3R5bGVPcG9zaXRlXSA9IHRvUGN0KDEwMCAtIGgpO1xuXHR9XG5cblx0Ly8gLi4uXG5cdGZ1bmN0aW9uIHNldFZhbHVlICggdG8sIGhhbmRsZU51bWJlciApIHtcblxuXHRcdC8vIFNldHRpbmcgd2l0aCBudWxsIGluZGljYXRlcyBhbiAnaWdub3JlJy5cblx0XHQvLyBJbnB1dHRpbmcgJ2ZhbHNlJyBpcyBpbnZhbGlkLlxuXHRcdGlmICggdG8gPT09IG51bGwgfHwgdG8gPT09IGZhbHNlICkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdC8vIElmIGEgZm9ybWF0dGVkIG51bWJlciB3YXMgcGFzc2VkLCBhdHRlbXQgdG8gZGVjb2RlIGl0LlxuXHRcdGlmICggdHlwZW9mIHRvID09PSAnbnVtYmVyJyApIHtcblx0XHRcdHRvID0gU3RyaW5nKHRvKTtcblx0XHR9XG5cblx0XHR0byA9IG9wdGlvbnMuZm9ybWF0LmZyb20odG8pO1xuXG5cdFx0Ly8gUmVxdWVzdCBhbiB1cGRhdGUgZm9yIGFsbCBsaW5rcyBpZiB0aGUgdmFsdWUgd2FzIGludmFsaWQuXG5cdFx0Ly8gRG8gc28gdG9vIGlmIHNldHRpbmcgdGhlIGhhbmRsZSBmYWlscy5cblx0XHRpZiAoIHRvICE9PSBmYWxzZSAmJiAhaXNOYU4odG8pICkge1xuXHRcdFx0c2V0SGFuZGxlKGhhbmRsZU51bWJlciwgc2NvcGVfU3BlY3RydW0udG9TdGVwcGluZyh0byksIGZhbHNlLCBmYWxzZSk7XG5cdFx0fVxuXHR9XG5cblx0Ly8gU2V0IHRoZSBzbGlkZXIgdmFsdWUuXG5cdGZ1bmN0aW9uIHZhbHVlU2V0ICggaW5wdXQsIGZpcmVTZXRFdmVudCApIHtcblxuXHRcdHZhciB2YWx1ZXMgPSBhc0FycmF5KGlucHV0KTtcblx0XHR2YXIgaXNJbml0ID0gc2NvcGVfTG9jYXRpb25zWzBdID09PSB1bmRlZmluZWQ7XG5cblx0XHQvLyBFdmVudCBmaXJlcyBieSBkZWZhdWx0XG5cdFx0ZmlyZVNldEV2ZW50ID0gKGZpcmVTZXRFdmVudCA9PT0gdW5kZWZpbmVkID8gdHJ1ZSA6ICEhZmlyZVNldEV2ZW50KTtcblxuXHRcdHZhbHVlcy5mb3JFYWNoKHNldFZhbHVlKTtcblxuXHRcdC8vIEFuaW1hdGlvbiBpcyBvcHRpb25hbC5cblx0XHQvLyBNYWtlIHN1cmUgdGhlIGluaXRpYWwgdmFsdWVzIHdlcmUgc2V0IGJlZm9yZSB1c2luZyBhbmltYXRlZCBwbGFjZW1lbnQuXG5cdFx0aWYgKCBvcHRpb25zLmFuaW1hdGUgJiYgIWlzSW5pdCApIHtcblx0XHRcdGFkZENsYXNzRm9yKHNjb3BlX1RhcmdldCwgb3B0aW9ucy5jc3NDbGFzc2VzLnRhcCwgb3B0aW9ucy5hbmltYXRpb25EdXJhdGlvbik7XG5cdFx0fVxuXG5cdFx0Ly8gTm93IHRoYXQgYWxsIGJhc2UgdmFsdWVzIGFyZSBzZXQsIGFwcGx5IGNvbnN0cmFpbnRzXG5cdFx0c2NvcGVfSGFuZGxlTnVtYmVycy5mb3JFYWNoKGZ1bmN0aW9uKGhhbmRsZU51bWJlcil7XG5cdFx0XHRzZXRIYW5kbGUoaGFuZGxlTnVtYmVyLCBzY29wZV9Mb2NhdGlvbnNbaGFuZGxlTnVtYmVyXSwgdHJ1ZSwgZmFsc2UpO1xuXHRcdH0pO1xuXG5cdFx0c2V0WmluZGV4KCk7XG5cblx0XHRzY29wZV9IYW5kbGVOdW1iZXJzLmZvckVhY2goZnVuY3Rpb24oaGFuZGxlTnVtYmVyKXtcblxuXHRcdFx0ZmlyZUV2ZW50KCd1cGRhdGUnLCBoYW5kbGVOdW1iZXIpO1xuXG5cdFx0XHQvLyBGaXJlIHRoZSBldmVudCBvbmx5IGZvciBoYW5kbGVzIHRoYXQgcmVjZWl2ZWQgYSBuZXcgdmFsdWUsIGFzIHBlciAjNTc5XG5cdFx0XHRpZiAoIHZhbHVlc1toYW5kbGVOdW1iZXJdICE9PSBudWxsICYmIGZpcmVTZXRFdmVudCApIHtcblx0XHRcdFx0ZmlyZUV2ZW50KCdzZXQnLCBoYW5kbGVOdW1iZXIpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG5cblx0Ly8gUmVzZXQgc2xpZGVyIHRvIGluaXRpYWwgdmFsdWVzXG5cdGZ1bmN0aW9uIHZhbHVlUmVzZXQgKCBmaXJlU2V0RXZlbnQgKSB7XG5cdFx0dmFsdWVTZXQob3B0aW9ucy5zdGFydCwgZmlyZVNldEV2ZW50KTtcblx0fVxuXG5cdC8vIEdldCB0aGUgc2xpZGVyIHZhbHVlLlxuXHRmdW5jdGlvbiB2YWx1ZUdldCAoICkge1xuXG5cdFx0dmFyIHZhbHVlcyA9IHNjb3BlX1ZhbHVlcy5tYXAob3B0aW9ucy5mb3JtYXQudG8pO1xuXG5cdFx0Ly8gSWYgb25seSBvbmUgaGFuZGxlIGlzIHVzZWQsIHJldHVybiBhIHNpbmdsZSB2YWx1ZS5cblx0XHRpZiAoIHZhbHVlcy5sZW5ndGggPT09IDEgKXtcblx0XHRcdHJldHVybiB2YWx1ZXNbMF07XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHZhbHVlcztcblx0fVxuXG5cdC8vIFJlbW92ZXMgY2xhc3NlcyBmcm9tIHRoZSByb290IGFuZCBlbXB0aWVzIGl0LlxuXHRmdW5jdGlvbiBkZXN0cm95ICggKSB7XG5cblx0XHRmb3IgKCB2YXIga2V5IGluIG9wdGlvbnMuY3NzQ2xhc3NlcyApIHtcblx0XHRcdGlmICggIW9wdGlvbnMuY3NzQ2xhc3Nlcy5oYXNPd25Qcm9wZXJ0eShrZXkpICkgeyBjb250aW51ZTsgfVxuXHRcdFx0cmVtb3ZlQ2xhc3Moc2NvcGVfVGFyZ2V0LCBvcHRpb25zLmNzc0NsYXNzZXNba2V5XSk7XG5cdFx0fVxuXG5cdFx0d2hpbGUgKHNjb3BlX1RhcmdldC5maXJzdENoaWxkKSB7XG5cdFx0XHRzY29wZV9UYXJnZXQucmVtb3ZlQ2hpbGQoc2NvcGVfVGFyZ2V0LmZpcnN0Q2hpbGQpO1xuXHRcdH1cblxuXHRcdGRlbGV0ZSBzY29wZV9UYXJnZXQubm9VaVNsaWRlcjtcblx0fVxuXG5cdC8vIEdldCB0aGUgY3VycmVudCBzdGVwIHNpemUgZm9yIHRoZSBzbGlkZXIuXG5cdGZ1bmN0aW9uIGdldEN1cnJlbnRTdGVwICggKSB7XG5cblx0XHQvLyBDaGVjayBhbGwgbG9jYXRpb25zLCBtYXAgdGhlbSB0byB0aGVpciBzdGVwcGluZyBwb2ludC5cblx0XHQvLyBHZXQgdGhlIHN0ZXAgcG9pbnQsIHRoZW4gZmluZCBpdCBpbiB0aGUgaW5wdXQgbGlzdC5cblx0XHRyZXR1cm4gc2NvcGVfTG9jYXRpb25zLm1hcChmdW5jdGlvbiggbG9jYXRpb24sIGluZGV4ICl7XG5cblx0XHRcdHZhciBuZWFyYnlTdGVwcyA9IHNjb3BlX1NwZWN0cnVtLmdldE5lYXJieVN0ZXBzKCBsb2NhdGlvbiApO1xuXHRcdFx0dmFyIHZhbHVlID0gc2NvcGVfVmFsdWVzW2luZGV4XTtcblx0XHRcdHZhciBpbmNyZW1lbnQgPSBuZWFyYnlTdGVwcy50aGlzU3RlcC5zdGVwO1xuXHRcdFx0dmFyIGRlY3JlbWVudCA9IG51bGw7XG5cblx0XHRcdC8vIElmIHRoZSBuZXh0IHZhbHVlIGluIHRoaXMgc3RlcCBtb3ZlcyBpbnRvIHRoZSBuZXh0IHN0ZXAsXG5cdFx0XHQvLyB0aGUgaW5jcmVtZW50IGlzIHRoZSBzdGFydCBvZiB0aGUgbmV4dCBzdGVwIC0gdGhlIGN1cnJlbnQgdmFsdWVcblx0XHRcdGlmICggaW5jcmVtZW50ICE9PSBmYWxzZSApIHtcblx0XHRcdFx0aWYgKCB2YWx1ZSArIGluY3JlbWVudCA+IG5lYXJieVN0ZXBzLnN0ZXBBZnRlci5zdGFydFZhbHVlICkge1xuXHRcdFx0XHRcdGluY3JlbWVudCA9IG5lYXJieVN0ZXBzLnN0ZXBBZnRlci5zdGFydFZhbHVlIC0gdmFsdWU7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXG5cdFx0XHQvLyBJZiB0aGUgdmFsdWUgaXMgYmV5b25kIHRoZSBzdGFydGluZyBwb2ludFxuXHRcdFx0aWYgKCB2YWx1ZSA+IG5lYXJieVN0ZXBzLnRoaXNTdGVwLnN0YXJ0VmFsdWUgKSB7XG5cdFx0XHRcdGRlY3JlbWVudCA9IG5lYXJieVN0ZXBzLnRoaXNTdGVwLnN0ZXA7XG5cdFx0XHR9XG5cblx0XHRcdGVsc2UgaWYgKCBuZWFyYnlTdGVwcy5zdGVwQmVmb3JlLnN0ZXAgPT09IGZhbHNlICkge1xuXHRcdFx0XHRkZWNyZW1lbnQgPSBmYWxzZTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gSWYgYSBoYW5kbGUgaXMgYXQgdGhlIHN0YXJ0IG9mIGEgc3RlcCwgaXQgYWx3YXlzIHN0ZXBzIGJhY2sgaW50byB0aGUgcHJldmlvdXMgc3RlcCBmaXJzdFxuXHRcdFx0ZWxzZSB7XG5cdFx0XHRcdGRlY3JlbWVudCA9IHZhbHVlIC0gbmVhcmJ5U3RlcHMuc3RlcEJlZm9yZS5oaWdoZXN0U3RlcDtcblx0XHRcdH1cblxuXG5cdFx0XHQvLyBOb3csIGlmIGF0IHRoZSBzbGlkZXIgZWRnZXMsIHRoZXJlIGlzIG5vdCBpbi9kZWNyZW1lbnRcblx0XHRcdGlmICggbG9jYXRpb24gPT09IDEwMCApIHtcblx0XHRcdFx0aW5jcmVtZW50ID0gbnVsbDtcblx0XHRcdH1cblxuXHRcdFx0ZWxzZSBpZiAoIGxvY2F0aW9uID09PSAwICkge1xuXHRcdFx0XHRkZWNyZW1lbnQgPSBudWxsO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBBcyBwZXIgIzM5MSwgdGhlIGNvbXBhcmlzb24gZm9yIHRoZSBkZWNyZW1lbnQgc3RlcCBjYW4gaGF2ZSBzb21lIHJvdW5kaW5nIGlzc3Vlcy5cblx0XHRcdHZhciBzdGVwRGVjaW1hbHMgPSBzY29wZV9TcGVjdHJ1bS5jb3VudFN0ZXBEZWNpbWFscygpO1xuXG5cdFx0XHQvLyBSb3VuZCBwZXIgIzM5MVxuXHRcdFx0aWYgKCBpbmNyZW1lbnQgIT09IG51bGwgJiYgaW5jcmVtZW50ICE9PSBmYWxzZSApIHtcblx0XHRcdFx0aW5jcmVtZW50ID0gTnVtYmVyKGluY3JlbWVudC50b0ZpeGVkKHN0ZXBEZWNpbWFscykpO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoIGRlY3JlbWVudCAhPT0gbnVsbCAmJiBkZWNyZW1lbnQgIT09IGZhbHNlICkge1xuXHRcdFx0XHRkZWNyZW1lbnQgPSBOdW1iZXIoZGVjcmVtZW50LnRvRml4ZWQoc3RlcERlY2ltYWxzKSk7XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBbZGVjcmVtZW50LCBpbmNyZW1lbnRdO1xuXHRcdH0pO1xuXHR9XG5cblx0Ly8gQXR0YWNoIGFuIGV2ZW50IHRvIHRoaXMgc2xpZGVyLCBwb3NzaWJseSBpbmNsdWRpbmcgYSBuYW1lc3BhY2Vcblx0ZnVuY3Rpb24gYmluZEV2ZW50ICggbmFtZXNwYWNlZEV2ZW50LCBjYWxsYmFjayApIHtcblx0XHRzY29wZV9FdmVudHNbbmFtZXNwYWNlZEV2ZW50XSA9IHNjb3BlX0V2ZW50c1tuYW1lc3BhY2VkRXZlbnRdIHx8IFtdO1xuXHRcdHNjb3BlX0V2ZW50c1tuYW1lc3BhY2VkRXZlbnRdLnB1c2goY2FsbGJhY2spO1xuXG5cdFx0Ly8gSWYgdGhlIGV2ZW50IGJvdW5kIGlzICd1cGRhdGUsJyBmaXJlIGl0IGltbWVkaWF0ZWx5IGZvciBhbGwgaGFuZGxlcy5cblx0XHRpZiAoIG5hbWVzcGFjZWRFdmVudC5zcGxpdCgnLicpWzBdID09PSAndXBkYXRlJyApIHtcblx0XHRcdHNjb3BlX0hhbmRsZXMuZm9yRWFjaChmdW5jdGlvbihhLCBpbmRleCl7XG5cdFx0XHRcdGZpcmVFdmVudCgndXBkYXRlJywgaW5kZXgpO1xuXHRcdFx0fSk7XG5cdFx0fVxuXHR9XG5cblx0Ly8gVW5kbyBhdHRhY2htZW50IG9mIGV2ZW50XG5cdGZ1bmN0aW9uIHJlbW92ZUV2ZW50ICggbmFtZXNwYWNlZEV2ZW50ICkge1xuXG5cdFx0dmFyIGV2ZW50ID0gbmFtZXNwYWNlZEV2ZW50ICYmIG5hbWVzcGFjZWRFdmVudC5zcGxpdCgnLicpWzBdO1xuXHRcdHZhciBuYW1lc3BhY2UgPSBldmVudCAmJiBuYW1lc3BhY2VkRXZlbnQuc3Vic3RyaW5nKGV2ZW50Lmxlbmd0aCk7XG5cblx0XHRPYmplY3Qua2V5cyhzY29wZV9FdmVudHMpLmZvckVhY2goZnVuY3Rpb24oIGJpbmQgKXtcblxuXHRcdFx0dmFyIHRFdmVudCA9IGJpbmQuc3BsaXQoJy4nKVswXSxcblx0XHRcdFx0dE5hbWVzcGFjZSA9IGJpbmQuc3Vic3RyaW5nKHRFdmVudC5sZW5ndGgpO1xuXG5cdFx0XHRpZiAoICghZXZlbnQgfHwgZXZlbnQgPT09IHRFdmVudCkgJiYgKCFuYW1lc3BhY2UgfHwgbmFtZXNwYWNlID09PSB0TmFtZXNwYWNlKSApIHtcblx0XHRcdFx0ZGVsZXRlIHNjb3BlX0V2ZW50c1tiaW5kXTtcblx0XHRcdH1cblx0XHR9KTtcblx0fVxuXG5cdC8vIFVwZGF0ZWFibGU6IG1hcmdpbiwgbGltaXQsIHBhZGRpbmcsIHN0ZXAsIHJhbmdlLCBhbmltYXRlLCBzbmFwXG5cdGZ1bmN0aW9uIHVwZGF0ZU9wdGlvbnMgKCBvcHRpb25zVG9VcGRhdGUsIGZpcmVTZXRFdmVudCApIHtcblxuXHRcdC8vIFNwZWN0cnVtIGlzIGNyZWF0ZWQgdXNpbmcgdGhlIHJhbmdlLCBzbmFwLCBkaXJlY3Rpb24gYW5kIHN0ZXAgb3B0aW9ucy5cblx0XHQvLyAnc25hcCcgYW5kICdzdGVwJyBjYW4gYmUgdXBkYXRlZC5cblx0XHQvLyBJZiAnc25hcCcgYW5kICdzdGVwJyBhcmUgbm90IHBhc3NlZCwgdGhleSBzaG91bGQgcmVtYWluIHVuY2hhbmdlZC5cblx0XHR2YXIgdiA9IHZhbHVlR2V0KCk7XG5cblx0XHR2YXIgdXBkYXRlQWJsZSA9IFsnbWFyZ2luJywgJ2xpbWl0JywgJ3BhZGRpbmcnLCAncmFuZ2UnLCAnYW5pbWF0ZScsICdzbmFwJywgJ3N0ZXAnLCAnZm9ybWF0J107XG5cblx0XHQvLyBPbmx5IGNoYW5nZSBvcHRpb25zIHRoYXQgd2UncmUgYWN0dWFsbHkgcGFzc2VkIHRvIHVwZGF0ZS5cblx0XHR1cGRhdGVBYmxlLmZvckVhY2goZnVuY3Rpb24obmFtZSl7XG5cdFx0XHRpZiAoIG9wdGlvbnNUb1VwZGF0ZVtuYW1lXSAhPT0gdW5kZWZpbmVkICkge1xuXHRcdFx0XHRvcmlnaW5hbE9wdGlvbnNbbmFtZV0gPSBvcHRpb25zVG9VcGRhdGVbbmFtZV07XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHR2YXIgbmV3T3B0aW9ucyA9IHRlc3RPcHRpb25zKG9yaWdpbmFsT3B0aW9ucyk7XG5cblx0XHQvLyBMb2FkIG5ldyBvcHRpb25zIGludG8gdGhlIHNsaWRlciBzdGF0ZVxuXHRcdHVwZGF0ZUFibGUuZm9yRWFjaChmdW5jdGlvbihuYW1lKXtcblx0XHRcdGlmICggb3B0aW9uc1RvVXBkYXRlW25hbWVdICE9PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRcdG9wdGlvbnNbbmFtZV0gPSBuZXdPcHRpb25zW25hbWVdO1xuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0c2NvcGVfU3BlY3RydW0gPSBuZXdPcHRpb25zLnNwZWN0cnVtO1xuXG5cdFx0Ly8gTGltaXQsIG1hcmdpbiBhbmQgcGFkZGluZyBkZXBlbmQgb24gdGhlIHNwZWN0cnVtIGJ1dCBhcmUgc3RvcmVkIG91dHNpZGUgb2YgaXQuICgjNjc3KVxuXHRcdG9wdGlvbnMubWFyZ2luID0gbmV3T3B0aW9ucy5tYXJnaW47XG5cdFx0b3B0aW9ucy5saW1pdCA9IG5ld09wdGlvbnMubGltaXQ7XG5cdFx0b3B0aW9ucy5wYWRkaW5nID0gbmV3T3B0aW9ucy5wYWRkaW5nO1xuXG5cdFx0Ly8gVXBkYXRlIHBpcHMsIHJlbW92ZXMgZXhpc3RpbmcuXG5cdFx0aWYgKCBvcHRpb25zLnBpcHMgKSB7XG5cdFx0XHRwaXBzKG9wdGlvbnMucGlwcyk7XG5cdFx0fVxuXG5cdFx0Ly8gSW52YWxpZGF0ZSB0aGUgY3VycmVudCBwb3NpdGlvbmluZyBzbyB2YWx1ZVNldCBmb3JjZXMgYW4gdXBkYXRlLlxuXHRcdHNjb3BlX0xvY2F0aW9ucyA9IFtdO1xuXHRcdHZhbHVlU2V0KG9wdGlvbnNUb1VwZGF0ZS5zdGFydCB8fCB2LCBmaXJlU2V0RXZlbnQpO1xuXHR9XG5cblx0Ly8gVGhyb3cgYW4gZXJyb3IgaWYgdGhlIHNsaWRlciB3YXMgYWxyZWFkeSBpbml0aWFsaXplZC5cblx0aWYgKCBzY29wZV9UYXJnZXQubm9VaVNsaWRlciApIHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoXCJub1VpU2xpZGVyIChcIiArIFZFUlNJT04gKyBcIik6IFNsaWRlciB3YXMgYWxyZWFkeSBpbml0aWFsaXplZC5cIik7XG5cdH1cblxuXHQvLyBDcmVhdGUgdGhlIGJhc2UgZWxlbWVudCwgaW5pdGlhbGlzZSBIVE1MIGFuZCBzZXQgY2xhc3Nlcy5cblx0Ly8gQWRkIGhhbmRsZXMgYW5kIGNvbm5lY3QgZWxlbWVudHMuXG5cdGFkZFNsaWRlcihzY29wZV9UYXJnZXQpO1xuXHRhZGRFbGVtZW50cyhvcHRpb25zLmNvbm5lY3QsIHNjb3BlX0Jhc2UpO1xuXG5cdHNjb3BlX1NlbGYgPSB7XG5cdFx0ZGVzdHJveTogZGVzdHJveSxcblx0XHRzdGVwczogZ2V0Q3VycmVudFN0ZXAsXG5cdFx0b246IGJpbmRFdmVudCxcblx0XHRvZmY6IHJlbW92ZUV2ZW50LFxuXHRcdGdldDogdmFsdWVHZXQsXG5cdFx0c2V0OiB2YWx1ZVNldCxcblx0XHRyZXNldDogdmFsdWVSZXNldCxcblx0XHQvLyBFeHBvc2VkIGZvciB1bml0IHRlc3RpbmcsIGRvbid0IHVzZSB0aGlzIGluIHlvdXIgYXBwbGljYXRpb24uXG5cdFx0X19tb3ZlSGFuZGxlczogZnVuY3Rpb24oYSwgYiwgYykgeyBtb3ZlSGFuZGxlcyhhLCBiLCBzY29wZV9Mb2NhdGlvbnMsIGMpOyB9LFxuXHRcdG9wdGlvbnM6IG9yaWdpbmFsT3B0aW9ucywgLy8gSXNzdWUgIzYwMCwgIzY3OFxuXHRcdHVwZGF0ZU9wdGlvbnM6IHVwZGF0ZU9wdGlvbnMsXG5cdFx0dGFyZ2V0OiBzY29wZV9UYXJnZXQsIC8vIElzc3VlICM1OTdcblx0XHRyZW1vdmVQaXBzOiByZW1vdmVQaXBzLFxuXHRcdHBpcHM6IHBpcHMgLy8gSXNzdWUgIzU5NFxuXHR9O1xuXG5cdC8vIEF0dGFjaCB1c2VyIGV2ZW50cy5cblx0YmluZFNsaWRlckV2ZW50cyhvcHRpb25zLmV2ZW50cyk7XG5cblx0Ly8gVXNlIHRoZSBwdWJsaWMgdmFsdWUgbWV0aG9kIHRvIHNldCB0aGUgc3RhcnQgdmFsdWVzLlxuXHR2YWx1ZVNldChvcHRpb25zLnN0YXJ0KTtcblxuXHRpZiAoIG9wdGlvbnMucGlwcyApIHtcblx0XHRwaXBzKG9wdGlvbnMucGlwcyk7XG5cdH1cblxuXHRpZiAoIG9wdGlvbnMudG9vbHRpcHMgKSB7XG5cdFx0dG9vbHRpcHMoKTtcblx0fVxuXG5cdGFyaWEoKTtcblxuXHRyZXR1cm4gc2NvcGVfU2VsZjtcblxufVxuXG5cblx0Ly8gUnVuIHRoZSBzdGFuZGFyZCBpbml0aWFsaXplclxuXHRmdW5jdGlvbiBpbml0aWFsaXplICggdGFyZ2V0LCBvcmlnaW5hbE9wdGlvbnMgKSB7XG5cblx0XHRpZiAoICF0YXJnZXQgfHwgIXRhcmdldC5ub2RlTmFtZSApIHtcblx0XHRcdHRocm93IG5ldyBFcnJvcihcIm5vVWlTbGlkZXIgKFwiICsgVkVSU0lPTiArIFwiKTogY3JlYXRlIHJlcXVpcmVzIGEgc2luZ2xlIGVsZW1lbnQsIGdvdDogXCIgKyB0YXJnZXQpO1xuXHRcdH1cblxuXHRcdC8vIFRlc3QgdGhlIG9wdGlvbnMgYW5kIGNyZWF0ZSB0aGUgc2xpZGVyIGVudmlyb25tZW50O1xuXHRcdHZhciBvcHRpb25zID0gdGVzdE9wdGlvbnMoIG9yaWdpbmFsT3B0aW9ucywgdGFyZ2V0ICk7XG5cdFx0dmFyIGFwaSA9IGNsb3N1cmUoIHRhcmdldCwgb3B0aW9ucywgb3JpZ2luYWxPcHRpb25zICk7XG5cblx0XHR0YXJnZXQubm9VaVNsaWRlciA9IGFwaTtcblxuXHRcdHJldHVybiBhcGk7XG5cdH1cblxuXHQvLyBVc2UgYW4gb2JqZWN0IGluc3RlYWQgb2YgYSBmdW5jdGlvbiBmb3IgZnV0dXJlIGV4cGFuc2liaWxpdHk7XG5cdHJldHVybiB7XG5cdFx0dmVyc2lvbjogVkVSU0lPTixcblx0XHRjcmVhdGU6IGluaXRpYWxpemVcblx0fTtcblxufSkpOyIsIi8qKlxuICogQGZpbGVvdmVydmlld1xuICogLSBVc2luZyB0aGUgJ1FSQ29kZSBmb3IgSmF2YXNjcmlwdCBsaWJyYXJ5J1xuICogLSBGaXhlZCBkYXRhc2V0IG9mICdRUkNvZGUgZm9yIEphdmFzY3JpcHQgbGlicmFyeScgZm9yIHN1cHBvcnQgZnVsbC1zcGVjLlxuICogLSB0aGlzIGxpYnJhcnkgaGFzIG5vIGRlcGVuZGVuY2llcy5cbiAqIFxuICogQGF1dGhvciBkYXZpZHNoaW1qc1xuICogQHNlZSA8YSBocmVmPVwiaHR0cDovL3d3dy5kLXByb2plY3QuY29tL1wiIHRhcmdldD1cIl9ibGFua1wiPmh0dHA6Ly93d3cuZC1wcm9qZWN0LmNvbS88L2E+XG4gKiBAc2VlIDxhIGhyZWY9XCJodHRwOi8vamVyb21lZXRpZW5uZS5naXRodWIuY29tL2pxdWVyeS1xcmNvZGUvXCIgdGFyZ2V0PVwiX2JsYW5rXCI+aHR0cDovL2plcm9tZWV0aWVubmUuZ2l0aHViLmNvbS9qcXVlcnktcXJjb2RlLzwvYT5cbiAqL1xudmFyIFFSQ29kZTtcblxuKGZ1bmN0aW9uICgpIHtcblx0Ly8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0Ly8gUVJDb2RlIGZvciBKYXZhU2NyaXB0XG5cdC8vXG5cdC8vIENvcHlyaWdodCAoYykgMjAwOSBLYXp1aGlrbyBBcmFzZVxuXHQvL1xuXHQvLyBVUkw6IGh0dHA6Ly93d3cuZC1wcm9qZWN0LmNvbS9cblx0Ly9cblx0Ly8gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlOlxuXHQvLyAgIGh0dHA6Ly93d3cub3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvbWl0LWxpY2Vuc2UucGhwXG5cdC8vXG5cdC8vIFRoZSB3b3JkIFwiUVIgQ29kZVwiIGlzIHJlZ2lzdGVyZWQgdHJhZGVtYXJrIG9mIFxuXHQvLyBERU5TTyBXQVZFIElOQ09SUE9SQVRFRFxuXHQvLyAgIGh0dHA6Ly93d3cuZGVuc28td2F2ZS5jb20vcXJjb2RlL2ZhcXBhdGVudC1lLmh0bWxcblx0Ly9cblx0Ly8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0ZnVuY3Rpb24gUVI4Yml0Qnl0ZShkYXRhKSB7XG5cdFx0dGhpcy5tb2RlID0gUVJNb2RlLk1PREVfOEJJVF9CWVRFO1xuXHRcdHRoaXMuZGF0YSA9IGRhdGE7XG5cdFx0dGhpcy5wYXJzZWREYXRhID0gW107XG5cblx0XHQvLyBBZGRlZCB0byBzdXBwb3J0IFVURi04IENoYXJhY3RlcnNcblx0XHRmb3IgKHZhciBpID0gMCwgbCA9IHRoaXMuZGF0YS5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0XHRcdHZhciBieXRlQXJyYXkgPSBbXTtcblx0XHRcdHZhciBjb2RlID0gdGhpcy5kYXRhLmNoYXJDb2RlQXQoaSk7XG5cblx0XHRcdGlmIChjb2RlID4gMHgxMDAwMCkge1xuXHRcdFx0XHRieXRlQXJyYXlbMF0gPSAweEYwIHwgKChjb2RlICYgMHgxQzAwMDApID4+PiAxOCk7XG5cdFx0XHRcdGJ5dGVBcnJheVsxXSA9IDB4ODAgfCAoKGNvZGUgJiAweDNGMDAwKSA+Pj4gMTIpO1xuXHRcdFx0XHRieXRlQXJyYXlbMl0gPSAweDgwIHwgKChjb2RlICYgMHhGQzApID4+PiA2KTtcblx0XHRcdFx0Ynl0ZUFycmF5WzNdID0gMHg4MCB8IChjb2RlICYgMHgzRik7XG5cdFx0XHR9IGVsc2UgaWYgKGNvZGUgPiAweDgwMCkge1xuXHRcdFx0XHRieXRlQXJyYXlbMF0gPSAweEUwIHwgKChjb2RlICYgMHhGMDAwKSA+Pj4gMTIpO1xuXHRcdFx0XHRieXRlQXJyYXlbMV0gPSAweDgwIHwgKChjb2RlICYgMHhGQzApID4+PiA2KTtcblx0XHRcdFx0Ynl0ZUFycmF5WzJdID0gMHg4MCB8IChjb2RlICYgMHgzRik7XG5cdFx0XHR9IGVsc2UgaWYgKGNvZGUgPiAweDgwKSB7XG5cdFx0XHRcdGJ5dGVBcnJheVswXSA9IDB4QzAgfCAoKGNvZGUgJiAweDdDMCkgPj4+IDYpO1xuXHRcdFx0XHRieXRlQXJyYXlbMV0gPSAweDgwIHwgKGNvZGUgJiAweDNGKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGJ5dGVBcnJheVswXSA9IGNvZGU7XG5cdFx0XHR9XG5cblx0XHRcdHRoaXMucGFyc2VkRGF0YS5wdXNoKGJ5dGVBcnJheSk7XG5cdFx0fVxuXG5cdFx0dGhpcy5wYXJzZWREYXRhID0gQXJyYXkucHJvdG90eXBlLmNvbmNhdC5hcHBseShbXSwgdGhpcy5wYXJzZWREYXRhKTtcblxuXHRcdGlmICh0aGlzLnBhcnNlZERhdGEubGVuZ3RoICE9IHRoaXMuZGF0YS5sZW5ndGgpIHtcblx0XHRcdHRoaXMucGFyc2VkRGF0YS51bnNoaWZ0KDE5MSk7XG5cdFx0XHR0aGlzLnBhcnNlZERhdGEudW5zaGlmdCgxODcpO1xuXHRcdFx0dGhpcy5wYXJzZWREYXRhLnVuc2hpZnQoMjM5KTtcblx0XHR9XG5cdH1cblxuXHRRUjhiaXRCeXRlLnByb3RvdHlwZSA9IHtcblx0XHRnZXRMZW5ndGg6IGZ1bmN0aW9uIChidWZmZXIpIHtcblx0XHRcdHJldHVybiB0aGlzLnBhcnNlZERhdGEubGVuZ3RoO1xuXHRcdH0sXG5cdFx0d3JpdGU6IGZ1bmN0aW9uIChidWZmZXIpIHtcblx0XHRcdGZvciAodmFyIGkgPSAwLCBsID0gdGhpcy5wYXJzZWREYXRhLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHRcdFx0XHRidWZmZXIucHV0KHRoaXMucGFyc2VkRGF0YVtpXSwgOCk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9O1xuXG5cdGZ1bmN0aW9uIFFSQ29kZU1vZGVsKHR5cGVOdW1iZXIsIGVycm9yQ29ycmVjdExldmVsKSB7XG5cdFx0dGhpcy50eXBlTnVtYmVyID0gdHlwZU51bWJlcjtcblx0XHR0aGlzLmVycm9yQ29ycmVjdExldmVsID0gZXJyb3JDb3JyZWN0TGV2ZWw7XG5cdFx0dGhpcy5tb2R1bGVzID0gbnVsbDtcblx0XHR0aGlzLm1vZHVsZUNvdW50ID0gMDtcblx0XHR0aGlzLmRhdGFDYWNoZSA9IG51bGw7XG5cdFx0dGhpcy5kYXRhTGlzdCA9IFtdO1xuXHR9XG5cblx0UVJDb2RlTW9kZWwucHJvdG90eXBlPXthZGREYXRhOmZ1bmN0aW9uKGRhdGEpe3ZhciBuZXdEYXRhPW5ldyBRUjhiaXRCeXRlKGRhdGEpO3RoaXMuZGF0YUxpc3QucHVzaChuZXdEYXRhKTt0aGlzLmRhdGFDYWNoZT1udWxsO30saXNEYXJrOmZ1bmN0aW9uKHJvdyxjb2wpe2lmKHJvdzwwfHx0aGlzLm1vZHVsZUNvdW50PD1yb3d8fGNvbDwwfHx0aGlzLm1vZHVsZUNvdW50PD1jb2wpe3Rocm93IG5ldyBFcnJvcihyb3crXCIsXCIrY29sKTt9XG5cdHJldHVybiB0aGlzLm1vZHVsZXNbcm93XVtjb2xdO30sZ2V0TW9kdWxlQ291bnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tb2R1bGVDb3VudDt9LG1ha2U6ZnVuY3Rpb24oKXt0aGlzLm1ha2VJbXBsKGZhbHNlLHRoaXMuZ2V0QmVzdE1hc2tQYXR0ZXJuKCkpO30sbWFrZUltcGw6ZnVuY3Rpb24odGVzdCxtYXNrUGF0dGVybil7dGhpcy5tb2R1bGVDb3VudD10aGlzLnR5cGVOdW1iZXIqNCsxNzt0aGlzLm1vZHVsZXM9bmV3IEFycmF5KHRoaXMubW9kdWxlQ291bnQpO2Zvcih2YXIgcm93PTA7cm93PHRoaXMubW9kdWxlQ291bnQ7cm93Kyspe3RoaXMubW9kdWxlc1tyb3ddPW5ldyBBcnJheSh0aGlzLm1vZHVsZUNvdW50KTtmb3IodmFyIGNvbD0wO2NvbDx0aGlzLm1vZHVsZUNvdW50O2NvbCsrKXt0aGlzLm1vZHVsZXNbcm93XVtjb2xdPW51bGw7fX1cblx0dGhpcy5zZXR1cFBvc2l0aW9uUHJvYmVQYXR0ZXJuKDAsMCk7dGhpcy5zZXR1cFBvc2l0aW9uUHJvYmVQYXR0ZXJuKHRoaXMubW9kdWxlQ291bnQtNywwKTt0aGlzLnNldHVwUG9zaXRpb25Qcm9iZVBhdHRlcm4oMCx0aGlzLm1vZHVsZUNvdW50LTcpO3RoaXMuc2V0dXBQb3NpdGlvbkFkanVzdFBhdHRlcm4oKTt0aGlzLnNldHVwVGltaW5nUGF0dGVybigpO3RoaXMuc2V0dXBUeXBlSW5mbyh0ZXN0LG1hc2tQYXR0ZXJuKTtpZih0aGlzLnR5cGVOdW1iZXI+PTcpe3RoaXMuc2V0dXBUeXBlTnVtYmVyKHRlc3QpO31cblx0aWYodGhpcy5kYXRhQ2FjaGU9PW51bGwpe3RoaXMuZGF0YUNhY2hlPVFSQ29kZU1vZGVsLmNyZWF0ZURhdGEodGhpcy50eXBlTnVtYmVyLHRoaXMuZXJyb3JDb3JyZWN0TGV2ZWwsdGhpcy5kYXRhTGlzdCk7fVxuXHR0aGlzLm1hcERhdGEodGhpcy5kYXRhQ2FjaGUsbWFza1BhdHRlcm4pO30sc2V0dXBQb3NpdGlvblByb2JlUGF0dGVybjpmdW5jdGlvbihyb3csY29sKXtmb3IodmFyIHI9LTE7cjw9NztyKyspe2lmKHJvdytyPD0tMXx8dGhpcy5tb2R1bGVDb3VudDw9cm93K3IpY29udGludWU7Zm9yKHZhciBjPS0xO2M8PTc7YysrKXtpZihjb2wrYzw9LTF8fHRoaXMubW9kdWxlQ291bnQ8PWNvbCtjKWNvbnRpbnVlO2lmKCgwPD1yJiZyPD02JiYoYz09MHx8Yz09NikpfHwoMDw9YyYmYzw9NiYmKHI9PTB8fHI9PTYpKXx8KDI8PXImJnI8PTQmJjI8PWMmJmM8PTQpKXt0aGlzLm1vZHVsZXNbcm93K3JdW2NvbCtjXT10cnVlO31lbHNle3RoaXMubW9kdWxlc1tyb3crcl1bY29sK2NdPWZhbHNlO319fX0sZ2V0QmVzdE1hc2tQYXR0ZXJuOmZ1bmN0aW9uKCl7dmFyIG1pbkxvc3RQb2ludD0wO3ZhciBwYXR0ZXJuPTA7Zm9yKHZhciBpPTA7aTw4O2krKyl7dGhpcy5tYWtlSW1wbCh0cnVlLGkpO3ZhciBsb3N0UG9pbnQ9UVJVdGlsLmdldExvc3RQb2ludCh0aGlzKTtpZihpPT0wfHxtaW5Mb3N0UG9pbnQ+bG9zdFBvaW50KXttaW5Mb3N0UG9pbnQ9bG9zdFBvaW50O3BhdHRlcm49aTt9fVxuXHRyZXR1cm4gcGF0dGVybjt9LGNyZWF0ZU1vdmllQ2xpcDpmdW5jdGlvbih0YXJnZXRfbWMsaW5zdGFuY2VfbmFtZSxkZXB0aCl7dmFyIHFyX21jPXRhcmdldF9tYy5jcmVhdGVFbXB0eU1vdmllQ2xpcChpbnN0YW5jZV9uYW1lLGRlcHRoKTt2YXIgY3M9MTt0aGlzLm1ha2UoKTtmb3IodmFyIHJvdz0wO3Jvdzx0aGlzLm1vZHVsZXMubGVuZ3RoO3JvdysrKXt2YXIgeT1yb3cqY3M7Zm9yKHZhciBjb2w9MDtjb2w8dGhpcy5tb2R1bGVzW3Jvd10ubGVuZ3RoO2NvbCsrKXt2YXIgeD1jb2wqY3M7dmFyIGRhcms9dGhpcy5tb2R1bGVzW3Jvd11bY29sXTtpZihkYXJrKXtxcl9tYy5iZWdpbkZpbGwoMCwxMDApO3FyX21jLm1vdmVUbyh4LHkpO3FyX21jLmxpbmVUbyh4K2NzLHkpO3FyX21jLmxpbmVUbyh4K2NzLHkrY3MpO3FyX21jLmxpbmVUbyh4LHkrY3MpO3FyX21jLmVuZEZpbGwoKTt9fX1cblx0cmV0dXJuIHFyX21jO30sc2V0dXBUaW1pbmdQYXR0ZXJuOmZ1bmN0aW9uKCl7Zm9yKHZhciByPTg7cjx0aGlzLm1vZHVsZUNvdW50LTg7cisrKXtpZih0aGlzLm1vZHVsZXNbcl1bNl0hPW51bGwpe2NvbnRpbnVlO31cblx0dGhpcy5tb2R1bGVzW3JdWzZdPShyJTI9PTApO31cblx0Zm9yKHZhciBjPTg7Yzx0aGlzLm1vZHVsZUNvdW50LTg7YysrKXtpZih0aGlzLm1vZHVsZXNbNl1bY10hPW51bGwpe2NvbnRpbnVlO31cblx0dGhpcy5tb2R1bGVzWzZdW2NdPShjJTI9PTApO319LHNldHVwUG9zaXRpb25BZGp1c3RQYXR0ZXJuOmZ1bmN0aW9uKCl7dmFyIHBvcz1RUlV0aWwuZ2V0UGF0dGVyblBvc2l0aW9uKHRoaXMudHlwZU51bWJlcik7Zm9yKHZhciBpPTA7aTxwb3MubGVuZ3RoO2krKyl7Zm9yKHZhciBqPTA7ajxwb3MubGVuZ3RoO2orKyl7dmFyIHJvdz1wb3NbaV07dmFyIGNvbD1wb3Nbal07aWYodGhpcy5tb2R1bGVzW3Jvd11bY29sXSE9bnVsbCl7Y29udGludWU7fVxuXHRmb3IodmFyIHI9LTI7cjw9MjtyKyspe2Zvcih2YXIgYz0tMjtjPD0yO2MrKyl7aWYocj09LTJ8fHI9PTJ8fGM9PS0yfHxjPT0yfHwocj09MCYmYz09MCkpe3RoaXMubW9kdWxlc1tyb3crcl1bY29sK2NdPXRydWU7fWVsc2V7dGhpcy5tb2R1bGVzW3JvdytyXVtjb2wrY109ZmFsc2U7fX19fX19LHNldHVwVHlwZU51bWJlcjpmdW5jdGlvbih0ZXN0KXt2YXIgYml0cz1RUlV0aWwuZ2V0QkNIVHlwZU51bWJlcih0aGlzLnR5cGVOdW1iZXIpO2Zvcih2YXIgaT0wO2k8MTg7aSsrKXt2YXIgbW9kPSghdGVzdCYmKChiaXRzPj5pKSYxKT09MSk7dGhpcy5tb2R1bGVzW01hdGguZmxvb3IoaS8zKV1baSUzK3RoaXMubW9kdWxlQ291bnQtOC0zXT1tb2Q7fVxuXHRmb3IodmFyIGk9MDtpPDE4O2krKyl7dmFyIG1vZD0oIXRlc3QmJigoYml0cz4+aSkmMSk9PTEpO3RoaXMubW9kdWxlc1tpJTMrdGhpcy5tb2R1bGVDb3VudC04LTNdW01hdGguZmxvb3IoaS8zKV09bW9kO319LHNldHVwVHlwZUluZm86ZnVuY3Rpb24odGVzdCxtYXNrUGF0dGVybil7dmFyIGRhdGE9KHRoaXMuZXJyb3JDb3JyZWN0TGV2ZWw8PDMpfG1hc2tQYXR0ZXJuO3ZhciBiaXRzPVFSVXRpbC5nZXRCQ0hUeXBlSW5mbyhkYXRhKTtmb3IodmFyIGk9MDtpPDE1O2krKyl7dmFyIG1vZD0oIXRlc3QmJigoYml0cz4+aSkmMSk9PTEpO2lmKGk8Nil7dGhpcy5tb2R1bGVzW2ldWzhdPW1vZDt9ZWxzZSBpZihpPDgpe3RoaXMubW9kdWxlc1tpKzFdWzhdPW1vZDt9ZWxzZXt0aGlzLm1vZHVsZXNbdGhpcy5tb2R1bGVDb3VudC0xNStpXVs4XT1tb2Q7fX1cblx0Zm9yKHZhciBpPTA7aTwxNTtpKyspe3ZhciBtb2Q9KCF0ZXN0JiYoKGJpdHM+PmkpJjEpPT0xKTtpZihpPDgpe3RoaXMubW9kdWxlc1s4XVt0aGlzLm1vZHVsZUNvdW50LWktMV09bW9kO31lbHNlIGlmKGk8OSl7dGhpcy5tb2R1bGVzWzhdWzE1LWktMSsxXT1tb2Q7fWVsc2V7dGhpcy5tb2R1bGVzWzhdWzE1LWktMV09bW9kO319XG5cdHRoaXMubW9kdWxlc1t0aGlzLm1vZHVsZUNvdW50LThdWzhdPSghdGVzdCk7fSxtYXBEYXRhOmZ1bmN0aW9uKGRhdGEsbWFza1BhdHRlcm4pe3ZhciBpbmM9LTE7dmFyIHJvdz10aGlzLm1vZHVsZUNvdW50LTE7dmFyIGJpdEluZGV4PTc7dmFyIGJ5dGVJbmRleD0wO2Zvcih2YXIgY29sPXRoaXMubW9kdWxlQ291bnQtMTtjb2w+MDtjb2wtPTIpe2lmKGNvbD09Niljb2wtLTt3aGlsZSh0cnVlKXtmb3IodmFyIGM9MDtjPDI7YysrKXtpZih0aGlzLm1vZHVsZXNbcm93XVtjb2wtY109PW51bGwpe3ZhciBkYXJrPWZhbHNlO2lmKGJ5dGVJbmRleDxkYXRhLmxlbmd0aCl7ZGFyaz0oKChkYXRhW2J5dGVJbmRleF0+Pj5iaXRJbmRleCkmMSk9PTEpO31cblx0dmFyIG1hc2s9UVJVdGlsLmdldE1hc2sobWFza1BhdHRlcm4scm93LGNvbC1jKTtpZihtYXNrKXtkYXJrPSFkYXJrO31cblx0dGhpcy5tb2R1bGVzW3Jvd11bY29sLWNdPWRhcms7Yml0SW5kZXgtLTtpZihiaXRJbmRleD09LTEpe2J5dGVJbmRleCsrO2JpdEluZGV4PTc7fX19XG5cdHJvdys9aW5jO2lmKHJvdzwwfHx0aGlzLm1vZHVsZUNvdW50PD1yb3cpe3Jvdy09aW5jO2luYz0taW5jO2JyZWFrO319fX19O1FSQ29kZU1vZGVsLlBBRDA9MHhFQztRUkNvZGVNb2RlbC5QQUQxPTB4MTE7UVJDb2RlTW9kZWwuY3JlYXRlRGF0YT1mdW5jdGlvbih0eXBlTnVtYmVyLGVycm9yQ29ycmVjdExldmVsLGRhdGFMaXN0KXt2YXIgcnNCbG9ja3M9UVJSU0Jsb2NrLmdldFJTQmxvY2tzKHR5cGVOdW1iZXIsZXJyb3JDb3JyZWN0TGV2ZWwpO3ZhciBidWZmZXI9bmV3IFFSQml0QnVmZmVyKCk7Zm9yKHZhciBpPTA7aTxkYXRhTGlzdC5sZW5ndGg7aSsrKXt2YXIgZGF0YT1kYXRhTGlzdFtpXTtidWZmZXIucHV0KGRhdGEubW9kZSw0KTtidWZmZXIucHV0KGRhdGEuZ2V0TGVuZ3RoKCksUVJVdGlsLmdldExlbmd0aEluQml0cyhkYXRhLm1vZGUsdHlwZU51bWJlcikpO2RhdGEud3JpdGUoYnVmZmVyKTt9XG5cdHZhciB0b3RhbERhdGFDb3VudD0wO2Zvcih2YXIgaT0wO2k8cnNCbG9ja3MubGVuZ3RoO2krKyl7dG90YWxEYXRhQ291bnQrPXJzQmxvY2tzW2ldLmRhdGFDb3VudDt9XG5cdGlmKGJ1ZmZlci5nZXRMZW5ndGhJbkJpdHMoKT50b3RhbERhdGFDb3VudCo4KXt0aHJvdyBuZXcgRXJyb3IoXCJjb2RlIGxlbmd0aCBvdmVyZmxvdy4gKFwiXG5cdCtidWZmZXIuZ2V0TGVuZ3RoSW5CaXRzKClcblx0K1wiPlwiXG5cdCt0b3RhbERhdGFDb3VudCo4XG5cdCtcIilcIik7fVxuXHRpZihidWZmZXIuZ2V0TGVuZ3RoSW5CaXRzKCkrNDw9dG90YWxEYXRhQ291bnQqOCl7YnVmZmVyLnB1dCgwLDQpO31cblx0d2hpbGUoYnVmZmVyLmdldExlbmd0aEluQml0cygpJTghPTApe2J1ZmZlci5wdXRCaXQoZmFsc2UpO31cblx0d2hpbGUodHJ1ZSl7aWYoYnVmZmVyLmdldExlbmd0aEluQml0cygpPj10b3RhbERhdGFDb3VudCo4KXticmVhazt9XG5cdGJ1ZmZlci5wdXQoUVJDb2RlTW9kZWwuUEFEMCw4KTtpZihidWZmZXIuZ2V0TGVuZ3RoSW5CaXRzKCk+PXRvdGFsRGF0YUNvdW50Kjgpe2JyZWFrO31cblx0YnVmZmVyLnB1dChRUkNvZGVNb2RlbC5QQUQxLDgpO31cblx0cmV0dXJuIFFSQ29kZU1vZGVsLmNyZWF0ZUJ5dGVzKGJ1ZmZlcixyc0Jsb2Nrcyk7fTtRUkNvZGVNb2RlbC5jcmVhdGVCeXRlcz1mdW5jdGlvbihidWZmZXIscnNCbG9ja3Mpe3ZhciBvZmZzZXQ9MDt2YXIgbWF4RGNDb3VudD0wO3ZhciBtYXhFY0NvdW50PTA7dmFyIGRjZGF0YT1uZXcgQXJyYXkocnNCbG9ja3MubGVuZ3RoKTt2YXIgZWNkYXRhPW5ldyBBcnJheShyc0Jsb2Nrcy5sZW5ndGgpO2Zvcih2YXIgcj0wO3I8cnNCbG9ja3MubGVuZ3RoO3IrKyl7dmFyIGRjQ291bnQ9cnNCbG9ja3Nbcl0uZGF0YUNvdW50O3ZhciBlY0NvdW50PXJzQmxvY2tzW3JdLnRvdGFsQ291bnQtZGNDb3VudDttYXhEY0NvdW50PU1hdGgubWF4KG1heERjQ291bnQsZGNDb3VudCk7bWF4RWNDb3VudD1NYXRoLm1heChtYXhFY0NvdW50LGVjQ291bnQpO2RjZGF0YVtyXT1uZXcgQXJyYXkoZGNDb3VudCk7Zm9yKHZhciBpPTA7aTxkY2RhdGFbcl0ubGVuZ3RoO2krKyl7ZGNkYXRhW3JdW2ldPTB4ZmYmYnVmZmVyLmJ1ZmZlcltpK29mZnNldF07fVxuXHRvZmZzZXQrPWRjQ291bnQ7dmFyIHJzUG9seT1RUlV0aWwuZ2V0RXJyb3JDb3JyZWN0UG9seW5vbWlhbChlY0NvdW50KTt2YXIgcmF3UG9seT1uZXcgUVJQb2x5bm9taWFsKGRjZGF0YVtyXSxyc1BvbHkuZ2V0TGVuZ3RoKCktMSk7dmFyIG1vZFBvbHk9cmF3UG9seS5tb2QocnNQb2x5KTtlY2RhdGFbcl09bmV3IEFycmF5KHJzUG9seS5nZXRMZW5ndGgoKS0xKTtmb3IodmFyIGk9MDtpPGVjZGF0YVtyXS5sZW5ndGg7aSsrKXt2YXIgbW9kSW5kZXg9aSttb2RQb2x5LmdldExlbmd0aCgpLWVjZGF0YVtyXS5sZW5ndGg7ZWNkYXRhW3JdW2ldPShtb2RJbmRleD49MCk/bW9kUG9seS5nZXQobW9kSW5kZXgpOjA7fX1cblx0dmFyIHRvdGFsQ29kZUNvdW50PTA7Zm9yKHZhciBpPTA7aTxyc0Jsb2Nrcy5sZW5ndGg7aSsrKXt0b3RhbENvZGVDb3VudCs9cnNCbG9ja3NbaV0udG90YWxDb3VudDt9XG5cdHZhciBkYXRhPW5ldyBBcnJheSh0b3RhbENvZGVDb3VudCk7dmFyIGluZGV4PTA7Zm9yKHZhciBpPTA7aTxtYXhEY0NvdW50O2krKyl7Zm9yKHZhciByPTA7cjxyc0Jsb2Nrcy5sZW5ndGg7cisrKXtpZihpPGRjZGF0YVtyXS5sZW5ndGgpe2RhdGFbaW5kZXgrK109ZGNkYXRhW3JdW2ldO319fVxuXHRmb3IodmFyIGk9MDtpPG1heEVjQ291bnQ7aSsrKXtmb3IodmFyIHI9MDtyPHJzQmxvY2tzLmxlbmd0aDtyKyspe2lmKGk8ZWNkYXRhW3JdLmxlbmd0aCl7ZGF0YVtpbmRleCsrXT1lY2RhdGFbcl1baV07fX19XG5cdHJldHVybiBkYXRhO307dmFyIFFSTW9kZT17TU9ERV9OVU1CRVI6MTw8MCxNT0RFX0FMUEhBX05VTToxPDwxLE1PREVfOEJJVF9CWVRFOjE8PDIsTU9ERV9LQU5KSToxPDwzfTt2YXIgUVJFcnJvckNvcnJlY3RMZXZlbD17TDoxLE06MCxROjMsSDoyfTt2YXIgUVJNYXNrUGF0dGVybj17UEFUVEVSTjAwMDowLFBBVFRFUk4wMDE6MSxQQVRURVJOMDEwOjIsUEFUVEVSTjAxMTozLFBBVFRFUk4xMDA6NCxQQVRURVJOMTAxOjUsUEFUVEVSTjExMDo2LFBBVFRFUk4xMTE6N307dmFyIFFSVXRpbD17UEFUVEVSTl9QT1NJVElPTl9UQUJMRTpbW10sWzYsMThdLFs2LDIyXSxbNiwyNl0sWzYsMzBdLFs2LDM0XSxbNiwyMiwzOF0sWzYsMjQsNDJdLFs2LDI2LDQ2XSxbNiwyOCw1MF0sWzYsMzAsNTRdLFs2LDMyLDU4XSxbNiwzNCw2Ml0sWzYsMjYsNDYsNjZdLFs2LDI2LDQ4LDcwXSxbNiwyNiw1MCw3NF0sWzYsMzAsNTQsNzhdLFs2LDMwLDU2LDgyXSxbNiwzMCw1OCw4Nl0sWzYsMzQsNjIsOTBdLFs2LDI4LDUwLDcyLDk0XSxbNiwyNiw1MCw3NCw5OF0sWzYsMzAsNTQsNzgsMTAyXSxbNiwyOCw1NCw4MCwxMDZdLFs2LDMyLDU4LDg0LDExMF0sWzYsMzAsNTgsODYsMTE0XSxbNiwzNCw2Miw5MCwxMThdLFs2LDI2LDUwLDc0LDk4LDEyMl0sWzYsMzAsNTQsNzgsMTAyLDEyNl0sWzYsMjYsNTIsNzgsMTA0LDEzMF0sWzYsMzAsNTYsODIsMTA4LDEzNF0sWzYsMzQsNjAsODYsMTEyLDEzOF0sWzYsMzAsNTgsODYsMTE0LDE0Ml0sWzYsMzQsNjIsOTAsMTE4LDE0Nl0sWzYsMzAsNTQsNzgsMTAyLDEyNiwxNTBdLFs2LDI0LDUwLDc2LDEwMiwxMjgsMTU0XSxbNiwyOCw1NCw4MCwxMDYsMTMyLDE1OF0sWzYsMzIsNTgsODQsMTEwLDEzNiwxNjJdLFs2LDI2LDU0LDgyLDExMCwxMzgsMTY2XSxbNiwzMCw1OCw4NiwxMTQsMTQyLDE3MF1dLEcxNTooMTw8MTApfCgxPDw4KXwoMTw8NSl8KDE8PDQpfCgxPDwyKXwoMTw8MSl8KDE8PDApLEcxODooMTw8MTIpfCgxPDwxMSl8KDE8PDEwKXwoMTw8OSl8KDE8PDgpfCgxPDw1KXwoMTw8Mil8KDE8PDApLEcxNV9NQVNLOigxPDwxNCl8KDE8PDEyKXwoMTw8MTApfCgxPDw0KXwoMTw8MSksZ2V0QkNIVHlwZUluZm86ZnVuY3Rpb24oZGF0YSl7dmFyIGQ9ZGF0YTw8MTA7d2hpbGUoUVJVdGlsLmdldEJDSERpZ2l0KGQpLVFSVXRpbC5nZXRCQ0hEaWdpdChRUlV0aWwuRzE1KT49MCl7ZF49KFFSVXRpbC5HMTU8PChRUlV0aWwuZ2V0QkNIRGlnaXQoZCktUVJVdGlsLmdldEJDSERpZ2l0KFFSVXRpbC5HMTUpKSk7fVxuXHRyZXR1cm4oKGRhdGE8PDEwKXxkKV5RUlV0aWwuRzE1X01BU0s7fSxnZXRCQ0hUeXBlTnVtYmVyOmZ1bmN0aW9uKGRhdGEpe3ZhciBkPWRhdGE8PDEyO3doaWxlKFFSVXRpbC5nZXRCQ0hEaWdpdChkKS1RUlV0aWwuZ2V0QkNIRGlnaXQoUVJVdGlsLkcxOCk+PTApe2RePShRUlV0aWwuRzE4PDwoUVJVdGlsLmdldEJDSERpZ2l0KGQpLVFSVXRpbC5nZXRCQ0hEaWdpdChRUlV0aWwuRzE4KSkpO31cblx0cmV0dXJuKGRhdGE8PDEyKXxkO30sZ2V0QkNIRGlnaXQ6ZnVuY3Rpb24oZGF0YSl7dmFyIGRpZ2l0PTA7d2hpbGUoZGF0YSE9MCl7ZGlnaXQrKztkYXRhPj4+PTE7fVxuXHRyZXR1cm4gZGlnaXQ7fSxnZXRQYXR0ZXJuUG9zaXRpb246ZnVuY3Rpb24odHlwZU51bWJlcil7cmV0dXJuIFFSVXRpbC5QQVRURVJOX1BPU0lUSU9OX1RBQkxFW3R5cGVOdW1iZXItMV07fSxnZXRNYXNrOmZ1bmN0aW9uKG1hc2tQYXR0ZXJuLGksail7c3dpdGNoKG1hc2tQYXR0ZXJuKXtjYXNlIFFSTWFza1BhdHRlcm4uUEFUVEVSTjAwMDpyZXR1cm4oaStqKSUyPT0wO2Nhc2UgUVJNYXNrUGF0dGVybi5QQVRURVJOMDAxOnJldHVybiBpJTI9PTA7Y2FzZSBRUk1hc2tQYXR0ZXJuLlBBVFRFUk4wMTA6cmV0dXJuIGolMz09MDtjYXNlIFFSTWFza1BhdHRlcm4uUEFUVEVSTjAxMTpyZXR1cm4oaStqKSUzPT0wO2Nhc2UgUVJNYXNrUGF0dGVybi5QQVRURVJOMTAwOnJldHVybihNYXRoLmZsb29yKGkvMikrTWF0aC5mbG9vcihqLzMpKSUyPT0wO2Nhc2UgUVJNYXNrUGF0dGVybi5QQVRURVJOMTAxOnJldHVybihpKmopJTIrKGkqaiklMz09MDtjYXNlIFFSTWFza1BhdHRlcm4uUEFUVEVSTjExMDpyZXR1cm4oKGkqaiklMisoaSpqKSUzKSUyPT0wO2Nhc2UgUVJNYXNrUGF0dGVybi5QQVRURVJOMTExOnJldHVybigoaSpqKSUzKyhpK2opJTIpJTI9PTA7ZGVmYXVsdDp0aHJvdyBuZXcgRXJyb3IoXCJiYWQgbWFza1BhdHRlcm46XCIrbWFza1BhdHRlcm4pO319LGdldEVycm9yQ29ycmVjdFBvbHlub21pYWw6ZnVuY3Rpb24oZXJyb3JDb3JyZWN0TGVuZ3RoKXt2YXIgYT1uZXcgUVJQb2x5bm9taWFsKFsxXSwwKTtmb3IodmFyIGk9MDtpPGVycm9yQ29ycmVjdExlbmd0aDtpKyspe2E9YS5tdWx0aXBseShuZXcgUVJQb2x5bm9taWFsKFsxLFFSTWF0aC5nZXhwKGkpXSwwKSk7fVxuXHRyZXR1cm4gYTt9LGdldExlbmd0aEluQml0czpmdW5jdGlvbihtb2RlLHR5cGUpe2lmKDE8PXR5cGUmJnR5cGU8MTApe3N3aXRjaChtb2RlKXtjYXNlIFFSTW9kZS5NT0RFX05VTUJFUjpyZXR1cm4gMTA7Y2FzZSBRUk1vZGUuTU9ERV9BTFBIQV9OVU06cmV0dXJuIDk7Y2FzZSBRUk1vZGUuTU9ERV84QklUX0JZVEU6cmV0dXJuIDg7Y2FzZSBRUk1vZGUuTU9ERV9LQU5KSTpyZXR1cm4gODtkZWZhdWx0OnRocm93IG5ldyBFcnJvcihcIm1vZGU6XCIrbW9kZSk7fX1lbHNlIGlmKHR5cGU8Mjcpe3N3aXRjaChtb2RlKXtjYXNlIFFSTW9kZS5NT0RFX05VTUJFUjpyZXR1cm4gMTI7Y2FzZSBRUk1vZGUuTU9ERV9BTFBIQV9OVU06cmV0dXJuIDExO2Nhc2UgUVJNb2RlLk1PREVfOEJJVF9CWVRFOnJldHVybiAxNjtjYXNlIFFSTW9kZS5NT0RFX0tBTkpJOnJldHVybiAxMDtkZWZhdWx0OnRocm93IG5ldyBFcnJvcihcIm1vZGU6XCIrbW9kZSk7fX1lbHNlIGlmKHR5cGU8NDEpe3N3aXRjaChtb2RlKXtjYXNlIFFSTW9kZS5NT0RFX05VTUJFUjpyZXR1cm4gMTQ7Y2FzZSBRUk1vZGUuTU9ERV9BTFBIQV9OVU06cmV0dXJuIDEzO2Nhc2UgUVJNb2RlLk1PREVfOEJJVF9CWVRFOnJldHVybiAxNjtjYXNlIFFSTW9kZS5NT0RFX0tBTkpJOnJldHVybiAxMjtkZWZhdWx0OnRocm93IG5ldyBFcnJvcihcIm1vZGU6XCIrbW9kZSk7fX1lbHNle3Rocm93IG5ldyBFcnJvcihcInR5cGU6XCIrdHlwZSk7fX0sZ2V0TG9zdFBvaW50OmZ1bmN0aW9uKHFyQ29kZSl7dmFyIG1vZHVsZUNvdW50PXFyQ29kZS5nZXRNb2R1bGVDb3VudCgpO3ZhciBsb3N0UG9pbnQ9MDtmb3IodmFyIHJvdz0wO3Jvdzxtb2R1bGVDb3VudDtyb3crKyl7Zm9yKHZhciBjb2w9MDtjb2w8bW9kdWxlQ291bnQ7Y29sKyspe3ZhciBzYW1lQ291bnQ9MDt2YXIgZGFyaz1xckNvZGUuaXNEYXJrKHJvdyxjb2wpO2Zvcih2YXIgcj0tMTtyPD0xO3IrKyl7aWYocm93K3I8MHx8bW9kdWxlQ291bnQ8PXJvdytyKXtjb250aW51ZTt9XG5cdGZvcih2YXIgYz0tMTtjPD0xO2MrKyl7aWYoY29sK2M8MHx8bW9kdWxlQ291bnQ8PWNvbCtjKXtjb250aW51ZTt9XG5cdGlmKHI9PTAmJmM9PTApe2NvbnRpbnVlO31cblx0aWYoZGFyaz09cXJDb2RlLmlzRGFyayhyb3crcixjb2wrYykpe3NhbWVDb3VudCsrO319fVxuXHRpZihzYW1lQ291bnQ+NSl7bG9zdFBvaW50Kz0oMytzYW1lQ291bnQtNSk7fX19XG5cdGZvcih2YXIgcm93PTA7cm93PG1vZHVsZUNvdW50LTE7cm93Kyspe2Zvcih2YXIgY29sPTA7Y29sPG1vZHVsZUNvdW50LTE7Y29sKyspe3ZhciBjb3VudD0wO2lmKHFyQ29kZS5pc0Rhcmsocm93LGNvbCkpY291bnQrKztpZihxckNvZGUuaXNEYXJrKHJvdysxLGNvbCkpY291bnQrKztpZihxckNvZGUuaXNEYXJrKHJvdyxjb2wrMSkpY291bnQrKztpZihxckNvZGUuaXNEYXJrKHJvdysxLGNvbCsxKSljb3VudCsrO2lmKGNvdW50PT0wfHxjb3VudD09NCl7bG9zdFBvaW50Kz0zO319fVxuXHRmb3IodmFyIHJvdz0wO3Jvdzxtb2R1bGVDb3VudDtyb3crKyl7Zm9yKHZhciBjb2w9MDtjb2w8bW9kdWxlQ291bnQtNjtjb2wrKyl7aWYocXJDb2RlLmlzRGFyayhyb3csY29sKSYmIXFyQ29kZS5pc0Rhcmsocm93LGNvbCsxKSYmcXJDb2RlLmlzRGFyayhyb3csY29sKzIpJiZxckNvZGUuaXNEYXJrKHJvdyxjb2wrMykmJnFyQ29kZS5pc0Rhcmsocm93LGNvbCs0KSYmIXFyQ29kZS5pc0Rhcmsocm93LGNvbCs1KSYmcXJDb2RlLmlzRGFyayhyb3csY29sKzYpKXtsb3N0UG9pbnQrPTQwO319fVxuXHRmb3IodmFyIGNvbD0wO2NvbDxtb2R1bGVDb3VudDtjb2wrKyl7Zm9yKHZhciByb3c9MDtyb3c8bW9kdWxlQ291bnQtNjtyb3crKyl7aWYocXJDb2RlLmlzRGFyayhyb3csY29sKSYmIXFyQ29kZS5pc0Rhcmsocm93KzEsY29sKSYmcXJDb2RlLmlzRGFyayhyb3crMixjb2wpJiZxckNvZGUuaXNEYXJrKHJvdyszLGNvbCkmJnFyQ29kZS5pc0Rhcmsocm93KzQsY29sKSYmIXFyQ29kZS5pc0Rhcmsocm93KzUsY29sKSYmcXJDb2RlLmlzRGFyayhyb3crNixjb2wpKXtsb3N0UG9pbnQrPTQwO319fVxuXHR2YXIgZGFya0NvdW50PTA7Zm9yKHZhciBjb2w9MDtjb2w8bW9kdWxlQ291bnQ7Y29sKyspe2Zvcih2YXIgcm93PTA7cm93PG1vZHVsZUNvdW50O3JvdysrKXtpZihxckNvZGUuaXNEYXJrKHJvdyxjb2wpKXtkYXJrQ291bnQrKzt9fX1cblx0dmFyIHJhdGlvPU1hdGguYWJzKDEwMCpkYXJrQ291bnQvbW9kdWxlQ291bnQvbW9kdWxlQ291bnQtNTApLzU7bG9zdFBvaW50Kz1yYXRpbyoxMDtyZXR1cm4gbG9zdFBvaW50O319O3ZhciBRUk1hdGg9e2dsb2c6ZnVuY3Rpb24obil7aWYobjwxKXt0aHJvdyBuZXcgRXJyb3IoXCJnbG9nKFwiK24rXCIpXCIpO31cblx0cmV0dXJuIFFSTWF0aC5MT0dfVEFCTEVbbl07fSxnZXhwOmZ1bmN0aW9uKG4pe3doaWxlKG48MCl7bis9MjU1O31cblx0d2hpbGUobj49MjU2KXtuLT0yNTU7fVxuXHRyZXR1cm4gUVJNYXRoLkVYUF9UQUJMRVtuXTt9LEVYUF9UQUJMRTpuZXcgQXJyYXkoMjU2KSxMT0dfVEFCTEU6bmV3IEFycmF5KDI1Nil9O2Zvcih2YXIgaT0wO2k8ODtpKyspe1FSTWF0aC5FWFBfVEFCTEVbaV09MTw8aTt9XG5cdGZvcih2YXIgaT04O2k8MjU2O2krKyl7UVJNYXRoLkVYUF9UQUJMRVtpXT1RUk1hdGguRVhQX1RBQkxFW2ktNF1eUVJNYXRoLkVYUF9UQUJMRVtpLTVdXlFSTWF0aC5FWFBfVEFCTEVbaS02XV5RUk1hdGguRVhQX1RBQkxFW2ktOF07fVxuXHRmb3IodmFyIGk9MDtpPDI1NTtpKyspe1FSTWF0aC5MT0dfVEFCTEVbUVJNYXRoLkVYUF9UQUJMRVtpXV09aTt9XG5cdGZ1bmN0aW9uIFFSUG9seW5vbWlhbChudW0sc2hpZnQpe2lmKG51bS5sZW5ndGg9PXVuZGVmaW5lZCl7dGhyb3cgbmV3IEVycm9yKG51bS5sZW5ndGgrXCIvXCIrc2hpZnQpO31cblx0dmFyIG9mZnNldD0wO3doaWxlKG9mZnNldDxudW0ubGVuZ3RoJiZudW1bb2Zmc2V0XT09MCl7b2Zmc2V0Kys7fVxuXHR0aGlzLm51bT1uZXcgQXJyYXkobnVtLmxlbmd0aC1vZmZzZXQrc2hpZnQpO2Zvcih2YXIgaT0wO2k8bnVtLmxlbmd0aC1vZmZzZXQ7aSsrKXt0aGlzLm51bVtpXT1udW1baStvZmZzZXRdO319XG5cdFFSUG9seW5vbWlhbC5wcm90b3R5cGU9e2dldDpmdW5jdGlvbihpbmRleCl7cmV0dXJuIHRoaXMubnVtW2luZGV4XTt9LGdldExlbmd0aDpmdW5jdGlvbigpe3JldHVybiB0aGlzLm51bS5sZW5ndGg7fSxtdWx0aXBseTpmdW5jdGlvbihlKXt2YXIgbnVtPW5ldyBBcnJheSh0aGlzLmdldExlbmd0aCgpK2UuZ2V0TGVuZ3RoKCktMSk7Zm9yKHZhciBpPTA7aTx0aGlzLmdldExlbmd0aCgpO2krKyl7Zm9yKHZhciBqPTA7ajxlLmdldExlbmd0aCgpO2orKyl7bnVtW2kral1ePVFSTWF0aC5nZXhwKFFSTWF0aC5nbG9nKHRoaXMuZ2V0KGkpKStRUk1hdGguZ2xvZyhlLmdldChqKSkpO319XG5cdHJldHVybiBuZXcgUVJQb2x5bm9taWFsKG51bSwwKTt9LG1vZDpmdW5jdGlvbihlKXtpZih0aGlzLmdldExlbmd0aCgpLWUuZ2V0TGVuZ3RoKCk8MCl7cmV0dXJuIHRoaXM7fVxuXHR2YXIgcmF0aW89UVJNYXRoLmdsb2codGhpcy5nZXQoMCkpLVFSTWF0aC5nbG9nKGUuZ2V0KDApKTt2YXIgbnVtPW5ldyBBcnJheSh0aGlzLmdldExlbmd0aCgpKTtmb3IodmFyIGk9MDtpPHRoaXMuZ2V0TGVuZ3RoKCk7aSsrKXtudW1baV09dGhpcy5nZXQoaSk7fVxuXHRmb3IodmFyIGk9MDtpPGUuZ2V0TGVuZ3RoKCk7aSsrKXtudW1baV1ePVFSTWF0aC5nZXhwKFFSTWF0aC5nbG9nKGUuZ2V0KGkpKStyYXRpbyk7fVxuXHRyZXR1cm4gbmV3IFFSUG9seW5vbWlhbChudW0sMCkubW9kKGUpO319O2Z1bmN0aW9uIFFSUlNCbG9jayh0b3RhbENvdW50LGRhdGFDb3VudCl7dGhpcy50b3RhbENvdW50PXRvdGFsQ291bnQ7dGhpcy5kYXRhQ291bnQ9ZGF0YUNvdW50O31cblx0UVJSU0Jsb2NrLlJTX0JMT0NLX1RBQkxFPVtbMSwyNiwxOV0sWzEsMjYsMTZdLFsxLDI2LDEzXSxbMSwyNiw5XSxbMSw0NCwzNF0sWzEsNDQsMjhdLFsxLDQ0LDIyXSxbMSw0NCwxNl0sWzEsNzAsNTVdLFsxLDcwLDQ0XSxbMiwzNSwxN10sWzIsMzUsMTNdLFsxLDEwMCw4MF0sWzIsNTAsMzJdLFsyLDUwLDI0XSxbNCwyNSw5XSxbMSwxMzQsMTA4XSxbMiw2Nyw0M10sWzIsMzMsMTUsMiwzNCwxNl0sWzIsMzMsMTEsMiwzNCwxMl0sWzIsODYsNjhdLFs0LDQzLDI3XSxbNCw0MywxOV0sWzQsNDMsMTVdLFsyLDk4LDc4XSxbNCw0OSwzMV0sWzIsMzIsMTQsNCwzMywxNV0sWzQsMzksMTMsMSw0MCwxNF0sWzIsMTIxLDk3XSxbMiw2MCwzOCwyLDYxLDM5XSxbNCw0MCwxOCwyLDQxLDE5XSxbNCw0MCwxNCwyLDQxLDE1XSxbMiwxNDYsMTE2XSxbMyw1OCwzNiwyLDU5LDM3XSxbNCwzNiwxNiw0LDM3LDE3XSxbNCwzNiwxMiw0LDM3LDEzXSxbMiw4Niw2OCwyLDg3LDY5XSxbNCw2OSw0MywxLDcwLDQ0XSxbNiw0MywxOSwyLDQ0LDIwXSxbNiw0MywxNSwyLDQ0LDE2XSxbNCwxMDEsODFdLFsxLDgwLDUwLDQsODEsNTFdLFs0LDUwLDIyLDQsNTEsMjNdLFszLDM2LDEyLDgsMzcsMTNdLFsyLDExNiw5MiwyLDExNyw5M10sWzYsNTgsMzYsMiw1OSwzN10sWzQsNDYsMjAsNiw0NywyMV0sWzcsNDIsMTQsNCw0MywxNV0sWzQsMTMzLDEwN10sWzgsNTksMzcsMSw2MCwzOF0sWzgsNDQsMjAsNCw0NSwyMV0sWzEyLDMzLDExLDQsMzQsMTJdLFszLDE0NSwxMTUsMSwxNDYsMTE2XSxbNCw2NCw0MCw1LDY1LDQxXSxbMTEsMzYsMTYsNSwzNywxN10sWzExLDM2LDEyLDUsMzcsMTNdLFs1LDEwOSw4NywxLDExMCw4OF0sWzUsNjUsNDEsNSw2Niw0Ml0sWzUsNTQsMjQsNyw1NSwyNV0sWzExLDM2LDEyXSxbNSwxMjIsOTgsMSwxMjMsOTldLFs3LDczLDQ1LDMsNzQsNDZdLFsxNSw0MywxOSwyLDQ0LDIwXSxbMyw0NSwxNSwxMyw0NiwxNl0sWzEsMTM1LDEwNyw1LDEzNiwxMDhdLFsxMCw3NCw0NiwxLDc1LDQ3XSxbMSw1MCwyMiwxNSw1MSwyM10sWzIsNDIsMTQsMTcsNDMsMTVdLFs1LDE1MCwxMjAsMSwxNTEsMTIxXSxbOSw2OSw0Myw0LDcwLDQ0XSxbMTcsNTAsMjIsMSw1MSwyM10sWzIsNDIsMTQsMTksNDMsMTVdLFszLDE0MSwxMTMsNCwxNDIsMTE0XSxbMyw3MCw0NCwxMSw3MSw0NV0sWzE3LDQ3LDIxLDQsNDgsMjJdLFs5LDM5LDEzLDE2LDQwLDE0XSxbMywxMzUsMTA3LDUsMTM2LDEwOF0sWzMsNjcsNDEsMTMsNjgsNDJdLFsxNSw1NCwyNCw1LDU1LDI1XSxbMTUsNDMsMTUsMTAsNDQsMTZdLFs0LDE0NCwxMTYsNCwxNDUsMTE3XSxbMTcsNjgsNDJdLFsxNyw1MCwyMiw2LDUxLDIzXSxbMTksNDYsMTYsNiw0NywxN10sWzIsMTM5LDExMSw3LDE0MCwxMTJdLFsxNyw3NCw0Nl0sWzcsNTQsMjQsMTYsNTUsMjVdLFszNCwzNywxM10sWzQsMTUxLDEyMSw1LDE1MiwxMjJdLFs0LDc1LDQ3LDE0LDc2LDQ4XSxbMTEsNTQsMjQsMTQsNTUsMjVdLFsxNiw0NSwxNSwxNCw0NiwxNl0sWzYsMTQ3LDExNyw0LDE0OCwxMThdLFs2LDczLDQ1LDE0LDc0LDQ2XSxbMTEsNTQsMjQsMTYsNTUsMjVdLFszMCw0NiwxNiwyLDQ3LDE3XSxbOCwxMzIsMTA2LDQsMTMzLDEwN10sWzgsNzUsNDcsMTMsNzYsNDhdLFs3LDU0LDI0LDIyLDU1LDI1XSxbMjIsNDUsMTUsMTMsNDYsMTZdLFsxMCwxNDIsMTE0LDIsMTQzLDExNV0sWzE5LDc0LDQ2LDQsNzUsNDddLFsyOCw1MCwyMiw2LDUxLDIzXSxbMzMsNDYsMTYsNCw0NywxN10sWzgsMTUyLDEyMiw0LDE1MywxMjNdLFsyMiw3Myw0NSwzLDc0LDQ2XSxbOCw1MywyMywyNiw1NCwyNF0sWzEyLDQ1LDE1LDI4LDQ2LDE2XSxbMywxNDcsMTE3LDEwLDE0OCwxMThdLFszLDczLDQ1LDIzLDc0LDQ2XSxbNCw1NCwyNCwzMSw1NSwyNV0sWzExLDQ1LDE1LDMxLDQ2LDE2XSxbNywxNDYsMTE2LDcsMTQ3LDExN10sWzIxLDczLDQ1LDcsNzQsNDZdLFsxLDUzLDIzLDM3LDU0LDI0XSxbMTksNDUsMTUsMjYsNDYsMTZdLFs1LDE0NSwxMTUsMTAsMTQ2LDExNl0sWzE5LDc1LDQ3LDEwLDc2LDQ4XSxbMTUsNTQsMjQsMjUsNTUsMjVdLFsyMyw0NSwxNSwyNSw0NiwxNl0sWzEzLDE0NSwxMTUsMywxNDYsMTE2XSxbMiw3NCw0NiwyOSw3NSw0N10sWzQyLDU0LDI0LDEsNTUsMjVdLFsyMyw0NSwxNSwyOCw0NiwxNl0sWzE3LDE0NSwxMTVdLFsxMCw3NCw0NiwyMyw3NSw0N10sWzEwLDU0LDI0LDM1LDU1LDI1XSxbMTksNDUsMTUsMzUsNDYsMTZdLFsxNywxNDUsMTE1LDEsMTQ2LDExNl0sWzE0LDc0LDQ2LDIxLDc1LDQ3XSxbMjksNTQsMjQsMTksNTUsMjVdLFsxMSw0NSwxNSw0Niw0NiwxNl0sWzEzLDE0NSwxMTUsNiwxNDYsMTE2XSxbMTQsNzQsNDYsMjMsNzUsNDddLFs0NCw1NCwyNCw3LDU1LDI1XSxbNTksNDYsMTYsMSw0NywxN10sWzEyLDE1MSwxMjEsNywxNTIsMTIyXSxbMTIsNzUsNDcsMjYsNzYsNDhdLFszOSw1NCwyNCwxNCw1NSwyNV0sWzIyLDQ1LDE1LDQxLDQ2LDE2XSxbNiwxNTEsMTIxLDE0LDE1MiwxMjJdLFs2LDc1LDQ3LDM0LDc2LDQ4XSxbNDYsNTQsMjQsMTAsNTUsMjVdLFsyLDQ1LDE1LDY0LDQ2LDE2XSxbMTcsMTUyLDEyMiw0LDE1MywxMjNdLFsyOSw3NCw0NiwxNCw3NSw0N10sWzQ5LDU0LDI0LDEwLDU1LDI1XSxbMjQsNDUsMTUsNDYsNDYsMTZdLFs0LDE1MiwxMjIsMTgsMTUzLDEyM10sWzEzLDc0LDQ2LDMyLDc1LDQ3XSxbNDgsNTQsMjQsMTQsNTUsMjVdLFs0Miw0NSwxNSwzMiw0NiwxNl0sWzIwLDE0NywxMTcsNCwxNDgsMTE4XSxbNDAsNzUsNDcsNyw3Niw0OF0sWzQzLDU0LDI0LDIyLDU1LDI1XSxbMTAsNDUsMTUsNjcsNDYsMTZdLFsxOSwxNDgsMTE4LDYsMTQ5LDExOV0sWzE4LDc1LDQ3LDMxLDc2LDQ4XSxbMzQsNTQsMjQsMzQsNTUsMjVdLFsyMCw0NSwxNSw2MSw0NiwxNl1dO1FSUlNCbG9jay5nZXRSU0Jsb2Nrcz1mdW5jdGlvbih0eXBlTnVtYmVyLGVycm9yQ29ycmVjdExldmVsKXt2YXIgcnNCbG9jaz1RUlJTQmxvY2suZ2V0UnNCbG9ja1RhYmxlKHR5cGVOdW1iZXIsZXJyb3JDb3JyZWN0TGV2ZWwpO2lmKHJzQmxvY2s9PXVuZGVmaW5lZCl7dGhyb3cgbmV3IEVycm9yKFwiYmFkIHJzIGJsb2NrIEAgdHlwZU51bWJlcjpcIit0eXBlTnVtYmVyK1wiL2Vycm9yQ29ycmVjdExldmVsOlwiK2Vycm9yQ29ycmVjdExldmVsKTt9XG5cdHZhciBsZW5ndGg9cnNCbG9jay5sZW5ndGgvMzt2YXIgbGlzdD1bXTtmb3IodmFyIGk9MDtpPGxlbmd0aDtpKyspe3ZhciBjb3VudD1yc0Jsb2NrW2kqMyswXTt2YXIgdG90YWxDb3VudD1yc0Jsb2NrW2kqMysxXTt2YXIgZGF0YUNvdW50PXJzQmxvY2tbaSozKzJdO2Zvcih2YXIgaj0wO2o8Y291bnQ7aisrKXtsaXN0LnB1c2gobmV3IFFSUlNCbG9jayh0b3RhbENvdW50LGRhdGFDb3VudCkpO319XG5cdHJldHVybiBsaXN0O307UVJSU0Jsb2NrLmdldFJzQmxvY2tUYWJsZT1mdW5jdGlvbih0eXBlTnVtYmVyLGVycm9yQ29ycmVjdExldmVsKXtzd2l0Y2goZXJyb3JDb3JyZWN0TGV2ZWwpe2Nhc2UgUVJFcnJvckNvcnJlY3RMZXZlbC5MOnJldHVybiBRUlJTQmxvY2suUlNfQkxPQ0tfVEFCTEVbKHR5cGVOdW1iZXItMSkqNCswXTtjYXNlIFFSRXJyb3JDb3JyZWN0TGV2ZWwuTTpyZXR1cm4gUVJSU0Jsb2NrLlJTX0JMT0NLX1RBQkxFWyh0eXBlTnVtYmVyLTEpKjQrMV07Y2FzZSBRUkVycm9yQ29ycmVjdExldmVsLlE6cmV0dXJuIFFSUlNCbG9jay5SU19CTE9DS19UQUJMRVsodHlwZU51bWJlci0xKSo0KzJdO2Nhc2UgUVJFcnJvckNvcnJlY3RMZXZlbC5IOnJldHVybiBRUlJTQmxvY2suUlNfQkxPQ0tfVEFCTEVbKHR5cGVOdW1iZXItMSkqNCszXTtkZWZhdWx0OnJldHVybiB1bmRlZmluZWQ7fX07ZnVuY3Rpb24gUVJCaXRCdWZmZXIoKXt0aGlzLmJ1ZmZlcj1bXTt0aGlzLmxlbmd0aD0wO31cblx0UVJCaXRCdWZmZXIucHJvdG90eXBlPXtnZXQ6ZnVuY3Rpb24oaW5kZXgpe3ZhciBidWZJbmRleD1NYXRoLmZsb29yKGluZGV4LzgpO3JldHVybigodGhpcy5idWZmZXJbYnVmSW5kZXhdPj4+KDctaW5kZXglOCkpJjEpPT0xO30scHV0OmZ1bmN0aW9uKG51bSxsZW5ndGgpe2Zvcih2YXIgaT0wO2k8bGVuZ3RoO2krKyl7dGhpcy5wdXRCaXQoKChudW0+Pj4obGVuZ3RoLWktMSkpJjEpPT0xKTt9fSxnZXRMZW5ndGhJbkJpdHM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5sZW5ndGg7fSxwdXRCaXQ6ZnVuY3Rpb24oYml0KXt2YXIgYnVmSW5kZXg9TWF0aC5mbG9vcih0aGlzLmxlbmd0aC84KTtpZih0aGlzLmJ1ZmZlci5sZW5ndGg8PWJ1ZkluZGV4KXt0aGlzLmJ1ZmZlci5wdXNoKDApO31cblx0aWYoYml0KXt0aGlzLmJ1ZmZlcltidWZJbmRleF18PSgweDgwPj4+KHRoaXMubGVuZ3RoJTgpKTt9XG5cdHRoaXMubGVuZ3RoKys7fX07dmFyIFFSQ29kZUxpbWl0TGVuZ3RoPVtbMTcsMTQsMTEsN10sWzMyLDI2LDIwLDE0XSxbNTMsNDIsMzIsMjRdLFs3OCw2Miw0NiwzNF0sWzEwNiw4NCw2MCw0NF0sWzEzNCwxMDYsNzQsNThdLFsxNTQsMTIyLDg2LDY0XSxbMTkyLDE1MiwxMDgsODRdLFsyMzAsMTgwLDEzMCw5OF0sWzI3MSwyMTMsMTUxLDExOV0sWzMyMSwyNTEsMTc3LDEzN10sWzM2NywyODcsMjAzLDE1NV0sWzQyNSwzMzEsMjQxLDE3N10sWzQ1OCwzNjIsMjU4LDE5NF0sWzUyMCw0MTIsMjkyLDIyMF0sWzU4Niw0NTAsMzIyLDI1MF0sWzY0NCw1MDQsMzY0LDI4MF0sWzcxOCw1NjAsMzk0LDMxMF0sWzc5Miw2MjQsNDQyLDMzOF0sWzg1OCw2NjYsNDgyLDM4Ml0sWzkyOSw3MTEsNTA5LDQwM10sWzEwMDMsNzc5LDU2NSw0MzldLFsxMDkxLDg1Nyw2MTEsNDYxXSxbMTE3MSw5MTEsNjYxLDUxMV0sWzEyNzMsOTk3LDcxNSw1MzVdLFsxMzY3LDEwNTksNzUxLDU5M10sWzE0NjUsMTEyNSw4MDUsNjI1XSxbMTUyOCwxMTkwLDg2OCw2NThdLFsxNjI4LDEyNjQsOTA4LDY5OF0sWzE3MzIsMTM3MCw5ODIsNzQyXSxbMTg0MCwxNDUyLDEwMzAsNzkwXSxbMTk1MiwxNTM4LDExMTIsODQyXSxbMjA2OCwxNjI4LDExNjgsODk4XSxbMjE4OCwxNzIyLDEyMjgsOTU4XSxbMjMwMywxODA5LDEyODMsOTgzXSxbMjQzMSwxOTExLDEzNTEsMTA1MV0sWzI1NjMsMTk4OSwxNDIzLDEwOTNdLFsyNjk5LDIwOTksMTQ5OSwxMTM5XSxbMjgwOSwyMjEzLDE1NzksMTIxOV0sWzI5NTMsMjMzMSwxNjYzLDEyNzNdXTtcblx0XG5cdGZ1bmN0aW9uIF9pc1N1cHBvcnRDYW52YXMoKSB7XG5cdFx0cmV0dXJuIHR5cGVvZiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQgIT0gXCJ1bmRlZmluZWRcIjtcblx0fVxuXHRcblx0Ly8gYW5kcm9pZCAyLnggZG9lc24ndCBzdXBwb3J0IERhdGEtVVJJIHNwZWNcblx0ZnVuY3Rpb24gX2dldEFuZHJvaWQoKSB7XG5cdFx0dmFyIGFuZHJvaWQgPSBmYWxzZTtcblx0XHR2YXIgc0FnZW50ID0gbmF2aWdhdG9yLnVzZXJBZ2VudDtcblx0XHRcblx0XHRpZiAoL2FuZHJvaWQvaS50ZXN0KHNBZ2VudCkpIHsgLy8gYW5kcm9pZFxuXHRcdFx0YW5kcm9pZCA9IHRydWU7XG5cdFx0XHR2YXIgYU1hdCA9IHNBZ2VudC50b1N0cmluZygpLm1hdGNoKC9hbmRyb2lkIChbMC05XVxcLlswLTldKS9pKTtcblx0XHRcdFxuXHRcdFx0aWYgKGFNYXQgJiYgYU1hdFsxXSkge1xuXHRcdFx0XHRhbmRyb2lkID0gcGFyc2VGbG9hdChhTWF0WzFdKTtcblx0XHRcdH1cblx0XHR9XG5cdFx0XG5cdFx0cmV0dXJuIGFuZHJvaWQ7XG5cdH1cblx0XG5cdHZhciBzdmdEcmF3ZXIgPSAoZnVuY3Rpb24oKSB7XG5cblx0XHR2YXIgRHJhd2luZyA9IGZ1bmN0aW9uIChlbCwgaHRPcHRpb24pIHtcblx0XHRcdHRoaXMuX2VsID0gZWw7XG5cdFx0XHR0aGlzLl9odE9wdGlvbiA9IGh0T3B0aW9uO1xuXHRcdH07XG5cblx0XHREcmF3aW5nLnByb3RvdHlwZS5kcmF3ID0gZnVuY3Rpb24gKG9RUkNvZGUpIHtcblx0XHRcdHZhciBfaHRPcHRpb24gPSB0aGlzLl9odE9wdGlvbjtcblx0XHRcdHZhciBfZWwgPSB0aGlzLl9lbDtcblx0XHRcdHZhciBuQ291bnQgPSBvUVJDb2RlLmdldE1vZHVsZUNvdW50KCk7XG5cdFx0XHR2YXIgbldpZHRoID0gTWF0aC5mbG9vcihfaHRPcHRpb24ud2lkdGggLyBuQ291bnQpO1xuXHRcdFx0dmFyIG5IZWlnaHQgPSBNYXRoLmZsb29yKF9odE9wdGlvbi5oZWlnaHQgLyBuQ291bnQpO1xuXG5cdFx0XHR0aGlzLmNsZWFyKCk7XG5cblx0XHRcdGZ1bmN0aW9uIG1ha2VTVkcodGFnLCBhdHRycykge1xuXHRcdFx0XHR2YXIgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJywgdGFnKTtcblx0XHRcdFx0Zm9yICh2YXIgayBpbiBhdHRycylcblx0XHRcdFx0XHRpZiAoYXR0cnMuaGFzT3duUHJvcGVydHkoaykpIGVsLnNldEF0dHJpYnV0ZShrLCBhdHRyc1trXSk7XG5cdFx0XHRcdHJldHVybiBlbDtcblx0XHRcdH1cblxuXHRcdFx0dmFyIHN2ZyA9IG1ha2VTVkcoXCJzdmdcIiAsIHsndmlld0JveCc6ICcwIDAgJyArIFN0cmluZyhuQ291bnQpICsgXCIgXCIgKyBTdHJpbmcobkNvdW50KSwgJ3dpZHRoJzogJzEwMCUnLCAnaGVpZ2h0JzogJzEwMCUnLCAnZmlsbCc6IF9odE9wdGlvbi5jb2xvckxpZ2h0fSk7XG5cdFx0XHRzdmcuc2V0QXR0cmlidXRlTlMoXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3htbG5zL1wiLCBcInhtbG5zOnhsaW5rXCIsIFwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGlua1wiKTtcblx0XHRcdF9lbC5hcHBlbmRDaGlsZChzdmcpO1xuXG5cdFx0XHRzdmcuYXBwZW5kQ2hpbGQobWFrZVNWRyhcInJlY3RcIiwge1wiZmlsbFwiOiBfaHRPcHRpb24uY29sb3JMaWdodCwgXCJ3aWR0aFwiOiBcIjEwMCVcIiwgXCJoZWlnaHRcIjogXCIxMDAlXCJ9KSk7XG5cdFx0XHRzdmcuYXBwZW5kQ2hpbGQobWFrZVNWRyhcInJlY3RcIiwge1wiZmlsbFwiOiBfaHRPcHRpb24uY29sb3JEYXJrLCBcIndpZHRoXCI6IFwiMVwiLCBcImhlaWdodFwiOiBcIjFcIiwgXCJpZFwiOiBcInRlbXBsYXRlXCJ9KSk7XG5cblx0XHRcdGZvciAodmFyIHJvdyA9IDA7IHJvdyA8IG5Db3VudDsgcm93KyspIHtcblx0XHRcdFx0Zm9yICh2YXIgY29sID0gMDsgY29sIDwgbkNvdW50OyBjb2wrKykge1xuXHRcdFx0XHRcdGlmIChvUVJDb2RlLmlzRGFyayhyb3csIGNvbCkpIHtcblx0XHRcdFx0XHRcdHZhciBjaGlsZCA9IG1ha2VTVkcoXCJ1c2VcIiwge1wieFwiOiBTdHJpbmcoY29sKSwgXCJ5XCI6IFN0cmluZyhyb3cpfSk7XG5cdFx0XHRcdFx0XHRjaGlsZC5zZXRBdHRyaWJ1dGVOUyhcImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmtcIiwgXCJocmVmXCIsIFwiI3RlbXBsYXRlXCIpXG5cdFx0XHRcdFx0XHRzdmcuYXBwZW5kQ2hpbGQoY2hpbGQpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH07XG5cdFx0RHJhd2luZy5wcm90b3R5cGUuY2xlYXIgPSBmdW5jdGlvbiAoKSB7XG5cdFx0XHR3aGlsZSAodGhpcy5fZWwuaGFzQ2hpbGROb2RlcygpKVxuXHRcdFx0XHR0aGlzLl9lbC5yZW1vdmVDaGlsZCh0aGlzLl9lbC5sYXN0Q2hpbGQpO1xuXHRcdH07XG5cdFx0cmV0dXJuIERyYXdpbmc7XG5cdH0pKCk7XG5cblx0dmFyIHVzZVNWRyA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC50YWdOYW1lLnRvTG93ZXJDYXNlKCkgPT09IFwic3ZnXCI7XG5cblx0Ly8gRHJhd2luZyBpbiBET00gYnkgdXNpbmcgVGFibGUgdGFnXG5cdHZhciBEcmF3aW5nID0gdXNlU1ZHID8gc3ZnRHJhd2VyIDogIV9pc1N1cHBvcnRDYW52YXMoKSA/IChmdW5jdGlvbiAoKSB7XG5cdFx0dmFyIERyYXdpbmcgPSBmdW5jdGlvbiAoZWwsIGh0T3B0aW9uKSB7XG5cdFx0XHR0aGlzLl9lbCA9IGVsO1xuXHRcdFx0dGhpcy5faHRPcHRpb24gPSBodE9wdGlvbjtcblx0XHR9O1xuXHRcdFx0XG5cdFx0LyoqXG5cdFx0ICogRHJhdyB0aGUgUVJDb2RlXG5cdFx0ICogXG5cdFx0ICogQHBhcmFtIHtRUkNvZGV9IG9RUkNvZGVcblx0XHQgKi9cblx0XHREcmF3aW5nLnByb3RvdHlwZS5kcmF3ID0gZnVuY3Rpb24gKG9RUkNvZGUpIHtcbiAgICAgICAgICAgIHZhciBfaHRPcHRpb24gPSB0aGlzLl9odE9wdGlvbjtcbiAgICAgICAgICAgIHZhciBfZWwgPSB0aGlzLl9lbDtcblx0XHRcdHZhciBuQ291bnQgPSBvUVJDb2RlLmdldE1vZHVsZUNvdW50KCk7XG5cdFx0XHR2YXIgbldpZHRoID0gTWF0aC5mbG9vcihfaHRPcHRpb24ud2lkdGggLyBuQ291bnQpO1xuXHRcdFx0dmFyIG5IZWlnaHQgPSBNYXRoLmZsb29yKF9odE9wdGlvbi5oZWlnaHQgLyBuQ291bnQpO1xuXHRcdFx0dmFyIGFIVE1MID0gWyc8dGFibGUgc3R5bGU9XCJib3JkZXI6MDtib3JkZXItY29sbGFwc2U6Y29sbGFwc2U7XCI+J107XG5cdFx0XHRcblx0XHRcdGZvciAodmFyIHJvdyA9IDA7IHJvdyA8IG5Db3VudDsgcm93KyspIHtcblx0XHRcdFx0YUhUTUwucHVzaCgnPHRyPicpO1xuXHRcdFx0XHRcblx0XHRcdFx0Zm9yICh2YXIgY29sID0gMDsgY29sIDwgbkNvdW50OyBjb2wrKykge1xuXHRcdFx0XHRcdGFIVE1MLnB1c2goJzx0ZCBzdHlsZT1cImJvcmRlcjowO2JvcmRlci1jb2xsYXBzZTpjb2xsYXBzZTtwYWRkaW5nOjA7bWFyZ2luOjA7d2lkdGg6JyArIG5XaWR0aCArICdweDtoZWlnaHQ6JyArIG5IZWlnaHQgKyAncHg7YmFja2dyb3VuZC1jb2xvcjonICsgKG9RUkNvZGUuaXNEYXJrKHJvdywgY29sKSA/IF9odE9wdGlvbi5jb2xvckRhcmsgOiBfaHRPcHRpb24uY29sb3JMaWdodCkgKyAnO1wiPjwvdGQ+Jyk7XG5cdFx0XHRcdH1cblx0XHRcdFx0XG5cdFx0XHRcdGFIVE1MLnB1c2goJzwvdHI+Jyk7XG5cdFx0XHR9XG5cdFx0XHRcblx0XHRcdGFIVE1MLnB1c2goJzwvdGFibGU+Jyk7XG5cdFx0XHRfZWwuaW5uZXJIVE1MID0gYUhUTUwuam9pbignJyk7XG5cdFx0XHRcblx0XHRcdC8vIEZpeCB0aGUgbWFyZ2luIHZhbHVlcyBhcyByZWFsIHNpemUuXG5cdFx0XHR2YXIgZWxUYWJsZSA9IF9lbC5jaGlsZE5vZGVzWzBdO1xuXHRcdFx0dmFyIG5MZWZ0TWFyZ2luVGFibGUgPSAoX2h0T3B0aW9uLndpZHRoIC0gZWxUYWJsZS5vZmZzZXRXaWR0aCkgLyAyO1xuXHRcdFx0dmFyIG5Ub3BNYXJnaW5UYWJsZSA9IChfaHRPcHRpb24uaGVpZ2h0IC0gZWxUYWJsZS5vZmZzZXRIZWlnaHQpIC8gMjtcblx0XHRcdFxuXHRcdFx0aWYgKG5MZWZ0TWFyZ2luVGFibGUgPiAwICYmIG5Ub3BNYXJnaW5UYWJsZSA+IDApIHtcblx0XHRcdFx0ZWxUYWJsZS5zdHlsZS5tYXJnaW4gPSBuVG9wTWFyZ2luVGFibGUgKyBcInB4IFwiICsgbkxlZnRNYXJnaW5UYWJsZSArIFwicHhcIjtcdFxuXHRcdFx0fVxuXHRcdH07XG5cdFx0XG5cdFx0LyoqXG5cdFx0ICogQ2xlYXIgdGhlIFFSQ29kZVxuXHRcdCAqL1xuXHRcdERyYXdpbmcucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gKCkge1xuXHRcdFx0dGhpcy5fZWwuaW5uZXJIVE1MID0gJyc7XG5cdFx0fTtcblx0XHRcblx0XHRyZXR1cm4gRHJhd2luZztcblx0fSkoKSA6IChmdW5jdGlvbiAoKSB7IC8vIERyYXdpbmcgaW4gQ2FudmFzXG5cdFx0ZnVuY3Rpb24gX29uTWFrZUltYWdlKCkge1xuXHRcdFx0dGhpcy5fZWxJbWFnZS5zcmMgPSB0aGlzLl9lbENhbnZhcy50b0RhdGFVUkwoXCJpbWFnZS9wbmdcIik7XG5cdFx0XHR0aGlzLl9lbEltYWdlLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG5cdFx0XHR0aGlzLl9lbENhbnZhcy5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHRcdFx0XG5cdFx0fVxuXHRcdFxuXHRcdC8vIEFuZHJvaWQgMi4xIGJ1ZyB3b3JrYXJvdW5kXG5cdFx0Ly8gaHR0cDovL2NvZGUuZ29vZ2xlLmNvbS9wL2FuZHJvaWQvaXNzdWVzL2RldGFpbD9pZD01MTQxXG5cdFx0aWYgKHRoaXMuX2FuZHJvaWQgJiYgdGhpcy5fYW5kcm9pZCA8PSAyLjEpIHtcblx0ICAgIFx0dmFyIGZhY3RvciA9IDEgLyB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbztcblx0ICAgICAgICB2YXIgZHJhd0ltYWdlID0gQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELnByb3RvdHlwZS5kcmF3SW1hZ2U7IFxuXHQgICAgXHRDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQucHJvdG90eXBlLmRyYXdJbWFnZSA9IGZ1bmN0aW9uIChpbWFnZSwgc3gsIHN5LCBzdywgc2gsIGR4LCBkeSwgZHcsIGRoKSB7XG5cdCAgICBcdFx0aWYgKChcIm5vZGVOYW1lXCIgaW4gaW1hZ2UpICYmIC9pbWcvaS50ZXN0KGltYWdlLm5vZGVOYW1lKSkge1xuXHRcdCAgICAgICAgXHRmb3IgKHZhciBpID0gYXJndW1lbnRzLmxlbmd0aCAtIDE7IGkgPj0gMTsgaS0tKSB7XG5cdFx0ICAgICAgICAgICAgXHRhcmd1bWVudHNbaV0gPSBhcmd1bWVudHNbaV0gKiBmYWN0b3I7XG5cdFx0ICAgICAgICBcdH1cblx0ICAgIFx0XHR9IGVsc2UgaWYgKHR5cGVvZiBkdyA9PSBcInVuZGVmaW5lZFwiKSB7XG5cdCAgICBcdFx0XHRhcmd1bWVudHNbMV0gKj0gZmFjdG9yO1xuXHQgICAgXHRcdFx0YXJndW1lbnRzWzJdICo9IGZhY3Rvcjtcblx0ICAgIFx0XHRcdGFyZ3VtZW50c1szXSAqPSBmYWN0b3I7XG5cdCAgICBcdFx0XHRhcmd1bWVudHNbNF0gKj0gZmFjdG9yO1xuXHQgICAgXHRcdH1cblx0ICAgIFx0XHRcblx0ICAgICAgICBcdGRyYXdJbWFnZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOyBcblx0ICAgIFx0fTtcblx0XHR9XG5cdFx0XG5cdFx0LyoqXG5cdFx0ICogQ2hlY2sgd2hldGhlciB0aGUgdXNlcidzIGJyb3dzZXIgc3VwcG9ydHMgRGF0YSBVUkkgb3Igbm90XG5cdFx0ICogXG5cdFx0ICogQHByaXZhdGVcblx0XHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmU3VjY2VzcyBPY2N1cnMgaWYgaXQgc3VwcG9ydHMgRGF0YSBVUklcblx0XHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmRmFpbCBPY2N1cnMgaWYgaXQgZG9lc24ndCBzdXBwb3J0IERhdGEgVVJJXG5cdFx0ICovXG5cdFx0ZnVuY3Rpb24gX3NhZmVTZXREYXRhVVJJKGZTdWNjZXNzLCBmRmFpbCkge1xuICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICAgICAgc2VsZi5fZkZhaWwgPSBmRmFpbDtcbiAgICAgICAgICAgIHNlbGYuX2ZTdWNjZXNzID0gZlN1Y2Nlc3M7XG5cbiAgICAgICAgICAgIC8vIENoZWNrIGl0IGp1c3Qgb25jZVxuICAgICAgICAgICAgaWYgKHNlbGYuX2JTdXBwb3J0RGF0YVVSSSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHZhciBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIik7XG4gICAgICAgICAgICAgICAgdmFyIGZPbkVycm9yID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYuX2JTdXBwb3J0RGF0YVVSSSA9IGZhbHNlO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChzZWxmLl9mRmFpbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fZkZhaWwuY2FsbChzZWxmKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgdmFyIGZPblN1Y2Nlc3MgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5fYlN1cHBvcnREYXRhVVJJID0gdHJ1ZTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoc2VsZi5fZlN1Y2Nlc3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX2ZTdWNjZXNzLmNhbGwoc2VsZik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgZWwub25hYm9ydCA9IGZPbkVycm9yO1xuICAgICAgICAgICAgICAgIGVsLm9uZXJyb3IgPSBmT25FcnJvcjtcbiAgICAgICAgICAgICAgICBlbC5vbmxvYWQgPSBmT25TdWNjZXNzO1xuICAgICAgICAgICAgICAgIGVsLnNyYyA9IFwiZGF0YTppbWFnZS9naWY7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFBVUFBQUFGQ0FZQUFBQ05ieWJsQUFBQUhFbEVRVlFJMTJQNC8vOC93MzhHSUFYRElCS0UwREh4Z2xqTkJBQU85VFhMMFk0T0h3QUFBQUJKUlU1RXJrSmdnZz09XCI7IC8vIHRoZSBJbWFnZSBjb250YWlucyAxcHggZGF0YS5cbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHNlbGYuX2JTdXBwb3J0RGF0YVVSSSA9PT0gdHJ1ZSAmJiBzZWxmLl9mU3VjY2Vzcykge1xuICAgICAgICAgICAgICAgIHNlbGYuX2ZTdWNjZXNzLmNhbGwoc2VsZik7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHNlbGYuX2JTdXBwb3J0RGF0YVVSSSA9PT0gZmFsc2UgJiYgc2VsZi5fZkZhaWwpIHtcbiAgICAgICAgICAgICAgICBzZWxmLl9mRmFpbC5jYWxsKHNlbGYpO1xuICAgICAgICAgICAgfVxuXHRcdH07XG5cdFx0XG5cdFx0LyoqXG5cdFx0ICogRHJhd2luZyBRUkNvZGUgYnkgdXNpbmcgY2FudmFzXG5cdFx0ICogXG5cdFx0ICogQGNvbnN0cnVjdG9yXG5cdFx0ICogQHBhcmFtIHtIVE1MRWxlbWVudH0gZWxcblx0XHQgKiBAcGFyYW0ge09iamVjdH0gaHRPcHRpb24gUVJDb2RlIE9wdGlvbnMgXG5cdFx0ICovXG5cdFx0dmFyIERyYXdpbmcgPSBmdW5jdGlvbiAoZWwsIGh0T3B0aW9uKSB7XG4gICAgXHRcdHRoaXMuX2JJc1BhaW50ZWQgPSBmYWxzZTtcbiAgICBcdFx0dGhpcy5fYW5kcm9pZCA9IF9nZXRBbmRyb2lkKCk7XG5cdFx0XG5cdFx0XHR0aGlzLl9odE9wdGlvbiA9IGh0T3B0aW9uO1xuXHRcdFx0dGhpcy5fZWxDYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpO1xuXHRcdFx0dGhpcy5fZWxDYW52YXMud2lkdGggPSBodE9wdGlvbi53aWR0aDtcblx0XHRcdHRoaXMuX2VsQ2FudmFzLmhlaWdodCA9IGh0T3B0aW9uLmhlaWdodDtcblx0XHRcdGVsLmFwcGVuZENoaWxkKHRoaXMuX2VsQ2FudmFzKTtcblx0XHRcdHRoaXMuX2VsID0gZWw7XG5cdFx0XHR0aGlzLl9vQ29udGV4dCA9IHRoaXMuX2VsQ2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcblx0XHRcdHRoaXMuX2JJc1BhaW50ZWQgPSBmYWxzZTtcblx0XHRcdHRoaXMuX2VsSW1hZ2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW1nXCIpO1xuXHRcdFx0dGhpcy5fZWxJbWFnZS5hbHQgPSBcIlNjYW4gbWUhXCI7XG5cdFx0XHR0aGlzLl9lbEltYWdlLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcblx0XHRcdHRoaXMuX2VsLmFwcGVuZENoaWxkKHRoaXMuX2VsSW1hZ2UpO1xuXHRcdFx0dGhpcy5fYlN1cHBvcnREYXRhVVJJID0gbnVsbDtcblx0XHR9O1xuXHRcdFx0XG5cdFx0LyoqXG5cdFx0ICogRHJhdyB0aGUgUVJDb2RlXG5cdFx0ICogXG5cdFx0ICogQHBhcmFtIHtRUkNvZGV9IG9RUkNvZGUgXG5cdFx0ICovXG5cdFx0RHJhd2luZy5wcm90b3R5cGUuZHJhdyA9IGZ1bmN0aW9uIChvUVJDb2RlKSB7XG4gICAgICAgICAgICB2YXIgX2VsSW1hZ2UgPSB0aGlzLl9lbEltYWdlO1xuICAgICAgICAgICAgdmFyIF9vQ29udGV4dCA9IHRoaXMuX29Db250ZXh0O1xuICAgICAgICAgICAgdmFyIF9odE9wdGlvbiA9IHRoaXMuX2h0T3B0aW9uO1xuICAgICAgICAgICAgXG5cdFx0XHR2YXIgbkNvdW50ID0gb1FSQ29kZS5nZXRNb2R1bGVDb3VudCgpO1xuXHRcdFx0dmFyIG5XaWR0aCA9IF9odE9wdGlvbi53aWR0aCAvIG5Db3VudDtcblx0XHRcdHZhciBuSGVpZ2h0ID0gX2h0T3B0aW9uLmhlaWdodCAvIG5Db3VudDtcblx0XHRcdHZhciBuUm91bmRlZFdpZHRoID0gTWF0aC5yb3VuZChuV2lkdGgpO1xuXHRcdFx0dmFyIG5Sb3VuZGVkSGVpZ2h0ID0gTWF0aC5yb3VuZChuSGVpZ2h0KTtcblxuXHRcdFx0X2VsSW1hZ2Uuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuXHRcdFx0dGhpcy5jbGVhcigpO1xuXHRcdFx0XG5cdFx0XHRmb3IgKHZhciByb3cgPSAwOyByb3cgPCBuQ291bnQ7IHJvdysrKSB7XG5cdFx0XHRcdGZvciAodmFyIGNvbCA9IDA7IGNvbCA8IG5Db3VudDsgY29sKyspIHtcblx0XHRcdFx0XHR2YXIgYklzRGFyayA9IG9RUkNvZGUuaXNEYXJrKHJvdywgY29sKTtcblx0XHRcdFx0XHR2YXIgbkxlZnQgPSBjb2wgKiBuV2lkdGg7XG5cdFx0XHRcdFx0dmFyIG5Ub3AgPSByb3cgKiBuSGVpZ2h0O1xuXHRcdFx0XHRcdF9vQ29udGV4dC5zdHJva2VTdHlsZSA9IGJJc0RhcmsgPyBfaHRPcHRpb24uY29sb3JEYXJrIDogX2h0T3B0aW9uLmNvbG9yTGlnaHQ7XG5cdFx0XHRcdFx0X29Db250ZXh0LmxpbmVXaWR0aCA9IDE7XG5cdFx0XHRcdFx0X29Db250ZXh0LmZpbGxTdHlsZSA9IGJJc0RhcmsgPyBfaHRPcHRpb24uY29sb3JEYXJrIDogX2h0T3B0aW9uLmNvbG9yTGlnaHQ7XHRcdFx0XHRcdFxuXHRcdFx0XHRcdF9vQ29udGV4dC5maWxsUmVjdChuTGVmdCwgblRvcCwgbldpZHRoLCBuSGVpZ2h0KTtcblx0XHRcdFx0XHRcblx0XHRcdFx0XHQvLyDslYjti7Ag7JWo66as7Ja07IuxIOuwqeyngCDsspjrpqxcblx0XHRcdFx0XHRfb0NvbnRleHQuc3Ryb2tlUmVjdChcblx0XHRcdFx0XHRcdE1hdGguZmxvb3IobkxlZnQpICsgMC41LFxuXHRcdFx0XHRcdFx0TWF0aC5mbG9vcihuVG9wKSArIDAuNSxcblx0XHRcdFx0XHRcdG5Sb3VuZGVkV2lkdGgsXG5cdFx0XHRcdFx0XHRuUm91bmRlZEhlaWdodFxuXHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0X29Db250ZXh0LnN0cm9rZVJlY3QoXG5cdFx0XHRcdFx0XHRNYXRoLmNlaWwobkxlZnQpIC0gMC41LFxuXHRcdFx0XHRcdFx0TWF0aC5jZWlsKG5Ub3ApIC0gMC41LFxuXHRcdFx0XHRcdFx0blJvdW5kZWRXaWR0aCxcblx0XHRcdFx0XHRcdG5Sb3VuZGVkSGVpZ2h0XG5cdFx0XHRcdFx0KTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0XG5cdFx0XHR0aGlzLl9iSXNQYWludGVkID0gdHJ1ZTtcblx0XHR9O1xuXHRcdFx0XG5cdFx0LyoqXG5cdFx0ICogTWFrZSB0aGUgaW1hZ2UgZnJvbSBDYW52YXMgaWYgdGhlIGJyb3dzZXIgc3VwcG9ydHMgRGF0YSBVUkkuXG5cdFx0ICovXG5cdFx0RHJhd2luZy5wcm90b3R5cGUubWFrZUltYWdlID0gZnVuY3Rpb24gKCkge1xuXHRcdFx0aWYgKHRoaXMuX2JJc1BhaW50ZWQpIHtcblx0XHRcdFx0X3NhZmVTZXREYXRhVVJJLmNhbGwodGhpcywgX29uTWFrZUltYWdlKTtcblx0XHRcdH1cblx0XHR9O1xuXHRcdFx0XG5cdFx0LyoqXG5cdFx0ICogUmV0dXJuIHdoZXRoZXIgdGhlIFFSQ29kZSBpcyBwYWludGVkIG9yIG5vdFxuXHRcdCAqIFxuXHRcdCAqIEByZXR1cm4ge0Jvb2xlYW59XG5cdFx0ICovXG5cdFx0RHJhd2luZy5wcm90b3R5cGUuaXNQYWludGVkID0gZnVuY3Rpb24gKCkge1xuXHRcdFx0cmV0dXJuIHRoaXMuX2JJc1BhaW50ZWQ7XG5cdFx0fTtcblx0XHRcblx0XHQvKipcblx0XHQgKiBDbGVhciB0aGUgUVJDb2RlXG5cdFx0ICovXG5cdFx0RHJhd2luZy5wcm90b3R5cGUuY2xlYXIgPSBmdW5jdGlvbiAoKSB7XG5cdFx0XHR0aGlzLl9vQ29udGV4dC5jbGVhclJlY3QoMCwgMCwgdGhpcy5fZWxDYW52YXMud2lkdGgsIHRoaXMuX2VsQ2FudmFzLmhlaWdodCk7XG5cdFx0XHR0aGlzLl9iSXNQYWludGVkID0gZmFsc2U7XG5cdFx0fTtcblx0XHRcblx0XHQvKipcblx0XHQgKiBAcHJpdmF0ZVxuXHRcdCAqIEBwYXJhbSB7TnVtYmVyfSBuTnVtYmVyXG5cdFx0ICovXG5cdFx0RHJhd2luZy5wcm90b3R5cGUucm91bmQgPSBmdW5jdGlvbiAobk51bWJlcikge1xuXHRcdFx0aWYgKCFuTnVtYmVyKSB7XG5cdFx0XHRcdHJldHVybiBuTnVtYmVyO1xuXHRcdFx0fVxuXHRcdFx0XG5cdFx0XHRyZXR1cm4gTWF0aC5mbG9vcihuTnVtYmVyICogMTAwMCkgLyAxMDAwO1xuXHRcdH07XG5cdFx0XG5cdFx0cmV0dXJuIERyYXdpbmc7XG5cdH0pKCk7XG5cdFxuXHQvKipcblx0ICogR2V0IHRoZSB0eXBlIGJ5IHN0cmluZyBsZW5ndGhcblx0ICogXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBzVGV4dFxuXHQgKiBAcGFyYW0ge051bWJlcn0gbkNvcnJlY3RMZXZlbFxuXHQgKiBAcmV0dXJuIHtOdW1iZXJ9IHR5cGVcblx0ICovXG5cdGZ1bmN0aW9uIF9nZXRUeXBlTnVtYmVyKHNUZXh0LCBuQ29ycmVjdExldmVsKSB7XHRcdFx0XG5cdFx0dmFyIG5UeXBlID0gMTtcblx0XHR2YXIgbGVuZ3RoID0gX2dldFVURjhMZW5ndGgoc1RleHQpO1xuXHRcdFxuXHRcdGZvciAodmFyIGkgPSAwLCBsZW4gPSBRUkNvZGVMaW1pdExlbmd0aC5sZW5ndGg7IGkgPD0gbGVuOyBpKyspIHtcblx0XHRcdHZhciBuTGltaXQgPSAwO1xuXHRcdFx0XG5cdFx0XHRzd2l0Y2ggKG5Db3JyZWN0TGV2ZWwpIHtcblx0XHRcdFx0Y2FzZSBRUkVycm9yQ29ycmVjdExldmVsLkwgOlxuXHRcdFx0XHRcdG5MaW1pdCA9IFFSQ29kZUxpbWl0TGVuZ3RoW2ldWzBdO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRjYXNlIFFSRXJyb3JDb3JyZWN0TGV2ZWwuTSA6XG5cdFx0XHRcdFx0bkxpbWl0ID0gUVJDb2RlTGltaXRMZW5ndGhbaV1bMV07XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGNhc2UgUVJFcnJvckNvcnJlY3RMZXZlbC5RIDpcblx0XHRcdFx0XHRuTGltaXQgPSBRUkNvZGVMaW1pdExlbmd0aFtpXVsyXTtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0Y2FzZSBRUkVycm9yQ29ycmVjdExldmVsLkggOlxuXHRcdFx0XHRcdG5MaW1pdCA9IFFSQ29kZUxpbWl0TGVuZ3RoW2ldWzNdO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0fVxuXHRcdFx0XG5cdFx0XHRpZiAobGVuZ3RoIDw9IG5MaW1pdCkge1xuXHRcdFx0XHRicmVhaztcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdG5UeXBlKys7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdFxuXHRcdGlmIChuVHlwZSA+IFFSQ29kZUxpbWl0TGVuZ3RoLmxlbmd0aCkge1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKFwiVG9vIGxvbmcgZGF0YVwiKTtcblx0XHR9XG5cdFx0XG5cdFx0cmV0dXJuIG5UeXBlO1xuXHR9XG5cblx0ZnVuY3Rpb24gX2dldFVURjhMZW5ndGgoc1RleHQpIHtcblx0XHR2YXIgcmVwbGFjZWRUZXh0ID0gZW5jb2RlVVJJKHNUZXh0KS50b1N0cmluZygpLnJlcGxhY2UoL1xcJVswLTlhLWZBLUZdezJ9L2csICdhJyk7XG5cdFx0cmV0dXJuIHJlcGxhY2VkVGV4dC5sZW5ndGggKyAocmVwbGFjZWRUZXh0Lmxlbmd0aCAhPSBzVGV4dCA/IDMgOiAwKTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIEBjbGFzcyBRUkNvZGVcblx0ICogQGNvbnN0cnVjdG9yXG5cdCAqIEBleGFtcGxlIFxuXHQgKiBuZXcgUVJDb2RlKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidGVzdFwiKSwgXCJodHRwOi8vamluZG8uZGV2Lm5hdmVyLmNvbS9jb2xsaWVcIik7XG5cdCAqXG5cdCAqIEBleGFtcGxlXG5cdCAqIHZhciBvUVJDb2RlID0gbmV3IFFSQ29kZShcInRlc3RcIiwge1xuXHQgKiAgICB0ZXh0IDogXCJodHRwOi8vbmF2ZXIuY29tXCIsXG5cdCAqICAgIHdpZHRoIDogMTI4LFxuXHQgKiAgICBoZWlnaHQgOiAxMjhcblx0ICogfSk7XG5cdCAqIFxuXHQgKiBvUVJDb2RlLmNsZWFyKCk7IC8vIENsZWFyIHRoZSBRUkNvZGUuXG5cdCAqIG9RUkNvZGUubWFrZUNvZGUoXCJodHRwOi8vbWFwLm5hdmVyLmNvbVwiKTsgLy8gUmUtY3JlYXRlIHRoZSBRUkNvZGUuXG5cdCAqXG5cdCAqIEBwYXJhbSB7SFRNTEVsZW1lbnR8U3RyaW5nfSBlbCB0YXJnZXQgZWxlbWVudCBvciAnaWQnIGF0dHJpYnV0ZSBvZiBlbGVtZW50LlxuXHQgKiBAcGFyYW0ge09iamVjdHxTdHJpbmd9IHZPcHRpb25cblx0ICogQHBhcmFtIHtTdHJpbmd9IHZPcHRpb24udGV4dCBRUkNvZGUgbGluayBkYXRhXG5cdCAqIEBwYXJhbSB7TnVtYmVyfSBbdk9wdGlvbi53aWR0aD0yNTZdXG5cdCAqIEBwYXJhbSB7TnVtYmVyfSBbdk9wdGlvbi5oZWlnaHQ9MjU2XVxuXHQgKiBAcGFyYW0ge1N0cmluZ30gW3ZPcHRpb24uY29sb3JEYXJrPVwiIzAwMDAwMFwiXVxuXHQgKiBAcGFyYW0ge1N0cmluZ30gW3ZPcHRpb24uY29sb3JMaWdodD1cIiNmZmZmZmZcIl1cblx0ICogQHBhcmFtIHtRUkNvZGUuQ29ycmVjdExldmVsfSBbdk9wdGlvbi5jb3JyZWN0TGV2ZWw9UVJDb2RlLkNvcnJlY3RMZXZlbC5IXSBbTHxNfFF8SF0gXG5cdCAqL1xuXHRRUkNvZGUgPSBmdW5jdGlvbiAoZWwsIHZPcHRpb24pIHtcblx0XHR0aGlzLl9odE9wdGlvbiA9IHtcblx0XHRcdHdpZHRoIDogMjU2LCBcblx0XHRcdGhlaWdodCA6IDI1Nixcblx0XHRcdHR5cGVOdW1iZXIgOiA0LFxuXHRcdFx0Y29sb3JEYXJrIDogXCIjMDAwMDAwXCIsXG5cdFx0XHRjb2xvckxpZ2h0IDogXCIjZmZmZmZmXCIsXG5cdFx0XHRjb3JyZWN0TGV2ZWwgOiBRUkVycm9yQ29ycmVjdExldmVsLkhcblx0XHR9O1xuXHRcdFxuXHRcdGlmICh0eXBlb2Ygdk9wdGlvbiA9PT0gJ3N0cmluZycpIHtcblx0XHRcdHZPcHRpb25cdD0ge1xuXHRcdFx0XHR0ZXh0IDogdk9wdGlvblxuXHRcdFx0fTtcblx0XHR9XG5cdFx0XG5cdFx0Ly8gT3ZlcndyaXRlcyBvcHRpb25zXG5cdFx0aWYgKHZPcHRpb24pIHtcblx0XHRcdGZvciAodmFyIGkgaW4gdk9wdGlvbikge1xuXHRcdFx0XHR0aGlzLl9odE9wdGlvbltpXSA9IHZPcHRpb25baV07XG5cdFx0XHR9XG5cdFx0fVxuXHRcdFxuXHRcdGlmICh0eXBlb2YgZWwgPT0gXCJzdHJpbmdcIikge1xuXHRcdFx0ZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChlbCk7XG5cdFx0fVxuXG5cdFx0aWYgKHRoaXMuX2h0T3B0aW9uLnVzZVNWRykge1xuXHRcdFx0RHJhd2luZyA9IHN2Z0RyYXdlcjtcblx0XHR9XG5cdFx0XG5cdFx0dGhpcy5fYW5kcm9pZCA9IF9nZXRBbmRyb2lkKCk7XG5cdFx0dGhpcy5fZWwgPSBlbDtcblx0XHR0aGlzLl9vUVJDb2RlID0gbnVsbDtcblx0XHR0aGlzLl9vRHJhd2luZyA9IG5ldyBEcmF3aW5nKHRoaXMuX2VsLCB0aGlzLl9odE9wdGlvbik7XG5cdFx0XG5cdFx0aWYgKHRoaXMuX2h0T3B0aW9uLnRleHQpIHtcblx0XHRcdHRoaXMubWFrZUNvZGUodGhpcy5faHRPcHRpb24udGV4dCk7XHRcblx0XHR9XG5cdH07XG5cdFxuXHQvKipcblx0ICogTWFrZSB0aGUgUVJDb2RlXG5cdCAqIFxuXHQgKiBAcGFyYW0ge1N0cmluZ30gc1RleHQgbGluayBkYXRhXG5cdCAqL1xuXHRRUkNvZGUucHJvdG90eXBlLm1ha2VDb2RlID0gZnVuY3Rpb24gKHNUZXh0KSB7XG5cdFx0dGhpcy5fb1FSQ29kZSA9IG5ldyBRUkNvZGVNb2RlbChfZ2V0VHlwZU51bWJlcihzVGV4dCwgdGhpcy5faHRPcHRpb24uY29ycmVjdExldmVsKSwgdGhpcy5faHRPcHRpb24uY29ycmVjdExldmVsKTtcblx0XHR0aGlzLl9vUVJDb2RlLmFkZERhdGEoc1RleHQpO1xuXHRcdHRoaXMuX29RUkNvZGUubWFrZSgpO1xuXHRcdHRoaXMuX2VsLnRpdGxlID0gc1RleHQ7XG5cdFx0dGhpcy5fb0RyYXdpbmcuZHJhdyh0aGlzLl9vUVJDb2RlKTtcdFx0XHRcblx0XHR0aGlzLm1ha2VJbWFnZSgpO1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqIE1ha2UgdGhlIEltYWdlIGZyb20gQ2FudmFzIGVsZW1lbnRcblx0ICogLSBJdCBvY2N1cnMgYXV0b21hdGljYWxseVxuXHQgKiAtIEFuZHJvaWQgYmVsb3cgMyBkb2Vzbid0IHN1cHBvcnQgRGF0YS1VUkkgc3BlYy5cblx0ICogXG5cdCAqIEBwcml2YXRlXG5cdCAqL1xuXHRRUkNvZGUucHJvdG90eXBlLm1ha2VJbWFnZSA9IGZ1bmN0aW9uICgpIHtcblx0XHRpZiAodHlwZW9mIHRoaXMuX29EcmF3aW5nLm1ha2VJbWFnZSA9PSBcImZ1bmN0aW9uXCIgJiYgKCF0aGlzLl9hbmRyb2lkIHx8IHRoaXMuX2FuZHJvaWQgPj0gMykpIHtcblx0XHRcdHRoaXMuX29EcmF3aW5nLm1ha2VJbWFnZSgpO1xuXHRcdH1cblx0fTtcblx0XG5cdC8qKlxuXHQgKiBDbGVhciB0aGUgUVJDb2RlXG5cdCAqL1xuXHRRUkNvZGUucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gKCkge1xuXHRcdHRoaXMuX29EcmF3aW5nLmNsZWFyKCk7XG5cdH07XG5cdFxuXHQvKipcblx0ICogQG5hbWUgUVJDb2RlLkNvcnJlY3RMZXZlbFxuXHQgKi9cblx0UVJDb2RlLkNvcnJlY3RMZXZlbCA9IFFSRXJyb3JDb3JyZWN0TGV2ZWw7XG59KSgpOyIsIi8qKlxuICogVGlueUFuaW1hdGVcbiAqICB2ZXJzaW9uIDAuMy4wXG4gKlxuICogU291cmNlOiAgaHR0cHM6Ly9naXRodWIuY29tL2JyYW5uZW1hbi9UaW55QW5pbWF0ZVxuICogQXV0aG9yOiAgQnJhbiB2YW4gZGVyIE1lZXIgPGJyYW5tb3ZpY0BnbWFpbC5jb20+IChodHRwOi8vYnJhbi5uYW1lLylcbiAqIExpY2Vuc2U6IE1JVFxuICpcbiAqIEZ1bmN0aW9uczpcbiAqICBUaW55QW5pbWF0ZS5hbmltYXRlKGZyb20sIHRvLCBkdXJhdGlvbiwgdXBkYXRlLCBlYXNpbmcsIGRvbmUpXG4gKiAgVGlueUFuaW1hdGUuYW5pbWF0ZUNTUyhlbGVtZW50LCBwcm9wZXJ0eSwgdW5pdCwgZnJvbSwgdG8sIGR1cmF0aW9uLCBlYXNpbmcsIGRvbmUpXG4gKiAgVGlueUFuaW1hdGUuY2FuY2VsKGFuaW1hdGlvbilcbiAqXG4gKiBQYXJhbWV0ZXJzOlxuICogIGVsZW1lbnQgICBIVE1MRWxlbWVudCAgICAgICAgQSBkb20gbm9kZVxuICogIHByb3BlcnR5ICBzdHJpbmcgICAgICAgICAgICAgUHJvcGVydHkgbmFtZSwgYXMgYXZhaWxhYmxlIGluIGVsZW1lbnQuc3R5bGUsIGkuZS4gJ2JvcmRlclJhZGl1cycsIG5vdCAnYm9yZGVyLXJhZGl1cydcbiAqICB1bml0ICAgICAgc3RyaW5nICAgICAgICAgICAgIFByb3BlcnR5IHVuaXQsIGxpa2UgJ3B4J1xuICogIGZyb20gICAgICBpbnQgICAgICAgICAgICAgICAgUHJvcGVydHkgdmFsdWUgdG8gYW5pbWF0ZSBmcm9tXG4gKiAgdG8gICAgICAgIGludCAgICAgICAgICAgICAgICBQcm9wZXJ0eSB2YWx1ZSB0byBhbmltYXRlIHRvXG4gKiAgZHVyYXRpb24gIGludCAgICAgICAgICAgICAgICBEdXJhdGlvbiBpbiBtaWxsaXNlY29uZHNcbiAqICB1cGRhdGUgICAgZnVuY3Rpb24gICAgICAgICAgIEZ1bmN0aW9uIHRvIGltcGxlbWVudCB1cGRhdGluZyB0aGUgRE9NLCBnZXQncyBjYWxsZWQgd2l0aCBhIHZhbHVlIGJldHdlZW4gYGZyb21gIGFuZCBgdG9gXG4gKiAgZWFzaW5nICAgIHN0cmluZyB8IGZ1bmN0aW9uICBPcHRpb25hbDogQSBzdHJpbmcgd2hlbiB0aGUgZWFzaW5nIGZ1bmN0aW9uIGlzIGF2YWlsYWJsZSBpbiBUaW55QW5pbWF0ZS5lYXNpbmdzLFxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yIGEgZnVuY3Rpb24gd2l0aCB0aGUgc2lnbmF0dXJlOiBmdW5jdGlvbih0LCBiLCBjLCBkKSB7Li4ufVxuICogIGRvbmUgICAgICBmdW5jdGlvbiAgICAgICAgICAgT3B0aW9uYWw6IFRvIGJlIGV4ZWN1dGVkIHdoZW4gdGhlIGFuaW1hdGlvbiBoYXMgY29tcGxldGVkLlxuICpcbiAqIFJldHVybnM6XG4gKiAgYW5pbWF0aW9uIG9iamVjdCAgICAgICAgICAgICBBbmltYXRpb24gb2JqZWN0IHRoYXQgY2FuIGJlIGNhbmNlbGVkLlxuICovXG5cbi8qKlxuICogVW5pdmVyc2FsIE1vZHVsZSBEYW5jZVxuICogIGNvbmZpZzogQ29tbW9uSlMgU3RyaWN0LCBleHBvcnRzIEdsb2JhbCwgc3VwcG9ydHMgY2lyY3VsYXIgZGVwZW5kZW5jaWVzXG4gKiAgaHR0cHM6Ly9naXRodWIuY29tL3VtZGpzL3VtZC9cbiAqL1xuKGZ1bmN0aW9uKHJvb3QsIGZhY3RvcnkpIHtcbiAgICBpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKSB7XG4gICAgICAgIGRlZmluZShbJ2V4cG9ydHMnXSwgZnVuY3Rpb24oZXhwb3J0cykge1xuICAgICAgICAgICAgZmFjdG9yeSgocm9vdC5UaW55QW5pbWF0ZSA9IGV4cG9ydHMpKTtcbiAgICAgICAgfSk7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgZmFjdG9yeShleHBvcnRzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBmYWN0b3J5KChyb290LlRpbnlBbmltYXRlID0ge30pKTtcbiAgICB9XG59KHRoaXMsIGZ1bmN0aW9uKGV4cG9ydHMpIHtcblxuICAgIC8qKlxuICAgICAqIFRpbnlBbmltYXRlLmFuaW1hdGUoKVxuICAgICAqL1xuICAgIGV4cG9ydHMuYW5pbWF0ZSA9IGZ1bmN0aW9uKGZyb20sIHRvLCBkdXJhdGlvbiwgdXBkYXRlLCBlYXNpbmcsIGRvbmUpIHtcblxuICAgICAgICAvLyBFYXJseSBiYWlsIG91dCBpZiBjYWxsZWQgaW5jb3JyZWN0bHlcbiAgICAgICAgaWYgKHR5cGVvZiBmcm9tICE9PSAnbnVtYmVyJyB8fFxuICAgICAgICAgICAgdHlwZW9mIHRvICE9PSAnbnVtYmVyJyB8fFxuICAgICAgICAgICAgdHlwZW9mIGR1cmF0aW9uICE9PSAnbnVtYmVyJyB8fFxuICAgICAgICAgICAgdHlwZW9mIHVwZGF0ZSAhPT0gJ2Z1bmN0aW9uJylcbiAgICAgICAgICAgIHJldHVybjtcblxuICAgICAgICAvLyBEZXRlcm1pbmUgZWFzaW5nXG4gICAgICAgIGlmICh0eXBlb2YgZWFzaW5nID09PSAnc3RyaW5nJyAmJiBlYXNpbmdzW2Vhc2luZ10pIHtcbiAgICAgICAgICAgIGVhc2luZyA9IGVhc2luZ3NbZWFzaW5nXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIGVhc2luZyAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgZWFzaW5nID0gZWFzaW5ncy5saW5lYXI7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDcmVhdGUgbW9jayBkb25lKCkgZnVuY3Rpb24gaWYgbmVjZXNzYXJ5XG4gICAgICAgIGlmICh0eXBlb2YgZG9uZSAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgZG9uZSA9IGZ1bmN0aW9uKCkge307XG4gICAgICAgIH1cblxuICAgICAgICAvLyBQaWNrIGltcGxlbWVudGF0aW9uIChyZXF1ZXN0QW5pbWF0aW9uRnJhbWUgfCBzZXRUaW1lb3V0KVxuICAgICAgICB2YXIgckFGID0gd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSB8fCBmdW5jdGlvbihjYWxsYmFjaykge1xuICAgICAgICAgICAgd2luZG93LnNldFRpbWVvdXQoY2FsbGJhY2ssIDEwMDAgLyA2MCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gQW5pbWF0aW9uIGxvb3BcbiAgICAgICAgdmFyIGNhbmNlbGVkID0gZmFsc2U7XG4gICAgICAgIHZhciBjaGFuZ2UgPSB0byAtIGZyb207XG4gICAgICAgIGZ1bmN0aW9uIGxvb3AodGltZXN0YW1wKSB7XG4gICAgICAgICAgICBpZiAoY2FuY2VsZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgdGltZSA9ICh0aW1lc3RhbXAgfHwgK25ldyBEYXRlKCkpIC0gc3RhcnQ7XG4gICAgICAgICAgICBpZiAodGltZSA+PSAwKSB7XG4gICAgICAgICAgICAgICAgdXBkYXRlKGVhc2luZyh0aW1lLCBmcm9tLCBjaGFuZ2UsIGR1cmF0aW9uKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGltZSA+PSAwICYmIHRpbWUgPj0gZHVyYXRpb24pIHtcbiAgICAgICAgICAgICAgICB1cGRhdGUodG8pO1xuICAgICAgICAgICAgICAgIGRvbmUoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgckFGKGxvb3ApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHVwZGF0ZShmcm9tKTtcblxuICAgICAgICAvLyBTdGFydCBhbmltYXRpb24gbG9vcFxuICAgICAgICB2YXIgc3RhcnQgPSB3aW5kb3cucGVyZm9ybWFuY2UgJiYgd2luZG93LnBlcmZvcm1hbmNlLm5vdyA/IHdpbmRvdy5wZXJmb3JtYW5jZS5ub3coKSA6ICtuZXcgRGF0ZSgpO1xuXG4gICAgICAgIHJBRihsb29wKTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgY2FuY2VsOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBjYW5jZWxlZCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFRpbnlBbmltYXRlLmFuaW1hdGVDU1MoKVxuICAgICAqICBTaG9ydGN1dCBtZXRob2QgZm9yIGFuaW1hdGluZyBjc3MgcHJvcGVydGllc1xuICAgICAqL1xuICAgIGV4cG9ydHMuYW5pbWF0ZUNTUyA9IGZ1bmN0aW9uKGVsZW1lbnQsIHByb3BlcnR5LCB1bml0LCBmcm9tLCB0bywgZHVyYXRpb24sIGVhc2luZywgZG9uZSkge1xuXG4gICAgICAgIHZhciB1cGRhdGUgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICAgICAgZWxlbWVudC5zdHlsZVtwcm9wZXJ0eV0gPSB2YWx1ZSArIHVuaXQ7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBleHBvcnRzLmFuaW1hdGUoZnJvbSwgdG8sIGR1cmF0aW9uLCB1cGRhdGUsIGVhc2luZywgZG9uZSk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFRpbnlBbmltYXRlLmNhbmNlbCgpXG4gICAgICogIE1ldGhvZCBmb3IgY2FuY2VsaW5nIGFuaW1hdGlvbnNcbiAgICAgKi9cbiAgICBleHBvcnRzLmNhbmNlbCA9IGZ1bmN0aW9uKGFuaW1hdGlvbikge1xuICAgICAgICBpZiAoIWFuaW1hdGlvbikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGFuaW1hdGlvbi5jYW5jZWwoKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogVGlueUFuaW1hdGUuZWFzaW5nc1xuICAgICAqICBBZGFwdGVkIGZyb20galF1ZXJ5IEVhc2luZ1xuICAgICAqL1xuICAgIHZhciBlYXNpbmdzID0gZXhwb3J0cy5lYXNpbmdzID0ge307XG4gICAgZWFzaW5ncy5saW5lYXIgPSBmdW5jdGlvbih0LCBiLCBjLCBkKSB7XG4gICAgICAgIHJldHVybiBjICogdCAvIGQgKyBiO1xuICAgIH07XG4gICAgZWFzaW5ncy5lYXNlSW5RdWFkID0gZnVuY3Rpb24odCwgYiwgYywgZCkge1xuICAgICAgICByZXR1cm4gYyAqICh0IC89IGQpICogdCArIGI7XG4gICAgfTtcbiAgICBlYXNpbmdzLmVhc2VPdXRRdWFkID0gZnVuY3Rpb24odCwgYiwgYywgZCkge1xuICAgICAgICByZXR1cm4gLWMgKiAodCAvPSBkKSAqICh0IC0gMikgKyBiO1xuICAgIH07XG4gICAgZWFzaW5ncy5lYXNlSW5PdXRRdWFkID0gZnVuY3Rpb24odCwgYiwgYywgZCkge1xuICAgICAgICBpZiAoKHQgLz0gZCAvIDIpIDwgMSkgcmV0dXJuIGMgLyAyICogdCAqIHQgKyBiO1xuICAgICAgICByZXR1cm4gLWMgLyAyICogKCgtLXQpICogKHQgLSAyKSAtIDEpICsgYjtcbiAgICB9O1xuICAgIGVhc2luZ3MuZWFzZUluQ3ViaWMgPSBmdW5jdGlvbih0LCBiLCBjLCBkKSB7XG4gICAgICAgIHJldHVybiBjICogKHQgLz0gZCkgKiB0ICogdCArIGI7XG4gICAgfTtcbiAgICBlYXNpbmdzLmVhc2VPdXRDdWJpYyA9IGZ1bmN0aW9uKHQsIGIsIGMsIGQpIHtcbiAgICAgICAgcmV0dXJuIGMgKiAoKHQgPSB0IC8gZCAtIDEpICogdCAqIHQgKyAxKSArIGI7XG4gICAgfTtcbiAgICBlYXNpbmdzLmVhc2VJbk91dEN1YmljID0gZnVuY3Rpb24odCwgYiwgYywgZCkge1xuICAgICAgICBpZiAoKHQgLz0gZCAvIDIpIDwgMSkgcmV0dXJuIGMgLyAyICogdCAqIHQgKiB0ICsgYjtcbiAgICAgICAgcmV0dXJuIGMgLyAyICogKCh0IC09IDIpICogdCAqIHQgKyAyKSArIGI7XG4gICAgfTtcbiAgICBlYXNpbmdzLmVhc2VJblF1YXJ0ID0gZnVuY3Rpb24odCwgYiwgYywgZCkge1xuICAgICAgICByZXR1cm4gYyAqICh0IC89IGQpICogdCAqIHQgKiB0ICsgYjtcbiAgICB9O1xuICAgIGVhc2luZ3MuZWFzZU91dFF1YXJ0ID0gZnVuY3Rpb24odCwgYiwgYywgZCkge1xuICAgICAgICByZXR1cm4gLWMgKiAoKHQgPSB0IC8gZCAtIDEpICogdCAqIHQgKiB0IC0gMSkgKyBiO1xuICAgIH07XG4gICAgZWFzaW5ncy5lYXNlSW5PdXRRdWFydCA9IGZ1bmN0aW9uKHQsIGIsIGMsIGQpIHtcbiAgICAgICAgaWYgKCh0IC89IGQgLyAyKSA8IDEpIHJldHVybiBjIC8gMiAqIHQgKiB0ICogdCAqIHQgKyBiO1xuICAgICAgICByZXR1cm4gLWMgLyAyICogKCh0IC09IDIpICogdCAqIHQgKiB0IC0gMikgKyBiO1xuICAgIH07XG4gICAgZWFzaW5ncy5lYXNlSW5RdWludCA9IGZ1bmN0aW9uKHQsIGIsIGMsIGQpIHtcbiAgICAgICAgcmV0dXJuIGMgKiAodCAvPSBkKSAqIHQgKiB0ICogdCAqIHQgKyBiO1xuICAgIH07XG4gICAgZWFzaW5ncy5lYXNlT3V0UXVpbnQgPSBmdW5jdGlvbih0LCBiLCBjLCBkKSB7XG4gICAgICAgIHJldHVybiBjICogKCh0ID0gdCAvIGQgLSAxKSAqIHQgKiB0ICogdCAqIHQgKyAxKSArIGI7XG4gICAgfTtcbiAgICBlYXNpbmdzLmVhc2VJbk91dFF1aW50ID0gZnVuY3Rpb24odCwgYiwgYywgZCkge1xuICAgICAgICBpZiAoKHQgLz0gZCAvIDIpIDwgMSkgcmV0dXJuIGMgLyAyICogdCAqIHQgKiB0ICogdCAqIHQgKyBiO1xuICAgICAgICByZXR1cm4gYyAvIDIgKiAoKHQgLT0gMikgKiB0ICogdCAqIHQgKiB0ICsgMikgKyBiO1xuICAgIH07XG4gICAgZWFzaW5ncy5lYXNlSW5TaW5lID0gZnVuY3Rpb24odCwgYiwgYywgZCkge1xuICAgICAgICByZXR1cm4gLWMgKiBNYXRoLmNvcyh0IC8gZCAqIChNYXRoLlBJIC8gMikpICsgYyArIGI7XG4gICAgfTtcbiAgICBlYXNpbmdzLmVhc2VPdXRTaW5lID0gZnVuY3Rpb24odCwgYiwgYywgZCkge1xuICAgICAgICByZXR1cm4gYyAqIE1hdGguc2luKHQgLyBkICogKE1hdGguUEkgLyAyKSkgKyBiO1xuICAgIH07XG4gICAgZWFzaW5ncy5lYXNlSW5PdXRTaW5lID0gZnVuY3Rpb24odCwgYiwgYywgZCkge1xuICAgICAgICByZXR1cm4gLWMgLyAyICogKE1hdGguY29zKE1hdGguUEkgKiB0IC8gZCkgLSAxKSArIGI7XG4gICAgfTtcbiAgICBlYXNpbmdzLmVhc2VJbkV4cG8gPSBmdW5jdGlvbih0LCBiLCBjLCBkKSB7XG4gICAgICAgIHJldHVybiAodCA9PSAwKSA/IGIgOiBjICogTWF0aC5wb3coMiwgMTAgKiAodCAvIGQgLSAxKSkgKyBiO1xuICAgIH07XG4gICAgZWFzaW5ncy5lYXNlT3V0RXhwbyA9IGZ1bmN0aW9uKHQsIGIsIGMsIGQpIHtcbiAgICAgICAgcmV0dXJuICh0ID09IGQpID8gYiArIGMgOiBjICogKC1NYXRoLnBvdygyLCAtMTAgKiB0IC8gZCkgKyAxKSArIGI7XG4gICAgfTtcbiAgICBlYXNpbmdzLmVhc2VJbk91dEV4cG8gPSBmdW5jdGlvbih0LCBiLCBjLCBkKSB7XG4gICAgICAgIGlmICh0ID09IDApIHJldHVybiBiO1xuICAgICAgICBpZiAodCA9PSBkKSByZXR1cm4gYiArIGM7XG4gICAgICAgIGlmICgodCAvPSBkIC8gMikgPCAxKSByZXR1cm4gYyAvIDIgKiBNYXRoLnBvdygyLCAxMCAqICh0IC0gMSkpICsgYjtcbiAgICAgICAgcmV0dXJuIGMgLyAyICogKC1NYXRoLnBvdygyLCAtMTAgKiAtLXQpICsgMikgKyBiO1xuICAgIH07XG4gICAgZWFzaW5ncy5lYXNlSW5DaXJjID0gZnVuY3Rpb24odCwgYiwgYywgZCkge1xuICAgICAgICByZXR1cm4gLWMgKiAoTWF0aC5zcXJ0KDEgLSAodCAvPSBkKSAqIHQpIC0gMSkgKyBiO1xuICAgIH07XG4gICAgZWFzaW5ncy5lYXNlT3V0Q2lyYyA9IGZ1bmN0aW9uKHQsIGIsIGMsIGQpIHtcbiAgICAgICAgcmV0dXJuIGMgKiBNYXRoLnNxcnQoMSAtICh0ID0gdCAvIGQgLSAxKSAqIHQpICsgYjtcbiAgICB9O1xuICAgIGVhc2luZ3MuZWFzZUluT3V0Q2lyYyA9IGZ1bmN0aW9uKHQsIGIsIGMsIGQpIHtcbiAgICAgICAgaWYgKCh0IC89IGQgLyAyKSA8IDEpIHJldHVybiAtYyAvIDIgKiAoTWF0aC5zcXJ0KDEgLSB0ICogdCkgLSAxKSArIGI7XG4gICAgICAgIHJldHVybiBjIC8gMiAqIChNYXRoLnNxcnQoMSAtICh0IC09IDIpICogdCkgKyAxKSArIGI7XG4gICAgfTtcbiAgICBlYXNpbmdzLmVhc2VJbkVsYXN0aWMgPSBmdW5jdGlvbih0LCBiLCBjLCBkKSB7XG4gICAgICAgIHZhciBwID0gMDtcbiAgICAgICAgdmFyIGEgPSBjO1xuICAgICAgICBpZiAodCA9PSAwKSByZXR1cm4gYjtcbiAgICAgICAgaWYgKCh0IC89IGQpID09IDEpIHJldHVybiBiICsgYztcbiAgICAgICAgaWYgKCFwKSBwID0gZCAqIC4zO1xuICAgICAgICBpZiAoYSA8IE1hdGguYWJzKGMpKSB7XG4gICAgICAgICAgICBhID0gYztcbiAgICAgICAgICAgIHZhciBzID0gcCAvIDQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB2YXIgcyA9IHAgLyAoMiAqIE1hdGguUEkpICogTWF0aC5hc2luKGMgLyBhKTtcbiAgICAgICAgcmV0dXJuIC0oYSAqIE1hdGgucG93KDIsIDEwICogKHQgLT0gMSkpICogTWF0aC5zaW4oKHQgKiBkIC0gcykgKiAoMiAqIE1hdGguUEkpIC8gcCkpICsgYjtcbiAgICB9O1xuICAgIGVhc2luZ3MuZWFzZU91dEVsYXN0aWMgPSBmdW5jdGlvbih0LCBiLCBjLCBkKSB7XG4gICAgICAgIHZhciBwID0gMDtcbiAgICAgICAgdmFyIGEgPSBjO1xuICAgICAgICBpZiAodCA9PSAwKSByZXR1cm4gYjtcbiAgICAgICAgaWYgKCh0IC89IGQpID09IDEpIHJldHVybiBiICsgYztcbiAgICAgICAgaWYgKCFwKSBwID0gZCAqIC4zO1xuICAgICAgICBpZiAoYSA8IE1hdGguYWJzKGMpKSB7XG4gICAgICAgICAgICBhID0gYztcbiAgICAgICAgICAgIHZhciBzID0gcCAvIDQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB2YXIgcyA9IHAgLyAoMiAqIE1hdGguUEkpICogTWF0aC5hc2luKGMgLyBhKTtcbiAgICAgICAgcmV0dXJuIGEgKiBNYXRoLnBvdygyLCAtMTAgKiB0KSAqIE1hdGguc2luKCh0ICogZCAtIHMpICogKDIgKiBNYXRoLlBJKSAvIHApICsgYyArIGI7XG4gICAgfTtcbiAgICBlYXNpbmdzLmVhc2VJbk91dEVsYXN0aWMgPSBmdW5jdGlvbih0LCBiLCBjLCBkKSB7XG4gICAgICAgIHZhciBwID0gMDtcbiAgICAgICAgdmFyIGEgPSBjO1xuICAgICAgICBpZiAodCA9PSAwKSByZXR1cm4gYjtcbiAgICAgICAgaWYgKCh0IC89IGQgLyAyKSA9PSAyKSByZXR1cm4gYiArIGM7XG4gICAgICAgIGlmICghcCkgcCA9IGQgKiAoLjMgKiAxLjUpO1xuICAgICAgICBpZiAoYSA8IE1hdGguYWJzKGMpKSB7XG4gICAgICAgICAgICBhID0gYztcbiAgICAgICAgICAgIHZhciBzID0gcCAvIDQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB2YXIgcyA9IHAgLyAoMiAqIE1hdGguUEkpICogTWF0aC5hc2luKGMgLyBhKTtcbiAgICAgICAgaWYgKHQgPCAxKSByZXR1cm4gLS41ICogKGEgKiBNYXRoLnBvdygyLCAxMCAqICh0IC09IDEpKSAqIE1hdGguc2luKCh0ICogZCAtIHMpICogKDIgKiBNYXRoLlBJKSAvIHApKSArIGI7XG4gICAgICAgIHJldHVybiBhICogTWF0aC5wb3coMiwgLTEwICogKHQgLT0gMSkpICogTWF0aC5zaW4oKHQgKiBkIC0gcykgKiAoMiAqIE1hdGguUEkpIC8gcCkgKiAuNSArIGMgKyBiO1xuICAgIH07XG4gICAgZWFzaW5ncy5lYXNlSW5CYWNrID0gZnVuY3Rpb24odCwgYiwgYywgZCwgcykge1xuICAgICAgICBpZiAocyA9PSB1bmRlZmluZWQpIHMgPSAxLjcwMTU4O1xuICAgICAgICByZXR1cm4gYyAqICh0IC89IGQpICogdCAqICgocyArIDEpICogdCAtIHMpICsgYjtcbiAgICB9O1xuICAgIGVhc2luZ3MuZWFzZU91dEJhY2sgPSBmdW5jdGlvbih0LCBiLCBjLCBkLCBzKSB7XG4gICAgICAgIGlmIChzID09IHVuZGVmaW5lZCkgcyA9IDEuNzAxNTg7XG4gICAgICAgIHJldHVybiBjICogKCh0ID0gdCAvIGQgLSAxKSAqIHQgKiAoKHMgKyAxKSAqIHQgKyBzKSArIDEpICsgYjtcbiAgICB9O1xuICAgIGVhc2luZ3MuZWFzZUluT3V0QmFjayA9IGZ1bmN0aW9uKHQsIGIsIGMsIGQsIHMpIHtcbiAgICAgICAgaWYgKHMgPT0gdW5kZWZpbmVkKSBzID0gMS43MDE1ODtcbiAgICAgICAgaWYgKCh0IC89IGQgLyAyKSA8IDEpIHJldHVybiBjIC8gMiAqICh0ICogdCAqICgoKHMgKj0gKDEuNTI1KSkgKyAxKSAqIHQgLSBzKSkgKyBiO1xuICAgICAgICByZXR1cm4gYyAvIDIgKiAoKHQgLT0gMikgKiB0ICogKCgocyAqPSAoMS41MjUpKSArIDEpICogdCArIHMpICsgMikgKyBiO1xuICAgIH07XG4gICAgZWFzaW5ncy5lYXNlSW5Cb3VuY2UgPSBmdW5jdGlvbih0LCBiLCBjLCBkKSB7XG4gICAgICAgIHJldHVybiBjIC0gZWFzaW5ncy5lYXNlT3V0Qm91bmNlKGQgLSB0LCAwLCBjLCBkKSArIGI7XG4gICAgfTtcbiAgICBlYXNpbmdzLmVhc2VPdXRCb3VuY2UgPSBmdW5jdGlvbih0LCBiLCBjLCBkKSB7XG4gICAgICAgIGlmICgodCAvPSBkKSA8ICgxIC8gMi43NSkpIHtcbiAgICAgICAgICAgIHJldHVybiBjICogKDcuNTYyNSAqIHQgKiB0KSArIGI7XG4gICAgICAgIH0gZWxzZSBpZiAodCA8ICgyIC8gMi43NSkpIHtcbiAgICAgICAgICAgIHJldHVybiBjICogKDcuNTYyNSAqICh0IC09ICgxLjUgLyAyLjc1KSkgKiB0ICsgLjc1KSArIGI7XG4gICAgICAgIH0gZWxzZSBpZiAodCA8ICgyLjUgLyAyLjc1KSkge1xuICAgICAgICAgICAgcmV0dXJuIGMgKiAoNy41NjI1ICogKHQgLT0gKDIuMjUgLyAyLjc1KSkgKiB0ICsgLjkzNzUpICsgYjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBjICogKDcuNTYyNSAqICh0IC09ICgyLjYyNSAvIDIuNzUpKSAqIHQgKyAuOTg0Mzc1KSArIGI7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIGVhc2luZ3MuZWFzZUluT3V0Qm91bmNlID0gZnVuY3Rpb24odCwgYiwgYywgZCkge1xuICAgICAgICBpZiAodCA8IGQgLyAyKSByZXR1cm4gZWFzaW5ncy5lYXNlSW5Cb3VuY2UodCAqIDIsIDAsIGMsIGQpICogLjUgKyBiO1xuICAgICAgICByZXR1cm4gZWFzaW5ncy5lYXNlT3V0Qm91bmNlKHQgKiAyIC0gZCwgMCwgYywgZCkgKiAuNSArIGMgKiAuNSArIGI7XG4gICAgfTtcblxufSkpO1xuIiwiKGZ1bmN0aW9uIChnbG9iYWwsIGZhY3RvcnkpIHtcbiAgICBpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKSB7XG4gICAgICAgIGRlZmluZShbJ2V4cG9ydHMnLCAnbW9kdWxlJ10sIGZhY3RvcnkpO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIGV4cG9ydHMgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGZhY3RvcnkoZXhwb3J0cywgbW9kdWxlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgbW9kID0ge1xuICAgICAgICAgICAgZXhwb3J0czoge31cbiAgICAgICAgfTtcbiAgICAgICAgZmFjdG9yeShtb2QuZXhwb3J0cywgbW9kKTtcbiAgICAgICAgZ2xvYmFsLkltcGV0dXMgPSBtb2QuZXhwb3J0cztcbiAgICB9XG59KSh0aGlzLCBmdW5jdGlvbiAoZXhwb3J0cywgbW9kdWxlKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCdDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24nKTsgfSB9XG5cbiAgICB2YXIgc3RvcFRocmVzaG9sZERlZmF1bHQgPSAwLjM7XG4gICAgdmFyIGJvdW5jZURlY2VsZXJhdGlvbiA9IDAuMDQ7XG4gICAgdmFyIGJvdW5jZUFjY2VsZXJhdGlvbiA9IDAuMTE7XG5cbiAgICAvLyBmaXhlcyB3ZWlyZCBzYWZhcmkgMTAgYnVnIHdoZXJlIHByZXZlbnREZWZhdWx0IGlzIHByZXZlbnRlZFxuICAgIC8vIEBzZWUgaHR0cHM6Ly9naXRodWIuY29tL21ldGFmaXp6eS9mbGlja2l0eS9pc3N1ZXMvNDU3I2lzc3VlY29tbWVudC0yNTQ1MDEzNTZcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2htb3ZlJywgZnVuY3Rpb24gKCkge30pO1xuXG4gICAgdmFyIEltcGV0dXMgPSBmdW5jdGlvbiBJbXBldHVzKF9yZWYpIHtcbiAgICAgICAgdmFyIF9yZWYkc291cmNlID0gX3JlZi5zb3VyY2U7XG4gICAgICAgIHZhciBzb3VyY2VFbCA9IF9yZWYkc291cmNlID09PSB1bmRlZmluZWQgPyBkb2N1bWVudCA6IF9yZWYkc291cmNlO1xuICAgICAgICB2YXIgdXBkYXRlQ2FsbGJhY2sgPSBfcmVmLnVwZGF0ZTtcbiAgICAgICAgdmFyIF9yZWYkbXVsdGlwbGllciA9IF9yZWYubXVsdGlwbGllcjtcbiAgICAgICAgdmFyIG11bHRpcGxpZXIgPSBfcmVmJG11bHRpcGxpZXIgPT09IHVuZGVmaW5lZCA/IDEgOiBfcmVmJG11bHRpcGxpZXI7XG4gICAgICAgIHZhciBfcmVmJGZyaWN0aW9uID0gX3JlZi5mcmljdGlvbjtcbiAgICAgICAgdmFyIGZyaWN0aW9uID0gX3JlZiRmcmljdGlvbiA9PT0gdW5kZWZpbmVkID8gMC45MiA6IF9yZWYkZnJpY3Rpb247XG4gICAgICAgIHZhciBpbml0aWFsVmFsdWVzID0gX3JlZi5pbml0aWFsVmFsdWVzO1xuICAgICAgICB2YXIgYm91bmRYID0gX3JlZi5ib3VuZFg7XG4gICAgICAgIHZhciBib3VuZFkgPSBfcmVmLmJvdW5kWTtcbiAgICAgICAgdmFyIF9yZWYkYm91bmNlID0gX3JlZi5ib3VuY2U7XG4gICAgICAgIHZhciBib3VuY2UgPSBfcmVmJGJvdW5jZSA9PT0gdW5kZWZpbmVkID8gdHJ1ZSA6IF9yZWYkYm91bmNlO1xuXG4gICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBJbXBldHVzKTtcblxuICAgICAgICB2YXIgYm91bmRYbWluLCBib3VuZFhtYXgsIGJvdW5kWW1pbiwgYm91bmRZbWF4LCBwb2ludGVyTGFzdFgsIHBvaW50ZXJMYXN0WSwgcG9pbnRlckN1cnJlbnRYLCBwb2ludGVyQ3VycmVudFksIHBvaW50ZXJJZCwgZGVjVmVsWCwgZGVjVmVsWTtcbiAgICAgICAgdmFyIHRhcmdldFggPSAwO1xuICAgICAgICB2YXIgdGFyZ2V0WSA9IDA7XG4gICAgICAgIHZhciBzdG9wVGhyZXNob2xkID0gc3RvcFRocmVzaG9sZERlZmF1bHQgKiBtdWx0aXBsaWVyO1xuICAgICAgICB2YXIgdGlja2luZyA9IGZhbHNlO1xuICAgICAgICB2YXIgcG9pbnRlckFjdGl2ZSA9IGZhbHNlO1xuICAgICAgICB2YXIgcGF1c2VkID0gZmFsc2U7XG4gICAgICAgIHZhciBkZWNlbGVyYXRpbmcgPSBmYWxzZTtcbiAgICAgICAgdmFyIHRyYWNraW5nUG9pbnRzID0gW107XG5cbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogSW5pdGlhbGl6ZSBpbnN0YW5jZVxyXG4gICAgICAgICAqL1xuICAgICAgICAoZnVuY3Rpb24gaW5pdCgpIHtcbiAgICAgICAgICAgIHNvdXJjZUVsID0gdHlwZW9mIHNvdXJjZUVsID09PSAnc3RyaW5nJyA/IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc291cmNlRWwpIDogc291cmNlRWw7XG4gICAgICAgICAgICBpZiAoIXNvdXJjZUVsKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJTVBFVFVTOiBzb3VyY2Ugbm90IGZvdW5kLicpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoIXVwZGF0ZUNhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJTVBFVFVTOiB1cGRhdGUgZnVuY3Rpb24gbm90IGRlZmluZWQuJyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChpbml0aWFsVmFsdWVzKSB7XG4gICAgICAgICAgICAgICAgaWYgKGluaXRpYWxWYWx1ZXNbMF0pIHtcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0WCA9IGluaXRpYWxWYWx1ZXNbMF07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChpbml0aWFsVmFsdWVzWzFdKSB7XG4gICAgICAgICAgICAgICAgICAgIHRhcmdldFkgPSBpbml0aWFsVmFsdWVzWzFdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYWxsVXBkYXRlQ2FsbGJhY2soKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gSW5pdGlhbGl6ZSBib3VuZCB2YWx1ZXNcbiAgICAgICAgICAgIGlmIChib3VuZFgpIHtcbiAgICAgICAgICAgICAgICBib3VuZFhtaW4gPSBib3VuZFhbMF07XG4gICAgICAgICAgICAgICAgYm91bmRYbWF4ID0gYm91bmRYWzFdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGJvdW5kWSkge1xuICAgICAgICAgICAgICAgIGJvdW5kWW1pbiA9IGJvdW5kWVswXTtcbiAgICAgICAgICAgICAgICBib3VuZFltYXggPSBib3VuZFlbMV07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHNvdXJjZUVsLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCBvbkRvd24pO1xuICAgICAgICAgICAgc291cmNlRWwuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgb25Eb3duKTtcbiAgICAgICAgfSkoKTtcblxuICAgICAgICAvKipcclxuICAgICAgICAgKiBJbiBlZGdlIGNhc2VzIHdoZXJlIHlvdSBtYXkgbmVlZCB0b1xyXG4gICAgICAgICAqIHJlaW5zdGFuY2lhdGUgSW1wZXR1cyBvbiB0aGUgc2FtZSBzb3VyY2VFbFxyXG4gICAgICAgICAqIHRoaXMgd2lsbCByZW1vdmUgdGhlIHByZXZpb3VzIGV2ZW50IGxpc3RlbmVyc1xyXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBzb3VyY2VFbC5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0Jywgb25Eb3duKTtcbiAgICAgICAgICAgIHNvdXJjZUVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIG9uRG93bik7XG4gICAgICAgICAgICAvLyBob3dldmVyIGl0IHdvbid0IFwiZGVzdHJveVwiIGEgcmVmZXJlbmNlXG4gICAgICAgICAgICAvLyB0byBpbnN0YW5jZSBpZiB5b3UnZCBsaWtlIHRvIGRvIHRoYXRcbiAgICAgICAgICAgIC8vIGl0IHJldHVybnMgbnVsbCBhcyBhIGNvbnZpbmllbmNlLlxuICAgICAgICAgICAgLy8gZXg6IGBpbnN0YW5jZSA9IGluc3RhbmNlLmRlc3Ryb3koKTtgXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcclxuICAgICAgICAgKiBEaXNhYmxlIG1vdmVtZW50IHByb2Nlc3NpbmdcclxuICAgICAgICAgKiBAcHVibGljXHJcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMucGF1c2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBwb2ludGVyQWN0aXZlID0gZmFsc2U7XG4gICAgICAgICAgICBwYXVzZWQgPSB0cnVlO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEVuYWJsZSBtb3ZlbWVudCBwcm9jZXNzaW5nXHJcbiAgICAgICAgICogQHB1YmxpY1xyXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnJlc3VtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHBhdXNlZCA9IGZhbHNlO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFVwZGF0ZSB0aGUgY3VycmVudCB4IGFuZCB5IHZhbHVlc1xyXG4gICAgICAgICAqIEBwdWJsaWNcclxuICAgICAgICAgKiBAcGFyYW0ge051bWJlcn0geFxyXG4gICAgICAgICAqIEBwYXJhbSB7TnVtYmVyfSB5XHJcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuc2V0VmFsdWVzID0gZnVuY3Rpb24gKHgsIHkpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgeCA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgICAgICB0YXJnZXRYID0geDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0eXBlb2YgeSA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgICAgICB0YXJnZXRZID0geTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICAvKipcclxuICAgICAgICAgKiBVcGRhdGUgdGhlIG11bHRpcGxpZXIgdmFsdWVcclxuICAgICAgICAgKiBAcHVibGljXHJcbiAgICAgICAgICogQHBhcmFtIHtOdW1iZXJ9IHZhbFxyXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnNldE11bHRpcGxpZXIgPSBmdW5jdGlvbiAodmFsKSB7XG4gICAgICAgICAgICBtdWx0aXBsaWVyID0gdmFsO1xuICAgICAgICAgICAgc3RvcFRocmVzaG9sZCA9IHN0b3BUaHJlc2hvbGREZWZhdWx0ICogbXVsdGlwbGllcjtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcclxuICAgICAgICAgKiBVcGRhdGUgYm91bmRYIHZhbHVlXHJcbiAgICAgICAgICogQHB1YmxpY1xyXG4gICAgICAgICAqIEBwYXJhbSB7TnVtYmVyW119IGJvdW5kWFxyXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnNldEJvdW5kWCA9IGZ1bmN0aW9uIChib3VuZFgpIHtcbiAgICAgICAgICAgIGJvdW5kWG1pbiA9IGJvdW5kWFswXTtcbiAgICAgICAgICAgIGJvdW5kWG1heCA9IGJvdW5kWFsxXTtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcclxuICAgICAgICAgKiBVcGRhdGUgYm91bmRZIHZhbHVlXHJcbiAgICAgICAgICogQHB1YmxpY1xyXG4gICAgICAgICAqIEBwYXJhbSB7TnVtYmVyW119IGJvdW5kWVxyXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnNldEJvdW5kWSA9IGZ1bmN0aW9uIChib3VuZFkpIHtcbiAgICAgICAgICAgIGJvdW5kWW1pbiA9IGJvdW5kWVswXTtcbiAgICAgICAgICAgIGJvdW5kWW1heCA9IGJvdW5kWVsxXTtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcclxuICAgICAgICAgKiBFeGVjdXRlcyB0aGUgdXBkYXRlIGZ1bmN0aW9uXHJcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIGNhbGxVcGRhdGVDYWxsYmFjaygpIHtcbiAgICAgICAgICAgIHVwZGF0ZUNhbGxiYWNrLmNhbGwoc291cmNlRWwsIHRhcmdldFgsIHRhcmdldFkpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQ3JlYXRlcyBhIGN1c3RvbSBub3JtYWxpemVkIGV2ZW50IG9iamVjdCBmcm9tIHRvdWNoIGFuZCBtb3VzZSBldmVudHNcclxuICAgICAgICAgKiBAcGFyYW0gIHtFdmVudH0gZXZcclxuICAgICAgICAgKiBAcmV0dXJucyB7T2JqZWN0fSB3aXRoIHgsIHksIGFuZCBpZCBwcm9wZXJ0aWVzXHJcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIG5vcm1hbGl6ZUV2ZW50KGV2KSB7XG4gICAgICAgICAgICBpZiAoZXYudHlwZSA9PT0gJ3RvdWNobW92ZScgfHwgZXYudHlwZSA9PT0gJ3RvdWNoc3RhcnQnIHx8IGV2LnR5cGUgPT09ICd0b3VjaGVuZCcpIHtcbiAgICAgICAgICAgICAgICB2YXIgdG91Y2ggPSBldi50YXJnZXRUb3VjaGVzWzBdIHx8IGV2LmNoYW5nZWRUb3VjaGVzWzBdO1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHg6IHRvdWNoLmNsaWVudFgsXG4gICAgICAgICAgICAgICAgICAgIHk6IHRvdWNoLmNsaWVudFksXG4gICAgICAgICAgICAgICAgICAgIGlkOiB0b3VjaC5pZGVudGlmaWVyXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gbW91c2UgZXZlbnRzXG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgeDogZXYuY2xpZW50WCxcbiAgICAgICAgICAgICAgICAgICAgeTogZXYuY2xpZW50WSxcbiAgICAgICAgICAgICAgICAgICAgaWQ6IG51bGxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogSW5pdGlhbGl6ZXMgbW92ZW1lbnQgdHJhY2tpbmdcclxuICAgICAgICAgKiBAcGFyYW0gIHtPYmplY3R9IGV2IE5vcm1hbGl6ZWQgZXZlbnRcclxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gb25Eb3duKGV2KSB7XG4gICAgICAgICAgICB2YXIgZXZlbnQgPSBub3JtYWxpemVFdmVudChldik7XG4gICAgICAgICAgICBpZiAoIXBvaW50ZXJBY3RpdmUgJiYgIXBhdXNlZCkge1xuICAgICAgICAgICAgICAgIHBvaW50ZXJBY3RpdmUgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGRlY2VsZXJhdGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHBvaW50ZXJJZCA9IGV2ZW50LmlkO1xuXG4gICAgICAgICAgICAgICAgcG9pbnRlckxhc3RYID0gcG9pbnRlckN1cnJlbnRYID0gZXZlbnQueDtcbiAgICAgICAgICAgICAgICBwb2ludGVyTGFzdFkgPSBwb2ludGVyQ3VycmVudFkgPSBldmVudC55O1xuICAgICAgICAgICAgICAgIHRyYWNraW5nUG9pbnRzID0gW107XG4gICAgICAgICAgICAgICAgYWRkVHJhY2tpbmdQb2ludChwb2ludGVyTGFzdFgsIHBvaW50ZXJMYXN0WSk7XG5cbiAgICAgICAgICAgICAgICAvLyBAc2VlIGh0dHBzOi8vZGV2ZWxvcGVycy5nb29nbGUuY29tL3dlYi91cGRhdGVzLzIwMTcvMDEvc2Nyb2xsaW5nLWludGVydmVudGlvblxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNobW92ZScsIG9uTW92ZSwgZ2V0UGFzc2l2ZVN1cHBvcnRlZCgpID8geyBwYXNzaXZlOiBmYWxzZSB9IDogZmFsc2UpO1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgb25VcCk7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hjYW5jZWwnLCBzdG9wVHJhY2tpbmcpO1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIG9uTW92ZSwgZ2V0UGFzc2l2ZVN1cHBvcnRlZCgpID8geyBwYXNzaXZlOiBmYWxzZSB9IDogZmFsc2UpO1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCBvblVwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEhhbmRsZXMgbW92ZSBldmVudHNcclxuICAgICAgICAgKiBAcGFyYW0gIHtPYmplY3R9IGV2IE5vcm1hbGl6ZWQgZXZlbnRcclxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gb25Nb3ZlKGV2KSB7XG4gICAgICAgICAgICBldi5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgdmFyIGV2ZW50ID0gbm9ybWFsaXplRXZlbnQoZXYpO1xuXG4gICAgICAgICAgICBpZiAocG9pbnRlckFjdGl2ZSAmJiBldmVudC5pZCA9PT0gcG9pbnRlcklkKSB7XG4gICAgICAgICAgICAgICAgcG9pbnRlckN1cnJlbnRYID0gZXZlbnQueDtcbiAgICAgICAgICAgICAgICBwb2ludGVyQ3VycmVudFkgPSBldmVudC55O1xuICAgICAgICAgICAgICAgIGFkZFRyYWNraW5nUG9pbnQocG9pbnRlckxhc3RYLCBwb2ludGVyTGFzdFkpO1xuICAgICAgICAgICAgICAgIHJlcXVlc3RUaWNrKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvKipcclxuICAgICAgICAgKiBIYW5kbGVzIHVwL2VuZCBldmVudHNcclxuICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gZXYgTm9ybWFsaXplZCBldmVudFxyXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBvblVwKGV2KSB7XG4gICAgICAgICAgICB2YXIgZXZlbnQgPSBub3JtYWxpemVFdmVudChldik7XG5cbiAgICAgICAgICAgIGlmIChwb2ludGVyQWN0aXZlICYmIGV2ZW50LmlkID09PSBwb2ludGVySWQpIHtcbiAgICAgICAgICAgICAgICBzdG9wVHJhY2tpbmcoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFN0b3BzIG1vdmVtZW50IHRyYWNraW5nLCBzdGFydHMgYW5pbWF0aW9uXHJcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIHN0b3BUcmFja2luZygpIHtcbiAgICAgICAgICAgIHBvaW50ZXJBY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgICAgIGFkZFRyYWNraW5nUG9pbnQocG9pbnRlckxhc3RYLCBwb2ludGVyTGFzdFkpO1xuICAgICAgICAgICAgc3RhcnREZWNlbEFuaW0oKTtcblxuICAgICAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2htb3ZlJywgb25Nb3ZlKTtcbiAgICAgICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgb25VcCk7XG4gICAgICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaGNhbmNlbCcsIHN0b3BUcmFja2luZyk7XG4gICAgICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgb25VcCk7XG4gICAgICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBvbk1vdmUpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogUmVjb3JkcyBtb3ZlbWVudCBmb3IgdGhlIGxhc3QgMTAwbXNcclxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0geFxyXG4gICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSB5IFtkZXNjcmlwdGlvbl1cclxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gYWRkVHJhY2tpbmdQb2ludCh4LCB5KSB7XG4gICAgICAgICAgICB2YXIgdGltZSA9IERhdGUubm93KCk7XG4gICAgICAgICAgICB3aGlsZSAodHJhY2tpbmdQb2ludHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGlmICh0aW1lIC0gdHJhY2tpbmdQb2ludHNbMF0udGltZSA8PSAxMDApIHtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRyYWNraW5nUG9pbnRzLnNoaWZ0KCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRyYWNraW5nUG9pbnRzLnB1c2goeyB4OiB4LCB5OiB5LCB0aW1lOiB0aW1lIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQ2FsY3VsYXRlIG5ldyB2YWx1ZXMsIGNhbGwgdXBkYXRlIGZ1bmN0aW9uXHJcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIHVwZGF0ZUFuZFJlbmRlcigpIHtcbiAgICAgICAgICAgIHZhciBwb2ludGVyQ2hhbmdlWCA9IHBvaW50ZXJDdXJyZW50WCAtIHBvaW50ZXJMYXN0WDtcbiAgICAgICAgICAgIHZhciBwb2ludGVyQ2hhbmdlWSA9IHBvaW50ZXJDdXJyZW50WSAtIHBvaW50ZXJMYXN0WTtcblxuICAgICAgICAgICAgdGFyZ2V0WCArPSBwb2ludGVyQ2hhbmdlWCAqIG11bHRpcGxpZXI7XG4gICAgICAgICAgICB0YXJnZXRZICs9IHBvaW50ZXJDaGFuZ2VZICogbXVsdGlwbGllcjtcblxuICAgICAgICAgICAgaWYgKGJvdW5jZSkge1xuICAgICAgICAgICAgICAgIHZhciBkaWZmID0gY2hlY2tCb3VuZHMoKTtcbiAgICAgICAgICAgICAgICBpZiAoZGlmZi54ICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHRhcmdldFggLT0gcG9pbnRlckNoYW5nZVggKiBkcmFnT3V0T2ZCb3VuZHNNdWx0aXBsaWVyKGRpZmYueCkgKiBtdWx0aXBsaWVyO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZGlmZi55ICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHRhcmdldFkgLT0gcG9pbnRlckNoYW5nZVkgKiBkcmFnT3V0T2ZCb3VuZHNNdWx0aXBsaWVyKGRpZmYueSkgKiBtdWx0aXBsaWVyO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY2hlY2tCb3VuZHModHJ1ZSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNhbGxVcGRhdGVDYWxsYmFjaygpO1xuXG4gICAgICAgICAgICBwb2ludGVyTGFzdFggPSBwb2ludGVyQ3VycmVudFg7XG4gICAgICAgICAgICBwb2ludGVyTGFzdFkgPSBwb2ludGVyQ3VycmVudFk7XG4gICAgICAgICAgICB0aWNraW5nID0gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcclxuICAgICAgICAgKiBSZXR1cm5zIGEgdmFsdWUgZnJvbSBhcm91bmQgMC41IHRvIDEsIGJhc2VkIG9uIGRpc3RhbmNlXHJcbiAgICAgICAgICogQHBhcmFtIHtOdW1iZXJ9IHZhbFxyXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBkcmFnT3V0T2ZCb3VuZHNNdWx0aXBsaWVyKHZhbCkge1xuICAgICAgICAgICAgcmV0dXJuIDAuMDAwMDA1ICogTWF0aC5wb3codmFsLCAyKSArIDAuMDAwMSAqIHZhbCArIDAuNTU7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcclxuICAgICAgICAgKiBwcmV2ZW50cyBhbmltYXRpbmcgZmFzdGVyIHRoYW4gY3VycmVudCBmcmFtZXJhdGVcclxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gcmVxdWVzdFRpY2soKSB7XG4gICAgICAgICAgICBpZiAoIXRpY2tpbmcpIHtcbiAgICAgICAgICAgICAgICByZXF1ZXN0QW5pbUZyYW1lKHVwZGF0ZUFuZFJlbmRlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aWNraW5nID0gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIERldGVybWluZSBwb3NpdGlvbiByZWxhdGl2ZSB0byBib3VuZHNcclxuICAgICAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IHJlc3RyaWN0IFdoZXRoZXIgdG8gcmVzdHJpY3QgdGFyZ2V0IHRvIGJvdW5kc1xyXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBjaGVja0JvdW5kcyhyZXN0cmljdCkge1xuICAgICAgICAgICAgdmFyIHhEaWZmID0gMDtcbiAgICAgICAgICAgIHZhciB5RGlmZiA9IDA7XG5cbiAgICAgICAgICAgIGlmIChib3VuZFhtaW4gIT09IHVuZGVmaW5lZCAmJiB0YXJnZXRYIDwgYm91bmRYbWluKSB7XG4gICAgICAgICAgICAgICAgeERpZmYgPSBib3VuZFhtaW4gLSB0YXJnZXRYO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChib3VuZFhtYXggIT09IHVuZGVmaW5lZCAmJiB0YXJnZXRYID4gYm91bmRYbWF4KSB7XG4gICAgICAgICAgICAgICAgeERpZmYgPSBib3VuZFhtYXggLSB0YXJnZXRYO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoYm91bmRZbWluICE9PSB1bmRlZmluZWQgJiYgdGFyZ2V0WSA8IGJvdW5kWW1pbikge1xuICAgICAgICAgICAgICAgIHlEaWZmID0gYm91bmRZbWluIC0gdGFyZ2V0WTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoYm91bmRZbWF4ICE9PSB1bmRlZmluZWQgJiYgdGFyZ2V0WSA+IGJvdW5kWW1heCkge1xuICAgICAgICAgICAgICAgIHlEaWZmID0gYm91bmRZbWF4IC0gdGFyZ2V0WTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHJlc3RyaWN0KSB7XG4gICAgICAgICAgICAgICAgaWYgKHhEaWZmICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHRhcmdldFggPSB4RGlmZiA+IDAgPyBib3VuZFhtaW4gOiBib3VuZFhtYXg7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh5RGlmZiAhPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICB0YXJnZXRZID0geURpZmYgPiAwID8gYm91bmRZbWluIDogYm91bmRZbWF4O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB4OiB4RGlmZixcbiAgICAgICAgICAgICAgICB5OiB5RGlmZixcbiAgICAgICAgICAgICAgICBpbkJvdW5kczogeERpZmYgPT09IDAgJiYgeURpZmYgPT09IDBcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICAvKipcclxuICAgICAgICAgKiBJbml0aWFsaXplIGFuaW1hdGlvbiBvZiB2YWx1ZXMgY29taW5nIHRvIGEgc3RvcFxyXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBzdGFydERlY2VsQW5pbSgpIHtcbiAgICAgICAgICAgIHZhciBmaXJzdFBvaW50ID0gdHJhY2tpbmdQb2ludHNbMF07XG4gICAgICAgICAgICB2YXIgbGFzdFBvaW50ID0gdHJhY2tpbmdQb2ludHNbdHJhY2tpbmdQb2ludHMubGVuZ3RoIC0gMV07XG5cbiAgICAgICAgICAgIHZhciB4T2Zmc2V0ID0gbGFzdFBvaW50LnggLSBmaXJzdFBvaW50Lng7XG4gICAgICAgICAgICB2YXIgeU9mZnNldCA9IGxhc3RQb2ludC55IC0gZmlyc3RQb2ludC55O1xuICAgICAgICAgICAgdmFyIHRpbWVPZmZzZXQgPSBsYXN0UG9pbnQudGltZSAtIGZpcnN0UG9pbnQudGltZTtcblxuICAgICAgICAgICAgdmFyIEQgPSB0aW1lT2Zmc2V0IC8gMTUgLyBtdWx0aXBsaWVyO1xuXG4gICAgICAgICAgICBkZWNWZWxYID0geE9mZnNldCAvIEQgfHwgMDsgLy8gcHJldmVudCBOYU5cbiAgICAgICAgICAgIGRlY1ZlbFkgPSB5T2Zmc2V0IC8gRCB8fCAwO1xuXG4gICAgICAgICAgICB2YXIgZGlmZiA9IGNoZWNrQm91bmRzKCk7XG5cbiAgICAgICAgICAgIGlmIChNYXRoLmFicyhkZWNWZWxYKSA+IDEgfHwgTWF0aC5hYnMoZGVjVmVsWSkgPiAxIHx8ICFkaWZmLmluQm91bmRzKSB7XG4gICAgICAgICAgICAgICAgZGVjZWxlcmF0aW5nID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICByZXF1ZXN0QW5pbUZyYW1lKHN0ZXBEZWNlbEFuaW0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQW5pbWF0ZXMgdmFsdWVzIHNsb3dpbmcgZG93blxyXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBzdGVwRGVjZWxBbmltKCkge1xuICAgICAgICAgICAgaWYgKCFkZWNlbGVyYXRpbmcpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGRlY1ZlbFggKj0gZnJpY3Rpb247XG4gICAgICAgICAgICBkZWNWZWxZICo9IGZyaWN0aW9uO1xuXG4gICAgICAgICAgICB0YXJnZXRYICs9IGRlY1ZlbFg7XG4gICAgICAgICAgICB0YXJnZXRZICs9IGRlY1ZlbFk7XG5cbiAgICAgICAgICAgIHZhciBkaWZmID0gY2hlY2tCb3VuZHMoKTtcblxuICAgICAgICAgICAgaWYgKE1hdGguYWJzKGRlY1ZlbFgpID4gc3RvcFRocmVzaG9sZCB8fCBNYXRoLmFicyhkZWNWZWxZKSA+IHN0b3BUaHJlc2hvbGQgfHwgIWRpZmYuaW5Cb3VuZHMpIHtcblxuICAgICAgICAgICAgICAgIGlmIChib3VuY2UpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlYm91bmRBZGp1c3QgPSAyLjU7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGRpZmYueCAhPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRpZmYueCAqIGRlY1ZlbFggPD0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlY1ZlbFggKz0gZGlmZi54ICogYm91bmNlRGVjZWxlcmF0aW9uO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYWRqdXN0ID0gZGlmZi54ID4gMCA/IHJlYm91bmRBZGp1c3QgOiAtcmVib3VuZEFkanVzdDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWNWZWxYID0gKGRpZmYueCArIGFkanVzdCkgKiBib3VuY2VBY2NlbGVyYXRpb247XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGRpZmYueSAhPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRpZmYueSAqIGRlY1ZlbFkgPD0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlY1ZlbFkgKz0gZGlmZi55ICogYm91bmNlRGVjZWxlcmF0aW9uO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYWRqdXN0ID0gZGlmZi55ID4gMCA/IHJlYm91bmRBZGp1c3QgOiAtcmVib3VuZEFkanVzdDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWNWZWxZID0gKGRpZmYueSArIGFkanVzdCkgKiBib3VuY2VBY2NlbGVyYXRpb247XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZGlmZi54ICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGlmZi54ID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldFggPSBib3VuZFhtaW47XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldFggPSBib3VuZFhtYXg7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWNWZWxYID0gMDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoZGlmZi55ICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGlmZi55ID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldFkgPSBib3VuZFltaW47XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldFkgPSBib3VuZFltYXg7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWNWZWxZID0gMDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGNhbGxVcGRhdGVDYWxsYmFjaygpO1xuXG4gICAgICAgICAgICAgICAgcmVxdWVzdEFuaW1GcmFtZShzdGVwRGVjZWxBbmltKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZGVjZWxlcmF0aW5nID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcclxuICAgICAqIEBzZWUgaHR0cDovL3d3dy5wYXVsaXJpc2guY29tLzIwMTEvcmVxdWVzdGFuaW1hdGlvbmZyYW1lLWZvci1zbWFydC1hbmltYXRpbmcvXHJcbiAgICAgKi9cbiAgICA7XG5cbiAgICBtb2R1bGUuZXhwb3J0cyA9IEltcGV0dXM7XG4gICAgdmFyIHJlcXVlc3RBbmltRnJhbWUgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSB8fCB3aW5kb3cud2Via2l0UmVxdWVzdEFuaW1hdGlvbkZyYW1lIHx8IHdpbmRvdy5tb3pSZXF1ZXN0QW5pbWF0aW9uRnJhbWUgfHwgZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gICAgICAgICAgICB3aW5kb3cuc2V0VGltZW91dChjYWxsYmFjaywgMTAwMCAvIDYwKTtcbiAgICAgICAgfTtcbiAgICB9KSgpO1xuXG4gICAgZnVuY3Rpb24gZ2V0UGFzc2l2ZVN1cHBvcnRlZCgpIHtcbiAgICAgICAgdmFyIHBhc3NpdmVTdXBwb3J0ZWQgPSBmYWxzZTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdmFyIG9wdGlvbnMgPSBPYmplY3QuZGVmaW5lUHJvcGVydHkoe30sIFwicGFzc2l2ZVwiLCB7XG4gICAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgICAgICAgICAgICAgIHBhc3NpdmVTdXBwb3J0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInRlc3RcIiwgbnVsbCwgb3B0aW9ucyk7XG4gICAgICAgIH0gY2F0Y2ggKGVycikge31cblxuICAgICAgICBnZXRQYXNzaXZlU3VwcG9ydGVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHBhc3NpdmVTdXBwb3J0ZWQ7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBwYXNzaXZlU3VwcG9ydGVkO1xuICAgIH1cbn0pO1xuIiwiLy9UZW1wbGF0ZSBIVE1MXHJcbnZhciB2c21fdGVtcGxhdGUgPSAnPGRpdiBpZD1cInZzbV9tb2RhbF9iYXNlXCIgY2xhc3M9XCJ2c20tbW9kYWwgdnNtLWhpZGUgdnNtLWZhZGVcIiBzdHlsZT1cInotaW5kZXg6IDk5OTk7XCIgdGFiaW5kZXg9XCItMVwiIHJvbGU9XCJkaWFsb2dcIj4gPGRpdiBjbGFzcz1cInZzbS1tb2RhbC1kaWFsb2dcIj4gPGRpdiBjbGFzcz1cInZzbS1tb2RhbC1jb250ZW50XCI+IDxkaXYgY2xhc3M9XCJ2c20tbW9kYWwtaGVhZGVyXCI+IDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwidnNtLWNsb3NlXCI+IDwvYnV0dG9uPiA8L2Rpdj48ZGl2IGNsYXNzPVwidnNtLW1vZGFsLWJvZHkgdnNtLW9wdGlvbi1ib2R5IHZzbS1saXN0LWJvZHlcIj4gPGEgaHJlZj1cImphdmFzY3JpcHQ6dm9pZCgwKTtcIiBjbGFzcz1cInZzbS1iYWNrLWxpbmsgdnNtLWJhY2stc3RlcFwiPiA8aSBjbGFzcz1cInZzbS1iYWNrLWFycm93XCI+PC9pPiA8L2E+IDxkaXYgY2xhc3M9XCJ2c20taW4tcHJvZ3Jlc3NcIj4gPHAgY2xhc3M9XCJ2c20taGVhZGVyIHZzbS1jZW50ZXJcIj48L3A+PGRpdiBjbGFzcz1cInZzbS1saW5lLXN0ZXAgY2VudGVyLXBpZWNlIHZzbS1jb2x1bW5zXCI+IDwvZGl2PjxkaXYgY2xhc3M9XCJ2c20tbGlzdC1jb250YWluZXJcIj4gPGkgY2xhc3M9XCJ2c20tbG9hZGVySWNvblwiIGFsdD1cIkxvYWRpbmcgb3B0aW9uc1wiPjwvaT4gPC9kaXY+PC9kaXY+PGRpdiBjbGFzcz1cInZzbS1maW5hbFwiPiA8ZGl2IGNsYXNzPVwiY2VudGVyLXBpZWNlIHZzbS1saW5lLXN0ZXAgdnNtLWNvbHVtbnMgdmVoaWNsZS1yZXN1bHQtd3JhcFwiPiA8ZGl2IGNsYXNzPVwidnNtLWNvbHVtbi0yIHZzbS1iZWZvcmVcIj48L2Rpdj48ZGl2IGNsYXNzPVwidnNtLWNvbHVtbi0yIG5vLXN0eWxlXCI+PGkgY2xhc3M9XCJkb3Qtc3R5bGUgZG90LWJlZm9yZSBhY3RpdmVcIj48L2k+PC9kaXY+PHAgY2xhc3M9XCJ2ZWhpY2xlLXJlc3VsdC1uYW1lXCI+PC9wPjxwIGNsYXNzPVwidmVoaWNsZS1yZXN1bHQtc2l6ZVwiPjwvcD48L2Rpdj4gPGRpdiBjbGFzcz1cImNlbnRlci1waWVjZSB2ZWhpY2xlLWltYWdlLXdyYXBcIj4gPGRpdiBzdHlsZT1cInBvc2l0aW9uOiByZWxhdGl2ZTsgdGV4dC1hbGlnbjogY2VudGVyOyBtaW4taGVpZ2h0OiAxMjBweDtcIj4gPGkgY2xhc3M9XCJ2c20tbG9hZGVySWNvblwiIGFsdD1cIkxvYWRpbmcgYW4gaW1hZ2Ugb2YgeW91ciB2ZWhpY2xlXCI+PC9pPiA8aW1nIHNyYz1cIlwiIGFsdD1cIlwiIGNsYXNzPVwidnNtLXZlaGljbGUtZGlzcGxheVwiIHN0eWxlPVwiZGlzcGxheTogbm9uZTtcIj4gPC9kaXY+PGEgaHJlZj1cImphdmFzY3JpcHQ6dm9pZCgwKTtcIiBjbGFzcz1cInZzbS1idG4gdnNtLWJ0bi1ncmF5IHZzbS1mdWxsLXdpZHRoIHZzbS1maW5kXCI+PC9hPiA8L2Rpdj48L2Rpdj48L2Rpdj48L2Rpdj48L2Rpdj48L2Rpdj4nO1xyXG5cclxudmFyIF92c21Nb2RhbElEQ291bnRlciA9IDA7XHJcbmZ1bmN0aW9uIFJpZGVTdHlsZXJWZWhpY2xlU2VsZWN0aW9uTW9kYWwob3B0aW9ucykge1xyXG4gICAgdmFyIGluZm9BcnJheSA9IFtdLCAvL0tlZXAgdHJhY2sgb2Ygc2VsZWN0ZWQgb3B0aW9ucyBpbmZvXHJcbiAgICBkYXRhQXJyYXkgPSBbXSwgLy9LZWVwIHRyYWNrIG9mIHNlbGVjdGVkIG9wdGlvbnMgZGF0YSAoZGF0YSBzZW50IHRvIFZlaGljbGUvU2VsZWN0IGVuZHBvaW50KVxyXG4gICAgbW9kYWxBcnJheSA9IFtdLCAvL0tlZXAgdHJhY2sgb2YgbW9kYWwgc2NyZWVuIGdlbmVyYXRlZCBieSB0aGlzIGluc3RhbmNlXHJcbiAgICBkaXNDb3VudGludWVkID0gZmFsc2U7IC8vRGVjaWRlIHdoZXRoZXIgb3Igbm90IGNvbnRpbnVlIHRvIG5leHQgbW9kYWwgc2NyZWVuXHJcblxyXG4gICAgLy9TaW1pbGFyIHRvICQuZXh0ZW5kXHJcbiAgICBmdW5jdGlvbiBleHRlbmQob3V0KSB7XHJcbiAgICAgICAgb3V0ID0gb3V0IHx8IHt9O1xyXG5cclxuICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAoIWFyZ3VtZW50c1tpXSlcclxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG5cclxuICAgICAgICAgICAgZm9yICh2YXIga2V5IGluIGFyZ3VtZW50c1tpXSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGFyZ3VtZW50c1tpXS5oYXNPd25Qcm9wZXJ0eShrZXkpKVxyXG4gICAgICAgICAgICAgICAgb3V0W2tleV0gPSBhcmd1bWVudHNbaV1ba2V5XTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIG91dDtcclxuICAgIH07XHJcblxyXG4gICAgLy8gRXh0ZW5kIGRlZmF1bHQgc2V0dGluZ3NcclxuICAgIG9wdGlvbnMgPSBleHRlbmQoe1xyXG4gICAgICAgIENvbmZpcm1CdXR0b25UZXh0OiAnQ29uZmlybSBWZWhpY2xlJyxcclxuICAgICAgICBHcm91cE9wdGlvbnM6IGZhbHNlLFxyXG4gICAgICAgIEluY2x1ZGVPRVRpcmVPcHRpb246IGZhbHNlLFxyXG4gICAgICAgIFllYXJTY3JlZW5Db2x1bW5zOiAzLFxyXG4gICAgICAgIE1ha2VTY3JlZW5Db2x1bW5zOiAyLFxyXG5cclxuICAgICAgICBjb250YWluZXI6IGRvY3VtZW50LmJvZHksXHJcblxyXG4gICAgICAgIGFmdGVyQmFja0NsaWNrZWQ6IG51bGwsXHJcbiAgICAgICAgYWZ0ZXJPcHRpb25TZWxlY3RlZDogbnVsbCxcclxuICAgICAgICBjYWxsYmFjazogbnVsbFxyXG4gICAgfSwgb3B0aW9ucyk7XHJcblxyXG4gICAgLy9DaGVjayBpZiB0cmFuc2l0aW9uIGlzIHN1cHBvcnRlZCwgQm9vbGVhblxyXG4gICAgdmFyIHRyYW5zaXRpb25TdXBwb3J0ID0gKGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgdmFyIHRoaXNCb2R5ID0gZG9jdW1lbnQuYm9keSB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQsXHJcbiAgICAgICAgdGhpc1N0eWxlID0gdGhpc0JvZHkuc3R5bGUsXHJcbiAgICAgICAgc3VwcG9ydCA9IHRoaXNTdHlsZS5XZWJraXRUcmFuc2l0aW9uICE9PSB1bmRlZmluZWQgfHwgdGhpc1N0eWxlLk1velRyYW5zaXRpb24gIT09IHVuZGVmaW5lZCB8fCB0aGlzU3R5bGUuT1RyYW5zaXRpb24gIT09IHVuZGVmaW5lZCB8fCB0aGlzU3R5bGUudHJhbnNpdGlvbiAhPT0gdW5kZWZpbmVkO1xyXG5cclxuICAgICAgICByZXR1cm4gc3VwcG9ydDtcclxuICAgIH0pKCk7XHJcblxyXG4gICAgLy8gYWRkIG9uVHJhbnNpdGlvbkVuZE9uY2UgdG8gSFRNTEVsZW1lbnRcclxuICAgIChmdW5jdGlvbigpIHtcclxuICAgICAgICB2YXIgaSxcclxuICAgICAgICBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpLFxyXG4gICAgICAgIHRyYW5zaXRpb25zID0ge1xyXG4gICAgICAgICAgICAndHJhbnNpdGlvbic6J3RyYW5zaXRpb25lbmQnLFxyXG4gICAgICAgICAgICAnT1RyYW5zaXRpb24nOidvdHJhbnNpdGlvbmVuZCcsXHJcbiAgICAgICAgICAgICdNb3pUcmFuc2l0aW9uJzondHJhbnNpdGlvbmVuZCcsXHJcbiAgICAgICAgICAgICdXZWJraXRUcmFuc2l0aW9uJzond2Via2l0VHJhbnNpdGlvbkVuZCdcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgdHJhbnNpdGlvbkVuZCA9ICcnO1xyXG4gICAgICAgIGZvciAoaSBpbiB0cmFuc2l0aW9ucykge1xyXG4gICAgICAgICAgICBpZiAodHJhbnNpdGlvbnMuaGFzT3duUHJvcGVydHkoaSkgJiYgZWwuc3R5bGVbaV0gIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgdHJhbnNpdGlvbkVuZCA9IHRyYW5zaXRpb25zW2ldO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIEhUTUxFbGVtZW50LnByb3RvdHlwZS5vblRyYW5zaXRpb25FbmRPbmNlID0gZnVuY3Rpb24oY2FsbGJhY2spIHtcclxuICAgICAgICAgICAgaWYgKHRyYW5zaXRpb25FbmQgPT09ICcnKSB7XHJcbiAgICAgICAgICAgICAgICBjYWxsYmFjaygpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmFyIHRyYW5zaXRpb25FbmRXcmFwID0gZnVuY3Rpb24oZSkge1xyXG4gICAgICAgICAgICAgICAgY2FsbGJhY2soKTtcclxuICAgICAgICAgICAgICAgIGUudGFyZ2V0LnJlbW92ZUV2ZW50TGlzdGVuZXIoZS50eXBlLCB0cmFuc2l0aW9uRW5kV3JhcCk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcih0cmFuc2l0aW9uRW5kLCB0cmFuc2l0aW9uRW5kV3JhcCwgZmFsc2UpO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICB9O1xyXG4gICAgfSgpKTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEFkZCBjZXJ0YWluIGNsYXNzIHRvIGVsZW1lbnRzXHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICogQHBhcmFtICB7RWxlbWVudHxbRWxlbWVudF19IGVsZW1lbnRzIC0gRWxlbWVudChzKSB0byBzZWFyY2hcclxuICAgICAqIEBwYXJhbSAge1N0cmluZ30gIG15Q2xhc3MgLSBDbGFzcyBuYW1lIHRvIGFkZFxyXG4gICAgICogQHJldHVybiB2b2lkXHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIGFkZENsYXNzKGVsZW1lbnRzLCBteUNsYXNzKSB7XHJcbiAgICAgICAgaWYgKCFlbGVtZW50cykgeyByZXR1cm47IH1cclxuICAgICAgICBpZiAodHlwZW9mKGVsZW1lbnRzKSA9PT0gJ3N0cmluZycpIGVsZW1lbnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChlbGVtZW50cyk7XHJcbiAgICAgICAgZWxzZSBpZiAoZWxlbWVudHMudGFnTmFtZSkgZWxlbWVudHM9W2VsZW1lbnRzXTtcclxuICAgICAgICAvLyBhZGQgY2xhc3MgdG8gYWxsIGNob3NlbiBlbGVtZW50c1xyXG4gICAgICAgIGZvciAodmFyIGk9MDsgaTxlbGVtZW50cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAoZWxlbWVudHNbaV0uY2xhc3NOYW1lLnRyaW0oKSA9PSAnJykgZWxlbWVudHNbaV0uY2xhc3NOYW1lID0gbXlDbGFzcztcclxuICAgICAgICAgICAgZWxzZSBpZiAoKCcgJytlbGVtZW50c1tpXS5jbGFzc05hbWUrJyAnKS5pbmRleE9mKCcgJytteUNsYXNzKycgJykgPCAwKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBhZGQgY2xhc3NcclxuICAgICAgICAgICAgICAgIGVsZW1lbnRzW2ldLmNsYXNzTmFtZSArPSAnICcgKyBteUNsYXNzO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmVtb3ZlIGNlcnRhaW4gY2xhc3MgZnJvbSBlbGVtZW50c1xyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqIEBwYXJhbSAge0VsZW1lbnR8W0VsZW1lbnRdfSBlbGVtZW50cyAtIEVsZW1lbnQocykgdG8gc2VhcmNoXHJcbiAgICAgKiBAcGFyYW0gIHtTdHJpbmd9ICBteUNsYXNzIC0gQ2xhc3MgbmFtZSB0byBtYXRjaCBhZ2FpbnN0XHJcbiAgICAgKiBAcmV0dXJuIHZvaWRcclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gcmVtb3ZlQ2xhc3MoZWxlbWVudHMsIG15Q2xhc3MpIHtcclxuICAgICAgICBpZiAoIWVsZW1lbnRzKSB7IHJldHVybjsgfVxyXG4gICAgICAgIGlmICh0eXBlb2YoZWxlbWVudHMpID09PSAnc3RyaW5nJykgZWxlbWVudHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGVsZW1lbnRzKTtcclxuICAgICAgICBlbHNlIGlmIChlbGVtZW50cy50YWdOYW1lKSBlbGVtZW50cz1bZWxlbWVudHNdO1xyXG4gICAgICAgIHZhciByZWcxID0gbmV3IFJlZ0V4cCgnICcrbXlDbGFzcysnICcsJ2cnKTtcclxuICAgICAgICB2YXIgcmVnMiA9IG5ldyBSZWdFeHAoJyheKScrbXlDbGFzcysnKCR8ICknLCdnJyk7XHJcbiAgICAgICAgdmFyIHJlZzMgPSBuZXcgUmVnRXhwKCcoXnwgKScrbXlDbGFzcysnKCQpJywnZycpO1xyXG4gICAgICAgIC8vIHJlbW92ZSBjbGFzcyBmcm9tIGFsbCBjaG9zZW4gZWxlbWVudHNcclxuICAgICAgICBmb3IgKHZhciBpPTA7IGk8ZWxlbWVudHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgZWxlbWVudHNbaV0uY2xhc3NOYW1lID0gZWxlbWVudHNbaV0uY2xhc3NOYW1lLnJlcGxhY2UocmVnMSwnICcpO1xyXG4gICAgICAgICAgICBlbGVtZW50c1tpXS5jbGFzc05hbWUgPSBlbGVtZW50c1tpXS5jbGFzc05hbWUucmVwbGFjZShyZWcyLCcnKTtcclxuICAgICAgICAgICAgZWxlbWVudHNbaV0uY2xhc3NOYW1lID0gZWxlbWVudHNbaV0uY2xhc3NOYW1lLnJlcGxhY2UocmVnMywnJyk7XHJcblxyXG4gICAgICAgICAgICBpZiAoZWxlbWVudHNbaV0uY2xhc3NOYW1lLnRyaW0oKSA9PSAnJykgZWxlbWVudHNbaV0ucmVtb3ZlQXR0cmlidXRlKCdjbGFzcycpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldCB0aGUgY2xvc2VzdCBtYXRjaGluZyBlbGVtZW50IHVwIHRoZSBET00gdHJlZS5cclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKiBAcGFyYW0gIHtFbGVtZW50fSBlbGVtZW50IC0gU3RhcnRpbmcgZWxlbWVudFxyXG4gICAgICogQHBhcmFtICB7U3RyaW5nfSAgc2VsZWN0b3IgU2VsZWN0b3IgdG8gbWF0Y2ggYWdhaW5zdFxyXG4gICAgICogQHJldHVybiB7Qm9vbGVhbnxFbGVtZW50fSAgUmV0dXJucyBudWxsIGlmIG5vIG1hdGNoIGZvdW5kXHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIGdldENsb3Nlc3QoZWxlbWVudCwgc2VsZWN0b3IpIHtcclxuICAgICAgICAvLyBFbGVtZW50Lm1hdGNoZXMoKSBwb2x5ZmlsbFxyXG4gICAgICAgIGlmICghRWxlbWVudC5wcm90b3R5cGUubWF0Y2hlcykge1xyXG4gICAgICAgICAgICBFbGVtZW50LnByb3RvdHlwZS5tYXRjaGVzID1cclxuICAgICAgICAgICAgRWxlbWVudC5wcm90b3R5cGUubWF0Y2hlc1NlbGVjdG9yIHx8XHJcbiAgICAgICAgICAgIEVsZW1lbnQucHJvdG90eXBlLm1vek1hdGNoZXNTZWxlY3RvciB8fFxyXG4gICAgICAgICAgICBFbGVtZW50LnByb3RvdHlwZS5tc01hdGNoZXNTZWxlY3RvciB8fFxyXG4gICAgICAgICAgICBFbGVtZW50LnByb3RvdHlwZS5vTWF0Y2hlc1NlbGVjdG9yIHx8XHJcbiAgICAgICAgICAgIEVsZW1lbnQucHJvdG90eXBlLndlYmtpdE1hdGNoZXNTZWxlY3RvciB8fFxyXG4gICAgICAgICAgICBmdW5jdGlvbihzKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbWF0Y2hlcyA9ICh0aGlzLmRvY3VtZW50IHx8IHRoaXMub3duZXJEb2N1bWVudCkucXVlcnlTZWxlY3RvckFsbChzKSxcclxuICAgICAgICAgICAgICAgICAgICBpID0gbWF0Y2hlcy5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICB3aGlsZSAoLS1pID49IDAgJiYgbWF0Y2hlcy5pdGVtKGkpICE9PSB0aGlzKSB7fVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGkgPiAtMTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEdldCBjbG9zZXN0IG1hdGNoXHJcbiAgICAgICAgZm9yICggOyBlbGVtZW50ICYmIGVsZW1lbnQgIT09IGRvY3VtZW50OyBlbGVtZW50ID0gZWxlbWVudC5wYXJlbnROb2RlICkge1xyXG4gICAgICAgICAgICBpZiAoIGVsZW1lbnQubWF0Y2hlcyggc2VsZWN0b3IgKSApIHJldHVybiBlbGVtZW50O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9O1xyXG5cclxuICAgIGZ1bmN0aW9uIGNyZWF0ZUJhY2tkcm9wKCkge1xyXG4gICAgICAgIHZhciBleGlzdGluZ0JhY2tkcm9wID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ZzbS1iYWNrZHJvcCcpO1xyXG4gICAgICAgIGlmICghZXhpc3RpbmdCYWNrZHJvcCkge1xyXG4gICAgICAgICAgICB2YXIgYmFja0Ryb3AgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgYmFja0Ryb3AuaWQgPSAndnNtLWJhY2tkcm9wJztcclxuICAgICAgICAgICAgYmFja0Ryb3Auc3R5bGUub3BhY2l0eSA9IDA7XHJcbiAgICAgICAgICAgIGJhY2tEcm9wLnN0eWxlLnRyYW5zaXRpb24gPSAnb3BhY2l0eSBsaW5lYXIgLjNzJztcclxuICAgICAgICAgICAgZ2V0TW9kYWxDb250YWluZXIoKS5hcHBlbmRDaGlsZChiYWNrRHJvcCk7XHJcblxyXG4gICAgICAgICAgICBzaG93QmFja2Ryb3AoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gc2hvd0JhY2tkcm9wKCkge1xyXG4gICAgICAgIHZhciBleGlzdGluZ0JhY2tkcm9wID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ZzbS1iYWNrZHJvcCcpO1xyXG4gICAgICAgIGlmICghZXhpc3RpbmdCYWNrZHJvcCkge1xyXG4gICAgICAgICAgICBjcmVhdGVCYWNrZHJvcCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgIGV4aXN0aW5nQmFja2Ryb3Auc3R5bGUub3BhY2l0eSA9IDAuNTVcclxuICAgICAgICAgICAgZXhpc3RpbmdCYWNrZHJvcC5vblRyYW5zaXRpb25FbmRPbmNlKGZ1bmN0aW9uKCl7fSk7XHJcbiAgICAgICAgfSwgMCk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gaGlkZUJhY2tkcm9wKCkge1xyXG4gICAgICAgIHZhciBleGlzdGluZ0JhY2tkcm9wID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ZzbS1iYWNrZHJvcCcpO1xyXG4gICAgICAgIGlmIChleGlzdGluZ0JhY2tkcm9wKSB7XHJcbiAgICAgICAgICAgIGV4aXN0aW5nQmFja2Ryb3Auc3R5bGUub3BhY2l0eSA9IDA7XHJcbiAgICAgICAgICAgIGV4aXN0aW5nQmFja2Ryb3Aub25UcmFuc2l0aW9uRW5kT25jZShmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgZXhpc3RpbmdCYWNrZHJvcC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGV4aXN0aW5nQmFja2Ryb3ApO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gaGlkZU1vZGFscygpIHtcclxuICAgICAgICB2YXIgYWxsTW9kYWxzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnZzbS1tb2RhbDpub3QoI3ZzbV9tb2RhbF9iYXNlKScpLFxyXG4gICAgICAgIGN1cnJlbnRCYXNlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnZzbS1tb2RhbC5pbicpWzBdO1xyXG5cclxuICAgICAgICB2YXIgY29weU9mQXJyYXkgPSBpbmZvQXJyYXkuc2xpY2UoMCksIGNvcHlPZkRhdGFBcnJheSA9IGRhdGFBcnJheS5zbGljZSgwKTtcclxuXHJcbiAgICAgICAgaW5mb0FycmF5ID0gW107XHJcbiAgICAgICAgZGF0YUFycmF5ID0gW107XHJcbiAgICAgICAgZGlzQ291bnRpbnVlZCA9IHRydWU7XHJcblxyXG4gICAgICAgIGlmIChtb2RhbEFycmF5LmluZGV4T2YoY3VycmVudEJhc2UuZ2V0QXR0cmlidXRlKCdpZCcpKSA+IC0xKSB7XHJcbiAgICAgICAgICAgIGN1cnJlbnRCYXNlLnN0eWxlLm9wYWNpdHkgPSAwO1xyXG4gICAgICAgICAgICBjdXJyZW50QmFzZS5vblRyYW5zaXRpb25FbmRPbmNlKGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICBbXS5mb3JFYWNoLmNhbGwoYWxsTW9kYWxzLCBmdW5jdGlvbiAodGhpc01vZGFsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRoaXNJRCA9IHRoaXNNb2RhbC5nZXRBdHRyaWJ1dGUoJ2lkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1vZGFsQXJyYXkuaW5kZXhPZih0aGlzSUQpID4gLTEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpc01vZGFsLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpc01vZGFsKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgaW5mb0Jhc2VPYmogPSB7fTtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNvcHlPZkFycmF5Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgIHZhciBzcGxpdHRlZEFycmF5ID0gY29weU9mQXJyYXlbaV0uc3BsaXQoJzonKTtcclxuICAgICAgICAgICAgICAgICAgaWYgKHNwbGl0dGVkQXJyYXkubGVuZ3RoID09IDIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgIGluZm9CYXNlT2JqW3NwbGl0dGVkQXJyYXlbMF1dID0gc3BsaXR0ZWRBcnJheVsxXTtcclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLmNhbGxiYWNrICYmIHR5cGVvZiBvcHRpb25zLmNhbGxiYWNrID09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgb3V0T2JqID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBGaW5hbFNlbGVjdGlvbk1hZGU6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBWZWhpY2xlOiBpbmZvQmFzZU9iaixcclxuICAgICAgICAgICAgICAgICAgICAgICAgRnVsbFNlbGVjdGlvbkRhdGE6IGNvcHlPZkRhdGFBcnJheVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBvcHRpb25zLmNhbGxiYWNrKG91dE9iaik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ05vIGNhbGxiYWNrIGZ1bmN0aW9uIHByb3ZpZGVkLicpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgaGlkZUJhY2tkcm9wKCk7XHJcbiAgICAgICAgICAgIHJlbW92ZUNsYXNzKGRvY3VtZW50LmJvZHksICd2c20tbW9kYWwtb3BlbicpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgY29uc29sZS53YXJuKCdUaGlzIHZzbSBpbnN0YW5jZSBpcyBub3Qgc2hvd24geWV0LicpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHVybiB0aGUgY29udGFpbmVyIHRoYXQgbW9kYWxzIHNob3VsZCBiZSBhcHBlbmRlZCB0b1xyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBnZXRNb2RhbENvbnRhaW5lcigpIHtcclxuICAgICAgICBpZiAodHlwZW9mIG9wdGlvbnMuY29udGFpbmVyID09PSAnZnVuY3Rpb24nKSByZXR1cm4gb3B0aW9ucy5jb250YWluZXIoKTtcclxuXHJcbiAgICAgICAgaWYgKG9wdGlvbnMuY29udGFpbmVyKSByZXR1cm4gb3B0aW9ucy5jb250YWluZXI7XHJcblxyXG4gICAgICAgIHJldHVybiBkb2N1bWVudC5ib2R5O1xyXG4gICAgfVxyXG5cclxuICAgIC8qTG9hZCBIVE1MIGNvZGUgYW5kIGFwcGVuZCB0byBib2R5Ki9cclxuICAgIGZ1bmN0aW9uIGxvYWRCYXNlKCkge1xyXG4gICAgICAgIHZhciBleGlzdGluZ01vZGFsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ZzbV9tb2RhbF9iYXNlJyk7XHJcbiAgICAgICAgaWYgKCFleGlzdGluZ01vZGFsKSB7XHJcbiAgICAgICAgICAgIHZhciBkaXZFbGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgZGl2RWxlLmlubmVySFRNTCA9IHZzbV90ZW1wbGF0ZTtcclxuICAgICAgICAgICAgZ2V0TW9kYWxDb250YWluZXIoKS5hcHBlbmRDaGlsZChkaXZFbGUuZmlyc3RDaGlsZCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogR2VuZXJhdGUgYW5kIHByZXBhcmUgbW9kYWwgc2NyZWVuXHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICogQHBhcmFtICB7RnVuY3Rpb259IHByZXBhcmVGdW5jdGlvbiAtIFRoZSBmdW5jdGlvbiB0byBwcmVwYXJlIHRoZSBtb2RhbFxyXG4gICAgICogQHBhcmFtICB7T2JqZWN0fSBwcmVwYXJlRnVuY3Rpb25PcHRpb25zIC0gT3B0aW9ucyB0byBwYXNzIGluXHJcbiAgICAgKiBAcGFyYW0gIHtPYmplY3R9IHRyYW5zaXRpb25Nb2RhbCAtIFRoZSBtb2RhbCBzY3JlZW4gdG8gdHJhbnNpdGlvbiB0b1xyXG4gICAgICogQHJldHVybiB7RWxlbWVudH0gIFJldHVybnMgdGhlIHByZXBhcmVkIG1vZGFsXHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIGJhc2UocHJlcGFyZUZ1bmN0aW9uLCBwcmVwYXJlRnVuY3Rpb25PcHRpb25zLCB0cmFuc2l0aW9uTW9kYWwpIHtcclxuICAgICAgICB2YXIgbW9kYWxCYXNlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ZzbV9tb2RhbF9iYXNlJyk7XHJcbiAgICAgICAgaWYgKCFtb2RhbEJhc2UpIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICAgICAgLy9NYWtlIGEgY29weSBvZiAjdnNtX21vZGFsX2Jhc2VcclxuICAgICAgICB2YXIgbW9kYWxCYXNlQ29weSA9IG1vZGFsQmFzZS5jbG9uZU5vZGUodHJ1ZSk7XHJcblxyXG4gICAgICAgIC8vT3ZlcnJpZGUgaWQgb2YgbW9kYWxCYXNlQ29weSBhbmQgYXBwZW5kIHRvIGJvZHlcclxuICAgICAgICBtb2RhbEJhc2VDb3B5LmlkID0gJ3ZzbV9tb2RhbF8nICsgX3ZzbU1vZGFsSURDb3VudGVyO1xyXG4gICAgICAgIG1vZGFsQXJyYXkucHVzaCgndnNtX21vZGFsXycgKyBfdnNtTW9kYWxJRENvdW50ZXIpO1xyXG4gICAgICAgIG1vZGFsQmFzZUNvcHkuY2xhc3NOYW1lICs9ICcgdnNtX21vZGFsXycgKyBfdnNtTW9kYWxJRENvdW50ZXI7XHJcbiAgICAgICAgZ2V0TW9kYWxDb250YWluZXIoKS5hcHBlbmRDaGlsZChtb2RhbEJhc2VDb3B5KTtcclxuXHJcbiAgICAgICAgLy9TZXR1cCB0cmFuc2l0aW9uXHJcbiAgICAgICAgaWYgKHR5cGVvZih0cmFuc2l0aW9uTW9kYWwpICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgICAgICBwcmVwYXJlRnVuY3Rpb25PcHRpb25zID0gZXh0ZW5kKHtcclxuICAgICAgICAgICAgICAgIGJhY2tNb2RhbDogdHJhbnNpdGlvbk1vZGFsLFxyXG4gICAgICAgICAgICAgICAgdGhpc01vZGFsOiBtb2RhbEJhc2VDb3B5XHJcbiAgICAgICAgICAgIH0sIHByZXBhcmVGdW5jdGlvbk9wdGlvbnMpO1xyXG5cclxuICAgICAgICAgICAgdmFyIGJhY2tMaW5rcyA9IG1vZGFsQmFzZUNvcHkucXVlcnlTZWxlY3RvckFsbCgnLnZzbS1iYWNrLXN0ZXAnKTtcclxuICAgICAgICAgICAgW10uZm9yRWFjaC5jYWxsKGJhY2tMaW5rcywgZnVuY3Rpb24gKGJhY2tMaW5rKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgYmFja0hhbmRsZXIgPSBmdW5jdGlvbihlKXtcclxuICAgICAgICAgICAgICAgICAgICBlLnRhcmdldC5yZW1vdmVFdmVudExpc3RlbmVyKGUudHlwZSwgYmFja0hhbmRsZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBibSA9IHByZXBhcmVGdW5jdGlvbk9wdGlvbnMuYmFja01vZGFsLFxyXG4gICAgICAgICAgICAgICAgICAgIGJjID0gcHJlcGFyZUZ1bmN0aW9uT3B0aW9ucy50aGlzTW9kYWw7XHJcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNpdGlvblRvTW9kYWwoYm0sIGJjLCB0cnVlKVxyXG4gICAgICAgICAgICAgICAgICAgIC5kb25lKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGluZm9BcnJheS5sZW5ndGgpIGluZm9BcnJheS5wb3AoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkYXRhQXJyYXkubGVuZ3RoKSBkYXRhQXJyYXkucG9wKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYmMucGFyZW50Tm9kZSkgYmMucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChiYyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuYWZ0ZXJCYWNrQ2xpY2tlZCAmJiB0eXBlb2Ygb3B0aW9ucy5hZnRlckJhY2tDbGlja2VkID09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaW5mb0Jhc2VPYmogPSB7fTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpbmZvQXJyYXkubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzcGxpdHRlZEFycmF5ID0gaW5mb0FycmF5W2ldLnNwbGl0KCc6Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3BsaXR0ZWRBcnJheS5sZW5ndGggPT0gMikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZm9CYXNlT2JqW3NwbGl0dGVkQXJyYXlbMF1dID0gc3BsaXR0ZWRBcnJheVsxXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvdXRJbmZvT2JqID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBGdWxsU2VsZWN0aW9uOiBpbmZvQmFzZU9iaixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRnVsbFNlbGVjdGlvbkRhdGE6IGRhdGFBcnJheVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5hZnRlckJhY2tDbGlja2VkKG91dEluZm9PYmopO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYmFja0xpbmsuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBiYWNrSGFuZGxlciwgZmFsc2UpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vQ2FsbCB0aGUgcHJlcGFyZSBmdW5jdGlvbiB0byBpbml0aWFsaXplIHRoZSBuZXcgbW9kYWxcclxuICAgICAgICBpZiAodHlwZW9mIHByZXBhcmVGdW5jdGlvbiA9PT0gXCJmdW5jdGlvblwiKSBwcmVwYXJlRnVuY3Rpb24obW9kYWxCYXNlQ29weSwgcHJlcGFyZUZ1bmN0aW9uT3B0aW9ucyk7XHJcblxyXG4gICAgICAgIC8vYmluZCBjbGljayBldmVudCB0byBjbG9zZSB0aGUgbW9kYWxcclxuICAgICAgICB2YXIgY2xvc2VCdXR0b25zID0gbW9kYWxCYXNlQ29weS5xdWVyeVNlbGVjdG9yQWxsKCcudnNtLWNsb3NlJyk7XHJcbiAgICAgICAgW10uZm9yRWFjaC5jYWxsKGNsb3NlQnV0dG9ucywgZnVuY3Rpb24gKGNsb3NlQnV0dG9uKSB7XHJcbiAgICAgICAgICAgIGNsb3NlQnV0dG9uLm9uY2xpY2sgPSBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgaGlkZU1vZGFscygpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBfdnNtTW9kYWxJRENvdW50ZXIrKztcclxuXHJcbiAgICAgICAgcmV0dXJuIG1vZGFsQmFzZUNvcHk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUcmFuc2l0aW9uIGJldHdlZW4gbW9kYWxcclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKiBAcGFyYW0gIHtFbGVtZW50fSB0b01vZGFsIC0gVGhlIG1vZGFsIHRvIHRyYW5zaXRpb24gdG9cclxuICAgICAqIEBwYXJhbSAge0VsZW1lbnR9IGZyb21Nb2RhbCAtIFRoZSBjdXJyZW50IG1vZGFsIHRvIHRyYW5zaXRpb24gZnJvbVxyXG4gICAgICogQHBhcmFtICB7Qm9vbGVhbn0gYmFja3dhcmRzIC0gc2V0IHRvIHRydWUsIGlmIHRyYW5zaXRpb24gZnJvbSBoaWdoZXIgaW5kZXggdG8gbG93ZXIgaW5kZXhcclxuICAgICAqIEByZXR1cm4ge1JpZGVTdHlsZXJQcm9taXNlfSAtIFJldHVybnMgYSBwcm9taXNlIHRoYXQgd2lsbCByZXNvbHZlIHdoZW4gdGhlIHRyYW5zaXRpb24gaXMgY29tcGxldGVcclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gdHJhbnNpdGlvblRvTW9kYWwodG9Nb2RhbCwgZnJvbU1vZGFsLCBiYWNrd2FyZHMpIHtcclxuICAgICAgICBiYWNrd2FyZHMgPSAhISBiYWNrd2FyZHM7XHJcblxyXG4gICAgICAgIGlmICghdG9Nb2RhbCB8fCAhZnJvbU1vZGFsKVxyXG4gICAgICAgICAgICByZXR1cm47XHJcblxyXG4gICAgICAgIC8qKiBAdHlwZSB7UmlkZVN0eWxlclByb21pc2V9ICovXHJcbiAgICAgICAgdmFyIGZyb21BbmltYXRlUHJvbWlzZSA9IHJpZGVzdHlsZXIucHJvbWlzZSgpLFxyXG4gICAgICAgICAgICB0b0FuaW1hdGVQcm9taXNlID0gcmlkZXN0eWxlci5wcm9taXNlKCk7XHJcblxyXG4gICAgICAgIGlmICghYmFja3dhcmRzKSB7XHJcbiAgICAgICAgICAgIHZhciBmcm9tWiA9IHBhcnNlSW50KGZyb21Nb2RhbC5zdHlsZS56SW5kZXgsIDEwKSB8fCAwLFxyXG4gICAgICAgICAgICAgICAgdG9aID0gcGFyc2VJbnQodG9Nb2RhbC5zdHlsZS56SW5kZXgsIDEwKSB8fCAwO1xyXG4gICAgICAgICAgICBpZiAodG9aIDw9IGZyb21aKSB0b1ogPSBmcm9tWiArIDE7XHJcbiAgICAgICAgICAgIHRvTW9kYWwuc3R5bGUuekluZGV4ID0gdG9aO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRyYW5zaXRpb25TdXBwb3J0KSB7XHJcbiAgICAgICAgICAgIGlmIChiYWNrd2FyZHMpIHtcclxuICAgICAgICAgICAgICAgIHRvTW9kYWwuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XHJcbiAgICAgICAgICAgICAgICBhZGRDbGFzcyh0b01vZGFsLCAnaW4nKTtcclxuXHJcbiAgICAgICAgICAgICAgICB0b0FuaW1hdGVQcm9taXNlLnJlc29sdmUoKTtcclxuXHJcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlbW92ZUNsYXNzKGZyb21Nb2RhbCwgJ2luJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgZnJvbU1vZGFsLm9uVHJhbnNpdGlvbkVuZE9uY2UoZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZnJvbU1vZGFsLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZyb21BbmltYXRlUHJvbWlzZS5yZXNvbHZlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIH0sIDUwKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRvTW9kYWwuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XHJcblxyXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICBhZGRDbGFzcyh0b01vZGFsLCAnaW4nKTtcclxuICAgICAgICAgICAgICAgICAgICB0b01vZGFsLm9uVHJhbnNpdGlvbkVuZE9uY2UoZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZnJvbU1vZGFsLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlbW92ZUNsYXNzKGZyb21Nb2RhbCwgJ2luJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0b0FuaW1hdGVQcm9taXNlLnJlc29sdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZnJvbUFuaW1hdGVQcm9taXNlLnJlc29sdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgfSwgNTApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAoYmFja3dhcmRzKSB7XHJcbiAgICAgICAgICAgICAgICB0b01vZGFsLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xyXG4gICAgICAgICAgICAgICAgYWRkQ2xhc3ModG9Nb2RhbCwgJ2luJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgcmVtb3ZlQ2xhc3MoZnJvbU1vZGFsLCAnaW4nKTtcclxuICAgICAgICAgICAgICAgIGZyb21Nb2RhbC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdG9Nb2RhbC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcclxuICAgICAgICAgICAgICAgIGFkZENsYXNzKHRvTW9kYWwsICdpbicpO1xyXG5cclxuICAgICAgICAgICAgICAgIGZyb21Nb2RhbC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gICAgICAgICAgICAgICAgcmVtb3ZlQ2xhc3MoZnJvbU1vZGFsLCAnaW4nKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdG9BbmltYXRlUHJvbWlzZS5yZXNvbHZlKCk7XHJcbiAgICAgICAgICAgIGZyb21BbmltYXRlUHJvbWlzZS5yZXNvbHZlKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgYWxsUHJvbWlzZSA9IHJpZGVzdHlsZXIucHJvbWlzZSgpO1xyXG4gICAgICAgIHZhciBvblByb21pc2VDaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciB0b1N0YXRlID0gdG9BbmltYXRlUHJvbWlzZS5zdGF0ZSgpLFxyXG4gICAgICAgICAgICAgICAgZnJvbVN0YXRlID0gZnJvbUFuaW1hdGVQcm9taXNlLnN0YXRlKCk7XHJcblxyXG4gICAgICAgICAgICAvLyBTdGlsbCB3YWl0aW5nIGZvciByZXNvbHV0aW9uXHJcbiAgICAgICAgICAgIGlmICh0b1N0YXRlID09PSAwIHx8IGZyb21TdGF0ZSA9PT0gMCkgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgLy8gT25lIHByb21pc2UgaGFzIGJlZW4gcmVqZWN0ZWQgYnV0IHRoZSBvdGhlciBpcyByZXNvbHZlZFxyXG4gICAgICAgICAgICBpZiAodG9TdGF0ZSA9PT0gMiB8fCBmcm9tU3RhdGUgPT09IDIpIHJldHVybiBhbGxQcm9taXNlLnJlamVjdCgpO1xyXG5cclxuICAgICAgICAgICAgLy8gQm90aCBwcm9taXNlcyBhcmUgcmVzb2x2ZWRcclxuICAgICAgICAgICAgYWxsUHJvbWlzZS5yZXNvbHZlKCk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdG9BbmltYXRlUHJvbWlzZS5hbHdheXMob25Qcm9taXNlQ2hhbmdlKTtcclxuICAgICAgICBmcm9tQW5pbWF0ZVByb21pc2UuYWx3YXlzKG9uUHJvbWlzZUNoYW5nZSk7XHJcblxyXG4gICAgICAgIHJldHVybiBhbGxQcm9taXNlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogTW9kYWwgcHJlcGFyYXRpb246IFByb2Nlc3MgdGhlIHZlaGljbGUgc2VsZWN0IHJlcXVlc3RcclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKiBAcGFyYW0gIHtFbGVtZW50fSBtb2RhbCAtIFRoZSBtb2RhbCB0byBwcmVwYXJlXHJcbiAgICAgKiBAcmV0dXJuIHZvaWRcclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gcmVxdWVzdFN0ZXAobW9kYWwsIHN0ZXBPcHRpb25zKSB7XHJcbiAgICAgICAgdmFyIHJlcXVlc3QgPSB7XHJcbiAgICAgICAgICAgIFNlbGVjdGlvbjogZGF0YUFycmF5XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgaWYgKHN0ZXBPcHRpb25zICYmIHN0ZXBPcHRpb25zLmJlc3RDb25maWd1cmF0aW9uKSB7XHJcbiAgICAgICAgICAgIHNob3dTZWxlY3Rpb24obW9kYWwsIHN0ZXBPcHRpb25zLmJlc3RDb25maWd1cmF0aW9uKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICByaWRlc3R5bGVyLmFqYXguc2VuZCh7XHJcbiAgICAgICAgICAgICAgICBhY3Rpb246ICdWZWhpY2xlL1NlbGVjdCcsXHJcbiAgICAgICAgICAgICAgICBkYXRhOiByZXF1ZXN0LFxyXG4gICAgICAgICAgICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uIChyZXNwb25zZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5TdWNjZXNzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5CZXN0Q29uZmlndXJhdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuSW5jbHVkZU9FVGlyZU9wdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJpZGVzdHlsZXIuYWpheC5zZW5kKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiAnVmVoaWNsZS9HZXRUaXJlT3B0aW9uRGV0YWlscycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHsnVmVoaWNsZUNvbmZpZ3VyYXRpb24nOiByZXNwb25zZS5CZXN0Q29uZmlndXJhdGlvbi5WYWx1ZX0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJlc3RDb25maWd1cmF0aW9uOiByZXNwb25zZS5CZXN0Q29uZmlndXJhdGlvbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uIChkZXRhaWxSZXNwb25zZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRldGFpbFJlc3BvbnNlLlN1Y2Nlc3MpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGV0YWlscyA9IGRldGFpbFJlc3BvbnNlLkRldGFpbHMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmVzdENvbmZpZ3VyYXRpb24gPSB0aGlzLmJlc3RDb25maWd1cmF0aW9uO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkZXRhaWxzLmxlbmd0aCA9PSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkZXRhaWxTdHJpbmcgPSAoZnVuY3Rpb24gKGRldGFpbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGYgPSBkZXRhaWwuRnJvbnRbJ0Rlc2NyaXB0aW9uJ10sIHIgPSBkZXRhaWwuUmVhclsnRGVzY3JpcHRpb24nXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmPT1yKSByZXR1cm4gZjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgcmV0dXJuIFwiRjogXCIgKyBmICsgXCIgUjogXCIgKyByO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KShkZXRhaWxzWzBdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmVzdENvbmZpZ3VyYXRpb24uVGlyZU9wdGlvbkJhc2ljID0ge1RpcmVPcHRpb25JRDogZGV0YWlsc1swXVsnVGlyZU9wdGlvbklEJ10sIFRpcmVPcHRpb25TdHJpbmc6IGRldGFpbFN0cmluZ307XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3dTZWxlY3Rpb24obW9kYWwsIGJlc3RDb25maWd1cmF0aW9uKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvcHRpb25NZW51ID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgR3JvdXBzOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRGVzY3JpcHRpb246ICdTZWxlY3QgWW91ciBUaXJlIFNpemUnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVGl0bGU6ICdUaXJlIFNpemUnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgS2V5OiAndGlyZW9wdGlvbicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPcHRpb25zOiBbXVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGV0YWlscy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRldGFpbFN0cmluZyA9IChmdW5jdGlvbiAoZGV0YWlsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGYgPSBkZXRhaWwuRnJvbnRbJ0Rlc2NyaXB0aW9uJ10sIHIgPSBkZXRhaWwuUmVhclsnRGVzY3JpcHRpb24nXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZj09cikgcmV0dXJuIGY7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSByZXR1cm4gXCJGOiBcIiArIGYgKyBcIiBSOiBcIiArIHI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KShkZXRhaWxzW2ldKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbk1lbnUuT3B0aW9ucy5wdXNoKHtHcm91cDogbnVsbCwgTGFiZWw6IGRldGFpbFN0cmluZywgVmFsdWU6IGRldGFpbHNbaV1bJ1RpcmVPcHRpb25JRCddfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlTW9kYWwobW9kYWwsIG9wdGlvbk1lbnUsIGJlc3RDb25maWd1cmF0aW9uKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHNob3dTZWxlY3Rpb24obW9kYWwsIGJlc3RDb25maWd1cmF0aW9uKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3dTZWxlY3Rpb24obW9kYWwsIHJlc3BvbnNlLkJlc3RDb25maWd1cmF0aW9uKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZU1vZGFsKG1vZGFsLCByZXNwb25zZS5NZW51KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBNb2RhbCBwcmVwYXJhdGlvbjogVXBkYXRlIG1vZGFsIGNvbnRlbnRcclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKiBAcGFyYW0gIHtFbGVtZW50fSBtb2RhbCAtIFRoZSBtb2RhbCB0byBwcmVwYXJlXHJcbiAgICAgKiBAcGFyYW0gIHtPYmplY3R9IG1lbnUgLSBNZW51IG9iamVjdCB0byBwYXNzIGluIGZvciBtb2RhbCBjb250ZW50IHVwZGF0ZVxyXG4gICAgICogQHJldHVybiB2b2lkXHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIHVwZGF0ZU1vZGFsKG1vZGFsLCBtZW51LCBiZXN0Q29uZmlndXJhdGlvbikge1xyXG4gICAgICAgIHZhciBpdGVtTGlzdENvbnRhaW5lciA9IG1vZGFsLnF1ZXJ5U2VsZWN0b3JBbGwoJy52c20tbGlzdC1jb250YWluZXInKVswXSxcclxuICAgICAgICBoZWFkZXJFbGVtZW50ID0gbW9kYWwucXVlcnlTZWxlY3RvckFsbCgnLnZzbS1oZWFkZXInKVswXSxcclxuICAgICAgICBib2R5RWxlbWVudCA9IG1vZGFsLnF1ZXJ5U2VsZWN0b3JBbGwoJy52c20tbW9kYWwtYm9keScpWzBdLFxyXG4gICAgICAgIHZzbUxpbmtTdHlsZSA9IG1vZGFsLnF1ZXJ5U2VsZWN0b3JBbGwoJy52c20tbGluZS1zdGVwJylbMF0sXHJcbiAgICAgICAgZmluYWxTY3JlZW4gPSBtb2RhbC5xdWVyeVNlbGVjdG9yQWxsKCcudnNtLWZpbmFsJylbMF07XHJcbiAgICAgICAgdmFyIG1lbnVPcHRpb25zID0gbWVudS5PcHRpb25zLFxyXG4gICAgICAgIG1lbnVLZXkgPSBtZW51LktleSxcclxuICAgICAgICBtZW51VGl0bGUgPSBtZW51LlRpdGxlLFxyXG4gICAgICAgIG1lbnVHcm91cHMgPSBtZW51Lkdyb3VwcztcclxuXHJcbiAgICAgICAgdmFyIG9uTGlzdEl0ZW1TZWxlY3RlZCA9IGZ1bmN0aW9uKG8pIHtcclxuICAgICAgICAgICAgdmFyIG9wdGlvblZhbHVlID0gby5nZXRBdHRyaWJ1dGUoJ2RhdGEtb3B0aW9udmFsdWUnKTtcclxuICAgICAgICAgICAgdmFyIG9wdGlvbktleSA9IG8uZ2V0QXR0cmlidXRlKCdkYXRhLW9wdGlvbmtleScpO1xyXG4gICAgICAgICAgICB2YXIgb3B0aW9uTGFiZWwgPSBvLmdldEF0dHJpYnV0ZSgnZGF0YS1vcHRpb25sYWJlbCcpO1xyXG4gICAgICAgICAgICB2YXIgb3B0aW9uVGl0bGUgPSBvLmdldEF0dHJpYnV0ZSgnZGF0YS1tZW51dGl0bGUnKTtcclxuICAgICAgICAgICAgZGF0YUFycmF5LnB1c2gob3B0aW9uS2V5ICsgJzonICsgb3B0aW9uVmFsdWUpO1xyXG4gICAgICAgICAgICBpbmZvQXJyYXkucHVzaChvcHRpb25UaXRsZSArICc6JyArIG9wdGlvbkxhYmVsKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChvcHRpb25zLmFmdGVyT3B0aW9uU2VsZWN0ZWQgJiYgdHlwZW9mIG9wdGlvbnMuYWZ0ZXJPcHRpb25TZWxlY3RlZCA9PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgaW5mb0Jhc2VPYmogPSB7fTtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGluZm9BcnJheS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBzcGxpdHRlZEFycmF5ID0gaW5mb0FycmF5W2ldLnNwbGl0KCc6Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNwbGl0dGVkQXJyYXkubGVuZ3RoID09IDIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW5mb0Jhc2VPYmpbc3BsaXR0ZWRBcnJheVswXV0gPSBzcGxpdHRlZEFycmF5WzFdO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgb3V0SW5mb09iaiA9IHtcclxuICAgICAgICAgICAgICAgICAgICBDdXJyZW50U2VsZWN0aW9uOiB7fSxcclxuICAgICAgICAgICAgICAgICAgICBGdWxsU2VsZWN0aW9uOiBpbmZvQmFzZU9iaixcclxuICAgICAgICAgICAgICAgICAgICBGdWxsU2VsZWN0aW9uRGF0YTogZGF0YUFycmF5XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgb3V0SW5mb09iai5DdXJyZW50U2VsZWN0aW9uW29wdGlvblRpdGxlXSA9IG9wdGlvbkxhYmVsO1xyXG5cclxuICAgICAgICAgICAgICAgIG9wdGlvbnMuYWZ0ZXJPcHRpb25TZWxlY3RlZChvdXRJbmZvT2JqKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKCFkaXNDb3VudGludWVkKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdHJhbnNpdGlvbk9wdGlvbiA9IHt9O1xyXG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbktleSA9PSAndGlyZW9wdGlvbicgJiYgYmVzdENvbmZpZ3VyYXRpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICBiZXN0Q29uZmlndXJhdGlvbi5UaXJlT3B0aW9uQmFzaWMgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFRpcmVPcHRpb25JRDogb3B0aW9uVmFsdWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFRpcmVPcHRpb25TdHJpbmc6IG9wdGlvbkxhYmVsXHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICB0cmFuc2l0aW9uT3B0aW9uLmJlc3RDb25maWd1cmF0aW9uID0gYmVzdENvbmZpZ3VyYXRpb247XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0cmFuc2l0aW9uVG9Nb2RhbChcclxuICAgICAgICAgICAgICAgICAgICBiYXNlKHJlcXVlc3RTdGVwLCB0cmFuc2l0aW9uT3B0aW9uLCBtb2RhbCksXHJcbiAgICAgICAgICAgICAgICAgICAgbW9kYWxcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIGJ1aWxkTGlzdEl0ZW0gPSBmdW5jdGlvbihvcHRPYmopIHtcclxuICAgICAgICAgICAgdmFyIG9wdGlvbkxhYmVsID0gb3B0T2JqLkxhYmVsLFxyXG4gICAgICAgICAgICBvcHRpb25WYWx1ZSA9IG9wdE9iai5WYWx1ZTtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25MYWJlbCA9PT0gJ3VuZGVmaW5lZCcgfHwgdHlwZW9mIG9wdGlvblZhbHVlID09PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIG9wdGlvbkJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKSxcclxuICAgICAgICAgICAgb3B0aW9uVGV4dCA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKG9wdGlvbkxhYmVsKTtcclxuICAgICAgICAgICAgb3B0aW9uQnRuLmNsYXNzTmFtZSA9ICd2c20tb3B0aW9uLWl0ZW0gdnNtLWJ0biB2c20tYnRuLWdyYXknO1xyXG4gICAgICAgICAgICBvcHRpb25CdG4uaHJlZiA9ICdqYXZhc2NyaXB0OnZvaWQoMCknO1xyXG4gICAgICAgICAgICBvcHRpb25CdG4uc2V0QXR0cmlidXRlKCdkYXRhLW9wdGlvbnZhbHVlJywgb3B0aW9uVmFsdWUpO1xyXG4gICAgICAgICAgICBvcHRpb25CdG4uc2V0QXR0cmlidXRlKCdkYXRhLW9wdGlvbmxhYmVsJywgb3B0aW9uTGFiZWwpO1xyXG4gICAgICAgICAgICBvcHRpb25CdG4uYXBwZW5kQ2hpbGQob3B0aW9uVGV4dCk7XHJcblxyXG4gICAgICAgICAgICBvcHRpb25CdG4ub25jbGljayA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICBvbkxpc3RJdGVtU2VsZWN0ZWQodGhpcyk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHJldHVybiBvcHRpb25CdG47XHJcbiAgICAgICAgfSxcclxuICAgICAgICBidWlsZExpc3RIZWFkZXIgPSBmdW5jdGlvbihoZWFkZXJUZXh0KSB7XHJcbiAgICAgICAgICAgIHZhciBtZW51U3ViSGVhZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpLFxyXG4gICAgICAgICAgICBtZW51U3ViSGVhZGVyVGV4dCA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGhlYWRlclRleHQpO1xyXG4gICAgICAgICAgICBtZW51U3ViSGVhZGVyLmNsYXNzTmFtZSA9ICd2c20tZ3JvdXAtdGl0bGUnO1xyXG4gICAgICAgICAgICBtZW51U3ViSGVhZGVyLmFwcGVuZENoaWxkKG1lbnVTdWJIZWFkZXJUZXh0KTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBtZW51U3ViSGVhZGVyO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vSW4gcHJvZ3Jlc3MsIHJlbW92aW5nIHRoZSBmaW5hbCBzY3JlZW4gZWxlbWVudCBmcm9tIGxvYWRlZCBtb2RhbFxyXG4gICAgICAgIGZpbmFsU2NyZWVuLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZmluYWxTY3JlZW4pO1xyXG4gICAgICAgIGFkZENsYXNzKHZzbUxpbmtTdHlsZSwgJ3ZzbS1zaW5nbGUtc3RlcCcpO1xyXG5cclxuICAgICAgICBcclxuICAgICAgICAvL0NyZWF0ZSByaWdodC1zaWRlIHByb2dyZXNzIGJhclxyXG4gICAgICAgIHZhciBkaXZFTGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKSxcclxuICAgICAgICBkb3RFbGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpJyksXHJcbiAgICAgICAgc3BhbkVsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcclxuICAgICAgICBkaXZFTGUuY2xhc3NOYW1lID0gJ3ZzbS1jb2x1bW4tMic7XHJcbiAgICAgICAgZG90RWxlLmNsYXNzTmFtZSA9ICdkb3Qtc3R5bGUgZG90LWJlZm9yZSBhY3RpdmUnO1xyXG4gICAgICAgIHNwYW5FbGUuY2xhc3NOYW1lID0gJ2RvdC1pbmZvIGRvdC1pbmZvLWJlZm9yZSBhY3RpdmUnO1xyXG4gICAgICAgIC8vc3BhbkVsZS5pbm5lckhUTUwgPSBtZW51VGl0bGU7XHJcbiAgICAgICAgZGl2RUxlLmFwcGVuZENoaWxkKGRvdEVsZSk7XHJcbiAgICAgICAgZGl2RUxlLmFwcGVuZENoaWxkKHNwYW5FbGUpO1xyXG5cclxuICAgICAgICAvL0NyZWF0ZSBsZWZ0LXNpZGUgcHJvZ3Jlc3MgaW5mb1xyXG4gICAgICAgIGlmICghZGF0YUFycmF5Lmxlbmd0aCkge1xyXG4gICAgICAgICAgICB2YXIgbm90U3R5bGVEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgbm90U3R5bGVEaXYuY2xhc3NOYW1lID0gJ3ZzbS1jb2x1bW4tMiBuby1zdHlsZSc7XHJcbiAgICAgICAgICAgIHZzbUxpbmtTdHlsZS5hcHBlbmRDaGlsZChub3RTdHlsZURpdik7XHJcbiAgICAgICAgICAgIHZzbUxpbmtTdHlsZS5hcHBlbmRDaGlsZChkaXZFTGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgYWRkQ2xhc3MoYm9keUVsZW1lbnQsICd2c20taGFzLWJhY2snKTtcclxuICAgICAgICAgICAgdmFyIG5vdFN0eWxlRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgIC8qY2VsbEVsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKSwqL1xyXG4gICAgICAgICAgICAvKmluZm9FbGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7Ki9cclxuICAgICAgICAgICAgbm90U3R5bGVEaXYuY2xhc3NOYW1lID0gJ3ZzbS1jb2x1bW4tMiB2c20tYmVmb3JlJztcclxuICAgICAgICAgICAgLypjZWxsRWxlLmNsYXNzTmFtZSA9ICd2c20tdGFibGUtY2VsbCc7XHJcbiAgICAgICAgICAgIGluZm9FbGUuY2xhc3NOYW1lID0gJ3ZzbS1zZWxlY3RlZC1pbmZvJztcclxuICAgICAgICAgICAgY2VsbEVsZS5hcHBlbmRDaGlsZChpbmZvRWxlKTtcclxuICAgICAgICAgICAgbm90U3R5bGVEaXYuYXBwZW5kQ2hpbGQoY2VsbEVsZSk7Ki9cclxuICAgICAgICAgICAgdmFyIGluZm9CYXNlQXJyYXkgPSBpbmZvQXJyYXkubWFwKGZ1bmN0aW9uIChlbGUpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBlbGUgJiYgZWxlLnNwbGl0KCc6JykubGVuZ3RoID09PSAyID8gZWxlLnNwbGl0KCc6JylbMV0gOiAnJztcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIC8qaW5mb0VsZS5pbm5lckhUTUwgPSBpbmZvQmFzZUFycmF5LmpvaW4oJyAnKTsqL1xyXG4gICAgICAgICAgICBzcGFuRWxlLmlubmVySFRNTCA9IGluZm9CYXNlQXJyYXkuam9pbignICcpO1xyXG4gICAgICAgICAgICB2c21MaW5rU3R5bGUuYXBwZW5kQ2hpbGQobm90U3R5bGVEaXYpO1xyXG4gICAgICAgICAgICB2c21MaW5rU3R5bGUuYXBwZW5kQ2hpbGQoZGl2RUxlKTtcclxuXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgaGVhZGVyRW5kID0gbWVudS5EZXNjcmlwdGlvbi5zcGxpdCgnICcpLnNsaWNlKC0xKVswXS5yZXBsYWNlKC9cXGJcXHcvZywgZnVuY3Rpb24odCl7IHJldHVybiB0LnRvVXBwZXJDYXNlKCkgfSk7XHJcbiAgICAgICAgbGV0IGhlYWRlclN0YXJ0ID0gbWVudS5EZXNjcmlwdGlvbi5zcGxpdCgnICcpLiBzbGljZSgwLDIpLmpvaW4oXCIgXCIpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIC8vIGxldCBsZXR0ZXJDaGVja2VyID0gbWVudS5EZXNjcmlwdGlvbi5zcGxpdCgnICcpWzFdO1xyXG5cclxuICAgICAgICAvLyBpZiAoIGxldHRlckNoZWNrZXIuY2hhckF0KDApID09PSAneScpIHtcclxuICAgICAgICAvLyAgICAgLy8gbGV0IGxldHRlckNoZWNrZXIgPSBtZW51LkRlc2NyaXB0aW9uLnNwbGl0KCcgJykuc2xpY2UoLTIpWzBdLnJlcGxhY2UoL1xcYlxcdy9nLCBmdW5jdGlvbih0KXsgcmV0dXJuIHQudG9VcHBlckNhc2UoKSB9KTtcclxuICAgICAgICAvLyB9XHJcblxyXG4gICAgICAgIGhlYWRlckVsZW1lbnQuaW5uZXJIVE1MID0gaGVhZGVyU3RhcnQgKyAnICcgKyBoZWFkZXJFbmQ7XHJcblxyXG4gICAgICAgIC8vQ2xlYXIgdGhlIGNvbnRhaW5lclxyXG4gICAgICAgIHdoaWxlIChpdGVtTGlzdENvbnRhaW5lci5maXJzdENoaWxkKSB7XHJcbiAgICAgICAgICAgIGl0ZW1MaXN0Q29udGFpbmVyLnJlbW92ZUNoaWxkKGl0ZW1MaXN0Q29udGFpbmVyLmZpcnN0Q2hpbGQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKG1lbnVPcHRpb25zLmxlbmd0aCkge1xyXG4gICAgICAgICAgICB2YXIgZ3JvdXBXcmFwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgIGdyb3VwV3JhcC5jbGFzc05hbWUgPSAndnNtLWdyb3VwLXdyYXAgY2VudGVyLXBpZWNlJztcclxuICAgICAgICAgICAgaXRlbUxpc3RDb250YWluZXIuYXBwZW5kQ2hpbGQoZ3JvdXBXcmFwKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChvcHRpb25zLkdyb3VwT3B0aW9ucyAmJiBtZW51R3JvdXBzKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbWVudUdyb3VwZWRPcHRpb25zID0ge307XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1lbnVPcHRpb25zLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRoaXNNZW51T3B0aW9uID0gbWVudU9wdGlvbnNbaV0sXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpc01lbnVPcHRpb25Hcm91cCA9IHRoaXNNZW51T3B0aW9uLkdyb3VwO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzTWVudU9wdGlvbkdyb3VwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vSWYgR3JvdXAgdmFsdWUgb2YgdGhpcyBvcHRpb24gaXMgbm90IG51bGwgb3IgdW5kZWZpbmVkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghbWVudUdyb3VwZWRPcHRpb25zW3RoaXNNZW51T3B0aW9uR3JvdXBdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZW51R3JvdXBlZE9wdGlvbnNbdGhpc01lbnVPcHRpb25Hcm91cF0gPSBbdGhpc01lbnVPcHRpb25dO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVudUdyb3VwZWRPcHRpb25zW3RoaXNNZW51T3B0aW9uR3JvdXBdLnB1c2godGhpc01lbnVPcHRpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL0lmIEdyb3VwIHZhbHVlIG9mIHRoaXMgb3B0aW9uIGlzIG51bGwgb3IgdW5kZWZpbmVkLCBwdXQgdGhlbSBpbiBVbmdyb3VwZWQgYXJyYXlcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy9NYXkgbmV2ZXIgaGFwcGVuLCBtb3JlIGxpa2UgYW4gZXJyb3IgaGFuZGxpbmdcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFtZW51R3JvdXBlZE9wdGlvbnNbJ191bmdyb3VwZWQnXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVudUdyb3VwZWRPcHRpb25zWydfdW5ncm91cGVkJ10gPSBbdGhpc01lbnVPcHRpb25dO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVudUdyb3VwZWRPcHRpb25zWydfdW5ncm91cGVkJ10ucHVzaCh0aGlzTWVudU9wdGlvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvL0dvIHRocm91Z2gga25vd24gR3JvdXBzIGJlZm9yZSBjaGVja2luZyB1bmdyb3VwZWQgb3B0aW9uc1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBtZW51R3JvdXBzLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1lbnVHcm91cCA9IG1lbnVHcm91cHNbal07XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHN1Ykdyb3VwID0gbWVudUdyb3VwZWRPcHRpb25zW21lbnVHcm91cF07XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHN1Ykdyb3VwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBncm91cExpc3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29sdW1uQ2xhc3MgPSAndnNtLW9uZS1jb250YWluZXInO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobWVudS5LZXkgPT0gJ3llYXInICYmIG1lbnVPcHRpb25zLmxlbmd0aCA+IDEwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5ZZWFyU2NyZWVuQ29sdW1ucyA9PSAyKSBjb2x1bW5DbGFzcyA9ICd2c20taGFsZi1jb250YWluZXInO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuWWVhclNjcmVlbkNvbHVtbnMgPj0gMykgY29sdW1uQ2xhc3MgPSAndnNtLXRoaXJkLWNvbnRhaW5lcic7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1lbnUuS2V5ID09ICdtYWtlJyAmJiBtZW51T3B0aW9ucy5sZW5ndGggPiAxMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuTWFrZVNjcmVlbkNvbHVtbnMgPj0gMikgY29sdW1uQ2xhc3MgPSAndnNtLWhhbGYtY29udGFpbmVyJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBncm91cExpc3QuY2xhc3NOYW1lID0gJ3ZzbS1ncm91cC1saXN0ICcgKyBjb2x1bW5DbGFzcztcclxuICAgICAgICAgICAgICAgICAgICAgICAgZ3JvdXBXcmFwLmFwcGVuZENoaWxkKGJ1aWxkTGlzdEhlYWRlcihtZW51R3JvdXApKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZ3JvdXBXcmFwLmFwcGVuZENoaWxkKGdyb3VwTGlzdCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHN1Ykdyb3VwLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbGlzdEl0ZW0gPSBidWlsZExpc3RJdGVtKHN1Ykdyb3VwW2ldKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbGlzdEl0ZW0gIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGlzdEl0ZW0uc2V0QXR0cmlidXRlKCdkYXRhLW9wdGlvbmtleScsIG1lbnVLZXkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpc3RJdGVtLnNldEF0dHJpYnV0ZSgnZGF0YS1tZW51dGl0bGUnLCBtZW51VGl0bGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdyb3VwTGlzdC5hcHBlbmRDaGlsZChsaXN0SXRlbSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvL0NoZWNrIGlmIFVuZ3JvdXBlZCBvcHRpb25zIGV4aXN0XHJcbiAgICAgICAgICAgICAgICBpZiAobWVudUdyb3VwZWRPcHRpb25zWydfdW5ncm91cGVkJ10pIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZ3JvdXBMaXN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JyksXHJcbiAgICAgICAgICAgICAgICAgICAgY29sdW1uQ2xhc3MgPSAndnNtLW9uZS1jb250YWluZXInO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChtZW51LktleSA9PSAneWVhcicgJiYgbWVudU9wdGlvbnMubGVuZ3RoID4gMTApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuWWVhclNjcmVlbkNvbHVtbnMgPT0gMikgY29sdW1uQ2xhc3MgPSAndnNtLWhhbGYtY29udGFpbmVyJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuWWVhclNjcmVlbkNvbHVtbnMgPj0gMykgY29sdW1uQ2xhc3MgPSAndnNtLXRoaXJkLWNvbnRhaW5lcic7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChtZW51LktleSA9PSAnbWFrZScgJiYgbWVudU9wdGlvbnMubGVuZ3RoID4gMTApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuTWFrZVNjcmVlbkNvbHVtbnMgPj0gMikgY29sdW1uQ2xhc3MgPSAndnNtLWhhbGYtY29udGFpbmVyJztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZ3JvdXBMaXN0LmNsYXNzTmFtZSA9ICd2c20tZ3JvdXAtbGlzdCAnICsgY29sdW1uQ2xhc3M7XHJcbiAgICAgICAgICAgICAgICAgICAgZ3JvdXBXcmFwLmFwcGVuZENoaWxkKGJ1aWxkTGlzdEhlYWRlcignVW5ncm91cGVkJykpO1xyXG4gICAgICAgICAgICAgICAgICAgIGdyb3VwV3JhcC5hcHBlbmRDaGlsZChncm91cExpc3QpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgc3ViR3JvdXAgPSBtZW51R3JvdXBlZE9wdGlvbnNbJ191bmdyb3VwZWQnXTtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHN1Ykdyb3VwLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsaXN0SXRlbSA9IGJ1aWxkTGlzdEl0ZW0oc3ViR3JvdXBbaV0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGxpc3RJdGVtICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGlzdEl0ZW0uc2V0QXR0cmlidXRlKCdkYXRhLW9wdGlvbmtleScsIG1lbnVLZXkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGlzdEl0ZW0uc2V0QXR0cmlidXRlKCdkYXRhLW1lbnV0aXRsZScsIG1lbnVUaXRsZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBncm91cExpc3QuYXBwZW5kQ2hpbGQobGlzdEl0ZW0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdmFyIGdyb3VwTGlzdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpLFxyXG4gICAgICAgICAgICAgICAgY29sdW1uQ2xhc3MgPSAndnNtLW9uZS1jb250YWluZXInO1xyXG4gICAgICAgICAgICAgICAgaWYgKG1lbnUuS2V5ID09ICd5ZWFyJyAmJiBtZW51T3B0aW9ucy5sZW5ndGggPiAxMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLlllYXJTY3JlZW5Db2x1bW5zID09IDIpIGNvbHVtbkNsYXNzID0gJ3ZzbS1oYWxmLWNvbnRhaW5lcic7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuWWVhclNjcmVlbkNvbHVtbnMgPj0gMykgY29sdW1uQ2xhc3MgPSAndnNtLXRoaXJkLWNvbnRhaW5lcic7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAobWVudS5LZXkgPT0gJ21ha2UnICYmIG1lbnVPcHRpb25zLmxlbmd0aCA+IDEwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuTWFrZVNjcmVlbkNvbHVtbnMgPj0gMikgY29sdW1uQ2xhc3MgPSAndnNtLWhhbGYtY29udGFpbmVyJztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGdyb3VwTGlzdC5jbGFzc05hbWUgPSAndnNtLWdyb3VwLWxpc3QgJyArIGNvbHVtbkNsYXNzO1xyXG4gICAgICAgICAgICAgICAgZ3JvdXBXcmFwLmFwcGVuZENoaWxkKGdyb3VwTGlzdCk7XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtZW51T3B0aW9ucy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBsaXN0SXRlbSA9IGJ1aWxkTGlzdEl0ZW0obWVudU9wdGlvbnNbaV0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbGlzdEl0ZW0gIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpc3RJdGVtLnNldEF0dHJpYnV0ZSgnZGF0YS1vcHRpb25rZXknLCBtZW51S2V5KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGlzdEl0ZW0uc2V0QXR0cmlidXRlKCdkYXRhLW1lbnV0aXRsZScsIG1lbnVUaXRsZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGdyb3VwTGlzdC5hcHBlbmRDaGlsZChsaXN0SXRlbSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogTW9kYWwgcHJlcGFyYXRpb246IFNob3cgZmluYWwgdmVoaWNsZSBzZWxlY3Rpb25cclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKiBAcGFyYW0gIHtFbGVtZW50fSBtb2RhbCAtIFRoZSBtb2RhbCB0byBwcmVwYXJlXHJcbiAgICAgKiBAcGFyYW0gIHtPYmplY3R9IGJlc3RDb25maWd1cmF0aW9uIC0gYmVzdENvbmZpZ3VyYXRpb24gb2JqZWN0IHRvIHBhc3MgaW4gZm9yIG1vZGFsIGNvbnRlbnQgdXBkYXRlXHJcbiAgICAgKiBAcmV0dXJuIHZvaWRcclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gc2hvd1NlbGVjdGlvbihtb2RhbCwgYmVzdENvbmZpZ3VyYXRpb24pIHtcclxuICAgICAgICB2YXIgdmVoaWNsZUltYWdlID0gbW9kYWwucXVlcnlTZWxlY3RvckFsbCgnLnZzbS12ZWhpY2xlLWRpc3BsYXknKVswXSxcclxuICAgICAgICB2ZWhpY2xlTG9hZGVyID0gbW9kYWwucXVlcnlTZWxlY3RvckFsbCgnLnZzbS1maW5hbCAudnNtLWxvYWRlckljb24nKVswXSxcclxuICAgICAgICBuYW1lRWxlbWVudCA9IG1vZGFsLnF1ZXJ5U2VsZWN0b3JBbGwoJy52ZWhpY2xlLXJlc3VsdC1uYW1lJylbMF0sXHJcbiAgICAgICAgc2l6ZUVsZW1lbnQgPSBtb2RhbC5xdWVyeVNlbGVjdG9yQWxsKCcudmVoaWNsZS1yZXN1bHQtc2l6ZScpWzBdLFxyXG4gICAgICAgIGNvbmZpcm1CdXR0b24gPSBtb2RhbC5xdWVyeVNlbGVjdG9yQWxsKCcudnNtLWZpbmQnKVswXSxcclxuICAgICAgICBib2R5RWxlbWVudCA9IG1vZGFsLnF1ZXJ5U2VsZWN0b3JBbGwoJy52c20tbW9kYWwtYm9keScpWzBdLFxyXG4gICAgICAgIGluUHJvZ3Jlc3NTY3JlZW4gPSBtb2RhbC5xdWVyeVNlbGVjdG9yQWxsKCcudnNtLWluLXByb2dyZXNzJylbMF07XHJcblxyXG4gICAgICAgIGFkZENsYXNzKGJvZHlFbGVtZW50LCAndnNtLWhhcy1iYWNrJyk7XHJcbiAgICAgICAgY29uZmlybUJ1dHRvbi5pbm5lckhUTUwgPSBvcHRpb25zLkNvbmZpcm1CdXR0b25UZXh0O1xyXG5cclxuICAgICAgICB2YXIgaW5mb0Jhc2VBcnJheSA9IFtdLCBpbmZvQmFzZU9iaiA9IHt9O1xyXG5cclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGluZm9BcnJheS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgdmFyIHNwbGl0dGVkQXJyYXkgPSBpbmZvQXJyYXlbaV0uc3BsaXQoJzonKTtcclxuICAgICAgICAgIGlmIChzcGxpdHRlZEFycmF5Lmxlbmd0aCA9PSAyICYmIHNwbGl0dGVkQXJyYXlbMF0gIT0gJ1RpcmUgU2l6ZScpIHtcclxuICAgICAgICAgICAgICBpbmZvQmFzZUFycmF5LnB1c2goc3BsaXR0ZWRBcnJheVsxXSk7XHJcbiAgICAgICAgICAgICAgaW5mb0Jhc2VPYmpbc3BsaXR0ZWRBcnJheVswXV0gPSBzcGxpdHRlZEFycmF5WzFdO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIG1haW5QYXJ0U3RyaW5nID0gaW5mb0Jhc2VBcnJheVswXSxcclxuICAgICAgICBsYXN0SXRlbSA9IGluZm9CYXNlQXJyYXkucG9wKCk7XHJcblxyXG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgaW5mb0Jhc2VBcnJheS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAoaSA+PSAzKSBicmVhaztcclxuICAgICAgICAgICAgbWFpblBhcnRTdHJpbmcgKz0gJyAnICsgaW5mb0Jhc2VBcnJheVtpXTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciB2ZWhpY2xlRGVzYyA9IG1haW5QYXJ0U3RyaW5nICsgJyAnICsgbGFzdEl0ZW07XHJcblxyXG4gICAgICAgIG5hbWVFbGVtZW50LmlubmVySFRNTCA9IHZlaGljbGVEZXNjO1xyXG5cclxuICAgICAgICBhZGRDbGFzcyhtb2RhbC5xdWVyeVNlbGVjdG9yQWxsKCcudnNtLW1vZGFsLWJvZHknKVswXSwgJ3ZzbS1maW5hbC1zY3JlZW4nKTtcclxuICAgICAgICBpblByb2dyZXNzU2NyZWVuLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoaW5Qcm9ncmVzc1NjcmVlbik7XHJcblxyXG4gICAgICAgIHZhciBpbWFnZVNldHRpbmdzID0ge1xyXG4gICAgICAgICAgICBXaWR0aDogMjYwLFxyXG4gICAgICAgICAgICBIZWlnaHQ6IDEyMCxcclxuICAgICAgICAgICAgUG9zaXRpb25YOiAxLFxyXG4gICAgICAgICAgICBQb3NpdGlvblk6IDFcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBpZiAob3B0aW9ucy5JbWFnZVNldHRpbmdzKSB7XHJcbiAgICAgICAgICAgIGV4dGVuZChpbWFnZVNldHRpbmdzLCBcclxuICAgICAgICAgICAgICAgICAgIHR5cGVvZiBvcHRpb25zLkltYWdlU2V0dGluZ3MgPT09IFwiZnVuY3Rpb25cIiA/XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuSW1hZ2VTZXR0aW5ncy5jYWxsKHRoaXMsIG9wdGlvbnMpIDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5JbWFnZVNldHRpbmdzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGltYWdlU2V0dGluZ3MuVmVoaWNsZUNvbmZpZ3VyYXRpb24gPSBiZXN0Q29uZmlndXJhdGlvbi5WYWx1ZTtcclxuXHJcbiAgICAgICAgdmFyIGltYWdlVXJsID0gcmlkZXN0eWxlci5hamF4LnVybChcIlZlaGljbGUvUmVuZGVyXCIsIGltYWdlU2V0dGluZ3MpO1xyXG5cclxuICAgICAgICB2ZWhpY2xlSW1hZ2Uuc3JjID0gaW1hZ2VVcmw7XHJcbiAgICAgICAgdmVoaWNsZUltYWdlLnN0eWxlLmRpc3BsYXkgPSAnaW5saW5lLWJsb2NrJztcclxuICAgICAgICB2ZWhpY2xlSW1hZ2Uub25sb2FkID0gZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgdmVoaWNsZUxvYWRlci5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIGNvbmZpcm1IYW5kbGVyID0gZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgZS50YXJnZXQucmVtb3ZlRXZlbnRMaXN0ZW5lcihlLnR5cGUsIGNvbmZpcm1IYW5kbGVyKTtcclxuICAgICAgICAgICAgLy9IaWRlIG1vZGFsXHJcbiAgICAgICAgICAgIHZhciBhbGxNb2RhbHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcudnNtLW1vZGFsOm5vdCgjdnNtX21vZGFsX2Jhc2UpJyksXHJcbiAgICAgICAgICAgIHBhcmVudEJhc2UgPSBnZXRDbG9zZXN0KHRoaXMsICcudnNtLW1vZGFsJyk7XHJcblxyXG4gICAgICAgICAgICB2YXIgY29weU9mRGF0YUFycmF5ID0gZGF0YUFycmF5LnNsaWNlKDApO1xyXG5cclxuICAgICAgICAgICAgaW5mb0FycmF5ID0gW107XHJcbiAgICAgICAgICAgIGRhdGFBcnJheSA9IFtdO1xyXG5cclxuICAgICAgICAgICAgcGFyZW50QmFzZS5zdHlsZS5vcGFjaXR5ID0gMDtcclxuICAgICAgICAgICAgcGFyZW50QmFzZS5vblRyYW5zaXRpb25FbmRPbmNlKGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICBbXS5mb3JFYWNoLmNhbGwoYWxsTW9kYWxzLCBmdW5jdGlvbiAodGhpc01vZGFsKSB7dGhpc01vZGFsLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpc01vZGFsKTt9KTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgdmVoaWNsZUluZm8gPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgSW1hZ2VVcmw6IGltYWdlVXJsLFxyXG4gICAgICAgICAgICAgICAgICAgIFZlaGljbGVEZXNjcmlwdGlvbjogdmVoaWNsZURlc2MsXHJcbiAgICAgICAgICAgICAgICAgICAgVmVoaWNsZUNvbmZpZ3VyYXRpb246IGJlc3RDb25maWd1cmF0aW9uLlZhbHVlXHJcbiAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgIGV4dGVuZCh2ZWhpY2xlSW5mbywgaW5mb0Jhc2VPYmopO1xyXG4gICAgICAgICAgICAgICAgaWYgKGJlc3RDb25maWd1cmF0aW9uLlRpcmVPcHRpb25CYXNpYykgZXh0ZW5kKHZlaGljbGVJbmZvLCBiZXN0Q29uZmlndXJhdGlvbi5UaXJlT3B0aW9uQmFzaWMpO1xyXG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuY2FsbGJhY2sgJiYgdHlwZW9mIG9wdGlvbnMuY2FsbGJhY2sgPT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBvdXRPYmogPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEZpbmFsU2VsZWN0aW9uTWFkZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgVmVoaWNsZTogdmVoaWNsZUluZm8sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEZ1bGxTZWxlY3Rpb25EYXRhOiBjb3B5T2ZEYXRhQXJyYXlcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5jYWxsYmFjayhvdXRPYmopO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaGlkZU1vZGFscygpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignTm8gY2FsbGJhY2sgZnVuY3Rpb24gcHJvdmlkZWQuJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBoaWRlQmFja2Ryb3AoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbmZpcm1CdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjb25maXJtSGFuZGxlciwgZmFsc2UpO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuU2hvdyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBsb2FkQmFzZSgpO1xyXG4gICAgICAgIC8vQ2hlY2sgZm9yIGFueSBleGlzdGluZyBtb2RhbHNcclxuICAgICAgICB2YXIgYWxsTW9kYWxzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnZzbS1tb2RhbDpub3QoI3ZzbV9tb2RhbF9iYXNlKScpO1xyXG4gICAgICAgIGlmIChhbGxNb2RhbHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUud2FybignVGhlcmUgaXMgY3VycmVudGx5IGFub3RoZXIgdnNtIGluc3RhbmNlIHJ1bm5pbmcuJyk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIG1vZGFsID0gYmFzZSgpO1xyXG4gICAgICAgIGNyZWF0ZUJhY2tkcm9wKCk7XHJcbiAgICAgICAgbW9kYWwuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XHJcbiAgICAgICAgZGlzQ291bnRpbnVlZCA9IGZhbHNlO1xyXG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgYWRkQ2xhc3MobW9kYWwsICdpbicpO1xyXG4gICAgICAgICAgICBhZGRDbGFzcyhkb2N1bWVudC5ib2R5LCAndnNtLW1vZGFsLW9wZW4nKTtcclxuICAgICAgICAgICAgbW9kYWwub25UcmFuc2l0aW9uRW5kT25jZShmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgcmVxdWVzdFN0ZXAobW9kYWwpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH0sIDUwKTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLkhpZGUgPSBoaWRlTW9kYWxzO1xyXG59IiwiLyogZXhwb3J0ZWQgUmlkZVN0eWxlclZpZXdwb3J0ICovXHJcbmZ1bmN0aW9uIFJpZGVTdHlsZXJWaWV3cG9ydChlbGVtLCBvcHRpb25zKSB7XHJcbiAgICAvLyBVSSByZXNvdXJjZXNcclxuICAgIHZhciBsb2FkZXJEYXRhID0gJ2RhdGE6aW1hZ2UvZ2lmO2Jhc2U2NCxSMGxHT0RsaElBQWdBUFlBQVAvLy93QUFBUHI2K3RiVzF0cmEydno4L0xxNnVvQ0FnSXFLaXNEQXdQYjI5dWpvNklpSWlINStmcUNnb09ibTVuQndjRkpTVW9LQ2d1VGs1UEx5OG54OGZLS2lvcTZ1cmpZMk5qbzZPa0JBUUdwcWF0emMzUFQwOUhwNmVxYW1wdmo0K01qSXlEdzhQR3hzYk9ycTZwNmVubmg0ZUw2K3Z0TFMwalEwTkRnNE9LeXNyTWJHeHN6TXpPN3U3dFRVMURBd01MUzB0THk4dktpb3FQRHc4RzV1YnBLU2t0alkyT0xpNG9hR2hoSVNFaEFRRUNRa0pBNE9EaTR1THBxYW11RGc0TjdlM3V6czdMQ3dzSnljbkphV2xtSmlZbzZPanBTVWxFWkdSa3hNVEZCUVVFUkVSRXBLU3BDUWtNN096a2hJU0VKQ1F0RFEwTUxDd2s1T1RwaVltQm9hR2lnb0tESXlNaFlXRmhRVUZMaTR1RnBhV2xSVVZLU2twSEp5Y2xoWVdGNWVYbVJrWkZ4Y1hGWldWaUlpSWlBZ0lCNGVIaW9xS3NyS3lzVEV4R2hvYUxhMnRtWm1aaXdzTEtxcXFoZ1lHR0JnWUJ3Y0hIUjBkSFoyZHJLeXNpWW1Kb1NFaEQ0K1BveU1qQXdNREFBQUFBQUFBQUFBQUFBQUFBQUFBQ0grR2tOeVpXRjBaV1FnZDJsMGFDQmhhbUY0Ykc5aFpDNXBibVp2QUNINUJBQUZBQUFBSWY4TFRrVlVVME5CVUVVeUxqQURBUUFBQUN3QUFBQUFJQUFnQUFBSC80QUFnb09FaFlhSGlJbUtpNHlOam8rUWtaS0VDemsyTkpPQ0R4Y2hnd1UxT2pzU21Rb1FHQ0lXZ2hRaU96MDFucEFMRVJrWUdRNEFGQnF0UDRJTE4wQUNqZ0lTR2hrcEdESUFOancrS0FCQ0tORXVqeE1iR2lvd293QUVISUlUMFNnVWtCd2pHaUl6aGtJdktEaVNKQ3N4d1lZZG1JOEtGQjBGamZxTEFnWU1FaVNVRUplb0FKQUJCQWdpR25DZ1FRVVBKbGdvSWdHdVd5SUNDQmhvUk5CQ0ViUm9GaEVWU09EQXdvY1RJQlFWd0VFZ2lNSkVDaFNrek5UUFJRZEVGRjQ2S3NBQnhZdHBoVWlzQXhMcFc3UUpna0RNeEFGTzV5SUMwVjVnRWpyZzVrY1VRQjA5OEVsQ0VGUVVSQUg0Q2lMdkVRVUZnMjVFQ3dLTHBpQ21LQkM2dWkwa1lJTGN1WGp6NnQzTGQxSWdBQ0g1QkFBRkFBRUFMQUFBQUFBZ0FDQUFBQWYvZ0FDQ2c0U0Zob2VJaVlxTGpJMk9odzhUajQ0WEtsaGJrNHNLRVZaWlhBV1pnd3N4TFlNZFRKMVJDcUVBSUExSlNqT0NGS2hhVVNDQ29JOGtSa3BNVUxJS1ZGWmFYYUFMTjBDNmpBVkhTMDFSVEZNQVZWYzhYZ0JDS05zdWp3c21TMUFhQ0lKU3BRQVQyeWdVazBBZVMwb1hoa0l2S0RpaFFqRXl5NFFkTkpNZ09xeHF4QzlSQ3lKRmtLd1lpS2dBa0FFRTJDV2k0Q0NoRFNkU0ZKRlF4MEVSaUNFV1FscTRvVWpidG82S2dDUXdJT09KQUVVRmNCQUlJbkdSZ0lLc0dycm9nSWhDelVjRmdxQjQwYTBRaVhwQU1qMVFKNmtWTGdBNDFQMWt4R0hiaTM5SEIvQTBpYUtvbzZNdlNBZ2lzQzBwQUdSQlhrNFNPT2pHdGlDREZYQ0dTb2RDU002R0M3emUzY3UzcjkrL2dBY0ZBZ0FoK1FRQUJRQUNBQ3dBQUFBQUlBQWdBQUFILzRBQWdvT0VoWWFIaUltS2k0eU5qb1lrVGo4VWo0MFNQR1VNbFlzZFN6eG1TaUNiZzBJeUtJTTBUVHhuVEFxakFDQUlZR05EZ2gxVXExQ2lBQjJWTGw5aFpHQVhzR1NyWEFVS0VqTkFCWTRGUkdKalhWMHNBRDgrYUI4QU5tSXRLQzZQSkF4aVhCRklBQUloSVlKVlV5Z29sSThUQ05JeGhrQXZLRGlqTGlkVHpneDFvTEVKeEM1R0FSZVJrTEZpeFpTRGh3b0FHVUJBWGlJV1F5NnNtTUZCRVFsNEtEb3FlbktpNUFsK2lZU0FGSm1Jd2dBVUw1b3BLb0NEUUJDTE0xODljOUhyRUFXY3o0TEFERmVJaEQ0Z214YUFuQ0RJb0NBY0lJRXVFZ3FUb05FQnZWVENJK3JJeFlBWEpBUVJnSWNVd0lJYlFRUVVQSGlEN0tDRU9oTUJUSUFuSkc3RUJWenQ2dDNMdDYvZnZZRUFBQ0g1QkFBRkFBTUFMQUFBQUFBZ0FDQUFBQWYvZ0FDQ2c0U0Zob2VJaVlxTGpJMk9oaVJWRGhTUGpRaFlQa2VWaXdwaldHNWRJSnVEQlRkQmd4UmtXR2hLQ3FPQ0sxOFFXNElkWEtzUm9nQVBIWThGTmw4Ykcyd0FJRWFyUmdVS0RXNFJPSThYSGw5cmJTMEFEaGtZYndCSVdqMXdVNDh1UHg0UVlnNEFCUzFwZ20wOVpVYzBsUXRFNVNlR1IxaEV6NXNVSVdrRkRBa0FJcTlTQVFHT0FqSUM4WUxGRkJRSUV4VUFNb0FBSlVVNDFvVlFzMEFSQ1JRZ09TeWFBQktrQzBWQ1NvcFVKQURIalJzVEZoWEFRU0RJUlptdkVycm9kWWpDVFY5QlVMdzRXWWpFQ3hSQU5uMEVHYk5ZUkJ3bGZ6SWlLVlNlMFJ1OVVwcXNSR0hBQUJLQ0NJQk1DbUNCcVlpUEJLQzlNWlpVVGtKVUVJVzhQVlJnQWRHNWVQUHEzY3RYYnlBQUlma0VBQVVBQkFBc0FBQUFBQ0FBSUFBQUIvK0FBSUtEaElXR2g0aUppb3VNalk2R1FoWkRIWStOU0ZFaVJaV0xDbXRSR1hFZ200UWdDb01kWWhvWllLYWpBQTlFVG1xQ25Sb3FZNklBQ3k2VkNRZ0hEUWtBSUJBYUdDTUFDaElwU2h5UFR6WU1EUjRvQUROUVVVTUFWWEpaT2orUEhSZE9PUjRyQUFWU1Q0SWozam9YbFM3ak9TeUdObkE3WVJTYkhTZ3ZoeUFNdkJIaXFsRUJneE51M01DeHFBQ1FBUVQyS1hLQm9pSUtHb3BJV0hRMjBlSkZSVUkyTnNTaGNNSklBa0VrTml4bzBBV2xReFJVUGlvUXhCK3ZRaVJlb0FDeVNXTkZrOE1FQ01KaFVTYWpDUlZmWU14NWcxTElpamNkS1NBd2dJUWdBaFY1NnJvQlJHaWxBZ2NGM2NnNktDeExBRWhSRUR4YnFBQ0pxR3dJNDhxZFM3ZnVxRUFBSWZrRUFBVUFCUUFzQUFBQUFDQUFJQUFBQi8rQUFJS0RoSVdHaDRpSmlvdU1qWTZHTGl0c0NvK05KUkZVTTVXTElDWVJUU01DbTRrZGM1OWlJSUlnTHcrVlQyd29nZ3AwRVZCcm9ndGZibEZTamhOZVAwaHBBQUlORVVsMEFBcGZaV2R5VHI0ckZrVk9CQUIxWUJGc0FEOTJ6bFoxamlCVGJ3NDJXd0FGTDdFQ1JtWnljRVlVanhScWJ5VzloVWZ3UmlTYklFR0NIS0x3eG9LUVVZMUFVQ2pRaUFRQkFoTVdGV2pSZ2tDSFJSUlFhRVJCUXhHSmpSd3didVNvU0FoSVJnOXUzSWlvcUFBT0FrQXVNbUtJc0ZFQkZ6SU5VWmkzcVVBUUZDOWNHQ0t4RHNpbWp4cFpnaEFGQU1kR25vNGVhSHpSa2VpTml5WTFDbjBFZ3NBQWZ3QUlhRFFLWU1FTklFd3IwUVJ3WSt5Z3RUVVVBVXpRZURDdW9RSWt0dHJkeTdldjM3OTlBd0VBSWZrRUFBVUFCZ0FzQUFBQUFDQUFJQUFBQi8rQUFJS0RoSVdHaDRpSmlvdU1qWTZHQlFNRGo0NXNJMjB5bElzZ0RHMWpCd1dhaVFwM25sOGdnaUF5UXhTUEpDZ1BxWjFjZEFJQUpCNHBia2VPQ21veEY1TUNSMjFjRWdBS0ZUQm9kbU8yakIwaHF6TTRBRElqUnBrT0tjdzhQNDhjTEFZcklRQUZONU1GSTI1MlpSdXRqaUFFTEZzY2hrVlhaV3NrbWdVa0M0Y29YUGpnUWxRakVEajRNU0pCZ01DRVJSUEEyTWxnWUpHQ0Z5Z3kwbENFNU13VkgyMVFqY0tvVVJFQk5nbFkzR0MwNE1hTmg0b0s0Q0FBUklIQm00Z0t1T2lBaUFJOFNnV0NvSGhSc0JBSmpFQTB2Y29JRThRekhCbFIvR3owSU9PTGpVZHY4QlFTdFdnOEFqY1VFc2lZRkVCTElNK0FEcnBCZGxBb25JSVJKbVFVQWhjU0NhOTE4K3JkeTdldnFFQUFJZmtFQUFVQUJ3QXNBQUFBQUNBQUlBQUFCLytBQUlLRGhJV0doNGlKaW91TWpZNkhJQUtQamtGRlAwQ1RqQjhWWHgrWmlnSS9GUkFNa2dBQ0NXd2Rqd1ZDTklJQ1JLTUhra0ozVVJsSWowRlBJVGdBQlE0Vk5VY0ZJRGw0S2lsaXBvc0NMeWd0VXlRQUlYZDBMUUF6dUNsWURvOUFLRkloTjRJVG1BVjBHU2t3WDZ1T0lCemlDNFpFS1Q0UVFwbXRyNFlkZFN0Y2ZHb0VZb0krUmtJSUVKaXdhRUlZTnhwa0xBSUJEUVdLZm9qeTZOaVlSSUVpaWhZdktqclNvMlFURUlzVzNMakJVTkVERDFTb2hCZ0lxbG1qQWk3ZUdhSkE0Vk9CSUNoZUNDeEVBaHFtU1NSQ3Rvd2tDRWZJbm84ZVdIenhxdWlOVlVKQ0RvVkg0QVkxQUFRc0hsVUpwSURQUVRmRURqSkxjOUFFaXdjUDJ4WXFRR0tyM0x0NDgrcmRpemNRQUNINUJBQUZBQWdBTEFBQUFBQWdBQ0FBQUFmL2dBQ0NnNFNGaG9lSWlZcUxqSTJPajVDSENta2hDcEdMVTBnTU1wZUpCVU9hUHdXQ0Fpd3lIWkFkbGdBQ0YwZzVOZ0lBTGtjUlRTV1BFeThEUWdBRmRVaDN1Q0JPVkZCTUVMS01CVGNvS0M4VUFDOC9DQzhBUTExTlRCb3pqMERPS0ErQ0pPSUZFdHA0RmFpT0lCelBMb1plVEhnZThKQUZMdEdHSFZ0MU5KMk1RRXpveFVnSUFRSVRGajFvZzRFSm0wVUNCb0Q3bDhpR0hDdFdsSUJRRkhHaUlodFpRbXBjWlBCR1FrVVB4SWhZOGhEZ29RSVVsRG5DdDg0UUJYMzNncnd6Uk9JRkNpQ1JTSUE3Q1VJWkRuQTRHejF3OXVKZnp4dW9oSUN6eDQ3QURSS0NDRGdEQ21EQkRSeWpJb1VGME96bm9MRXVKemdqNkxKUUFSSlVDdHZLblV1M3J0MjVnUUFBSWZrRUFBVUFDUUFzQUFBQUFDQUFJQUFBQi8rQUFJS0RoSVdHaDRpSmlvdU1qWTZQa0lna0M1R01IRU16TjVXS0xCY09RNE1DTDJvS2tDQWdnZ1dkSlI4RkFEUkViV01manlRdkEwS0NhUmRFRndBQ0pVWmNYUTJ1alJ3b0tDOFVBRUIxRmh3QUJySmRTNzZPT01rb0Q0STBKSUpPWTExVU9hV09JTWd2TklZWFpPVHJrQVV1eklZS0oxdndtNG9DRDBGQ3hvbUVFQ0F3WVJHUUdocFVKUG1TejVDQUFkb2FHcnBqcHlLUEt6SVNGWUNZVEdJaEJHWkNtckZqUUpFTEFqY0tLbnF3SVFvVEprNEU2RE5Vb0lQTlIvSTZJR0l4UkdlOElNcGNHQ0tSNEVzYm9iVzBxUVFoRTBBMktRNVFRSHFRVEIwQVd6ZDBDdEdXNnhFSWxOOEFFRWdHUk5DQ0d6Z0E0aHgwZyt3Z3Rmb1RKaVRyT3JOUUFSSkk2K3JkeTdldlg3NkJBQUFoK1FRQUJRQUtBQ3dBQUFBQUlBQWdBQUFILzRBQWdvT0VoWWFIaUltS2k0eU5qbytRaUNBQ2tZeENUeXdrbFlvRWFUSXNnd1VjUUpFZ0JZTTNhUVl5Z2gxdkhpWXRqMEl2TjBLQ25WdFRBQVVySmhCckRvOGNLQ2d2RkFCQ0xRWVRBR29Wd0dKYmp6akZLQStDQ2pTQ0RsOXJSa2dLanlERUw5dUZXeHR4TnVlUEJTN0loaUFzSi9HYmlnSUxRRUQyaUVJRUJKb3A0akNIU2hJbVlsQWtFakRBV3J0RE9WS2t3RUlSd2lsRUJCd3F1dU9tWTBjSWlsd1F1Q0V3RVE0SVNwUlFtVVBnbnFFQ0hXSmVaUFN1d3lFUVE0YlloRlFnaURFWGhoeG8wVElHNkNNUzFnUk9FcFFHaWg0ZE1TQTlLR1lPQUlsYU5vVVl3S09IQ0NRUUl6VUJ5SWlDRklBRk1pcVVkSWVxbUZsZUxoUUhUU2gySzI2aEFpU00ydDNMdDYvZnY1c0NBUUFoK1FRQUJRQUxBQ3dBQUFBQUlBQWdBQUFILzRBQWdvT0VoWWFIaUltS2k0eU5qbytRaUFXUmpSUTNCQXFVaWh3b0tCeUVJSk9RQmFJQUJKMHZnZ29KUkJlWmpqUTNOMEtDcDFJREFBVXlSemtIS0k5QnFCUUFRZ01vTGdCU05nd05EWitPT0owb0M0SWdyM1hNSmw2bGpDQ2NMOE9GYWdkMERoMlJCUzdoaFNCUEllZWFpd0lrT0RqcmlDNEVCQk9MUUFkalpMcEF3SlhvVkNjYWlvNHdpY0pRZ3dkRkJsRWdUSlFuZzBXTER4TlJJSENEbjZJSkhzaUFBVlBoV1R4Q0JUcDBlTlVvSGJ4Q0FtTEVlT21vUUxBWHlBb3hzQ0xIU0U1SEpLUjVCQ0ZBVUpnZFdxeXdnZlFBRlVJU0wyNmNRNklEcVFOSUlEaVNxTlVKQ0FBRkRkeUk4VGhxMEkydWd4NFVQUWxnUWlkYWJBNExGU0R4TTY3ZHUzano2cVVVQ0FBaCtRUUFCUUFNQUN3QUFBQUFJQUFnQUFBSC80QUFnb09FaFlhSGlJbUtpNHlOam8rUWtaS0VDa0JBQXBPSlFDZ29ENW1EQlFXREJKd2NnZ1VEVXdTUUhUYzNRb0trS0VHQ1R6TU9EalNQT0p3dkhRQkNBd01VQUVFckRrVlZMbzhUbkNnTGdnSWdnaXdXUlVkMWtDQWNLQy9FaFZKVmVSY0trUVV1MzRVQ053UGxuNGtGUWc4UHY0b1VCQVFUaXhONU5XMWlEVllsa29WQ1Y2SWZaTHAwaVJBaGh5S0NCaEVWYVVLUjRoMTdCRzdvVS9UZ2pwaVBPV2k5bzZUQVhhTno5ZFJ0MlpMU1VZRWczWllWeXNQanlvYUlqVWc0MndnQ0V3QWpWczdZTVFEcFFTOWRKRjdjK0ZYRVNsQXYyaktTaU1VSkNBQUZFckJ3TVdWdTBJMnFneFpNZTljTUJheVJoQXFRa0ltMnJkdTNjQVRqTmdvRUFDSDVCQUFGQUEwQUxBQUFBQUFnQUNBQUFBZi9nQUNDZzRTRmhvZUlpWXFMakkyT2o1Q1Jrb1FLUURnQ2s0azRLQ2dQbVlNRkJZTUVuQnlESkJ3VWtCMDNOMEtDcENoQmdrQXNCaUdRRTV3dkhRQkNBd09xSkNFeWRXeVlqZytjS0F1Q0FpQ0NITVV6dUk4Q0hDZ3Zxb1U0ZFI4SjBKQUZMdHVHT0VIaG40Z0ZOQ1FreUlrVUJBUVRpd3RFQng0bVNFQ0tzU2cwRkgzWXNLYU5RU1QrbGdWTTVHRE1tREFPYlNpU2Q2T2VJaEpIdm55Wll3T0h1a0lLRktSak5LNlhJUXB2THBoOFZDQklOaGVHanJqQk11ZlZJeExMTElJSUtJQUxEelErNkNoNHBDeGJRQkl2dnJBQmdJUUhqeXRZVGp3Q1FlQUdDVmdvUEpBcG9PQkxtYWRlSW9rU2RBTUZrYTBBYUhqQW9tVEFKMTBYRklpQTRuRDFVd0VTQzBaKzNNdTNyOSsva0FJQkFDSDVCQUFGQUE0QUxBQUFBQUFnQUNBQUFBZi9nQUNDZzRTRmhvZUlpWXFMakkyT2o1Q1Jrb1FDRXdzRms0azRLQ2dMbVlPWWd3U2NISU1VTHBFZEJEZENncU1vUVlJVEx5ZzRrQk9jTHgwQVFnTURGTHljTFMrUUM1eWRnZ0lnc2lndGFrQ1FCUndvTDhDRlFpMVRLS0dQQlM3V2hrS1huNHVuSGR5SUZBUUVFNHRDSzBWT05oK3RpYThvTklveEJ3MFZGUjViRk4zTGwrakNsNE1IWXloU2Q2T2RJaUZFSk55NTR3QVZPVUlnTW5aenNjdVFpeFZzT25ZTFFzMGlJUnNaTkRRdzJZakVNWWRQU2luZ2drVUZuZ01pR1QzSWxRK0lDalFCcS9qQWdnR1BsMGNnVnBFUTlFTEZqakVGUUhnWWltR0VnR2lEV3ZqWVFRYVRFQWcrVXZ6NDlPS0tqaUttMklUOFJPRklsWndYQ09QS25VdTNMcVJBQUNINUJBQUZBQThBTEFBQUFBQWdBQ0FBQUFmL2dBQ0NnNFNGaG9lSWlZcUxqSTJPajVDUmtvUUZKQ1NUaWpnb0tBdVlpQVNiSElNZEhaRUtIQVJDZ3FBb1FZSVRMeStYancrYkw2VkNBd01VQUVLYnJaQUx2NTBBQWlDdnY2cVBCUndvTDd5RnZpZzRrZ1V1MElZVU5KNk1DaFRIaXhRRUJCT0xIVk1ySHl0U2k2d28yNGtzVlVWSVNEL3duNy80aDFNTS9ndzJYQ2dTZDZQY3dEZEliQkJoeDYyUUFBVUNscmtvWlloR0RCa0tJaFVJNGt4Z29SOU5JaURZeDRqRXIzSUNXcmdDSVVZREZDcDVLRGFxNVd4YkRqbFlEQUJ3SUVKREVpb3JIb0VnY09NU0JSVTY0QmdwQUVKQ3p5UW1Da0NTQ29BRWpLUmhwTHJ3SUNLS0JVOXRrdjRZUk1FQVJrOFRqdnlRMmJDdDI3ZHdCT05HQ2dRQUlma0VBQVVBRUFBc0FBQUFBQ0FBSUFBQUIvK0FBSUtEaElXR2g0aUppb3VNalk2UGtKR1NoQVVrSkpPS0V5Z29DNWlJQkpzY2d5QWdrUW9jQkVLQ29DaEJnZzh2QXpTUUQ1c3ZIUUJDQXpjVXVac29PSkFMdjUwQUFnS0NtcHVxandVY0tDKzloVUtid1pFRkx0S0dGTE9laXdJZ0JZd1VCQVFUM3k5cUNTek1pYXdvM1lnM2RVTVhGeWVMNy9HSFVoYitGZ1lXVWVCdzQ1eWlEZ1ptdklseHlWc2hBZUthdWNCbGlJWU1OYVVnRlFnQ3pZVWhMMlBhVk5IV2lNU3Zjd0tlQUFFQTRrc0VMbkdxS0hoVUM5b3NCRHhFNFB0QUpRS1lPREVlZ1NCdzR4SUZQRmJLYkNnQUlvOFNuemtpT29vb0JFUFNOdUpvM0tIUzVZMm5FVlo0bEJqVUljMlVtWmdtMkhDQTFxSGJ0M0FGNDhxVkZBZ0FJZmtFQUFVQUVRQXNBQUFBQUNBQUlBQUFCLytBQUlLRGhJV0doNGlKaW91TWpZNlBrSkdTaEFVa1FwT0tEeWdvQzVpSUJKc2NneUFGa1FvY0JKY0FvQ2hCZ2c4dk54MlFtaWd2czBJRE54UUFRcHNvRDVBTHY1MEFBZ0tDRTcrcWpnVWN0cnlGUWk4b09KSUZMdEdHSFRTZWpBV2xqQlFFQkJPTEJVQURBMERJaXF3bzNZa1BUeTFwYWRidXYvR0lRVEwrTXE0VVVlQnd3NXdpRUMxT25KQUN3cHNoY0pDd3pkckc0a25EaUVGUVNBbGg2QUlFRHg4bU9uS3g2Y2djWXlGUUdEdlFwZ2FkRHhjYmFYcUR4UXNBSno3d0dBQXdKRTZiRVhNU1BBTHhRZ3dEQVJTUzJJRmh3bGlWTUQ5L1FCSlFEQWNXT3o3YUlLUGd4RWliR0pnV3FNQ3FWWkNDalRFalVWQml4ODBkaDRVUUx1Q2hrZ1p1b1FjazdPcmR5NWRRSUFBaCtRUUFCUUFTQUN3QUFBQUFJQUFnQUFBSC80QUFnb09FaFlhSGlJbUtpNHlOam8rUWtaS0VCU1F1azRvUEtDZ2ttSWdFbXh5REFnV1JDaHdFUW9LZ0tFR0NEd01FSUpDYUtDOGRBRUlETnhTNW15Z0xrQXUvd1FDa2doTy9xbzhGSExhOWhVSXZLRGlTQlM3UWhoMDBub3lsalJRRUJCT0xCVUM3MVl1c0tOeUp3Ny9abjcvdGlPK2I4WWNVSERma2lnVkJMd2FrNjBid1doQUJoa0NndUlFUVVyTWlXSDRZa3NIQXhoWUZrSVFnTUxNRGdyRTBMNHc1cVhEbkNKdUdqV1pZNlFGbkJvQWlHWlFrQUdCZ0RzazhMUjZseWVBbWo0QU9TMUxndVdQTXl4d1BFdGhBSXZGQUVBa21LVVI4S2RYQmdvazdVakE5alZyam00QWJyakM1YUpJaWd3bUNoVHhFZllPVzBJSVNid2d3dHAxTHQ2NmdRQUFoK1FRQUJRQVRBQ3dBQUFBQUlBQWdBQUFILzRBQWdvT0VoWWFIaUltS2k0eU5qbytRa1pLRUJVSXVrNG9QS0Nna21JZ0VteHlEQlpJS0hBUkNncUFvUVlJUEF4d0NrSm9vTHgwQVFnTTNGTGliS0ttUEM3NExnZ0trQUJPK3ZJOEZITFhMaEVJdktEaVNCUzdRaFIwMG5vekhqQlFFQkJPTEJVQzZ4SXVyS055SndwdTI2cjd0aUVLKzhZb1VIRGZraWdVNEJEZ0E2MFlRU0FrWnNnb0pDSUxqbTZNSlNYcklLV0VvaElNVmFSSTZxckpEQjV3NUFBUTh1U0ZvaG8wU0gxcEFNcUVqUzVrVkFJZzBHY01DZ0JvRU5vaDhlUENvaFlZVVRnUjBHQk5saVJNQUJlcmdKQUlFa3BCMFFwWkVvWEtBRklndFB3eUF3QlExaXBJSzMyNTVva0hHNngyQ2hlNTRyWU9XRUlrUGRRaTJ0cDFMdDY2Z1FBQWgrUVFBQlFBVUFDd0FBQUFBSUFBZ0FBQUgvNEFBZ29PRWhZYUhpSW1LaTR5TmpvK1FrWktFQlVJdWs0b1BLQ2drbUlnRW14eURCWklLSEFSQ2dxQW9RWUlMTjBFQ2tKb29MeDBBUWdNM0ZMaWJLS21QQzc0TGdnS2tBQk8rdkk4RkhMWExoRUl2S0RpU0JTN1FoUjAwbm96SGpCUUVCQk9MQlVDNm5ZdXJLTnlKd3BzRHNvcnI3WWhDdnZHTEZCdzM1SW9GT0Fod3FOZXRHdzRISitRVkluRXAwZ1FsV1hoWU1IUkRCb3NnM3hvZGdTT25UQVVBQlY2MEFuQml4WllwSXgxNWtHUEd6UkFBWHJqVWVBSkFpb1VWYk5TQWVQUUVDcDRpQWhTczZXS2tCTWdwWGxhYzJQbElDREVBTHNKMGlYT0VsSUFYQ2FwaGNoR25TNWc4R2J2UkVPUFZSc0ZDUjd3YU9CdnRnZ0dtYkFianlwMExJQkFBSWZrRUFBVUFGUUFzQUFBQUFDQUFJQUFBQi8rQUFJS0RoSVdHaDRpSmlvdU1qWTZQa0pHU2hBVkNMcE9LRHlnb0pKaUlCSnNjZ3dXU0Nod0VRb0tnS0VHQ0N6ZEFwSSthS0M4ZEFFSUROeFM0bXlpOGp3dStDNElDc2hPK3dJNEZITFhLZzBJdktEaVNCUzdQaEIwMG5veXlqQlFFQkJPTEJVQzZxWXVyS051SkpMNDMzb2dEYWdreG5ZbEM3L0dITFdGTkpyY1NGY0JCSUFpN1JSMkU3T05HQ0FlUklTQU91YmdVS1VnWE0yNGNHS0lWNnhHSk1HV3UrSkFBb0FBQmFnQlFoSkNDNHNFakJ5SGRxRmdCNEVJTkNRTUFCRG14a3NBakNYYmNwTWdqUUlHSk5TWm9wdVFweXBHVUNGR0szS0pSWXcwZGpTV0JBRkVBeWNVNFFUUWdySmxEaENFaENuUFdmTEZnbHBBRHRXb04yZzZpSUlPRkFMbDQ4K1lOQkFBaCtRUUFCUUFXQUN3QUFBQUFJQUFnQUFBSC80QUFnb09FaFlhSGlJbUtpNHlOam8rUWtaS0VCVUl1azRvUEtDZ2ttSWdFbXh5REJaSUtIQVJDZ3FBb1FZSUxOMENrajVvb0x4MEFRZ00zRkxpYktMeVBDNzRMZ2dLeUU3N0FqZ1VjdGNxRFFpOG9PSklGTHMrRUhUU2VqTEtNdVRjVGl3VkF1cGVLUW1CS05SSTNpaVMrQklza0tUMDlPeC9vOFl3WFRDazEyQW9Wd0VFZ1NNQkRIVng0NDJab2dvVVlJQTY1T0FjSnlCZ2ZLdklWZ29jaTFpTWhiWHlrRUpFSEFEbGlBSUFNZStRRXhrZ29kUUJza1ZDbEZVY1VvaHFCNEpJaVF4UUhCVUF3YU9Ea2hLQUowaDQ4WXBCQmc1T0lGQ1EweUJOVEVBV0tqU2pJT0tIQTZwMEdDSVl3SkFRaUQ5Z3RZd2taT09Ba1oxcVRIQWVvdloxTGwyNGdBQ0g1QkFBRkFCY0FMQUFBQUFBZ0FDQUFBQWYvZ0FDQ2c0U0Zob2VJaVlxTGpJMk9qNUNSa29RRlFpNlRpZzhvS0NTWWlBU2JISjRBQ2tFRVFvS2dLRUdDSkFSQUJaQ2FLQzhkQUVJRE54UzNteWk3and1OUM0SUNzUUFUdmIrT0JSeTB5b05DTHlnNGtnVXV6NFFkTkpGQ3FJM0dqQ3NZTUd1ZGlRVkF1ZHVLUWhnNzcyK0tKTDBFaXlRWldWbHdNK3k5b290RG1vaVlnNjFRQVJ3RWdoUThwTUFGdUZHR0hzd3dBT0lRaFlXTGNMUVJBZVdDSVJMU1lEMFNBZ0VQRXlwVldsMENBRVRZb3lvbWxYQXhBRUROanlIRGhQUUM0Z2hFR3laTnVzd29JSUJJa1JsU0JEMTQ4Y0piSXlkTkloQ3BTTU5Ha1E4c0JuVlFBS25ERkRWY0FYUW9Vc1NMR29pRUJId29ZZ0VGV2tJNERTNGtXUGRXME1PNmVQUFdEUVFBSWZrRUFBVUFHQUFzQUFBQUFDQUFJQUFBQi8rQUFJS0RoSVdHaDRpSmlvdU1qWTZQa0pHU2hBVkNMcE9LRHlnb0pKaUlCSnNjbmdBS1FRUkNncUFvUVlJa0JFQUZrSm9vTHgwQVFnTTNGTGViS0x1UEM3MExnZ0t4QUJPOXY0NEZITFRLZzBJdktEaVNCUzdQaEIwMGtTNm9qY2FNUXlJWUk1MkpCVUFEQk5pR1FuaFdjSEFYaWlTOW9vcENVV1ptWlcvNDlveGlkRW5pZ1IwbEhBU0NHRFNrZ0FhNFVZWVdYRWdnNEJDRmhZb216RkhDaFkwaEV0S0FRSEpSZ1FxWk9GNEUwVkFnQ0VndmI0MGNMQ0VUWm9RYUFGSmlwTmtscE5jRVJ5RG0wRndUbzRDQUlVUFVVQVB3NE1VQWpJYUloR256cG1LSEdVT20zQ01GQWxLSEVDMk1nYmd3Sk1GV2lJSllERGt4RE8wZ0JUY0tmcnFkUzdldVhVT0JBQUFoK1FRQUJRQVpBQ3dBQUFBQUlBQWdBQUFILzRBQWdvT0VoWWFIaUltS2k0eU5qbytRa1pLRUJVSXVrNG9QS0Nna21JZ0VteHllQUFwQkJFS0NvQ2hCZ2lRRVFBV1FNaTBvTHgwQVFnTTNGTGliS0x5UE9SQzBDNElDc1FBVHZzQ09RRkJmVDh5RFFpOG9PSkk0RHNXSEhUU1BCUzRrUWdLTnlJb2tYeG9aSWh1b2lRVkFBd1MzaVY1MmRqdzhaUTdudnFLSk05d0lGT2hGa1JCZnJCS1JvTk1FeXBJR2w5N2hlS1ZnVVNVU0VVY2hJc0VtQkRsREZLUTVXbkFnVG8wRWhraFVBd0tKQm9JNEcralVFYVFBaENBZ3Z0dzFlbU5rd3h3SlR3QUVlVExnMXNGTjJ4Z0prTERoUzRVVEFBcXdvTVVTd0FONUZSM05jTXFHbkFBMXRQNEJPQVpKZ1pRWHlBcWtvYXF4RUpBbkx3MUV0cVdRdGEzZHUzanpLZ29FQUNINUJBQUZBQm9BTEFBQUFBQWdBQ0FBQUFmL2dBQ0NnNFNGaG9lSWlZcUxqSTJPajVDUmtvUUZRaTZUaWc4b0tDU1lneDBGZ3dTYkhKNEFhVTAvUW9LaktFR0NKQVJBb1k5elBTa0dIUUJDQXpjVXU1c292NDhTT3oxR0Q0SUN0QlBCdzQ0NFNUdGxUNFpDTHlnNGtqZy9iTFNGSFRTUEJUU1dBbzNmaVN3YlRVeEpYNTJKQlVBREJMcUlJRVpZK3pBd1NJb2tncjNDdHlHRFFZTU9GQWtKQmtSUml3MWt5SXhoRUE5UkFSeXlRQ3dDSVVTSU9GT0pYQ1I0a200UWhXZVBTRGlaYzZlRklSTFlHajZpVUlYT2dUd0pCSUhRQ0FCSHNJK04ySmc0Z09ESERRQXdCK2hhdUduQkl5SUhHQ0J4Q2FDVnpBWDFlRFpTazZlSW1sQUZibXdhQ0tCQVNVWVRrb25hcEEwa0lWNEVEUlM0TFdSMnJ0MjdlUE1lQ2dRQUlma0VBQVVBR3dBc0FBQUFBQ0FBSUFBQUIvK0FBSUtEaElXR2g0aUppb3VNalk2UGtKR1NoQVZDTHBPS0R5Z29KSmlERkVLREJKc2NuZ0F0VFNsRmdxTW9RWUlrQkVBRmtCNVpPbFlHQUVJRE54UzdteWkvand4d1dqc1NnZ0swQUJQQnc0NDRWSEJuRjRaQ0x5ZzRraE1sVzh5RkhUU1BCVFJDTk9DSzZZaHBjMlJMRVI2aGlRVkFBd1FkaVNBMVVWRWFHbmlJS0NJUjdCVWlBWFNhS0ZRNFE1R1FZRUFVU1RIUnBzMElHL01RRmNBaEM4UWlFQzVjUUROMWlFYWFHK3NFVVJqcHlJV0ZQRDl1R0NLUkxlSWpFRytPVlBtQVFoQUlqd0J3QkJ2bkNJV1RLbDVpUEFCQWMwQytoNXM2RmExaTRjSUFWcHRzTHJnSHRKR0NFMnhrQWlod1k1UEJzU2taQ1NERVlkTUNrb1VPS0hEZzBCV3UzYnQ0OCtwZEZBZ0FJZmtFQUFVQUhBQXNBQUFBQUNBQUlBQUFCLytBQUlLRGhJV0doNGlKaW91TWpZNlBrSkdTaEFWQ0xwT0tEeWdvSkppRE5FS0RCSnNjbmdBdFVCbFZncU1vUVlJa0JFQUZrQWRtVm1VeUFFSUROeFM3bXlpL2owYzhaMVk1Z2dLMEFCUEJ3NDRUWkR4MmRZWkNMeWc0a2hOZU1zeUZIVFNQQlJRdU5PQ0s2WWhTQjJKaGNUbmppUVZBQXdRS2lRSVZYVjBSUzBzdUtDSVJESWkrTzJNU0poeWlTRWhCUlFNWW1ERFJ3TUU4UkFWd3lBS3hTQUFGR2gxTUtlcnd3dUFoQ3RBZVVZamhoYzBEUXlTeW1YeDA0a09kS2RzQWdPQUlBTWV6UnlSVzFEbnhaRnpNQVNFZGJycmt5QVViR1dsZUFtaGxjc0dOSUFJZzJlc0VvTUNOVGE4RXJac1VaTk1Da1lVVUJKa3dGcTNidDNBRjQ4cEZGQWdBSWZrRUFBVUFIUUFzQUFBQUFDQUFJQUFBQi8rQUFJS0RoSVdHaDRpSmlvdU1qWTZQa0pHU2hBOFhMcE9FQ3hPRVgwMVNKSmdBVTBsNEpZSVVLa3BTSEtFVmJsZHVSQUFVR1dRb1FZSWtCRUFGajA0d2JuWm9CZ0JPYlRjVUFFSW96TW1PRDJFd2FEd1ZnaE85QUJQTUtNNk9OOUUrRm9aQ0x5ZzRrZzhmRndLSEhUU1E3aFRZaS9PSkwwZHpFQkJPNzRrRlFBTUlLRWdrSU0rYU5tM0VHR0dqaU1RMklQNlFmSms0a1ZpaVpjd2dKdUpRQlFFQ0p4ZTZIU3FBWXhlSVJRSTZVQmdZU3BFQ0hFSVFVUkRwQ0VTSUJFOHVGU0pSVHVPakYxT2VvTmdFQU1SSkFEaTIwWFFaUXVpTGR6d0hkRkMyVFdlakFnTlF2QUFGZ0VCR1FRdHU0S2pIU01FQ3F6ZVk0UkpFZGhJUVpnc1BXaG9TTU9HYTNMdDQ4K3JkaXlrUUFDSDVCQUFGQUI0QUxBQUFBQUFnQUNBQUFBZi9nQUNDZzRTRmhvZUlpWXFMakkyT2o1Q1Jrb1FMUlRNS2s0SkNGeUdFZERzNlI1a0NCeGdpRm9JVWVEczlKcGswWEJrcEtnNEFGQnFzUklJa0JFQUZqd3dhR1ZnWU1nQTJQRmdvQUVJb3poU1BFeHNhS2pBU2dnUVBnaFBPS05DUEhDTWFJak9HUWk4b09KSWtLekVDaHgwMGtBb1VIYitNOTRwQ0Zqa1NFaVhmRUJVQU1vQUFwa1JER2xUdzRNRkVBa1VrdWdGUkZJT0JSWXNzOUVsVTVJS05Bd2NmVG5SUVZBQkhMeENNRkNoQW1XbVJBQmNqRDFFSStLZ0FCeFF2WEJnaWdXNGlKRzdPSmdnQ3dSSkhONXFNQ0RoN0lZL25nSkhObmtFQ2dwTUVObWMrRjl4UUI2bUFpNE1BYmpnTE1paGZTNk1vckxZMEpPQ0IyclZ3QitQS25VdFhiaUFBT3dBQUFBQUFBQUFBQUR4aWNpQXZQZ284WWo1WFlYSnVhVzVuUEM5aVBqb2dJRzE1YzNGc1gzRjFaWEo1S0NrZ1d6eGhJR2h5WldZOUoyWjFibU4wYVc5dUxtMTVjM0ZzTFhGMVpYSjVKejVtZFc1amRHbHZiaTV0ZVhOeGJDMXhkV1Z5ZVR3dllUNWRPaUJEWVc0bmRDQmpiMjV1WldOMElIUnZJR3h2WTJGc0lFMTVVMUZNSUhObGNuWmxjaUIwYUhKdmRXZG9JSE52WTJ0bGRDQW5MM1poY2k5eWRXNHZiWGx6Y1d4a0wyMTVjM0ZzWkM1emIyTnJKeUFvTWlrZ2FXNGdQR0krTDJodmJXVXZZV3BoZUd4dllXUXZkM2QzTDJ4cFluSmhhWEpwWlhNdlkyeGhjM011YlhsemNXd3VjR2h3UEM5aVBpQnZiaUJzYVc1bElEeGlQalk0UEM5aVBqeGljaUF2UGdvOFluSWdMejRLUEdJK1YyRnlibWx1Wnp3dllqNDZJQ0J0ZVhOeGJGOXhkV1Z5ZVNncElGczhZU0JvY21WbVBTZG1kVzVqZEdsdmJpNXRlWE54YkMxeGRXVnllU2MrWm5WdVkzUnBiMjR1YlhsemNXd3RjWFZsY25rOEwyRStYVG9nUVNCc2FXNXJJSFJ2SUhSb1pTQnpaWEoyWlhJZ1kyOTFiR1FnYm05MElHSmxJR1Z6ZEdGaWJHbHphR1ZrSUdsdUlEeGlQaTlvYjIxbEwyRnFZWGhzYjJGa0wzZDNkeTlzYVdKeVlXbHlhV1Z6TDJOc1lYTnpMbTE1YzNGc0xuQm9jRHd2WWo0Z2IyNGdiR2x1WlNBOFlqNDJPRHd2WWo0OFluSWdMejRLUEdKeUlDOCtDanhpUGxkaGNtNXBibWM4TDJJK09pQWdiWGx6Y1d4ZmNYVmxjbmtvS1NCYlBHRWdhSEpsWmowblpuVnVZM1JwYjI0dWJYbHpjV3d0Y1hWbGNua25QbVoxYm1OMGFXOXVMbTE1YzNGc0xYRjFaWEo1UEM5aFBsMDZJRU5oYmlkMElHTnZibTVsWTNRZ2RHOGdiRzlqWVd3Z1RYbFRVVXdnYzJWeWRtVnlJSFJvY205MVoyZ2djMjlqYTJWMElDY3ZkbUZ5TDNKMWJpOXRlWE54YkdRdmJYbHpjV3hrTG5Odlkyc25JQ2d5S1NCcGJpQThZajR2YUc5dFpTOWhhbUY0Ykc5aFpDOTNkM2N2YkdsaWNtRnBjbWxsY3k5amJHRnpjeTV0ZVhOeGJDNXdhSEE4TDJJK0lHOXVJR3hwYm1VZ1BHSStOamc4TDJJK1BHSnlJQzgrQ2p4aWNpQXZQZ284WWo1WFlYSnVhVzVuUEM5aVBqb2dJRzE1YzNGc1gzRjFaWEo1S0NrZ1d6eGhJR2h5WldZOUoyWjFibU4wYVc5dUxtMTVjM0ZzTFhGMVpYSjVKejVtZFc1amRHbHZiaTV0ZVhOeGJDMXhkV1Z5ZVR3dllUNWRPaUJCSUd4cGJtc2dkRzhnZEdobElITmxjblpsY2lCamIzVnNaQ0J1YjNRZ1ltVWdaWE4wWVdKc2FYTm9aV1FnYVc0Z1BHSStMMmh2YldVdllXcGhlR3h2WVdRdmQzZDNMMnhwWW5KaGFYSnBaWE12WTJ4aGMzTXViWGx6Y1d3dWNHaHdQQzlpUGlCdmJpQnNhVzVsSUR4aVBqWTRQQzlpUGp4aWNpQXZQZ284WW5JZ0x6NEtQR0krVjJGeWJtbHVaend2WWo0NklDQnRlWE54YkY5eGRXVnllU2dwSUZzOFlTQm9jbVZtUFNkbWRXNWpkR2x2Ymk1dGVYTnhiQzF4ZFdWeWVTYytablZ1WTNScGIyNHViWGx6Y1d3dGNYVmxjbms4TDJFK1hUb2dRMkZ1SjNRZ1kyOXVibVZqZENCMGJ5QnNiMk5oYkNCTmVWTlJUQ0J6WlhKMlpYSWdkR2h5YjNWbmFDQnpiMk5yWlhRZ0p5OTJZWEl2Y25WdUwyMTVjM0ZzWkM5dGVYTnhiR1F1YzI5amF5Y2dLRElwSUdsdUlEeGlQaTlvYjIxbEwyRnFZWGhzYjJGa0wzZDNkeTlzYVdKeVlXbHlhV1Z6TDJOc1lYTnpMbTE1YzNGc0xuQm9jRHd2WWo0Z2IyNGdiR2x1WlNBOFlqNDJPRHd2WWo0OFluSWdMejRLUEdKeUlDOCtDanhpUGxkaGNtNXBibWM4TDJJK09pQWdiWGx6Y1d4ZmNYVmxjbmtvS1NCYlBHRWdhSEpsWmowblpuVnVZM1JwYjI0dWJYbHpjV3d0Y1hWbGNua25QbVoxYm1OMGFXOXVMbTE1YzNGc0xYRjFaWEo1UEM5aFBsMDZJRUVnYkdsdWF5QjBieUIwYUdVZ2MyVnlkbVZ5SUdOdmRXeGtJRzV2ZENCaVpTQmxjM1JoWW14cGMyaGxaQ0JwYmlBOFlqNHZhRzl0WlM5aGFtRjRiRzloWkM5M2QzY3ZiR2xpY21GcGNtbGxjeTlqYkdGemN5NXRlWE54YkM1d2FIQThMMkkrSUc5dUlHeHBibVVnUEdJK05qZzhMMkkrUEdKeUlDOCtDZz09JztcclxuXHJcbiAgICAvLyBWaWV3cG9ydCBlbGVtZW50c1xyXG4gICAgLyoqIEB0eXBlIHtIVE1MRWxlbWVudH0gKi9cclxuICAgIHZhciBjb250YWluZXIgID0gbnVsbDtcclxuICAgIHZhciBsb2FkZXIgPSBudWxsO1xyXG4gICAgdmFyIHJlbmRlcmVyID0gbnVsbDtcclxuXHJcbiAgICAvLyBTdG9yZXMgdGhlIGN1cnJlbnQgdmVoaWNsZSBzdGF0ZSBmb3IgdGhlIHZlaGljbGVcclxuICAgIHZhciBhY3RpdmUgPSBmYWxzZTtcclxuICAgIHZhciBzdGF0ZSA9IHsgfTtcclxuXHJcbiAgICAvLyBNYWtlIHN1cmUgb3VyIG9wdGlvbnMgb2JqZWN0IGlzIGluaXRpYWxpemVkXHJcbiAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcclxuXHJcbiAgICBpZiAob3B0aW9ucy5zdGF0ZSkge1xyXG4gICAgICAgIHN0YXRlID0gb3B0aW9ucy5zdGF0ZTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBBdHRlbXB0IHRvIGZpbmQgb3VyIGNvbnRhaW5lciBiYXNlZCBvbiB0aGUgc2VsZWN0aW9uIHN0cmluZyBpZiB3ZSBjYW5cclxuICAgIGlmICh0eXBlb2YgZWxlbSA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICBpZiAodHlwZW9mIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IgPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihlbGVtKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGVsZW1bMF0gPT09ICcuJykge1xyXG4gICAgICAgICAgICBjb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKGVsZW0uc3Vic3RyaW5nKDEpKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGVsZW1bMF0gPT09ICcjJykge1xyXG4gICAgICAgICAgICBjb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChlbGVtLnN1YnN0cmluZygxKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSBlbHNlIGlmICh0eXBlb2YgZWxlbSA9PT0gJ29iamVjdCcpIHtcclxuICAgICAgICAvLyBJcyB0aGlzIGEgRE9NIGVsZW1lbnRcclxuICAgICAgICBpZiAoZWxlbS50YWdOYW1lKSB7XHJcbiAgICAgICAgICAgIGNvbnRhaW5lciA9IGVsZW07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIE1ha2Ugc3VyZSB3ZSBjYW4gZmluZCBvdXIgZWxlbWVudCB0aGF0IHdlIGFyZSB0cnlpbmcgdG8gdXNlIGZvciB0aGlzIHZpZXdlclxyXG4gICAgaWYgKCFjb250YWluZXIpIGNvbnNvbGUuZXJyb3IoJ0NvdWxkIG5vdCBmaW5kIGVsZW1lbnQgc3BlY2lmaWVkIGZvcjogJyArIGVsZW0pO1xyXG5cclxuICAgIC8vIFByZXBhcmUgdGhlIGNvbnRhaW5lciBzbyBpdCBjYW4gcHJvcGVybHkgd3JhcCB0aGUgY29udGVudHNcclxuICAgIHZhciBpc09mZnNldFBvc2l0aW9uZWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHBvc2l0aW9uID0gY29udGFpbmVyLnN0eWxlLnBvc2l0aW9uO1xyXG4gICAgICAgIHZhciBpc09mZnNldFBvc2l0aW9uVmFsdWUgPSBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHZhbHVlID09PSAnZml4ZWQnIHx8IHZhbHVlID09PSAnYWJzb2x1dGUnIHx8IHZhbHVlID09PSAncmVsYXRpdmUnO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGlmIChpc09mZnNldFBvc2l0aW9uVmFsdWUocG9zaXRpb24pKSByZXR1cm4gdHJ1ZTtcclxuXHJcbiAgICAgICAgLyoqIEB0eXBlIHtDU1NTdHlsZURlY2xhcmF0aW9ufSAqL1xyXG4gICAgICAgIHZhciBjYWxjdWxhdGVkU3R5bGUgPSAnZ2V0Q29tcHV0ZWRTdHlsZScgaW4gd2luZG93ID8gZ2V0Q29tcHV0ZWRTdHlsZShjb250YWluZXIpIDogY29udGFpbmVyLnJ1bnRpbWVTdHlsZTtcclxuXHJcbiAgICAgICAgaWYgKCFjYWxjdWxhdGVkU3R5bGUpIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGlzT2Zmc2V0UG9zaXRpb25WYWx1ZShjYWxjdWxhdGVkU3R5bGUucG9zaXRpb24pO1xyXG4gICAgfSgpO1xyXG5cclxuICAgIC8vIElmIHdlJ3JlIG5vdCBwb3NpdGlvbmVkIHVzaW5nIG9mZnNldCBwb3NpdGlvbmluZywgc2V0IHJlbGF0aXZlIHBvc2l0aW9uaW5nIG9uIHRoZSBjb250YWluZXJcclxuICAgIGlmICghaXNPZmZzZXRQb3NpdGlvbmVkKVxyXG4gICAgICAgIGNvbnRhaW5lci5zdHlsZS5wb3NpdGlvbiA9ICdyZWxhdGl2ZSc7XHJcblxyXG4gICAgLy8gQ3JlYXRlIG91ciBvdGhlciByZXF1aXJlZCBlbGVtZW50c1xyXG4gICAgY3JlYXRlTG9hZGVyRWxlbWVudCgpO1xyXG5cclxuICAgIC8vIEZpZ3VyZSBvdXQgd2hpY2ggdmVyc2lvbiBvZiBvdXIgdmlld2VyIHdlIHdhbnQgdG8gdXNlXHJcbiAgICAvKlxyXG4gICAgaWYgKGlzQ2FudmFzU3VwcG9ydGVkKCkgPT0gZmFsc2UpIHsgLy8gVE9ETzogTkVFRCBUTyBSRU1PVkUgVEhFIEZBTFNFIFJFUVVJUkVNRU5UIC0gV0UgQVJFIEZMSVBQSU5HIEZPUiBERUJVR1xyXG5cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmVuZGVyZXIgPSBuZXcgUmlkZVN0eWxlckltYWdlUmVuZGVyZXIoY29udGFpbmVyKTtcclxuICAgIH1cclxuICAgICovXHJcblxyXG4gICAgLy8gV2UgYXJlIGFsd2F5cyB1c2luZyB0aGUgaW1hZ2UgcmVuZGVyZXIgc2luY2UgdGhhdCBpcyBhbGwgdGhhdCBpcyBzdXBwb3J0ZWQgY3VycmVudGx5XHJcbiAgICByZW5kZXJlciA9IG5ldyBSaWRlU3R5bGVySW1hZ2VSZW5kZXJlcihjb250YWluZXIpO1xyXG5cclxuICAgIHZhciBkZXNpcmVkQXNwZWN0SGVpZ2h0ID0gbnVsbDtcclxuICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5jb250YWluZXJBc3BlY3RSYXRpbyA9PT0gJ251bWJlcicpIHtcclxuICAgICAgICBkZXNpcmVkQXNwZWN0SGVpZ2h0ID0gb3B0aW9ucy5jb250YWluZXJBc3BlY3RSYXRpbztcclxuICAgIH1cclxuXHJcbiAgICB2YXIgbGFzdENsaWVudFdpZHRoID0gMDtcclxuICAgIHZhciByZWZyZXNoVGltZW91dCA9IDA7XHJcbiAgICB0aGlzLlJlc2l6ZVJlbmRlckFyZWEgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICBpZiAoY29udGFpbmVyLmNsaWVudFdpZHRoICE9IGxhc3RDbGllbnRXaWR0aCkge1xyXG4gICAgICAgICAgICBsYXN0Q2xpZW50V2lkdGggPSBjb250YWluZXIuY2xpZW50V2lkdGg7XHJcbiAgICAgICAgICAgIHN0YXRlWyd3aWR0aCddID0gbGFzdENsaWVudFdpZHRoO1xyXG5cclxuICAgICAgICAgICAgLy8gSWYgd2UgYXJlIG1haW50YWluaW5nIHRoZSBhc3BlY3QgcmF0aW8gd2UgbmVlZCB0byB1cGRhdGUgdGhhdFxyXG4gICAgICAgICAgICBpZiAoZGVzaXJlZEFzcGVjdEhlaWdodCAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgaGVpZ2h0ID0gTWF0aC5yb3VuZChsYXN0Q2xpZW50V2lkdGggKiBkZXNpcmVkQXNwZWN0SGVpZ2h0KTtcclxuICAgICAgICAgICAgICAgIGNvbnRhaW5lci5zdHlsZS5oZWlnaHQgPSBoZWlnaHQgLSAyMDAgKyAncHgnO1xyXG4gICAgICAgICAgICAgICAgc3RhdGVbJ2hlaWdodCddID0gaGVpZ2h0O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBNYWtlIHN1cmUgb3VyIHJlbmRlcmVyIGlzIGFjdGl2ZSBiZWZvcmUgYXR0ZW1wdCB0byByZWRyYXdcclxuICAgICAgICAgICAgaWYgKGFjdGl2ZSkge1xyXG4gICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHJlZnJlc2hUaW1lb3V0KTtcclxuICAgICAgICAgICAgICAgIHJlZnJlc2hUaW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBUcmlnZ2VyIGEgcmVmcmVzaCBvbiB0aGUgcmVuZGVyZXJcclxuICAgICAgICAgICAgICAgICAgICByZW5kZXJlci5SZW5kZXIoc3RhdGUpO1xyXG4gICAgICAgICAgICAgICAgfSwgMTUwKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgLy8gQ2hlY2sgdG8gc2VlIGlmIHdlIHNob3VsZCBiZSBjb250cm9sbGluZyB0aGUgY29udGFpbmVyIGFzcGVjdCByYXRpb1xyXG4gICAgaWYgKG9wdGlvbnMucmVzcG9uc2l2ZSAhPT0gZmFsc2UpIHtcclxuICAgICAgICBzZXRJbnRlcnZhbCh0aGlzLlJlc2l6ZVJlbmRlckFyZWEsIDEwMCk7XHJcbiAgICAgICAgdGhpcy5SZXNpemVSZW5kZXJBcmVhKCk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5VcGRhdGUgPSBmdW5jdGlvbihpbnN0cnVjdGlvbnMpIHtcclxuICAgICAgICAvLyBMZXQgb3VyIHN5c3RlbSBrbm93IHRoYXQgd2UgYXJlIHJlYWR5IHRvIHJvY2tcclxuICAgICAgICBhY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgXHJcbiAgICAgICAgLy8gTWFrZSBzdXJlIG91ciBpbnN0cnVjdGlvbnMgYXJlIGluIGFuIG9iamVjdCBmb3JtYXRcclxuICAgICAgICBpbnN0cnVjdGlvbnMgPSBwcmVwYXJlQXJndW1lbnRzKGluc3RydWN0aW9ucyk7XHJcblxyXG4gICAgICAgIC8vIEluamVjdCBvdXIgdmFyaWFibGVzIGJhc2VkIG9uIGdsb2JhbCBwYXJhbXNcclxuICAgICAgICBpbnN0cnVjdGlvbnNbJ3dpZHRoJ10gPSBjb250YWluZXIuY2xpZW50V2lkdGg7XHJcbiAgICAgICAgaW5zdHJ1Y3Rpb25zWydoZWlnaHQnXSA9IGNvbnRhaW5lci5jbGllbnRIZWlnaHQ7XHJcblxyXG4gICAgICAgIC8vIFVwZGF0ZSBvdXIgaW50ZXJuYWwgc3RhdGUgYW5kIHdhdGNoIGZvciBjaGFuZ2VzXHJcbiAgICAgICAgdmFyIGhhc0NoYW5nZXMgPSBmYWxzZTtcclxuICAgICAgICBmb3IodmFyIHggaW4gaW5zdHJ1Y3Rpb25zKSB7XHJcbiAgICAgICAgICAgIHZhciB2MSA9IHN0YXRlW3hdO1xyXG4gICAgICAgICAgICB2YXIgdjIgPSBpbnN0cnVjdGlvbnNbeF07XHJcbiAgICAgICAgICAgIGlmICh2MSAhPSB2Mikge1xyXG4gICAgICAgICAgICAgICAgc3RhdGVbeF0gPSB2MjtcclxuICAgICAgICAgICAgICAgIGhhc0NoYW5nZXMgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIElmIHdlIGRpZG4ndCBtYWtlIGFueSBjaGFuZ2VzIHRvIG91ciBpbnRlcm5hbCBzdGF0ZSB3ZSBkb24ndCBuZWVkIHRvIHBlcmZvcm0gYW4gdXBkYXRlXHJcbiAgICAgICAgaWYgKGhhc0NoYW5nZXMgPT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgdmFyIHByb21pc2UgPSByaWRlc3R5bGVyLnByb21pc2UoKTtcclxuXHJcbiAgICAgICAgICAgIHByb21pc2UucmVzb2x2ZSgpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHByb21pc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZW5kZXJlci5SZW5kZXIoc3RhdGUpO1xyXG4gICAgfTtcclxuXHJcblxyXG4gICAgdGhpcy5SZXNldCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHN0YXRlID0ge307XHJcbiAgICAgICAgaWYgKHR5cGVvZiByZW5kZXJlci5SZXNldCA9PT0gJ2Z1bmN0aW9uJykgcmVuZGVyZXIuUmVzZXQoKTtcclxuICAgIH07XHJcblxyXG5cclxuICAgIGZ1bmN0aW9uIHByZXBhcmVBcmd1bWVudHMoYXJncykge1xyXG4gICAgICAgIHZhciB2YWx1ZXMgPSB7fTtcclxuXHJcbiAgICAgICAgaWYgKHR5cGVvZiBhcmdzID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICB2YXIgdG9rZW5zID0gYXJncy5zcGxpdCgnPycpO1xyXG4gICAgICAgICAgICB0b2tlbnMgPSAodG9rZW5zLmxlbmd0aCA9PSAxID8gdG9rZW5zWzBdIDogdG9rZW5zWzFdKS5zcGxpdCgnJicpO1xyXG4gICAgICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgdG9rZW5zLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIga3YgPSB0b2tlbnNbaV0uc3BsaXQoJz0nKTtcclxuICAgICAgICAgICAgICAgIHZhciBrZXkgPSBkZWNvZGVVUklDb21wb25lbnQoa3ZbMF0pLnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gU2tpcCBvdmVyIHZhcmlhYmxlcyB0aGF0IGFyZSBub3QgdXNlZCBmb3IgcmVuZGVyaW5nXHJcbiAgICAgICAgICAgICAgICBpZiAoa2V5ID09ICdrZXknIHx8IGtleSA9PSAndG9rZW4nKSBjb250aW51ZTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YWx1ZXNba2V5XSA9IGRlY29kZVVSSUNvbXBvbmVudChrdlsxXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBNYWtlIHN1cmUgYWxsIGtleXMgYXJlIGluIGxvd2VyIGNhc2VcclxuICAgICAgICAgICAgZm9yKHZhciBrIGluIGFyZ3MpIHtcclxuICAgICAgICAgICAgICAgIHZhbHVlc1trLnRvTG93ZXJDYXNlKCldID0gYXJnc1trXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHZhbHVlcztcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBpc0NhbnZhc1N1cHBvcnRlZCgpIHtcclxuICAgICAgICB2YXIgZWxlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xyXG4gICAgICAgIHJldHVybiAhIShlbGVtLmdldENvbnRleHQgJiYgZWxlbS5nZXRDb250ZXh0KCcyZCcpKTtcclxuICAgIH0gXHJcblxyXG4gICAgZnVuY3Rpb24gUmlkZVN0eWxlckltYWdlUmVuZGVyZXIoY29udGFpbmVyKSB7XHJcbiAgICAgICAgdmFyIGFjdGl2ZUltYWdlID0gbnVsbDtcclxuICAgICAgICB2YXIgcmV0aXJlZEltYWdlcyA9IFtdO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAcmV0dXJuIHtSaWRlU3R5bGVyUHJvbWlzZX1cclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLlJlbmRlciA9IGZ1bmN0aW9uKGluc3RydWN0aW9ucykge1xyXG4gICAgICAgICAgICByZXR1cm4gY3JlYXRlTmV3TGF5ZXIoaW5zdHJ1Y3Rpb25zKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB0aGlzLlJlc2V0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAoYWN0aXZlSW1hZ2UgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgY29udGFpbmVyLnJlbW92ZUNoaWxkKGFjdGl2ZUltYWdlKTtcclxuICAgICAgICAgICAgICAgIGFjdGl2ZUltYWdlID0gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEByZXR1cm4ge1JpZGVTdHlsZXJQcm9taXNlfVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIGNyZWF0ZU5ld0xheWVyKGluc3RydWN0aW9ucykge1xyXG4gICAgICAgICAgICB2YXIgcHJvbWlzZSA9IHJpZGVzdHlsZXIucHJvbWlzZSgpO1xyXG4gICAgICAgICAgICAvLyBTaG93IG91ciBsb2FkZXIgc2luY2Ugd2UgYXJlIGNyZWF0aW5nIGEgbmV3IGxheWVyXHJcbiAgICAgICAgICAgIHNob3dMb2FkZXJFbGVtZW50KCk7XHJcblxyXG5cclxuICAgICAgICAgICAgLy8gUmV0aXJlIG91ciBhY3RpdmUgaW1hZ2UgaWYgaXQgaXMgYXZhaWxhYmxlXHJcbiAgICAgICAgICAgIGlmIChhY3RpdmVJbWFnZSAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBoaWRlT2xkVmVoaWNsZSgpO1xyXG4gICAgICAgICAgICAgICAgcmV0aXJlZEltYWdlcy5wdXNoKGFjdGl2ZUltYWdlKTtcclxuICAgICAgICAgICAgICAgIGFjdGl2ZUltYWdlID0gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gRmluZCBhbGwgb2Ygb3VyIG9sZCBpbWFnZXMgYW5kIGZhZGUgdGhlbSB0byBoYWxmIHRyYW5zcGFyZW50IChpZiB0aGV5IGFyZSB2aXNpYmxlKVxyXG4gICAgICAgICAgICBmb3IodmFyIGkgPSByZXRpcmVkSW1hZ2VzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgb2ltZyA9IHJldGlyZWRJbWFnZXNbaV07XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gUGFydGlhbGx5IGZhZGUgb3V0IG91ciByZXRpcmVkIGltYWdlc1xyXG4gICAgICAgICAgICAgICAgaWYgKG9pbWcuc3R5bGUub3BhY2l0eSA+IDAuNSkgb2ltZy5zdHlsZS5vcGFjaXR5ID0gMC41O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB2YXIgaW1hZ2VVcmwgPSByaWRlc3R5bGVyLmFqYXgudXJsKCdWZWhpY2xlL1JlbmRlcicsIGluc3RydWN0aW9ucyk7XHJcblxyXG5cclxuICAgICAgICAgICAgLy8gQ3JlYXRlIGEgbmV3IGltYWdlIGVsZW1lbnQgZm9yIHRoZSBjdXJyZW50IHJlbmRlciByZXN1bHRcclxuICAgICAgICAgICAgdmFyIGltZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xyXG4gICAgICAgICAgICBpbWcuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xyXG4gICAgICAgICAgICBpbWcuc3R5bGUubGVmdCA9IDA7XHJcbiAgICAgICAgICAgIGltZy5zdHlsZS50b3AgPSAwO1xyXG4gICAgICAgICAgICBpbWcuc3R5bGUub3BhY2l0eSA9IDA7XHJcbiAgICAgICAgICAgIGltZy5zdHlsZS50cmFuc2l0aW9uID0gJ29wYWNpdHkgbGluZWFyIDMwMG1zJztcclxuXHJcbiAgICAgICAgICAgIC8vIEFkZCBvdXIgbmV3IGltYWdlIGxheWVyIHRvIHRoZSBET01cclxuICAgICAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGFjdGl2ZUltYWdlID0gaW1nKTtcclxuXHJcbiAgICAgICAgICAgIC8vIExpc3RlbiBmb3Igb3VyIG5ldyBsYXllciB0byBiZWNvbWUgcmVhZHkgYW5kIGRpc3BsYXkgaXQgdG8gdGhlIHVzZXIuIEFsc28sIGNsZWFudXAgYW55IGxlZ2FjeSBsYXllcnMuXHJcbiAgICAgICAgICAgIGltZy5vbmxvYWQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIC8vIE9ubHkgZmFkZSBpbiB0aGlzIElNRyBpZiBpdCBoYXNuJ3QgYWxyZWFkeSBiZWVuIHJlcGxhY2VkLlxyXG4gICAgICAgICAgICAgICAgaWYgKGltZyA9PSBhY3RpdmVJbWFnZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGhpZGVMb2FkZXJFbGVtZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaW1nLnN0eWxlLm9wYWNpdHkgPSAxO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgcmVtb3ZlZEltYWdlcyA9IHJldGlyZWRJbWFnZXMuc3BsaWNlKDAsIHJldGlyZWRJbWFnZXMubGVuZ3RoKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBGYWRlIGFsbCBvZiBvdXIgb2xkIGltYWdlcyBvdXQgb2Ygdmlld1xyXG4gICAgICAgICAgICAgICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCByZW1vdmVkSW1hZ2VzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlbW92ZWRJbWFnZXNbaV0uc3R5bGUub3BhY2l0eSA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBSZW1vdmUgdGhlIGVsZW1lbnRzIGFmdGVyIHRoZXkgaGF2ZSBoYWQgYSBjaGFuY2UgdG8gZmFkZSBvdXRcclxuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgcmVtb3ZlZEltYWdlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyLnJlbW92ZUNoaWxkKHJlbW92ZWRJbWFnZXNbaV0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb21pc2UucmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sIDMwMCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBpbWcub25lcnJvciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHByb21pc2UucmVqZWN0KCk7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAvLyBTdGFydCBsb2FkaW5nIG91ciBpbWFnZVxyXG4gICAgICAgICAgICBpbWcuc3JjID0gaW1hZ2VVcmw7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gcHJvbWlzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gY3JlYXRlTG9hZGVyRWxlbWVudCgpIHtcclxuICAgICAgICBsb2FkZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcclxuXHJcbiAgICAgICAgLy8gU2V0IG91ciBpbWFnZVxyXG4gICAgICAgIGxvYWRlci5zcmMgPSBsb2FkZXJEYXRhO1xyXG5cclxuICAgICAgICAvLyBTZXR1cCBzdHlsZSBvZiB0aGUgZWxlbWVudFxyXG4gICAgICAgIGxvYWRlci5zdHlsZS5wYWRkaW5nID0gJzVweCc7XHJcbiAgICAgICAgbG9hZGVyLnN0eWxlLmJvcmRlclJhZGl1cyA9ICcyMXB4JztcclxuICAgICAgICBsb2FkZXIuc3R5bGUuYmFja2dyb3VuZCA9ICcjZmZmJztcclxuICAgICAgICBsb2FkZXIuc3R5bGUub3BhY2l0eSA9IDA7XHJcbiAgICAgICAgbG9hZGVyLnN0eWxlLnRyYW5zaXRpb24gPSAnb3BhY2l0eSBsaW5lYXIgMzAwbXMnO1xyXG5cclxuICAgICAgICAvLyBQb3NpdGlvbiBpbiBvdXIgY29udGFpbmVyXHJcbiAgICAgICAgbG9hZGVyLnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcclxuICAgICAgICBsb2FkZXIuc3R5bGUubGVmdCA9ICc1MCUnO1xyXG4gICAgICAgIGxvYWRlci5zdHlsZS50b3AgPSAnNTAlJztcclxuICAgICAgICBsb2FkZXIuc3R5bGUuekluZGV4ID0gJzUwJztcclxuXHJcbiAgICAgICAgLy8gT2Zmc2V0IGZvciBzaXplXHJcbiAgICAgICAgbG9hZGVyLnN0eWxlLm1hcmdpbkxlZnQgPSAnLTIxcHgnO1xyXG4gICAgICAgIGxvYWRlci5zdHlsZS5tYXJnaW5Ub3AgPSAnLTIxcHgnO1xyXG5cclxuICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQobG9hZGVyKTtcclxuICAgICAgICBzaG93TG9hZGVyRWxlbWVudCgpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHNob3dMb2FkZXJFbGVtZW50KCkge1xyXG4gICAgICAgIGxvYWRlci5zdHlsZS5vcGFjaXR5ID0gMC43NTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBoaWRlTG9hZGVyRWxlbWVudCgpIHtcclxuICAgICAgICBsb2FkZXIuc3R5bGUub3BhY2l0eSA9IDA7XHJcbiAgICB9XHJcbn1cclxuXHJcbiIsIi8qXG4gKiBjbGFzc0xpc3QuanM6IENyb3NzLWJyb3dzZXIgZnVsbCBlbGVtZW50LmNsYXNzTGlzdCBpbXBsZW1lbnRhdGlvbi5cbiAqIDEuMS4yMDE3MDQyN1xuICpcbiAqIEJ5IEVsaSBHcmV5LCBodHRwOi8vZWxpZ3JleS5jb21cbiAqIExpY2Vuc2U6IERlZGljYXRlZCB0byB0aGUgcHVibGljIGRvbWFpbi5cbiAqICAgU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9lbGlncmV5L2NsYXNzTGlzdC5qcy9ibG9iL21hc3Rlci9MSUNFTlNFLm1kXG4gKi9cblxuLypnbG9iYWwgc2VsZiwgZG9jdW1lbnQsIERPTUV4Y2VwdGlvbiAqL1xuXG4vKiEgQHNvdXJjZSBodHRwOi8vcHVybC5lbGlncmV5LmNvbS9naXRodWIvY2xhc3NMaXN0LmpzL2Jsb2IvbWFzdGVyL2NsYXNzTGlzdC5qcyAqL1xuXG5pZiAoXCJkb2N1bWVudFwiIGluIHdpbmRvdy5zZWxmKSB7XG5cbi8vIEZ1bGwgcG9seWZpbGwgZm9yIGJyb3dzZXJzIHdpdGggbm8gY2xhc3NMaXN0IHN1cHBvcnRcbi8vIEluY2x1ZGluZyBJRSA8IEVkZ2UgbWlzc2luZyBTVkdFbGVtZW50LmNsYXNzTGlzdFxuaWYgKCEoXCJjbGFzc0xpc3RcIiBpbiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiX1wiKSkgXG5cdHx8IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyAmJiAhKFwiY2xhc3NMaXN0XCIgaW4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIixcImdcIikpKSB7XG5cbihmdW5jdGlvbiAodmlldykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuaWYgKCEoJ0VsZW1lbnQnIGluIHZpZXcpKSByZXR1cm47XG5cbnZhclxuXHQgIGNsYXNzTGlzdFByb3AgPSBcImNsYXNzTGlzdFwiXG5cdCwgcHJvdG9Qcm9wID0gXCJwcm90b3R5cGVcIlxuXHQsIGVsZW1DdHJQcm90byA9IHZpZXcuRWxlbWVudFtwcm90b1Byb3BdXG5cdCwgb2JqQ3RyID0gT2JqZWN0XG5cdCwgc3RyVHJpbSA9IFN0cmluZ1twcm90b1Byb3BdLnRyaW0gfHwgZnVuY3Rpb24gKCkge1xuXHRcdHJldHVybiB0aGlzLnJlcGxhY2UoL15cXHMrfFxccyskL2csIFwiXCIpO1xuXHR9XG5cdCwgYXJySW5kZXhPZiA9IEFycmF5W3Byb3RvUHJvcF0uaW5kZXhPZiB8fCBmdW5jdGlvbiAoaXRlbSkge1xuXHRcdHZhclxuXHRcdFx0ICBpID0gMFxuXHRcdFx0LCBsZW4gPSB0aGlzLmxlbmd0aFxuXHRcdDtcblx0XHRmb3IgKDsgaSA8IGxlbjsgaSsrKSB7XG5cdFx0XHRpZiAoaSBpbiB0aGlzICYmIHRoaXNbaV0gPT09IGl0ZW0pIHtcblx0XHRcdFx0cmV0dXJuIGk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHJldHVybiAtMTtcblx0fVxuXHQvLyBWZW5kb3JzOiBwbGVhc2UgYWxsb3cgY29udGVudCBjb2RlIHRvIGluc3RhbnRpYXRlIERPTUV4Y2VwdGlvbnNcblx0LCBET01FeCA9IGZ1bmN0aW9uICh0eXBlLCBtZXNzYWdlKSB7XG5cdFx0dGhpcy5uYW1lID0gdHlwZTtcblx0XHR0aGlzLmNvZGUgPSBET01FeGNlcHRpb25bdHlwZV07XG5cdFx0dGhpcy5tZXNzYWdlID0gbWVzc2FnZTtcblx0fVxuXHQsIGNoZWNrVG9rZW5BbmRHZXRJbmRleCA9IGZ1bmN0aW9uIChjbGFzc0xpc3QsIHRva2VuKSB7XG5cdFx0aWYgKHRva2VuID09PSBcIlwiKSB7XG5cdFx0XHR0aHJvdyBuZXcgRE9NRXgoXG5cdFx0XHRcdCAgXCJTWU5UQVhfRVJSXCJcblx0XHRcdFx0LCBcIkFuIGludmFsaWQgb3IgaWxsZWdhbCBzdHJpbmcgd2FzIHNwZWNpZmllZFwiXG5cdFx0XHQpO1xuXHRcdH1cblx0XHRpZiAoL1xccy8udGVzdCh0b2tlbikpIHtcblx0XHRcdHRocm93IG5ldyBET01FeChcblx0XHRcdFx0ICBcIklOVkFMSURfQ0hBUkFDVEVSX0VSUlwiXG5cdFx0XHRcdCwgXCJTdHJpbmcgY29udGFpbnMgYW4gaW52YWxpZCBjaGFyYWN0ZXJcIlxuXHRcdFx0KTtcblx0XHR9XG5cdFx0cmV0dXJuIGFyckluZGV4T2YuY2FsbChjbGFzc0xpc3QsIHRva2VuKTtcblx0fVxuXHQsIENsYXNzTGlzdCA9IGZ1bmN0aW9uIChlbGVtKSB7XG5cdFx0dmFyXG5cdFx0XHQgIHRyaW1tZWRDbGFzc2VzID0gc3RyVHJpbS5jYWxsKGVsZW0uZ2V0QXR0cmlidXRlKFwiY2xhc3NcIikgfHwgXCJcIilcblx0XHRcdCwgY2xhc3NlcyA9IHRyaW1tZWRDbGFzc2VzID8gdHJpbW1lZENsYXNzZXMuc3BsaXQoL1xccysvKSA6IFtdXG5cdFx0XHQsIGkgPSAwXG5cdFx0XHQsIGxlbiA9IGNsYXNzZXMubGVuZ3RoXG5cdFx0O1xuXHRcdGZvciAoOyBpIDwgbGVuOyBpKyspIHtcblx0XHRcdHRoaXMucHVzaChjbGFzc2VzW2ldKTtcblx0XHR9XG5cdFx0dGhpcy5fdXBkYXRlQ2xhc3NOYW1lID0gZnVuY3Rpb24gKCkge1xuXHRcdFx0ZWxlbS5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCB0aGlzLnRvU3RyaW5nKCkpO1xuXHRcdH07XG5cdH1cblx0LCBjbGFzc0xpc3RQcm90byA9IENsYXNzTGlzdFtwcm90b1Byb3BdID0gW11cblx0LCBjbGFzc0xpc3RHZXR0ZXIgPSBmdW5jdGlvbiAoKSB7XG5cdFx0cmV0dXJuIG5ldyBDbGFzc0xpc3QodGhpcyk7XG5cdH1cbjtcbi8vIE1vc3QgRE9NRXhjZXB0aW9uIGltcGxlbWVudGF0aW9ucyBkb24ndCBhbGxvdyBjYWxsaW5nIERPTUV4Y2VwdGlvbidzIHRvU3RyaW5nKClcbi8vIG9uIG5vbi1ET01FeGNlcHRpb25zLiBFcnJvcidzIHRvU3RyaW5nKCkgaXMgc3VmZmljaWVudCBoZXJlLlxuRE9NRXhbcHJvdG9Qcm9wXSA9IEVycm9yW3Byb3RvUHJvcF07XG5jbGFzc0xpc3RQcm90by5pdGVtID0gZnVuY3Rpb24gKGkpIHtcblx0cmV0dXJuIHRoaXNbaV0gfHwgbnVsbDtcbn07XG5jbGFzc0xpc3RQcm90by5jb250YWlucyA9IGZ1bmN0aW9uICh0b2tlbikge1xuXHR0b2tlbiArPSBcIlwiO1xuXHRyZXR1cm4gY2hlY2tUb2tlbkFuZEdldEluZGV4KHRoaXMsIHRva2VuKSAhPT0gLTE7XG59O1xuY2xhc3NMaXN0UHJvdG8uYWRkID0gZnVuY3Rpb24gKCkge1xuXHR2YXJcblx0XHQgIHRva2VucyA9IGFyZ3VtZW50c1xuXHRcdCwgaSA9IDBcblx0XHQsIGwgPSB0b2tlbnMubGVuZ3RoXG5cdFx0LCB0b2tlblxuXHRcdCwgdXBkYXRlZCA9IGZhbHNlXG5cdDtcblx0ZG8ge1xuXHRcdHRva2VuID0gdG9rZW5zW2ldICsgXCJcIjtcblx0XHRpZiAoY2hlY2tUb2tlbkFuZEdldEluZGV4KHRoaXMsIHRva2VuKSA9PT0gLTEpIHtcblx0XHRcdHRoaXMucHVzaCh0b2tlbik7XG5cdFx0XHR1cGRhdGVkID0gdHJ1ZTtcblx0XHR9XG5cdH1cblx0d2hpbGUgKCsraSA8IGwpO1xuXG5cdGlmICh1cGRhdGVkKSB7XG5cdFx0dGhpcy5fdXBkYXRlQ2xhc3NOYW1lKCk7XG5cdH1cbn07XG5jbGFzc0xpc3RQcm90by5yZW1vdmUgPSBmdW5jdGlvbiAoKSB7XG5cdHZhclxuXHRcdCAgdG9rZW5zID0gYXJndW1lbnRzXG5cdFx0LCBpID0gMFxuXHRcdCwgbCA9IHRva2Vucy5sZW5ndGhcblx0XHQsIHRva2VuXG5cdFx0LCB1cGRhdGVkID0gZmFsc2Vcblx0XHQsIGluZGV4XG5cdDtcblx0ZG8ge1xuXHRcdHRva2VuID0gdG9rZW5zW2ldICsgXCJcIjtcblx0XHRpbmRleCA9IGNoZWNrVG9rZW5BbmRHZXRJbmRleCh0aGlzLCB0b2tlbik7XG5cdFx0d2hpbGUgKGluZGV4ICE9PSAtMSkge1xuXHRcdFx0dGhpcy5zcGxpY2UoaW5kZXgsIDEpO1xuXHRcdFx0dXBkYXRlZCA9IHRydWU7XG5cdFx0XHRpbmRleCA9IGNoZWNrVG9rZW5BbmRHZXRJbmRleCh0aGlzLCB0b2tlbik7XG5cdFx0fVxuXHR9XG5cdHdoaWxlICgrK2kgPCBsKTtcblxuXHRpZiAodXBkYXRlZCkge1xuXHRcdHRoaXMuX3VwZGF0ZUNsYXNzTmFtZSgpO1xuXHR9XG59O1xuY2xhc3NMaXN0UHJvdG8udG9nZ2xlID0gZnVuY3Rpb24gKHRva2VuLCBmb3JjZSkge1xuXHR0b2tlbiArPSBcIlwiO1xuXG5cdHZhclxuXHRcdCAgcmVzdWx0ID0gdGhpcy5jb250YWlucyh0b2tlbilcblx0XHQsIG1ldGhvZCA9IHJlc3VsdCA/XG5cdFx0XHRmb3JjZSAhPT0gdHJ1ZSAmJiBcInJlbW92ZVwiXG5cdFx0OlxuXHRcdFx0Zm9yY2UgIT09IGZhbHNlICYmIFwiYWRkXCJcblx0O1xuXG5cdGlmIChtZXRob2QpIHtcblx0XHR0aGlzW21ldGhvZF0odG9rZW4pO1xuXHR9XG5cblx0aWYgKGZvcmNlID09PSB0cnVlIHx8IGZvcmNlID09PSBmYWxzZSkge1xuXHRcdHJldHVybiBmb3JjZTtcblx0fSBlbHNlIHtcblx0XHRyZXR1cm4gIXJlc3VsdDtcblx0fVxufTtcbmNsYXNzTGlzdFByb3RvLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkge1xuXHRyZXR1cm4gdGhpcy5qb2luKFwiIFwiKTtcbn07XG5cbmlmIChvYmpDdHIuZGVmaW5lUHJvcGVydHkpIHtcblx0dmFyIGNsYXNzTGlzdFByb3BEZXNjID0ge1xuXHRcdCAgZ2V0OiBjbGFzc0xpc3RHZXR0ZXJcblx0XHQsIGVudW1lcmFibGU6IHRydWVcblx0XHQsIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuXHR9O1xuXHR0cnkge1xuXHRcdG9iakN0ci5kZWZpbmVQcm9wZXJ0eShlbGVtQ3RyUHJvdG8sIGNsYXNzTGlzdFByb3AsIGNsYXNzTGlzdFByb3BEZXNjKTtcblx0fSBjYXRjaCAoZXgpIHsgLy8gSUUgOCBkb2Vzbid0IHN1cHBvcnQgZW51bWVyYWJsZTp0cnVlXG5cdFx0Ly8gYWRkaW5nIHVuZGVmaW5lZCB0byBmaWdodCB0aGlzIGlzc3VlIGh0dHBzOi8vZ2l0aHViLmNvbS9lbGlncmV5L2NsYXNzTGlzdC5qcy9pc3N1ZXMvMzZcblx0XHQvLyBtb2Rlcm5pZSBJRTgtTVNXNyBtYWNoaW5lIGhhcyBJRTggOC4wLjYwMDEuMTg3MDIgYW5kIGlzIGFmZmVjdGVkXG5cdFx0aWYgKGV4Lm51bWJlciA9PT0gdW5kZWZpbmVkIHx8IGV4Lm51bWJlciA9PT0gLTB4N0ZGNUVDNTQpIHtcblx0XHRcdGNsYXNzTGlzdFByb3BEZXNjLmVudW1lcmFibGUgPSBmYWxzZTtcblx0XHRcdG9iakN0ci5kZWZpbmVQcm9wZXJ0eShlbGVtQ3RyUHJvdG8sIGNsYXNzTGlzdFByb3AsIGNsYXNzTGlzdFByb3BEZXNjKTtcblx0XHR9XG5cdH1cbn0gZWxzZSBpZiAob2JqQ3RyW3Byb3RvUHJvcF0uX19kZWZpbmVHZXR0ZXJfXykge1xuXHRlbGVtQ3RyUHJvdG8uX19kZWZpbmVHZXR0ZXJfXyhjbGFzc0xpc3RQcm9wLCBjbGFzc0xpc3RHZXR0ZXIpO1xufVxuXG59KHdpbmRvdy5zZWxmKSk7XG5cbn1cblxuLy8gVGhlcmUgaXMgZnVsbCBvciBwYXJ0aWFsIG5hdGl2ZSBjbGFzc0xpc3Qgc3VwcG9ydCwgc28ganVzdCBjaGVjayBpZiB3ZSBuZWVkXG4vLyB0byBub3JtYWxpemUgdGhlIGFkZC9yZW1vdmUgYW5kIHRvZ2dsZSBBUElzLlxuXG4oZnVuY3Rpb24gKCkge1xuXHRcInVzZSBzdHJpY3RcIjtcblxuXHR2YXIgdGVzdEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiX1wiKTtcblxuXHR0ZXN0RWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiYzFcIiwgXCJjMlwiKTtcblxuXHQvLyBQb2x5ZmlsbCBmb3IgSUUgMTAvMTEgYW5kIEZpcmVmb3ggPDI2LCB3aGVyZSBjbGFzc0xpc3QuYWRkIGFuZFxuXHQvLyBjbGFzc0xpc3QucmVtb3ZlIGV4aXN0IGJ1dCBzdXBwb3J0IG9ubHkgb25lIGFyZ3VtZW50IGF0IGEgdGltZS5cblx0aWYgKCF0ZXN0RWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoXCJjMlwiKSkge1xuXHRcdHZhciBjcmVhdGVNZXRob2QgPSBmdW5jdGlvbihtZXRob2QpIHtcblx0XHRcdHZhciBvcmlnaW5hbCA9IERPTVRva2VuTGlzdC5wcm90b3R5cGVbbWV0aG9kXTtcblxuXHRcdFx0RE9NVG9rZW5MaXN0LnByb3RvdHlwZVttZXRob2RdID0gZnVuY3Rpb24odG9rZW4pIHtcblx0XHRcdFx0dmFyIGksIGxlbiA9IGFyZ3VtZW50cy5sZW5ndGg7XG5cblx0XHRcdFx0Zm9yIChpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG5cdFx0XHRcdFx0dG9rZW4gPSBhcmd1bWVudHNbaV07XG5cdFx0XHRcdFx0b3JpZ2luYWwuY2FsbCh0aGlzLCB0b2tlbik7XG5cdFx0XHRcdH1cblx0XHRcdH07XG5cdFx0fTtcblx0XHRjcmVhdGVNZXRob2QoJ2FkZCcpO1xuXHRcdGNyZWF0ZU1ldGhvZCgncmVtb3ZlJyk7XG5cdH1cblxuXHR0ZXN0RWxlbWVudC5jbGFzc0xpc3QudG9nZ2xlKFwiYzNcIiwgZmFsc2UpO1xuXG5cdC8vIFBvbHlmaWxsIGZvciBJRSAxMCBhbmQgRmlyZWZveCA8MjQsIHdoZXJlIGNsYXNzTGlzdC50b2dnbGUgZG9lcyBub3Rcblx0Ly8gc3VwcG9ydCB0aGUgc2Vjb25kIGFyZ3VtZW50LlxuXHRpZiAodGVzdEVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKFwiYzNcIikpIHtcblx0XHR2YXIgX3RvZ2dsZSA9IERPTVRva2VuTGlzdC5wcm90b3R5cGUudG9nZ2xlO1xuXG5cdFx0RE9NVG9rZW5MaXN0LnByb3RvdHlwZS50b2dnbGUgPSBmdW5jdGlvbih0b2tlbiwgZm9yY2UpIHtcblx0XHRcdGlmICgxIGluIGFyZ3VtZW50cyAmJiAhdGhpcy5jb250YWlucyh0b2tlbikgPT09ICFmb3JjZSkge1xuXHRcdFx0XHRyZXR1cm4gZm9yY2U7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRyZXR1cm4gX3RvZ2dsZS5jYWxsKHRoaXMsIHRva2VuKTtcblx0XHRcdH1cblx0XHR9O1xuXG5cdH1cblxuXHR0ZXN0RWxlbWVudCA9IG51bGw7XG59KCkpO1xuXG59XG4iLCIvKiFcbkNvcHlyaWdodCAoQykgMjAxMy0yMDE1IGJ5IFdlYlJlZmxlY3Rpb25cblxuUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEgY29weVxub2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUgXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbFxuaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0c1xudG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbFxuY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzXG5mdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyBjb25kaXRpb25zOlxuXG5UaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZCBpblxuYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG5cblRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MgT1JcbklNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLFxuRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFXG5BVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSXG5MSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLFxuT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTlxuVEhFIFNPRlRXQVJFLlxuXG4qL1xuKGZ1bmN0aW9uKHdpbmRvdyl7XG4gIC8qISAoQykgV2ViUmVmbGVjdGlvbiBNaXQgU3R5bGUgTGljZW5zZSAqL1xuICBpZiAoZG9jdW1lbnQuY3JlYXRlRXZlbnQpIHJldHVybjtcbiAgdmFyXG4gICAgRFVOTk9BQk9VVERPTUxPQURFRCA9IHRydWUsXG4gICAgUkVBRFlFVkVOVERJU1BBVENIRUQgPSBmYWxzZSxcbiAgICBPTlJFQURZU1RBVEVDSEFOR0UgPSAnb25yZWFkeXN0YXRlY2hhbmdlJyxcbiAgICBET01DT05URU5UTE9BREVEID0gJ0RPTUNvbnRlbnRMb2FkZWQnLFxuICAgIFNFQ1JFVCA9ICdfX0lFOF9fJyArIE1hdGgucmFuZG9tKCksXG4gICAgLy8gT2JqZWN0ID0gd2luZG93Lk9iamVjdCxcbiAgICBkZWZpbmVQcm9wZXJ0eSA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSB8fFxuICAgIC8vIGp1c3QgaW4gY2FzZSAuLi5cbiAgICBmdW5jdGlvbiAob2JqZWN0LCBwcm9wZXJ0eSwgZGVzY3JpcHRvcikge1xuICAgICAgb2JqZWN0W3Byb3BlcnR5XSA9IGRlc2NyaXB0b3IudmFsdWU7XG4gICAgfSxcbiAgICBkZWZpbmVQcm9wZXJ0aWVzID0gT2JqZWN0LmRlZmluZVByb3BlcnRpZXMgfHxcbiAgICAvLyBJRTggaW1wbGVtZW50ZWQgZGVmaW5lUHJvcGVydHkgYnV0IG5vdCB0aGUgcGx1cmFsLi4uXG4gICAgZnVuY3Rpb24gKG9iamVjdCwgZGVzY3JpcHRvcnMpIHtcbiAgICAgIGZvcih2YXIga2V5IGluIGRlc2NyaXB0b3JzKSB7XG4gICAgICAgIGlmIChoYXNPd25Qcm9wZXJ0eS5jYWxsKGRlc2NyaXB0b3JzLCBrZXkpKSB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGRlZmluZVByb3BlcnR5KG9iamVjdCwga2V5LCBkZXNjcmlwdG9yc1trZXldKTtcbiAgICAgICAgICB9IGNhdGNoKG9fTykge1xuICAgICAgICAgICAgaWYgKHdpbmRvdy5jb25zb2xlKSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKGtleSArICcgZmFpbGVkIG9uIG9iamVjdDonLCBvYmplY3QsIG9fTy5tZXNzYWdlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuICAgIGdldE93blByb3BlcnR5RGVzY3JpcHRvciA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IsXG4gICAgaGFzT3duUHJvcGVydHkgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LFxuICAgIC8vIGhlcmUgSUU3IHdpbGwgYnJlYWsgbGlrZSBhIGNoYXJtXG4gICAgRWxlbWVudFByb3RvdHlwZSA9IHdpbmRvdy5FbGVtZW50LnByb3RvdHlwZSxcbiAgICBUZXh0UHJvdG90eXBlID0gd2luZG93LlRleHQucHJvdG90eXBlLFxuICAgIC8vIG5vbmUgb2YgYWJvdmUgbmF0aXZlIGNvbnN0cnVjdG9ycyBleGlzdC9hcmUgZXhwb3NlZFxuICAgIHBvc3NpYmx5TmF0aXZlRXZlbnQgPSAvXlthLXpdKyQvLFxuICAgIC8vIF4gYWN0dWFsbHkgY291bGQgcHJvYmFibHkgYmUganVzdCAvXlthLXpdKyQvXG4gICAgcmVhZHlTdGF0ZU9LID0gL2xvYWRlZHxjb21wbGV0ZS8sXG4gICAgdHlwZXMgPSB7fSxcbiAgICBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKSxcbiAgICBodG1sID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LFxuICAgIHJlbW92ZUF0dHJpYnV0ZSA9IGh0bWwucmVtb3ZlQXR0cmlidXRlLFxuICAgIHNldEF0dHJpYnV0ZSA9IGh0bWwuc2V0QXR0cmlidXRlLFxuICAgIHZhbHVlRGVzYyA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgdmFsdWU6IHZhbHVlXG4gICAgICB9O1xuICAgIH1cbiAgO1xuXG4gIGZ1bmN0aW9uIGNvbW1vbkV2ZW50TG9vcChjdXJyZW50VGFyZ2V0LCBlLCAkaGFuZGxlcnMsIHN5bnRoZXRpYykge1xuICAgIGZvcih2YXJcbiAgICAgIGhhbmRsZXIsXG4gICAgICBjb250aW51ZVByb3BhZ2F0aW9uLFxuICAgICAgaGFuZGxlcnMgPSAkaGFuZGxlcnMuc2xpY2UoKSxcbiAgICAgIGV2dCA9IGVucmljaChlLCBjdXJyZW50VGFyZ2V0KSxcbiAgICAgIGkgPSAwLCBsZW5ndGggPSBoYW5kbGVycy5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrK1xuICAgICkge1xuICAgICAgaGFuZGxlciA9IGhhbmRsZXJzW2ldO1xuICAgICAgaWYgKHR5cGVvZiBoYW5kbGVyID09PSAnb2JqZWN0Jykge1xuICAgICAgICBpZiAodHlwZW9mIGhhbmRsZXIuaGFuZGxlRXZlbnQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICBoYW5kbGVyLmhhbmRsZUV2ZW50KGV2dCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGhhbmRsZXIuY2FsbChjdXJyZW50VGFyZ2V0LCBldnQpO1xuICAgICAgfVxuICAgICAgaWYgKGV2dC5zdG9wcGVkSW1tZWRpYXRlUHJvcGFnYXRpb24pIGJyZWFrO1xuICAgIH1cbiAgICBjb250aW51ZVByb3BhZ2F0aW9uID0gIWV2dC5zdG9wcGVkUHJvcGFnYXRpb247XG4gICAgLypcbiAgICBpZiAoY29udGludWVQcm9wYWdhdGlvbiAmJiAhc3ludGhldGljICYmICFsaXZlKGN1cnJlbnRUYXJnZXQpKSB7XG4gICAgICBldnQuY2FuY2VsQnViYmxlID0gdHJ1ZTtcbiAgICB9XG4gICAgKi9cbiAgICByZXR1cm4gKFxuICAgICAgc3ludGhldGljICYmXG4gICAgICBjb250aW51ZVByb3BhZ2F0aW9uICYmXG4gICAgICBjdXJyZW50VGFyZ2V0LnBhcmVudE5vZGVcbiAgICApID9cbiAgICAgIGN1cnJlbnRUYXJnZXQucGFyZW50Tm9kZS5kaXNwYXRjaEV2ZW50KGV2dCkgOlxuICAgICAgIWV2dC5kZWZhdWx0UHJldmVudGVkXG4gICAgO1xuICB9XG5cbiAgZnVuY3Rpb24gY29tbW9uRGVzY3JpcHRvcihnZXQsIHNldCkge1xuICAgIHJldHVybiB7XG4gICAgICAvLyBpZiB5b3UgdHJ5IHdpdGggZW51bWVyYWJsZTogdHJ1ZVxuICAgICAgLy8gSUU4IHdpbGwgbWlzZXJhYmx5IGZhaWxcbiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgIGdldDogZ2V0LFxuICAgICAgc2V0OiBzZXRcbiAgICB9O1xuICB9XG5cbiAgZnVuY3Rpb24gY29tbW9uVGV4dENvbnRlbnQocHJvdG9EZXN0LCBwcm90b1NvdXJjZSwgcHJvcGVydHkpIHtcbiAgICB2YXIgZGVzY3JpcHRvciA9IGdldE93blByb3BlcnR5RGVzY3JpcHRvcihcbiAgICAgIHByb3RvU291cmNlIHx8IHByb3RvRGVzdCwgcHJvcGVydHlcbiAgICApO1xuICAgIGRlZmluZVByb3BlcnR5KFxuICAgICAgcHJvdG9EZXN0LFxuICAgICAgJ3RleHRDb250ZW50JyxcbiAgICAgIGNvbW1vbkRlc2NyaXB0b3IoXG4gICAgICAgIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICByZXR1cm4gZGVzY3JpcHRvci5nZXQuY2FsbCh0aGlzKTtcbiAgICAgICAgfSxcbiAgICAgICAgZnVuY3Rpb24gKHRleHRDb250ZW50KSB7XG4gICAgICAgICAgZGVzY3JpcHRvci5zZXQuY2FsbCh0aGlzLCB0ZXh0Q29udGVudCk7XG4gICAgICAgIH1cbiAgICAgIClcbiAgICApO1xuICB9XG5cbiAgZnVuY3Rpb24gZW5yaWNoKGUsIGN1cnJlbnRUYXJnZXQpIHtcbiAgICBlLmN1cnJlbnRUYXJnZXQgPSBjdXJyZW50VGFyZ2V0O1xuICAgIGUuZXZlbnRQaGFzZSA9IChcbiAgICAgIC8vIEFUX1RBUkdFVCA6IEJVQkJMSU5HX1BIQVNFXG4gICAgICBlLnRhcmdldCA9PT0gZS5jdXJyZW50VGFyZ2V0ID8gMiA6IDNcbiAgICApO1xuICAgIHJldHVybiBlO1xuICB9XG5cbiAgZnVuY3Rpb24gZmluZChhcnJheSwgdmFsdWUpIHtcbiAgICB2YXIgaSA9IGFycmF5Lmxlbmd0aDtcbiAgICB3aGlsZShpLS0gJiYgYXJyYXlbaV0gIT09IHZhbHVlKTtcbiAgICByZXR1cm4gaTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldFRleHRDb250ZW50KCkge1xuICAgIGlmICh0aGlzLnRhZ05hbWUgPT09ICdCUicpIHJldHVybiAnXFxuJztcbiAgICB2YXJcbiAgICAgIHRleHROb2RlID0gdGhpcy5maXJzdENoaWxkLFxuICAgICAgYXJyYXlDb250ZW50ID0gW11cbiAgICA7XG4gICAgd2hpbGUodGV4dE5vZGUpIHtcbiAgICAgIGlmICh0ZXh0Tm9kZS5ub2RlVHlwZSAhPT0gOCAmJiB0ZXh0Tm9kZS5ub2RlVHlwZSAhPT0gNykge1xuICAgICAgICBhcnJheUNvbnRlbnQucHVzaCh0ZXh0Tm9kZS50ZXh0Q29udGVudCk7XG4gICAgICB9XG4gICAgICB0ZXh0Tm9kZSA9IHRleHROb2RlLm5leHRTaWJsaW5nO1xuICAgIH1cbiAgICByZXR1cm4gYXJyYXlDb250ZW50LmpvaW4oJycpO1xuICB9XG5cbiAgZnVuY3Rpb24gbGl2ZShzZWxmKSB7XG4gICAgcmV0dXJuIHNlbGYubm9kZVR5cGUgIT09IDkgJiYgaHRtbC5jb250YWlucyhzZWxmKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG9ua2V5dXAoZSkge1xuICAgIHZhciBldnQgPSBkb2N1bWVudC5jcmVhdGVFdmVudCgnRXZlbnQnKTtcbiAgICBldnQuaW5pdEV2ZW50KCdpbnB1dCcsIHRydWUsIHRydWUpO1xuICAgIChlLnNyY0VsZW1lbnQgfHwgZS5mcm9tRWxlbWVudCB8fCBkb2N1bWVudCkuZGlzcGF0Y2hFdmVudChldnQpO1xuICB9XG5cbiAgZnVuY3Rpb24gb25SZWFkeVN0YXRlKGUpIHtcbiAgICBpZiAoIVJFQURZRVZFTlRESVNQQVRDSEVEICYmIHJlYWR5U3RhdGVPSy50ZXN0KFxuICAgICAgZG9jdW1lbnQucmVhZHlTdGF0ZVxuICAgICkpIHtcbiAgICAgIFJFQURZRVZFTlRESVNQQVRDSEVEID0gIVJFQURZRVZFTlRESVNQQVRDSEVEO1xuICAgICAgZG9jdW1lbnQuZGV0YWNoRXZlbnQoT05SRUFEWVNUQVRFQ0hBTkdFLCBvblJlYWR5U3RhdGUpO1xuICAgICAgZSA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KCdFdmVudCcpO1xuICAgICAgZS5pbml0RXZlbnQoRE9NQ09OVEVOVExPQURFRCwgdHJ1ZSwgdHJ1ZSk7XG4gICAgICBkb2N1bWVudC5kaXNwYXRjaEV2ZW50KGUpO1xuICAgIH1cbiAgfVxuICBcbiAgZnVuY3Rpb24gZ2V0dGVyKGF0dHIpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gaHRtbFthdHRyXSB8fCAoZG9jdW1lbnQuYm9keSAmJiBkb2N1bWVudC5ib2R5W2F0dHJdKSB8fCAwO1xuICAgIH07XG4gIH1cblxuICBmdW5jdGlvbiBzZXRUZXh0Q29udGVudCh0ZXh0Q29udGVudCkge1xuICAgIHZhciBub2RlO1xuICAgIHdoaWxlICgobm9kZSA9IHRoaXMubGFzdENoaWxkKSkge1xuICAgICAgdGhpcy5yZW1vdmVDaGlsZChub2RlKTtcbiAgICB9XG4gICAgLypqc2hpbnQgZXFudWxsOnRydWUgKi9cbiAgICBpZiAodGV4dENvbnRlbnQgIT0gbnVsbCkge1xuICAgICAgdGhpcy5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSh0ZXh0Q29udGVudCkpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHZlcmlmeShzZWxmLCBlKSB7XG4gICAgaWYgKCFlKSB7XG4gICAgICBlID0gd2luZG93LmV2ZW50O1xuICAgIH1cbiAgICBpZiAoIWUudGFyZ2V0KSB7XG4gICAgICBlLnRhcmdldCA9IGUuc3JjRWxlbWVudCB8fCBlLmZyb21FbGVtZW50IHx8IGRvY3VtZW50O1xuICAgIH1cbiAgICBpZiAoIWUudGltZVN0YW1wKSB7XG4gICAgICBlLnRpbWVTdGFtcCA9IChuZXcgRGF0ZSgpKS5nZXRUaW1lKCk7XG4gICAgfVxuICAgIHJldHVybiBlO1xuICB9XG5cbiAgLy8gbm9ybWFsaXplZCB0ZXh0Q29udGVudCBmb3I6XG4gIC8vICBjb21tZW50LCBzY3JpcHQsIHN0eWxlLCB0ZXh0LCB0aXRsZVxuICBjb21tb25UZXh0Q29udGVudChcbiAgICB3aW5kb3cuSFRNTENvbW1lbnRFbGVtZW50LnByb3RvdHlwZSxcbiAgICBFbGVtZW50UHJvdG90eXBlLFxuICAgICdub2RlVmFsdWUnXG4gICk7XG5cbiAgY29tbW9uVGV4dENvbnRlbnQoXG4gICAgd2luZG93LkhUTUxTY3JpcHRFbGVtZW50LnByb3RvdHlwZSxcbiAgICBudWxsLFxuICAgICd0ZXh0J1xuICApO1xuXG4gIGNvbW1vblRleHRDb250ZW50KFxuICAgIFRleHRQcm90b3R5cGUsXG4gICAgbnVsbCxcbiAgICAnbm9kZVZhbHVlJ1xuICApO1xuXG4gIGNvbW1vblRleHRDb250ZW50KFxuICAgIHdpbmRvdy5IVE1MVGl0bGVFbGVtZW50LnByb3RvdHlwZSxcbiAgICBudWxsLFxuICAgICd0ZXh0J1xuICApO1xuXG4gIGRlZmluZVByb3BlcnR5KFxuICAgIHdpbmRvdy5IVE1MU3R5bGVFbGVtZW50LnByb3RvdHlwZSxcbiAgICAndGV4dENvbnRlbnQnLFxuICAgIChmdW5jdGlvbihkZXNjcmlwdG9yKXtcbiAgICAgIHJldHVybiBjb21tb25EZXNjcmlwdG9yKFxuICAgICAgICBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgcmV0dXJuIGRlc2NyaXB0b3IuZ2V0LmNhbGwodGhpcy5zdHlsZVNoZWV0KTtcbiAgICAgICAgfSxcbiAgICAgICAgZnVuY3Rpb24gKHRleHRDb250ZW50KSB7XG4gICAgICAgICAgZGVzY3JpcHRvci5zZXQuY2FsbCh0aGlzLnN0eWxlU2hlZXQsIHRleHRDb250ZW50KTtcbiAgICAgICAgfVxuICAgICAgKTtcbiAgICB9KGdldE93blByb3BlcnR5RGVzY3JpcHRvcih3aW5kb3cuQ1NTU3R5bGVTaGVldC5wcm90b3R5cGUsICdjc3NUZXh0JykpKVxuICApO1xuXG4gIHZhciBvcGFjaXR5cmUgPSAvXFxiXFxzKmFscGhhXFxzKlxcKFxccypvcGFjaXR5XFxzKj1cXHMqKFxcZCspXFxzKlxcKS87XG4gIGRlZmluZVByb3BlcnR5KFxuICAgIHdpbmRvdy5DU1NTdHlsZURlY2xhcmF0aW9uLnByb3RvdHlwZSxcbiAgICAnb3BhY2l0eScsIHtcbiAgICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBtID0gdGhpcy5maWx0ZXIubWF0Y2gob3BhY2l0eXJlKTtcbiAgICAgICAgcmV0dXJuIG0gPyAobVsxXSAvIDEwMCkudG9TdHJpbmcoKSA6ICcnO1xuICAgICAgfSxcbiAgICAgIHNldDogZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgdGhpcy56b29tID0gMTtcbiAgICAgICAgdmFyIGZvdW5kID0gZmFsc2U7XG4gICAgICAgIGlmICh2YWx1ZSA8IDEpIHtcbiAgICAgICAgICB2YWx1ZSA9ICcgYWxwaGEob3BhY2l0eT0nICsgTWF0aC5yb3VuZCh2YWx1ZSAqIDEwMCkgKyAnKSc7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgdmFsdWUgPSAnJztcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmZpbHRlciA9IHRoaXMuZmlsdGVyLnJlcGxhY2Uob3BhY2l0eXJlLFxuICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24oKSB7IGZvdW5kID0gdHJ1ZTsgcmV0dXJuIHZhbHVlOyB9KTtcbiAgICAgICAgaWYgKCFmb3VuZCAmJiB2YWx1ZSkge1xuICAgICAgICAgIHRoaXMuZmlsdGVyICs9IHZhbHVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICApO1xuXG4gIGRlZmluZVByb3BlcnRpZXMoXG4gICAgRWxlbWVudFByb3RvdHlwZSxcbiAgICB7XG4gICAgICAvLyBib251c1xuICAgICAgdGV4dENvbnRlbnQ6IHtcbiAgICAgICAgZ2V0OiBnZXRUZXh0Q29udGVudCxcbiAgICAgICAgc2V0OiBzZXRUZXh0Q29udGVudFxuICAgICAgfSxcbiAgICAgIC8vIGh0dHA6Ly93d3cudzMub3JnL1RSL0VsZW1lbnRUcmF2ZXJzYWwvI2ludGVyZmFjZS1lbGVtZW50VHJhdmVyc2FsXG4gICAgICBmaXJzdEVsZW1lbnRDaGlsZDoge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBmb3IodmFyXG4gICAgICAgICAgICBjaGlsZE5vZGVzID0gdGhpcy5jaGlsZE5vZGVzIHx8IFtdLFxuICAgICAgICAgICAgaSA9IDAsIGxlbmd0aCA9IGNoaWxkTm9kZXMubGVuZ3RoO1xuICAgICAgICAgICAgaSA8IGxlbmd0aDsgaSsrXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICBpZiAoY2hpbGROb2Rlc1tpXS5ub2RlVHlwZSA9PSAxKSByZXR1cm4gY2hpbGROb2Rlc1tpXTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBsYXN0RWxlbWVudENoaWxkOiB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGZvcih2YXJcbiAgICAgICAgICAgIGNoaWxkTm9kZXMgPSB0aGlzLmNoaWxkTm9kZXMgfHwgW10sXG4gICAgICAgICAgICBpID0gY2hpbGROb2Rlcy5sZW5ndGg7XG4gICAgICAgICAgICBpLS07XG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICBpZiAoY2hpbGROb2Rlc1tpXS5ub2RlVHlwZSA9PSAxKSByZXR1cm4gY2hpbGROb2Rlc1tpXTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBvbmlucHV0OiB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHJldHVybiB0aGlzLl9vbmlucHV0IHx8IG51bGw7XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gKG9uaW5wdXQpIHtcbiAgICAgICAgICBpZiAodGhpcy5fb25pbnB1dCkge1xuICAgICAgICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKCdpbnB1dCcsIHRoaXMuX29uaW5wdXQpO1xuICAgICAgICAgICAgdGhpcy5fb25pbnB1dCA9IG9uaW5wdXQ7XG4gICAgICAgICAgICBpZiAob25pbnB1dCkge1xuICAgICAgICAgICAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0Jywgb25pbnB1dCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgcHJldmlvdXNFbGVtZW50U2libGluZzoge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICB2YXIgcHJldmlvdXNFbGVtZW50U2libGluZyA9IHRoaXMucHJldmlvdXNTaWJsaW5nO1xuICAgICAgICAgIHdoaWxlIChwcmV2aW91c0VsZW1lbnRTaWJsaW5nICYmIHByZXZpb3VzRWxlbWVudFNpYmxpbmcubm9kZVR5cGUgIT0gMSkge1xuICAgICAgICAgICAgcHJldmlvdXNFbGVtZW50U2libGluZyA9IHByZXZpb3VzRWxlbWVudFNpYmxpbmcucHJldmlvdXNTaWJsaW5nO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gcHJldmlvdXNFbGVtZW50U2libGluZztcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIG5leHRFbGVtZW50U2libGluZzoge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICB2YXIgbmV4dEVsZW1lbnRTaWJsaW5nID0gdGhpcy5uZXh0U2libGluZztcbiAgICAgICAgICB3aGlsZSAobmV4dEVsZW1lbnRTaWJsaW5nICYmIG5leHRFbGVtZW50U2libGluZy5ub2RlVHlwZSAhPSAxKSB7XG4gICAgICAgICAgICBuZXh0RWxlbWVudFNpYmxpbmcgPSBuZXh0RWxlbWVudFNpYmxpbmcubmV4dFNpYmxpbmc7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBuZXh0RWxlbWVudFNpYmxpbmc7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBjaGlsZEVsZW1lbnRDb3VudDoge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBmb3IodmFyXG4gICAgICAgICAgICBjb3VudCA9IDAsXG4gICAgICAgICAgICBjaGlsZE5vZGVzID0gdGhpcy5jaGlsZE5vZGVzIHx8IFtdLFxuICAgICAgICAgICAgaSA9IGNoaWxkTm9kZXMubGVuZ3RoOyBpLS07IGNvdW50ICs9IGNoaWxkTm9kZXNbaV0ubm9kZVR5cGUgPT0gMVxuICAgICAgICAgICk7XG4gICAgICAgICAgcmV0dXJuIGNvdW50O1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgLypcbiAgICAgIC8vIGNoaWxkcmVuIHdvdWxkIGJlIGFuIG92ZXJyaWRlXG4gICAgICAvLyBJRTggYWxyZWFkeSBzdXBwb3J0cyB0aGVtIGJ1dCB3aXRoIGNvbW1lbnRzIHRvb1xuICAgICAgLy8gbm90IGp1c3Qgbm9kZVR5cGUgMVxuICAgICAgY2hpbGRyZW46IHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgZm9yKHZhclxuICAgICAgICAgICAgY2hpbGRyZW4gPSBbXSxcbiAgICAgICAgICAgIGNoaWxkTm9kZXMgPSB0aGlzLmNoaWxkTm9kZXMgfHwgW10sXG4gICAgICAgICAgICBpID0gMCwgbGVuZ3RoID0gY2hpbGROb2Rlcy5sZW5ndGg7XG4gICAgICAgICAgICBpIDwgbGVuZ3RoOyBpKytcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIGlmIChjaGlsZE5vZGVzW2ldLm5vZGVUeXBlID09IDEpIHtcbiAgICAgICAgICAgICAgY2hpbGRyZW4ucHVzaChjaGlsZE5vZGVzW2ldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIGNoaWxkcmVuO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgKi9cbiAgICAgIC8vIERPTSBMZXZlbCAyIEV2ZW50VGFyZ2V0IG1ldGhvZHMgYW5kIGV2ZW50c1xuICAgICAgYWRkRXZlbnRMaXN0ZW5lcjogdmFsdWVEZXNjKGZ1bmN0aW9uICh0eXBlLCBoYW5kbGVyLCBjYXB0dXJlKSB7XG4gICAgICAgIGlmICh0eXBlb2YgaGFuZGxlciAhPT0gJ2Z1bmN0aW9uJyAmJiB0eXBlb2YgaGFuZGxlciAhPT0gJ29iamVjdCcpIHJldHVybjtcbiAgICAgICAgdmFyXG4gICAgICAgICAgc2VsZiA9IHRoaXMsXG4gICAgICAgICAgb250eXBlID0gJ29uJyArIHR5cGUsXG4gICAgICAgICAgdGVtcGxlID0gIHNlbGZbU0VDUkVUXSB8fFxuICAgICAgICAgICAgICAgICAgICAgIGRlZmluZVByb3BlcnR5KFxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZiwgU0VDUkVULCB7dmFsdWU6IHt9fVxuICAgICAgICAgICAgICAgICAgICAgIClbU0VDUkVUXSxcbiAgICAgICAgICBjdXJyZW50VHlwZSA9IHRlbXBsZVtvbnR5cGVdIHx8ICh0ZW1wbGVbb250eXBlXSA9IHt9KSxcbiAgICAgICAgICBoYW5kbGVycyAgPSBjdXJyZW50VHlwZS5oIHx8IChjdXJyZW50VHlwZS5oID0gW10pLFxuICAgICAgICAgIGUsIGF0dHJcbiAgICAgICAgO1xuICAgICAgICBpZiAoIWhhc093blByb3BlcnR5LmNhbGwoY3VycmVudFR5cGUsICd3JykpIHtcbiAgICAgICAgICBjdXJyZW50VHlwZS53ID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIC8vIGVbU0VDUkVUXSBpcyBhIHNpbGVudCBub3RpZmljYXRpb24gbmVlZGVkIHRvIGF2b2lkXG4gICAgICAgICAgICAvLyBmaXJlZCBldmVudHMgZHVyaW5nIGxpdmUgdGVzdFxuICAgICAgICAgICAgcmV0dXJuIGVbU0VDUkVUXSB8fCBjb21tb25FdmVudExvb3Aoc2VsZiwgdmVyaWZ5KHNlbGYsIGUpLCBoYW5kbGVycywgZmFsc2UpO1xuICAgICAgICAgIH07XG4gICAgICAgICAgLy8gaWYgbm90IGRldGVjdGVkIHlldFxuICAgICAgICAgIGlmICghaGFzT3duUHJvcGVydHkuY2FsbCh0eXBlcywgb250eXBlKSkge1xuICAgICAgICAgICAgLy8gYW5kIHBvdGVudGlhbGx5IGEgbmF0aXZlIGV2ZW50XG4gICAgICAgICAgICBpZihwb3NzaWJseU5hdGl2ZUV2ZW50LnRlc3QodHlwZSkpIHtcbiAgICAgICAgICAgICAgLy8gZG8gdGhpcyBoZWF2eSB0aGluZ1xuICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIC8vIFRPRE86ICBzaG91bGQgSSBjb25zaWRlciB0YWdOYW1lIHRvbyBzbyB0aGF0XG4gICAgICAgICAgICAgICAgLy8gICAgICAgIElOUFVUW29udHlwZV0gY291bGQgYmUgZGlmZmVyZW50ID9cbiAgICAgICAgICAgICAgICBlID0gZG9jdW1lbnQuY3JlYXRlRXZlbnRPYmplY3QoKTtcbiAgICAgICAgICAgICAgICAvLyBkbyBub3QgY2xvbmUgZXZlciBhIG5vZGVcbiAgICAgICAgICAgICAgICAvLyBzcGVjaWFsbHkgYSBkb2N1bWVudCBvbmUgLi4uXG4gICAgICAgICAgICAgICAgLy8gdXNlIHRoZSBzZWNyZXQgdG8gaWdub3JlIHRoZW0gYWxsXG4gICAgICAgICAgICAgICAgZVtTRUNSRVRdID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAvLyBkb2N1bWVudCBhIHBhcnQgaWYgYSBub2RlIGhhcyBuZXZlciBiZWVuXG4gICAgICAgICAgICAgICAgLy8gYWRkZWQgdG8gYW55IG90aGVyIG5vZGUsIGZpcmVFdmVudCBtaWdodFxuICAgICAgICAgICAgICAgIC8vIGJlaGF2ZSB2ZXJ5IHdlaXJkbHkgKHJlYWQ6IHRyaWdnZXIgdW5zcGVjaWZpZWQgZXJyb3JzKVxuICAgICAgICAgICAgICAgIGlmIChzZWxmLm5vZGVUeXBlICE9IDkpIHtcbiAgICAgICAgICAgICAgICAgIC8qanNoaW50IGVxbnVsbDp0cnVlICovXG4gICAgICAgICAgICAgICAgICBpZiAoc2VsZi5wYXJlbnROb2RlID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgZGl2LmFwcGVuZENoaWxkKHNlbGYpO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgaWYgKChhdHRyID0gc2VsZi5nZXRBdHRyaWJ1dGUob250eXBlKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVtb3ZlQXR0cmlidXRlLmNhbGwoc2VsZiwgb250eXBlKTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgc2VsZi5maXJlRXZlbnQob250eXBlLCBlKTtcbiAgICAgICAgICAgICAgICB0eXBlc1tvbnR5cGVdID0gdHJ1ZTtcbiAgICAgICAgICAgICAgfSBjYXRjaChtZWgpIHtcbiAgICAgICAgICAgICAgICB0eXBlc1tvbnR5cGVdID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgd2hpbGUgKGRpdi5oYXNDaGlsZE5vZGVzKCkpIHtcbiAgICAgICAgICAgICAgICAgIGRpdi5yZW1vdmVDaGlsZChkaXYuZmlyc3RDaGlsZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGlmIChhdHRyICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICBzZXRBdHRyaWJ1dGUuY2FsbChzZWxmLCBvbnR5cGUsIGF0dHIpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAvLyBubyBuZWVkIHRvIGJvdGhlciBzaW5jZVxuICAgICAgICAgICAgICAvLyAneC1ldmVudCcgYWluJ3QgbmF0aXZlIGZvciBzdXJlXG4gICAgICAgICAgICAgIHR5cGVzW29udHlwZV0gPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKChjdXJyZW50VHlwZS5uID0gdHlwZXNbb250eXBlXSkpIHtcbiAgICAgICAgICAgIHNlbGYuYXR0YWNoRXZlbnQob250eXBlLCBjdXJyZW50VHlwZS53KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGZpbmQoaGFuZGxlcnMsIGhhbmRsZXIpIDwgMCkge1xuICAgICAgICAgIGhhbmRsZXJzW2NhcHR1cmUgPyAndW5zaGlmdCcgOiAncHVzaCddKGhhbmRsZXIpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlID09PSAnaW5wdXQnKSB7XG4gICAgICAgICAgc2VsZi5hdHRhY2hFdmVudCgnb25rZXl1cCcsIG9ua2V5dXApO1xuICAgICAgICB9XG4gICAgICB9KSxcbiAgICAgIGRpc3BhdGNoRXZlbnQ6IHZhbHVlRGVzYyhmdW5jdGlvbiAoZSkge1xuICAgICAgICB2YXJcbiAgICAgICAgICBzZWxmID0gdGhpcyxcbiAgICAgICAgICBvbnR5cGUgPSAnb24nICsgZS50eXBlLFxuICAgICAgICAgIHRlbXBsZSA9ICBzZWxmW1NFQ1JFVF0sXG4gICAgICAgICAgY3VycmVudFR5cGUgPSB0ZW1wbGUgJiYgdGVtcGxlW29udHlwZV0sXG4gICAgICAgICAgdmFsaWQgPSAhIWN1cnJlbnRUeXBlLFxuICAgICAgICAgIHBhcmVudE5vZGVcbiAgICAgICAgO1xuICAgICAgICBpZiAoIWUudGFyZ2V0KSBlLnRhcmdldCA9IHNlbGY7XG4gICAgICAgIHJldHVybiAodmFsaWQgPyAoXG4gICAgICAgICAgY3VycmVudFR5cGUubiAvKiAmJiBsaXZlKHNlbGYpICovID9cbiAgICAgICAgICAgIHNlbGYuZmlyZUV2ZW50KG9udHlwZSwgZSkgOlxuICAgICAgICAgICAgY29tbW9uRXZlbnRMb29wKFxuICAgICAgICAgICAgICBzZWxmLFxuICAgICAgICAgICAgICBlLFxuICAgICAgICAgICAgICBjdXJyZW50VHlwZS5oLFxuICAgICAgICAgICAgICB0cnVlXG4gICAgICAgICAgICApXG4gICAgICAgICkgOiAoXG4gICAgICAgICAgKHBhcmVudE5vZGUgPSBzZWxmLnBhcmVudE5vZGUpIC8qICYmIGxpdmUoc2VsZikgKi8gP1xuICAgICAgICAgICAgcGFyZW50Tm9kZS5kaXNwYXRjaEV2ZW50KGUpIDpcbiAgICAgICAgICAgIHRydWVcbiAgICAgICAgKSksICFlLmRlZmF1bHRQcmV2ZW50ZWQ7XG4gICAgICB9KSxcbiAgICAgIHJlbW92ZUV2ZW50TGlzdGVuZXI6IHZhbHVlRGVzYyhmdW5jdGlvbiAodHlwZSwgaGFuZGxlciwgY2FwdHVyZSkge1xuICAgICAgICBpZiAodHlwZW9mIGhhbmRsZXIgIT09ICdmdW5jdGlvbicgJiYgdHlwZW9mIGhhbmRsZXIgIT09ICdvYmplY3QnKSByZXR1cm47XG4gICAgICAgIHZhclxuICAgICAgICAgIHNlbGYgPSB0aGlzLFxuICAgICAgICAgIG9udHlwZSA9ICdvbicgKyB0eXBlLFxuICAgICAgICAgIHRlbXBsZSA9ICBzZWxmW1NFQ1JFVF0sXG4gICAgICAgICAgY3VycmVudFR5cGUgPSB0ZW1wbGUgJiYgdGVtcGxlW29udHlwZV0sXG4gICAgICAgICAgaGFuZGxlcnMgPSBjdXJyZW50VHlwZSAmJiBjdXJyZW50VHlwZS5oLFxuICAgICAgICAgIGkgPSBoYW5kbGVycyA/IGZpbmQoaGFuZGxlcnMsIGhhbmRsZXIpIDogLTFcbiAgICAgICAgO1xuICAgICAgICBpZiAoLTEgPCBpKSBoYW5kbGVycy5zcGxpY2UoaSwgMSk7XG4gICAgICB9KVxuICAgIH1cbiAgKTtcblxuICAvKiB0aGlzIGlzIG5vdCBuZWVkZWQgaW4gSUU4XG4gIGRlZmluZVByb3BlcnRpZXMod2luZG93LkhUTUxTZWxlY3RFbGVtZW50LnByb3RvdHlwZSwge1xuICAgIHZhbHVlOiB7XG4gICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub3B0aW9uc1t0aGlzLnNlbGVjdGVkSW5kZXhdLnZhbHVlO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG4gIC8vKi9cblxuICAvLyBFdmVudFRhcmdldCBtZXRob2RzIGZvciBUZXh0IG5vZGVzIHRvb1xuICBkZWZpbmVQcm9wZXJ0aWVzKFRleHRQcm90b3R5cGUsIHtcbiAgICBhZGRFdmVudExpc3RlbmVyOiB2YWx1ZURlc2MoRWxlbWVudFByb3RvdHlwZS5hZGRFdmVudExpc3RlbmVyKSxcbiAgICBkaXNwYXRjaEV2ZW50OiB2YWx1ZURlc2MoRWxlbWVudFByb3RvdHlwZS5kaXNwYXRjaEV2ZW50KSxcbiAgICByZW1vdmVFdmVudExpc3RlbmVyOiB2YWx1ZURlc2MoRWxlbWVudFByb3RvdHlwZS5yZW1vdmVFdmVudExpc3RlbmVyKVxuICB9KTtcblxuICBkZWZpbmVQcm9wZXJ0aWVzKFxuICAgIHdpbmRvdy5YTUxIdHRwUmVxdWVzdC5wcm90b3R5cGUsXG4gICAge1xuICAgICAgYWRkRXZlbnRMaXN0ZW5lcjogdmFsdWVEZXNjKGZ1bmN0aW9uICh0eXBlLCBoYW5kbGVyLCBjYXB0dXJlKSB7XG4gICAgICAgIHZhclxuICAgICAgICAgIHNlbGYgPSB0aGlzLFxuICAgICAgICAgIG9udHlwZSA9ICdvbicgKyB0eXBlLFxuICAgICAgICAgIHRlbXBsZSA9ICBzZWxmW1NFQ1JFVF0gfHxcbiAgICAgICAgICAgICAgICAgICAgICBkZWZpbmVQcm9wZXJ0eShcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYsIFNFQ1JFVCwge3ZhbHVlOiB7fX1cbiAgICAgICAgICAgICAgICAgICAgICApW1NFQ1JFVF0sXG4gICAgICAgICAgY3VycmVudFR5cGUgPSB0ZW1wbGVbb250eXBlXSB8fCAodGVtcGxlW29udHlwZV0gPSB7fSksXG4gICAgICAgICAgaGFuZGxlcnMgID0gY3VycmVudFR5cGUuaCB8fCAoY3VycmVudFR5cGUuaCA9IFtdKVxuICAgICAgICA7XG4gICAgICAgIGlmIChmaW5kKGhhbmRsZXJzLCBoYW5kbGVyKSA8IDApIHtcbiAgICAgICAgICBpZiAoIXNlbGZbb250eXBlXSkge1xuICAgICAgICAgICAgc2VsZltvbnR5cGVdID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICB2YXIgZSA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KCdFdmVudCcpO1xuICAgICAgICAgICAgICBlLmluaXRFdmVudCh0eXBlLCB0cnVlLCB0cnVlKTtcbiAgICAgICAgICAgICAgc2VsZi5kaXNwYXRjaEV2ZW50KGUpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaGFuZGxlcnNbY2FwdHVyZSA/ICd1bnNoaWZ0JyA6ICdwdXNoJ10oaGFuZGxlcik7XG4gICAgICAgIH1cbiAgICAgIH0pLFxuICAgICAgZGlzcGF0Y2hFdmVudDogdmFsdWVEZXNjKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIHZhclxuICAgICAgICAgIHNlbGYgPSB0aGlzLFxuICAgICAgICAgIG9udHlwZSA9ICdvbicgKyBlLnR5cGUsXG4gICAgICAgICAgdGVtcGxlID0gIHNlbGZbU0VDUkVUXSxcbiAgICAgICAgICBjdXJyZW50VHlwZSA9IHRlbXBsZSAmJiB0ZW1wbGVbb250eXBlXSxcbiAgICAgICAgICB2YWxpZCA9ICEhY3VycmVudFR5cGVcbiAgICAgICAgO1xuICAgICAgICByZXR1cm4gdmFsaWQgJiYgKFxuICAgICAgICAgIGN1cnJlbnRUeXBlLm4gLyogJiYgbGl2ZShzZWxmKSAqLyA/XG4gICAgICAgICAgICBzZWxmLmZpcmVFdmVudChvbnR5cGUsIGUpIDpcbiAgICAgICAgICAgIGNvbW1vbkV2ZW50TG9vcChcbiAgICAgICAgICAgICAgc2VsZixcbiAgICAgICAgICAgICAgZSxcbiAgICAgICAgICAgICAgY3VycmVudFR5cGUuaCxcbiAgICAgICAgICAgICAgdHJ1ZVxuICAgICAgICAgICAgKVxuICAgICAgICApO1xuICAgICAgfSksXG4gICAgICByZW1vdmVFdmVudExpc3RlbmVyOiB2YWx1ZURlc2MoRWxlbWVudFByb3RvdHlwZS5yZW1vdmVFdmVudExpc3RlbmVyKVxuICAgIH1cbiAgKTtcblxuICB2YXIgYnV0dG9uR2V0dGVyID0gZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKEV2ZW50LnByb3RvdHlwZSwgJ2J1dHRvbicpLmdldDtcbiAgZGVmaW5lUHJvcGVydGllcyhcbiAgICB3aW5kb3cuRXZlbnQucHJvdG90eXBlLFxuICAgIHtcbiAgICAgIGJ1YmJsZXM6IHZhbHVlRGVzYyh0cnVlKSxcbiAgICAgIGNhbmNlbGFibGU6IHZhbHVlRGVzYyh0cnVlKSxcbiAgICAgIHByZXZlbnREZWZhdWx0OiB2YWx1ZURlc2MoZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5jYW5jZWxhYmxlKSB7XG4gICAgICAgICAgdGhpcy5yZXR1cm5WYWx1ZSA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9KSxcbiAgICAgIHN0b3BQcm9wYWdhdGlvbjogdmFsdWVEZXNjKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5zdG9wcGVkUHJvcGFnYXRpb24gPSB0cnVlO1xuICAgICAgICB0aGlzLmNhbmNlbEJ1YmJsZSA9IHRydWU7XG4gICAgICB9KSxcbiAgICAgIHN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbjogdmFsdWVEZXNjKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5zdG9wcGVkSW1tZWRpYXRlUHJvcGFnYXRpb24gPSB0cnVlO1xuICAgICAgICB0aGlzLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgfSksXG4gICAgICBpbml0RXZlbnQ6IHZhbHVlRGVzYyhmdW5jdGlvbih0eXBlLCBidWJibGVzLCBjYW5jZWxhYmxlKXtcbiAgICAgICAgdGhpcy50eXBlID0gdHlwZTtcbiAgICAgICAgdGhpcy5idWJibGVzID0gISFidWJibGVzO1xuICAgICAgICB0aGlzLmNhbmNlbGFibGUgPSAhIWNhbmNlbGFibGU7XG4gICAgICAgIGlmICghdGhpcy5idWJibGVzKSB7XG4gICAgICAgICAgdGhpcy5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgfVxuICAgICAgfSksXG4gICAgICBwYWdlWDoge2dldDogZnVuY3Rpb24oKXsgcmV0dXJuIHRoaXMuX3BhZ2VYIHx8ICh0aGlzLl9wYWdlWCA9IHRoaXMuY2xpZW50WCArIHdpbmRvdy5zY3JvbGxYIC0gKGh0bWwuY2xpZW50TGVmdCB8fCAwKSk7IH19LFxuICAgICAgcGFnZVk6IHtnZXQ6IGZ1bmN0aW9uKCl7IHJldHVybiB0aGlzLl9wYWdlWSB8fCAodGhpcy5fcGFnZVkgPSB0aGlzLmNsaWVudFkgKyB3aW5kb3cuc2Nyb2xsWSAtIChodG1sLmNsaWVudFRvcCB8fCAwKSk7IH19LFxuICAgICAgd2hpY2g6IHtnZXQ6IGZ1bmN0aW9uKCl7IHJldHVybiB0aGlzLmtleUNvZGUgPyB0aGlzLmtleUNvZGUgOiAoaXNOYU4odGhpcy5idXR0b24pID8gdW5kZWZpbmVkIDogdGhpcy5idXR0b24gKyAxKTsgfX0sXG4gICAgICBjaGFyQ29kZToge2dldDogZnVuY3Rpb24oKXsgcmV0dXJuICh0aGlzLmtleUNvZGUgJiYgdGhpcy50eXBlID09ICdrZXlwcmVzcycpID8gdGhpcy5rZXlDb2RlIDogMDsgfX0sXG4gICAgICBidXR0b25zOiB7Z2V0OiBmdW5jdGlvbigpeyByZXR1cm4gYnV0dG9uR2V0dGVyLmNhbGwodGhpcyk7IH19LFxuICAgICAgYnV0dG9uOiB7Z2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGJ1dHRvbnMgPSB0aGlzLmJ1dHRvbnM7XG4gICAgICAgIHJldHVybiAoYnV0dG9ucyAmIDEgPyAwIDogKGJ1dHRvbnMgJiAyID8gMiA6IChidXR0b25zICYgNCA/IDEgOiB1bmRlZmluZWQpKSk7XG4gICAgICB9fSxcbiAgICAgIGRlZmF1bHRQcmV2ZW50ZWQ6IHtnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAvLyBpZiBwcmV2ZW50RGVmYXVsdCgpIHdhcyBuZXZlciBjYWxsZWQsIG9yIHJldHVyblZhbHVlIG5vdCBnaXZlbiBhIHZhbHVlXG4gICAgICAgIC8vIHRoZW4gcmV0dXJuVmFsdWUgaXMgdW5kZWZpbmVkXG4gICAgICAgIHZhciByZXR1cm5WYWx1ZSA9IHRoaXMucmV0dXJuVmFsdWUsIHVuZGVmO1xuICAgICAgICByZXR1cm4gIShyZXR1cm5WYWx1ZSA9PT0gdW5kZWYgfHwgcmV0dXJuVmFsdWUpO1xuICAgICAgfX0sXG4gICAgICByZWxhdGVkVGFyZ2V0OiB7Z2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHR5cGUgPSB0aGlzLnR5cGU7XG4gICAgICAgIGlmICh0eXBlID09PSAnbW91c2VvdmVyJykge1xuICAgICAgICAgIHJldHVybiB0aGlzLmZyb21FbGVtZW50O1xuICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdtb3VzZW91dCcpIHtcbiAgICAgICAgICByZXR1cm4gdGhpcy50b0VsZW1lbnQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgIH19XG4gICAgfVxuICApO1xuXG4gIGRlZmluZVByb3BlcnRpZXMoXG4gICAgd2luZG93LkhUTUxEb2N1bWVudC5wcm90b3R5cGUsXG4gICAge1xuICAgICAgZGVmYXVsdFZpZXc6IHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMucGFyZW50V2luZG93O1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgdGV4dENvbnRlbnQ6IHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMubm9kZVR5cGUgPT09IDExID8gZ2V0VGV4dENvbnRlbnQuY2FsbCh0aGlzKSA6IG51bGw7XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHRleHRDb250ZW50KSB7XG4gICAgICAgICAgaWYgKHRoaXMubm9kZVR5cGUgPT09IDExKSB7XG4gICAgICAgICAgICBzZXRUZXh0Q29udGVudC5jYWxsKHRoaXMsIHRleHRDb250ZW50KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBhZGRFdmVudExpc3RlbmVyOiB2YWx1ZURlc2MoZnVuY3Rpb24odHlwZSwgaGFuZGxlciwgY2FwdHVyZSkge1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgIEVsZW1lbnRQcm90b3R5cGUuYWRkRXZlbnRMaXN0ZW5lci5jYWxsKHNlbGYsIHR5cGUsIGhhbmRsZXIsIGNhcHR1cmUpO1xuICAgICAgICAvLyBOT1RFOiAgaXQgd29uJ3QgZmlyZSBpZiBhbHJlYWR5IGxvYWRlZCwgdGhpcyBpcyBOT1QgYSAkLnJlYWR5KCkgc2hpbSFcbiAgICAgICAgLy8gICAgICAgIHRoaXMgYmVoYXZlcyBqdXN0IGxpa2Ugc3RhbmRhcmQgYnJvd3NlcnNcbiAgICAgICAgaWYgKFxuICAgICAgICAgIERVTk5PQUJPVVRET01MT0FERUQgJiZcbiAgICAgICAgICB0eXBlID09PSBET01DT05URU5UTE9BREVEICYmXG4gICAgICAgICAgIXJlYWR5U3RhdGVPSy50ZXN0KFxuICAgICAgICAgICAgc2VsZi5yZWFkeVN0YXRlXG4gICAgICAgICAgKVxuICAgICAgICApIHtcbiAgICAgICAgICBEVU5OT0FCT1VURE9NTE9BREVEID0gZmFsc2U7XG4gICAgICAgICAgc2VsZi5hdHRhY2hFdmVudChPTlJFQURZU1RBVEVDSEFOR0UsIG9uUmVhZHlTdGF0ZSk7XG4gICAgICAgICAgLyogZ2xvYmFsIHRvcCAqL1xuICAgICAgICAgIGlmICh3aW5kb3cgPT0gdG9wKSB7XG4gICAgICAgICAgICAoZnVuY3Rpb24gZ29ubmEoZSl7dHJ5e1xuICAgICAgICAgICAgICBzZWxmLmRvY3VtZW50RWxlbWVudC5kb1Njcm9sbCgnbGVmdCcpO1xuICAgICAgICAgICAgICBvblJlYWR5U3RhdGUoKTtcbiAgICAgICAgICAgICAgfWNhdGNoKG9fTyl7XG4gICAgICAgICAgICAgIHNldFRpbWVvdXQoZ29ubmEsIDUwKTtcbiAgICAgICAgICAgIH19KCkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSksXG4gICAgICBkaXNwYXRjaEV2ZW50OiB2YWx1ZURlc2MoRWxlbWVudFByb3RvdHlwZS5kaXNwYXRjaEV2ZW50KSxcbiAgICAgIHJlbW92ZUV2ZW50TGlzdGVuZXI6IHZhbHVlRGVzYyhFbGVtZW50UHJvdG90eXBlLnJlbW92ZUV2ZW50TGlzdGVuZXIpLFxuICAgICAgY3JlYXRlRXZlbnQ6IHZhbHVlRGVzYyhmdW5jdGlvbihDbGFzcyl7XG4gICAgICAgIHZhciBlO1xuICAgICAgICBpZiAoQ2xhc3MgIT09ICdFdmVudCcpIHRocm93IG5ldyBFcnJvcigndW5zdXBwb3J0ZWQgJyArIENsYXNzKTtcbiAgICAgICAgZSA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50T2JqZWN0KCk7XG4gICAgICAgIGUudGltZVN0YW1wID0gKG5ldyBEYXRlKCkpLmdldFRpbWUoKTtcbiAgICAgICAgcmV0dXJuIGU7XG4gICAgICB9KVxuICAgIH1cbiAgKTtcblxuICBkZWZpbmVQcm9wZXJ0aWVzKFxuICAgIHdpbmRvdy5XaW5kb3cucHJvdG90eXBlLFxuICAgIHtcbiAgICAgIGdldENvbXB1dGVkU3R5bGU6IHZhbHVlRGVzYyhmdW5jdGlvbigpe1xuXG4gICAgICAgIHZhciAvLyBwYXJ0aWFsbHkgZ3JhYmJlZCBmcm9tIGpRdWVyeSBhbmQgRGVhbidzIGhhY2tcbiAgICAgICAgICBub3RwaXhlbCA9IC9eKD86WystXT8oPzpcXGQqXFwufClcXGQrKD86W2VFXVsrLV0/XFxkK3wpKSg/IXB4KVthLXolXSskLyxcbiAgICAgICAgICBwb3NpdGlvbiA9IC9eKHRvcHxyaWdodHxib3R0b218bGVmdCkkLyxcbiAgICAgICAgICByZSA9IC9cXC0oW2Etel0pL2csXG4gICAgICAgICAgcGxhY2UgPSBmdW5jdGlvbiAobWF0Y2gsICQxKSB7XG4gICAgICAgICAgICByZXR1cm4gJDEudG9VcHBlckNhc2UoKTtcbiAgICAgICAgICB9XG4gICAgICAgIDtcblxuICAgICAgICBmdW5jdGlvbiBDb21wdXRlZFN0eWxlKF8pIHtcbiAgICAgICAgICB0aGlzLl8gPSBfO1xuICAgICAgICB9XG5cbiAgICAgICAgQ29tcHV0ZWRTdHlsZS5wcm90b3R5cGUuZ2V0UHJvcGVydHlWYWx1ZSA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgICAgdmFyXG4gICAgICAgICAgICBlbCA9IHRoaXMuXyxcbiAgICAgICAgICAgIHN0eWxlID0gZWwuc3R5bGUsXG4gICAgICAgICAgICBjdXJyZW50U3R5bGUgPSBlbC5jdXJyZW50U3R5bGUsXG4gICAgICAgICAgICBydW50aW1lU3R5bGUgPSBlbC5ydW50aW1lU3R5bGUsXG4gICAgICAgICAgICByZXN1bHQsXG4gICAgICAgICAgICBsZWZ0LFxuICAgICAgICAgICAgcnRMZWZ0XG4gICAgICAgICAgO1xuICAgICAgICAgIGlmIChuYW1lID09ICdvcGFjaXR5Jykge1xuICAgICAgICAgICAgcmV0dXJuIHN0eWxlLm9wYWNpdHkgfHwgJzEnO1xuICAgICAgICAgIH1cbiAgICAgICAgICBuYW1lID0gKG5hbWUgPT09ICdmbG9hdCcgPyAnc3R5bGUtZmxvYXQnIDogbmFtZSkucmVwbGFjZShyZSwgcGxhY2UpO1xuICAgICAgICAgIHJlc3VsdCA9IGN1cnJlbnRTdHlsZSA/IGN1cnJlbnRTdHlsZVtuYW1lXSA6IHN0eWxlW25hbWVdO1xuICAgICAgICAgIGlmIChub3RwaXhlbC50ZXN0KHJlc3VsdCkgJiYgIXBvc2l0aW9uLnRlc3QobmFtZSkpIHtcbiAgICAgICAgICAgIGxlZnQgPSBzdHlsZS5sZWZ0O1xuICAgICAgICAgICAgcnRMZWZ0ID0gcnVudGltZVN0eWxlICYmIHJ1bnRpbWVTdHlsZS5sZWZ0O1xuICAgICAgICAgICAgaWYgKHJ0TGVmdCkge1xuICAgICAgICAgICAgICBydW50aW1lU3R5bGUubGVmdCA9IGN1cnJlbnRTdHlsZS5sZWZ0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc3R5bGUubGVmdCA9IG5hbWUgPT09ICdmb250U2l6ZScgPyAnMWVtJyA6IHJlc3VsdDtcbiAgICAgICAgICAgIHJlc3VsdCA9IHN0eWxlLnBpeGVsTGVmdCArICdweCc7XG4gICAgICAgICAgICBzdHlsZS5sZWZ0ID0gbGVmdDtcbiAgICAgICAgICAgIGlmIChydExlZnQpIHtcbiAgICAgICAgICAgICAgcnVudGltZVN0eWxlLmxlZnQgPSBydExlZnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIC8qanNoaW50IGVxbnVsbDp0cnVlICovXG4gICAgICAgICAgcmV0dXJuIHJlc3VsdCA9PSBudWxsID9cbiAgICAgICAgICAgIHJlc3VsdCA6ICgocmVzdWx0ICsgJycpIHx8ICdhdXRvJyk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gdW5zdXBwb3J0ZWRcbiAgICAgICAgZnVuY3Rpb24gUHNldWRvQ29tcHV0ZWRTdHlsZSgpIHt9XG4gICAgICAgIFBzZXVkb0NvbXB1dGVkU3R5bGUucHJvdG90eXBlLmdldFByb3BlcnR5VmFsdWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChlbCwgcHNldWRvKSB7XG4gICAgICAgICAgcmV0dXJuIHBzZXVkbyA/XG4gICAgICAgICAgICBuZXcgUHNldWRvQ29tcHV0ZWRTdHlsZShlbCkgOlxuICAgICAgICAgICAgbmV3IENvbXB1dGVkU3R5bGUoZWwpO1xuICAgICAgICB9O1xuXG4gICAgICB9KCkpLFxuXG4gICAgICBhZGRFdmVudExpc3RlbmVyOiB2YWx1ZURlc2MoZnVuY3Rpb24gKHR5cGUsIGhhbmRsZXIsIGNhcHR1cmUpIHtcbiAgICAgICAgdmFyXG4gICAgICAgICAgc2VsZiA9IHdpbmRvdyxcbiAgICAgICAgICBvbnR5cGUgPSAnb24nICsgdHlwZSxcbiAgICAgICAgICBoYW5kbGVyc1xuICAgICAgICA7XG4gICAgICAgIGlmICghc2VsZltvbnR5cGVdKSB7XG4gICAgICAgICAgc2VsZltvbnR5cGVdID0gZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgcmV0dXJuIGNvbW1vbkV2ZW50TG9vcChzZWxmLCB2ZXJpZnkoc2VsZiwgZSksIGhhbmRsZXJzLCBmYWxzZSkgJiYgdW5kZWZpbmVkO1xuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgaGFuZGxlcnMgPSBzZWxmW29udHlwZV1bU0VDUkVUXSB8fCAoXG4gICAgICAgICAgc2VsZltvbnR5cGVdW1NFQ1JFVF0gPSBbXVxuICAgICAgICApO1xuICAgICAgICBpZiAoZmluZChoYW5kbGVycywgaGFuZGxlcikgPCAwKSB7XG4gICAgICAgICAgaGFuZGxlcnNbY2FwdHVyZSA/ICd1bnNoaWZ0JyA6ICdwdXNoJ10oaGFuZGxlcik7XG4gICAgICAgIH1cbiAgICAgIH0pLFxuICAgICAgZGlzcGF0Y2hFdmVudDogdmFsdWVEZXNjKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIHZhciBtZXRob2QgPSB3aW5kb3dbJ29uJyArIGUudHlwZV07XG4gICAgICAgIHJldHVybiBtZXRob2QgPyBtZXRob2QuY2FsbCh3aW5kb3csIGUpICE9PSBmYWxzZSAmJiAhZS5kZWZhdWx0UHJldmVudGVkIDogdHJ1ZTtcbiAgICAgIH0pLFxuICAgICAgcmVtb3ZlRXZlbnRMaXN0ZW5lcjogdmFsdWVEZXNjKGZ1bmN0aW9uICh0eXBlLCBoYW5kbGVyLCBjYXB0dXJlKSB7XG4gICAgICAgIHZhclxuICAgICAgICAgIG9udHlwZSA9ICdvbicgKyB0eXBlLFxuICAgICAgICAgIGhhbmRsZXJzID0gKHdpbmRvd1tvbnR5cGVdIHx8IE9iamVjdClbU0VDUkVUXSxcbiAgICAgICAgICBpID0gaGFuZGxlcnMgPyBmaW5kKGhhbmRsZXJzLCBoYW5kbGVyKSA6IC0xXG4gICAgICAgICA7XG4gICAgICAgIGlmICgtMSA8IGkpIGhhbmRsZXJzLnNwbGljZShpLCAxKTtcbiAgICAgIH0pLFxuICAgICAgcGFnZVhPZmZzZXQ6IHtnZXQ6IGdldHRlcignc2Nyb2xsTGVmdCcpfSxcbiAgICAgIHBhZ2VZT2Zmc2V0OiB7Z2V0OiBnZXR0ZXIoJ3Njcm9sbFRvcCcpfSxcbiAgICAgIHNjcm9sbFg6IHtnZXQ6IGdldHRlcignc2Nyb2xsTGVmdCcpfSxcbiAgICAgIHNjcm9sbFk6IHtnZXQ6IGdldHRlcignc2Nyb2xsVG9wJyl9LFxuICAgICAgaW5uZXJXaWR0aDoge2dldDogZ2V0dGVyKCdjbGllbnRXaWR0aCcpfSxcbiAgICAgIGlubmVySGVpZ2h0OiB7Z2V0OiBnZXR0ZXIoJ2NsaWVudEhlaWdodCcpfVxuICAgIH1cbiAgKTtcblxuICB3aW5kb3cuSFRNTEVsZW1lbnQgPSB3aW5kb3cuRWxlbWVudDtcblxuICAoZnVuY3Rpb24gKHN0eWxlU2hlZXRzLCBIVE1MNUVsZW1lbnQsIGkpIHtcbiAgICBmb3IgKGkgPSAwOyBpIDwgSFRNTDVFbGVtZW50Lmxlbmd0aDsgaSsrKSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KEhUTUw1RWxlbWVudFtpXSk7XG4gICAgaWYgKCFzdHlsZVNoZWV0cy5sZW5ndGgpIGRvY3VtZW50LmNyZWF0ZVN0eWxlU2hlZXQoJycpO1xuICAgIHN0eWxlU2hlZXRzWzBdLmFkZFJ1bGUoSFRNTDVFbGVtZW50LmpvaW4oJywnKSwgJ2Rpc3BsYXk6YmxvY2s7Jyk7XG4gIH0oZG9jdW1lbnQuc3R5bGVTaGVldHMsIFsnaGVhZGVyJywgJ25hdicsICdzZWN0aW9uJywgJ2FydGljbGUnLCAnYXNpZGUnLCAnZm9vdGVyJ10pKTtcbn0odGhpcy53aW5kb3cgfHwgZ2xvYmFsKSk7IiwiLy9cbi8vIHJlcXVlc3RBbmltYXRpb25GcmFtZSBwb2x5ZmlsbCBieSBFcmlrIE3DtmxsZXIuXG4vLyAgV2l0aCBmaXhlcyBmcm9tIFBhdWwgSXJpc2ggYW5kIFRpbm8gWmlqZGVsXG4vL1xuLy8gIGh0dHA6Ly9wYXVsaXJpc2guY29tLzIwMTEvcmVxdWVzdGFuaW1hdGlvbmZyYW1lLWZvci1zbWFydC1hbmltYXRpbmcvXG4vLyAgaHR0cDovL215Lm9wZXJhLmNvbS9lbW9sbGVyL2Jsb2cvMjAxMS8xMi8yMC9yZXF1ZXN0YW5pbWF0aW9uZnJhbWUtZm9yLXNtYXJ0LWVyLWFuaW1hdGluZ1xuLy9cbi8vICBNSVQgbGljZW5zZVxuLy9cbihmdW5jdGlvbigpIHtcbiAgICB2YXIgbGFzdFRpbWUgPSAwO1xuICAgIHZhciB2ZW5kb3JzID0gWyd3ZWJraXQnLCAnbW96J107XG4gICAgZm9yICh2YXIgeCA9IDA7IHggPCB2ZW5kb3JzLmxlbmd0aCAmJiAhd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZTsgKyt4KSB7XG4gICAgICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUgPSB3aW5kb3dbdmVuZG9yc1t4XSArICdSZXF1ZXN0QW5pbWF0aW9uRnJhbWUnXTtcbiAgICAgICAgd2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lID1cbiAgICAgICAgICAgIHdpbmRvd1t2ZW5kb3JzW3hdICsgJ0NhbmNlbEFuaW1hdGlvbkZyYW1lJ10gfHwgd2luZG93W3ZlbmRvcnNbeF0gKyAnQ2FuY2VsUmVxdWVzdEFuaW1hdGlvbkZyYW1lJ107XG4gICAgfVxuXG4gICAgaWYgKCF3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKVxuICAgICAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lID0gZnVuY3Rpb24oY2FsbGJhY2spIHtcbiAgICAgICAgICAgIHZhciBjdXJyVGltZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuICAgICAgICAgICAgdmFyIHRpbWVUb0NhbGwgPSBNYXRoLm1heCgwLCAxNiAtIChjdXJyVGltZSAtIGxhc3RUaW1lKSk7XG4gICAgICAgICAgICB2YXIgaWQgPSB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBjYWxsYmFjayhjdXJyVGltZSArIHRpbWVUb0NhbGwpO1xuICAgICAgICAgICAgfSwgdGltZVRvQ2FsbCk7XG4gICAgICAgICAgICBsYXN0VGltZSA9IGN1cnJUaW1lICsgdGltZVRvQ2FsbDtcbiAgICAgICAgICAgIHJldHVybiBpZDtcbiAgICAgICAgfTtcblxuICAgIGlmICghd2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lKVxuICAgICAgICB3aW5kb3cuY2FuY2VsQW5pbWF0aW9uRnJhbWUgPSBmdW5jdGlvbihpZCkge1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KGlkKTtcbiAgICAgICAgfTtcbn0oKSk7IiwibmFtZXNwYWNlIFJpZGVTdHlsZXJTaG93Y2FzZS5hcGkuYXV0aCB7XG4gICAgZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlKCkge1xuICAgICAgICByZXR1cm4gYXBpLnJlcXVlc3QoXCJhdXRoL3ZhbGlkYXRlXCIpO1xuICAgIH1cbn0iLCJuYW1lc3BhY2UgUmlkZVN0eWxlclNob3djYXNlLmFwaS5zZXR0aW5ncyB7XG4gICAgZXhwb3J0IGludGVyZmFjZSBSaWRlU3R5bGVyU2hvd2Nhc2VTZXR0aW5nc0Zyb21BUEkge1xuICAgICAgICBFbmFibGVTaGFyaW5nOiBib29sZWFuO1xuICAgICAgICBTdXNwZW5zaW9uUmFuZ2VzOiB7XG4gICAgICAgICAgICBbc3R5bGVUeXBlRHJpdmVUeXBlOnN0cmluZ106e1xuICAgICAgICAgICAgICAgIE1pbjogbnVtYmVyLFxuICAgICAgICAgICAgICAgIE1heDogbnVtYmVyXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFVzZVJhd1RpcmVEZXNjcmlwdGlvbjogYm9vbGVhbjtcbiAgICB9XG5cbiAgICBsZXQgZGVmYXVsdFNldHRpbmdzOlJpZGVTdHlsZXJTaG93Y2FzZVNldHRpbmdzRnJvbUFQSSA9IHtcbiAgICAgICAgRW5hYmxlU2hhcmluZzogdHJ1ZSxcbiAgICAgICAgU3VzcGVuc2lvblJhbmdlczoge1xuICAgICAgICAgICAgRGVmYXVsdDoge1xuICAgICAgICAgICAgICAgIE1pbjogLTQsXG4gICAgICAgICAgICAgICAgTWF4OiAwXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgVHJ1Y2s0V0Q6IHtcbiAgICAgICAgICAgICAgICBNaW46IC00LFxuICAgICAgICAgICAgICAgIE1heDogNFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFZhbjRXRDoge1xuICAgICAgICAgICAgICAgIE1pbjogLTQsXG4gICAgICAgICAgICAgICAgTWF4OiA0XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIFVzZVJhd1RpcmVEZXNjcmlwdGlvbjogZmFsc2VcbiAgICB9O1xuXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGdldFNldHRpbmdzKCk6UmlkZVN0eWxlclByb21pc2U8UmlkZVN0eWxlclNob3djYXNlU2V0dGluZ3NGcm9tQVBJLCByaWRlc3R5bGVyLlJpZGVTdHlsZXJBUElSZXNwb25zZT4ge1xuICAgICAgICByZXR1cm4gUHJvbWlzZUhlbHBlci50aGVuKGFwaS5yZXF1ZXN0KFwib3JnYW5pemF0aW9uL2dldHNldHRpbmdzXCIsIHtcbiAgICAgICAgICAgIEtleXM6IFtcbiAgICAgICAgICAgICAgICAnRU5BQkxFX1NIQVJJTkcnLFxuICAgICAgICAgICAgICAgICdTVVNQRU5TSU9OX1JBTkdFUycsXG4gICAgICAgICAgICAgICAgJ1JBV1RJUkVERVNDJ1xuICAgICAgICAgICAgXVxuICAgICAgICB9KSwgcmVzcG9uc2UgPT4ge1xuICAgICAgICAgICAgbGV0IHNldHRpbmdzID0gcmVzcG9uc2UuU2V0dGluZ3M7XG5cbiAgICAgICAgICAgIGlmICghc2V0dGluZ3MpIHJldHVybiBkZWZhdWx0U2V0dGluZ3M7XG5cbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgRW5hYmxlU2hhcmluZzogcGFyc2VCb29sZWFuKHNldHRpbmdzW1wiRU5BQkxFX1NIQVJJTkdcIl0gfHwgZGVmYXVsdFNldHRpbmdzLkVuYWJsZVNoYXJpbmcpLFxuICAgICAgICAgICAgICAgIFN1c3BlbnNpb25SYW5nZXM6IHBhcnNlU3VzcGVuc2lvblJhbmdlcyhzZXR0aW5nc1tcIlNVU1BFTlNJT05fUkFOR0VTXCJdKSxcbiAgICAgICAgICAgICAgICBVc2VSYXdUaXJlRGVzY3JpcHRpb246IHBhcnNlQm9vbGVhbihzZXR0aW5nc1tcIlJBV1RJUkVERVNDXCJdIHx8IGRlZmF1bHRTZXR0aW5ncy5Vc2VSYXdUaXJlRGVzY3JpcHRpb24pXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcGFyc2VCb29sZWFuKGJvb2xlYW46c3RyaW5nfGJvb2xlYW4pOmJvb2xlYW4ge1xuICAgICAgICAvLyBOb3QgYSBzdHJpbmcsIG9yIGFuIGVtcHR5IHN0cmluZywgcmV0dXJuIHRydWUgb3IgZmFsc2VcbiAgICAgICAgaWYgKHR5cGVvZiBib29sZWFuICE9PSAnc3RyaW5nJyB8fCAhYm9vbGVhbikgcmV0dXJuICEhYm9vbGVhbjtcblxuICAgICAgICBsZXQgZmlyc3RDaGFyID0gYm9vbGVhblswXTtcblxuICAgICAgICAvLyBUcnVlIGlzOiB0aGUgZmlyc3QgY2hhciBiZWluZyB1cHBlcmNhc2UvbG93ZXJjYXNlIFQgb3IgWVxuICAgICAgICBpZiAoZmlyc3RDaGFyID09PSAneScgfHwgZmlyc3RDaGFyID09PSAnWScgfHwgZmlyc3RDaGFyID09PSAndCcgfHwgZmlyc3RDaGFyID09PSAnVCcpIHJldHVybiB0cnVlO1xuXG4gICAgICAgIC8vIEZhbHNlIGlzIGV2ZXJ5dGhpbmcgZWxzZVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIFxuICAgIGZ1bmN0aW9uIHBhcnNlU3VzcGVuc2lvblJhbmdlcyhzdXNwZW5zaW9uUmFuZ2VzU2V0dGluZzpzdHJpbmcpOlJpZGVTdHlsZXJTaG93Y2FzZVNldHRpbmdzRnJvbUFQSVtcIlN1c3BlbnNpb25SYW5nZXNcIl0ge1xuICAgICAgICBpZiAoIXN1c3BlbnNpb25SYW5nZXNTZXR0aW5nKSByZXR1cm4gZGVmYXVsdFNldHRpbmdzLlN1c3BlbnNpb25SYW5nZXM7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGxldCBzdXNwZW5zaW9uUmFuZ2VzOlJpZGVTdHlsZXJTaG93Y2FzZVNldHRpbmdzRnJvbUFQSVtcIlN1c3BlbnNpb25SYW5nZXNcIl0gPSBKU09OLnBhcnNlKHN1c3BlbnNpb25SYW5nZXNTZXR0aW5nKTtcblxuICAgICAgICAgICAgcmV0dXJuIHN1c3BlbnNpb25SYW5nZXM7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZSk7XG5cbiAgICAgICAgICAgIHJldHVybiBkZWZhdWx0U2V0dGluZ3MuU3VzcGVuc2lvblJhbmdlcztcbiAgICAgICAgfVxuICAgIH1cbn0iLCJuYW1lc3BhY2UgUmlkZVN0eWxlclNob3djYXNlIHtcclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgUmlkZVN0eWxlclNob3djYXNlQVBJSW5pdGlhbGl6ZVNldHRpbmdze31cclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgUmlkZVN0eWxlclNob3djYXNlQVBJSW5pdGlhbGl6ZVNldHRpbmdzS2V5VG9rZW4gZXh0ZW5kcyBSaWRlU3R5bGVyU2hvd2Nhc2VBUElJbml0aWFsaXplU2V0dGluZ3Mge1xyXG4gICAgICAgIHRva2VuPzpzdHJpbmc7XHJcbiAgICAgICAga2V5PzpzdHJpbmc7XHJcbiAgICB9XHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIFJpZGVTdHlsZXJTaG93Y2FzZUFQSUluaXRpYWxpemVTZXR0aW5nc1VzZXIgZXh0ZW5kcyBSaWRlU3R5bGVyU2hvd2Nhc2VBUElJbml0aWFsaXplU2V0dGluZ3Mge1xyXG4gICAgICAgIHVzZXJuYW1lOiBzdHJpbmc7XHJcbiAgICAgICAgcGFzc3dvcmQ6IHN0cmluZztcclxuICAgIH1cclxuXHJcbiAgICBleHBvcnQgbmFtZXNwYWNlIGFwaSB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogSW5pdGlhbGl6ZSB0aGUgUmlkZVN0eWxlciBBUEkgYnkgcGFzc2luZyBpbiBhIHVzZXIvcGFzc3dvcmQgY29tYmluYXRpb24sIGEgdXNlciB0b2tlbiwgb3IgYSBrZXkuXHJcbiAgICAgICAgICogQHBhcmFtIHNldHRpbmdzIFRoZSBBUEkgaW5pdGlhbGl6YXRpb24gc2V0dGluZ3NcclxuICAgICAgICAgKiBAcmV0dXJucyBBIHByb21pc2UgdGhhdCBpcyByZXNvbHZlZCAob3IgcmVqZWN0ZWQpIHdoZW4gdGhlIEFQSSBpcyBhdXRoZW50aWNhdGVkIChvciBmYWlscyBhdXRoZW50aWNhdGlvbilcclxuICAgICAgICAgKi9cclxuICAgICAgICBleHBvcnQgZnVuY3Rpb24gaW5pdGlhbGl6ZShzZXR0aW5ncz86UmlkZVN0eWxlclNob3djYXNlQVBJSW5pdGlhbGl6ZVNldHRpbmdzS2V5VG9rZW58UmlkZVN0eWxlclNob3djYXNlQVBJSW5pdGlhbGl6ZVNldHRpbmdzVXNlcik6UmlkZVN0eWxlclByb21pc2Uge1xyXG4gICAgICAgICAgICAvLyBJZiBhdXRoZW50aWNhdGlvbiBpbmZvcm1hdGlvbiB3YXMgcGFzc2VkIGluLCBsZXQncyB1c2UgdGhhdFxyXG4gICAgICAgICAgICBpZiAoc2V0dGluZ3MpIHtcclxuICAgICAgICAgICAgICAgIGlmICgndXNlcm5hbWUnIGluIHNldHRpbmdzICYmICdwYXNzd29yZCcgaW4gc2V0dGluZ3MpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBMb2dpbiB1c2luZyBhIHVzZXJuYW1lIGFuZCBwYXNzd29yZFxyXG4gICAgICAgICAgICAgICAgICAgIHNldHRpbmdzID0gc2V0dGluZ3MgYXMgUmlkZVN0eWxlclNob3djYXNlQVBJSW5pdGlhbGl6ZVNldHRpbmdzVXNlcjtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmlkZXN0eWxlci5hdXRoLnN0YXJ0KHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgVXNlcm5hbWU6IHNldHRpbmdzLnVzZXJuYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgUGFzc3dvcmQ6IHNldHRpbmdzLnBhc3N3b3JkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrOiBmdW5jdGlvbihyZXNwb25zZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLlN1Y2Nlc3MpIGF1dGhlbnRpY2F0ZWQucmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBhdXRoZW50aWNhdGVkLnJlamVjdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0VVJMKClcclxuICAgICAgICAgICAgICAgICAgICAvLyBTa2lwIGNhbGxpbmcgdmFsaWRhdGUgYmVsb3dcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCd0b2tlbicgaW4gc2V0dGluZ3MgfHwgJ2tleScgaW4gc2V0dGluZ3MpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBMb2dpbiB1c2luZyBhIGtleSBvciB0b2tlblxyXG4gICAgICAgICAgICAgICAgICAgIHJpZGVzdHlsZXIuYXV0aC5zZXQoc2V0dGluZ3MgYXMgUmlkZVN0eWxlclNob3djYXNlQVBJSW5pdGlhbGl6ZVNldHRpbmdzS2V5VG9rZW4pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBWYWxpZGF0ZSB0aGUgdXNlcidzIGtleSBvciB0b2tlblxyXG4gICAgICAgICAgICBhdXRoLnZhbGlkYXRlKClcclxuICAgICAgICAgICAgICAgIC5kb25lKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB1cmwgPSByaWRlc3R5bGVyLmFqYXgudXJsKCcnLCB1bmRlZmluZWQpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoL1xcL2FwaS1hbHBoYVxcLi9pLnRlc3QodXJsKSkgZW52aXJvbm1lbnQgPSBFbnZpcm9ubWVudC5BbHBoYTtcclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICgvXFwvYXBpLWJldGFcXC4vaS50ZXN0KHVybCkpIGVudmlyb25tZW50ID0gRW52aXJvbm1lbnQuQmV0YTtcclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICgvXFwvYXBpXFwuL2kudGVzdCh1cmwpKSBlbnZpcm9ubWVudCA9IEVudmlyb25tZW50LkxpdmU7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBlbnZpcm9ubWVudCA9IEVudmlyb25tZW50Lk90aGVyO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBhdXRoZW50aWNhdGVkLnJlc29sdmUoKTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAuZmFpbCgoKSA9PiBhdXRoZW50aWNhdGVkLnJlamVjdCgpKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBhdXRoZW50aWNhdGVkO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZXhwb3J0IGxldCBhdXRoZW50aWNhdGVkID0gcmlkZXN0eWxlci5wcm9taXNlKCk7XHJcbiAgICAgICAgZXhwb3J0IGZ1bmN0aW9uIGlzQXV0aGVudGljYXRlZCgpOmJvb2xlYW4ge1xyXG4gICAgICAgICAgICByZXR1cm4gYXV0aGVudGljYXRlZC5zdGF0ZSgpID09PSByaWRlc3R5bGVyLlJpZGVTdHlsZXJQcm9taXNlU3RhdGUuUmVzb2x2ZWQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGV4cG9ydCBmdW5jdGlvbiBhZnRlckF1dGhlbnRpY2F0ZWQoY2FsbGJhY2s6IEZ1bmN0aW9uKSB7XHJcbiAgICAgICAgICAgIGlmIChpc0F1dGhlbnRpY2F0ZWQoKSkgY2FsbGJhY2soKTtcclxuICAgICAgICAgICAgZWxzZSBhdXRoZW50aWNhdGVkLmRvbmUoKCkgPT4gY2FsbGJhY2soKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBleHBvcnQgZnVuY3Rpb24gcmVxdWVzdDxBY3Rpb24gZXh0ZW5kcyBrZXlvZiByaWRlc3R5bGVyLlJpZGVzdHlsZXJBUElBY3Rpb25SZXNwb25zZU1hcHBpbmc+KGFjdGlvbjpBY3Rpb24sIGRhdGE/OnJpZGVzdHlsZXIuUmlkZXN0eWxlckFQSUFjdGlvblJlcXVlc3RNYXBwaW5nW0FjdGlvbl0pIDogUmlkZVN0eWxlclByb21pc2U8cmlkZXN0eWxlci5SaWRlc3R5bGVyQVBJQWN0aW9uUmVzcG9uc2VNYXBwaW5nW0FjdGlvbl0+IHtcclxuICAgICAgICAgICAgdHlwZSBSZXNwb25zZSA9IHJpZGVzdHlsZXIuUmlkZXN0eWxlckFQSUFjdGlvblJlc3BvbnNlTWFwcGluZ1tBY3Rpb25dO1xyXG4gICAgICAgICAgICB2YXIgcHJvbWlzZSA9IHJpZGVzdHlsZXIucHJvbWlzZTxSZXNwb25zZT4oKTtcclxuXHJcbiAgICAgICAgICAgIHJpZGVzdHlsZXIuYWpheC5zZW5kPEFjdGlvbj4oe1xyXG4gICAgICAgICAgICAgICAgYWN0aW9uOiBhY3Rpb24sXHJcbiAgICAgICAgICAgICAgICBkYXRhOiBkYXRhLFxyXG4gICAgICAgICAgICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uIChyZXNwb25zZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5TdWNjZXNzKSBwcm9taXNlLnJlc29sdmUocmVzcG9uc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgcHJvbWlzZS5yZWplY3QocmVzcG9uc2UpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBwcm9taXNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZXhwb3J0IGZ1bmN0aW9uIGdldFVSTDxBY3Rpb24gZXh0ZW5kcyByaWRlc3R5bGVyLlJpZGVTdHlsZXJBUElFbmRwb2ludD4oYWN0aW9uOkFjdGlvbiwgZGF0YT86cmlkZXN0eWxlci5SaWRlc3R5bGVyQVBJQWN0aW9uUmVxdWVzdE1hcHBpbmdbQWN0aW9uXSkgOiBzdHJpbmcge1xyXG4gICAgICAgICAgICByZXR1cm4gcmlkZXN0eWxlci5hamF4LnVybChhY3Rpb24sIGRhdGEpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZXhwb3J0IGVudW0gRW52aXJvbm1lbnQge1xyXG4gICAgICAgICAgICBBbHBoYSxcclxuICAgICAgICAgICAgQmV0YSxcclxuICAgICAgICAgICAgTGl2ZSxcclxuICAgICAgICAgICAgT3RoZXJcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGV4cG9ydCBsZXQgZW52aXJvbm1lbnQ6RW52aXJvbm1lbnQ7XHJcbiAgICB9XHJcbn0iLG51bGwsIm5hbWVzcGFjZSBSaWRlU3R5bGVyU2hvd2Nhc2UuZXZlbnRzIHtcclxuICAgIC8qKlxyXG4gICAgICogQSBtYXBwaW5nIG9mIGV2ZW50cyB0aGF0IGNhbiBiZSB0cmlnZ2VyZWQsIG1hcHBlZCB0byB0aGVpciBldmVudCBwYXJhbWV0ZXIgdHlwZVxyXG4gICAgICovXHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIFJpZGVTdHlsZXJTaG93Y2FzZUV2ZW50UGFyYW1ldGVyTWFwcGluZyB7XHJcbiAgICAgICAgXCJzdGF0ZS1jaGFuZ2VkXCI6IHN0YXRlLlN0YXRlQ2hhbmdlZEV2ZW50O1xyXG4gICAgICAgIFwiaW5pdGlhbGl6ZWRcIjogdW5kZWZpbmVkO1xyXG4gICAgICAgIFwidmVoaWNsZS1zZWxlY3RlZFwiOiBSaWRlU3R5bGVyVmVoaWNsZVNlbGVjdGlvbk1vZGFsLlNlbGVjdGVkVmVoaWNsZURhdGE7XHJcbiAgICAgICAgXCJtb2RhbC1zaG93XCI6IHsgbW9kYWw6IFJpZGVTdHlsZXJTaG93Y2FzZU1vZGFsIH07XHJcbiAgICAgICAgXCJtb2RhbC1oaWRlXCI6IHsgbW9kYWw6IFJpZGVTdHlsZXJTaG93Y2FzZU1vZGFsIH07XHJcbiAgICAgICAgXCJyZXNpemVcIjogdW5kZWZpbmVkO1xyXG4gICAgICAgIFwicmVzaXplZFwiOiB1bmRlZmluZWQ7XHJcbiAgICAgICAgXCJicmVha3BvaW50LWNoYW5nZWRcIjogUmlkZVN0eWxlclNob3djYXNlLnN0eWxlcy5CcmVha3BvaW50O1xyXG4gICAgICAgIFwidmVoaWNsZS1kZXNjcmlwdGlvbi1sb2FkZWRcIjogcmlkZXN0eWxlci5EZXNjcmlwdGlvbnMuVmVoaWNsZURlc2NyaXB0aW9uTW9kZWw7XHJcbiAgICB9XHJcblxyXG4gICAgZXhwb3J0IGludGVyZmFjZSBSaWRlU3R5bGVyU2hvd2Nhc2VFdmVudEhhbmRsZXI8RGF0YVR5cGUgPSBhbnk+IHtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAcGFyYW0gZXYgVGhlIGV2ZW50IGRhdGFcclxuICAgICAgICAgKiBAcmV0dXJuICAgZmFsc2UgdG8gY2FuY2VsIHRoZSBldmVudCBzdG9wIHByb2Nlc3NpbmcgZXZlbnRzXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgKGV2OiBEYXRhVHlwZSk6IGJvb2xlYW58dm9pZFxyXG4gICAgfTtcclxuXHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIERlYnVnQ2FsbGJhY2sge1xyXG4gICAgICAgIDxLIGV4dGVuZHMga2V5b2YgUmlkZVN0eWxlclNob3djYXNlRXZlbnRQYXJhbWV0ZXJNYXBwaW5nPihldmVudE5hbWU6SywgZXZlbnREYXRhOiBSaWRlU3R5bGVyU2hvd2Nhc2VFdmVudFBhcmFtZXRlck1hcHBpbmdbS10sIGV2ZW50SGFuZGxlcnM6IFJpZGVTdHlsZXJTaG93Y2FzZUV2ZW50SGFuZGxlcltdKTp2b2lkO1xyXG4gICAgfVxyXG5cclxuICAgIGV4cG9ydCBjbGFzcyBFdmVudEhhbmRsZXIge1xyXG4gICAgICAgIHByaXZhdGUgZXZlbnRIYW5kbGVyczoge1tldmVudE5hbWUgaW4ga2V5b2YgUmlkZVN0eWxlclNob3djYXNlRXZlbnRQYXJhbWV0ZXJNYXBwaW5nXT86UmlkZVN0eWxlclNob3djYXNlRXZlbnRIYW5kbGVyW119ID0ge307XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIExpc3RlbiBmb3IgYW4gZXZlbnRcclxuICAgICAgICAgKiBAcGFyYW0gZXZlbnROYW1lIFRoZSBuYW1lIG9mIHRoZSBldmVudCB0byBsaXN0ZW4gZm9yXHJcbiAgICAgICAgICogQHBhcmFtIGNhbGxiYWNrICBUaGUgY2FsbGJhY2sgdG8gcnVuIHdoZW4gdGhlIGV2ZW50IGlzIHRyaWdnZXJlZFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBvbjxLIGV4dGVuZHMga2V5b2YgUmlkZVN0eWxlclNob3djYXNlRXZlbnRQYXJhbWV0ZXJNYXBwaW5nPihldmVudE5hbWU6IEssIGNhbGxiYWNrOiBSaWRlU3R5bGVyU2hvd2Nhc2VFdmVudEhhbmRsZXI8UmlkZVN0eWxlclNob3djYXNlRXZlbnRQYXJhbWV0ZXJNYXBwaW5nW0tdPik6IHZvaWQge1xyXG4gICAgICAgICAgICBpZiAoZXZlbnROYW1lIGluIHRoaXMuZXZlbnRIYW5kbGVycyA9PT0gZmFsc2UpIHRoaXMuZXZlbnRIYW5kbGVyc1tldmVudE5hbWVdID0gW107XHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRIYW5kbGVyc1tldmVudE5hbWVdLnB1c2goY2FsbGJhY2spO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogU3RvcCBsaXN0ZW5pbmcgZm9yIGFuIGV2ZW50XHJcbiAgICAgICAgICogQHBhcmFtIGV2ZW50TmFtZSBUaGUgbmFtZSBvZiB0aGUgZXZlbnQgdG8gc3RvcCBsaXN0ZW5pbmcgdG9cclxuICAgICAgICAgKiBAcGFyYW0gY2FsbGJhY2sgVGhlIGNhbGxiYWNrIHRoYXQgd2FzIG9yaWdpbmFsbHkgcmVnaXN0ZXJlZFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBvZmY8SyBleHRlbmRzIGtleW9mIFJpZGVTdHlsZXJTaG93Y2FzZUV2ZW50UGFyYW1ldGVyTWFwcGluZz4oZXZlbnROYW1lOiBLLCBjYWxsYmFjazogUmlkZVN0eWxlclNob3djYXNlRXZlbnRIYW5kbGVyPFJpZGVTdHlsZXJTaG93Y2FzZUV2ZW50UGFyYW1ldGVyTWFwcGluZ1tLXT4pOiB2b2lkIHtcclxuICAgICAgICAgICAgaWYgKGV2ZW50TmFtZSBpbiB0aGlzLmV2ZW50SGFuZGxlcnMgPT09IGZhbHNlKSByZXR1cm47XHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRIYW5kbGVyc1tldmVudE5hbWVdID0gQXJyYXlIZWxwZXIucmVtb3ZlKHRoaXMuZXZlbnRIYW5kbGVyc1tldmVudE5hbWVdLCBjYWxsYmFjayk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBUcmlnZ2VyIGFuIGV2ZW50XHJcbiAgICAgICAgICogQHBhcmFtIGV2ZW50TmFtZSBUaGUgbmFtZSBvZiB0aGUgZXZlbnQgdG8gdHJpZ2dlclxyXG4gICAgICAgICAqIEBwYXJhbSBldiAgICAgICAgVGhlIGRhdGEgdG8gc2VuZCB0byB0aGUgZXZlbnQgaGFuZGxlcnNcclxuICAgICAgICAgKiBAcmV0dXJucyAgICAgICAgIGZhbHNlLCBpZiB0aGUgZXZlbnQgaGFzIGJlZW4gY2FuY2VsbGVkIGJ5IGEgaGFuZGxlciwgb3RoZXJ3aXNlIHRydWVcclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgdHJpZ2dlcjxLIGV4dGVuZHMga2V5b2YgUmlkZVN0eWxlclNob3djYXNlRXZlbnRQYXJhbWV0ZXJNYXBwaW5nPihldmVudE5hbWU6IEssIGV2OiBSaWRlU3R5bGVyU2hvd2Nhc2VFdmVudFBhcmFtZXRlck1hcHBpbmdbS10pOiBib29sZWFuIHtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiB0aGlzLmRlYnVnQ2FsbGJhY2sgPT09ICdmdW5jdGlvbicpXHJcbiAgICAgICAgICAgICAgICB0aGlzLmRlYnVnQ2FsbGJhY2soZXZlbnROYW1lLCBldiwgdGhpcy5ldmVudEhhbmRsZXJzW2V2ZW50TmFtZV0gfHwgW10pO1xyXG5cclxuICAgICAgICAgICAgaWYgKGV2ZW50TmFtZSBpbiB0aGlzLmV2ZW50SGFuZGxlcnMgPT09IGZhbHNlKSByZXR1cm4gdHJ1ZTtcclxuICAgICAgICBcclxuICAgICAgICAgICAgZm9yIChsZXQgZXZlbnRIYW5kbGVyIG9mIHRoaXMuZXZlbnRIYW5kbGVyc1tldmVudE5hbWVdKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZXZlbnRIYW5kbGVyKGV2KSA9PT0gZmFsc2UpIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBBbGxvd3MgdGhlIGRlZmluaXRpb24gb2YgYSBmdW5jdGlvbiB0byBjYWxsIGZvciBkZWJ1Z2dpbmcgdHJpZ2dlcmVkIGV2ZW50c1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBkZWJ1Z0NhbGxiYWNrOiBEZWJ1Z0NhbGxiYWNrO1xyXG4gICAgfVxyXG59IiwibmFtZXNwYWNlIFJpZGVTdHlsZXJTaG93Y2FzZS5maWx0ZXJzIHtcclxuICAgIGV4cG9ydCB0eXBlIEZpbHRlclByb3ZpZGVyVHlwZSA9ICd0aXJlJ3wnd2hlZWwnfCdnbG9iYWwnO1xyXG5cclxuICAgIGltcG9ydCBXaGVlbEZpbHRlck1vZGVsID0gcmlkZXN0eWxlci5SZXF1ZXN0cy5XaGVlbEZpbHRlck1vZGVsO1xyXG4gICAgaW1wb3J0IFRpcmVGaWx0ZXJNb2RlbCA9IHJpZGVzdHlsZXIuUmVxdWVzdHMuVGlyZUZpbHRlck1vZGVsO1xyXG4gICAgZXhwb3J0IHR5cGUgR2xvYmFsRmlsdGVyTW9kZWwgPSBXaGVlbEZpbHRlck1vZGVsICYgVGlyZUZpbHRlck1vZGVsO1xyXG5cclxuICAgIGltcG9ydCBGaXRtZW50RmlsdGVyTW9kZWwgPSByaWRlc3R5bGVyLlJlcXVlc3RzLkZpdG1lbnRGaWx0ZXJNb2RlbDtcclxuXHJcbiAgICBleHBvcnQgY2xhc3MgRmlsdGVyQ29udHJvbGxlciB7XHJcbiAgICAgICAgcHVibGljIHJlYWRvbmx5IGdsb2JhbEZpbHRlcnM6R2xvYmFsRmlsdGVyUHJvdmlkZXI7XHJcbiAgICAgICAgcHVibGljIHJlYWRvbmx5IHRpcmVGaWx0ZXJzOlRpcmVGaWx0ZXJQcm92aWRlcjtcclxuICAgICAgICBwdWJsaWMgcmVhZG9ubHkgd2hlZWxGaWx0ZXJzOldoZWVsRmlsdGVyUHJvdmlkZXI7XHJcblxyXG4gICAgICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgICAgICB0aGlzLmdsb2JhbEZpbHRlcnMgPSBuZXcgR2xvYmFsRmlsdGVyUHJvdmlkZXIoKTtcclxuICAgICAgICAgICAgdGhpcy50aXJlRmlsdGVycyA9IG5ldyBUaXJlRmlsdGVyUHJvdmlkZXIodGhpcy5nbG9iYWxGaWx0ZXJzKTtcclxuICAgICAgICAgICAgdGhpcy53aGVlbEZpbHRlcnMgPSBuZXcgV2hlZWxGaWx0ZXJQcm92aWRlcih0aGlzLmdsb2JhbEZpbHRlcnMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHNldFZlaGljbGUodmVoaWNsZTpWZWhpY2xlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2xlYXJGaWx0ZXJzKGZhbHNlKTtcclxuICAgICAgICAgICAgdGhpcy5nbG9iYWxGaWx0ZXJzLnNldFZlaGljbGUodmVoaWNsZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc2V0VmVoaWNsZURlc2NyaXB0aW9uKHZlaGljbGVEZXNjcmlwdGlvbjpWZWhpY2xlRGVzY3JpcHRpb24pIHtcclxuICAgICAgICAgICAgdGhpcy53aGVlbEZpbHRlcnMuc2V0VmVoaWNsZURlc2NyaXB0aW9uKHZlaGljbGVEZXNjcmlwdGlvbik7XHJcbiAgICAgICAgICAgIHRoaXMuZ2xvYmFsRmlsdGVycy5zZXRWZWhpY2xlRGVzY3JpcHRpb24odmVoaWNsZURlc2NyaXB0aW9uKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBjbGVhckZpbHRlcnModHJpZ2dlckNoYW5nZT86IGJvb2xlYW4pIHtcclxuICAgICAgICAgICAgdGhpcy5nbG9iYWxGaWx0ZXJzLmNsZWFyKHRyaWdnZXJDaGFuZ2UpO1xyXG4gICAgICAgICAgICB0aGlzLnRpcmVGaWx0ZXJzLmNsZWFyKHRyaWdnZXJDaGFuZ2UpO1xyXG4gICAgICAgICAgICB0aGlzLndoZWVsRmlsdGVycy5jbGVhcih0cmlnZ2VyQ2hhbmdlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZXhwb3J0IGludGVyZmFjZSBWZWhpY2xlIHtcclxuICAgICAgICB2ZWhpY2xlQ29uZmlndXJhdGlvbklEOiBzdHJpbmc7XHJcbiAgICAgICAgdmVoaWNsZVRpcmVPcHRpb25JRDogc3RyaW5nO1xyXG4gICAgfVxyXG5cclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgVmVoaWNsZURlc2NyaXB0aW9uIHtcclxuICAgICAgICBIYXNTaWRlSW1hZ2U6IGJvb2xlYW47XHJcbiAgICAgICAgSGFzQW5nbGVkSW1hZ2U6IGJvb2xlYW47XHJcbiAgICB9XHJcblxyXG4gICAgZXhwb3J0IGludGVyZmFjZSBGaWx0ZXJWYWx1ZSB7XHJcbiAgICAgICAga2V5OiBzdHJpbmc7XHJcbiAgICAgICAgdmFsdWU6IGFueTtcclxuICAgIH1cclxuXHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIElGaWx0ZXI8VmFsdWVUeXBlLCBGaWx0ZXJUeXBlPiB7XHJcbiAgICAgICAga2V5OiBzdHJpbmc7XHJcbiAgICAgICAgbGFiZWw/OiBzdHJpbmc7XHJcbiAgICAgICAgdW5zZWxlY3RlZE9wdGlvbkxhYmVsPzogc3RyaW5nO1xyXG4gICAgICAgIHZpc2libGU/OiBib29sZWFuO1xyXG5cclxuICAgICAgICByZXRyaWV2ZU9wdGlvbnM/OiAoZ2xvYmFsRmlsdGVyczpHbG9iYWxGaWx0ZXJNb2RlbCkgPT4gUmlkZVN0eWxlclByb21pc2U8SUZpbHRlck9wdGlvbjxWYWx1ZVR5cGU+W10sIHJpZGVzdHlsZXIuUmlkZVN0eWxlckFQSVJlc3BvbnNlPjtcclxuICAgICAgICBnZXRWYWx1ZUZyb21GaWx0ZXJzPzogKGZpbHRlcnM6RmlsdGVyVHlwZSkgPT4gYW55O1xyXG4gICAgICAgIGFwcGx5OiAoZmlsdGVyczpGaWx0ZXJUeXBlLCB2YWx1ZTpWYWx1ZVR5cGUpID0+IHZvaWQ7XHJcbiAgICB9XHJcblxyXG4gICAgZXhwb3J0IGludGVyZmFjZSBJRmlsdGVyT3B0aW9uPFZhbHVlVHlwZT4ge1xyXG4gICAgICAgIGxhYmVsOiBzdHJpbmc7XHJcbiAgICAgICAgdmFsdWU6IFZhbHVlVHlwZTtcclxuICAgIH1cclxuXHJcbiAgICBleHBvcnQgYWJzdHJhY3QgY2xhc3MgRmlsdGVyUHJvdmlkZXI8RmlsdGVyVHlwZSBleHRlbmRzIG9iamVjdD4ge1xyXG4gICAgICAgIHB1YmxpYyByZWFkb25seSB0eXBlOkZpbHRlclByb3ZpZGVyVHlwZTtcclxuICAgICAgICBwdWJsaWMgcmVhZG9ubHkgZmlsdGVyT3B0aW9uczpJRmlsdGVyPGFueSwgRmlsdGVyVHlwZT5bXTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVGhlIGN1cnJlbnRseSBhcHBsaWVkIGZpbHRlcnNcclxuICAgICAgICAgKi9cclxuICAgICAgICBwcm90ZWN0ZWQgY3VycmVudEZpbHRlcnM6RmlsdGVyVHlwZTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogT3ZlcnJpZGFibGUgaW4gZGVyaXZpbmcgY2xhc3NlcyB0byBzZXQgYmFzZSBmaWx0ZXJzIGZvciByZXF1ZXN0c1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHByb3RlY3RlZCByZWFkb25seSBiYXNlRmlsdGVyczpGaWx0ZXJUeXBlO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHByb3RlY3RlZCByZWFkb25seSBnbG9iYWxGaWx0ZXJQcm92aWRlcjogR2xvYmFsRmlsdGVyUHJvdmlkZXI7XHJcblxyXG4gICAgICAgIGNvbnN0cnVjdG9yKHR5cGU6RmlsdGVyUHJvdmlkZXJUeXBlLCBnbG9iYWxGaWx0ZXJQcm92aWRlcjpHbG9iYWxGaWx0ZXJQcm92aWRlcikge1xyXG4gICAgICAgICAgICB0aGlzLnR5cGUgPSB0eXBlO1xyXG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRGaWx0ZXJzID0ge30gYXMgRmlsdGVyVHlwZTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuZ2xvYmFsRmlsdGVyUHJvdmlkZXIgPSBnbG9iYWxGaWx0ZXJQcm92aWRlcjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIElmIHNwZWNpZmllZCwgdGhpcyBmdW5jdGlvbiBpcyBjYWxsZWQgZWFjaCB0aW1lIHRoZSBmaWx0ZXJzIGNoYW5nZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBvbkZpbHRlcnNDaGFuZ2VkOihmaWx0ZXJzOkZpbHRlclR5cGUpID0+IHZvaWQ7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFRyaWdnZXIgdGhlIGZpbHRlciBjaGFuZ2VkIGNhbGxiYWNrXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHJvdGVjdGVkIHRyaWdnZXJGaWx0ZXJDaGFuZ2UoKSB7XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgdGhpcy5vbkZpbHRlcnNDaGFuZ2VkID09PSAnZnVuY3Rpb24nKVxyXG4gICAgICAgICAgICAgICAgdGhpcy5vbkZpbHRlcnNDaGFuZ2VkKHRoaXMuZ2V0RmlsdGVycygpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFJldHVybnMgYSBmaWx0ZXIgbW9kZWwgd2l0aCB0aGUgc3BlY2lmaWVkIGZpbHRlciB2YWx1ZXMgc2V0LCBcclxuICAgICAgICAgKiB3aXRob3V0IGFjdHVhbGx5IHNldHRpbmcgdGhlbVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBwcmV2aWV3RmlsdGVycyhmaWx0ZXJWYWx1ZXM6RmlsdGVyVmFsdWVbXSk6RmlsdGVyVHlwZSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGdsb2JhbEZpbHRlcnM6RmlsdGVyVHlwZSA9ICh0aGlzLmdsb2JhbEZpbHRlclByb3ZpZGVyID8gXHJcbiAgICAgICAgICAgICAgICB0aGlzLmdsb2JhbEZpbHRlclByb3ZpZGVyLmdldEZpbHRlcnMoKSA6IFxyXG4gICAgICAgICAgICAgICAge31cclxuICAgICAgICAgICAgKSBhcyBGaWx0ZXJUeXBlO1xyXG4gICAgICAgICAgICBjb25zdCBmaWx0ZXJzOkZpbHRlclR5cGUgPSB7fSBhcyBGaWx0ZXJUeXBlO1xyXG4gICAgICAgICAgICBjb25zdCBiYXNlRmlsdGVyczpGaWx0ZXJUeXBlID0gdGhpcy5iYXNlRmlsdGVycztcclxuXHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgZmlsdGVyVmFsdWUgb2YgZmlsdGVyVmFsdWVzKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB7a2V5LCB2YWx1ZX0gPSBmaWx0ZXJWYWx1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldEZpbHRlcihrZXksIHZhbHVlLCBmaWx0ZXJzKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIE9iamVjdEhlbHBlci5hc3NpZ248RmlsdGVyVHlwZT4oXHJcbiAgICAgICAgICAgICAgICB7fSBhcyBGaWx0ZXJUeXBlLFxyXG4gICAgICAgICAgICAgICAgdGhpcy5iYXNlRmlsdGVycywgXHJcbiAgICAgICAgICAgICAgICBnbG9iYWxGaWx0ZXJzIGFzIEZpbHRlclR5cGUsIFxyXG4gICAgICAgICAgICAgICAgZmlsdGVyc1xyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogUmV0dXJucyB0aGUgY3VycmVudGx5IGFwcGxpZWQgZmlsdGVyc1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBnZXRGaWx0ZXJzKCk6RmlsdGVyVHlwZSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGdsb2JhbEZpbHRlcnM6RmlsdGVyVHlwZSA9ICh0aGlzLmdsb2JhbEZpbHRlclByb3ZpZGVyID8gXHJcbiAgICAgICAgICAgICAgICB0aGlzLmdsb2JhbEZpbHRlclByb3ZpZGVyLmdldEZpbHRlcnMoKSA6IFxyXG4gICAgICAgICAgICAgICAge31cclxuICAgICAgICAgICAgKSBhcyBGaWx0ZXJUeXBlO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIE9iamVjdEhlbHBlci5hc3NpZ248RmlsdGVyVHlwZT4oXHJcbiAgICAgICAgICAgICAgICB7fSBhcyBGaWx0ZXJUeXBlLFxyXG4gICAgICAgICAgICAgICAgdGhpcy5iYXNlRmlsdGVycyxcclxuICAgICAgICAgICAgICAgIGdsb2JhbEZpbHRlcnMsXHJcbiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRGaWx0ZXJzXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBSZXRyaWV2ZSB0aGUgb3B0aW9ucyBmb3IgYSBmaWx0ZXJcclxuICAgICAgICAgKiBAcGFyYW0gZmlsdGVyIFRoZSBmaWx0ZXJcclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgcmV0cmlldmVPcHRpb25zPFZhbHVlVHlwZT4oZmlsdGVyOklGaWx0ZXI8VmFsdWVUeXBlLCBGaWx0ZXJUeXBlPik6UmlkZVN0eWxlclByb21pc2U8SUZpbHRlck9wdGlvbjxWYWx1ZVR5cGU+W10sIHJpZGVzdHlsZXIuUmlkZVN0eWxlckFQSVJlc3BvbnNlPiB7XHJcbiAgICAgICAgICAgIHJldHVybiBmaWx0ZXIucmV0cmlldmVPcHRpb25zKHRoaXMuZ2xvYmFsRmlsdGVyUHJvdmlkZXIuZ2V0RmlsdGVycygpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogU2V0IGEgZmlsdGVyIG9wdGlvbiwgb24gYSBzcGVjaWZpYyBmaWx0ZXIgbW9kZWxcclxuICAgICAgICAgKiBAcGFyYW0ga2V5IFRoZSBmaWx0ZXIga2V5IHRvIGFwcGx5XHJcbiAgICAgICAgICogQHBhcmFtIHZhbHVlIFRoZSB2YWx1ZSB0byBhcHBseSB0byB0aGUgZmlsdGVyXHJcbiAgICAgICAgICogQHBhcmFtIGZpbHRlcnMgVGhlIGZpbHRlcnMgdG8gYXBwbHkgdGhlbSB0b1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBzZXRGaWx0ZXI8VmFsdWVUeXBlID0gYW55PihrZXk6c3RyaW5nLCB2YWx1ZTpWYWx1ZVR5cGUsIGZpbHRlcnM6RmlsdGVyVHlwZSA9IHRoaXMuY3VycmVudEZpbHRlcnMpOnZvaWQge1xyXG4gICAgICAgICAgICBjb25zdCBmaWx0ZXJPcHRpb24gPSB0aGlzLmZpbmRGaWx0ZXJPcHRpb24oa2V5KTtcclxuXHJcbiAgICAgICAgICAgIGlmIChmaWx0ZXJPcHRpb24pIHtcclxuICAgICAgICAgICAgICAgIGZpbHRlck9wdGlvbi5hcHBseShmaWx0ZXJzLCB2YWx1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFJldHVybnMgdGhlIGZpbHRlciBvcHRpb24gZm9yIHRoZSBzcGVjaWZpZWQga2V5XHJcbiAgICAgICAgICogQHBhcmFtIGtleSBUaGUgZmlsdGVyIGtleVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHByb3RlY3RlZCBmaW5kRmlsdGVyT3B0aW9uKGtleTpzdHJpbmcpOiBJRmlsdGVyPGFueSwgRmlsdGVyVHlwZT4ge1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGZpbHRlciBvZiB0aGlzLmZpbHRlck9wdGlvbnMpIHtcclxuICAgICAgICAgICAgICAgIGlmIChmaWx0ZXIua2V5ID09PSBrZXkpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmlsdGVyO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQXBwbHkgYSBsaXN0IG9mIHNlbGVjdGVkIGZpbHRlciBrZXktdmFsdWUgcGFpcnNcclxuICAgICAgICAgKiBAcGFyYW0gc2VsZWN0ZWRGaWx0ZXJzIEEgbGlzdCBvZiBzZWxlY3RlZCBmaWx0ZXIga2V5LXZhbHVlIHBhaXJzIHRvIGFwcGx5XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIHNldEZpbHRlcnMoc2VsZWN0ZWRGaWx0ZXJzOkZpbHRlclZhbHVlW10sIHRyaWdnZXJDaGFuZ2U/OiBib29sZWFuKTpib29sZWFuO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEFwcGx5IGEgZmlsdGVyXHJcbiAgICAgICAgICogQHBhcmFtIGtleSBUaGUga2V5IG9mIHRoZSBmaWx0ZXIgdG8gYXBwbHlcclxuICAgICAgICAgKiBAcGFyYW0gdmFsdWUgVGhlIHZhbHVlIHRvIGFwcGx5IHRvIHRoZSBmaWx0ZXJcclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgc2V0RmlsdGVycyhrZXk6IHN0cmluZywgdmFsdWU6IGFueSwgdHJpZ2dlckNoYW5nZT86Ym9vbGVhbik6Ym9vbGVhbjtcclxuICAgICAgICBwdWJsaWMgc2V0RmlsdGVycyhzZWxlY3RlZEZpbHRlcnNPcktleTpGaWx0ZXJWYWx1ZVtdfHN0cmluZywgdmFsdWU/OmFueSwgdHJpZ2dlckNoYW5nZT86IGJvb2xlYW4pOmJvb2xlYW4ge1xyXG4gICAgICAgICAgICBjb25zdCBuZXdGaWx0ZXJzOkZpbHRlclR5cGUgPSB7fSBhcyBGaWx0ZXJUeXBlO1xyXG5cclxuICAgICAgICAgICAgbGV0IHNlbGVjdGVkRmlsdGVyczogRmlsdGVyVmFsdWVbXTtcclxuXHJcbiAgICAgICAgICAgIGlmICh0eXBlb2Ygc2VsZWN0ZWRGaWx0ZXJzT3JLZXkgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgICAgICBzZWxlY3RlZEZpbHRlcnMgPSBbe1xyXG4gICAgICAgICAgICAgICAgICAgIGtleTogc2VsZWN0ZWRGaWx0ZXJzT3JLZXksXHJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHZhbHVlXHJcbiAgICAgICAgICAgICAgICB9XTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHNlbGVjdGVkRmlsdGVycyA9IHNlbGVjdGVkRmlsdGVyc09yS2V5O1xyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ2Jvb2xlYW4nKSB0cmlnZ2VyQ2hhbmdlID0gdmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZvciAoY29uc3Qgc2VsZWN0ZWRGaWx0ZXIgb2Ygc2VsZWN0ZWRGaWx0ZXJzKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB7a2V5LCB2YWx1ZX0gPSBzZWxlY3RlZEZpbHRlcjtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldEZpbHRlcihrZXksIHZhbHVlLCBuZXdGaWx0ZXJzKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgbGV0IGhhc0NoYW5nZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gbmV3RmlsdGVycykge1xyXG4gICAgICAgICAgICAgICAgaWYgKG5ld0ZpbHRlcnMuaGFzT3duUHJvcGVydHkoa2V5KSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld0ZpbHRlclZhbHVlID0gbmV3RmlsdGVyc1trZXldO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRGaWx0ZXJWYWx1ZSA9IHRoaXMuY3VycmVudEZpbHRlcnNba2V5XTtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICBpZiAobmV3RmlsdGVyVmFsdWUgIT09IGN1cnJlbnRGaWx0ZXJWYWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRGaWx0ZXJzW2tleV0gPSBuZXdGaWx0ZXJWYWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGFzQ2hhbmdlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAodHlwZW9mIHRyaWdnZXJDaGFuZ2UgPT09ICd1bmRlZmluZWQnKSB0cmlnZ2VyQ2hhbmdlID0gdHJ1ZTtcclxuICAgICAgICAgICAgaWYgKGhhc0NoYW5nZWQgJiYgdHJpZ2dlckNoYW5nZSkgdGhpcy50cmlnZ2VyRmlsdGVyQ2hhbmdlKCk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gaGFzQ2hhbmdlZDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBhYnN0cmFjdCBnZXRDb3VudChmaWx0ZXJzOkZpbHRlclR5cGUpOlJpZGVTdHlsZXJQcm9taXNlPG51bWJlciwgcmlkZXN0eWxlci5SaWRlU3R5bGVyQVBJUmVzcG9uc2U+O1xyXG5cclxuICAgICAgICBwdWJsaWMgY2xlYXIodHJpZ2dlckNoYW5nZTogYm9vbGVhbiA9IHRydWUpIHtcclxuICAgICAgICAgICAgdGhpcy5jdXJyZW50RmlsdGVycyA9IHt9IGFzIEZpbHRlclR5cGU7XHJcbiAgICAgICAgICAgIGlmICh0cmlnZ2VyQ2hhbmdlKSB0aGlzLnRyaWdnZXJGaWx0ZXJDaGFuZ2UoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgdmVoaWNsZUNvbmZpZ0ZpbHRlcktleSA9ICd2ZWhpY2xlLWNvbmZpZyc7XHJcbiAgICBleHBvcnQgY2xhc3MgR2xvYmFsRmlsdGVyUHJvdmlkZXIgZXh0ZW5kcyBGaWx0ZXJQcm92aWRlcjxHbG9iYWxGaWx0ZXJNb2RlbD4ge1xyXG4gICAgICAgIHB1YmxpYyByZWFkb25seSBmaWx0ZXJPcHRpb25zOklGaWx0ZXI8YW55LCBHbG9iYWxGaWx0ZXJNb2RlbD5bXTtcclxuICAgICAgICBwcm90ZWN0ZWQgcmVhZG9ubHkgYmFzZUZpbHRlcnM6IEdsb2JhbEZpbHRlck1vZGVsID0ge1xyXG4gICAgICAgICAgICBIYXNGaXRtZW50czogdHJ1ZSxcclxuICAgICAgICAgICAgSGFzQ2F0YWxvZ0ltYWdlOiB0cnVlXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgICAgIHN1cGVyKCdnbG9iYWwnLCB1bmRlZmluZWQpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5jdXJyZW50RmlsdGVycyA9IHt9O1xyXG5cclxuICAgICAgICAgICAgdGhpcy5maWx0ZXJPcHRpb25zID0gW1xyXG4gICAgICAgICAgICAgICAgLy8gVmVoaWNsZUNvbmZpZ3VyYXRpb24gJiBWZWhpY2xlVGlyZU9wdGlvblxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGtleTogdmVoaWNsZUNvbmZpZ0ZpbHRlcktleSxcclxuICAgICAgICAgICAgICAgICAgICB2aXNpYmxlOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICBhcHBseTogKGZpbHRlcnMsIHZlaGljbGU6VmVoaWNsZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmVoaWNsZUNvbmZpZ3VyYXRpb25JRCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZlaGljbGVUaXJlT3B0aW9uSURcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSA9IHZlaGljbGU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodmVoaWNsZUNvbmZpZ3VyYXRpb25JRCkgZmlsdGVycy5WZWhpY2xlQ29uZmlndXJhdGlvbiA9IHZlaGljbGVDb25maWd1cmF0aW9uSUQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2ZWhpY2xlVGlyZU9wdGlvbklEKSBmaWx0ZXJzLlZlaGljbGVUaXJlT3B0aW9uID0gdmVoaWNsZVRpcmVPcHRpb25JRDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGtleTogJ2dsb2JhbFdoZWVsJyxcclxuICAgICAgICAgICAgICAgICAgICBhcHBseTogKGZpbHRlcnMsIHZlaGljbGVEZXNjcmlwdGlvbjpWZWhpY2xlRGVzY3JpcHRpb24pID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZlaGljbGVEZXNjcmlwdGlvbi5IYXNTaWRlSW1hZ2UgJiYgIXZlaGljbGVEZXNjcmlwdGlvbi5IYXNBbmdsZWRJbWFnZSkgZmlsdGVycy5IYXNTaWRlSW1hZ2UgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodmVoaWNsZURlc2NyaXB0aW9uLkhhc0FuZ2xlZEltYWdlICYmICF2ZWhpY2xlRGVzY3JpcHRpb24uSGFzU2lkZUltYWdlKSBmaWx0ZXJzLkhhc0FuZ2xlZEltYWdlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9IFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBdO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgKiBBcHBsaWVzIGEgdmVoaWNsZSBzZWxlY3Rpb24gdG8gYWxsIFxyXG4gICAgICAgICogQHBhcmFtIHZlaGljbGUgVGhlIHZlaGljbGUgdG8gYXBwbHkgdG8gZmlsdGVyIHF1ZXJpZXNcclxuICAgICAgICAqL1xyXG4gICAgICAgIFxyXG4gICAgICAgIHB1YmxpYyBzZXRWZWhpY2xlRGVzY3JpcHRpb24odmVoaWNsZURlc2NyaXB0aW9uOlZlaGljbGVEZXNjcmlwdGlvbikge1xyXG4gICAgICAgICAgIHRoaXMuc2V0RmlsdGVyKCdnbG9iYWxXaGVlbCcsIHZlaGljbGVEZXNjcmlwdGlvbik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc2V0VmVoaWNsZSh2ZWhpY2xlOlZlaGljbGUpIHtcclxuICAgICAgICAgICAgdGhpcy5zZXRGaWx0ZXIodmVoaWNsZUNvbmZpZ0ZpbHRlcktleSwgdmVoaWNsZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgZ2V0Q291bnQoKTpuZXZlciB7XHJcbiAgICAgICAgICAgIC8vIFdlJ2xsIG5ldmVyIGNhbGwgZ2V0Q291bnQgb24gdGhlIEdsb2JhbEZpbHRlck1vZGVsXHJcbiAgICAgICAgICAgIHRocm93ICdDYW5ub3QgY291bnQgR2xvYmFsRmlsdGVyTW9kZWwnO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBleHBvcnQgY2xhc3MgVGlyZUZpbHRlclByb3ZpZGVyIGV4dGVuZHMgRmlsdGVyUHJvdmlkZXI8VGlyZUZpbHRlck1vZGVsPiB7XHJcbiAgICAgICAgcHVibGljIHJlYWRvbmx5IGZpbHRlck9wdGlvbnM6SUZpbHRlcjxhbnksIFRpcmVGaWx0ZXJNb2RlbD5bXTtcclxuICAgICAgICBwcm90ZWN0ZWQgcmVhZG9ubHkgYmFzZUZpbHRlcnM6VGlyZUZpbHRlck1vZGVsID0ge1xyXG4gICAgICAgICAgICBSZXF1aXJlZEZpdG1lbnRSZXNvdXJjZVR5cGVzOiBbXHJcbiAgICAgICAgICAgICAgICByaWRlc3R5bGVyLkRhdGFPYmplY3RzLlRpcmVGaXRtZW50UmVzb3VyY2VUeXBlLkNhdGFsb2dcclxuICAgICAgICAgICAgXVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGNvbnN0cnVjdG9yKGdsb2JhbEZpbHRlclByb3ZpZGVyOkdsb2JhbEZpbHRlclByb3ZpZGVyKSB7XHJcbiAgICAgICAgICAgIHN1cGVyKCd0aXJlJywgZ2xvYmFsRmlsdGVyUHJvdmlkZXIpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgdGhpcy5maWx0ZXJPcHRpb25zID0gW1xyXG4gICAgICAgICAgICAgICAgLy8gQnJhbmRcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBsYWJlbDogc3RyaW5ncy5nZXRTdHJpbmcoJ2JyYW5kcycpLFxyXG4gICAgICAgICAgICAgICAgICAgIHVuc2VsZWN0ZWRPcHRpb25MYWJlbDogc3RyaW5ncy5nZXRTdHJpbmcoJ2FsbC1icmFuZHMnKSxcclxuICAgICAgICAgICAgICAgICAgICBrZXk6ICd0aXJlLWJyYW5kJyxcclxuICAgICAgICAgICAgICAgICAgICByZXRyaWV2ZU9wdGlvbnM6IGdsb2JhbEZpbHRlcnMgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBSZXF1ZXN0IEJyYW5kc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZUhlbHBlci50aGVuKGFwaS5yZXF1ZXN0KCd0aXJlL2dldGJyYW5kcycsIGdsb2JhbEZpbHRlcnMpLCByZXNwb25zZSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBNYXAgYnJhbmRzIHRvIElGaWx0ZXJPcHRpb25zXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gQXJyYXlIZWxwZXIubWFwKHJlc3BvbnNlLkJyYW5kcywgYnJhbmQgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiBicmFuZC5UaXJlQnJhbmROYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogYnJhbmQuVGlyZUJyYW5kSURcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBnZXRWYWx1ZUZyb21GaWx0ZXJzOiBmaWx0ZXJzID0+IGZpbHRlcnMuVGlyZUJyYW5kLFxyXG4gICAgICAgICAgICAgICAgICAgIGFwcGx5OiAoZmlsdGVycywgdGlyZUJyYW5kSUQ6c3RyaW5nKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpbHRlcnMuVGlyZUJyYW5kID0gdGlyZUJyYW5kSUQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIC8vIEF0dHJpYnV0ZXNcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBsYWJlbDogc3RyaW5ncy5nZXRTdHJpbmcoJ2ZlYXR1cmVzJyksXHJcbiAgICAgICAgICAgICAgICAgICAgdW5zZWxlY3RlZE9wdGlvbkxhYmVsOiBzdHJpbmdzLmdldFN0cmluZygnYW55LWZlYXR1cmVzJyksXHJcbiAgICAgICAgICAgICAgICAgICAga2V5OiAndGlyZS1tb2RlbC1hdHRyaWJ1dGUnLFxyXG4gICAgICAgICAgICAgICAgICAgIHJldHJpZXZlT3B0aW9uczogZ2xvYmFsRmlsdGVycyA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJlcXVlc3QgU3BlZWQgUmF0aW5nc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZUhlbHBlci50aGVuKGFwaS5yZXF1ZXN0KCd0aXJlL2dldG1vZGVsYXR0cmlidXRlcycsIGdsb2JhbEZpbHRlcnMpLCByZXNwb25zZSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBNYXAgYnJhbmRzIHRvIElGaWx0ZXJPcHRpb25zXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gQXJyYXlIZWxwZXIubWFwKHJlc3BvbnNlLkF0dHJpYnV0ZXMsIGF0dHJpYnV0ZSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6IGF0dHJpYnV0ZS5UaXJlTW9kZWxBdHRyaWJ1dGVOYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogYXR0cmlidXRlLlRpcmVNb2RlbEF0dHJpYnV0ZUlEXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgZ2V0VmFsdWVGcm9tRmlsdGVyczogZmlsdGVycyA9PiBmaWx0ZXJzLlJlcXVpcmVkVGlyZU1vZGVsQXR0cmlidXRlLFxyXG4gICAgICAgICAgICAgICAgICAgIGFwcGx5OiAoZmlsdGVycywgYXR0cmlidXRlSUQ6IG51bWJlcikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmaWx0ZXJzLlJlcXVpcmVkVGlyZU1vZGVsQXR0cmlidXRlID0gYXR0cmlidXRlSUQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIC8vIFNwZWVkIFJhdGluZ1xyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsOiBzdHJpbmdzLmdldFN0cmluZygnc3BlZWQtcmF0aW5nJyksXHJcbiAgICAgICAgICAgICAgICAgICAgdW5zZWxlY3RlZE9wdGlvbkxhYmVsOiBzdHJpbmdzLmdldFN0cmluZygnYW55LXNwZWVkLXJhdGluZ3MnKSxcclxuICAgICAgICAgICAgICAgICAgICBrZXk6ICd0aXJlLXNwZWVkLXJhdGluZycsXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0cmlldmVPcHRpb25zOiBnbG9iYWxGaWx0ZXJzID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVxdWVzdCBTcGVlZCBSYXRpbmdzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlSGVscGVyLnRoZW4oYXBpLnJlcXVlc3QoJ3RpcmUvZ2V0c3BlZWRyYXRpbmdzJywgZ2xvYmFsRmlsdGVycyksIHJlc3BvbnNlID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE1hcCBicmFuZHMgdG8gSUZpbHRlck9wdGlvbnNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBBcnJheUhlbHBlci5tYXAocmVzcG9uc2UuU3BlZWRSYXRpbmdzLCBicmFuZCA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6IGJyYW5kLlRpcmVTcGVlZFJhdGluZ0NvZGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBicmFuZC5UaXJlU3BlZWRSYXRpbmdJRFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGdldFZhbHVlRnJvbUZpbHRlcnM6IGZpbHRlcnMgPT4gZmlsdGVycy5TcGVlZFJhdGluZyxcclxuICAgICAgICAgICAgICAgICAgICBhcHBseTogKGZpbHRlcnMsIHNwZWVkUmF0aW5nSUQ6IG51bWJlcikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmaWx0ZXJzLlNwZWVkUmF0aW5nID0gc3BlZWRSYXRpbmdJRDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIF07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgZ2V0Q291bnQoZmlsdGVyczpUaXJlRmlsdGVyTW9kZWwpOlJpZGVTdHlsZXJQcm9taXNlPG51bWJlciwgcmlkZXN0eWxlci5SaWRlU3R5bGVyQVBJUmVzcG9uc2U+IHtcclxuICAgICAgICAgICAgcmV0dXJuIFByb21pc2VIZWxwZXIudGhlbihhcGkucmVxdWVzdChcInRpcmUvY291bnRtb2RlbHNcIiwgZmlsdGVycyksIHJlc3BvbnNlID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5Db3VudFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZXhwb3J0IGNsYXNzIFdoZWVsRmlsdGVyUHJvdmlkZXIgZXh0ZW5kcyBGaWx0ZXJQcm92aWRlcjxXaGVlbEZpbHRlck1vZGVsPiB7XHJcbiAgICAgICAgcHVibGljIHJlYWRvbmx5IGZpbHRlck9wdGlvbnM6SUZpbHRlcjxhbnksIFdoZWVsRmlsdGVyTW9kZWw+W107XHJcblxyXG4gICAgICAgIGNvbnN0cnVjdG9yKGdsb2JhbEZpbHRlclByb3ZpZGVyOkdsb2JhbEZpbHRlclByb3ZpZGVyKSB7XHJcbiAgICAgICAgICAgIHN1cGVyKCd3aGVlbCcsIGdsb2JhbEZpbHRlclByb3ZpZGVyKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuZmlsdGVyT3B0aW9ucyA9IFtcclxuICAgICAgICAgICAgICAgIC8vIEJyYW5kXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw6IHN0cmluZ3MuZ2V0U3RyaW5nKCdicmFuZHMnKSxcclxuICAgICAgICAgICAgICAgICAgICB1bnNlbGVjdGVkT3B0aW9uTGFiZWw6IHN0cmluZ3MuZ2V0U3RyaW5nKCdhbGwtYnJhbmRzJyksXHJcbiAgICAgICAgICAgICAgICAgICAga2V5OiAnd2hlZWwtYnJhbmQnLFxyXG4gICAgICAgICAgICAgICAgICAgIHJldHJpZXZlT3B0aW9uczogZ2xvYmFsRmlsdGVycyA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJlcXVlc3QgQnJhbmRzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlSGVscGVyLnRoZW4oYXBpLnJlcXVlc3QoJ3doZWVsL2dldGJyYW5kcycsIGdsb2JhbEZpbHRlcnMpLCByZXNwb25zZSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBNYXAgYnJhbmRzIHRvIElGaWx0ZXJPcHRpb25zXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gQXJyYXlIZWxwZXIubWFwKHJlc3BvbnNlLkJyYW5kcywgYnJhbmQgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiBicmFuZC5XaGVlbEJyYW5kTmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGJyYW5kLldoZWVsQnJhbmRJRFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGdldFZhbHVlRnJvbUZpbHRlcnM6IGZpbHRlcnMgPT4gZmlsdGVycy5XaGVlbEJyYW5kLFxyXG4gICAgICAgICAgICAgICAgICAgIGFwcGx5OiAoZmlsdGVycywgd2hlZWxCcmFuZElEOnN0cmluZykgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmaWx0ZXJzLldoZWVsQnJhbmQgPSB3aGVlbEJyYW5kSUQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIC8vIEZpbmlzaFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsOiBzdHJpbmdzLmdldFN0cmluZygnZmluaXNoZXMnKSxcclxuICAgICAgICAgICAgICAgICAgICB1bnNlbGVjdGVkT3B0aW9uTGFiZWw6IHN0cmluZ3MuZ2V0U3RyaW5nKCdhbGwtZmluaXNoZXMnKSxcclxuICAgICAgICAgICAgICAgICAgICBrZXk6ICd3aGVlbC1maW5pc2gnLFxyXG4gICAgICAgICAgICAgICAgICAgIHJldHJpZXZlT3B0aW9uczogZ2xvYmFsRmlsdGVycyA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJlcXVlc3QgZmluaXNoZXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2VIZWxwZXIudGhlbihhcGkucmVxdWVzdCgnd2hlZWwvZ2V0ZmluaXNoZXMnLCBnbG9iYWxGaWx0ZXJzKSwgcmVzcG9uc2UgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTWFwIGZpbmlzaGVzIHRvIElGaWx0ZXJPcHRpb25zXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gQXJyYXlIZWxwZXIubWFwKHJlc3BvbnNlLkZpbmlzaGVzLCBmaW5pc2hDYXRlZ29yeSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6IGZpbmlzaENhdGVnb3J5LldoZWVsRmluaXNoQ2F0ZWdvcnlOYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogZmluaXNoQ2F0ZWdvcnkuV2hlZWxGaW5pc2hDYXRlZ29yeUlEXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgZ2V0VmFsdWVGcm9tRmlsdGVyczogZmlsdGVycyA9PiBmaWx0ZXJzLldoZWVsRmluaXNoQ2F0ZWdvcnksXHJcbiAgICAgICAgICAgICAgICAgICAgYXBwbHk6IChmaWx0ZXJzLCB3aGVlbEZpbmlzaENhdGVnb3J5SUQ6c3RyaW5nKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpbHRlcnMuV2hlZWxGaW5pc2hDYXRlZ29yeSA9IHdoZWVsRmluaXNoQ2F0ZWdvcnlJRDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgLy8gRGlhbWV0ZXJcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBsYWJlbDogc3RyaW5ncy5nZXRTdHJpbmcoJ3NpemVzJyksXHJcbiAgICAgICAgICAgICAgICAgICAgdW5zZWxlY3RlZE9wdGlvbkxhYmVsOiBzdHJpbmdzLmdldFN0cmluZygnYWxsLXNpemVzJyksXHJcbiAgICAgICAgICAgICAgICAgICAga2V5OiAnd2hlZWwtc2l6ZScsXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0cmlldmVPcHRpb25zOiBnbG9iYWxGaWx0ZXJzID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVxdWVzdCBkaWFtZXRlcnNcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2VIZWxwZXIudGhlbihhcGkucmVxdWVzdCgnd2hlZWwvZ2V0ZGlhbWV0ZXJzJywgZ2xvYmFsRmlsdGVycyksIHJlc3BvbnNlID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE1hcCBkaWFtZXRlcnMgdG8gSUZpbHRlck9wdGlvbnNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBBcnJheUhlbHBlci5tYXAocmVzcG9uc2UuRGlhbWV0ZXJzLCBkaWFtZXRlciA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6IGRpYW1ldGVyLnRvU3RyaW5nKCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBkaWFtZXRlclxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGdldFZhbHVlRnJvbUZpbHRlcnM6IGZpbHRlcnMgPT4gZ2V0Rml0bWVudEZpbHRlclZhbHVlKGZpbHRlcnMsICdEaWFtZXRlcicpLFxyXG4gICAgICAgICAgICAgICAgICAgIGFwcGx5OiAoZmlsdGVycywgZGlhbWV0ZXI6bnVtYmVyKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZmlsdGVycy5GaXRtZW50RmlsdGVycykgZmlsdGVycy5GaXRtZW50RmlsdGVycyA9IFtdO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgYXBwbHlGaXRtZW50RmlsdGVyKGZpbHRlcnMsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIERpYW1ldGVyOiBkaWFtZXRlclxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGtleTogJ3doZWVsJyxcclxuICAgICAgICAgICAgICAgICAgICBhcHBseTogKGZpbHRlcnMsIHZlaGljbGVEZXNjcmlwdGlvbjpWZWhpY2xlRGVzY3JpcHRpb24pID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZlaGljbGVEZXNjcmlwdGlvbi5IYXNTaWRlSW1hZ2UgJiYgIXZlaGljbGVEZXNjcmlwdGlvbi5IYXNBbmdsZWRJbWFnZSkgZmlsdGVycy5IYXNTaWRlSW1hZ2UgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodmVoaWNsZURlc2NyaXB0aW9uLkhhc0FuZ2xlZEltYWdlICYmICF2ZWhpY2xlRGVzY3JpcHRpb24uSGFzU2lkZUltYWdlKSBmaWx0ZXJzLkhhc0FuZ2xlZEltYWdlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIF07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc2V0VmVoaWNsZURlc2NyaXB0aW9uKHZlaGljbGVEZXNjcmlwdGlvbjpWZWhpY2xlRGVzY3JpcHRpb24pIHtcclxuICAgICAgICAgICB0aGlzLnNldEZpbHRlcignd2hlZWwnLCB2ZWhpY2xlRGVzY3JpcHRpb24pO1xyXG4gICAgICAgIH1cclxuICAgICAgXHJcbiAgICAgICAgcHVibGljIGdldENvdW50KGZpbHRlcnM6V2hlZWxGaWx0ZXJNb2RlbCk6UmlkZVN0eWxlclByb21pc2U8bnVtYmVyLCByaWRlc3R5bGVyLlJpZGVTdHlsZXJBUElSZXNwb25zZT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZUhlbHBlci50aGVuKGFwaS5yZXF1ZXN0KFwid2hlZWwvY291bnRtb2RlbHNcIiwgZmlsdGVycyksIHJlc3BvbnNlID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5Db3VudDtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGdldEZpdG1lbnRGaWx0ZXJWYWx1ZTxGaXRtZW50RmlsdGVyS2V5IGV4dGVuZHMga2V5b2YgRml0bWVudEZpbHRlck1vZGVsPihmaWx0ZXJzOntGaXRtZW50RmlsdGVycz86IEZpdG1lbnRGaWx0ZXJNb2RlbFtdfSwga2V5OiBGaXRtZW50RmlsdGVyS2V5KTpGaXRtZW50RmlsdGVyTW9kZWxbRml0bWVudEZpbHRlcktleV0ge1xyXG4gICAgICAgIGZvciAoY29uc3QgZml0bWVudEZpbHRlciBvZiBmaWx0ZXJzLkZpdG1lbnRGaWx0ZXJzIHx8IFtdKSB7XHJcbiAgICAgICAgICAgIGlmIChmaXRtZW50RmlsdGVyLkdyb3VwS2V5ID09PSBmaXRtZW50RmlsdGVyR3JvdXBLZXkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmaXRtZW50RmlsdGVyW2tleV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgZml0bWVudEZpbHRlckdyb3VwS2V5ID0gXCJyaWRlc3R5bGVyLXNob3djYXNlLWZpbHRlcnNcIjtcclxuICAgIGZ1bmN0aW9uIGFwcGx5Rml0bWVudEZpbHRlcihmaWx0ZXJzOntGaXRtZW50RmlsdGVycz86IEZpdG1lbnRGaWx0ZXJNb2RlbFtdfSwgZml0bWVudEZpbHRlcjogRml0bWVudEZpbHRlck1vZGVsKSB7XHJcbiAgICAgICAgbGV0IGZpdG1lbnRGaWx0ZXJzID0gZmlsdGVycy5GaXRtZW50RmlsdGVycyB8fCBbXTtcclxuICAgICAgICBsZXQgZXhpc3RpbmdGaXRtZW50RmlsdGVyR3JvdXA6Rml0bWVudEZpbHRlck1vZGVsO1xyXG5cclxuICAgICAgICBmb3IgKGNvbnN0IGFwcGxpZWRGaXRtZW50RmlsdGVyIG9mIGZpdG1lbnRGaWx0ZXJzKSB7XHJcbiAgICAgICAgICAgIGlmIChhcHBsaWVkRml0bWVudEZpbHRlci5Hcm91cEtleSA9PT0gZml0bWVudEZpbHRlckdyb3VwS2V5KSB7XHJcbiAgICAgICAgICAgICAgICBleGlzdGluZ0ZpdG1lbnRGaWx0ZXJHcm91cCA9IGFwcGxpZWRGaXRtZW50RmlsdGVyO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICghZXhpc3RpbmdGaXRtZW50RmlsdGVyR3JvdXApIHtcclxuICAgICAgICAgICAgZml0bWVudEZpbHRlci5Hcm91cEtleSA9IGZpdG1lbnRGaWx0ZXJHcm91cEtleTtcclxuICAgICAgICAgICAgZml0bWVudEZpbHRlcnMucHVzaChmaXRtZW50RmlsdGVyKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFdlJ3ZlIG1vZGlmaWVkIHRoZSBhcnJheSBzbyB1cGRhdGUgdGhlIGFycmF5IGluIHRoZSBmaWx0ZXJzXHJcbiAgICAgICAgICAgIGZpbHRlcnMuRml0bWVudEZpbHRlcnMgPSBmaXRtZW50RmlsdGVycztcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBPYmplY3RIZWxwZXIuYXNzaWduPEZpdG1lbnRGaWx0ZXJNb2RlbD4oZXhpc3RpbmdGaXRtZW50RmlsdGVyR3JvdXAsIGZpdG1lbnRGaWx0ZXIpO1xyXG4gICAgICAgICAgICBleGlzdGluZ0ZpdG1lbnRGaWx0ZXJHcm91cC5Hcm91cEtleSA9IGZpdG1lbnRGaWx0ZXJHcm91cEtleTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iLCJ2YXIgUmlkZVN0eWxlclNob3djYXNlO1xuKGZ1bmN0aW9uIChSaWRlU3R5bGVyU2hvd2Nhc2UpIHtcbiAgICB2YXIgZmlsdGVycztcbiAgICAoZnVuY3Rpb24gKGZpbHRlcnNfMSkge1xuICAgICAgICBjbGFzcyBGaWx0ZXJDb250cm9sbGVyIHtcbiAgICAgICAgICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICAgICAgICAgIHRoaXMuZ2xvYmFsRmlsdGVycyA9IG5ldyBHbG9iYWxGaWx0ZXJQcm92aWRlcigpO1xuICAgICAgICAgICAgICAgIHRoaXMudGlyZUZpbHRlcnMgPSBuZXcgVGlyZUZpbHRlclByb3ZpZGVyKHRoaXMuZ2xvYmFsRmlsdGVycyk7XG4gICAgICAgICAgICAgICAgdGhpcy53aGVlbEZpbHRlcnMgPSBuZXcgV2hlZWxGaWx0ZXJQcm92aWRlcih0aGlzLmdsb2JhbEZpbHRlcnMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2V0VmVoaWNsZSh2ZWhpY2xlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jbGVhckZpbHRlcnMoZmFsc2UpO1xuICAgICAgICAgICAgICAgIHRoaXMuZ2xvYmFsRmlsdGVycy5zZXRWZWhpY2xlKHZlaGljbGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2V0VmVoaWNsZURlc2NyaXB0aW9uKHZlaGljbGVEZXNjcmlwdGlvbikge1xuICAgICAgICAgICAgICAgIHRoaXMud2hlZWxGaWx0ZXJzLnNldFZlaGljbGVEZXNjcmlwdGlvbih2ZWhpY2xlRGVzY3JpcHRpb24pO1xuICAgICAgICAgICAgICAgIHRoaXMuZ2xvYmFsRmlsdGVycy5zZXRWZWhpY2xlRGVzY3JpcHRpb24odmVoaWNsZURlc2NyaXB0aW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNsZWFyRmlsdGVycyh0cmlnZ2VyQ2hhbmdlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5nbG9iYWxGaWx0ZXJzLmNsZWFyKHRyaWdnZXJDaGFuZ2UpO1xuICAgICAgICAgICAgICAgIHRoaXMudGlyZUZpbHRlcnMuY2xlYXIodHJpZ2dlckNoYW5nZSk7XG4gICAgICAgICAgICAgICAgdGhpcy53aGVlbEZpbHRlcnMuY2xlYXIodHJpZ2dlckNoYW5nZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZmlsdGVyc18xLkZpbHRlckNvbnRyb2xsZXIgPSBGaWx0ZXJDb250cm9sbGVyO1xuICAgICAgICBjbGFzcyBGaWx0ZXJQcm92aWRlciB7XG4gICAgICAgICAgICBjb25zdHJ1Y3Rvcih0eXBlLCBnbG9iYWxGaWx0ZXJQcm92aWRlcikge1xuICAgICAgICAgICAgICAgIHRoaXMudHlwZSA9IHR5cGU7XG4gICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50RmlsdGVycyA9IHt9O1xuICAgICAgICAgICAgICAgIHRoaXMuZ2xvYmFsRmlsdGVyUHJvdmlkZXIgPSBnbG9iYWxGaWx0ZXJQcm92aWRlcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogVHJpZ2dlciB0aGUgZmlsdGVyIGNoYW5nZWQgY2FsbGJhY2tcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgdHJpZ2dlckZpbHRlckNoYW5nZSgpIHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRoaXMub25GaWx0ZXJzQ2hhbmdlZCA9PT0gJ2Z1bmN0aW9uJylcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vbkZpbHRlcnNDaGFuZ2VkKHRoaXMuZ2V0RmlsdGVycygpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogUmV0dXJucyBhIGZpbHRlciBtb2RlbCB3aXRoIHRoZSBzcGVjaWZpZWQgZmlsdGVyIHZhbHVlcyBzZXQsXG4gICAgICAgICAgICAgKiB3aXRob3V0IGFjdHVhbGx5IHNldHRpbmcgdGhlbVxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBwcmV2aWV3RmlsdGVycyhmaWx0ZXJWYWx1ZXMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBnbG9iYWxGaWx0ZXJzID0gKHRoaXMuZ2xvYmFsRmlsdGVyUHJvdmlkZXIgP1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmdsb2JhbEZpbHRlclByb3ZpZGVyLmdldEZpbHRlcnMoKSA6XG4gICAgICAgICAgICAgICAgICAgIHt9KTtcbiAgICAgICAgICAgICAgICBjb25zdCBmaWx0ZXJzID0ge307XG4gICAgICAgICAgICAgICAgY29uc3QgYmFzZUZpbHRlcnMgPSB0aGlzLmJhc2VGaWx0ZXJzO1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgZmlsdGVyVmFsdWUgb2YgZmlsdGVyVmFsdWVzKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHsga2V5LCB2YWx1ZSB9ID0gZmlsdGVyVmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0RmlsdGVyKGtleSwgdmFsdWUsIGZpbHRlcnMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gUmlkZVN0eWxlclNob3djYXNlLk9iamVjdEhlbHBlci5hc3NpZ24oe30sIHRoaXMuYmFzZUZpbHRlcnMsIGdsb2JhbEZpbHRlcnMsIGZpbHRlcnMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBSZXR1cm5zIHRoZSBjdXJyZW50bHkgYXBwbGllZCBmaWx0ZXJzXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGdldEZpbHRlcnMoKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZ2xvYmFsRmlsdGVycyA9ICh0aGlzLmdsb2JhbEZpbHRlclByb3ZpZGVyID9cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5nbG9iYWxGaWx0ZXJQcm92aWRlci5nZXRGaWx0ZXJzKCkgOlxuICAgICAgICAgICAgICAgICAgICB7fSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFJpZGVTdHlsZXJTaG93Y2FzZS5PYmplY3RIZWxwZXIuYXNzaWduKHt9LCB0aGlzLmJhc2VGaWx0ZXJzLCBnbG9iYWxGaWx0ZXJzLCB0aGlzLmN1cnJlbnRGaWx0ZXJzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogUmV0cmlldmUgdGhlIG9wdGlvbnMgZm9yIGEgZmlsdGVyXG4gICAgICAgICAgICAgKiBAcGFyYW0gZmlsdGVyIFRoZSBmaWx0ZXJcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgcmV0cmlldmVPcHRpb25zKGZpbHRlcikge1xuICAgICAgICAgICAgICAgIHJldHVybiBmaWx0ZXIucmV0cmlldmVPcHRpb25zKHRoaXMuZ2xvYmFsRmlsdGVyUHJvdmlkZXIuZ2V0RmlsdGVycygpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogU2V0IGEgZmlsdGVyIG9wdGlvbiwgb24gYSBzcGVjaWZpYyBmaWx0ZXIgbW9kZWxcbiAgICAgICAgICAgICAqIEBwYXJhbSBrZXkgVGhlIGZpbHRlciBrZXkgdG8gYXBwbHlcbiAgICAgICAgICAgICAqIEBwYXJhbSB2YWx1ZSBUaGUgdmFsdWUgdG8gYXBwbHkgdG8gdGhlIGZpbHRlclxuICAgICAgICAgICAgICogQHBhcmFtIGZpbHRlcnMgVGhlIGZpbHRlcnMgdG8gYXBwbHkgdGhlbSB0b1xuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBzZXRGaWx0ZXIoa2V5LCB2YWx1ZSwgZmlsdGVycyA9IHRoaXMuY3VycmVudEZpbHRlcnMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBmaWx0ZXJPcHRpb24gPSB0aGlzLmZpbmRGaWx0ZXJPcHRpb24oa2V5KTtcbiAgICAgICAgICAgICAgICBpZiAoZmlsdGVyT3B0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIGZpbHRlck9wdGlvbi5hcHBseShmaWx0ZXJzLCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBSZXR1cm5zIHRoZSBmaWx0ZXIgb3B0aW9uIGZvciB0aGUgc3BlY2lmaWVkIGtleVxuICAgICAgICAgICAgICogQHBhcmFtIGtleSBUaGUgZmlsdGVyIGtleVxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBmaW5kRmlsdGVyT3B0aW9uKGtleSkge1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgZmlsdGVyIG9mIHRoaXMuZmlsdGVyT3B0aW9ucykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZmlsdGVyLmtleSA9PT0ga2V5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmlsdGVyO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzZXRGaWx0ZXJzKHNlbGVjdGVkRmlsdGVyc09yS2V5LCB2YWx1ZSwgdHJpZ2dlckNoYW5nZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG5ld0ZpbHRlcnMgPSB7fTtcbiAgICAgICAgICAgICAgICBsZXQgc2VsZWN0ZWRGaWx0ZXJzO1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygc2VsZWN0ZWRGaWx0ZXJzT3JLZXkgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkRmlsdGVycyA9IFt7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5OiBzZWxlY3RlZEZpbHRlcnNPcktleSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogdmFsdWVcbiAgICAgICAgICAgICAgICAgICAgICAgIH1dO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRGaWx0ZXJzID0gc2VsZWN0ZWRGaWx0ZXJzT3JLZXk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdib29sZWFuJylcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyaWdnZXJDaGFuZ2UgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBzZWxlY3RlZEZpbHRlciBvZiBzZWxlY3RlZEZpbHRlcnMpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgeyBrZXksIHZhbHVlIH0gPSBzZWxlY3RlZEZpbHRlcjtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRGaWx0ZXIoa2V5LCB2YWx1ZSwgbmV3RmlsdGVycyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGxldCBoYXNDaGFuZ2VkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gbmV3RmlsdGVycykge1xuICAgICAgICAgICAgICAgICAgICBpZiAobmV3RmlsdGVycy5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdGaWx0ZXJWYWx1ZSA9IG5ld0ZpbHRlcnNba2V5XTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRGaWx0ZXJWYWx1ZSA9IHRoaXMuY3VycmVudEZpbHRlcnNba2V5XTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuZXdGaWx0ZXJWYWx1ZSAhPT0gY3VycmVudEZpbHRlclZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50RmlsdGVyc1trZXldID0gbmV3RmlsdGVyVmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFzQ2hhbmdlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0cmlnZ2VyQ2hhbmdlID09PSAndW5kZWZpbmVkJylcbiAgICAgICAgICAgICAgICAgICAgdHJpZ2dlckNoYW5nZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgaWYgKGhhc0NoYW5nZWQgJiYgdHJpZ2dlckNoYW5nZSlcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50cmlnZ2VyRmlsdGVyQ2hhbmdlKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGhhc0NoYW5nZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjbGVhcih0cmlnZ2VyQ2hhbmdlID0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudEZpbHRlcnMgPSB7fTtcbiAgICAgICAgICAgICAgICBpZiAodHJpZ2dlckNoYW5nZSlcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50cmlnZ2VyRmlsdGVyQ2hhbmdlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZmlsdGVyc18xLkZpbHRlclByb3ZpZGVyID0gRmlsdGVyUHJvdmlkZXI7XG4gICAgICAgIGNvbnN0IHZlaGljbGVDb25maWdGaWx0ZXJLZXkgPSAndmVoaWNsZS1jb25maWcnO1xuICAgICAgICBjbGFzcyBHbG9iYWxGaWx0ZXJQcm92aWRlciBleHRlbmRzIEZpbHRlclByb3ZpZGVyIHtcbiAgICAgICAgICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICAgICAgICAgIHN1cGVyKCdnbG9iYWwnLCB1bmRlZmluZWQpO1xuICAgICAgICAgICAgICAgIHRoaXMuYmFzZUZpbHRlcnMgPSB7XG4gICAgICAgICAgICAgICAgICAgIEhhc0ZpdG1lbnRzOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBIYXNDYXRhbG9nSW1hZ2U6IHRydWVcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudEZpbHRlcnMgPSB7fTtcbiAgICAgICAgICAgICAgICB0aGlzLmZpbHRlck9wdGlvbnMgPSBbXG4gICAgICAgICAgICAgICAgICAgIC8vIFZlaGljbGVDb25maWd1cmF0aW9uICYgVmVoaWNsZVRpcmVPcHRpb25cbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAga2V5OiB2ZWhpY2xlQ29uZmlnRmlsdGVyS2V5LFxuICAgICAgICAgICAgICAgICAgICAgICAgdmlzaWJsZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBhcHBseTogKGZpbHRlcnMsIHZlaGljbGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgeyB2ZWhpY2xlQ29uZmlndXJhdGlvbklELCB2ZWhpY2xlVGlyZU9wdGlvbklEIH0gPSB2ZWhpY2xlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2ZWhpY2xlQ29uZmlndXJhdGlvbklEKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWx0ZXJzLlZlaGljbGVDb25maWd1cmF0aW9uID0gdmVoaWNsZUNvbmZpZ3VyYXRpb25JRDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodmVoaWNsZVRpcmVPcHRpb25JRClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsdGVycy5WZWhpY2xlVGlyZU9wdGlvbiA9IHZlaGljbGVUaXJlT3B0aW9uSUQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleTogJ2dsb2JhbFdoZWVsJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGFwcGx5OiAoZmlsdGVycywgdmVoaWNsZURlc2NyaXB0aW9uKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZlaGljbGVEZXNjcmlwdGlvbi5IYXNTaWRlSW1hZ2UgJiYgIXZlaGljbGVEZXNjcmlwdGlvbi5IYXNBbmdsZWRJbWFnZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsdGVycy5IYXNTaWRlSW1hZ2UgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2ZWhpY2xlRGVzY3JpcHRpb24uSGFzQW5nbGVkSW1hZ2UgJiYgIXZlaGljbGVEZXNjcmlwdGlvbi5IYXNTaWRlSW1hZ2UpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbHRlcnMuSGFzQW5nbGVkSW1hZ2UgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgKiBBcHBsaWVzIGEgdmVoaWNsZSBzZWxlY3Rpb24gdG8gYWxsXG4gICAgICAgICAgICAqIEBwYXJhbSB2ZWhpY2xlIFRoZSB2ZWhpY2xlIHRvIGFwcGx5IHRvIGZpbHRlciBxdWVyaWVzXG4gICAgICAgICAgICAqL1xuICAgICAgICAgICAgc2V0VmVoaWNsZURlc2NyaXB0aW9uKHZlaGljbGVEZXNjcmlwdGlvbikge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0RmlsdGVyKCdnbG9iYWxXaGVlbCcsIHZlaGljbGVEZXNjcmlwdGlvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzZXRWZWhpY2xlKHZlaGljbGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldEZpbHRlcih2ZWhpY2xlQ29uZmlnRmlsdGVyS2V5LCB2ZWhpY2xlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGdldENvdW50KCkge1xuICAgICAgICAgICAgICAgIC8vIFdlJ2xsIG5ldmVyIGNhbGwgZ2V0Q291bnQgb24gdGhlIEdsb2JhbEZpbHRlck1vZGVsXG4gICAgICAgICAgICAgICAgdGhyb3cgJ0Nhbm5vdCBjb3VudCBHbG9iYWxGaWx0ZXJNb2RlbCc7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZmlsdGVyc18xLkdsb2JhbEZpbHRlclByb3ZpZGVyID0gR2xvYmFsRmlsdGVyUHJvdmlkZXI7XG4gICAgICAgIGNsYXNzIFRpcmVGaWx0ZXJQcm92aWRlciBleHRlbmRzIEZpbHRlclByb3ZpZGVyIHtcbiAgICAgICAgICAgIGNvbnN0cnVjdG9yKGdsb2JhbEZpbHRlclByb3ZpZGVyKSB7XG4gICAgICAgICAgICAgICAgc3VwZXIoJ3RpcmUnLCBnbG9iYWxGaWx0ZXJQcm92aWRlcik7XG4gICAgICAgICAgICAgICAgdGhpcy5iYXNlRmlsdGVycyA9IHtcbiAgICAgICAgICAgICAgICAgICAgUmVxdWlyZWRGaXRtZW50UmVzb3VyY2VUeXBlczogW1xuICAgICAgICAgICAgICAgICAgICAgICAgMiAvKiBDYXRhbG9nICovXG4gICAgICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHRoaXMuZmlsdGVyT3B0aW9ucyA9IFtcbiAgICAgICAgICAgICAgICAgICAgLy8gQnJhbmRcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6IFJpZGVTdHlsZXJTaG93Y2FzZS5zdHJpbmdzLmdldFN0cmluZygnYnJhbmRzJyksXG4gICAgICAgICAgICAgICAgICAgICAgICB1bnNlbGVjdGVkT3B0aW9uTGFiZWw6IFJpZGVTdHlsZXJTaG93Y2FzZS5zdHJpbmdzLmdldFN0cmluZygnYWxsLWJyYW5kcycpLFxuICAgICAgICAgICAgICAgICAgICAgICAga2V5OiAndGlyZS1icmFuZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICByZXRyaWV2ZU9wdGlvbnM6IGdsb2JhbEZpbHRlcnMgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJlcXVlc3QgQnJhbmRzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFJpZGVTdHlsZXJTaG93Y2FzZS5Qcm9taXNlSGVscGVyLnRoZW4oUmlkZVN0eWxlclNob3djYXNlLmFwaS5yZXF1ZXN0KCd0aXJlL2dldGJyYW5kcycsIGdsb2JhbEZpbHRlcnMpLCByZXNwb25zZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE1hcCBicmFuZHMgdG8gSUZpbHRlck9wdGlvbnNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFJpZGVTdHlsZXJTaG93Y2FzZS5BcnJheUhlbHBlci5tYXAocmVzcG9uc2UuQnJhbmRzLCBicmFuZCA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiBicmFuZC5UaXJlQnJhbmROYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBicmFuZC5UaXJlQnJhbmRJRFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgZ2V0VmFsdWVGcm9tRmlsdGVyczogZmlsdGVycyA9PiBmaWx0ZXJzLlRpcmVCcmFuZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGFwcGx5OiAoZmlsdGVycywgdGlyZUJyYW5kSUQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWx0ZXJzLlRpcmVCcmFuZCA9IHRpcmVCcmFuZElEO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAvLyBBdHRyaWJ1dGVzXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiBSaWRlU3R5bGVyU2hvd2Nhc2Uuc3RyaW5ncy5nZXRTdHJpbmcoJ2ZlYXR1cmVzJyksXG4gICAgICAgICAgICAgICAgICAgICAgICB1bnNlbGVjdGVkT3B0aW9uTGFiZWw6IFJpZGVTdHlsZXJTaG93Y2FzZS5zdHJpbmdzLmdldFN0cmluZygnYW55LWZlYXR1cmVzJyksXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXk6ICd0aXJlLW1vZGVsLWF0dHJpYnV0ZScsXG4gICAgICAgICAgICAgICAgICAgICAgICByZXRyaWV2ZU9wdGlvbnM6IGdsb2JhbEZpbHRlcnMgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJlcXVlc3QgU3BlZWQgUmF0aW5nc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBSaWRlU3R5bGVyU2hvd2Nhc2UuUHJvbWlzZUhlbHBlci50aGVuKFJpZGVTdHlsZXJTaG93Y2FzZS5hcGkucmVxdWVzdCgndGlyZS9nZXRtb2RlbGF0dHJpYnV0ZXMnLCBnbG9iYWxGaWx0ZXJzKSwgcmVzcG9uc2UgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBNYXAgYnJhbmRzIHRvIElGaWx0ZXJPcHRpb25zXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBSaWRlU3R5bGVyU2hvd2Nhc2UuQXJyYXlIZWxwZXIubWFwKHJlc3BvbnNlLkF0dHJpYnV0ZXMsIGF0dHJpYnV0ZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiBhdHRyaWJ1dGUuVGlyZU1vZGVsQXR0cmlidXRlTmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogYXR0cmlidXRlLlRpcmVNb2RlbEF0dHJpYnV0ZUlEXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBnZXRWYWx1ZUZyb21GaWx0ZXJzOiBmaWx0ZXJzID0+IGZpbHRlcnMuUmVxdWlyZWRUaXJlTW9kZWxBdHRyaWJ1dGUsXG4gICAgICAgICAgICAgICAgICAgICAgICBhcHBseTogKGZpbHRlcnMsIGF0dHJpYnV0ZUlEKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsdGVycy5SZXF1aXJlZFRpcmVNb2RlbEF0dHJpYnV0ZSA9IGF0dHJpYnV0ZUlEO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAvLyBTcGVlZCBSYXRpbmdcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6IFJpZGVTdHlsZXJTaG93Y2FzZS5zdHJpbmdzLmdldFN0cmluZygnc3BlZWQtcmF0aW5nJyksXG4gICAgICAgICAgICAgICAgICAgICAgICB1bnNlbGVjdGVkT3B0aW9uTGFiZWw6IFJpZGVTdHlsZXJTaG93Y2FzZS5zdHJpbmdzLmdldFN0cmluZygnYW55LXNwZWVkLXJhdGluZ3MnKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleTogJ3RpcmUtc3BlZWQtcmF0aW5nJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHJpZXZlT3B0aW9uczogZ2xvYmFsRmlsdGVycyA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVxdWVzdCBTcGVlZCBSYXRpbmdzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFJpZGVTdHlsZXJTaG93Y2FzZS5Qcm9taXNlSGVscGVyLnRoZW4oUmlkZVN0eWxlclNob3djYXNlLmFwaS5yZXF1ZXN0KCd0aXJlL2dldHNwZWVkcmF0aW5ncycsIGdsb2JhbEZpbHRlcnMpLCByZXNwb25zZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE1hcCBicmFuZHMgdG8gSUZpbHRlck9wdGlvbnNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFJpZGVTdHlsZXJTaG93Y2FzZS5BcnJheUhlbHBlci5tYXAocmVzcG9uc2UuU3BlZWRSYXRpbmdzLCBicmFuZCA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiBicmFuZC5UaXJlU3BlZWRSYXRpbmdDb2RlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBicmFuZC5UaXJlU3BlZWRSYXRpbmdJRFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgZ2V0VmFsdWVGcm9tRmlsdGVyczogZmlsdGVycyA9PiBmaWx0ZXJzLlNwZWVkUmF0aW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgYXBwbHk6IChmaWx0ZXJzLCBzcGVlZFJhdGluZ0lEKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsdGVycy5TcGVlZFJhdGluZyA9IHNwZWVkUmF0aW5nSUQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZ2V0Q291bnQoZmlsdGVycykge1xuICAgICAgICAgICAgICAgIHJldHVybiBSaWRlU3R5bGVyU2hvd2Nhc2UuUHJvbWlzZUhlbHBlci50aGVuKFJpZGVTdHlsZXJTaG93Y2FzZS5hcGkucmVxdWVzdChcInRpcmUvY291bnRtb2RlbHNcIiwgZmlsdGVycyksIHJlc3BvbnNlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLkNvdW50O1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZpbHRlcnNfMS5UaXJlRmlsdGVyUHJvdmlkZXIgPSBUaXJlRmlsdGVyUHJvdmlkZXI7XG4gICAgICAgIGNsYXNzIFdoZWVsRmlsdGVyUHJvdmlkZXIgZXh0ZW5kcyBGaWx0ZXJQcm92aWRlciB7XG4gICAgICAgICAgICBjb25zdHJ1Y3RvcihnbG9iYWxGaWx0ZXJQcm92aWRlcikge1xuICAgICAgICAgICAgICAgIHN1cGVyKCd3aGVlbCcsIGdsb2JhbEZpbHRlclByb3ZpZGVyKTtcbiAgICAgICAgICAgICAgICB0aGlzLmZpbHRlck9wdGlvbnMgPSBbXG4gICAgICAgICAgICAgICAgICAgIC8vIEJyYW5kXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiBSaWRlU3R5bGVyU2hvd2Nhc2Uuc3RyaW5ncy5nZXRTdHJpbmcoJ2JyYW5kcycpLFxuICAgICAgICAgICAgICAgICAgICAgICAgdW5zZWxlY3RlZE9wdGlvbkxhYmVsOiBSaWRlU3R5bGVyU2hvd2Nhc2Uuc3RyaW5ncy5nZXRTdHJpbmcoJ2FsbC1icmFuZHMnKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleTogJ3doZWVsLWJyYW5kJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHJpZXZlT3B0aW9uczogZ2xvYmFsRmlsdGVycyA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVxdWVzdCBCcmFuZHNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gUmlkZVN0eWxlclNob3djYXNlLlByb21pc2VIZWxwZXIudGhlbihSaWRlU3R5bGVyU2hvd2Nhc2UuYXBpLnJlcXVlc3QoJ3doZWVsL2dldGJyYW5kcycsIGdsb2JhbEZpbHRlcnMpLCByZXNwb25zZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE1hcCBicmFuZHMgdG8gSUZpbHRlck9wdGlvbnNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFJpZGVTdHlsZXJTaG93Y2FzZS5BcnJheUhlbHBlci5tYXAocmVzcG9uc2UuQnJhbmRzLCBicmFuZCA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiBicmFuZC5XaGVlbEJyYW5kTmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogYnJhbmQuV2hlZWxCcmFuZElEXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBnZXRWYWx1ZUZyb21GaWx0ZXJzOiBmaWx0ZXJzID0+IGZpbHRlcnMuV2hlZWxCcmFuZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGFwcGx5OiAoZmlsdGVycywgd2hlZWxCcmFuZElEKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsdGVycy5XaGVlbEJyYW5kID0gd2hlZWxCcmFuZElEO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAvLyBGaW5pc2hcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6IFJpZGVTdHlsZXJTaG93Y2FzZS5zdHJpbmdzLmdldFN0cmluZygnZmluaXNoZXMnKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHVuc2VsZWN0ZWRPcHRpb25MYWJlbDogUmlkZVN0eWxlclNob3djYXNlLnN0cmluZ3MuZ2V0U3RyaW5nKCdhbGwtZmluaXNoZXMnKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleTogJ3doZWVsLWZpbmlzaCcsXG4gICAgICAgICAgICAgICAgICAgICAgICByZXRyaWV2ZU9wdGlvbnM6IGdsb2JhbEZpbHRlcnMgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJlcXVlc3QgZmluaXNoZXNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gUmlkZVN0eWxlclNob3djYXNlLlByb21pc2VIZWxwZXIudGhlbihSaWRlU3R5bGVyU2hvd2Nhc2UuYXBpLnJlcXVlc3QoJ3doZWVsL2dldGZpbmlzaGVzJywgZ2xvYmFsRmlsdGVycyksIHJlc3BvbnNlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTWFwIGZpbmlzaGVzIHRvIElGaWx0ZXJPcHRpb25zXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBSaWRlU3R5bGVyU2hvd2Nhc2UuQXJyYXlIZWxwZXIubWFwKHJlc3BvbnNlLkZpbmlzaGVzLCBmaW5pc2hDYXRlZ29yeSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiBmaW5pc2hDYXRlZ29yeS5XaGVlbEZpbmlzaENhdGVnb3J5TmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogZmluaXNoQ2F0ZWdvcnkuV2hlZWxGaW5pc2hDYXRlZ29yeUlEXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBnZXRWYWx1ZUZyb21GaWx0ZXJzOiBmaWx0ZXJzID0+IGZpbHRlcnMuV2hlZWxGaW5pc2hDYXRlZ29yeSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGFwcGx5OiAoZmlsdGVycywgd2hlZWxGaW5pc2hDYXRlZ29yeUlEKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsdGVycy5XaGVlbEZpbmlzaENhdGVnb3J5ID0gd2hlZWxGaW5pc2hDYXRlZ29yeUlEO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAvLyBEaWFtZXRlclxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogUmlkZVN0eWxlclNob3djYXNlLnN0cmluZ3MuZ2V0U3RyaW5nKCdzaXplcycpLFxuICAgICAgICAgICAgICAgICAgICAgICAgdW5zZWxlY3RlZE9wdGlvbkxhYmVsOiBSaWRlU3R5bGVyU2hvd2Nhc2Uuc3RyaW5ncy5nZXRTdHJpbmcoJ2FsbC1zaXplcycpLFxuICAgICAgICAgICAgICAgICAgICAgICAga2V5OiAnd2hlZWwtc2l6ZScsXG4gICAgICAgICAgICAgICAgICAgICAgICByZXRyaWV2ZU9wdGlvbnM6IGdsb2JhbEZpbHRlcnMgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJlcXVlc3QgZGlhbWV0ZXJzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFJpZGVTdHlsZXJTaG93Y2FzZS5Qcm9taXNlSGVscGVyLnRoZW4oUmlkZVN0eWxlclNob3djYXNlLmFwaS5yZXF1ZXN0KCd3aGVlbC9nZXRkaWFtZXRlcnMnLCBnbG9iYWxGaWx0ZXJzKSwgcmVzcG9uc2UgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBNYXAgZGlhbWV0ZXJzIHRvIElGaWx0ZXJPcHRpb25zXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBSaWRlU3R5bGVyU2hvd2Nhc2UuQXJyYXlIZWxwZXIubWFwKHJlc3BvbnNlLkRpYW1ldGVycywgZGlhbWV0ZXIgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogZGlhbWV0ZXIudG9TdHJpbmcoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogZGlhbWV0ZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGdldFZhbHVlRnJvbUZpbHRlcnM6IGZpbHRlcnMgPT4gZ2V0Rml0bWVudEZpbHRlclZhbHVlKGZpbHRlcnMsICdEaWFtZXRlcicpLFxuICAgICAgICAgICAgICAgICAgICAgICAgYXBwbHk6IChmaWx0ZXJzLCBkaWFtZXRlcikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZmlsdGVycy5GaXRtZW50RmlsdGVycylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsdGVycy5GaXRtZW50RmlsdGVycyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFwcGx5Rml0bWVudEZpbHRlcihmaWx0ZXJzLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERpYW1ldGVyOiBkaWFtZXRlclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBrZXk6ICd3aGVlbCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBhcHBseTogKGZpbHRlcnMsIHZlaGljbGVEZXNjcmlwdGlvbikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2ZWhpY2xlRGVzY3JpcHRpb24uSGFzU2lkZUltYWdlICYmICF2ZWhpY2xlRGVzY3JpcHRpb24uSGFzQW5nbGVkSW1hZ2UpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbHRlcnMuSGFzU2lkZUltYWdlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodmVoaWNsZURlc2NyaXB0aW9uLkhhc0FuZ2xlZEltYWdlICYmICF2ZWhpY2xlRGVzY3JpcHRpb24uSGFzU2lkZUltYWdlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWx0ZXJzLkhhc0FuZ2xlZEltYWdlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIF07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzZXRWZWhpY2xlRGVzY3JpcHRpb24odmVoaWNsZURlc2NyaXB0aW9uKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRGaWx0ZXIoJ3doZWVsJywgdmVoaWNsZURlc2NyaXB0aW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGdldENvdW50KGZpbHRlcnMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gUmlkZVN0eWxlclNob3djYXNlLlByb21pc2VIZWxwZXIudGhlbihSaWRlU3R5bGVyU2hvd2Nhc2UuYXBpLnJlcXVlc3QoXCJ3aGVlbC9jb3VudG1vZGVsc1wiLCBmaWx0ZXJzKSwgcmVzcG9uc2UgPT4ge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuQ291bnQ7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZmlsdGVyc18xLldoZWVsRmlsdGVyUHJvdmlkZXIgPSBXaGVlbEZpbHRlclByb3ZpZGVyO1xuICAgICAgICBmdW5jdGlvbiBnZXRGaXRtZW50RmlsdGVyVmFsdWUoZmlsdGVycywga2V5KSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGZpdG1lbnRGaWx0ZXIgb2YgZmlsdGVycy5GaXRtZW50RmlsdGVycyB8fCBbXSkge1xuICAgICAgICAgICAgICAgIGlmIChmaXRtZW50RmlsdGVyLkdyb3VwS2V5ID09PSBmaXRtZW50RmlsdGVyR3JvdXBLZXkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZpdG1lbnRGaWx0ZXJba2V5XTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGZpdG1lbnRGaWx0ZXJHcm91cEtleSA9IFwicmlkZXN0eWxlci1zaG93Y2FzZS1maWx0ZXJzXCI7XG4gICAgICAgIGZ1bmN0aW9uIGFwcGx5Rml0bWVudEZpbHRlcihmaWx0ZXJzLCBmaXRtZW50RmlsdGVyKSB7XG4gICAgICAgICAgICBsZXQgZml0bWVudEZpbHRlcnMgPSBmaWx0ZXJzLkZpdG1lbnRGaWx0ZXJzIHx8IFtdO1xuICAgICAgICAgICAgbGV0IGV4aXN0aW5nRml0bWVudEZpbHRlckdyb3VwO1xuICAgICAgICAgICAgZm9yIChjb25zdCBhcHBsaWVkRml0bWVudEZpbHRlciBvZiBmaXRtZW50RmlsdGVycykge1xuICAgICAgICAgICAgICAgIGlmIChhcHBsaWVkRml0bWVudEZpbHRlci5Hcm91cEtleSA9PT0gZml0bWVudEZpbHRlckdyb3VwS2V5KSB7XG4gICAgICAgICAgICAgICAgICAgIGV4aXN0aW5nRml0bWVudEZpbHRlckdyb3VwID0gYXBwbGllZEZpdG1lbnRGaWx0ZXI7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghZXhpc3RpbmdGaXRtZW50RmlsdGVyR3JvdXApIHtcbiAgICAgICAgICAgICAgICBmaXRtZW50RmlsdGVyLkdyb3VwS2V5ID0gZml0bWVudEZpbHRlckdyb3VwS2V5O1xuICAgICAgICAgICAgICAgIGZpdG1lbnRGaWx0ZXJzLnB1c2goZml0bWVudEZpbHRlcik7XG4gICAgICAgICAgICAgICAgLy8gV2UndmUgbW9kaWZpZWQgdGhlIGFycmF5IHNvIHVwZGF0ZSB0aGUgYXJyYXkgaW4gdGhlIGZpbHRlcnNcbiAgICAgICAgICAgICAgICBmaWx0ZXJzLkZpdG1lbnRGaWx0ZXJzID0gZml0bWVudEZpbHRlcnM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBSaWRlU3R5bGVyU2hvd2Nhc2UuT2JqZWN0SGVscGVyLmFzc2lnbihleGlzdGluZ0ZpdG1lbnRGaWx0ZXJHcm91cCwgZml0bWVudEZpbHRlcik7XG4gICAgICAgICAgICAgICAgZXhpc3RpbmdGaXRtZW50RmlsdGVyR3JvdXAuR3JvdXBLZXkgPSBmaXRtZW50RmlsdGVyR3JvdXBLZXk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KShmaWx0ZXJzID0gUmlkZVN0eWxlclNob3djYXNlLmZpbHRlcnMgfHwgKFJpZGVTdHlsZXJTaG93Y2FzZS5maWx0ZXJzID0ge30pKTtcbn0pKFJpZGVTdHlsZXJTaG93Y2FzZSB8fCAoUmlkZVN0eWxlclNob3djYXNlID0ge30pKTtcbiIsIm5hbWVzcGFjZSBSaWRlU3R5bGVyU2hvd2Nhc2Uge1xyXG4gICAgZXhwb3J0IGVudW0gU3RhdGVzIHtcclxuICAgICAgICBDaG9vc2VWZWhpY2xlID0gMCxcclxuICAgICAgICBWaXN1YWxpemUgPSAxXHJcbiAgICB9XHJcbn1cclxubmFtZXNwYWNlIFJpZGVTdHlsZXJTaG93Y2FzZS5zdGF0ZSB7XHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIFN0YXRlQ2hhbmdlZEV2ZW50IHtcclxuICAgICAgICBvbGRTdGF0ZTogU3RhdGVzO1xyXG4gICAgICAgIG5ld1N0YXRlOiBTdGF0ZXM7XHJcbiAgICAgICAgbmV3RGF0YTogU3RhdGVEYXRhXHJcbiAgICB9XHJcblxyXG4gICAgZXhwb3J0IGludGVyZmFjZSBTdGF0ZUNoYW5nZWRDYWxsYmFjayB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQHBhcmFtIGV2ZW50ICBUaGUgc3RhdGUgY2hhbmdlZCBldmVudFxyXG4gICAgICAgICAqIEByZXR1cm4gICAgICAgSWYgcmV0dXJuaW5nIGZhbHNlLCBjYW5jZWwgdGhlIHN0YXRlIGNoYW5nZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIChldmVudDpTdGF0ZUNoYW5nZWRFdmVudCk6IGJvb2xlYW47XHJcbiAgICB9XHJcblxyXG4gICAgZXhwb3J0IGludGVyZmFjZSBTdGF0ZUNoYW5nZWRDYWxsYmFjayB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQHBhcmFtIGV2ZW50ICBUaGUgc3RhdGUgY2hhbmdlZCBldmVudFxyXG4gICAgICAgICAqIEByZXR1cm4gICAgICAgSWYgcmV0dXJuaW5nIGZhbHNlLCBjYW5jZWwgdGhlIHN0YXRlIGNoYW5nZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIChldmVudDpTdGF0ZUNoYW5nZWRFdmVudCk6IGJvb2xlYW47XHJcbiAgICB9XHJcblxyXG4gICAgZXhwb3J0IGludGVyZmFjZSBEZWJ1Z1N0YXRlQ2FsbGJhY2sge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBwYXJhbSBldmVudCAgICBUaGUgc3RhdGUgY2hhbmdlZCBldmVudFxyXG4gICAgICAgICAqIEBwYXJhbSBmaW5pc2hlZCBJZiBmYWxzZSwgdGhlIHN0YXRlIGNoYW5nZSBpcyBiZWdpbm5pbmcsIG90aGVyd2lzZSB0aGUgc3RhdGUgY2hhbmdlXHJcbiAgICAgICAgICogICAgICAgICAgICAgICAgIGhhcyBmaW5pc2hlZFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIChldmVudDpTdGF0ZUNoYW5nZWRFdmVudCwgZmluaXNoZWQ6Ym9vbGVhbik6IHZvaWQ7XHJcbiAgICB9XHJcblxyXG4gICAgZXhwb3J0IGludGVyZmFjZSBTdGF0ZUV4aXRDYWxsYmFjayB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQHBhcmFtIGN1cnJlbnRTdGF0ZSAgVGhlIHN0YXRlIGJlaW5nIGNoYW5nZWQgZnJvbVxyXG4gICAgICAgICAqIEBwYXJhbSBuZXdTdGF0ZSAgICAgIFRoZSBzdGF0ZSBiZWluZyBjaGFuZ2VkIHRvXHJcbiAgICAgICAgICogQHJldHVybiAgICAgICAgICAgICAgSWYgcmV0dXJuaW5nIGZhbHNlLCBjYW5jZWwgdGhlIHN0YXRlIGNoYW5nZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIChjdXJyZW50U3RhdGU6U3RhdGVzLCBuZXdTdGF0ZTpTdGF0ZXMsIG5ld0RhdGE6U3RhdGVEYXRhKTogYm9vbGVhbjtcclxuICAgIH1cclxuXHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIFN0YXRlRW50ZXJDYWxsYmFjayB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQHBhcmFtIG9sZFN0YXRlICAgICAgVGhlIHN0YXRlIGJlaW5nIGNoYW5nZWQgZnJvbVxyXG4gICAgICAgICAqIEBwYXJhbSBjdXJyZW50U3RhdGUgIFRoZSBzdGF0ZSBiZWluZyBjaGFuZ2VkIHRvXHJcbiAgICAgICAgICogQHJldHVybiAgICAgICAgICAgICAgSWYgcmV0dXJuaW5nIGZhbHNlLCBjYW5jZWwgdGhlIHN0YXRlIGNoYW5nZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIChvbGRTdGF0ZTpTdGF0ZXMsIGN1cnJlbnRTdGF0ZTpTdGF0ZXMsIG5ld0RhdGE6U3RhdGVEYXRhKTogYm9vbGVhbjtcclxuICAgIH1cclxuXHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIFN0YXRlRGF0YUNoYW5nZWRDYWxsYmFjayB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQHBhcmFtIG5ld0RhdGEgVGhlIG5ldyBzdGF0ZSBkYXRhXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgKG5ld0RhdGE6U3RhdGVEYXRhKTogdm9pZDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEEgcmVnaXN0ZXIgaG9sZGluZyB0aGUgZXhpdC9lbnRlciBjYWxsYmFja3MgZm9yIGEgc3BlY2lmaWMgc3RhdGVcclxuICAgICAqL1xyXG4gICAgY2xhc3MgU3RhdGVDYWxsYmFja1JlZ2lzdGVyIHtcclxuICAgICAgICBzdGF0ZTpTdGF0ZXM7XHJcbiAgICAgICAgZXhpdENhbGxiYWNrczogU3RhdGVFeGl0Q2FsbGJhY2tbXTtcclxuICAgICAgICBlbnRlckNhbGxiYWNrczogU3RhdGVFbnRlckNhbGxiYWNrW107XHJcblxyXG4gICAgICAgIGNvbnN0cnVjdG9yKHN0YXRlOlN0YXRlcykge1xyXG4gICAgICAgICAgICB0aGlzLnN0YXRlID0gc3RhdGU7XHJcbiAgICAgICAgICAgIHRoaXMuZXhpdENhbGxiYWNrcyA9IFtdO1xyXG4gICAgICAgICAgICB0aGlzLmVudGVyQ2FsbGJhY2tzID0gW107XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBUcmlnZ2VyIGFsbCBvZiB0aGUgZXhpdCBjYWxsYmFja3MgZm9yIHRoaXMgc3RhdGUuIElmIGEgY2FsbGJhY2sgcmV0dXJucyBmYWxzZSxcclxuICAgICAgICAgKiBza2lwIHRyaWdnZXJpbmcgdGhlIHJlbWFpbmluZyBjYWxsYmFja3MgYW5kIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgKi9cclxuICAgICAgICB0cmlnZ2VyRXhpdENhbGxiYWNrcyhjdXJyZW50U3RhdGU6U3RhdGVzLCBuZXdTdGF0ZTpTdGF0ZXMsIG5ld0RhdGE6U3RhdGVEYXRhKSA6IGJvb2xlYW4ge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBleGl0Q2FsbGJhY2sgb2YgdGhpcy5leGl0Q2FsbGJhY2tzKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZXhpdENhbGxiYWNrKGN1cnJlbnRTdGF0ZSwgbmV3U3RhdGUsIG5ld0RhdGEpID09PSBmYWxzZSlcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBUcmlnZ2VyIGFsbCBvZiB0aGUgZW50ZXIgY2FsbGJhY2tzIGZvciB0aGlzIHN0YXRlLiBJZiBhIGNhbGxiYWNrIHJldHVybnMgZmFsc2UsXHJcbiAgICAgICAgICogc2tpcCB0cmlnZ2VyaW5nIHRoZSByZW1haW5pbmcgY2FsbGJhY2tzIGFuZCByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdHJpZ2dlckVudGVyQ2FsbGJhY2tzKG9sZFN0YXRlOlN0YXRlcywgY3VycmVudFN0YXRlOlN0YXRlcywgbmV3RGF0YTpTdGF0ZURhdGEpIDogYm9vbGVhbiB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGVudGVyQ2FsbGJhY2sgb2YgdGhpcy5lbnRlckNhbGxiYWNrcykge1xyXG4gICAgICAgICAgICAgICAgaWYgKGVudGVyQ2FsbGJhY2sob2xkU3RhdGUsIGN1cnJlbnRTdGF0ZSwgbmV3RGF0YSkgPT09IGZhbHNlKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgU3RhdGVEYXRhIHtcclxuICAgICAgICBjdXJyZW50VmVoaWNsZUNvbmZpZ3VyYXRpb25JRDogc3RyaW5nO1xyXG4gICAgICAgIGN1cnJlbnRWZWhpY2xlRGVzY3JpcHRpb246IHN0cmluZztcclxuICAgICAgICBjdXJyZW50VmVoaWNsZURlc2NyaXB0aW9uTW9kZWw6IHJpZGVzdHlsZXIuRGVzY3JpcHRpb25zLlZlaGljbGVEZXNjcmlwdGlvbk1vZGVsO1xyXG5cclxuICAgICAgICBjdXJyZW50VmVoaWNsZVRpcmVPcHRpb25JRDogc3RyaW5nO1xyXG4gICAgICAgIGN1cnJlbnRWZWhpY2xlVGlyZU9wdGlvbkRlc2NyaXB0aW9uOiBzdHJpbmc7XHJcblxyXG4gICAgICAgIHZlaGljbGVIYXNTaWRlSW1hZ2U6IGJvb2xlYW47XHJcbiAgICAgICAgdmVoaWNsZUhhc0FuZ2xlZEltYWdlOiBib29sZWFuO1xyXG5cclxuICAgICAgICBjdXJyZW50UGFpbnRTY2hlbWU6IHJpZGVzdHlsZXIuRGVzY3JpcHRpb25zLlZlaGljbGVQYWludFNjaGVtZURlc2NyaXB0aW9uTW9kZWw7XHJcbiAgICAgICAgY3VycmVudFdoZWVsOiByaWRlc3R5bGVyLkRlc2NyaXB0aW9ucy5XaGVlbE1vZGVsRGVzY3JpcHRpb25Nb2RlbDtcclxuICAgICAgICBjdXJyZW50V2hlZWxGaXRtZW50OiByaWRlc3R5bGVyLkRlc2NyaXB0aW9ucy5XaGVlbEZpdG1lbnREZXNjcmlwdGlvbk1vZGVsO1xyXG4gICAgICAgIGN1cnJlbnRUaXJlOiByaWRlc3R5bGVyLkRlc2NyaXB0aW9ucy5UaXJlTW9kZWxEZXNjcmlwdGlvbk1vZGVsO1xyXG4gICAgICAgIGN1cnJlbnRUaXJlT3B0aW9uOiByaWRlc3R5bGVyLkRlc2NyaXB0aW9ucy5WZWhpY2xlVGlyZU9wdGlvbkRlc2NyaXB0aW9uTW9kZWw7XHJcbiAgICB9XHJcblxyXG4gICAgZXhwb3J0IHR5cGUgUGFydGlhbFN0YXRlRGF0YSA9IHtcclxuICAgICAgICBbUCBpbiBrZXlvZiBTdGF0ZURhdGFdPzogU3RhdGVEYXRhW1BdO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBleHBvcnQgY2xhc3MgUmlkZVN0eWxlclNob3djYXNlU3RhdGUge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFRoZSBjdXJyZW50IHN0YXRlXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIGN1cnJlbnRTdGF0ZTpTdGF0ZXM7XHJcblxyXG4gICAgICAgIGNvbnN0cnVjdG9yIChpbml0aWFsU3RhdGU6U3RhdGVzKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY3VycmVudFN0YXRlID0gaW5pdGlhbFN0YXRlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBjdXJyZW50RGF0YTpTdGF0ZURhdGEgPSB7XHJcbiAgICAgICAgICAgIGN1cnJlbnRWZWhpY2xlQ29uZmlndXJhdGlvbklEOiB1bmRlZmluZWQsXHJcbiAgICAgICAgICAgIGN1cnJlbnRWZWhpY2xlRGVzY3JpcHRpb246IHVuZGVmaW5lZCxcclxuICAgICAgICAgICAgdmVoaWNsZUhhc0FuZ2xlZEltYWdlOiB1bmRlZmluZWQsXHJcbiAgICAgICAgICAgIHZlaGljbGVIYXNTaWRlSW1hZ2U6IHVuZGVmaW5lZCxcclxuICAgICAgICAgICAgY3VycmVudFZlaGljbGVUaXJlT3B0aW9uRGVzY3JpcHRpb246IHVuZGVmaW5lZCxcclxuICAgICAgICAgICAgY3VycmVudFZlaGljbGVUaXJlT3B0aW9uSUQ6IHVuZGVmaW5lZCxcclxuICAgICAgICAgICAgY3VycmVudFBhaW50U2NoZW1lOiB1bmRlZmluZWQsXHJcbiAgICAgICAgICAgIGN1cnJlbnRUaXJlOiB1bmRlZmluZWQsXHJcbiAgICAgICAgICAgIGN1cnJlbnRXaGVlbDogdW5kZWZpbmVkLFxyXG4gICAgICAgICAgICBjdXJyZW50V2hlZWxGaXRtZW50OiB1bmRlZmluZWQsXHJcbiAgICAgICAgICAgIGN1cnJlbnRUaXJlT3B0aW9uOiB1bmRlZmluZWQsXHJcbiAgICAgICAgICAgIGN1cnJlbnRWZWhpY2xlRGVzY3JpcHRpb25Nb2RlbDogdW5kZWZpbmVkXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgcHVibGljIGdldERhdGEoKSB7IHJldHVybiB0aGlzLmN1cnJlbnREYXRhOyB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzZXREYXRhKG5ld0RhdGE6U3RhdGVEYXRhKSB7XHJcbiAgICAgICAgICAgIGxldCBiZWZvcmVDYWxsYmFja3M6U3RhdGVEYXRhQ2hhbmdlZENhbGxiYWNrW10gPSBbXSxcclxuICAgICAgICAgICAgICAgIGFmdGVyQ2FsbGJhY2tzOlN0YXRlRGF0YUNoYW5nZWRDYWxsYmFja1tdID0gW107XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBmb3IgKGxldCBkYXRhQ2hhbmdlZENhbGxiYWNrIG9mIHRoaXMuZGF0YUNoYW5nZWRDYWxsYmFja3MpIHtcclxuICAgICAgICAgICAgICAgIGxldCB7Y2FsbGJhY2ssIGJlZm9yZX0gPSBkYXRhQ2hhbmdlZENhbGxiYWNrO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChiZWZvcmUpIGJlZm9yZUNhbGxiYWNrcy5wdXNoKGNhbGxiYWNrKTtcclxuICAgICAgICAgICAgICAgIGVsc2UgYWZ0ZXJDYWxsYmFja3MucHVzaChjYWxsYmFjayk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZvciAobGV0IGNhbGxiYWNrIG9mIGJlZm9yZUNhbGxiYWNrcylcclxuICAgICAgICAgICAgICAgIGNhbGxiYWNrKG5ld0RhdGEpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5jdXJyZW50RGF0YSA9IG5ld0RhdGE7XHJcbiAgICAgICAgXHJcbiAgICAgICAgICAgIGZvciAobGV0IGNhbGxiYWNrIG9mIGFmdGVyQ2FsbGJhY2tzKVxyXG4gICAgICAgICAgICAgICAgY2FsbGJhY2sodGhpcy5jdXJyZW50RGF0YSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1YmxpYyBleHRlbmREYXRhKGRhdGFFeHRlbnNpb246UGFydGlhbFN0YXRlRGF0YSk6IFN0YXRlRGF0YSB7XHJcbiAgICAgICAgICAgIGxldCBoYXNDaGFuZ2VkOiBib29sZWFuID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGxldCBuZXdEYXRhOiBQYXJ0aWFsU3RhdGVEYXRhID0ge307IFxyXG4gICAgICAgICAgICBsZXQgY3VycmVudERhdGE6IFN0YXRlRGF0YSA9IHRoaXMuY3VycmVudERhdGE7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGxldCBrZXkgaW4gY3VycmVudERhdGEpIHtcclxuICAgICAgICAgICAgICAgIGlmIChjdXJyZW50RGF0YS5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGN1cnJlbnRWYWx1ZSA9IGN1cnJlbnREYXRhW2tleV07XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IG5ld1ZhbHVlID0gZGF0YUV4dGVuc2lvbltrZXldO1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChrZXkgaW4gZGF0YUV4dGVuc2lvbiAmJiBjdXJyZW50VmFsdWUgIT09IG5ld1ZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhhc0NoYW5nZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdEYXRhW2tleV0gPSBuZXdWYWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdEYXRhW2tleV0gPSBjdXJyZW50VmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoaGFzQ2hhbmdlZCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXREYXRhKG5ld0RhdGEgYXMgU3RhdGVEYXRhKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY3VycmVudERhdGE7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBBIGRpY3Rpb25hcnkgb2YgU3RhdGVzIHRvIFN0YXRlQ2FsbGJhY2tSZWdpc3RlcnNcclxuICAgICAgICAgKi9cclxuICAgICAgICBwcml2YXRlIGNhbGxiYWNrczoge1tzdGF0ZTogbnVtYmVyXTogU3RhdGVDYWxsYmFja1JlZ2lzdGVyfSA9IHt9O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBTdGF0ZSBjaGFuZ2VkIGNhbGxiYWNrc1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHByaXZhdGUgY2hhbmdlQ2FsbGJhY2tzOlN0YXRlQ2hhbmdlZENhbGxiYWNrW10gPSBbXTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogRGF0YSBjaGFuZ2VkIGNhbGxiYWNrc1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHByaXZhdGUgZGF0YUNoYW5nZWRDYWxsYmFja3M6e2NhbGxiYWNrOlN0YXRlRGF0YUNoYW5nZWRDYWxsYmFjaywgYmVmb3JlOmJvb2xlYW59W10gPSBbXTtcclxuICAgIFxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFJldHVybnMgYW4gZXhpdGluZyBjYWxsYmFjayByZWdpc3RlciBmb3IgdGhlIHNwZWNpZmllZCBzdGF0ZSBvciBjcmVhdGVzXHJcbiAgICAgICAgICogYSBuZXcgb25lXHJcbiAgICAgICAgICogQHBhcmFtIHN0YXRlIFRoZSBzdGF0ZSB0byByZXR1cm4gYSBjYWxsYmFjayByZWdpc3RlciBmb3JcclxuICAgICAgICAgKi9cclxuICAgICAgICBwcml2YXRlIGNhbGxiYWNrc0ZvclN0YXRlKHN0YXRlOiBTdGF0ZXMpOlN0YXRlQ2FsbGJhY2tSZWdpc3RlclxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYgKHN0YXRlIGluIHRoaXMuY2FsbGJhY2tzKSByZXR1cm4gdGhpcy5jYWxsYmFja3Nbc3RhdGVdO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jYWxsYmFja3Nbc3RhdGVdID0gbmV3IFN0YXRlQ2FsbGJhY2tSZWdpc3RlcihzdGF0ZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBSZWdpc3RlciBhIGNhbGxiYWNrIHRoYXQgaXMgdHJpZ2dlcmVkIHdoZW4gZXhpdGluZyBhIHNwZWNpZmljIHN0YXRlXHJcbiAgICAgICAgICogQHBhcmFtIHN0YXRlIFRoZSBzdGF0ZSB0byByZWdpc3RlciBhIGV4aXQgY2FsbGJhY2sgZm9yXHJcbiAgICAgICAgICogQHBhcmFtIGNhbGxiYWNrIFRoZSBjYWxsYmFjayB0byBleGVjdXRlIHdoZW4gZXhpdGluZyB0aGUgc3RhdGVcclxuICAgICAgICAgKi9cclxuICAgICAgICBvbkV4aXQgKHN0YXRlOlN0YXRlcywgY2FsbGJhY2s6U3RhdGVFeGl0Q2FsbGJhY2spIHtcclxuICAgICAgICAgICAgdGhpcy5jYWxsYmFja3NGb3JTdGF0ZShzdGF0ZSkuZXhpdENhbGxiYWNrcy5wdXNoKGNhbGxiYWNrKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFJlZ2lzdGVyIGEgY2FsbGJhY2sgdGhhdCBpcyB0cmlnZ2VyZWQgd2hlbiBlbnRlcmluZyBhIHNwZWNpZmljIHN0YXRlXHJcbiAgICAgICAgICogQHBhcmFtIHN0YXRlIFRoZSBzdGF0ZSB0byByZWdpc3RlciBhbiBlbnRlciBjYWxsYmFjayBmb3JcclxuICAgICAgICAgKiBAcGFyYW0gY2FsbGJhY2sgVGhlIGNhbGxiYWNrIHRvIGV4ZWN1dGUgd2hlbiBlbnRlcmluZyB0aGUgc3RhdGVcclxuICAgICAgICAgKi9cclxuICAgICAgICBvbkVudGVyKHN0YXRlOlN0YXRlcywgY2FsbGJhY2s6U3RhdGVFbnRlckNhbGxiYWNrKSAge1xyXG4gICAgICAgICAgICB0aGlzLmNhbGxiYWNrc0ZvclN0YXRlKHN0YXRlKS5lbnRlckNhbGxiYWNrcy5wdXNoKGNhbGxiYWNrKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFJlZ2lzdGVyIGEgZnVuY3Rpb24gdG8gY2FsbCB3aGVuIHRoZSBzdGF0ZSBoYXMgYmVlbiBjaGFuZ2VkXHJcbiAgICAgICAgICogQHBhcmFtIGNhbGxiYWNrIFRoZSBjYWxsYmFjayB0byBydW5cclxuICAgICAgICAgKi9cclxuICAgICAgICBvbkNoYW5nZShjYWxsYmFjazpTdGF0ZUNoYW5nZWRDYWxsYmFjaykge1xyXG4gICAgICAgICAgICB0aGlzLmNoYW5nZUNhbGxiYWNrcy5wdXNoKGNhbGxiYWNrKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFJlZ2lzdGVyIGEgZnVuY3Rpb24gdG8gYmUgY2FsbGVkIGJlZm9yZSB0aGUgc3RhdGUgZGF0YSBoYXMgYmVlbiBjaGFuZ2VkLlxyXG4gICAgICAgICAqIFRoaXMgYWxsb3dzIGNhbGxiYWNrIGZ1bmN0aW9ucyB0byBtb2RpZnkgdGhlIGRhdGEgYmVmb3JlIGl0J3Mgc2VudCB0byBvdGhlciBjYWxsYmFja3MuXHJcbiAgICAgICAgICogQHBhcmFtIGNhbGxiYWNrIFRoZSBjYWxsYmFjayB0byBydW5cclxuICAgICAgICAgKi9cclxuICAgICAgICBiZWZvcmVEYXRhQ2hhbmdlKGNhbGxiYWNrOlN0YXRlRGF0YUNoYW5nZWRDYWxsYmFjaykge1xyXG4gICAgICAgICAgICB0aGlzLmRhdGFDaGFuZ2VkQ2FsbGJhY2tzLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgY2FsbGJhY2s6IGNhbGxiYWNrLFxyXG4gICAgICAgICAgICAgICAgYmVmb3JlOiB0cnVlXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogUmVnaXN0ZXIgYSBmdW5jdGlvbiB0byBiZSBjYWxsZWQgYWZ0ZXIgdGhlIHN0YXRlIGRhdGEgaGFzIGNoYW5nZWRcclxuICAgICAgICAgKiBAcGFyYW0gY2FsbGJhY2sgVGhlIGNhbGxiYWNrIHRvIHJ1blxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGFmdGVyRGF0YUNoYW5nZShjYWxsYmFjazpTdGF0ZURhdGFDaGFuZ2VkQ2FsbGJhY2spIHtcclxuICAgICAgICAgICAgdGhpcy5kYXRhQ2hhbmdlZENhbGxiYWNrcy5wdXNoKHtcclxuICAgICAgICAgICAgICAgIGNhbGxiYWNrOiBjYWxsYmFjayxcclxuICAgICAgICAgICAgICAgIGJlZm9yZTogZmFsc2VcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjaGFuZ2VTdGF0ZShuZXdTdGF0ZTpTdGF0ZXMsIG5ld0RhdGE/OlN0YXRlRGF0YSkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5jdXJyZW50U3RhdGUgPT09IG5ld1N0YXRlKSByZXR1cm47XHJcblxyXG4gICAgICAgICAgICBsZXQgcHJldmlvdXNTdGF0ZSA9IHRoaXMuY3VycmVudFN0YXRlO1xyXG5cclxuICAgICAgICAgICAgLy8gU2V0IG91ciBzdGF0ZSBkYXRhXHJcbiAgICAgICAgICAgIGlmIChuZXdEYXRhKSB0aGlzLnNldERhdGEobmV3RGF0YSk7XHJcblxyXG4gICAgICAgICAgICB2YXIgc3RhdGVDaGFuZ2VkRXZlbnQ6U3RhdGVDaGFuZ2VkRXZlbnQgPSB7XHJcbiAgICAgICAgICAgICAgICBvbGRTdGF0ZTogcHJldmlvdXNTdGF0ZSxcclxuICAgICAgICAgICAgICAgIG5ld1N0YXRlOiBuZXdTdGF0ZSxcclxuICAgICAgICAgICAgICAgIG5ld0RhdGE6IHRoaXMuY3VycmVudERhdGFcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgdGhpcy5kZWJ1Z0NhbGxiYWNrID09PSAnZnVuY3Rpb24nKSB0aGlzLmRlYnVnQ2FsbGJhY2soc3RhdGVDaGFuZ2VkRXZlbnQsIGZhbHNlKTtcclxuXHJcbiAgICAgICAgICAgIC8vIFRyaWdnZXIgdGhlIHN0YXRlLWNoYW5nZWQgZXZlbnQsIGNhbmNlbCBzdGF0ZSBjaGFuZ2UgaWYgY2FuY2VsbGVkXHJcbiAgICAgICAgICAgIGZvciAobGV0IGNhbGxiYWNrIG9mIHRoaXMuY2hhbmdlQ2FsbGJhY2tzKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWNhbGxiYWNrKHN0YXRlQ2hhbmdlZEV2ZW50KSkgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBUcmlnZ2VyIGV4aXQgY2FsbGJhY2tzXHJcbiAgICAgICAgICAgIGlmICh0aGlzLmNhbGxiYWNrc0ZvclN0YXRlKHByZXZpb3VzU3RhdGUpLnRyaWdnZXJFeGl0Q2FsbGJhY2tzKHByZXZpb3VzU3RhdGUsIG5ld1N0YXRlLCB0aGlzLmN1cnJlbnREYXRhKSA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgICAgIC8vIE9uZSBvZiB0aGUgZXhpdCBjYWxsYmFja3MgY2FuY2VsZWQgdGhlIHN0YXRlIGNoYW5nZVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBUcmlnZ2VyIGVudGVyIGNhbGxiYWNrc1xyXG4gICAgICAgICAgICBpZiAodGhpcy5jYWxsYmFja3NGb3JTdGF0ZShuZXdTdGF0ZSkudHJpZ2dlckVudGVyQ2FsbGJhY2tzKHByZXZpb3VzU3RhdGUsIG5ld1N0YXRlLCB0aGlzLmN1cnJlbnREYXRhKSA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgICAgIC8vIE9uZSBvZiB0aGUgZW50ZXIgY2FsbGJhY2tzIGNhbmNlbGVkIHRoZSBzdGF0ZSBjaGFuZ2VcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHR5cGVvZiB0aGlzLmRlYnVnQ2FsbGJhY2sgPT09ICdmdW5jdGlvbicpIHRoaXMuZGVidWdDYWxsYmFjayhzdGF0ZUNoYW5nZWRFdmVudCwgdHJ1ZSk7XHJcblxyXG4gICAgICAgICAgICAvLyBBbGwgb2YgdGhlIGNhbGxiYWNrcyBoYXZlIGJlZW4gcmFuLCBjaGFuZ2UgdGhlIHN0YXRlXHJcbiAgICAgICAgICAgIHRoaXMuY3VycmVudFN0YXRlID0gbmV3U3RhdGU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBkZWJ1Z0NhbGxiYWNrOiBEZWJ1Z1N0YXRlQ2FsbGJhY2s7XHJcbiAgICB9XHJcbn0iLCJuYW1lc3BhY2UgUmlkZVN0eWxlclNob3djYXNlIHtcbiAgICAvKipcbiAgICAgKiBBIGxpc3Qgb2YgYWxsIG9mIG91ciBhY2NlcHRhYmxlIHN0cmluZyBrZXlzXG4gICAgICovXG4gICAgZXhwb3J0IHR5cGUgU3RyaW5nS2V5cyA9IFxuICAgICAgICBcInZlaGljbGUtc2VsZWN0LXZpc3VhbGl6ZS1pbnRyb1wiIHxcbiAgICAgICAgXCJ2ZWhpY2xlLXNlbGVjdC1zaGFyZS1pbnRyb1wiIHxcbiAgICAgICAgXCJzZWxlY3QteW91ci12ZWhpY2xlXCIgfFxuICAgICAgICBcInRpcmVzXCIgfFxuICAgICAgICBcIndoZWVsc1wiIHxcbiAgICAgICAgXCJzdXNwZW5zaW9uXCIgfFxuICAgICAgICBcInBhaW50XCIgfFxuICAgICAgICBcImZyb250XCIgfFxuICAgICAgICBcInJlYXJcIiB8XG4gICAgICAgIFwidmVoaWNsZS1kZXRhaWxzXCIgfFxuICAgICAgICBcImNoYW5nZS12ZWhpY2xlXCIgfFxuICAgICAgICBcIndoZWVsLWRldGFpbHNcIiB8XG4gICAgICAgIFwidGlyZS1kZXRhaWxzXCIgfFxuICAgICAgICAnc2VsZWN0LXBhaW50JyB8XG4gICAgICAgICdzZWxlY3Qtd2hlZWxzJyB8XG4gICAgICAgICdzZWxlY3QtdGlyZXMnIHxcbiAgICAgICAgJ2FkanVzdC1zdXNwZW5zaW9uJyB8XG4gICAgICAgICdjaGFuZ2Utd2hlZWwtc2l6ZScgfFxuICAgICAgICAnbm8tcmVzdWx0cycgfFxuICAgICAgICAnbm8td2hlZWwtcmVzdWx0cycgfCBcbiAgICAgICAgJ3doZWVsLWZlYXR1cmVzLXNwZWNzJyB8XG4gICAgICAgICdzaGFyZS1teS12ZWhpY2xlJyB8XG4gICAgICAgICdzaGFyZS1pbnN0cnVjdGlvbnMnIHxcbiAgICAgICAgJ25vLWRlc2NyaXB0aW9uLXdoZWVsJyB8XG4gICAgICAgICdzaG93LXNwZWNzJyB8XG4gICAgICAgICdjYWxsJyB8IFxuICAgICAgICAnc2l6ZScgfFxuICAgICAgICAnb2Zmc2V0JyB8XG4gICAgICAgICdib2x0LXBhdHRlcm4nIHxcbiAgICAgICAgJ2NlbnRlcmJvcmUnIHwgXG4gICAgICAgICdwcmljZScgfFxuICAgICAgICAnaXRlbS1udW1iZXInIHxcbiAgICAgICAgJ2JyYW5kcycgfFxuICAgICAgICAnZmluaXNoZXMnIHwgXG4gICAgICAgICdzaXplcycgfCBcbiAgICAgICAgJ2FsbCcgfFxuICAgICAgICAnYWxsLWJyYW5kcycgfFxuICAgICAgICAnYWxsLWZpbmlzaGVzJyB8IFxuICAgICAgICAnYWxsLXNpemVzJyB8IFxuICAgICAgICAnZmlsdGVyLXJlc3VsdHMnIHxcbiAgICAgICAgJ2xvYWRpbmctZWxsaXBzaXMnIHxcbiAgICAgICAgJ3Nob3ctY291bnQtZm9ybWF0LXdoZWVscycgfFxuICAgICAgICAnc2hvdy1jb3VudC1mb3JtYXQtdGlyZXMnIHxcbiAgICAgICAgJ3NwZWNpZmljYXRpb25zJyB8IFxuICAgICAgICAnc3BlZWQtcmF0aW5nJyB8IFxuICAgICAgICAnYW55LXNwZWVkLXJhdGluZ3MnIHwgXG4gICAgICAgICdmZWF0dXJlcycgfCBcbiAgICAgICAgJ2FueS1mZWF0dXJlcycgfFxuICAgICAgICAnZmluaXNoJyB8XG4gICAgICAgICdzdW1tYXJ5JyB8XG4gICAgICAgICdjaGVjay1vdXQtbXktdmVoaWNsZSc7XG5cbiAgICBsZXQgZGVmYXVsdExhbmd1YWdlRm9ybWF0UHJvdmlkZXI6SVN0cmluZ3NMYW5ndWFnZUZvcm1hdFByb3ZpZGVyID0ge1xuICAgICAgICBjdXJyZW5jeTogKG51bWJlciwgc3ltYm9sKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gc3ltYm9sICsgKCtudW1iZXIudG9GaXhlZCgyKSkudG9Mb2NhbGVTdHJpbmcoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgXG4gICAgLyoqXG4gICAgICogRGVmaW5lcyB3aGF0IGEgc3RyaW5ncyBkaWN0aW9uYXJ5IHNob3VsZCBsb29rIGxpa2VcbiAgICAgKi9cbiAgICBleHBvcnQgdHlwZSBJU3RyaW5nc0xhbmd1YWdlRGljdGlvbmFyeSA9IHtcbiAgICAgICAgW3N0cmluZ0tleSBpbiBTdHJpbmdLZXlzXTpzdHJpbmc7XG4gICAgfVxuXG4gICAgZXhwb3J0IGludGVyZmFjZSBJU3RyaW5nc0xhbmd1YWdlRm9ybWF0UHJvdmlkZXIge1xuICAgICAgICBjdXJyZW5jeT86IChhbW91bnQ6bnVtYmVyLCBzeW1ib2w6c3RyaW5nKSA9PiBzdHJpbmc7XG4gICAgfVxuXG5cbiAgICBleHBvcnQgaW50ZXJmYWNlIElTdHJpbmdzTGFuZ3VhZ2UgZXh0ZW5kcyBJU3RyaW5nc0xhbmd1YWdlRGljdGlvbmFyeSB7XG4gICAgICAgIGZvcm1hdD86IElTdHJpbmdzTGFuZ3VhZ2VGb3JtYXRQcm92aWRlcjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBIGxpc3Qgb2YgYWNjZXB0YWJsZSBsYW5ndWFnZXNcbiAgICAgKi9cbiAgICBleHBvcnQgZW51bSBMYW5ndWFnZUtleXMge1xuICAgICAgICBFblxuICAgIH1cbiAgICBcbiAgICAvKipcbiAgICAgKiBBbiBpbnRlcm5hbCBzdHJ1Y3R1cmUgZm9yIGhvbGRpbmcgbGFuZ3VhZ2UgZGF0YVxuICAgICAqL1xuICAgIGNsYXNzIExhbmd1YWdlUmVnaXN0ZXIge1xuICAgICAgICBwcml2YXRlIHJlYWRvbmx5IGxhbmd1YWdlOiBJU3RyaW5nc0xhbmd1YWdlO1xuICAgICAgICBwdWJsaWMgcmVhZG9ubHkgZm9ybWF0OiBJU3RyaW5nc0xhbmd1YWdlRm9ybWF0UHJvdmlkZXI7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENyZWF0ZSBhIHJlZ2lzdGVyIGZvciBhIGxhbmd1YWdlXG4gICAgICAgICAqIEBwYXJhbSBsYW5ndWFnZSBUaGUgbGFuZ3VhZ2UgZGVmaW5pdGlvblxuICAgICAgICAgKi9cbiAgICAgICAgY29uc3RydWN0b3IobGFuZ3VhZ2U6SVN0cmluZ3NMYW5ndWFnZSkge1xuICAgICAgICAgICAgdGhpcy5sYW5ndWFnZSA9IGxhbmd1YWdlO1xuICAgICAgICAgICAgdGhpcy5mb3JtYXQgPSBsYW5ndWFnZS5mb3JtYXQ7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogR2V0IGEga2V5IGZyb20gdGhlIGxhbmd1YWdlIGRpY3Rpb25hcnlcbiAgICAgICAgICogQHBhcmFtIGtleSBUaGUgc3RyaW5nIGtleVxuICAgICAgICAgKi9cbiAgICAgICAgZ2V0U3RyaW5nKGtleTpTdHJpbmdLZXlzKTpzdHJpbmcge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMubGFuZ3VhZ2Vba2V5XTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSBkZWZhdWx0IGxhbmd1YWdlIHRvIHVzZSBpZiBvbmUgaXMgbm90IHByb3ZpZGVkIHRvIGdldFN0cmluZ3NcbiAgICAgKi9cbiAgICBsZXQgZGVmYXVsdExhbmd1YWdlOkxhbmd1YWdlUmVnaXN0ZXI7XG5cbiAgICAvKipcbiAgICAgKiBBbiBpbnRlcm5hbCBsaXN0IG9mIGFsbCByZWdpc3RlcmVkIGxhbmd1YWdlcyBhbmQgdGhlaXIgc3RyaW5nc1xuICAgICAqL1xuICAgIGxldCBsYW5ndWFnZVJlZ2lzdGVyczoge1tsYW5ndWFnZUtleTpudW1iZXJdOkxhbmd1YWdlUmVnaXN0ZXJ9ID0ge31cblxuICAgIGV4cG9ydCBuYW1lc3BhY2Ugc3RyaW5ncyB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSZWdpc3RlciBhIGxhbmd1YWdlIHRvIGJlIHVzZWQgaW4gdGhlIHNob3djYXNlXG4gICAgICAgICAqIEBwYXJhbSBsYW5ndWFnZUtleSBUaGUga2V5IG9mIHRoZSBsYW5ndWFnZSB5b3UgYXJlIHJlZ2lzdGVyaW5nXG4gICAgICAgICAqIEBwYXJhbSBsYW5ndWFnZSBUaGUgbGFuZ3VhZ2UgcHJvdmlkZXJcbiAgICAgICAgICovXG4gICAgICAgIGV4cG9ydCBmdW5jdGlvbiByZWdpc3Rlckxhbmd1YWdlKGxhbmd1YWdlS2V5Okxhbmd1YWdlS2V5cywgbGFuZ3VhZ2U6SVN0cmluZ3NMYW5ndWFnZSwgc2V0QXNEZWZhdWx0PzogYm9vbGVhbikge1xuICAgICAgICAgICAgLy8gU2V0IGRlZmF1bHQgZm9ybWF0IHByb3ZpZGVyXG4gICAgICAgICAgICBpZiAoIWxhbmd1YWdlLmZvcm1hdCkgbGFuZ3VhZ2UuZm9ybWF0ID0gZGVmYXVsdExhbmd1YWdlRm9ybWF0UHJvdmlkZXI7XG4gICAgICAgICAgICBlbHNlIGZvciAobGV0IGtleSBpbiBkZWZhdWx0TGFuZ3VhZ2VGb3JtYXRQcm92aWRlcikge1xuICAgICAgICAgICAgICAgIC8vIElmIHRoZSBkZWZhdWx0TGFuZ3VhZ2VQcm92aWRlciBoYXMgYSBmb3JtYXQgZnVuY3Rpb24gdGhhdCBpcyBtaXNzaW5nIG9uIHRoZSBsYW5ndWFnZSdzIGZvcm1hdCBwcm92aWRlcixcbiAgICAgICAgICAgICAgICAvLyBpbXBsZW1lbnQgaXQgaW4gdGhlIGxhbmd1YWdlJ3MgZm9ybWF0IHByb3ZpZGVyXG4gICAgICAgICAgICAgICAgaWYgKGRlZmF1bHRMYW5ndWFnZUZvcm1hdFByb3ZpZGVyLmhhc093blByb3BlcnR5KGtleSkgJiYga2V5IGluIGxhbmd1YWdlLmZvcm1hdCA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgbGFuZ3VhZ2UuZm9ybWF0W2tleV0gPSBkZWZhdWx0TGFuZ3VhZ2VGb3JtYXRQcm92aWRlcltrZXldO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbGV0IGxhbmd1YWdlUmVnaXN0ZXIgPSBsYW5ndWFnZVJlZ2lzdGVyc1tsYW5ndWFnZUtleV0gPSBuZXcgTGFuZ3VhZ2VSZWdpc3RlcihsYW5ndWFnZSk7XG5cbiAgICAgICAgICAgIGlmIChzZXRBc0RlZmF1bHQgfHwgIWRlZmF1bHRMYW5ndWFnZSkgZGVmYXVsdExhbmd1YWdlID0gbGFuZ3VhZ2VSZWdpc3RlcjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTZXQgYSBsYW5ndWFnZSB0byBiZSB1c2VkIGJ5IGRlZmF1bHQsIHdoZW4gbm8ga2V5IGlzIHBhc3NlZCBpbnRvIGdldFN0cmluZ3NcbiAgICAgICAgICogQHBhcmFtIGxhbmd1YWdlS2V5IFRoZSBsYW5ndWFnZSBrZXkgdG8gdXNlIGJ5IGRlZmF1bHRcbiAgICAgICAgICogQHJldHVybnMgdHJ1ZSwgaWYgdGhlIGxhbmd1YWdlIGlzIHJlZ2lzdGVyZWQgYW5kIHNldCBhcyBkZWZhdWx0OyBvdGhlcndpc2UgZmFsc2VcbiAgICAgICAgICovXG4gICAgICAgIGV4cG9ydCBmdW5jdGlvbiBzZXREZWZhdWx0TGFuZ3VhZ2UobGFuZ3VhZ2VLZXk6TGFuZ3VhZ2VLZXlzKTpib29sZWFuIHtcbiAgICAgICAgICAgIGlmIChsYW5ndWFnZUtleSBpbiBsYW5ndWFnZVJlZ2lzdGVycykge1xuICAgICAgICAgICAgICAgIGRlZmF1bHRMYW5ndWFnZSA9IGxhbmd1YWdlUmVnaXN0ZXJzW2xhbmd1YWdlS2V5XTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRlbGxzIHlvdSB3aGV0aGVyIG9yIG5vdCBhIGxhbmd1YWdlIGlzIHJlZ2lzdGVyZWRcbiAgICAgICAgICogQHBhcmFtIGxhbmd1YWdlS2V5IFRoZSBrZXkgZm9yIHRoZSBsYW5ndWFnZVxuICAgICAgICAgKi9cbiAgICAgICAgZXhwb3J0IGZ1bmN0aW9uIGxhbmd1YWdlSXNSZWdpc3RlcmVkKGxhbmd1YWdlS2V5Okxhbmd1YWdlS2V5cyk6Ym9vbGVhbiB7XG4gICAgICAgICAgICByZXR1cm4gbGFuZ3VhZ2VLZXkgaW4gbGFuZ3VhZ2VSZWdpc3RlcnM7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogUmV0dXJucyB0aGUgc3BlY2lmaWVkIGxhbmd1YWdlLCBvciB0aGUgZGVmYXVsdCBsYW5ndWFnZSBpZiBpdCBjb3VsZCBub3QgYmUgZm91bmRcbiAgICAgICAgICogQHBhcmFtIGxhbmd1YWdlS2V5IFRoZSBrZXkgb2YgdGhlIGxhbmd1YWdlIHRvIHJldHJpZXZlXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBnZXRMYW5ndWFnZShsYW5ndWFnZUtleT86TGFuZ3VhZ2VLZXlzKTpMYW5ndWFnZVJlZ2lzdGVyIHtcbiAgICAgICAgICAgIHJldHVybiBsYW5ndWFnZUtleSBpbiBsYW5ndWFnZVJlZ2lzdGVycyA/XG4gICAgICAgICAgICAgICAgbGFuZ3VhZ2VSZWdpc3RlcnNbbGFuZ3VhZ2VLZXldIDpcbiAgICAgICAgICAgICAgICBkZWZhdWx0TGFuZ3VhZ2U7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogR2V0IGEgc3RyaW5nIGZyb20gdGhlIHJlZ2lzdGVyZWQgc3RyaW5nc1xuICAgICAgICAgKiBAcGFyYW0ga2V5IFRoZSBzdHJpbmcga2V5IHRvIHJldHVybiBhIHN0cmluZyBmb3JcbiAgICAgICAgICogQHBhcmFtIGxhbmd1YWdlS2V5IFRoZSBsYW5ndWFnZSB5b3Ugd2FudCB0byB1c2VcbiAgICAgICAgICovXG4gICAgICAgIGV4cG9ydCBmdW5jdGlvbiBnZXRTdHJpbmcoa2V5OlN0cmluZ0tleXMsIGxhbmd1YWdlS2V5PzpMYW5ndWFnZUtleXMpOnN0cmluZyB7XG4gICAgICAgICAgICBsZXQgbGFuZ3VhZ2VSZWdpc3RlcjpMYW5ndWFnZVJlZ2lzdGVyID0gZ2V0TGFuZ3VhZ2UobGFuZ3VhZ2VLZXkpO1xuICAgICAgICAgICAgbGV0IHN0cmluZzpzdHJpbmc7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIElmIHdlIGRvbid0IGhhdmUgYSBsYW5ndWFnZSwgb3IgY291bGQgbm90IGdldCB0aGUgc3RyaW5nIGZyb20gdGhlIHJlZ2lzdGVyIFxuICAgICAgICAgICAgaWYgKCEoc3RyaW5nID0gbGFuZ3VhZ2VSZWdpc3Rlci5nZXRTdHJpbmcoa2V5KSkpXG4gICAgICAgICAgICByZXR1cm4ga2V5O1xuICAgICAgICAgICAgXG4gICAgICAgICAgICByZXR1cm4gc3RyaW5nO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBleHBvcnQgZnVuY3Rpb24gZm9ybWF0KGxhbmd1YWdlS2V5PzpMYW5ndWFnZUtleXMpOklTdHJpbmdzTGFuZ3VhZ2VGb3JtYXRQcm92aWRlciB7XG4gICAgICAgICAgICByZXR1cm4gZ2V0TGFuZ3VhZ2UobGFuZ3VhZ2VLZXkpLmZvcm1hdDtcbiAgICAgICAgfVxuICAgIH1cbn0iLCJuYW1lc3BhY2UgUmlkZVN0eWxlclNob3djYXNlLnN0eWxlcyB7XHJcbiAgICBleHBvcnQgdHlwZSBCcmVha3BvaW50S2V5ID0gJ3Bob25lLXBvcnRyYWl0JyB8ICdwaG9uZS1sYW5kc2NhcGUnIHwgJ3RhYmxldCcgfCAnZGVza3RvcCcgfCAnZGVza3RvcC14bCcgfCAndHYnO1xyXG4gICAgZXhwb3J0IHR5cGUgQnJlYWtwb2ludCA9IFtCcmVha3BvaW50S2V5LCBudW1iZXJdO1xyXG4gICAgXHJcbiAgICBsZXQgd2lkdGhCcmVha3BvaW50czpCcmVha3BvaW50W10gPSBbXHJcbiAgICAgICAgWydwaG9uZS1wb3J0cmFpdCcsIDBdLFxyXG4gICAgICAgIFsncGhvbmUtbGFuZHNjYXBlJywgNDIwXSxcclxuICAgICAgICBbJ3RhYmxldCcsIDc2OF0sXHJcbiAgICAgICAgWydwaG9uZS1sYW5kc2NhcGUnLCA4MTJdLFxyXG4gICAgICAgIFsndGFibGV0JywgODI0XSxcclxuICAgICAgICBbJ2Rlc2t0b3AnLCA5OTJdLFxyXG4gICAgICAgIFsnZGVza3RvcC14bCcsIDEyMDBdLFxyXG4gICAgICAgIFsndHYnLCAxNjAwXVxyXG4gICAgXTtcclxuXHJcbiAgICBleHBvcnQgY2xhc3MgU3R5bGVNYW5hZ2VyIHtcclxuICAgICAgICBlbGVtZW50OkhUTUxFbGVtZW50O1xyXG5cclxuICAgICAgICBjb25zdHJ1Y3RvciAoZWxlbWVudDpIVE1MRWxlbWVudCkge1xyXG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQgPSBlbGVtZW50O1xyXG5cclxuICAgICAgICAgICAgdGhpcy5pbml0aWFsaXplZCA9IHJpZGVzdHlsZXIucHJvbWlzZSgpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5pbml0aWFsaXplQnJlYWtwb2ludHMoKTtcclxuICAgICAgICAgICAgdGhpcy53YXRjaFNpemUoKTtcclxuICAgICAgICAgICAgdGhpcy5pbml0aWFsaXplQ1NTKCk7XHJcbiAgICAgICAgICAgIHRoaXMucmVzb2x2ZU9uRE9NTG9hZCgpO1xyXG4gICAgICAgICAgICB0aGlzLmluaXRpYWxpemVTdHlsZUNsYXNzZXMoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBpbml0aWFsaXplZDpSaWRlU3R5bGVyUHJvbWlzZTtcclxuXHJcbiAgICAgICAgcHJpdmF0ZSByZXNvbHZlT25ET01Mb2FkKCkge1xyXG4gICAgICAgICAgICBpZiAoZG9jdW1lbnQucmVhZHlTdGF0ZSA9PT0gJ2NvbXBsZXRlJykge1xyXG4gICAgICAgICAgICAgICAgLy8gVGhlIERPTSBpcyBhbHJlYWR5IGxvYWRlZFxyXG4gICAgICAgICAgICAgICAgdGhpcy5pbml0aWFsaXplZC5yZXNvbHZlKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBXYWl0IGZvciB0aGUgRE9NIHRvIGxvYWRcclxuICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCAoKSA9PiB0aGlzLmluaXRpYWxpemVkLnJlc29sdmUoKSwgZmFsc2UpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogTG9hZCB0aGUgQ1NTIGZyb20ge0BsaW5rIFJpZGVTdHlsZXJTaG93Y2FzZS5jc3N9IGludG8gdGhlIGZpcnN0IEhFQUQgZWxlbWVudFxyXG4gICAgICAgICAqIGZvdW5kIGluIHRoZSBkb2N1bWVudCBvZiB0aGUgY29udGFpbmVyXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHJpdmF0ZSBpbml0aWFsaXplQ1NTKCkge1xyXG4gICAgICAgICAgICBpZiAoIVN0eWxlSGVscGVyLmlzT2Zmc2V0UG9zaXRpb25lZCh0aGlzLmVsZW1lbnQpKVxyXG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnN0eWxlLnBvc2l0aW9uID0gJ3JlbGF0aXZlJztcclxuXHJcbiAgICAgICAgICAgIGlmICgnY3NzJyBpbiBSaWRlU3R5bGVyU2hvd2Nhc2UgPT09IGZhbHNlKSByZXR1cm47XHJcblxyXG4gICAgICAgICAgICBsZXQgY29udGFpbmVyRG9jdW1lbnQgPSB0aGlzLmVsZW1lbnQub3duZXJEb2N1bWVudDtcclxuICAgICAgICAgICAgbGV0IGhlYWQgPSBjb250YWluZXJEb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImhlYWRcIikuaXRlbSgwKTtcclxuXHJcbiAgICAgICAgICAgIC8vIElmIHdlIGRvbid0IGhhdmUgYSBIRUFEIGVsZW1lbnQsIGNyZWF0ZSBvbmUgYW5kIGFkZCBpdCB0byB0aGUgRE9NXHJcbiAgICAgICAgICAgIGlmICghaGVhZCkge1xyXG4gICAgICAgICAgICAgICAgaGVhZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2hlYWQnKTtcclxuICAgICAgICAgICAgICAgIGNvbnRhaW5lckRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5pbnNlcnRCZWZvcmUoaGVhZCwgY29udGFpbmVyRG9jdW1lbnQuZmlyc3RDaGlsZCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGxldCBzdHlsZXNoZWV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTtcclxuXHJcbiAgICAgICAgICAgIC8vIEFkZCBvdXIgQ1NTIHRvIHRoZSBzdHlsZXNoZWV0XHJcbiAgICAgICAgICAgIHN0eWxlc2hlZXQuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoUmlkZVN0eWxlclNob3djYXNlLmNzcykpO1xyXG5cclxuICAgICAgICAgICAgLy8gQWRkIHRoZSBDU1MgdG8gdGhlIGhlYWRlciBiZWZvcmUgdGhlIGZpcnN0IEhFQUQgZWxlbWVudFxyXG4gICAgICAgICAgICBoZWFkLmluc2VydEJlZm9yZShzdHlsZXNoZWV0LCBIVE1MSGVscGVyLmZpcnN0Q2hpbGRXaXRoVGFnKGhlYWQsIFwiU1RZTEVcIikpO1xyXG5cclxuICAgICAgICAgICAgLy8gUmVtb3ZlIHRoZSBDU1MgZnJvbSBvdXIgb2JqZWN0IHNvIGl0J3Mgbm90IHNwZWNpZmllZCB0d2ljZVxyXG4gICAgICAgICAgICBkZWxldGUgUmlkZVN0eWxlclNob3djYXNlLmNzcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgaW5pdGlhbGl6ZVN0eWxlQ2xhc3NlcygpIHtcclxuICAgICAgICAgICAgaWYgKFN0eWxlSGVscGVyLmlzVG91Y2hEZXZpY2UpXHJcbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnaXMtdG91Y2gnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgaW5pdGlhbGl6ZUJyZWFrcG9pbnRzKCkge1xyXG4gICAgICAgICAgICAvLyBNYWtlIHN1cmUgb3VyIGJyZWFrcG9pbnRzIGFyZSBzb3J0ZWRcclxuICAgICAgICAgICAgd2lkdGhCcmVha3BvaW50cy5zb3J0KGZ1bmN0aW9uIChhLGIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBhWzFdIC0gYlsxXTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmFwcGx5QnJlYWtwb2ludENsYXNzZXMoKTtcclxuXHJcbiAgICAgICAgICAgIHN3aXRjaCAoZG9jdW1lbnQucmVhZHlTdGF0ZSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcImxvYWRpbmdcIjpcclxuICAgICAgICAgICAgICAgICAgICBIVE1MSGVscGVyLmdldERvY3VtZW50KHRoaXMuZWxlbWVudCkuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgKCkgPT4gdGhpcy5hcHBseUJyZWFrcG9pbnRDbGFzc2VzKCkpO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcImludGVyYWN0aXZlXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgSFRNTEhlbHBlci5nZXRXaW5kb3codGhpcy5lbGVtZW50KS5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLCAoKSA9PiB0aGlzLmFwcGx5QnJlYWtwb2ludENsYXNzZXMoKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgcmVzaXplKCkge1xyXG4gICAgICAgICAgICB0aGlzLmFwcGx5QnJlYWtwb2ludENsYXNzZXMoKTtcclxuXHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgdGhpcy5vblJlc2l6ZSA9PT0gJ2Z1bmN0aW9uJykgdGhpcy5vblJlc2l6ZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSByZXNpemVkKCkge1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mIHRoaXMub25SZXNpemVkID09PSAnZnVuY3Rpb24nKSB0aGlzLm9uUmVzaXplZCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBicmVha3BvaW50Q2hhbmdlZChuZXdCcmVha3BvaW50OkJyZWFrcG9pbnQpIHtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiB0aGlzLm9uQnJlYWtwb2ludENoYW5nZWQgPT09ICdmdW5jdGlvbicpIHRoaXMub25CcmVha3BvaW50Q2hhbmdlZChuZXdCcmVha3BvaW50KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEEgY2FsbGJhY2sgZWFjaCB0aW1lIHRoZSBlbGVtZW50IGlzIHJlc2l6ZWRcclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgb25SZXNpemU6ICgpID0+IHZvaWQ7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEEgY2FsbGJhY2sgZm9yIGFmdGVyIHRoZSB1c2VyIGlzIGRvbmUgcmVzaXppbmcgdGhlIGVsZW1lbnRcclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgb25SZXNpemVkOiAoKSA9PiB2b2lkO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBBIGNhbGxiYWNrIGZvciBhZnRlciB0aGUgYnJlYWtwb2ludCBoYXMgY2hhbmdlZFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBvbkJyZWFrcG9pbnRDaGFuZ2VkOiAobmV3QnJlYWtwb2ludDpCcmVha3BvaW50KSA9PiB2b2lkO1xyXG5cclxuICAgICAgICBwcml2YXRlIHdhdGNoU2l6ZSgpIHtcclxuICAgICAgICAgICAgbGV0IGVsZW1lbnQ6SFRNTEVsZW1lbnQgPSB0aGlzLmVsZW1lbnQ7XHJcblxyXG4gICAgICAgICAgICBsZXQgdGltZXI6bnVtYmVyO1xyXG4gICAgICAgICAgICBjb25zdCByZXNpemVkRXZlbnREZWxheSA9IDIwMDtcclxuXHJcbiAgICAgICAgICAgIGxldCBlbGVtZW50U2l6ZSA9IHtcclxuICAgICAgICAgICAgICAgIHdpZHRoOiBlbGVtZW50LmNsaWVudFdpZHRoLFxyXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiBlbGVtZW50LmNsaWVudEhlaWdodFxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgSFRNTEhlbHBlci5nZXRXaW5kb3coZWxlbWVudCkuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgbGV0IG5ld0VsZW1lbnRTaXplID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIHdpZHRoOiBlbGVtZW50LmNsaWVudFdpZHRoLFxyXG4gICAgICAgICAgICAgICAgICAgIGhlaWdodDogZWxlbWVudC5jbGllbnRIZWlnaHRcclxuICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKG5ld0VsZW1lbnRTaXplLndpZHRoICE9PSBlbGVtZW50U2l6ZS53aWR0aCB8fCBuZXdFbGVtZW50U2l6ZS5oZWlnaHQgIT09IGVsZW1lbnRTaXplLmhlaWdodCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFRoZSBlbGVtZW50J3Mgc2l6ZSBoYXMgY2hhbmdlZFxyXG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnRTaXplID0gbmV3RWxlbWVudFNpemU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVzaXplKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lcik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVzaXplZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sIHJlc2l6ZWRFdmVudERlbGF5KTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIH0sIGZhbHNlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFRoZSBjdXJyZW50bHkgYXBwbGllZCBicmVha3BvaW50XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHJpdmF0ZSBjdXJyZW50QnJlYWtwb2ludDpCcmVha3BvaW50O1xyXG5cclxuICAgICAgICBwdWJsaWMgZ2V0Q3VycmVudEJyZWFrcG9pbnQoKTpCcmVha3BvaW50IHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY3VycmVudEJyZWFrcG9pbnQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGFwcGx5QnJlYWtwb2ludENsYXNzZXMoKSB7XHJcbiAgICAgICAgICAgIGxldCBlbGVtZW50OkhUTUxFbGVtZW50ID0gdGhpcy5lbGVtZW50O1xyXG5cclxuICAgICAgICAgICAgbGV0IGhlaWdodCA9IGVsZW1lbnQub2Zmc2V0SGVpZ2h0O1xyXG4gICAgICAgICAgICBsZXQgd2lkdGggPSBlbGVtZW50Lm9mZnNldFdpZHRoO1xyXG5cclxuICAgICAgICAgICAgLy8gRG9uJ3QgcnVuIGlmIHdlIGRvbid0IGhhdmUgYSBoZWlnaHQgb3Igd2lkdGggeWV0XHJcbiAgICAgICAgICAgIGlmICghaGVpZ2h0IHx8ICF3aWR0aCkgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgbGV0IG5ld0JyZWFrcG9pbnQ6QnJlYWtwb2ludDtcclxuXHJcbiAgICAgICAgICAgIC8vIFRoZSBuZXcgYnJlYWtwb2ludCBpcyB0aGUgbmV4dCBsb3dlc3QgdmFsdWUgaW4gdGhlIGFycmF5XHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGxldCBpOm51bWJlcjtcclxuICAgICAgICAgICAgICAgIGZvciAoaSA9IHdpZHRoQnJlYWtwb2ludHMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHdpZHRoQnJlYWtwb2ludHNbaV1bMV0gPD0gd2lkdGgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgIG5ld0JyZWFrcG9pbnQgPSBpID49IDAgPyB3aWR0aEJyZWFrcG9pbnRzW2ldIDogdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBJZiB0aGUgY3VycmVudCBicmVha3BvaW50IGhhc24ndCBjaGFuZ2VkLCBkb24ndCBydW4gdGhlIHJlc3Qgb2YgdGhpcyBsb2dpY1xyXG4gICAgICAgICAgICBpZiAobmV3QnJlYWtwb2ludCA9PT0gdGhpcy5jdXJyZW50QnJlYWtwb2ludCkgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgLy8gU2V0IG91ciBjdXJyZW50IGJyZWFrcG9pbnQgdG8gdGhlIG5ld2x5IGRlZmluZWQgb25lXHJcbiAgICAgICAgICAgIHRoaXMuY3VycmVudEJyZWFrcG9pbnQgPSBuZXdCcmVha3BvaW50O1xyXG5cclxuICAgICAgICAgICAgY29uc3Qgb3JpZ2luYWxDbGFzc05hbWUgPSBlbGVtZW50LmNsYXNzTmFtZVxyXG4gICAgICAgICAgICBsZXQgY2xhc3NOYW1lID0gb3JpZ2luYWxDbGFzc05hbWU7XHJcblxyXG4gICAgICAgICAgICAvLyBSZW1vdmUgYW55IGJyZWFrcG9pbnQgY2xhc3NlcyBmcm9tIHRoZSBlbGVtZW50J3MgY2xhc3NcclxuICAgICAgICAgICAgY2xhc3NOYW1lID0gY2xhc3NOYW1lLnJlcGxhY2UoL1xcYnJpZGVzdHlsZXItc2hvd2Nhc2UtYnJlYWtwb2ludC0uKz8oPz0gfCQpL2dpLCBcIlwiKS50cmltKCk7XHJcblxyXG4gICAgICAgICAgICAvLyBBZGQgaW4gdGhlIGJyZWFrcG9pbnQgY2xhc3MgaWYgd2UgaGF2ZSBvbmVcclxuICAgICAgICAgICAgaWYgKG5ld0JyZWFrcG9pbnQpIHtcclxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZSArPSAnIHJpZGVzdHlsZXItc2hvd2Nhc2UtYnJlYWtwb2ludC0nICsgbmV3QnJlYWtwb2ludFswXTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gSWYgdGhlIGNsYXNzTmFtZSBoYXNuJ3QgY2hhbmdlZCBkbyBub3RoaW5nXHJcbiAgICAgICAgICAgIGlmIChjbGFzc05hbWUgPT09IG9yaWdpbmFsQ2xhc3NOYW1lKSByZXR1cm47XHJcblxyXG4gICAgICAgICAgICBlbGVtZW50LmNsYXNzTmFtZSA9IGNsYXNzTmFtZTtcclxuICAgICAgICAgICAgdGhpcy5icmVha3BvaW50Q2hhbmdlZChuZXdCcmVha3BvaW50KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwibmFtZXNwYWNlIFJpZGVTdHlsZXJTaG93Y2FzZSB7XHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIFJpZGVTdHlsZXJTaG93Y2FzZU9wdGlvbnMge1xyXG4gICAgICAgIGRlYnVnPzoge1xyXG4gICAgICAgICAgICBldmVudHM/OmJvb2xlYW47XHJcbiAgICAgICAgICAgIHN0YXRlPzpib29sZWFuO1xyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgZXhwb3J0IHR5cGUgUmlkZVN0eWxlclNob3djYXNlU2V0dGluZ3MgPSBcclxuICAgICAgICAoUmlkZVN0eWxlclNob3djYXNlT3B0aW9ucyAmIFJpZGVTdHlsZXJTaG93Y2FzZUFQSUluaXRpYWxpemVTZXR0aW5nc0tleVRva2VuKSB8IFxyXG4gICAgICAgIChSaWRlU3R5bGVyU2hvd2Nhc2VPcHRpb25zICYgUmlkZVN0eWxlclNob3djYXNlQVBJSW5pdGlhbGl6ZVNldHRpbmdzVXNlcik7XHJcblxyXG4gICAgZXhwb3J0IGludGVyZmFjZSBSaWRlU3R5bGVyU2hvd2Nhc2VDb250YWluZXIgZXh0ZW5kcyBIVE1MRWxlbWVudCB7XHJcbiAgICAgICAgcmlkZXN0eWxlclNob3djYXNlOiBSaWRlU3R5bGVyU2hvd2Nhc2VJbnN0YW5jZTtcclxuICAgIH1cclxuXHJcbiAgICBleHBvcnQgY2xhc3MgUmlkZVN0eWxlclNob3djYXNlSW5zdGFuY2Uge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFRoZSBtYWluIGNvbnRhaW5lciBmb3IgdGhlIHNob3djYXNlXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIGNvbnRhaW5lcjogUmlkZVN0eWxlclNob3djYXNlQ29udGFpbmVyO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBUaGUgbWFpbiBjb21wb25lbnRzIChzY3JlZW5zIGZvciBleGFtcGxlKSB0byBiZSByZW5kZXJlZCBpbiB0aGUgc2hvd2Nhc2VcclxuICAgICAgICAgKi9cclxuICAgICAgICBwcml2YXRlIG1haW5Db21wb25lbnRzOiBNYWluQ29tcG9uZW50QmFzZVtdO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBPdGhlciBjb21wb25lbnRzIHRvIGJlIHJlbmRlcmVkIGluIHRoZSBzaG93Y2FzZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHByaXZhdGUgb3RoZXJDb21wb25lbnRzOiBDb21wb25lbnRCYXNlW107XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEEgbWFwcGluZyBvZiBzdGF0ZXMgdG8gbWFpbiBjb21wb25lbnRzXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0ZUNvbXBvbmVudE1hcHBpbmc6IHtbc3RhdGU6IG51bWJlcl06TWFpbkNvbXBvbmVudEJhc2V9O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBUaGUgY3VycmVudGx5IHZpc2libGUgbWFpbiBjb21wb25lbnRcclxuICAgICAgICAgKi9cclxuICAgICAgICBwcml2YXRlIGN1cnJlbnRNYWluQ29tcG9uZW50OiBNYWluQ29tcG9uZW50QmFzZTtcclxuICAgICAgICBcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBUaGUgc3RhdGUgaGFuZGxlclxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBzdGF0ZTpzdGF0ZS5SaWRlU3R5bGVyU2hvd2Nhc2VTdGF0ZTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVGhlIHN0eWxlIG1hbmFnZXJcclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgc3R5bGU6c3R5bGVzLlN0eWxlTWFuYWdlcjtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVGhlIGV2ZW50IGhhbmRsZXJcclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgZXZlbnRzOmV2ZW50cy5FdmVudEhhbmRsZXI7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFNldHRpbmdzIHNwZWNpZmllZCB3aGVuIHRoZSBzaG93Y2FzZSB3YXMgY3JlYXRlZFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBzZXR0aW5nczpSaWRlU3R5bGVyU2hvd2Nhc2VTZXR0aW5ncztcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogU2V0dGluZ3MgbG9hZGVkIGZyb20gdGhlIEFQSVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBzZXR0aW5nc0Zyb21BUEk6YXBpLnNldHRpbmdzLlJpZGVTdHlsZXJTaG93Y2FzZVNldHRpbmdzRnJvbUFQSTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVGhlIGZpbHRlciBjb250cm9sbGVyXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIGZpbHRlcnM6ZmlsdGVycy5GaWx0ZXJDb250cm9sbGVyO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENyZWF0ZSBhIFJpZGVTdHlsZXIgU2hvd2Nhc2UgaW5zdGFuY2UgYW5kIGRvIG5vdCBpbml0aWFsaXplIGl0XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIGNvbnN0cnVjdG9yKCk7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENyZWF0ZSBhIFJpZGVTdHlsZXIgU2hvd2Nhc2UgaW5zdGFuY2UgYW5kIGluaXRpYWxpemUgaXQgaW5zaWRlIGEgY29udGFpbmVyIHdpdGggdGhlIHNwZWNpZmllZCBJRFxyXG4gICAgICAgICAqIEBwYXJhbSBjb250YWluZXJJRCBTcGVjaWZpZXMgdGhlIElEIG9mIHRoZSBjb250YWluZXIgdG8gaW5pdGlhbGl6ZSB0aGUgc2hvd2Nhc2UgaW5cclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgY29uc3RydWN0b3IoY29udGFpbmVySUQ6IHN0cmluZywgc2V0dGluZ3M/OlJpZGVTdHlsZXJTaG93Y2FzZVNldHRpbmdzKTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQ3JlYXRlIGEgUmlkZVN0eWxlciBTaG93Y2FzZSBpbnN0YW5jZSBhbmQgaW5pdGlhbGl6ZSBpdCBpbnNpZGUgdGhlIHNwZWNpZmllZCBjb250YWluZXJcclxuICAgICAgICAgKiBAcGFyYW0gY29udGFpbmVyIFNwZWNpZmllcyB0aGUgZWxlbWVudCB0byBpbml0aWFsaXplIHRoZSBzaG93Y2FzZSBpblxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBjb25zdHJ1Y3RvciAoY29udGFpbmVyOiBIVE1MRWxlbWVudCwgc2V0dGluZ3M/OlJpZGVTdHlsZXJTaG93Y2FzZVNldHRpbmdzKTtcclxuXHJcbiAgICAgICAgcHVibGljIGNvbnN0cnVjdG9yIChjb250YWluZXI/OiBzdHJpbmcgfCBIVE1MRWxlbWVudCwgc2V0dGluZ3M/OlJpZGVTdHlsZXJTaG93Y2FzZVNldHRpbmdzKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0dGluZ3MgPSBzZXR0aW5ncyB8fCB7fTtcclxuICAgICAgICAgICAgdGhpcy5zZXR0aW5ncy5kZWJ1ZyA9IHRoaXMuc2V0dGluZ3MuZGVidWcgfHwge307XHJcblxyXG4gICAgICAgICAgICB0aGlzLmV2ZW50cyA9IG5ldyBldmVudHMuRXZlbnRIYW5kbGVyKCk7XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy5kZWJ1Zy5ldmVudHMgPT09IHRydWUpXHJcbiAgICAgICAgICAgICAgICB0aGlzLmV2ZW50cy5kZWJ1Z0NhbGxiYWNrID0gZnVuY3Rpb24gKG5hbWUsIGUsIGhhbmRsZXJzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5hbWUgPT09ICdyZXNpemUnKSByZXR1cm47XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBbUmlkZVN0eWxlclNob3djYXNlIEV2ZW50XSBOYW1lOiAke25hbWV9IERhdGE6YCwgZSwgaGFuZGxlcnMpO1xyXG4gICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIGlmIChjb250YWluZXIpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgY29udGFpbmVyID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGNvbnRhaW5lcik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghY29udGFpbmVyKSBjb25zb2xlLmVycm9yKCdUaGUgSUQgXCInICsgY29udGFpbmVyICsgJ1wiIGNvdWxkIG5vdCBiZSBmb3VuZCBpbiB0aGUgRE9NLicpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuaW5pdGlhbGl6ZShjb250YWluZXIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBSZWdpc3RlciB0aGUgbWFpbiBjb21wb25lbnRzIHVzZWQgYnkgdGhlIHNob3djYXNlXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHJpdmF0ZSByZWdpc3RlckNvbXBvbmVudHMoKTogdm9pZCB7XHJcbiAgICAgICAgICAgIGxldCBldmVudEhhbmRsZXIgPSB0aGlzLmV2ZW50cztcclxuXHJcbiAgICAgICAgICAgIC8vIFJlZ2lzdGVyIG90aGVyIGNvbXBvbmVudHMgdG8gYmUgZGlzcGxheWVkXHJcbiAgICAgICAgICAgIHRoaXMub3RoZXJDb21wb25lbnRzID0gW1xyXG4gICAgICAgICAgICAgICAgbmV3IFJpZGVTdHlsZXJTaG93Y2FzZUJhY2tncm91bmQodGhpcylcclxuICAgICAgICAgICAgXTtcclxuXHJcbiAgICAgICAgICAgIC8vIFJlZ2lzdGVyIG91ciBtYXBwaW5nIG9mIHN0YXRlcyB0byBtYWluIGNvbXBvbmVudHNcclxuICAgICAgICAgICAgdGhpcy5zdGF0ZUNvbXBvbmVudE1hcHBpbmcgPSB7fTtcclxuICAgICAgICAgICAgdGhpcy5zdGF0ZUNvbXBvbmVudE1hcHBpbmdbU3RhdGVzLkNob29zZVZlaGljbGVdID0gbmV3IFJpZGVTdHlsZXJTaG93Y2FzZVZlaGljbGVTZWxlY3Rpb24odGhpcyk7XHJcbiAgICAgICAgICAgIHRoaXMuc3RhdGVDb21wb25lbnRNYXBwaW5nW1N0YXRlcy5WaXN1YWxpemVdID0gbmV3IFJpZGVTdHlsZXJTaG93Y2FzZVZlaGljbGVWaXN1YWxpemF0aW9uKHRoaXMpO1xyXG5cclxuICAgICAgICAgICAgLy8gR2VuZXJhdGUgbWFpbkNvbXBvbmVudHMgZnJvbSB0aGUgc3RhdGVDb21wb25lbnRNYXBwaW5nXHJcbiAgICAgICAgICAgIHRoaXMubWFpbkNvbXBvbmVudHMgPSBbXTtcclxuICAgICAgICAgICAgZm9yIChsZXQgc3RhdGUgaW4gdGhpcy5zdGF0ZUNvbXBvbmVudE1hcHBpbmcpXHJcbiAgICAgICAgICAgICAgICB0aGlzLm1haW5Db21wb25lbnRzLnB1c2godGhpcy5zdGF0ZUNvbXBvbmVudE1hcHBpbmdbc3RhdGVdKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFNldCB0aGUgY29udGFpbmVyIG9mIHRoaXMgc2hvd2Nhc2UgaW5zdGFuY2UgYW5kIGluaXRpYWxpemUgKG9yIHJlLWluaXRpYWxpemUpIGl0XHJcbiAgICAgICAgICogQHBhcmFtIGNvbnRhaW5lciBUaGUgY29udGFpbmVyIHRvIGluaXRpYWxpemUgdGhpcyBzaG93Y2FzZSBpblxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBpbml0aWFsaXplKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpIDogdm9pZCB7XHJcblxyXG4gICAgICAgICAgICBpZiAoIWNvbnRhaW5lcikgdGhyb3cgXCJDYW5ub3QgaW5pdGlhbGl6ZSBzaG93Y2FzZSB3aXRob3V0IGEgY29udGFpbmVyIHRvIHB1dCBpdCBpbi5cIjtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuY29udGFpbmVyID0gT2JqZWN0SGVscGVyLmFzc2lnbihjb250YWluZXIsIHtcclxuICAgICAgICAgICAgICAgIHJpZGVzdHlsZXJTaG93Y2FzZTogdGhpc1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuaW5pdGlhbGl6ZVN0YXRlKCk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnJlZ2lzdGVyQ29tcG9uZW50cygpO1xyXG5cclxuICAgICAgICAgICAgYXBpLmluaXRpYWxpemUodGhpcy5zZXR0aW5ncyk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmluaXRpYWxpemVTdHlsZSgpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5pbml0aWFsaXplRmlsdGVycygpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgdGhpcy5pbml0aWFsaXplQ29tcG9uZW50cygpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5ldmVudHMub24oXCJ2ZWhpY2xlLXNlbGVjdGVkXCIsIHNlbGVjdGlvbiA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLmNoYW5nZVN0YXRlKFN0YXRlcy5WaXN1YWxpemUsIHtcclxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50VmVoaWNsZUNvbmZpZ3VyYXRpb25JRDogc2VsZWN0aW9uLlZlaGljbGVDb25maWd1cmF0aW9uLFxyXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRWZWhpY2xlRGVzY3JpcHRpb246IHNlbGVjdGlvbi5WZWhpY2xlRGVzY3JpcHRpb24sXHJcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudFZlaGljbGVUaXJlT3B0aW9uSUQ6IHNlbGVjdGlvbi5UaXJlT3B0aW9uSUQsXHJcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudFZlaGljbGVUaXJlT3B0aW9uRGVzY3JpcHRpb246IHNlbGVjdGlvbi5UaXJlT3B0aW9uU3RyaW5nLFxyXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRQYWludFNjaGVtZTogdW5kZWZpbmVkLFxyXG4gICAgICAgICAgICAgICAgICAgIHZlaGljbGVIYXNBbmdsZWRJbWFnZTogdW5kZWZpbmVkLFxyXG4gICAgICAgICAgICAgICAgICAgIHZlaGljbGVIYXNTaWRlSW1hZ2U6IHVuZGVmaW5lZCxcclxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50VGlyZTogdW5kZWZpbmVkLFxyXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRXaGVlbDogdW5kZWZpbmVkLFxyXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRXaGVlbEZpdG1lbnQ6IHVuZGVmaW5lZCxcclxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50VGlyZU9wdGlvbjogdW5kZWZpbmVkLFxyXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRWZWhpY2xlRGVzY3JpcHRpb25Nb2RlbDogdW5kZWZpbmVkXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGxldCBzZXR0aW5nc1JldHJpZXZlZCA9IFByb21pc2VIZWxwZXIudGhlbihhcGkuYXV0aGVudGljYXRlZCwgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGFwaS5zZXR0aW5ncy5nZXRTZXR0aW5ncygpLmRvbmUoc2V0dGluZ3NGcm9tQVBJID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldHRpbmdzRnJvbUFQSSA9IHNldHRpbmdzRnJvbUFQSTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIFByb21pc2VIZWxwZXIuYWxsKFt0aGlzLnN0eWxlLmluaXRpYWxpemVkLCBzZXR0aW5nc1JldHJpZXZlZF0pLmRvbmUoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ldmVudHMudHJpZ2dlcignaW5pdGlhbGl6ZWQnLCB1bmRlZmluZWQpO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMub25TdGF0ZUNoYW5nZWQoe1xyXG4gICAgICAgICAgICAgICAgbmV3U3RhdGU6IHRoaXMuc3RhdGUuY3VycmVudFN0YXRlLFxyXG4gICAgICAgICAgICAgICAgb2xkU3RhdGU6IHVuZGVmaW5lZCxcclxuICAgICAgICAgICAgICAgIG5ld0RhdGE6IHVuZGVmaW5lZFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgaW5pdGlhbGl6ZVN0YXRlKCkge1xyXG4gICAgICAgICAgICB0aGlzLnN0YXRlID0gbmV3IHN0YXRlLlJpZGVTdHlsZXJTaG93Y2FzZVN0YXRlKFN0YXRlcy5DaG9vc2VWZWhpY2xlKTtcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLnNldHRpbmdzLmRlYnVnLnN0YXRlID09PSB0cnVlKSB0aGlzLnN0YXRlLmRlYnVnQ2FsbGJhY2sgPSBmdW5jdGlvbihlLCBmaW5pc2hlZCkge1xyXG4gICAgICAgICAgICAgICAgbGV0IGZpbmlzaGVkU3RyaW5nID0gZmluaXNoZWQgPyAnRmluaXNoZWQnIDogJ0JlZ2lubmluZyc7XHJcbiAgICAgICAgICAgICAgICBsZXQgc3RhdGVDaGFuZ2UgPSBcInRvIFwiICsgU3RhdGVzW2UubmV3U3RhdGVdO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgZS5vbGRTdGF0ZSA9PT0gJ251bWJlcicpIHtcclxuICAgICAgICAgICAgICAgICAgICBzdGF0ZUNoYW5nZSA9IFwiZnJvbSBcIiArIFN0YXRlc1tlLm9sZFN0YXRlXSArIFwiIFwiICsgc3RhdGVDaGFuZ2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFtSaWRlU3R5bGVyU2hvd2Nhc2UgU3RhdGVdICR7c3RhdGVDaGFuZ2V9ICR7ZmluaXNoZWRTdHJpbmd9YCwgZSk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB0aGlzLnN0YXRlLm9uQ2hhbmdlKChlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5ldmVudHMudHJpZ2dlcihcInN0YXRlLWNoYW5nZWRcIiwgZSkgJiYgdGhpcy5vblN0YXRlQ2hhbmdlZChlKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGluaXRpYWxpemVTdHlsZSgpIHtcclxuICAgICAgICAgICAgdGhpcy5zdHlsZSA9IG5ldyBzdHlsZXMuU3R5bGVNYW5hZ2VyKHRoaXMuY29udGFpbmVyKTtcclxuICAgICAgICAgICAgdGhpcy5zdHlsZS5vblJlc2l6ZSA9ICgpID0+IHRoaXMuZXZlbnRzLnRyaWdnZXIoJ3Jlc2l6ZScsIHVuZGVmaW5lZCk7XHJcbiAgICAgICAgICAgIHRoaXMuc3R5bGUub25SZXNpemVkID0gKCkgPT4gdGhpcy5ldmVudHMudHJpZ2dlcigncmVzaXplZCcsIHVuZGVmaW5lZCk7XHJcbiAgICAgICAgICAgIHRoaXMuc3R5bGUub25CcmVha3BvaW50Q2hhbmdlZCA9IG5ld0JyZWFrcG9pbnQgPT4gdGhpcy5ldmVudHMudHJpZ2dlcignYnJlYWtwb2ludC1jaGFuZ2VkJywgbmV3QnJlYWtwb2ludCk7XHJcblxyXG4gICAgICAgICAgICBpZiAoIXRoaXMuY29udGFpbmVyLmNsYXNzTGlzdC5jb250YWlucygncmlkZXN0eWxlci1zaG93Y2FzZScpKVxyXG4gICAgICAgICAgICAgICAgdGhpcy5jb250YWluZXIuY2xhc3NMaXN0LmFkZCgncmlkZXN0eWxlci1zaG93Y2FzZScpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBpbml0aWFsaXplRmlsdGVycygpIHtcclxuICAgICAgICAgICAgdGhpcy5maWx0ZXJzID0gbmV3IGZpbHRlcnMuRmlsdGVyQ29udHJvbGxlcigpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5ldmVudHMub24oXCJ2ZWhpY2xlLXNlbGVjdGVkXCIsIHNlbGVjdGlvbiA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmZpbHRlcnMuc2V0VmVoaWNsZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgdmVoaWNsZUNvbmZpZ3VyYXRpb25JRDogc2VsZWN0aW9uLlZlaGljbGVDb25maWd1cmF0aW9uLFxyXG4gICAgICAgICAgICAgICAgICAgIHZlaGljbGVUaXJlT3B0aW9uSUQ6IHNlbGVjdGlvbi5UaXJlT3B0aW9uSURcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRzLm9uKFwidmVoaWNsZS1kZXNjcmlwdGlvbi1sb2FkZWRcIiwgc2VsZWN0ZWRWZWhpY2xlID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZmlsdGVycy5zZXRWZWhpY2xlRGVzY3JpcHRpb24oe1xyXG4gICAgICAgICAgICAgICAgICAgIEhhc1NpZGVJbWFnZTogc2VsZWN0ZWRWZWhpY2xlLkhhc1NpZGVJbWFnZSxcclxuICAgICAgICAgICAgICAgICAgICBIYXNBbmdsZWRJbWFnZTogc2VsZWN0ZWRWZWhpY2xlLkhhc0FuZ2xlZEltYWdlXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGluaXRpYWxpemVDb21wb25lbnRzKCkge1xyXG4gICAgICAgICAgICBsZXQgY29udGFpbmVyID0gdGhpcy5jb250YWluZXI7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGxldCBjb21wb25lbnQgb2YgdGhpcy5vdGhlckNvbXBvbmVudHMpXHJcbiAgICAgICAgICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoY29tcG9uZW50LmNvbXBvbmVudCk7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGxldCBjb21wb25lbnQgb2YgdGhpcy5tYWluQ29tcG9uZW50cykge1xyXG4gICAgICAgICAgICAgICAgY29tcG9uZW50LnNldFZpc2libGUoZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGNvbXBvbmVudC5jb21wb25lbnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIHByaXZhdGUgb25TdGF0ZUNoYW5nZWQoZXY6IHN0YXRlLlN0YXRlQ2hhbmdlZEV2ZW50KTpib29sZWFuIHtcclxuICAgICAgICAgICAgdGhpcy51cGRhdGVDdXJyZW50Q29tcG9uZW50KGV2KTtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGFjdGl2ZUxvYWRpbmdTZXNzaW9uS2V5czogc3RyaW5nW10gPSBbXTtcclxuXHJcbiAgICAgICAgcHJpdmF0ZSB1cGRhdGVDdXJyZW50Q29tcG9uZW50KGV2OnN0YXRlLlN0YXRlQ2hhbmdlZEV2ZW50KSB7XHJcbiAgICAgICAgICAgIGxldCBuZXdDb21wb25lbnQ6TWFpbkNvbXBvbmVudEJhc2UgPSB0aGlzLnN0YXRlQ29tcG9uZW50TWFwcGluZ1tldi5uZXdTdGF0ZV07XHJcbiAgICAgICAgICAgIGxldCBvbGRDb21wb25lbnQ6TWFpbkNvbXBvbmVudEJhc2UgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgIGNvbnN0IHN0YXRlQ2xhc3NQcmVmaXggPSAncmlkZXN0eWxlci1zaG93Y2FzZS1zdGF0ZS0nO1xyXG5cclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBldi5vbGRTdGF0ZSA9PT0gJ251bWJlcicpIHtcclxuICAgICAgICAgICAgICAgIG9sZENvbXBvbmVudCA9IHRoaXMuc3RhdGVDb21wb25lbnRNYXBwaW5nW2V2Lm9sZFN0YXRlXTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoc3RhdGVDbGFzc1ByZWZpeCArIFN0YXRlc1tldi5vbGRTdGF0ZV0udG9Mb3dlckNhc2UoKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHRoaXMuY29udGFpbmVyLmNsYXNzTGlzdC5hZGQoc3RhdGVDbGFzc1ByZWZpeCArIFN0YXRlc1tldi5uZXdTdGF0ZV0udG9Mb3dlckNhc2UoKSk7XHJcblxyXG4gICAgICAgICAgICBpZiAob2xkQ29tcG9uZW50ICYmIG9sZENvbXBvbmVudC5pc1Zpc2libGUoKSkge1xyXG4gICAgICAgICAgICAgICAgb2xkQ29tcG9uZW50LmhpZGUoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIG5ld0NvbXBvbmVudC5zaG93KCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIG5ld0NvbXBvbmVudC5zaG93KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGUgYSBSaWRlU3R5bGVyIFNob3djYXNlIGluc3RhbmNlIGFuZCBkbyBub3QgaW5pdGlhbGl6ZSBpdFxyXG4gICAgICogQHBhcmFtIHNldHRpbmdzXHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBmdW5jdGlvbiBjcmVhdGUoc2V0dGluZ3M/OlJpZGVTdHlsZXJTaG93Y2FzZVNldHRpbmdzKTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZSBhIFJpZGVTdHlsZXIgU2hvd2Nhc2UgaW5zdGFuY2UgYW5kIGluaXRpYWxpemUgaXQgaW5zaWRlIGEgY29udGFpbmVyIHdpdGggdGhlIHNwZWNpZmllZCBJRFxyXG4gICAgICogQHBhcmFtIGNvbnRhaW5lcklEIFNwZWNpZmllcyB0aGUgSUQgb2YgdGhlIGNvbnRhaW5lciB0byBpbml0aWFsaXplIHRoZSBzaG93Y2FzZSBpblxyXG4gICAgICogQHBhcmFtIHNldHRpbmdzXHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBmdW5jdGlvbiBjcmVhdGUoY29udGFpbmVySUQ6IHN0cmluZywgc2V0dGluZ3M/OlJpZGVTdHlsZXJTaG93Y2FzZVNldHRpbmdzKTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZSBhIFJpZGVTdHlsZXIgU2hvd2Nhc2UgaW5zdGFuY2UgYW5kIGluaXRpYWxpemUgaXQgaW5zaWRlIHRoZSBzcGVjaWZpZWQgY29udGFpbmVyXHJcbiAgICAgKiBAcGFyYW0gY29udGFpbmVyIFNwZWNpZmllcyB0aGUgZWxlbWVudCB0byBpbml0aWFsaXplIHRoZSBzaG93Y2FzZSBpblxyXG4gICAgICogQHBhcmFtIHNldHRpbmdzXHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBmdW5jdGlvbiBjcmVhdGUgKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsIHNldHRpbmdzPzpSaWRlU3R5bGVyU2hvd2Nhc2VTZXR0aW5ncyk7XHJcblxyXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZSAoY29udGFpbmVyPzogYW55LCBzZXR0aW5ncz86UmlkZVN0eWxlclNob3djYXNlU2V0dGluZ3MpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFJpZGVTdHlsZXJTaG93Y2FzZUluc3RhbmNlKGNvbnRhaW5lciwgc2V0dGluZ3MpO1xyXG4gICAgfVxyXG59IiwibmFtZXNwYWNlIFJpZGVTdHlsZXJTaG93Y2FzZSB7XHJcbiAgICBleHBvcnQgYWJzdHJhY3QgY2xhc3MgQ29tcG9uZW50QmFzZSBpbXBsZW1lbnRzIElDb21wb25lbnQge1xyXG4gICAgICAgIGNvbnN0cnVjdG9yIChzaG93Y2FzZUluc3RhbmNlOiBSaWRlU3R5bGVyU2hvd2Nhc2VJbnN0YW5jZSkge1xyXG4gICAgICAgICAgICB0aGlzLnNob3djYXNlID0gc2hvd2Nhc2VJbnN0YW5jZTtcclxuICAgICAgICAgICAgdGhpcy5ldmVudHMgPSBzaG93Y2FzZUluc3RhbmNlLmV2ZW50cztcclxuICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IHNob3djYXNlSW5zdGFuY2Uuc3RhdGU7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmluaXRpYWxpemVDb21wb25lbnQoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgcHJvdGVjdGVkIHJlYWRvbmx5IHNob3djYXNlOlJpZGVTdHlsZXJTaG93Y2FzZUluc3RhbmNlO1xyXG4gICAgICAgIHByb3RlY3RlZCByZWFkb25seSBldmVudHM6ZXZlbnRzLkV2ZW50SGFuZGxlcjtcclxuICAgICAgICBwcm90ZWN0ZWQgcmVhZG9ubHkgc3RhdGU6c3RhdGUuUmlkZVN0eWxlclNob3djYXNlU3RhdGU7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVGhlIG1haW4gZWxlbWVudCBmb3IgdGhpcyBjb21wb25lbnRcclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgY29tcG9uZW50OiBIVE1MRWxlbWVudDtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQSBvdmVycmlkYWJsZSBmdW5jdGlvbiBjYWxsZWQgYWZ0ZXIgdGhlIGJhc2UgY29tcG9uZW50IGlzIGluaXRpYWxpemVkXHJcbiAgICAgICAgICogQHZpcnR1YWxcclxuICAgICAgICAgKi9cclxuICAgICAgICBwcm90ZWN0ZWQgaW5pdGlhbGl6ZUNvbXBvbmVudCgpIHt9XHJcbiAgICB9XHJcbn0iLG51bGwsIm5hbWVzcGFjZSBSaWRlU3R5bGVyU2hvd2Nhc2Uge1xyXG4gICAgZXhwb3J0IGFic3RyYWN0IGNsYXNzIE1haW5Db21wb25lbnRCYXNlIGV4dGVuZHMgQ29tcG9uZW50QmFzZSB7XHJcbiAgICAgICAgY29tcG9uZW50OiBIVE1MRWxlbWVudDtcclxuXHJcbiAgICAgICAgY29uc3RydWN0b3Ioc2hvd2Nhc2VJbnN0YW5jZTpSaWRlU3R5bGVyU2hvd2Nhc2VJbnN0YW5jZSkge1xyXG4gICAgICAgICAgICBzdXBlcihzaG93Y2FzZUluc3RhbmNlKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuY29tcG9uZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgIHRoaXMuY29tcG9uZW50LmNsYXNzTGlzdC5hZGQoJ3JpZGVzdHlsZXItc2hvd2Nhc2UtbWFpbi1jb21wb25lbnQnKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChTdHlsZUhlbHBlci50cmFuc2l0aW9uc1N1cHBvcnRlZClcclxuICAgICAgICAgICAgICAgIHRoaXMuY29tcG9uZW50LmFkZEV2ZW50TGlzdGVuZXIoU3R5bGVIZWxwZXIudHJhbnNpdGlvbkVuZEV2ZW50LCBlID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBPbmx5IHRyYW5zaXRpb25zIG9uIHRoaXMgY29tcG9uZW50IGVsZW1lbnRcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXQgIT09IHRoaXMuY29tcG9uZW50KSByZXR1cm47XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMub25UcmFuc2l0aW9uRW5kKCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuc2V0VmlzaWJsZShmYWxzZSk7XHJcbiAgICAgICAgICAgIHRoaXMuYnVpbGRDb21wb25lbnQodGhpcy5jb21wb25lbnQpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgdGhpcy5pbml0aWFsaXplTWFpbkNvbXBvbmVudCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQSBvdmVycmlkYWJsZSBmdW5jdGlvbiBjYWxsZWQgYWZ0ZXIgdGhlIGJhc2UgY29tcG9uZW50IGlzIGNvbnN0cnVjdGVkXHJcbiAgICAgICAgICogQHZpcnR1YWxcclxuICAgICAgICAgKi9cclxuICAgICAgICBwcm90ZWN0ZWQgaW5pdGlhbGl6ZUNvbXBvbmVudCgpIHtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEEgb3ZlcnJpZGFibGUgZnVuY3Rpb24gY2FsbGVkIGFmdGVyIHRoZSBtYWluIGNvbXBvbmVudCBpcyBjb25zdHJ1Y3RlZFxyXG4gICAgICAgICAqIEB2aXJ0dWFsXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHJvdGVjdGVkIGluaXRpYWxpemVNYWluQ29tcG9uZW50KCkge31cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBfdmlzaWJsZTogYm9vbGVhbjtcclxuICAgICAgICBwcml2YXRlIF9hbmltYXRpbmc6IGJvb2xlYW47XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBwYXJhbSBjb250YWluZXIgVGhlIGNvbnRhaW5lciB0byBidWlsZCB0aGUgY29tcG9uZW50IGluXHJcbiAgICAgICAgICovXHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBhYnN0cmFjdCBidWlsZENvbXBvbmVudChjb250YWluZXI6SFRNTEVsZW1lbnQpO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBXaGV0aGVyIG9yIG5vdCB0aGlzIGNvbXBvbmVudCBpcyB2aXNpYmxlXHJcbiAgICAgICAgICogQHJldHVybiB0cnVlLCBpZiB0aGlzIGNvbXBvbmVudCBpcyB2aXNpYmxlLCBvdGhlcndpc2UgZmFsc2VcclxuICAgICAgICAgKi9cclxuICAgICAgICBpc1Zpc2libGUoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl92aXNpYmxlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogSGlkZS9zaG93IHRoZSBjb21wb25lbnQgd2l0aG91dCBhbmltYXRpb25cclxuICAgICAgICAgKiBAcGFyYW0gdmlzaWJsZSBJZiB0cnVlLCBzaG93IHRoZSBjb21wb25lbnQsIG90aGVyd2lzZSBoaWRlIHRoZSBjb21wb25lbnRcclxuICAgICAgICAgKi9cclxuICAgICAgICBzZXRWaXNpYmxlKHZpc2libGU6Ym9vbGVhbikge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fdmlzaWJsZSA9PT0gdmlzaWJsZSkgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5fdmlzaWJsZSA9IHZpc2libGU7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0VmlzaWJsZVN0eWxpbmcodmlzaWJsZSlcclxuXHJcbiAgICAgICAgICAgIFN0eWxlSGVscGVyLnNraXBUcmFuc2l0aW9uKHRoaXMuY29tcG9uZW50LCAoKSA9PiB2aXNpYmxlID8gdGhpcy5zaG93KCkgOiB0aGlzLmhpZGUoKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIHNldFZpc2libGVTdHlsaW5nKHZpc2libGU6Ym9vbGVhbikge1xyXG4gICAgICAgICAgICBsZXQgc3R5bGVzID0gdGhpcy5jb21wb25lbnQuc3R5bGU7XHJcblxyXG4gICAgICAgICAgICBpZiAodmlzaWJsZSkge1xyXG4gICAgICAgICAgICAgICAgc3R5bGVzLnZpc2liaWxpdHkgPSAndmlzaWJsZSc7XHJcbiAgICAgICAgICAgICAgICBzdHlsZXMudG9wID0gJyc7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBzdHlsZXMudmlzaWJpbGl0eSA9ICdoaWRkZW4nO1xyXG4gICAgICAgICAgICAgICAgc3R5bGVzLnRvcCA9ICcxMDAwJSc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgY2FsbFdoZW5Eb25lQW5pbWF0aW5nKGNhbGxiYWNrOih0aGlzOnRoaXMpPT52b2lkKSB7XHJcbiAgICAgICAgICAgIC8vIENhbGwgdGhlIGNhbGxiYWNrIGFmdGVyIHRoZSB2aWV3IGhhcyBiZWVuIGFuaW1hdGVkIGluIFxyXG4gICAgICAgICAgICBpZiAodGhpcy5fYW5pbWF0aW5nKSBTdHlsZUhlbHBlci5vbk5leHRUcmFuc2l0aW9uRW5kKHRoaXMuY29tcG9uZW50LCAoKSA9PiBjYWxsYmFjay5jYWxsKHRoaXMpKTtcclxuICAgICAgICAgICAgZWxzZSBjYWxsYmFjay5jYWxsKHRoaXMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQ2FsbGVkIGJlZm9yZSB0aGlzIGNvbXBvbmVudCBpcyBzaG93blxyXG4gICAgICAgICAqIEB2aXJ0dWFsXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHJvdGVjdGVkIG9uU2hvdygpIHt9XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQ2FsbGVkIGJlZm9yZSB0aGlzIGNvbXBvbmVudCBpcyBzaG93biBidXQgYWZ0ZXIgaXQgaGFzIHJlY2VpdmVkIGRpbWVuc2lvbnNcclxuICAgICAgICAgKi9cclxuICAgICAgICBwcm90ZWN0ZWQgb25EaXNwbGF5KCkge31cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBDYWxsZWQgYWZ0ZXIgdGhlIGNvbXBvbmVudCBpcyBzaG93blxyXG4gICAgICAgICAqIEB2aXJ0dWFsXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHJvdGVjdGVkIG9uU2hvd24oKXt9XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQ2FsbGVkIGJlZm9yZSB0aGUgY29tcG9uZW50IGlzIGhpZGRlblxyXG4gICAgICAgICAqIEB2aXJ0dWFsXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHJvdGVjdGVkIG9uSGlkZSgpIHt9XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQ2FsbGVkIGFmdGVyIHRoZSBjb21wb25lbnQgaXMgaGlkZGVuXHJcbiAgICAgICAgICogQHZpcnR1YWxcclxuICAgICAgICAgKi9cclxuICAgICAgICBwcm90ZWN0ZWQgb25IaWRkZW4oKSB7fVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBBbmltYXRlIHRoZSBjb21wb25lbnQgaW50byB0aGUgdmlld1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHNob3coY2FsbGJhY2s/Oih0aGlzOnRoaXMpPT52b2lkKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbXBvbmVudC5jbGFzc0xpc3QuY29udGFpbnMoJ2luJykpIHtcclxuICAgICAgICAgICAgICAgIC8vIFRoZSBjb21wb25lbnQgaXMgYWxyZWFkeSB2aXNpYmxlLCB0cmlnZ2VyIHRoZSBjYWxsYmFjayBhcyBuZWVkZWRcclxuICAgICAgICAgICAgICAgIHRoaXMuX3Zpc2libGUgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNhbGxXaGVuRG9uZUFuaW1hdGluZyhjYWxsYmFjayk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5fYW5pbWF0aW5nKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBUaGlzIHZpZXcgaXMgYW5pbWF0aW5nIG91dCwgc2hvdyBpdCBhZnRlciBpdCdzIGRvbmVcclxuICAgICAgICAgICAgICAgIFN0eWxlSGVscGVyLm9uTmV4dFRyYW5zaXRpb25FbmQodGhpcy5jb21wb25lbnQsICgpID0+IHRoaXMuc2hvdyhjYWxsYmFjaykpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLl92aXNpYmxlID0gdHJ1ZTtcclxuICAgICAgICAgICAgdGhpcy5fYW5pbWF0aW5nID0gU3R5bGVIZWxwZXIudHJhbnNpdGlvbnNTdXBwb3J0ZWQ7XHJcblxyXG5cclxuICAgICAgICAgICAgdGhpcy5vblNob3coKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHRoaXMuc2V0VmlzaWJsZVN0eWxpbmcodHJ1ZSk7XHJcblxyXG4gICAgICAgICAgICBTdHlsZUhlbHBlci50cmlnZ2VyUmVmbG93KHRoaXMuY29tcG9uZW50KTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMub25EaXNwbGF5KCk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmNhbGxXaGVuRG9uZUFuaW1hdGluZyhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9uU2hvd24oKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGNhbGxiYWNrID09PSAnZnVuY3Rpb24nKVxyXG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrLmNhbGwodGhpcyk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5jb21wb25lbnQuY2xhc3NMaXN0LmFkZCgnaW4nKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQW5pbWF0ZSB0aGUgY29tcG9uZW50IG91dCBvZiB0aGUgdmlld1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGhpZGUoY2FsbGJhY2s/Oih0aGlzOnRoaXMpPT52b2lkKSB7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5jb21wb25lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCdpbicpKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBBbHJlYWR5IGhpZGRlblxyXG4gICAgICAgICAgICAgICAgdGhpcy5fdmlzaWJsZSA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNhbGxXaGVuRG9uZUFuaW1hdGluZyhjYWxsYmFjayk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5fYW5pbWF0aW5nKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBUaGlzIHZpZXcgaXMgYW5pbWF0aW5nIGluLCBzaG93IGl0IGFmdGVyIGl0J3MgZG9uZVxyXG4gICAgICAgICAgICAgICAgU3R5bGVIZWxwZXIub25OZXh0VHJhbnNpdGlvbkVuZCh0aGlzLmNvbXBvbmVudCwgKCkgPT4gdGhpcy5oaWRlKGNhbGxiYWNrKSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMuX3Zpc2libGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgdGhpcy5fYW5pbWF0aW5nID0gU3R5bGVIZWxwZXIudHJhbnNpdGlvbnNTdXBwb3J0ZWQ7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB0aGlzLm9uSGlkZSgpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5jYWxsV2hlbkRvbmVBbmltYXRpbmcoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vbkhpZGRlbigpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgPT09ICdmdW5jdGlvbicpXHJcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2suY2FsbCh0aGlzKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmNvbXBvbmVudC5jbGFzc0xpc3QucmVtb3ZlKCdpbicpO1xyXG5cclxuICAgICAgICAgICAgaWYgKCFTdHlsZUhlbHBlci50cmFuc2l0aW9uc1N1cHBvcnRlZClcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0VmlzaWJsZVN0eWxpbmcoZmFsc2UpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogSGlkZSBjb21wb25lbnRzIGFmdGVyIHRyYW5zaXRpb24gb3V0XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgb25UcmFuc2l0aW9uRW5kKCkge1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuY29tcG9uZW50LmNsYXNzTGlzdC5jb250YWlucygnaW4nKSlcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0VmlzaWJsZVN0eWxpbmcoZmFsc2UpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5fYW5pbWF0aW5nID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59IiwibmFtZXNwYWNlIFJpZGVTdHlsZXJTaG93Y2FzZSB7XG4gICAgaW1wb3J0IEJveCA9IFJlc2l6ZWFibGVSZXNvdXJjZUltYWdlLkJveDtcblxuICAgIGNvbnN0IGRlZmF1bHRTaXplOkJveCA9IHtcbiAgICAgICAgd2lkdGg6IDIwMCxcbiAgICAgICAgaGVpZ2h0OiAyMDBcbiAgICB9O1xuXG4gICAgY29uc3QgbWluaW11bVNpemU6Qm94ID0ge1xuICAgICAgICB3aWR0aDogNTAsXG4gICAgICAgIGhlaWdodDogNTBcbiAgICB9O1xuXG4gICAgY29uc3QgbWF4aW11bVNpemU6Qm94ID0ge1xuICAgICAgICB3aWR0aDogODAwLFxuICAgICAgICBoZWlnaHQ6IDgwMFxuICAgIH07XG5cbiAgICBjb25zdCBkZWZhdWx0UG9zaXRpb246cmlkZXN0eWxlci5SZXF1ZXN0cy5JbWFnZVJlbmRlclJlcXVlc3QgPSB7XG4gICAgICAgIFBvc2l0aW9uWTogcmlkZXN0eWxlci5SZXF1ZXN0cy5JbWFnZVBvc2l0aW9uLk5lYXIsIC8vIFRvcCxcbiAgICAgICAgUG9zaXRpb25YOiByaWRlc3R5bGVyLlJlcXVlc3RzLkltYWdlUG9zaXRpb24uTmVhciAgLy8gTGVmdFxuICAgIH1cblxuICAgIGV4cG9ydCBjbGFzcyBSZXNpemVhYmxlUmVzb3VyY2VJbWFnZTxcbiAgICAgICAgRW5kcG9pbnQgZXh0ZW5kcyByaWRlc3R5bGVyLlJpZGVTdHlsZXJBUElFbmRwb2ludCxcbiAgICAgICAgSW1hZ2VSZW5kZXJpbmdJbnN0cnVjdGlvbnMgZXh0ZW5kcyByaWRlc3R5bGVyLlJpZGVzdHlsZXJBUElBY3Rpb25SZXF1ZXN0TWFwcGluZ1tFbmRwb2ludF18cmlkZXN0eWxlci5SZXF1ZXN0cy5JbWFnZVJlbmRlclJlcXVlc3RcbiAgICAgICAgICAgICA9IHJpZGVzdHlsZXIuUmlkZXN0eWxlckFQSUFjdGlvblJlcXVlc3RNYXBwaW5nW0VuZHBvaW50XVxuICAgID4ge1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgYm91bmRpbmcgY29udGFpbmVyIGZvciB0aGUgaW1hZ2VcbiAgICAgICAgICovXG4gICAgICAgIHByaXZhdGUgcmVhZG9ubHkgY29udGFpbmVyOkhUTUxFbGVtZW50O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgaW1hZ2VcbiAgICAgICAgICovXG4gICAgICAgIHB1YmxpYyByZWFkb25seSBpbWFnZTpIVE1MSW1hZ2VFbGVtZW50O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgY3VycmVudGx5IGRldGVjdGVkIHNpemUgb2YgdGhlIGNvbnRhaW5lclxuICAgICAgICAgKi9cbiAgICAgICAgcHJpdmF0ZSBjdXJyZW50U2l6ZTpCb3g7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBSaWRlU3R5bGVyIEFQSSBhY3Rpb24gdG8gY2FsbCB0byByZW5kZXIgdGhlIGltYWdlXG4gICAgICAgICAqL1xuICAgICAgICBwcml2YXRlIHJlYWRvbmx5IGFjdGlvbjpFbmRwb2ludDtcbiAgICAgICAgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIHNldCBvZiBiYXNlIGluc3RydWN0aW9ucyB0byByZW5kZXIgdGhlIHZlaGljbGUgd2l0aFxuICAgICAgICAgKi9cbiAgICAgICAgcHJpdmF0ZSBiYXNlSW5zdHJ1Y3Rpb25zOkltYWdlUmVuZGVyaW5nSW5zdHJ1Y3Rpb25zO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgY3VycmVudCBpbnN0cnVjdGlvbnMvcGFyYW1ldGVycyB0byByZW5kZXIgdGhlIGltYWdlIHdpdGhcbiAgICAgICAgICovXG4gICAgICAgIHByaXZhdGUgaW5zdHJ1Y3Rpb25zOkltYWdlUmVuZGVyaW5nSW5zdHJ1Y3Rpb25zO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJZiB0cnVlIHRoZSBpbWFnZSBpcyB2aXNpYmxlIChvciB0cmFuc2l0aW9uaW5nIHRvIGJlIHZpc2libGUpXG4gICAgICAgICAqL1xuICAgICAgICBwcml2YXRlIHZpc2libGU6Ym9vbGVhbjtcblxuICAgICAgICAvKipcbiAgICAgICAgICogSWYgdHJ1ZSwgdHJhbnNpdGlvbnMgc2hvdWxkIGJlIHVzZWRcbiAgICAgICAgICovXG4gICAgICAgIHByaXZhdGUgcmVhZG9ubHkgdXNlVHJhbnNpdGlvbnM6Ym9vbGVhbjtcblxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGNsYXNzIHRvIGF0dGFjaCB0byB0aGUgZWxlbWVudCB0byBzaG93IGl0IHdpdGggYSB0cmFuc2l0aW9uXG4gICAgICAgICAqL1xuICAgICAgICBwcml2YXRlIHJlYWRvbmx5IHRyYW5zaXRpb25JbkNsYXNzOnN0cmluZztcblxuICAgICAgICAvKipcbiAgICAgICAgICogQSBjYWxsYmFjayB0byBhdHRhY2ggdG8gdGhlIGltYWdlIGxvYWQgZXZlbnRcbiAgICAgICAgICovXG4gICAgICAgIHByaXZhdGUgcmVhZG9ubHkgaW1hZ2VMb2FkQ2FsbGJhY2s6UmVzaXplYWJsZVJlc291cmNlSW1hZ2UuSW1hZ2VMb2FkQ2FsbGJhY2s7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgY2FsbGJhY2sgdG8gYXR0YWNoIHRvIHRoZSBpbWFnZSBlcnJvciBldmVudFxuICAgICAgICAgKi9cbiAgICAgICAgcHJpdmF0ZSByZWFkb25seSBpbWFnZUVycm9yQ2FsbGJhY2s6UmVzaXplYWJsZVJlc291cmNlSW1hZ2UuSW1hZ2VFcnJvckNhbGxiYWNrO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIGNhbGxiYWNrIHRvIGNhbGwgd2hlbiB0aGUgaW1hZ2UgaXMgZGlzcGxheWVkXG4gICAgICAgICAqL1xuICAgICAgICBwcml2YXRlIHJlYWRvbmx5IGltYWdlRGlzcGxheUNhbGxiYWNrOlJlc2l6ZWFibGVSZXNvdXJjZUltYWdlLkltYWdlRXZlbnRDYWxsYmFjaztcblxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIHBhZGRpbmcgb2YgdGhlIGNvbnRhaW5lciBvciBwYWRkaW5nIGNhbGN1bGF0b3JcbiAgICAgICAgICovXG4gICAgICAgIHByaXZhdGUgcmVhZG9ubHkgcGFkZGluZzogQm94fFJlc2l6ZWFibGVSZXNvdXJjZUltYWdlLlBhZGRpbmdDYWxjdWxhdG9yO1xuXG4gICAgICAgIHByaXZhdGUgcmVhZG9ubHkgZXZlbnRzOltFdmVudFRhcmdldCxzdHJpbmcsRXZlbnRMaXN0ZW5lcl1bXTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQHBhcmFtIGNvbnRhaW5lciBUaGUgY29udGFpbmVyIHRvIHJlbmRlciB0aGUgaW1hZ2UgaW5cbiAgICAgICAgICogQHBhcmFtIG9wdGlvbnNcbiAgICAgICAgICovXG4gICAgICAgIGNvbnN0cnVjdG9yKGNvbnRhaW5lcjpIVE1MRWxlbWVudCwgb3B0aW9uczp7XG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIFRoZSBpbWFnZSBlbmRwb2ludFxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBhY3Rpb246IEVuZHBvaW50LFxuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIEluc3RydWN0aW9ucyBmb3IgcmVuZGVyaW5nIHRoZSBpbWFnZVxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBpbnN0cnVjdGlvbnM/OiBJbWFnZVJlbmRlcmluZ0luc3RydWN0aW9ucyxcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBCYXNlIGluc3RydWN0aW9ucyBmb3IgcmVuZGVyaW5nIHRoZSBpbWFnZVxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBiYXNlSW5zdHJ1Y3Rpb25zPzogSW1hZ2VSZW5kZXJpbmdJbnN0cnVjdGlvbnMsXG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogSWYgdHJ1ZSwgbG9hZCB0aGUgaW1hZ2Ugd2hlbiBmaXJzdCBjcmVhdGVkXG4gICAgICAgICAgICAgKiBAZGVmYXVsdCBmYWxzZVxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBsb2FkSW5pdGlhbGx5PzogYm9vbGVhbjtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBJZiB0cnVlLCBsaXN0ZW4gdG8gdGhlIHdpbmRvdyByZXNpemUgZXZlbnRcbiAgICAgICAgICAgICAqIEBkZWZhdWx0IHRydWVcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgbGlzdGVuVG9XaW5kb3dSZXNpemU/OiBib29sZWFuO1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIEEgZnVuY3Rpb24gdG8gY2FsbCBlYWNoIHRpbWUgdGhlIGltYWdlIGlzIGxvYWRlZFxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBvbkxvYWQ/OiBSZXNpemVhYmxlUmVzb3VyY2VJbWFnZS5JbWFnZUxvYWRDYWxsYmFjaztcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBBIGZ1bmN0aW9uIHRvIGNhbGwgd2hlbiB0aGUgaW1hZ2UgaGFzIGFuIGVycm9yIGxvYWRpbmdcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgb25FcnJvcj86IFJlc2l6ZWFibGVSZXNvdXJjZUltYWdlLkltYWdlRXJyb3JDYWxsYmFjaztcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBBIGZ1bmN0aW9uIHRvIGNhbGwgd2hlbiB0aGUgaW1hZ2UgaXMgZnVsbHkgdmlzaWJsZSAoYWZ0ZXIgYW55IHRyYW5zaXRpb25zKVxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBvbkRpc3BsYXllZD86IFJlc2l6ZWFibGVSZXNvdXJjZUltYWdlLkltYWdlRXZlbnRDYWxsYmFjaztcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBUaGUgcGFkZGluZyBmb3IgdGhlIGNvbnRhaW5lciB0byBkaXNwbGF5IHRoZSBpbWFnZSBpbi4gSWYgbm90IHNwZWNpZmllZFxuICAgICAgICAgICAgICogaXQgd2lsbCBiZSBjYWxjdWxhdGVkLiBJZiBmYWxzZSBwYWRkaW5nIHdpbGwgbm90IGJlIGNhbGN1bGF0ZWQuXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIHBhZGRpbmc/OiBmYWxzZXxSZXNpemVhYmxlUmVzb3VyY2VJbWFnZS5Cb3h8UmVzaXplYWJsZVJlc291cmNlSW1hZ2UuUGFkZGluZ0NhbGN1bGF0b3I7XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogSWYgc3BlY2lmaWVkIHVzZSB0aGUgZm9sbG93aW5nIHRyYW5zaXRpb24gY2xhc3MgdG8gZGlzcGxheSB0aGUgaW1hZ2UuXG4gICAgICAgICAgICAgKiBJZiB1bnNwZWNpZmllZCBkb24ndCB1c2UgdHJhbnNpdGlvbnNcbiAgICAgICAgICAgICAqIEBkZWZhdWx0IHVuZGVmaW5lZFxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICB0cmFuc2l0aW9uQ2xhc3M/OiBzdHJpbmc7XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogVGhlIGNsYXNzIHRvIGFwcGx5IHRvIHRoZSBpbWFnZSB0byB0cmFuc2l0aW9uIGl0IFwiaW5cIlxuICAgICAgICAgICAgICogQGRlZmF1bHQgXCJpblwiXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIHRyYW5zaXRpb25JbkNsYXNzPzogc3RyaW5nO1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIFRoZSBkZWZhdWx0IHNpemUgYXQgd2hpY2ggdG8gcmVuZGVyIHRoZSBpbWFnZSBpZiBvbmUgY2Fubm90XG4gICAgICAgICAgICAgKiBiZSBjYWxjdWxhdGVkIGZyb20gdGhlIGNvbnRhaW5lclxuICAgICAgICAgICAgICogQGRlZmF1bHQge1wid2lkdGhcIjogMjAwLCBcImhlaWdodFwiOiAyMDB9XG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGRlZmF1bHRTaXplPzoge1xuICAgICAgICAgICAgICAgIHdpZHRoOiBudW1iZXIsXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiBudW1iZXJcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkge1xuICAgICAgICAgICAgdGhpcy5jb250YWluZXIgPSBjb250YWluZXI7XG5cbiAgICAgICAgICAgIHRoaXMuYWN0aW9uID0gb3B0aW9ucy5hY3Rpb247XG5cbiAgICAgICAgICAgIHRoaXMuaW1hZ2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcbiAgICAgICAgICAgIHRoaXMuY29udGFpbmVyLmFwcGVuZENoaWxkKHRoaXMuaW1hZ2UpO1xuXG4gICAgICAgICAgICB0aGlzLmV2ZW50cyA9IFtdO1xuXG4gICAgICAgICAgICBpZiAob3B0aW9ucy50cmFuc2l0aW9uQ2xhc3MpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmltYWdlLmNsYXNzTGlzdC5hZGQob3B0aW9ucy50cmFuc2l0aW9uQ2xhc3MpO1xuICAgICAgICAgICAgICAgIHRoaXMudXNlVHJhbnNpdGlvbnMgPSB0cnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLnRyYW5zaXRpb25JbkNsYXNzID0gb3B0aW9ucy50cmFuc2l0aW9uSW5DbGFzcztcblxuICAgICAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zLnBhZGRpbmcgPT09ICd1bmRlZmluZWQnKSB0aGlzLnBhZGRpbmcgPSBTdHlsZUhlbHBlci5jYWxjdWxhdGVQYWRkaW5nO1xuICAgICAgICAgICAgZWxzZSBpZiAob3B0aW9ucy5wYWRkaW5nID09PSBmYWxzZSkgdGhpcy5wYWRkaW5nID0ge3dpZHRoOiAwLCBoZWlnaHQ6IDB9O1xuICAgICAgICAgICAgZWxzZSB0aGlzLnBhZGRpbmcgPSBvcHRpb25zLnBhZGRpbmc7XG5cbiAgICAgICAgICAgIHRoaXMuaW1hZ2VMb2FkQ2FsbGJhY2sgPSBvcHRpb25zLm9uTG9hZDtcbiAgICAgICAgICAgIHRoaXMuaW1hZ2VFcnJvckNhbGxiYWNrID0gb3B0aW9ucy5vbkVycm9yO1xuXG4gICAgICAgICAgICB0aGlzLmltYWdlLmFkZEV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgZXJyb3IgPT4gdGhpcy5vbkltYWdlRXJyb3IoZXJyb3IpKTtcbiAgICAgICAgICAgIHRoaXMuaW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIGV2ZW50ID0+IHRoaXMub25JbWFnZUxvYWQoZXZlbnQpKTtcblxuICAgICAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zLmJhc2VJbnN0cnVjdGlvbnMgPT09ICdvYmplY3QnKSB0aGlzLmJhc2VJbnN0cnVjdGlvbnMgPSBvcHRpb25zLmJhc2VJbnN0cnVjdGlvbnNcblxuICAgICAgICAgICAgaWYgKHRoaXMuaW5zdHJ1Y3Rpb25zICYmIG9wdGlvbnMubG9hZEluaXRpYWxseSAhPT0gZmFsc2UpXG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGUodGhpcy5pbnN0cnVjdGlvbnMpO1xuXG4gICAgICAgICAgICBpZiAob3B0aW9ucy5saXN0ZW5Ub1dpbmRvd1Jlc2l6ZSAhPT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICBsZXQgdGltZW91dDpudW1iZXI7XG4gICAgICAgICAgICAgICAgY29uc3Qgd2FpdE1zID0gNTAwO1xuICAgIFxuICAgICAgICAgICAgICAgIGNvbnN0IHJlc2l6ZUNhbGxiYWNrID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dCk7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgIHRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlKCk7XG4gICAgICAgICAgICAgICAgICAgIH0sIHdhaXRNcyk7XG4gICAgICAgICAgICAgICAgfTtcbiAgICBcbiAgICAgICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgcmVzaXplQ2FsbGJhY2ssIGZhbHNlKTtcbiAgICAgICAgICAgICAgICB0aGlzLmV2ZW50cy5wdXNoKFt3aW5kb3csICdyZXNpemUnLCByZXNpemVDYWxsYmFja10pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENhbGwgdGhpcyBmdW5jdGlvbiBhZnRlciB0aGUgY29tcG9uZW50IHdpbGwgbm8gbG9uZ2VyIGJlIHVzZWRcbiAgICAgICAgICogdG8gcmVtb3ZlIGFueSBpbnRlcm5hbGx5IGF0dGFjaGVkIGV2ZW50IGhhbmRsZXJzXG4gICAgICAgICAqL1xuICAgICAgICBwdWJsaWMgZGVzdHJveSgpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgcmVnaXN0ZXJlZEV2ZW50IG9mIHRoaXMuZXZlbnRzKSB7XG4gICAgICAgICAgICAgICAgbGV0IFt0YXJnZXQsIGV2ZW50VHlwZSwgbGlzdGVuZXJdID0gcmVnaXN0ZXJlZEV2ZW50O1xuXG4gICAgICAgICAgICAgICAgdGFyZ2V0LnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnRUeXBlLCBsaXN0ZW5lcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBwcml2YXRlIHJlc2l6ZUNhbGxiYWNrID0gKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy51cGRhdGUoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBdHRhY2hlZCB0byB0aGUgaW1hZ2UgZXJyb3IgZXZlbnRcbiAgICAgICAgICogQHBhcmFtIGVycm9yRXZlbnQgVGhlIGVycm9yIGV2ZW50XG4gICAgICAgICAqL1xuICAgICAgICBwcml2YXRlIG9uSW1hZ2VFcnJvcihlcnJvckV2ZW50OkVycm9yRXZlbnQpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgdGhpcy5pbWFnZUVycm9yQ2FsbGJhY2sgPT09ICdmdW5jdGlvbicpIFxuICAgICAgICAgICAgICAgIHRoaXMuaW1hZ2VFcnJvckNhbGxiYWNrKHRoaXMuaW1hZ2UsIGVycm9yRXZlbnQpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEF0dGFjaGVkIHRvIHRoZSBpbWFnZSBsb2FkIGV2ZW50XG4gICAgICAgICAqIEBwYXJhbSBldmVudCBUaGUgaW1hZ2UgbG9hZCBldmVudFxuICAgICAgICAgKi9cbiAgICAgICAgcHJpdmF0ZSBvbkltYWdlTG9hZChldmVudDpFdmVudCkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiB0aGlzLmltYWdlTG9hZENhbGxiYWNrID09PSAnZnVuY3Rpb24nKSBcbiAgICAgICAgICAgICAgICB0aGlzLmltYWdlTG9hZENhbGxiYWNrKHRoaXMuaW1hZ2UsIGV2ZW50KTtcblxuICAgICAgICAgICAgaWYgKCF0aGlzLnZpc2libGUpIHRoaXMuc2hvdygpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNob3cgdGhlIGltYWdlXG4gICAgICAgICAqL1xuICAgICAgICBwcml2YXRlIHNob3coKSB7XG4gICAgICAgICAgICBpZiAodGhpcy52aXNpYmxlKSByZXR1cm47XG5cbiAgICAgICAgICAgIGlmICh0aGlzLnVzZVRyYW5zaXRpb25zKSB7XG4gICAgICAgICAgICAgICAgVmlzaWJpbGl0eUhlbHBlci5zaG93KHRoaXMuaW1hZ2UsIHRoaXMudHJhbnNpdGlvbkluQ2xhc3MpLmRvbmUoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRoaXMuaW1hZ2VEaXNwbGF5Q2FsbGJhY2sgPT09ICdmdW5jdGlvbicpIFxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbWFnZURpc3BsYXlDYWxsYmFjayh0aGlzLmltYWdlKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy52aXNpYmxlID0gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDYWxjdWxhdGUgdGhlIHNpemUgb2YgdGhlIGltYWdlIGZyb20gdGhlIGNvbnRhaW5lclxuICAgICAgICAgKi9cbiAgICAgICAgcHJpdmF0ZSBjYWxjdWxhdGVSZW5kZXJTaXplKCk6Qm94IHtcbiAgICAgICAgICAgIC8vIEdyYWIgdGhlIHNpemUgb2YgdGhlIGNvbnRhaW5lclxuICAgICAgICAgICAgbGV0IHtjbGllbnRXaWR0aCwgY2xpZW50SGVpZ2h0fSA9IHRoaXMuY29udGFpbmVyO1xuXG4gICAgICAgICAgICAvLyBSZXR1cm4gZGVmYXVsdCBzaXplIGlmIHRoZSBjb250YWluZXIgd2FzIG5vdCBhYmxlIHRvIGJlIGRldGVjdGVkXG4gICAgICAgICAgICBpZiAoIWNsaWVudEhlaWdodCB8fCAhY2xpZW50V2lkdGgpIHJldHVybiBkZWZhdWx0U2l6ZTtcblxuICAgICAgICAgICAgLy8gR3JhYiB0aGUgcGFkZGluZyBzaXplXG4gICAgICAgICAgICBsZXQgcGFkZGluZzpSZXNpemVhYmxlUmVzb3VyY2VJbWFnZS5Cb3ggPSB0eXBlb2YgdGhpcy5wYWRkaW5nID09PSAnZnVuY3Rpb24nID8gXG4gICAgICAgICAgICAgICAgdGhpcy5wYWRkaW5nKHRoaXMuY29udGFpbmVyKSA6XG4gICAgICAgICAgICAgICAgdGhpcy5wYWRkaW5nO1xuXG4gICAgICAgICAgICAvLyBUaGUgZGV0ZWN0ZWQgc2l6ZSBvZiB0aGUgY29udGFpbmVyIG1pbnVzIHBhZGRpbmdcbiAgICAgICAgICAgIGxldCBkZXRlY3RlZFNpemU6Qm94ID0ge1xuICAgICAgICAgICAgICAgIHdpZHRoOiBjbGllbnRXaWR0aCAtIHBhZGRpbmcud2lkdGgsXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiBjbGllbnRIZWlnaHQgLSBwYWRkaW5nLmhlaWdodFxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLy8gR2V0IHRoZSBwaXhlbCByYXRpbyBmb3IgcmV0aW5hIHNjcmVlbnNcbiAgICAgICAgICAgIGxldCBwaXhlbFJhdGlvID0gd2luZG93LmRldmljZVBpeGVsUmF0aW8gfHwgMTtcblxuICAgICAgICAgICAgLy8gQWRqdXN0IHRoZSBkZXRlY3RlZCBzaXplIHRvIGFjY291bnQgZm9yIHBpeGVsIHJhdGlvXG4gICAgICAgICAgICBkZXRlY3RlZFNpemUud2lkdGggKj0gcGl4ZWxSYXRpbztcbiAgICAgICAgICAgIGRldGVjdGVkU2l6ZS5oZWlnaHQgKj0gcGl4ZWxSYXRpbztcblxuICAgICAgICAgICAgcmV0dXJuIEJveEhlbHBlci5mbG9vcihCb3hIZWxwZXIuYm91bmQoZGV0ZWN0ZWRTaXplLCBtaW5pbXVtU2l6ZSwgbWF4aW11bVNpemUpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHByaXZhdGUgc2l6ZUlzRGlmZmVyZW50KGJveDogUmVzaXplYWJsZVJlc291cmNlSW1hZ2UuQm94KTpib29sZWFuIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5jdXJyZW50U2l6ZSkgcmV0dXJuIHRydWU7XG5cbiAgICAgICAgICAgIGxldCB7XG4gICAgICAgICAgICAgICAgd2lkdGg6IHRoaXNXaWR0aCxcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IHRoaXNIZWlnaHRcbiAgICAgICAgICAgIH0gPSB0aGlzLmN1cnJlbnRTaXplO1xuXG4gICAgICAgICAgICBsZXQge1xuICAgICAgICAgICAgICAgIHdpZHRoOiBib3hXaWR0aCxcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IGJveEhlaWdodFxuICAgICAgICAgICAgfSA9IGJveDtcblxuICAgICAgICAgICAgcmV0dXJuIHRoaXNXaWR0aCAhPT0gYm94V2lkdGggfHwgdGhpc0hlaWdodCAhPT0gYm94SGVpZ2h0O1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFVwZGF0ZSBvciBjcmVhdGUgdGhlIGltYWdlXG4gICAgICAgICAqIEBwYXJhbSBpbnN0cnVjdGlvbnMgTmV3IGluc3RydWN0aW9ucyB0byByZW5kZXIgdGhlIGltYWdlIHdpdGhcbiAgICAgICAgICovXG4gICAgICAgIHB1YmxpYyB1cGRhdGUoaW5zdHJ1Y3Rpb25zPzpJbWFnZVJlbmRlcmluZ0luc3RydWN0aW9ucykge1xuICAgICAgICAgICAgbGV0IG5lZWRzVXBkYXRlOmJvb2xlYW4gPSBmYWxzZTtcblxuICAgICAgICAgICAgLy8gVXBkYXRlIGluc3RydWN0aW9uc1xuICAgICAgICAgICAgaWYgKGluc3RydWN0aW9ucyAmJiB0aGlzLmluc3RydWN0aW9ucyAhPT0gaW5zdHJ1Y3Rpb25zKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pbnN0cnVjdGlvbnMgPSBpbnN0cnVjdGlvbnM7XG4gICAgICAgICAgICAgICAgbmVlZHNVcGRhdGUgPSB0cnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBVcGRhdGUgc2l6ZVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGxldCByZW5kZXJTaXplOkJveCA9IHRoaXMuY2FsY3VsYXRlUmVuZGVyU2l6ZSgpO1xuXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc2l6ZUlzRGlmZmVyZW50KHJlbmRlclNpemUpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudFNpemUgPSByZW5kZXJTaXplO1xuICAgICAgICAgICAgICAgICAgICBuZWVkc1VwZGF0ZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAobmVlZHNVcGRhdGUpIHtcbiAgICAgICAgICAgICAgICBsZXQge3dpZHRoLCBoZWlnaHR9ID0gdGhpcy5jdXJyZW50U2l6ZTtcblxuICAgICAgICAgICAgICAgIHRoaXMuaW1hZ2Uuc3JjID0gcmlkZXN0eWxlci5hamF4LnVybCh0aGlzLmFjdGlvbiwgT2JqZWN0SGVscGVyLmFzc2lnbih7XG4gICAgICAgICAgICAgICAgICAgIFdpZHRoOiB3aWR0aCxcbiAgICAgICAgICAgICAgICAgICAgSGVpZ2h0OiBoZWlnaHRcbiAgICAgICAgICAgICAgICB9LCBkZWZhdWx0UG9zaXRpb24sIHRoaXMuYmFzZUluc3RydWN0aW9ucywgdGhpcy5pbnN0cnVjdGlvbnMpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGV4cG9ydCBuYW1lc3BhY2UgUmVzaXplYWJsZVJlc291cmNlSW1hZ2Uge1xuICAgICAgICBleHBvcnQgaW50ZXJmYWNlIEJveCB7XG4gICAgICAgICAgICB3aWR0aDogbnVtYmVyO1xuICAgICAgICAgICAgaGVpZ2h0OiBudW1iZXI7XG4gICAgICAgIH1cblxuICAgICAgICBleHBvcnQgaW50ZXJmYWNlIEltYWdlRXZlbnRDYWxsYmFjayB7XG4gICAgICAgICAgICAoaW1hZ2U6SFRNTEltYWdlRWxlbWVudCk6dm9pZDtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgZXhwb3J0IGludGVyZmFjZSBJbWFnZUxvYWRDYWxsYmFjayBleHRlbmRzIEltYWdlRXZlbnRDYWxsYmFjayB7XG4gICAgICAgICAgICAoaW1hZ2U6SFRNTEltYWdlRWxlbWVudCwgZXZlbnQ6RXZlbnQpOnZvaWQ7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGV4cG9ydCBpbnRlcmZhY2UgSW1hZ2VFcnJvckNhbGxiYWNrIGV4dGVuZHMgSW1hZ2VFdmVudENhbGxiYWNrIHtcbiAgICAgICAgICAgIChpbWFnZTpIVE1MSW1hZ2VFbGVtZW50LCBldmVudDpFcnJvckV2ZW50KTp2b2lkO1xuICAgICAgICB9XG5cbiAgICAgICAgZXhwb3J0IGludGVyZmFjZSBQYWRkaW5nQ2FsY3VsYXRvciB7XG4gICAgICAgICAgICAoY29udGFpbmVyOkVsZW1lbnQpOkJveDtcbiAgICAgICAgfVxuICAgIH1cbn0iLCJuYW1lc3BhY2UgUmlkZVN0eWxlclNob3djYXNlIHtcbiAgICBleHBvcnQgY2xhc3MgUmlkZVN0eWxlclNob3djYXNlQmFja2dyb3VuZCBleHRlbmRzIENvbXBvbmVudEJhc2Uge1xuICAgICAgICBjb21wb25lbnQ6SFRNTEVsZW1lbnQ7XG5cbiAgICAgICAgcHJvdGVjdGVkIGluaXRpYWxpemVDb21wb25lbnQoKSB7XG4gICAgICAgICAgICB2YXIgYmFja2dyb3VuZEVsZW1lbnQgPSBIVE1MSGVscGVyLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdyaWRlc3R5bGVyLXNob3djYXNlLWJhY2tncm91bmQnXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdmFyIGJhY2tncm91bmRUZXh0dXJlID0gSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAncmlkZXN0eWxlci1zaG93Y2FzZS1iYWNrZ3JvdW5kLXRleHR1cmUnLFxuICAgICAgICAgICAgICAgIGFwcGVuZFRvOiBiYWNrZ3JvdW5kRWxlbWVudFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHRoaXMuY29tcG9uZW50ID0gYmFja2dyb3VuZEVsZW1lbnQ7XG4gICAgICAgIH1cbiAgICB9XG59IiwibmFtZXNwYWNlIFJpZGVTdHlsZXJTaG93Y2FzZSB7XHJcbiAgICBjb25zdCBjbGFzc05hbWUgPSAncmlkZXN0eWxlci1zaG93Y2FzZS1idXR0b24tcGlja2VyJztcclxuICAgIGNvbnN0IG9wdGlvbkNsYXNzID0gY2xhc3NOYW1lICsgJy1vcHRpb24nO1xyXG4gICAgY29uc3QgYWN0aXZlQ2xhc3MgPSBvcHRpb25DbGFzcyArICctYWN0aXZlJztcclxuICAgIGxldCAgIG9wdGlvbnNDb3VudCA9IDE7XHJcblxyXG4gICAgZXhwb3J0IGNsYXNzIFJpZGVTdHlsZXJTaG93Y2FzZUJ1dHRvblBpY2tlcjxUPiBleHRlbmRzIENvbXBvbmVudEJhc2Uge1xyXG4gICAgICAgIHB1YmxpYyBvcHRpb25DbGlja2VkOiBib29sZWFuOyBcclxuICAgICAgICBwcml2YXRlIG9wdGlvbkNvbnRhaW5lcjpIVE1MRWxlbWVudDtcclxuXHJcbiAgICAgICAgY29uc3RydWN0b3Ioc2hvd2Nhc2VJbnN0YW5jZTpSaWRlU3R5bGVyU2hvd2Nhc2VJbnN0YW5jZSwgb3B0aW9uczogUmlkZVN0eWxlclNob3djYXNlQnV0dG9uUGlja2VyLlNldHRpbmdzKSB7XHJcbiAgICAgICAgICAgIHN1cGVyKHNob3djYXNlSW5zdGFuY2UpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5jb21wb25lbnQgPSBIVE1MSGVscGVyLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcclxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogY2xhc3NOYW1lLFxyXG4gICAgICAgICAgICAgICAgc3R5bGU6IHtcclxuICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6ICcyLjVlbScsXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuXHJcbiAgICAgICAgICAgIEhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCgnZGl2Jywge1xyXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBjbGFzc05hbWUgKyAnLXRpdGxlJyxcclxuICAgICAgICAgICAgICAgIHRleHQ6IG9wdGlvbnMudGl0bGUsXHJcbiAgICAgICAgICAgICAgICBhcHBlbmRUbzogdGhpcy5jb21wb25lbnRcclxuICAgICAgICAgICAgfSkuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9wdGlvbkNvbnRhaW5lci5zdHlsZS5vcGFjaXR5ID0gdGhpcy5vcHRpb25Db250YWluZXIuc3R5bGUub3BhY2l0eSA9PSAnMCcgPyAnMScgOiAnMCc7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9wdGlvbkNvbnRhaW5lci5zdHlsZS50cmFuc2Zvcm0gPSB0aGlzLm9wdGlvbkNvbnRhaW5lci5zdHlsZS50cmFuc2Zvcm0gPT0gJ3NjYWxlWSgwKScgPyAnc2NhbGVZKDEpJyA6ICdzY2FsZVkoMCknO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vcHRpb25Db250YWluZXIuc3R5bGUuaGVpZ2h0ID0gdGhpcy5vcHRpb25Db250YWluZXIuc3R5bGUuaGVpZ2h0ID09ICcwcHgnID8gJ2F1dG8nIDogJzBweCc7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2gob3B0aW9uc0NvdW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbXBvbmVudC5zdHlsZS5oZWlnaHQgPSB0aGlzLmNvbXBvbmVudC5zdHlsZS5oZWlnaHQgPT0gJzIuNWVtJyA/ICc0LjVlbScgOiAnMi41ZW0nO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29tcG9uZW50LnN0eWxlLmhlaWdodCA9IHRoaXMuY29tcG9uZW50LnN0eWxlLmhlaWdodCA9PSAnMi41ZW0nID8gJzdlbScgOiAnMi41ZW0nO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29tcG9uZW50LnN0eWxlLmhlaWdodCA9IHRoaXMuY29tcG9uZW50LnN0eWxlLmhlaWdodCA9PSAnMi41ZW0nID8gJzkuMjVlbScgOiAnMi41ZW0nO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29tcG9uZW50LnN0eWxlLmhlaWdodCA9IHRoaXMuY29tcG9uZW50LnN0eWxlLmhlaWdodCA9PSAnMi41ZW0nID8gJzExLjI1ZW0nIDogJzIuNWVtJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb21wb25lbnQuc3R5bGUuaGVpZ2h0ID0gJzIuNWVtJztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSlcclxuXHJcbiAgICAgICAgICAgIHRoaXMub3B0aW9uQ29udGFpbmVyID0gSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XHJcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IGNsYXNzTmFtZSArICctb3B0aW9uLWNvbnRhaW5lcicsXHJcbiAgICAgICAgICAgICAgICBhcHBlbmRUbzogdGhpcy5jb21wb25lbnQsXHJcbiAgICAgICAgICAgICAgICBzdHlsZToge1xyXG4gICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6ICcwJyxcclxuICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6ICcwcHgnLFxyXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogJ3NjYWxlWSgwKSdcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLm9wdGlvbkNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGV2ZW50ID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMub25PcHRpb25DbGljayhldmVudCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5vcHRpb25Db250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignRE9NTm9kZUluc2VydGVkJywgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vcHRpb25Db250YWluZXIuc3R5bGUub3BhY2l0eSA9ICcxJztcclxuICAgICAgICAgICAgICAgIHRoaXMub3B0aW9uQ29udGFpbmVyLnN0eWxlLnRyYW5zZm9ybSA9ICdzY2FsZVkoMSknO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vcHRpb25Db250YWluZXIuc3R5bGUuaGVpZ2h0ID0gJ2F1dG8nO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBzd2l0Y2gob3B0aW9uc0NvdW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbXBvbmVudC5zdHlsZS5oZWlnaHQgPSAnNC41ZW0nO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29tcG9uZW50LnN0eWxlLmhlaWdodCA9ICc3ZW0nO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29tcG9uZW50LnN0eWxlLmhlaWdodCA9ICc5LjI1ZW0nO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29tcG9uZW50LnN0eWxlLmhlaWdodCA9ICcxMS4yNWVtJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb21wb25lbnQuc3R5bGUuaGVpZ2h0ID0gJzIuNWVtJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vcHRpb25Db250YWluZXIuc3R5bGUub3BhY2l0eSA9ICcwJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vcHRpb25Db250YWluZXIuc3R5bGUudHJhbnNmb3JtID0gJ3NjYWxlWSgwKSc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub3B0aW9uQ29udGFpbmVyLnN0eWxlLmhlaWdodCA9ICcwcHgnO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiBcclxuICAgICAgICBwdWJsaWMgc2V0T3B0aW9ucyhvcHRpb25zOiBSaWRlU3R5bGVyU2hvd2Nhc2VCdXR0b25QaWNrZXIuT3B0aW9uPFQ+W10pIHtcclxuICAgICAgICAgICAgSFRNTEhlbHBlci5lbXB0eSh0aGlzLm9wdGlvbkNvbnRhaW5lcik7XHJcblxyXG4gICAgICAgICAgICBvcHRpb25zQ291bnQgPSBvcHRpb25zLmxlbmd0aDtcclxuICAgICAgICAgICAgbGV0IGZyYWdtZW50ID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xyXG5cclxuICAgICAgICAgICAgZm9yIChsZXQgb3B0aW9uIG9mIG9wdGlvbnMpIHtcclxuICAgICAgICAgICAgICAgIGxldCBvcHRpb25FbGVtZW50OlJpZGVTdHlsZXJTaG93Y2FzZUJ1dHRvblBpY2tlci5PcHRpb25FbGVtZW50PFQ+ID0gT2JqZWN0LmFzc2lnbihIVE1MSGVscGVyLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcclxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IG9wdGlvbkNsYXNzLFxyXG4gICAgICAgICAgICAgICAgICAgIHRleHQ6IG9wdGlvbi5sYWJlbFxyXG4gICAgICAgICAgICAgICAgfSksIHtcclxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogb3B0aW9uLnZhbHVlXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9uLmFjdGl2ZSkgb3B0aW9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKGFjdGl2ZUNsYXNzKTtcclxuXHJcbiAgICAgICAgICAgICAgICBmcmFnbWVudC5hcHBlbmRDaGlsZChvcHRpb25FbGVtZW50KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5vcHRpb25Db250YWluZXIuYXBwZW5kQ2hpbGQoZnJhZ21lbnQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBvbk9wdGlvbkNsaWNrKGV2ZW50Ok1vdXNlRXZlbnQpIHtcclxuICAgICAgICAgICAgbGV0IGN1cnJlbnRUYXJnZXQ6SFRNTEVsZW1lbnQgPSBldmVudC50YXJnZXQgYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBJdGVyYXRlIHRocm91Z2ggcGFyZW50cyB1bnRpbCB3ZSd2ZSByZWFjaGVkIHRoZSBib3VuZCBlbGVtZW50XHJcbiAgICAgICAgICAgIHdoaWxlIChjdXJyZW50VGFyZ2V0ICE9PSB0aGlzLm9wdGlvbkNvbnRhaW5lcikge1xyXG4gICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKG9wdGlvbkNsYXNzKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIEFuIG9wdGlvbiB3YXMgY2xpY2tlZFxyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBSZW1vdmUgdGhlIGFjdGl2ZSBjbGFzcyBmcm9tIHRoZSBvbGQgb3B0aW9uXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgY2hpbGQgb2YgSFRNTEhlbHBlci5jaGlsZHJlbldpdGhDbGFzc2VzKHRoaXMub3B0aW9uQ29udGFpbmVyLCBhY3RpdmVDbGFzcykpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoaWxkLmNsYXNzTGlzdC5yZW1vdmUoYWN0aXZlQ2xhc3MpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBBZGQgaXQgdG8gdGhlIG5ldyBvbmVcclxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC5hZGQoYWN0aXZlQ2xhc3MpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRoaXMub3B0aW9uU2VsZWN0ZWRDYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vcHRpb25TZWxlY3RlZENhbGxiYWNrKChjdXJyZW50VGFyZ2V0IGFzIFJpZGVTdHlsZXJTaG93Y2FzZUJ1dHRvblBpY2tlci5PcHRpb25FbGVtZW50PFQ+KS52YWx1ZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBjdXJyZW50VGFyZ2V0ID0gY3VycmVudFRhcmdldC5wYXJlbnRFbGVtZW50O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb3B0aW9uU2VsZWN0ZWRDYWxsYmFjazogKHZhbHVlOlQpID0+IHZvaWQ7XHJcbiAgICB9XHJcblxyXG4gICAgZXhwb3J0IG5hbWVzcGFjZSBSaWRlU3R5bGVyU2hvd2Nhc2VCdXR0b25QaWNrZXIge1xyXG4gICAgICAgIGV4cG9ydCBpbnRlcmZhY2UgU2V0dGluZ3Mge1xyXG4gICAgICAgICAgICB0aXRsZTogc3RyaW5nO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZXhwb3J0IGludGVyZmFjZSBPcHRpb25FbGVtZW50PFQ+IGV4dGVuZHMgSFRNTEVsZW1lbnQge1xyXG4gICAgICAgICAgICB2YWx1ZTogVDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGV4cG9ydCBpbnRlcmZhY2UgT3B0aW9uPFQ+IHtcclxuICAgICAgICAgICAgbGFiZWw6IHN0cmluZztcclxuICAgICAgICAgICAgdmFsdWU6IFQ7XHJcbiAgICAgICAgICAgIGFjdGl2ZT86IGJvb2xlYW47XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59IiwibmFtZXNwYWNlIFJpZGVTdHlsZXJTaG93Y2FzZSB7XG4gICAgaW1wb3J0IFdoZWVsRml0bWVudERlc2NyaXB0aW9uTW9kZWwgPSByaWRlc3R5bGVyLkRlc2NyaXB0aW9ucy5XaGVlbEZpdG1lbnREZXNjcmlwdGlvbk1vZGVsO1xuICAgIGV4cG9ydCBjbGFzcyBSaWRlU3R5bGVyU2hvd2Nhc2VDaGFuZ2VXaGVlbFNpemUgZXh0ZW5kcyBSaWRlU3R5bGVyU2hvd2Nhc2VCdXR0b25QaWNrZXI8V2hlZWxGaXRtZW50RGVzY3JpcHRpb25Nb2RlbD4ge1xuICAgICAgICBjb25zdHJ1Y3RvcihzaG93Y2FzZUluc3RhbmNlOlJpZGVTdHlsZXJTaG93Y2FzZUluc3RhbmNlKSB7XG4gICAgICAgICAgICBzdXBlcihzaG93Y2FzZUluc3RhbmNlLCB7XG4gICAgICAgICAgICAgICAgdGl0bGU6IHN0cmluZ3MuZ2V0U3RyaW5nKCdjaGFuZ2Utd2hlZWwtc2l6ZScpXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdGhpcy5jb21wb25lbnQuY2xhc3NMaXN0LmFkZCgncmlkZXN0eWxlci1zaG93Y2FzZS1jaGFuZ2Utd2hlZWwtc2l6ZScpO1xuICAgICAgICB9XG5cbiAgICAgICAgcHVibGljIHNldEZpdG1lbnRPcHRpb25zKGZpdG1lbnRzOldoZWVsRml0bWVudERlc2NyaXB0aW9uTW9kZWxbXSwgYWN0aXZlRml0bWVudD86V2hlZWxGaXRtZW50RGVzY3JpcHRpb25Nb2RlbCkge1xuICAgICAgICAgICAgbGV0IHNlZW5EaWFtZXRlcnMgPSB7fTtcbiAgICAgICAgICAgIGxldCBkaWFtZXRlckZpdG1lbnRzOltudW1iZXIsV2hlZWxGaXRtZW50RGVzY3JpcHRpb25Nb2RlbF1bXSA9IFtdO1xuXG4gICAgICAgICAgICBmb3IgKGxldCBmaXRtZW50IG9mIGZpdG1lbnRzKSB7XG4gICAgICAgICAgICAgICAgbGV0IGRpYW1ldGVyID0gZml0bWVudC5EaWFtZXRlck1pbjtcblxuICAgICAgICAgICAgICAgIGlmIChkaWFtZXRlciBpbiBzZWVuRGlhbWV0ZXJzID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgICAgICBzZWVuRGlhbWV0ZXJzW2RpYW1ldGVyXSA9IHRydWU7XG5cbiAgICAgICAgICAgICAgICAgICAgZGlhbWV0ZXJGaXRtZW50cy5wdXNoKFtkaWFtZXRlciwgZml0bWVudF0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZGlhbWV0ZXJGaXRtZW50cy5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGFbMF0gLSBiWzBdO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGlmIChkaWFtZXRlckZpdG1lbnRzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgICAgIHRoaXMuY29tcG9uZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMuc2V0T3B0aW9ucyhBcnJheUhlbHBlci5tYXAoZGlhbWV0ZXJGaXRtZW50cywgZGlhbWV0ZXJGaXRtZW50ID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBsYWJlbDogZGlhbWV0ZXJGaXRtZW50WzBdICsgJ+KAsycsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBkaWFtZXRlckZpdG1lbnRbMV0sXG4gICAgICAgICAgICAgICAgICAgIGFjdGl2ZTogZGlhbWV0ZXJGaXRtZW50WzFdID09PSBhY3RpdmVGaXRtZW50XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfVxuICAgIH1cbn0iLCJuYW1lc3BhY2UgUmlkZVN0eWxlclNob3djYXNlIHtcbiAgICBjb25zdCBtb2RhbENsYXNzID0gJ3JpZGVzdHlsZXItc2hvd2Nhc2UtbW9kYWwnO1xuICAgIGNvbnN0IGJhY2tkcm9wQ2xhc3MgPSBtb2RhbENsYXNzICsgJy1iYWNrZHJvcCc7XG5cbiAgICBpbXBvcnQgQWN0aW9uID0gUmlkZVN0eWxlclNob3djYXNlTW9kYWwuQWN0aW9uO1xuICAgIGltcG9ydCBPcHRpb25zID0gUmlkZVN0eWxlclNob3djYXNlTW9kYWwuT3B0aW9ucztcblxuICAgIGV4cG9ydCBjbGFzcyBSaWRlU3R5bGVyU2hvd2Nhc2VNb2RhbCBleHRlbmRzIENvbXBvbmVudEJhc2Uge1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIG1haW4gbW9kYWwgZWxlbWVudFxuICAgICAgICAgKi9cbiAgICAgICAgcHVibGljIGNvbXBvbmVudDogSFRNTEVsZW1lbnQ7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgY3VycmVudGx5IGRpc3BsYXllZCBiYWNrZHJvcFxuICAgICAgICAgKi9cbiAgICAgICAgcHVibGljIGJhY2tkcm9wOiBIVE1MRWxlbWVudDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBwYXJlbnQgZWxlbWVudCBvZiB0aGUgbW9kYWxcbiAgICAgICAgICovXG4gICAgICAgIHByaXZhdGUgcGFyZW50Ok5vZGU7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgb3B0aW9ucyB0aGF0IHRoZSBtb2RhbCB3YXMgY3JlYXRlZCB3aXRoXG4gICAgICAgICAqL1xuICAgICAgICBwcm90ZWN0ZWQgcmVhZG9ubHkgb3B0aW9uczogT3B0aW9ucztcblxuICAgICAgICBjb25zdHJ1Y3RvcihzaG93Y2FzZUluc3RhbmNlOlJpZGVTdHlsZXJTaG93Y2FzZUluc3RhbmNlLCBvcHRpb25zOiBPcHRpb25zKSB7XG4gICAgICAgICAgICBzdXBlcihzaG93Y2FzZUluc3RhbmNlKTtcblxuICAgICAgICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcblxuICAgICAgICAgICAgLy8gQ3JlYXRlIHRoZSBiYWNrZHJvcCBpZiBuZWVkZWRcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlQmFja2Ryb3BJZk5lZWRlZCgpO1xuXG4gICAgICAgICAgICAvLyBDcmVhdGUgdGhlIG1vZGFsXG4gICAgICAgICAgICB0aGlzLmJ1aWxkTW9kYWwoKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gTW9kYWxzIHN0YXJ0IG9mZiBoaWRkZW4gdW50aWwgc2hvd25cbiAgICAgICAgICAgIHRoaXMuc2V0VmlzaWJpbGl0eShmYWxzZSk7XG5cbiAgICAgICAgICAgIC8vIE1vZGFscyBhcmUgYXBwZW5kZWQgdG8gdGhlIHNob3djYXNlIGNvbnRhaW5lclxuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBzaG93Y2FzZUluc3RhbmNlLmNvbnRhaW5lcjtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LmFwcGVuZENoaWxkKHRoaXMuY29tcG9uZW50KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBCdWlsZCB0aGUgbW9kYWwgRE9NIHN0cnVjdHVyZVxuICAgICAgICAgKi9cbiAgICAgICAgcHJvdGVjdGVkIGJ1aWxkTW9kYWwoKSB7XG4gICAgICAgICAgICB0aGlzLmNvbXBvbmVudCA9IE9iamVjdC5hc3NpZ24oSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBtb2RhbENsYXNzXG4gICAgICAgICAgICB9KSwge1xuICAgICAgICAgICAgICAgIG1vZGFsOiB0aGlzXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5mdWxsKSB0aGlzLmNvbXBvbmVudC5jbGFzc0xpc3QuYWRkKG1vZGFsQ2xhc3MgKyAnLWZ1bGwnKVxuXG4gICAgICAgICAgICBIVE1MSGVscGVyLmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IG1vZGFsQ2xhc3MgKyAnLWNsb3NlJyxcbiAgICAgICAgICAgICAgICBhcHBlbmRUbzogdGhpcy5jb21wb25lbnRcbiAgICAgICAgICAgIH0pLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuaGlkZSgpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMuYWN0aW9ucylcbiAgICAgICAgICAgICAgICB0aGlzLmJ1aWxkQWN0aW9ucyh0aGlzLm9wdGlvbnMuYWN0aW9ucyk7XG4gICAgICAgIH1cblxuICAgICAgICBwcml2YXRlIGJ1aWxkQWN0aW9ucyhhY3Rpb25zOiBBY3Rpb25bXSkge1xuICAgICAgICAgICAgbGV0IGFjdGlvbkNvbnRhaW5lciA9IEhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCgnZGl2Jywge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogbW9kYWxDbGFzcyArICctYWN0aW9ucycsXG4gICAgICAgICAgICAgICAgYXBwZW5kVG86IHRoaXMuY29tcG9uZW50XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgZm9yIChsZXQgYWN0aW9uIG9mIGFjdGlvbnMpIHtcbiAgICAgICAgICAgICAgICBsZXQgYWN0aW9uQnV0dG9uID0gSFRNTEhlbHBlci5jcmVhdGVCdXR0b24oT2JqZWN0SGVscGVyLmFzc2lnbjxIVE1MSGVscGVyLmNyZWF0ZUJ1dHRvbk9wdGlvbnM+KHtcbiAgICAgICAgICAgICAgICAgICAgYXBwZW5kVG86IGFjdGlvbkNvbnRhaW5lclxuICAgICAgICAgICAgICAgIH0sIGFjdGlvbikpO1xuXG4gICAgICAgICAgICAgICAgYWN0aW9uQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGFjdGlvbi5hY3Rpb24gPT09ICdmdW5jdGlvbicpIGFjdGlvbi5hY3Rpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoYWN0aW9uLmFjdGlvbiA9PT0gJ2hpZGUtbW9kYWwnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENhbGxlZCB3aGVuIHRoaXMgbW9kYWwgaXMgbGF5ZWQtb3V0IGFuZCBhYm91dCB0byB0cmFuc2l0aW9uIGluXG4gICAgICAgICAqIEB2aXJ0dWFsXG4gICAgICAgICAqL1xuICAgICAgICBwcm90ZWN0ZWQgb25TaG93KCkge1xuICAgICAgICAgICAgdGhpcy5ldmVudHMudHJpZ2dlcignbW9kYWwtc2hvdycsIHsgbW9kYWw6IHRoaXMgfSk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENhbGxlZCB3aGVuIHRoaXMgbW9kYWwgaXMgdmlzaWJsZVxuICAgICAgICAgKiBAdmlydHVhbFxuICAgICAgICAgKi9cbiAgICAgICAgcHJvdGVjdGVkIG9uU2hvd24oKSB7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENhbGxlZCB3aGVuIHRoaXMgbW9kYWwgaXMgYWJvdXQgdG8gdHJhbnNpdGlvbiBvdXRcbiAgICAgICAgICogQHZpcnR1YWxcbiAgICAgICAgICovXG4gICAgICAgIHByb3RlY3RlZCBvbkhpZGUoKSB7XG4gICAgICAgICAgICB0aGlzLmV2ZW50cy50cmlnZ2VyKCdtb2RhbC1oaWRlJywgeyBtb2RhbDogdGhpcyB9KTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogQ2FsbGVkIHdoZW4gdGhpcyBtb2RhbCBpcyBoaWRkZW5cbiAgICAgICAgICogQHZpcnR1YWxcbiAgICAgICAgICovXG4gICAgICAgIHByb3RlY3RlZCBvbkhpZGRlbigpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMucmVtb3ZlT25IaWRkZW4pIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5yZW1vdmVDaGlsZCh0aGlzLmNvbXBvbmVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBwdWJsaWMgc2hvdygpOlJpZGVTdHlsZXJQcm9taXNlIHtcbiAgICAgICAgICAgIGxldCBwcm9taXNlID0gVmlzaWJpbGl0eUhlbHBlci5zaG93KHRoaXMuY29tcG9uZW50KTtcblxuICAgICAgICAgICAgdGhpcy5vblNob3coKTtcbiAgICAgICAgICAgIHByb21pc2UuZG9uZSgoKSA9PiB0aGlzLm9uU2hvd24oKSk7XG5cbiAgICAgICAgICAgIHJldHVybiBwcm9taXNlO1xuICAgICAgICB9XG5cbiAgICAgICAgcHVibGljIGhpZGUoKTpSaWRlU3R5bGVyUHJvbWlzZSB7XG4gICAgICAgICAgICBsZXQgcHJvbWlzZSA9IFZpc2liaWxpdHlIZWxwZXIuaGlkZSh0aGlzLmNvbXBvbmVudCk7XG5cbiAgICAgICAgICAgIHRoaXMub25IaWRlKCk7XG4gICAgICAgICAgICBwcm9taXNlLmRvbmUoKCkgPT4gdGhpcy5vbkhpZGRlbigpKTtcblxuICAgICAgICAgICAgcmV0dXJuIHByb21pc2U7XG4gICAgICAgIH1cblxuICAgICAgICBwdWJsaWMgc2V0VmlzaWJpbGl0eSh2aXNpYmxlOiBib29sZWFuKSB7XG4gICAgICAgICAgICBWaXNpYmlsaXR5SGVscGVyLnNldFZpc2liaWxpdHkodGhpcy5jb21wb25lbnQsIHZpc2libGUpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENyZWF0ZXMgdGhlIGJhY2tkcm9wIGlmIG5lZWRlZFxuICAgICAgICAgKi9cbiAgICAgICAgcHJpdmF0ZSBjcmVhdGVCYWNrZHJvcElmTmVlZGVkKCkge1xuICAgICAgICAgICAgLy8gSWYgdGhlcmUncyBubyBwcmV2aW91c2x5IGV4aXN0aW5nIGJhY2tkcm9wIGNyZWF0ZSBhIG5ldyBvbmVcbiAgICAgICAgICAgIGlmICghSFRNTEhlbHBlci5oYXNDaGlsZFdpdGhDbGFzcyh0aGlzLnNob3djYXNlLmNvbnRhaW5lciwgYmFja2Ryb3BDbGFzcykpXG4gICAgICAgICAgICAgICAgbmV3IFJpZGVTdHlsZXJTaG93Y2FzZU1vZGFsQmFja2Ryb3AodGhpcy5zaG93Y2FzZSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBleHBvcnQgY2xhc3MgUmlkZVN0eWxlclNob3djYXNlTW9kYWxCYWNrZHJvcCBleHRlbmRzIENvbXBvbmVudEJhc2Uge1xuICAgICAgICBjb25zdHJ1Y3RvcihzaG93Y2FzZUluc3RhbmNlOlJpZGVTdHlsZXJTaG93Y2FzZUluc3RhbmNlKSB7XG4gICAgICAgICAgICBzdXBlcihzaG93Y2FzZUluc3RhbmNlKTtcblxuICAgICAgICAgICAgLy8gQ3JlYXRlIHRoZSBiYWNrZHJvcFxuICAgICAgICAgICAgdGhpcy5idWlsZEJhY2tkcm9wKCk7XG5cbiAgICAgICAgICAgIC8vIFRoZSBiYWNrZHJvcCBzdGFydHMgb2ZmIGhpZGRlblxuICAgICAgICAgICAgdGhpcy5zZXRWaXNpYmlsaXR5KGZhbHNlKTtcblxuICAgICAgICAgICAgLy8gQXBwZW5kIHRoZSBiYWNrZHJvcCB0byB0aGUgc2hvd2Nhc2UgY29udGFpbmVyXG4gICAgICAgICAgICBzaG93Y2FzZUluc3RhbmNlLmNvbnRhaW5lci5hcHBlbmRDaGlsZCh0aGlzLmNvbXBvbmVudCk7XG4gICAgICAgIH1cblxuICAgICAgICBwcml2YXRlIGJ1aWxkQmFja2Ryb3AoKSB7XG4gICAgICAgICAgICB0aGlzLmNvbXBvbmVudCA9IEhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudFdpdGhDbGFzcygnZGl2JywgYmFja2Ryb3BDbGFzcyk7XG5cbiAgICAgICAgICAgIHRoaXMuY29tcG9uZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGxldCB0b3BWaXNpYmxlTW9kYWwgPSBIVE1MSGVscGVyLmxhc3RTaWJsaW5nV2l0aENsYXNzPFJpZGVTdHlsZXJTaG93Y2FzZU1vZGFsLk1vZGFsRWxlbWVudD4odGhpcy5jb21wb25lbnQsIG1vZGFsQ2xhc3MsICdpbicpO1xuXG4gICAgICAgICAgICAgICAgaWYgKHRvcFZpc2libGVNb2RhbCkge1xuICAgICAgICAgICAgICAgICAgICB0b3BWaXNpYmxlTW9kYWwubW9kYWwuaGlkZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcHJvdGVjdGVkIGluaXRpYWxpemVDb21wb25lbnQoKSB7XG4gICAgICAgICAgICB0aGlzLmV2ZW50cy5vbignbW9kYWwtc2hvdycsIGV2ZW50ID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZSgpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHRoaXMuZXZlbnRzLm9uKCdtb2RhbC1oaWRlJywgZXZlbnQgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBIaWRlIG9yIHNob3cgdGhlIGJhY2tkcm9wIGJhc2VkIG9mZiB0aGUgbnVtYmVyIG9mIHZpc2libGUgbW9kYWxzXG4gICAgICAgICAqL1xuICAgICAgICBwcml2YXRlIHVwZGF0ZSgpIHtcbiAgICAgICAgICAgIGxldCBoYXNWaXNpYmxlTW9kYWw6Ym9vbGVhbiA9IEhUTUxIZWxwZXIuaGFzU2libGluZ1dpdGhDbGFzcyh0aGlzLmNvbXBvbmVudCwgbW9kYWxDbGFzcywgJ2luJyk7XG5cbiAgICAgICAgICAgIHRoaXNbaGFzVmlzaWJsZU1vZGFsID8gJ3Nob3cnIDogJ2hpZGUnXSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgcHVibGljIHNob3coKTpSaWRlU3R5bGVyUHJvbWlzZSB7XG4gICAgICAgICAgICByZXR1cm4gVmlzaWJpbGl0eUhlbHBlci5zaG93KHRoaXMuY29tcG9uZW50KTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgcHVibGljIGhpZGUoKTpSaWRlU3R5bGVyUHJvbWlzZSB7XG4gICAgICAgICAgICByZXR1cm4gVmlzaWJpbGl0eUhlbHBlci5oaWRlKHRoaXMuY29tcG9uZW50KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHB1YmxpYyBzZXRWaXNpYmlsaXR5KHZpc2libGU6IGJvb2xlYW4pIHtcbiAgICAgICAgICAgIFZpc2liaWxpdHlIZWxwZXIuc2V0VmlzaWJpbGl0eSh0aGlzLmNvbXBvbmVudCwgdmlzaWJsZSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBleHBvcnQgbmFtZXNwYWNlIFJpZGVTdHlsZXJTaG93Y2FzZU1vZGFsIHtcbiAgICAgICAgZXhwb3J0IGludGVyZmFjZSBNb2RhbEVsZW1lbnQgZXh0ZW5kcyBIVE1MRWxlbWVudHtcbiAgICAgICAgICAgIG1vZGFsOiBSaWRlU3R5bGVyU2hvd2Nhc2VNb2RhbFxuICAgICAgICB9O1xuXG4gICAgICAgIGV4cG9ydCBpbnRlcmZhY2UgQWN0aW9uIGV4dGVuZHMgSFRNTEhlbHBlci5jcmVhdGVCdXR0b25PcHRpb25zIHtcbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogVGhlIGFjdGlvbiB0byBwcmVmb3JtIHdoZW4gdGhpcyBidXR0b24gaXMgY2xpY2tlZFxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBhY3Rpb246ICdoaWRlLW1vZGFsJ3xGdW5jdGlvbjtcbiAgICAgICAgfVxuXG4gICAgICAgIGV4cG9ydCBpbnRlcmZhY2UgT3B0aW9ucyB7XG4gICAgICAgICAgICAvLyBJZiB0cnVlLCB0aGUgbW9kYWwgd2lsbCByZW1vdmUgaXRzZWxmIGZyb20gdGhlIERPTSB3aGVuIGl0J3MgaGlkZGVuXG4gICAgICAgICAgICByZW1vdmVPbkhpZGRlbj86IGJvb2xlYW47XG5cbiAgICAgICAgICAgIC8vIElmIHRydWUsIGRpc3BsYXkgdGhpcyBtb2RhbCBzaG91bGQgdGFrZSB1cCB0aGUgZnVsbCBzaXplIG9mIHRoZSBzaG93Y2FzZVxuICAgICAgICAgICAgZnVsbD86IGJvb2xlYW47XG5cbiAgICAgICAgICAgIGFjdGlvbnM/OiBBY3Rpb25bXTtcbiAgICAgICAgfVxuICAgIH1cbn0iLCJuYW1lc3BhY2UgUmlkZVN0eWxlclNob3djYXNlIHtcclxuICAgIGNvbnN0IG9wdGlvbk1lbnVDbGFzcyA9ICdyaWRlc3R5bGVyLXNob3djYXNlLW9wdGlvbi1tZW51JztcclxuICAgIGNvbnN0IG9wdGlvbk1lbnVPcHRpb25DbGFzcyA9IG9wdGlvbk1lbnVDbGFzcyArICctb3B0aW9uJztcclxuICAgIGNvbnN0IG9wdGlvbk1lbnVPcHRpb25BY3RpdmVDbGFzcyA9IG9wdGlvbk1lbnVPcHRpb25DbGFzcyArICctYWN0aXZlJztcclxuICAgIGNvbnN0IG9wdGlvbk1lbnVMb2FkaW5nQ2xhc3MgPSBvcHRpb25NZW51Q2xhc3MgKyAnLWxvYWRpbmcnO1xyXG5cclxuICAgIGltcG9ydCBPcHRpb24gPSBSaWRlU3R5bGVyU2hvd2Nhc2VPcHRpb25NZW51Lk9wdGlvbjtcclxuICAgIGltcG9ydCBPcHRpb25FbGVtZW50ID0gUmlkZVN0eWxlclNob3djYXNlT3B0aW9uTWVudS5PcHRpb25FbGVtZW50O1xyXG5cclxuICAgIGV4cG9ydCBjbGFzcyBSaWRlU3R5bGVyU2hvd2Nhc2VPcHRpb25NZW51IGltcGxlbWVudHMgSUNvbXBvbmVudCB7XHJcbiAgICAgICAgY29tcG9uZW50OkhUTUxFbGVtZW50O1xyXG5cclxuICAgICAgICBwdWJsaWMgcmVhZG9ubHkgbmFtZTpzdHJpbmc7XHJcbiAgICAgICAgcHVibGljIHZhbHVlOmFueTtcclxuICAgICAgICBcclxuICAgICAgICBjb25zdHJ1Y3RvcihuYW1lOnN0cmluZywgb3B0aW9ucz86IE9wdGlvbltdKSB7XHJcbiAgICAgICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmNvbXBvbmVudCA9IEhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCh7XHJcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IG9wdGlvbk1lbnVDbGFzc1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuY29tcG9uZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY2xpY2tFdmVudCA9PiB0aGlzLm9uQ2xpY2tlZChjbGlja0V2ZW50KSk7XHJcblxyXG4gICAgICAgICAgICBpZiAob3B0aW9ucykgdGhpcy5zZXRPcHRpb25zKG9wdGlvbnMpO1xyXG4gICAgICAgICAgICBlbHNlIHRoaXMuc2V0TG9hZGluZyh0cnVlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzZXRMb2FkaW5nKGxvYWRpbmc6Ym9vbGVhbikge1xyXG4gICAgICAgICAgICB0aGlzLmNvbXBvbmVudC5jbGFzc0xpc3QudG9nZ2xlKG9wdGlvbk1lbnVMb2FkaW5nQ2xhc3MsIGxvYWRpbmcpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBnZW5lcmF0ZU9wdGlvbkVsZW1lbnQob3B0aW9uOk9wdGlvbik6SFRNTEVsZW1lbnQge1xyXG4gICAgICAgICAgICBsZXQgb3B0aW9uRWxlbWVudDpPcHRpb25FbGVtZW50ID0gSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XHJcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IG9wdGlvbk1lbnVPcHRpb25DbGFzcyxcclxuICAgICAgICAgICAgICAgIHRleHQ6IG9wdGlvbi5sYWJlbFxyXG4gICAgICAgICAgICB9KSBhcyBPcHRpb25FbGVtZW50O1xyXG5cclxuICAgICAgICAgICAgb3B0aW9uRWxlbWVudC52YWx1ZSA9IG9wdGlvbi52YWx1ZTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBvcHRpb25FbGVtZW50O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBjbGVhck9wdGlvbnMoKSB7XHJcbiAgICAgICAgICAgIEhUTUxIZWxwZXIuZW1wdHkodGhpcy5jb21wb25lbnQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBhcHBlbmRPcHRpb25zKG9wdGlvbnM6IE9wdGlvbltdKSB7XHJcbiAgICAgICAgICAgIGZvciAoY29uc3Qgb3B0aW9uIG9mIG9wdGlvbnMpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY29tcG9uZW50LmFwcGVuZENoaWxkKHRoaXMuZ2VuZXJhdGVPcHRpb25FbGVtZW50KG9wdGlvbikpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc2V0T3B0aW9ucyhvcHRpb25zOiBPcHRpb25bXSkge1xyXG4gICAgICAgICAgICB0aGlzLmNsZWFyT3B0aW9ucygpO1xyXG4gICAgICAgICAgICB0aGlzLmFwcGVuZE9wdGlvbnMob3B0aW9ucyk7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0TG9hZGluZyhmYWxzZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc2V0VmFsdWUodmFsdWU6IGFueSkge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgdGhpcy5jb21wb25lbnQuY2hpbGRyZW4ubGVuZ3RoOyBpbmRleCsrKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBvcHRpb25FbGVtZW50ID0gdGhpcy5jb21wb25lbnQuY2hpbGRyZW5baW5kZXhdIGFzIE9wdGlvbkVsZW1lbnQ7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBhY3RpdmUgPSBvcHRpb25FbGVtZW50LnZhbHVlID09PSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgb3B0aW9uRWxlbWVudC5jbGFzc0xpc3QudG9nZ2xlKG9wdGlvbk1lbnVPcHRpb25BY3RpdmVDbGFzcywgYWN0aXZlKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoYWN0aXZlKSB0aGlzLnZhbHVlID0gdmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBvbkNoYW5nZToobmV3VmFsdWU6YW55KT0+dm9pZDtcclxuXHJcbiAgICAgICAgcHJpdmF0ZSBvbkNsaWNrZWQoY2xpY2tFdmVudDogTW91c2VFdmVudCkge1xyXG4gICAgICAgICAgICBsZXQgdGFyZ2V0OkhUTUxFbGVtZW50ID0gY2xpY2tFdmVudC50YXJnZXQgYXMgSFRNTEVsZW1lbnQ7XHJcblxyXG4gICAgICAgICAgICBpZiAoIXRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMob3B0aW9uTWVudU9wdGlvbkNsYXNzKSkgcmV0dXJuOyAvLyBUaGUgY2xpY2sgd2FzIG5vdCBvbiBhbiBvcHRpb25cclxuICAgICAgICAgICAgaWYgKHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMob3B0aW9uTWVudU9wdGlvbkFjdGl2ZUNsYXNzKSkgcmV0dXJuOyAvLyBUaGUgY2xpY2sgd2FzIG9uIGFuIGFjdGl2ZSBvcHRpb25cclxuXHJcbiAgICAgICAgICAgIGxldCBwcmV2aW91c2x5U2VsZWN0ZWRPcHRpb246T3B0aW9uRWxlbWVudCA9IEhUTUxIZWxwZXIuZmlyc3RDaGlsZFdpdGhDbGFzcyh0aGlzLmNvbXBvbmVudCwgb3B0aW9uTWVudU9wdGlvbkFjdGl2ZUNsYXNzKTtcclxuICAgICAgICAgICAgbGV0IG5ld1NlbGVjdGVkT3B0aW9uOk9wdGlvbkVsZW1lbnQgPSB0YXJnZXQgYXMgT3B0aW9uRWxlbWVudDtcclxuXHJcbiAgICAgICAgICAgIGlmIChwcmV2aW91c2x5U2VsZWN0ZWRPcHRpb24pIHByZXZpb3VzbHlTZWxlY3RlZE9wdGlvbi5jbGFzc0xpc3QucmVtb3ZlKG9wdGlvbk1lbnVPcHRpb25BY3RpdmVDbGFzcyk7XHJcbiAgICAgICAgICAgIG5ld1NlbGVjdGVkT3B0aW9uLmNsYXNzTGlzdC5hZGQob3B0aW9uTWVudU9wdGlvbkFjdGl2ZUNsYXNzKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMudmFsdWUgPSBuZXdTZWxlY3RlZE9wdGlvbi52YWx1ZTtcclxuXHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgdGhpcy5vbkNoYW5nZSA9PT0gJ2Z1bmN0aW9uJykgdGhpcy5vbkNoYW5nZShuZXdTZWxlY3RlZE9wdGlvbi52YWx1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGV4cG9ydCBuYW1lc3BhY2UgUmlkZVN0eWxlclNob3djYXNlT3B0aW9uTWVudSB7XHJcbiAgICAgICAgZXhwb3J0IGludGVyZmFjZSBPcHRpb24ge1xyXG4gICAgICAgICAgICBsYWJlbDogc3RyaW5nO1xyXG4gICAgICAgICAgICB2YWx1ZTogYW55O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZXhwb3J0IGludGVyZmFjZSBPcHRpb25FbGVtZW50IGV4dGVuZHMgSFRNTEVsZW1lbnQge1xyXG4gICAgICAgICAgICB2YWx1ZT86IGFueTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iLCJuYW1lc3BhY2UgUmlkZVN0eWxlclNob3djYXNlIHtcclxuICAgIGNvbnN0IHByZXZCdXR0b25DbGFzcyA9ICdyaWRlc3R5bGVyLXNob3djYXNlLXBhZ2luYXRpb24tcHJldic7XHJcbiAgICBjb25zdCBuZXh0QnV0dG9uQ2xhc3MgPSAncmlkZXN0eWxlci1zaG93Y2FzZS1wYWdpbmF0aW9uLW5leHQnO1xyXG4gICAgY29uc3Qgb3B0aW9uQ2xhc3MgPSAncmlkZXN0eWxlci1zaG93Y2FzZS1wYWdpbmF0aW9uLW9wdGlvbic7XHJcbiAgICBjb25zdCBvcHRpb25TZWxlY3RlZENsYXNzID0gb3B0aW9uQ2xhc3MgKyAnLXNlbGVjdGVkJztcclxuICAgIGNvbnN0IG9wdGlvbkxvYWRpbmdDbGFzcyA9IG9wdGlvbkNsYXNzICsgJy1sb2FkaW5nJztcclxuICAgIGNvbnN0IG9wdGlvbkxvYWRlckNsYXNzID0gb3B0aW9uQ2xhc3MgKyAnLWxvYWRlcic7XHJcbiAgICBjb25zdCBub1Jlc3VsdHNDbGFzcyA9IG9wdGlvbkNsYXNzICsgJy1uby1yZXN1bHRzJ1xyXG5cclxuICAgIGV4cG9ydCBhYnN0cmFjdCBjbGFzcyBSaWRlU3R5bGVyU2hvd2Nhc2VQYWdpbmF0aW9uQ29tcG9uZW50IGV4dGVuZHMgQ29tcG9uZW50QmFzZSB7XHJcbiAgICAgICAgcHJvdGVjdGVkIG9wdGlvbkNvbnRhaW5lcjpIVE1MRWxlbWVudDtcclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIHNlbGVjdGVkT3B0aW9uOkhUTUxFbGVtZW50O1xyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgcHJldkJ1dHRvbjpIVE1MQnV0dG9uRWxlbWVudDtcclxuICAgICAgICBwcm90ZWN0ZWQgbmV4dEJ1dHRvbjpIVE1MQnV0dG9uRWxlbWVudDtcclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIHRvdWNoU2Nyb2xsSGFuZGxlcjpJbXBldHVzO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBJZiB0cnVlLCB0aGlzIGhhcyBtb3JlIHJlc3VsdHMgdGhhdCBpdCBjYW4gbG9hZFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHByb3RlY3RlZCBoYXNNb3JlUmVzdWx0czogYm9vbGVhbiA9IHRydWU7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogSWYgdHJ1ZSwgdGhpcyBpcyBsb2FkaW5nXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHJvdGVjdGVkIGlzTG9hZGluZzogYm9vbGVhbiA9IGZhbHNlO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIElmIHRydWUsIHRoZSBmaXJzdCBsb2FkIGlzIGJlaW5nIHByZWZvcm1lZCBvciBoYXNuJ3QgYmVlbiBwcmVmb3JtZWQgeWV0LlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHByb3RlY3RlZCBpc0ZpcnN0TG9hZDpib29sZWFuID0gdHJ1ZTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBTZXQgdGhpcyB0byBmYWxzZSB0byBub3Qgc2hvdyB0aGUgbm8gcmVzdWx0cyBtZXNzYWdlXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHJvdGVjdGVkIGVuYWJsZVNob3dOb1Jlc3VsdHM6Ym9vbGVhbiA9IHRydWU7XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBpbml0aWFsaXplQ29tcG9uZW50KCkge1xyXG4gICAgICAgICAgICB0aGlzLmNvbXBvbmVudCA9IEhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCgnZGl2Jywge1xyXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAncmlkZXN0eWxlci1zaG93Y2FzZS1wYWdpbmF0aW9uJ1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdGhpcy5vcHRpb25Db250YWluZXIgPSBIVE1MSGVscGVyLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcclxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ3JpZGVzdHlsZXItc2hvd2Nhc2UtcGFnaW5hdGlvbi13cmFwcGVyJyxcclxuICAgICAgICAgICAgICAgIGFwcGVuZFRvOiB0aGlzLmNvbXBvbmVudCxcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnByZXZCdXR0b24gPSBIVE1MSGVscGVyLmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicsIHtcclxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogcHJldkJ1dHRvbkNsYXNzLFxyXG4gICAgICAgICAgICAgICAgYXBwZW5kVG86IHRoaXMuY29tcG9uZW50LFxyXG4gICAgICAgICAgICAgICAgYXBwZW5kOiBIVE1MSGVscGVyLmNyZWF0ZUljb24oJ2NoZXZyb24tbGVmdCcpXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgdGhpcy5uZXh0QnV0dG9uID0gSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KCdidXR0b24nLCB7XHJcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IG5leHRCdXR0b25DbGFzcyxcclxuICAgICAgICAgICAgICAgIGFwcGVuZFRvOiB0aGlzLmNvbXBvbmVudCxcclxuICAgICAgICAgICAgICAgIGFwcGVuZDogSFRNTEhlbHBlci5jcmVhdGVJY29uKCdjaGV2cm9uLXJpZ2h0JylcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAvLyBMaXN0ZW4gZm9yIGNsaWNrcyBvbiBvcHRpb25zXHJcbiAgICAgICAgICAgIHRoaXMuY29tcG9uZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZXZlbnQgPT4gdGhpcy5vbkNvbXBvbmVudENsaWNrKGV2ZW50KSk7XHJcblxyXG4gICAgICAgICAgICAvLyBSdW4gY2xlYXIgb3B0aW9ucyB0byBnZXQgdGhlIGxvYWRlclxyXG4gICAgICAgICAgICB0aGlzLmNsZWFyT3B0aW9ucygpO1xyXG5cclxuICAgICAgICAgICAgLy8gTG9hZCBwYWdpbmF0aW9uIGFmdGVyIHRoaXMgY29tcG9uZW50IGhhcyBiZWVuIHNldHVwXHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gdGhpcy5sb2FkTW9yZSgpLCAwKTtcclxuXHJcbiAgICAgICAgICAgIFNjcm9sbEhlbHBlci5hdHRhY2hXaGVlbExpc3RlbmVyKHRoaXMuY29tcG9uZW50LCBldmVudCA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBkZWx0YSA9IGV2ZW50LmRlbHRhWCB8fCBldmVudC5kZWx0YVk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB7c2Nyb2xsTGVmdCwgc2Nyb2xsV2lkdGgsIG9mZnNldFdpZHRofSA9IHRoaXMub3B0aW9uQ29udGFpbmVyO1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IG5ld1ZhbHVlID0gTWF0aC5taW4oc2Nyb2xsTGVmdCArIGRlbHRhLCBzY3JvbGxXaWR0aCAtIG9mZnNldFdpZHRoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMub3B0aW9uQ29udGFpbmVyLnNjcm9sbExlZnQgPSBuZXdWYWx1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLnRvdWNoU2Nyb2xsSGFuZGxlci5zZXRWYWx1ZXMobmV3VmFsdWUsIDApO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vblNjcm9sbCgpO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMudG91Y2hTY3JvbGxIYW5kbGVyID0gbmV3IEltcGV0dXMoe1xyXG4gICAgICAgICAgICAgICAgc291cmNlOiB0aGlzLm9wdGlvbkNvbnRhaW5lcixcclxuICAgICAgICAgICAgICAgIGJvdW5jZTogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBtdWx0aXBsaWVyOiAtMSxcclxuICAgICAgICAgICAgICAgIHVwZGF0ZTogKHgsIHkpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm9wdGlvbkNvbnRhaW5lci5zY3JvbGxMZWZ0ID0gTWF0aC5mbG9vcih4KTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm9wdGlvbkNvbnRhaW5lci5zY3JvbGxUb3AgPSB5O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm9uU2Nyb2xsKCk7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgYm91bmRZOiBbMCwgMF1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBJbXBsZW1lbnQgdGhpcyB0byBsb2FkIGFkZGl0aW9uYWwgcmVzdWx0c1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHByb3RlY3RlZCBhYnN0cmFjdCBfbG9hZE1vcmUoKTpSaWRlU3R5bGVyUHJvbWlzZTtcclxuICAgICAgICBwdWJsaWMgbG9hZE1vcmUoKTpSaWRlU3R5bGVyUHJvbWlzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9sb2FkTW9yZSgpLmFsd2F5cygoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNsZWFyT3B0aW9uTG9hZGVyKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUJvdW5kcygpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB1cGRhdGVCb3VuZHMoKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHtzY3JvbGxXaWR0aCwgb2Zmc2V0V2lkdGh9ID0gdGhpcy5vcHRpb25Db250YWluZXI7XHJcbiAgICAgICAgICAgIHRoaXMudG91Y2hTY3JvbGxIYW5kbGVyLnNldEJvdW5kWChbMCwgc2Nyb2xsV2lkdGggLSBvZmZzZXRXaWR0aF0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBvblNjcm9sbCgpIHtcclxuICAgICAgICAgICAgdGhpcy51cGRhdGVQYWdpbmF0aW9uQnV0dG9ucygpO1xyXG5cclxuICAgICAgICAgICAgbGV0IG9wdGlvbkNvbnRhaW5lciA9IHRoaXMub3B0aW9uQ29udGFpbmVyO1xyXG4gICAgICAgICAgICBjb25zdCByZWFjaGVkRW5kVG9sZXJhbmNlID0gMTA7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZiAob3B0aW9uQ29udGFpbmVyLnNjcm9sbExlZnQgPj0gb3B0aW9uQ29udGFpbmVyLnNjcm9sbFdpZHRoIC0gb3B0aW9uQ29udGFpbmVyLm9mZnNldFdpZHRoIC0gcmVhY2hlZEVuZFRvbGVyYW5jZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vbkVuZFZpc2libGUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUJvdW5kcygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIG9uRW5kVmlzaWJsZSgpIHtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLmlzTG9hZGluZyAmJiB0aGlzLmhhc01vcmVSZXN1bHRzKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFkZE9wdGlvbkxvYWRlcigpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVCb3VuZHMoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMubG9hZE1vcmUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBvbkNvbXBvbmVudENsaWNrKGV2ZW50Ok1vdXNlRXZlbnQpIHtcclxuICAgICAgICAgICAgbGV0IGN1cnJlbnRUYXJnZXQ6SFRNTEVsZW1lbnQgPSBldmVudC50YXJnZXQgYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBJdGVyYXRlIHRocm91Z2ggcGFyZW50cyB1bnRpbCB3ZSd2ZSByZWFjaGVkIHRoZSBib3VuZCBlbGVtZW50XHJcbiAgICAgICAgICAgIHdoaWxlIChjdXJyZW50VGFyZ2V0ICE9PSB0aGlzLmNvbXBvbmVudCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKG9wdGlvbkNsYXNzKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMub25PcHRpb25DbGljayhjdXJyZW50VGFyZ2V0KTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGN1cnJlbnRUYXJnZXQgPT09IHRoaXMucHJldkJ1dHRvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJldmlvdXNQYWdlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChjdXJyZW50VGFyZ2V0ID09PSB0aGlzLm5leHRCdXR0b24pIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm5leHRQYWdlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGN1cnJlbnRUYXJnZXQgPSBjdXJyZW50VGFyZ2V0LnBhcmVudEVsZW1lbnQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgdXBkYXRlUGFnaW5hdGlvbkJ1dHRvbnMoKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG9wdGlvbkNvbnRhaW5lciA9IHRoaXMub3B0aW9uQ29udGFpbmVyO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5wcmV2QnV0dG9uLmRpc2FibGVkID0gb3B0aW9uQ29udGFpbmVyLnNjcm9sbExlZnQgPT09IDA7XHJcbiAgICAgICAgICAgIHRoaXMubmV4dEJ1dHRvbi5kaXNhYmxlZCA9IG9wdGlvbkNvbnRhaW5lci5zY3JvbGxMZWZ0ID49IG9wdGlvbkNvbnRhaW5lci5zY3JvbGxXaWR0aCAtIG9wdGlvbkNvbnRhaW5lci5jbGllbnRXaWR0aCAtIDE7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBBZGRzIGEgc3Bpbm5lciB0byB0aGUgZW5kIG9mIHRoZSBsaXN0IGluZGljYXRpbmcgc29tZXRoaW5nIGlzIGxvYWRpbmdcclxuICAgICAgICAgKi9cclxuICAgICAgICBwcm90ZWN0ZWQgYWRkT3B0aW9uTG9hZGVyKCkge1xyXG4gICAgICAgICAgICB0aGlzLm9wdGlvbkNvbnRhaW5lci5hcHBlbmRDaGlsZChIVE1MSGVscGVyLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcclxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogb3B0aW9uQ2xhc3MgKyAnICcgKyBvcHRpb25Mb2FkZXJDbGFzc1xyXG4gICAgICAgICAgICB9KSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgY2xlYXJPcHRpb25Mb2FkZXIoKSB7XHJcbiAgICAgICAgICAgIEhUTUxIZWxwZXIucmVtb3ZlQ2hpbGRyZW5XaXRoQ2xhc3Nlcyh0aGlzLm9wdGlvbkNvbnRhaW5lciwgb3B0aW9uTG9hZGVyQ2xhc3MpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIGFkZE9wdGlvbkVsZW1lbnRzKGVsZW1lbnRzOk5vZGVbXXxOb2RlKSB7XHJcbiAgIFxyXG4gICAgICAgICAgICBsZXQgaGFzTm9SZXN1bHRzID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICBpZiAoZWxlbWVudHMgaW5zdGFuY2VvZiBEb2N1bWVudEZyYWdtZW50KSB7XHJcbiAgICAgICAgICAgICAgICBoYXNOb1Jlc3VsdHMgPSBlbGVtZW50cy5jaGlsZE5vZGVzLmxlbmd0aCA9PT0gMDtcclxuICAgICAgICAgICAgICAgIHRoaXMub3B0aW9uQ29udGFpbmVyLmFwcGVuZENoaWxkKGVsZW1lbnRzKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChlbGVtZW50cyBpbnN0YW5jZW9mIE5vZGUpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMub3B0aW9uQ29udGFpbmVyLmFwcGVuZENoaWxkKGVsZW1lbnRzKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmICghZWxlbWVudHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaGFzTm9SZXN1bHRzID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgZWxlbWVudCBvZiBlbGVtZW50cyBhcyBOb2RlW10pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub3B0aW9uQ29udGFpbmVyLmFwcGVuZENoaWxkKGVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoaGFzTm9SZXN1bHRzKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNob3dOb1Jlc3VsdHMoKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5jbGVhck9wdGlvbkxvYWRlcigpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy51cGRhdGUoKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuaXNGaXJzdExvYWQgPSBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBub1Jlc3VsdHNFbGVtZW50OkhUTUxFbGVtZW50O1xyXG4gICAgICAgIHByb3RlY3RlZCBzaG93Tm9SZXN1bHRzKCkge1xyXG4gICAgICAgICAgICB0aGlzLm5vUmVzdWx0c0VsZW1lbnQgPSBIVE1MSGVscGVyLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcclxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogb3B0aW9uQ2xhc3MgKyAnICcgKyBub1Jlc3VsdHNDbGFzcyxcclxuICAgICAgICAgICAgICAgIHRleHQ6IHN0cmluZ3MuZ2V0U3RyaW5nKCduby1yZXN1bHRzJyksXHJcbiAgICAgICAgICAgICAgICBhcHBlbmRUbzogdGhpcy5vcHRpb25Db250YWluZXJcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgY2xlYXJPcHRpb25zKCkge1xyXG4gICAgICAgICAgICBIVE1MSGVscGVyLmVtcHR5KHRoaXMub3B0aW9uQ29udGFpbmVyKTtcclxuICAgICAgICAgICAgdGhpcy5hZGRPcHRpb25Mb2FkZXIoKTtcclxuICAgICAgICAgICAgdGhpcy5pc0ZpcnN0TG9hZCA9IHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdXBkYXRlKCkge1xyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVBhZ2luYXRpb25CdXR0b25zKCk7XHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlQm91bmRzKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc2Nyb2xsVG8obmV3TGVmdDpudW1iZXIpIHtcclxuICAgICAgICAgICAgY29uc3Qgc3RhcnRMZWZ0ID0gdGhpcy5vcHRpb25Db250YWluZXIuc2Nyb2xsTGVmdDtcclxuICAgICAgICAgICAgY29uc3QgZHVyYXRpb24gPSBNYXRoLmFicyhzdGFydExlZnQgLSBuZXdMZWZ0KSAvIDJcclxuXHJcbiAgICAgICAgICAgIFRpbnlBbmltYXRlLmFuaW1hdGUoc3RhcnRMZWZ0LCBuZXdMZWZ0LCBkdXJhdGlvbiwgY3VycmVudExlZnQgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vcHRpb25Db250YWluZXIuc2Nyb2xsTGVmdCA9IGN1cnJlbnRMZWZ0XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRvdWNoU2Nyb2xsSGFuZGxlci5zZXRWYWx1ZXMobmV3TGVmdCwgMCk7XHJcbiAgICAgICAgICAgIH0sICdlYXNlT3V0Q3ViaWMnLCAoKSA9PiB0aGlzLnVwZGF0ZSgpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBwcmV2aW91c1BhZ2UoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2Nyb2xsVG8odGhpcy5vcHRpb25Db250YWluZXIuc2Nyb2xsTGVmdCAtIHRoaXMub3B0aW9uQ29udGFpbmVyLmNsaWVudFdpZHRoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBuZXh0UGFnZSgpIHtcclxuICAgICAgICAgICAgdGhpcy5zY3JvbGxUbyh0aGlzLm9wdGlvbkNvbnRhaW5lci5zY3JvbGxMZWZ0ICsgdGhpcy5vcHRpb25Db250YWluZXIuY2xpZW50V2lkdGgpO1xyXG4gICAgICAgICAgICAgICAgbGV0IG9wdGlvbkNvbnRhaW5lciA9IHRoaXMub3B0aW9uQ29udGFpbmVyO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcmVhY2hlZEVuZFRvbGVyYW5jZSA9IDU7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGlmIChvcHRpb25Db250YWluZXIuc2Nyb2xsTGVmdCA+PSBvcHRpb25Db250YWluZXIuc2Nyb2xsV2lkdGggLSBvcHRpb25Db250YWluZXIub2Zmc2V0V2lkdGggLSByZWFjaGVkRW5kVG9sZXJhbmNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vbkVuZFZpc2libGUoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlQm91bmRzKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc2VsZWN0T3B0aW9uKG9wdGlvbkVsZW1lbnQ6SFRNTEVsZW1lbnQpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRPcHRpb24gPT09IG9wdGlvbkVsZW1lbnQpIHJldHVybjsgLy8gQWxyZWFkeSBzZWxlY3RlZFxyXG5cclxuICAgICAgICAgICAgbGV0IG9sZE9wdGlvbkVsZW1lbnQgPSB0aGlzLnNlbGVjdGVkT3B0aW9uO1xyXG5cclxuICAgICAgICAgICAgaWYgKG9sZE9wdGlvbkVsZW1lbnQpXHJcbiAgICAgICAgICAgICAgICBvbGRPcHRpb25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUob3B0aW9uU2VsZWN0ZWRDbGFzcywgb3B0aW9uTG9hZGluZ0NsYXNzKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIG9wdGlvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZChvcHRpb25TZWxlY3RlZENsYXNzKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRPcHRpb24gPSBvcHRpb25FbGVtZW50O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogU2V0IG9yIHJlbW92ZSB0aGUgbG9hZGluZyBjbGFzcyBmcm9tIHRoZSBjdXJyZW50bHkgc2VsZWN0ZWQgb3B0aW9uXHJcbiAgICAgICAgICogQHBhcmFtIGlzTG9hZGluZyBJZiB0cnVlLCBhZGQgdGhlIGxvYWRpbmcgY2xhc3MsIG90aGVyd2lzZSByZW1vdmUgaXRcclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgc2V0T3B0aW9uSXNMb2FkaW5nKGlzTG9hZGluZzpib29sZWFuKSB7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5zZWxlY3RlZE9wdGlvbikgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZE9wdGlvbi5jbGFzc0xpc3RbaXNMb2FkaW5nID8gJ2FkZCcgOiAncmVtb3ZlJ10ob3B0aW9uTG9hZGluZ0NsYXNzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENhbGxlZCB3aGVuIGFuIG9wdGlvbiBlbGVtZW50IGlzIGNsaWNrZWQgb24uXHJcbiAgICAgICAgICogQHBhcmFtIG9wdGlvbkVsZW1lbnQgVGhlIG9wdGlvbiBlbGVtZW50IHRoYXQgd2FzIGNsaWNrZWQgb25cclxuICAgICAgICAgKi9cclxuICAgICAgICBwcm90ZWN0ZWQgb25PcHRpb25DbGljayhvcHRpb25FbGVtZW50OkhUTUxFbGVtZW50KSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0T3B0aW9uKG9wdGlvbkVsZW1lbnQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSIsInZhciBSaWRlU3R5bGVyU2hvd2Nhc2U7XG4oZnVuY3Rpb24gKFJpZGVTdHlsZXJTaG93Y2FzZSkge1xuICAgIGNvbnN0IHByZXZCdXR0b25DbGFzcyA9ICdyaWRlc3R5bGVyLXNob3djYXNlLXBhZ2luYXRpb24tcHJldic7XG4gICAgY29uc3QgbmV4dEJ1dHRvbkNsYXNzID0gJ3JpZGVzdHlsZXItc2hvd2Nhc2UtcGFnaW5hdGlvbi1uZXh0JztcbiAgICBjb25zdCBvcHRpb25DbGFzcyA9ICdyaWRlc3R5bGVyLXNob3djYXNlLXBhZ2luYXRpb24tb3B0aW9uJztcbiAgICBjb25zdCBvcHRpb25TZWxlY3RlZENsYXNzID0gb3B0aW9uQ2xhc3MgKyAnLXNlbGVjdGVkJztcbiAgICBjb25zdCBvcHRpb25Mb2FkaW5nQ2xhc3MgPSBvcHRpb25DbGFzcyArICctbG9hZGluZyc7XG4gICAgY29uc3Qgb3B0aW9uTG9hZGVyQ2xhc3MgPSBvcHRpb25DbGFzcyArICctbG9hZGVyJztcbiAgICBjb25zdCBub1Jlc3VsdHNDbGFzcyA9IG9wdGlvbkNsYXNzICsgJy1uby1yZXN1bHRzJztcbiAgICBjbGFzcyBSaWRlU3R5bGVyU2hvd2Nhc2VQYWdpbmF0aW9uQ29tcG9uZW50IGV4dGVuZHMgUmlkZVN0eWxlclNob3djYXNlLkNvbXBvbmVudEJhc2Uge1xuICAgICAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIElmIHRydWUsIHRoaXMgaGFzIG1vcmUgcmVzdWx0cyB0aGF0IGl0IGNhbiBsb2FkXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIHRoaXMuaGFzTW9yZVJlc3VsdHMgPSB0cnVlO1xuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBJZiB0cnVlLCB0aGlzIGlzIGxvYWRpbmdcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgdGhpcy5pc0xvYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogSWYgdHJ1ZSwgdGhlIGZpcnN0IGxvYWQgaXMgYmVpbmcgcHJlZm9ybWVkIG9yIGhhc24ndCBiZWVuIHByZWZvcm1lZCB5ZXQuXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIHRoaXMuaXNGaXJzdExvYWQgPSB0cnVlO1xuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBTZXQgdGhpcyB0byBmYWxzZSB0byBub3Qgc2hvdyB0aGUgbm8gcmVzdWx0cyBtZXNzYWdlXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIHRoaXMuZW5hYmxlU2hvd05vUmVzdWx0cyA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaW5pdGlhbGl6ZUNvbXBvbmVudCgpIHtcbiAgICAgICAgICAgIHRoaXMuY29tcG9uZW50ID0gUmlkZVN0eWxlclNob3djYXNlLkhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCgnZGl2Jywge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ3JpZGVzdHlsZXItc2hvd2Nhc2UtcGFnaW5hdGlvbidcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5vcHRpb25Db250YWluZXIgPSBSaWRlU3R5bGVyU2hvd2Nhc2UuSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAncmlkZXN0eWxlci1zaG93Y2FzZS1wYWdpbmF0aW9uLXdyYXBwZXInLFxuICAgICAgICAgICAgICAgIGFwcGVuZFRvOiB0aGlzLmNvbXBvbmVudCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5wcmV2QnV0dG9uID0gUmlkZVN0eWxlclNob3djYXNlLkhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCgnYnV0dG9uJywge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogcHJldkJ1dHRvbkNsYXNzLFxuICAgICAgICAgICAgICAgIGFwcGVuZFRvOiB0aGlzLmNvbXBvbmVudCxcbiAgICAgICAgICAgICAgICBhcHBlbmQ6IFJpZGVTdHlsZXJTaG93Y2FzZS5IVE1MSGVscGVyLmNyZWF0ZUljb24oJ2NoZXZyb24tbGVmdCcpXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMubmV4dEJ1dHRvbiA9IFJpZGVTdHlsZXJTaG93Y2FzZS5IVE1MSGVscGVyLmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IG5leHRCdXR0b25DbGFzcyxcbiAgICAgICAgICAgICAgICBhcHBlbmRUbzogdGhpcy5jb21wb25lbnQsXG4gICAgICAgICAgICAgICAgYXBwZW5kOiBSaWRlU3R5bGVyU2hvd2Nhc2UuSFRNTEhlbHBlci5jcmVhdGVJY29uKCdjaGV2cm9uLXJpZ2h0JylcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgLy8gTGlzdGVuIGZvciBjbGlja3Mgb24gb3B0aW9uc1xuICAgICAgICAgICAgdGhpcy5jb21wb25lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBldmVudCA9PiB0aGlzLm9uQ29tcG9uZW50Q2xpY2soZXZlbnQpKTtcbiAgICAgICAgICAgIC8vIFJ1biBjbGVhciBvcHRpb25zIHRvIGdldCB0aGUgbG9hZGVyXG4gICAgICAgICAgICB0aGlzLmNsZWFyT3B0aW9ucygpO1xuICAgICAgICAgICAgLy8gTG9hZCBwYWdpbmF0aW9uIGFmdGVyIHRoaXMgY29tcG9uZW50IGhhcyBiZWVuIHNldHVwXG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHRoaXMubG9hZE1vcmUoKSwgMCk7XG4gICAgICAgICAgICBSaWRlU3R5bGVyU2hvd2Nhc2UuU2Nyb2xsSGVscGVyLmF0dGFjaFdoZWVsTGlzdGVuZXIodGhpcy5jb21wb25lbnQsIGV2ZW50ID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBkZWx0YSA9IGV2ZW50LmRlbHRhWCB8fCBldmVudC5kZWx0YVk7XG4gICAgICAgICAgICAgICAgY29uc3QgeyBzY3JvbGxMZWZ0LCBzY3JvbGxXaWR0aCwgb2Zmc2V0V2lkdGggfSA9IHRoaXMub3B0aW9uQ29udGFpbmVyO1xuICAgICAgICAgICAgICAgIGNvbnN0IG5ld1ZhbHVlID0gTWF0aC5taW4oc2Nyb2xsTGVmdCArIGRlbHRhLCBzY3JvbGxXaWR0aCAtIG9mZnNldFdpZHRoKTtcbiAgICAgICAgICAgICAgICB0aGlzLm9wdGlvbkNvbnRhaW5lci5zY3JvbGxMZWZ0ID0gbmV3VmFsdWU7XG4gICAgICAgICAgICAgICAgdGhpcy50b3VjaFNjcm9sbEhhbmRsZXIuc2V0VmFsdWVzKG5ld1ZhbHVlLCAwKTtcbiAgICAgICAgICAgICAgICB0aGlzLm9uU2Nyb2xsKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMudG91Y2hTY3JvbGxIYW5kbGVyID0gbmV3IEltcGV0dXMoe1xuICAgICAgICAgICAgICAgIHNvdXJjZTogdGhpcy5vcHRpb25Db250YWluZXIsXG4gICAgICAgICAgICAgICAgYm91bmNlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBtdWx0aXBsaWVyOiAtMSxcbiAgICAgICAgICAgICAgICB1cGRhdGU6ICh4LCB5KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMub3B0aW9uQ29udGFpbmVyLnNjcm9sbExlZnQgPSBNYXRoLmZsb29yKHgpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm9wdGlvbkNvbnRhaW5lci5zY3JvbGxUb3AgPSB5O1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm9uU2Nyb2xsKCk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBib3VuZFk6IFswLCAwXVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgbG9hZE1vcmUoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fbG9hZE1vcmUoKS5hbHdheXMoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuY2xlYXJPcHRpb25Mb2FkZXIoKTtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUJvdW5kcygpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgdXBkYXRlQm91bmRzKCkge1xuICAgICAgICAgICAgY29uc3QgeyBzY3JvbGxXaWR0aCwgb2Zmc2V0V2lkdGggfSA9IHRoaXMub3B0aW9uQ29udGFpbmVyO1xuICAgICAgICAgICAgdGhpcy50b3VjaFNjcm9sbEhhbmRsZXIuc2V0Qm91bmRYKFswLCBzY3JvbGxXaWR0aCAtIG9mZnNldFdpZHRoXSk7XG4gICAgICAgIH1cbiAgICAgICAgb25TY3JvbGwoKSB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVBhZ2luYXRpb25CdXR0b25zKCk7XG4gICAgICAgICAgICBsZXQgb3B0aW9uQ29udGFpbmVyID0gdGhpcy5vcHRpb25Db250YWluZXI7XG4gICAgICAgICAgICBjb25zdCByZWFjaGVkRW5kVG9sZXJhbmNlID0gMTA7XG4gICAgICAgICAgICBpZiAob3B0aW9uQ29udGFpbmVyLnNjcm9sbExlZnQgPj0gb3B0aW9uQ29udGFpbmVyLnNjcm9sbFdpZHRoIC0gb3B0aW9uQ29udGFpbmVyLm9mZnNldFdpZHRoIC0gcmVhY2hlZEVuZFRvbGVyYW5jZSkge1xuICAgICAgICAgICAgICAgIHRoaXMub25FbmRWaXNpYmxlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUJvdW5kcygpO1xuICAgICAgICB9XG4gICAgICAgIG9uRW5kVmlzaWJsZSgpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5pc0xvYWRpbmcgJiYgdGhpcy5oYXNNb3JlUmVzdWx0cykge1xuICAgICAgICAgICAgICAgIHRoaXMuYWRkT3B0aW9uTG9hZGVyKCk7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVCb3VuZHMoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmxvYWRNb3JlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgb25Db21wb25lbnRDbGljayhldmVudCkge1xuICAgICAgICAgICAgbGV0IGN1cnJlbnRUYXJnZXQgPSBldmVudC50YXJnZXQ7XG4gICAgICAgICAgICAvLyBJdGVyYXRlIHRocm91Z2ggcGFyZW50cyB1bnRpbCB3ZSd2ZSByZWFjaGVkIHRoZSBib3VuZCBlbGVtZW50XG4gICAgICAgICAgICB3aGlsZSAoY3VycmVudFRhcmdldCAhPT0gdGhpcy5jb21wb25lbnQpIHtcbiAgICAgICAgICAgICAgICBpZiAoY3VycmVudFRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMob3B0aW9uQ2xhc3MpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMub25PcHRpb25DbGljayhjdXJyZW50VGFyZ2V0KTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChjdXJyZW50VGFyZ2V0ID09PSB0aGlzLnByZXZCdXR0b24pIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcmV2aW91c1BhZ2UoKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChjdXJyZW50VGFyZ2V0ID09PSB0aGlzLm5leHRCdXR0b24pIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5uZXh0UGFnZSgpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGN1cnJlbnRUYXJnZXQgPSBjdXJyZW50VGFyZ2V0LnBhcmVudEVsZW1lbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdXBkYXRlUGFnaW5hdGlvbkJ1dHRvbnMoKSB7XG4gICAgICAgICAgICBjb25zdCBvcHRpb25Db250YWluZXIgPSB0aGlzLm9wdGlvbkNvbnRhaW5lcjtcbiAgICAgICAgICAgIHRoaXMucHJldkJ1dHRvbi5kaXNhYmxlZCA9IG9wdGlvbkNvbnRhaW5lci5zY3JvbGxMZWZ0ID09PSAwO1xuICAgICAgICAgICAgdGhpcy5uZXh0QnV0dG9uLmRpc2FibGVkID0gb3B0aW9uQ29udGFpbmVyLnNjcm9sbExlZnQgPj0gb3B0aW9uQ29udGFpbmVyLnNjcm9sbFdpZHRoIC0gb3B0aW9uQ29udGFpbmVyLmNsaWVudFdpZHRoIC0gMTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogQWRkcyBhIHNwaW5uZXIgdG8gdGhlIGVuZCBvZiB0aGUgbGlzdCBpbmRpY2F0aW5nIHNvbWV0aGluZyBpcyBsb2FkaW5nXG4gICAgICAgICAqL1xuICAgICAgICBhZGRPcHRpb25Mb2FkZXIoKSB7XG4gICAgICAgICAgICB0aGlzLm9wdGlvbkNvbnRhaW5lci5hcHBlbmRDaGlsZChSaWRlU3R5bGVyU2hvd2Nhc2UuSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBvcHRpb25DbGFzcyArICcgJyArIG9wdGlvbkxvYWRlckNsYXNzXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICAgICAgY2xlYXJPcHRpb25Mb2FkZXIoKSB7XG4gICAgICAgICAgICBSaWRlU3R5bGVyU2hvd2Nhc2UuSFRNTEhlbHBlci5yZW1vdmVDaGlsZHJlbldpdGhDbGFzc2VzKHRoaXMub3B0aW9uQ29udGFpbmVyLCBvcHRpb25Mb2FkZXJDbGFzcyk7XG4gICAgICAgIH1cbiAgICAgICAgYWRkT3B0aW9uRWxlbWVudHMoZWxlbWVudHMpIHtcbiAgICAgICAgICAgIGxldCBoYXNOb1Jlc3VsdHMgPSBmYWxzZTtcbiAgICAgICAgICAgIGlmIChlbGVtZW50cyBpbnN0YW5jZW9mIERvY3VtZW50RnJhZ21lbnQpIHtcbiAgICAgICAgICAgICAgICBoYXNOb1Jlc3VsdHMgPSBlbGVtZW50cy5jaGlsZE5vZGVzLmxlbmd0aCA9PT0gMDtcbiAgICAgICAgICAgICAgICB0aGlzLm9wdGlvbkNvbnRhaW5lci5hcHBlbmRDaGlsZChlbGVtZW50cyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChlbGVtZW50cyBpbnN0YW5jZW9mIE5vZGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm9wdGlvbkNvbnRhaW5lci5hcHBlbmRDaGlsZChlbGVtZW50cyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoIWVsZW1lbnRzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBoYXNOb1Jlc3VsdHMgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgZWxlbWVudCBvZiBlbGVtZW50cylcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub3B0aW9uQ29udGFpbmVyLmFwcGVuZENoaWxkKGVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChoYXNOb1Jlc3VsdHMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNob3dOb1Jlc3VsdHMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuY2xlYXJPcHRpb25Mb2FkZXIoKTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlKCk7XG4gICAgICAgICAgICB0aGlzLmlzRmlyc3RMb2FkID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgc2hvd05vUmVzdWx0cygpIHtcbiAgICAgICAgICAgIHRoaXMubm9SZXN1bHRzRWxlbWVudCA9IFJpZGVTdHlsZXJTaG93Y2FzZS5IVE1MSGVscGVyLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IG9wdGlvbkNsYXNzICsgJyAnICsgbm9SZXN1bHRzQ2xhc3MsXG4gICAgICAgICAgICAgICAgdGV4dDogUmlkZVN0eWxlclNob3djYXNlLnN0cmluZ3MuZ2V0U3RyaW5nKCduby1yZXN1bHRzJyksXG4gICAgICAgICAgICAgICAgYXBwZW5kVG86IHRoaXMub3B0aW9uQ29udGFpbmVyXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBjbGVhck9wdGlvbnMoKSB7XG4gICAgICAgICAgICBSaWRlU3R5bGVyU2hvd2Nhc2UuSFRNTEhlbHBlci5lbXB0eSh0aGlzLm9wdGlvbkNvbnRhaW5lcik7XG4gICAgICAgICAgICB0aGlzLmFkZE9wdGlvbkxvYWRlcigpO1xuICAgICAgICAgICAgdGhpcy5pc0ZpcnN0TG9hZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgdXBkYXRlKCkge1xuICAgICAgICAgICAgdGhpcy51cGRhdGVQYWdpbmF0aW9uQnV0dG9ucygpO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVCb3VuZHMoKTtcbiAgICAgICAgfVxuICAgICAgICBzY3JvbGxUbyhuZXdMZWZ0KSB7XG4gICAgICAgICAgICBjb25zdCBzdGFydExlZnQgPSB0aGlzLm9wdGlvbkNvbnRhaW5lci5zY3JvbGxMZWZ0O1xuICAgICAgICAgICAgY29uc3QgZHVyYXRpb24gPSBNYXRoLmFicyhzdGFydExlZnQgLSBuZXdMZWZ0KSAvIDI7XG4gICAgICAgICAgICBUaW55QW5pbWF0ZS5hbmltYXRlKHN0YXJ0TGVmdCwgbmV3TGVmdCwgZHVyYXRpb24sIGN1cnJlbnRMZWZ0ID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLm9wdGlvbkNvbnRhaW5lci5zY3JvbGxMZWZ0ID0gY3VycmVudExlZnQ7XG4gICAgICAgICAgICAgICAgdGhpcy50b3VjaFNjcm9sbEhhbmRsZXIuc2V0VmFsdWVzKG5ld0xlZnQsIDApO1xuICAgICAgICAgICAgfSwgJ2Vhc2VPdXRDdWJpYycsICgpID0+IHRoaXMudXBkYXRlKCkpO1xuICAgICAgICB9XG4gICAgICAgIHByZXZpb3VzUGFnZSgpIHtcbiAgICAgICAgICAgIHRoaXMuc2Nyb2xsVG8odGhpcy5vcHRpb25Db250YWluZXIuc2Nyb2xsTGVmdCAtIHRoaXMub3B0aW9uQ29udGFpbmVyLmNsaWVudFdpZHRoKTtcbiAgICAgICAgfVxuICAgICAgICBuZXh0UGFnZSgpIHtcbiAgICAgICAgICAgIHRoaXMuc2Nyb2xsVG8odGhpcy5vcHRpb25Db250YWluZXIuc2Nyb2xsTGVmdCArIHRoaXMub3B0aW9uQ29udGFpbmVyLmNsaWVudFdpZHRoKTtcbiAgICAgICAgICAgIGxldCBvcHRpb25Db250YWluZXIgPSB0aGlzLm9wdGlvbkNvbnRhaW5lcjtcbiAgICAgICAgICAgIGNvbnN0IHJlYWNoZWRFbmRUb2xlcmFuY2UgPSA1O1xuICAgICAgICAgICAgaWYgKG9wdGlvbkNvbnRhaW5lci5zY3JvbGxMZWZ0ID49IG9wdGlvbkNvbnRhaW5lci5zY3JvbGxXaWR0aCAtIG9wdGlvbkNvbnRhaW5lci5vZmZzZXRXaWR0aCAtIHJlYWNoZWRFbmRUb2xlcmFuY2UpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm9uRW5kVmlzaWJsZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy51cGRhdGVCb3VuZHMoKTtcbiAgICAgICAgfVxuICAgICAgICBzZWxlY3RPcHRpb24ob3B0aW9uRWxlbWVudCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRPcHRpb24gPT09IG9wdGlvbkVsZW1lbnQpXG4gICAgICAgICAgICAgICAgcmV0dXJuOyAvLyBBbHJlYWR5IHNlbGVjdGVkXG4gICAgICAgICAgICBsZXQgb2xkT3B0aW9uRWxlbWVudCA9IHRoaXMuc2VsZWN0ZWRPcHRpb247XG4gICAgICAgICAgICBpZiAob2xkT3B0aW9uRWxlbWVudClcbiAgICAgICAgICAgICAgICBvbGRPcHRpb25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUob3B0aW9uU2VsZWN0ZWRDbGFzcywgb3B0aW9uTG9hZGluZ0NsYXNzKTtcbiAgICAgICAgICAgIG9wdGlvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZChvcHRpb25TZWxlY3RlZENsYXNzKTtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRPcHRpb24gPSBvcHRpb25FbGVtZW50O1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTZXQgb3IgcmVtb3ZlIHRoZSBsb2FkaW5nIGNsYXNzIGZyb20gdGhlIGN1cnJlbnRseSBzZWxlY3RlZCBvcHRpb25cbiAgICAgICAgICogQHBhcmFtIGlzTG9hZGluZyBJZiB0cnVlLCBhZGQgdGhlIGxvYWRpbmcgY2xhc3MsIG90aGVyd2lzZSByZW1vdmUgaXRcbiAgICAgICAgICovXG4gICAgICAgIHNldE9wdGlvbklzTG9hZGluZyhpc0xvYWRpbmcpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5zZWxlY3RlZE9wdGlvbilcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkT3B0aW9uLmNsYXNzTGlzdFtpc0xvYWRpbmcgPyAnYWRkJyA6ICdyZW1vdmUnXShvcHRpb25Mb2FkaW5nQ2xhc3MpO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDYWxsZWQgd2hlbiBhbiBvcHRpb24gZWxlbWVudCBpcyBjbGlja2VkIG9uLlxuICAgICAgICAgKiBAcGFyYW0gb3B0aW9uRWxlbWVudCBUaGUgb3B0aW9uIGVsZW1lbnQgdGhhdCB3YXMgY2xpY2tlZCBvblxuICAgICAgICAgKi9cbiAgICAgICAgb25PcHRpb25DbGljayhvcHRpb25FbGVtZW50KSB7XG4gICAgICAgICAgICB0aGlzLnNlbGVjdE9wdGlvbihvcHRpb25FbGVtZW50KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBSaWRlU3R5bGVyU2hvd2Nhc2UuUmlkZVN0eWxlclNob3djYXNlUGFnaW5hdGlvbkNvbXBvbmVudCA9IFJpZGVTdHlsZXJTaG93Y2FzZVBhZ2luYXRpb25Db21wb25lbnQ7XG59KShSaWRlU3R5bGVyU2hvd2Nhc2UgfHwgKFJpZGVTdHlsZXJTaG93Y2FzZSA9IHt9KSk7XG4iLCJuYW1lc3BhY2UgUmlkZVN0eWxlclNob3djYXNlIHtcclxuICAgIGltcG9ydCBWZWhpY2xlUGFpbnRBdHRyaWJ1dGVzID0gcmlkZXN0eWxlci5EYXRhT2JqZWN0cy5WZWhpY2xlUGFpbnRBdHRyaWJ1dGVzO1xyXG4gICAgaW1wb3J0IFZlaGljbGVQYWludFNjaGVtZURlc2NyaXB0aW9uTW9kZWwgPSByaWRlc3R5bGVyLkRlc2NyaXB0aW9ucy5WZWhpY2xlUGFpbnRTY2hlbWVEZXNjcmlwdGlvbk1vZGVsO1xyXG5cclxuICAgIGNvbnN0IHJlc3VsdHNQZXJSZXF1ZXN0ID0gMjA7XHJcblxyXG4gICAgaW50ZXJmYWNlIFJpZGVTdHlsZXJTaG93Y2FzZVBhaW50U2NoZW1lT3B0aW9uRWxlbWVudCBleHRlbmRzIEhUTUxFbGVtZW50IHtcclxuICAgICAgICBwYWludFNjaGVtZT86IFZlaGljbGVQYWludFNjaGVtZURlc2NyaXB0aW9uTW9kZWw7XHJcbiAgICB9XHJcblxyXG4gICAgZXhwb3J0IGNsYXNzIFJpZGVTdHlsZXJTaG93Y2FzZVBhaW50U2VsZWN0b3IgZXh0ZW5kcyBSaWRlU3R5bGVyU2hvd2Nhc2VQYWdpbmF0aW9uQ29tcG9uZW50IHtcclxuICAgICAgICBwcml2YXRlIHJlYWRvbmx5IHZlaGljbGVDb25maWd1cmF0aW9uSUQ6c3RyaW5nO1xyXG5cclxuICAgICAgICBjb25zdHJ1Y3RvcihzaG93Y2FzZUluc3RhbmNlOlJpZGVTdHlsZXJTaG93Y2FzZUluc3RhbmNlKSB7XHJcbiAgICAgICAgICAgIHN1cGVyKHNob3djYXNlSW5zdGFuY2UpO1xyXG5cclxuICAgICAgICAgICAgY29uc3Qge2N1cnJlbnRWZWhpY2xlQ29uZmlndXJhdGlvbklEfSA9IHNob3djYXNlSW5zdGFuY2Uuc3RhdGUuZ2V0RGF0YSgpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy52ZWhpY2xlQ29uZmlndXJhdGlvbklEID0gY3VycmVudFZlaGljbGVDb25maWd1cmF0aW9uSUQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgX2xvYWRNb3JlKCkge1xyXG4gICAgICAgICAgICB0aGlzLmhhc01vcmVSZXN1bHRzID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHRoaXMuaXNMb2FkaW5nID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgIC8vIExvYWQgcGFpbnQgc2NoZW1lcyBmb3IgdGhlIHZlaGljbGVcclxuICAgICAgICAgICAgcmV0dXJuIGFwaS5yZXF1ZXN0KFwidmVoaWNsZS9nZXRwYWludHNjaGVtZWRlc2NyaXB0aW9uc1wiLCB7XHJcbiAgICAgICAgICAgICAgICBWZWhpY2xlQ29uZmlndXJhdGlvbjogdGhpcy52ZWhpY2xlQ29uZmlndXJhdGlvbklEXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAuZG9uZShyZXNwb25zZSA9PiB0aGlzLmNyZWF0ZU9wdGlvbnMocmVzcG9uc2UuU2NoZW1lcykpXHJcbiAgICAgICAgICAgICAgICAuYWx3YXlzKCgpID0+IHRoaXMuaXNMb2FkaW5nID0gZmFsc2UpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBjcmVhdGVPcHRpb25zKHNjaGVtZXM6VmVoaWNsZVBhaW50U2NoZW1lRGVzY3JpcHRpb25Nb2RlbFtdKSB7XHJcbiAgICAgICAgICAgIC8vIENyZWF0ZSBhIGZyYWdtZW50IHNvIHdlIGFkZCBhbGwgb3B0aW9ucyB0byB0aGUgZWxlbWVudCBhdCBvbmNlXHJcbiAgICAgICAgICAgIGxldCBmcmFnbWVudCA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcclxuXHJcbiAgICAgICAgICAgIC8vIENyZWF0ZSBlYWNoIG9wdGlvbiBhbmQgYWRkIGl0IHRvIHRoZSBmcmFnbWVudFxyXG4gICAgICAgICAgICBmb3IgKGxldCBzY2hlbWUgb2Ygc2NoZW1lcykge1xyXG4gICAgICAgICAgICAgICAgbGV0IG9wdGlvbiA9IEhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCgnZGl2Jywge1xyXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ3JpZGVzdHlsZXItc2hvd2Nhc2UtcGFnaW5hdGlvbi1vcHRpb24gcmlkZXN0eWxlci1zaG93Y2FzZS1wYWludC1vcHRpb24nLFxyXG4gICAgICAgICAgICAgICAgICAgIGFwcGVuZFRvOiBmcmFnbWVudFxyXG4gICAgICAgICAgICAgICAgfSkgYXMgUmlkZVN0eWxlclNob3djYXNlUGFpbnRTY2hlbWVPcHRpb25FbGVtZW50O1xyXG5cclxuICAgICAgICAgICAgICAgIG9wdGlvbi5wYWludFNjaGVtZSA9IHNjaGVtZTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBUaGUgbWFpbiBjb2xvciB0byBiZSByZXByZXNlbnRlZCBpbiB0aGUgc3dhdGNoXHJcbiAgICAgICAgICAgICAgICAvLyBUT0RPOiBtdWx0aS1jb2xvciBwYWludCBzY2hlbWVzXHJcbiAgICAgICAgICAgICAgICBsZXQgY29sb3IgPSBzY2hlbWUuQ29sb3JzWzBdO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIFwic3dhdGNoXCI6IFRoZSBkaXNwbGF5IG9mIHRoZSBwYWludCBjb2xvclxyXG4gICAgICAgICAgICAgICAgbGV0IHN3YXRjaCA9IEhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCgnZGl2Jywge1xyXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ3JpZGVzdHlsZXItc2hvd2Nhc2UtcGFnaW5hdGlvbi1vcHRpb24tZGlzcGxheSByaWRlc3R5bGVyLXNob3djYXNlLXBhaW50LXN3YXRjaCcsXHJcbiAgICAgICAgICAgICAgICAgICAgc3R5bGU6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBjb2xvci5IZXhcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGFwcGVuZFRvOiBvcHRpb25cclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIFRoZSBuYW1lIG9mIHRoZSBwYWludCBzY2hlbWUgYXMgdGhlIGxhYmVsXHJcbiAgICAgICAgICAgICAgICBsZXQgbmFtZSA9IEhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCgnZGl2Jywge1xyXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ3JpZGVzdHlsZXItc2hvd2Nhc2UtcGFnaW5hdGlvbi1vcHRpb24tbGFiZWwnLFxyXG4gICAgICAgICAgICAgICAgICAgIHRleHQ6IHNjaGVtZS5TY2hlbWVOYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgIGFwcGVuZFRvOiBvcHRpb25cclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIEF0dHJpYnV0ZXMgb2YgdGhlIGNvbG9yIGZvciB0aGUgc2Vjb25kYXJ5IGxhYmVsXHJcbiAgICAgICAgICAgICAgICBsZXQgYXR0cmlidXRlcyA9IEhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCgnZGl2Jywge1xyXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ3JpZGVzdHlsZXItc2hvd2Nhc2UtcGFnaW5hdGlvbi1vcHRpb24tbGFiZWwtc2Vjb25kYXJ5JyxcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0OiBSaWRlU3R5bGVyU2hvd2Nhc2VQYWludFNlbGVjdG9yLmNyZWF0ZUF0dHJpYnV0ZUxhYmVsKGNvbG9yLkF0dHJpYnV0ZXMpLFxyXG4gICAgICAgICAgICAgICAgICAgIGFwcGVuZFRvOiBvcHRpb25cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBDbGVhciBvdXQgb3VyIHNsaWRlV3JhcHBlciBvZiBhbGwgZWxlbWVudHNcclxuICAgICAgICAgICAgSFRNTEhlbHBlci5lbXB0eSh0aGlzLm9wdGlvbkNvbnRhaW5lcik7XHJcbiAgICAgICAgICAgIC8vIEFkZCBhbGwgb3B0aW9ucyB0byB0aGUgc2xpZGVXcmFwcGVyIGF0IG9uY2VcclxuICAgICAgICAgICAgdGhpcy5vcHRpb25Db250YWluZXIuYXBwZW5kQ2hpbGQoZnJhZ21lbnQpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy51cGRhdGUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBvblBhaW50U2NoZW1lU2VsZWN0ZWQ6IChwYWludFNjaGVtZTpWZWhpY2xlUGFpbnRTY2hlbWVEZXNjcmlwdGlvbk1vZGVsKT0+dm9pZDtcclxuICAgICAgICBwcm90ZWN0ZWQgb25PcHRpb25DbGljayhvcHRpb25FbGVtZW50OkhUTUxFbGVtZW50KSB7XHJcbiAgICAgICAgICAgIGxldCBwYWludFNjaGVtZSA9IChvcHRpb25FbGVtZW50IGFzIFJpZGVTdHlsZXJTaG93Y2FzZVBhaW50U2NoZW1lT3B0aW9uRWxlbWVudCkucGFpbnRTY2hlbWU7XHJcblxyXG4gICAgICAgICAgICBpZiAocGFpbnRTY2hlbWUpIHtcclxuICAgICAgICAgICAgICAgIHN1cGVyLm9uT3B0aW9uQ2xpY2sob3B0aW9uRWxlbWVudCk7XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5leHRlbmREYXRhKHtcclxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50UGFpbnRTY2hlbWU6IHBhaW50U2NoZW1lXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRoaXMub25QYWludFNjaGVtZVNlbGVjdGVkID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vblBhaW50U2NoZW1lU2VsZWN0ZWQocGFpbnRTY2hlbWUpXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIGNyZWF0ZUF0dHJpYnV0ZUxhYmVsKGF0dHJpYnV0ZXM6cmlkZXN0eWxlci5EYXRhT2JqZWN0cy5WZWhpY2xlUGFpbnRBdHRyaWJ1dGVzKTpzdHJpbmcge1xyXG4gICAgICAgICAgICBjb25zdCBkZWZhdWx0QXR0cmlidXRlU3RyaW5nID0gJ0dsb3NzeSc7XHJcblxyXG4gICAgICAgICAgICBpZiAoYXR0cmlidXRlcyA9PT0gVmVoaWNsZVBhaW50QXR0cmlidXRlcy5Ob25lKSByZXR1cm4gZGVmYXVsdEF0dHJpYnV0ZVN0cmluZztcclxuXHJcbiAgICAgICAgICAgIGxldCBzdHJpbmdBdHRyaWJ1dGVzOnN0cmluZ1tdID0gW107XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBBZGQgZWFjaCBzZWxlY3RlZCBwYWludCBhdHRyaWJ1dGUgZmxhZyBmb3IgdGhlIGNvbG9yIHRvIHRoZSBsaXN0XHJcbiAgICAgICAgICAgIGlmIChhdHRyaWJ1dGVzICYmIFZlaGljbGVQYWludEF0dHJpYnV0ZXMuTWF0dGUgPT09IFZlaGljbGVQYWludEF0dHJpYnV0ZXMuTWF0dGUpIHN0cmluZ0F0dHJpYnV0ZXMucHVzaCgnTWF0dGUnKTtcclxuICAgICAgICAgICAgaWYgKGF0dHJpYnV0ZXMgJiYgVmVoaWNsZVBhaW50QXR0cmlidXRlcy5NZXRhbGxpYyA9PT0gVmVoaWNsZVBhaW50QXR0cmlidXRlcy5NZXRhbGxpYykgc3RyaW5nQXR0cmlidXRlcy5wdXNoKCdNZXRhbGxpYycpO1xyXG4gICAgICAgICAgICBpZiAoYXR0cmlidXRlcyAmJiBWZWhpY2xlUGFpbnRBdHRyaWJ1dGVzLlBlYXJsZXNjZW50ID09PSBWZWhpY2xlUGFpbnRBdHRyaWJ1dGVzLlBlYXJsZXNjZW50KSBzdHJpbmdBdHRyaWJ1dGVzLnB1c2goJ1BlYXJsZXNjZW50Jyk7XHJcblxyXG4gICAgICAgICAgICBpZiAoc3RyaW5nQXR0cmlidXRlcy5sZW5ndGggPT09IDApIHJldHVybiBkZWZhdWx0QXR0cmlidXRlU3RyaW5nO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHN0cmluZ0F0dHJpYnV0ZXMuam9pbignLCAnKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iLCJuYW1lc3BhY2UgUmlkZVN0eWxlclNob3djYXNlIHtcbiAgICBjb25zdCBwb3BvdmVyQ2xhc3MgPSAncmlkZXN0eWxlci1zaG93Y2FzZS1wb3BvdmVyJztcbiAgICBjb25zdCBwb3BvdmVySW5DbGFzcyA9ICdpbic7XG5cbiAgICBleHBvcnQgY2xhc3MgUmlkZVN0eWxlclNob3djYXNlUG9wb3ZlciB7XG4gICAgICAgIHB1YmxpYyBjb21wb25lbnQ6SFRNTEVsZW1lbnQ7XG5cbiAgICAgICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgICAgICB0aGlzLmNvbXBvbmVudCA9IEhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCh7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBwb3BvdmVyQ2xhc3NcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcHVibGljIHNob3coKSB7XG4gICAgICAgICAgICB0aGlzLnNldFZpc2libGUodHJ1ZSk7XG4gICAgICAgIH1cblxuICAgICAgICBwdWJsaWMgaGlkZSgpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0VmlzaWJsZShmYWxzZSk7XG4gICAgICAgIH1cblxuICAgICAgICBwdWJsaWMgc2V0VmlzaWJsZSh2aXNpYmxlOmJvb2xlYW4pIHtcbiAgICAgICAgICAgIHRoaXMuY29tcG9uZW50LmNsYXNzTGlzdC50b2dnbGUocG9wb3ZlckluQ2xhc3MsIHZpc2libGUpO1xuICAgICAgICB9XG5cbiAgICAgICAgcHVibGljIGlzVmlzaWJsZSgpOmJvb2xlYW4ge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29tcG9uZW50LmNsYXNzTGlzdC5jb250YWlucyhwb3BvdmVySW5DbGFzcyk7XG4gICAgICAgIH1cblxuICAgICAgICBwdWJsaWMgdG9nZ2xlKCkge1xuICAgICAgICAgICAgdGhpcy5zZXRWaXNpYmxlKHRoaXMuaXNWaXNpYmxlKCkgPyBmYWxzZSA6IHRydWUpO1xuICAgICAgICB9XG4gICAgfVxufSIsIm5hbWVzcGFjZSBSaWRlU3R5bGVyU2hvd2Nhc2Uge1xuICAgIGltcG9ydCBQYWdlID0gUmlkZVN0eWxlclNob3djYXNlUHJvZHVjdE1vZGFsLlBhZ2U7XG5cbiAgICBjb25zdCBwcm9kdWN0TW9kYWxDbGFzcyA9ICdyaWRlc3R5bGVyLXNob3djYXNlLXByb2R1Y3QtbW9kYWwnO1xuICAgIGNvbnN0IHRpdGxlQ2xhc3MgPSBwcm9kdWN0TW9kYWxDbGFzcyArICctdGl0bGUnO1xuICAgIGNvbnN0IHBhZ2VDbGFzcyA9IHByb2R1Y3RNb2RhbENsYXNzICsgJy1wYWdlJztcblxuICAgIGV4cG9ydCBhYnN0cmFjdCBjbGFzcyBSaWRlU3R5bGVyU2hvd2Nhc2VQcm9kdWN0TW9kYWwgZXh0ZW5kcyBSaWRlU3R5bGVyU2hvd2Nhc2VNb2RhbCB7XG4gICAgICAgIHByb3RlY3RlZCB0aXRsZUVsZW1lbnQ6SFRNTEVsZW1lbnQ7XG4gICAgICAgIHByb3RlY3RlZCBicmFuZFRpdGxlRWxlbWVudDpIVE1MRWxlbWVudDtcbiAgICAgICAgcHJvdGVjdGVkIHN1YnRpdGxlRWxlbWVudDpIVE1MRWxlbWVudDtcbiAgICAgICAgcHJvdGVjdGVkIHN1bW1hcnlFbGVtZW50OkhUTUxFbGVtZW50O1xuICAgICAgICBwcm90ZWN0ZWQgc3VtbWFyeUNvbnRhaW5lcjpIVE1MRWxlbWVudDtcblxuICAgICAgICBwcm90ZWN0ZWQgdG9nZ2xlQnV0dG9uOlJpZGVTdHlsZXJTaG93Y2FzZVRvZ2dsZUJ1dHRvbjtcbiAgICAgICAgXG4gICAgICAgIHByb3RlY3RlZCBpbWFnZUNvbnRhaW5lcjpIVE1MRWxlbWVudDtcbiAgICAgICAgcHJvdGVjdGVkIGltYWdlOlJlc2l6ZWFibGVSZXNvdXJjZUltYWdlPGFueT47XG5cbiAgICAgICAgcHJvdGVjdGVkIHBhZ2VzOlBhZ2VbXTtcblxuICAgICAgICBjb25zdHJ1Y3RvcihzaG93Y2FzZUluc3RhbmNlOlJpZGVTdHlsZXJTaG93Y2FzZUluc3RhbmNlKSB7XG4gICAgICAgICAgICBzdXBlcihzaG93Y2FzZUluc3RhbmNlLCB7XG4gICAgICAgICAgICAgICAgcmVtb3ZlT25IaWRkZW46IHRydWVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcHJvdGVjdGVkIGJ1aWxkTW9kYWwoKSB7XG4gICAgICAgICAgICBzdXBlci5idWlsZE1vZGFsKCk7XG5cbiAgICAgICAgICAgIHRoaXMuY29tcG9uZW50LmNsYXNzTGlzdC5hZGQocHJvZHVjdE1vZGFsQ2xhc3MpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGlzLnRvZ2dsZUJ1dHRvbiA9IG5ldyBSaWRlU3R5bGVyU2hvd2Nhc2VUb2dnbGVCdXR0b24odGhpcy5zaG93Y2FzZSk7XG4gICAgICAgICAgICB0aGlzLnRvZ2dsZUJ1dHRvbi5vbkNoYW5nZWQgPSB2YWx1ZSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gU2hvdyB0aGUgY29ycmVjdCBwYWdlIHdoZW4gdGhlIHRvZ2dsZSBidXR0b24gaXMgY2hhbmdlZFxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgcGFnZSBvZiB0aGlzLnBhZ2VzKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChwYWdlLmxhYmVsID09PSB2YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93UGFnZShwYWdlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLmNvbXBvbmVudC5hcHBlbmRDaGlsZCh0aGlzLnRvZ2dsZUJ1dHRvbi5jb21wb25lbnQpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBIVE1MSGVscGVyLmNyZWF0ZUVsZW1lbnQoJ2gxJywge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogdGl0bGVDbGFzcyxcbiAgICAgICAgICAgICAgICBhcHBlbmRUbzogdGhpcy5jb21wb25lbnQsXG4gICAgICAgICAgICAgICAgYXBwZW5kOiBbXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYnJhbmRUaXRsZUVsZW1lbnQgPSBIVE1MSGVscGVyLmNyZWF0ZUVsZW1lbnRXaXRoQ2xhc3MoJ3NwYW4nLCB0aXRsZUNsYXNzICsgJy1icmFuZCcpLFxuICAgICAgICAgICAgICAgICAgICB0aGlzLnRpdGxlRWxlbWVudCA9IEhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCgnc3BhbicpLFxuICAgICAgICAgICAgICAgICAgICB0aGlzLnN1YnRpdGxlRWxlbWVudCA9IEhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudFdpdGhDbGFzcygnc3BhbicsIHRpdGxlQ2xhc3MgKyAnLXN1YnRpdGxlJylcbiAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdGhpcy5zdW1tYXJ5Q29udGFpbmVyID0gSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IHByb2R1Y3RNb2RhbENsYXNzICsgJy1zdW1tYXJ5LWNvbnRhaW5lcidcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB0aGlzLmltYWdlQ29udGFpbmVyID0gSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IHByb2R1Y3RNb2RhbENsYXNzICsgJy1pbWFnZScsXG4gICAgICAgICAgICAgICAgYXBwZW5kVG86IHRoaXMuc3VtbWFyeUNvbnRhaW5lclxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHRoaXMuaW1hZ2UgPSB0aGlzLmNyZWF0ZUltYWdlKCk7XG5cbiAgICAgICAgICAgIHRoaXMuc3VtbWFyeUVsZW1lbnQgPSBIVE1MSGVscGVyLmNyZWF0ZUVsZW1lbnQoe1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogcHJvZHVjdE1vZGFsQ2xhc3MgKyAnLXN1bW1hcnknLFxuICAgICAgICAgICAgICAgIGFwcGVuZFRvOiB0aGlzLnN1bW1hcnlDb250YWluZXJcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB0aGlzLmFkZFBhZ2Uoe1xuICAgICAgICAgICAgICAgIGxhYmVsOiBzdHJpbmdzLmdldFN0cmluZygnc3VtbWFyeScpLFxuICAgICAgICAgICAgICAgIGNvbnRhaW5lcjogdGhpcy5zdW1tYXJ5Q29udGFpbmVyXG4gICAgICAgICAgICB9LCB0cnVlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDcmVhdGUgdGhlIFJlc2l6ZWFibGVSZXNvdXJjZUltYWdlIGVsZW1lbnQgZm9yIHRoaXMgcHJvZHVjdFxuICAgICAgICAgKi9cbiAgICAgICAgcHJvdGVjdGVkIGFic3RyYWN0IGNyZWF0ZUltYWdlKCk6UmVzaXplYWJsZVJlc291cmNlSW1hZ2U8YW55PjtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQWRkIGEgbmV3IHBhZ2UgdG8gdGhlIHByb2R1Y3QgbW9kYWwgYW5kIHRvZ2dsZSBidXR0b25cbiAgICAgICAgICogQHBhcmFtIHBhZ2UgVGhlIG5ldyBwYWdlXG4gICAgICAgICAqIEBwYXJhbSBzZXRWaXNpYmxlIElmIHRydWUsIHNob3cgdGhlIHBhZ2UgYWZ0ZXIgYWRkaW5nIGl0XG4gICAgICAgICAqL1xuICAgICAgICBwcm90ZWN0ZWQgYWRkUGFnZShwYWdlOlBhZ2UsIHNldFZpc2libGU6Ym9vbGVhbiA9IGZhbHNlKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMucGFnZXMpIHRoaXMucGFnZXMgPSBbXTtcblxuICAgICAgICAgICAgdGhpcy5wYWdlcy5wdXNoKHBhZ2UpO1xuXG4gICAgICAgICAgICB0aGlzLnRvZ2dsZUJ1dHRvbi5hZGRPcHRpb24oe1xuICAgICAgICAgICAgICAgIGxhYmVsOiBwYWdlLmxhYmVsLFxuICAgICAgICAgICAgICAgIHZhbHVlOiBwYWdlLmxhYmVsXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgaWYgKHNldFZpc2libGUpIHRoaXMuc2hvd1BhZ2UocGFnZSk7XG4gICAgICAgICAgICBlbHNlIFZpc2liaWxpdHlIZWxwZXIuc2V0VmlzaWJpbGl0eShwYWdlLmNvbnRhaW5lciwgZmFsc2UpO1xuXG4gICAgICAgICAgICBwYWdlLmNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKHBhZ2VDbGFzcyk7XG5cbiAgICAgICAgICAgIHRoaXMuY29tcG9uZW50LmFwcGVuZENoaWxkKHBhZ2UuY29udGFpbmVyKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTZXQgdGhlIHBhZ2UgYXMgdmlzaWJsZSBhbmQgaGlkZSB0aGUgb3RoZXIgcGFnZXMsIHVwZGF0ZSB0aGUgc3RhdGUgb2YgdGhlIHRvZ2dsZSBidXR0b25cbiAgICAgICAgICogQHBhcmFtIG5ld1BhZ2UgVGhlIHBhZ2UgdG8gc2hvd1xuICAgICAgICAgKi9cbiAgICAgICAgcHJvdGVjdGVkIHNob3dQYWdlKG5ld1BhZ2U6UGFnZSkge1xuICAgICAgICAgICAgZm9yIChjb25zdCBwYWdlIG9mIHRoaXMucGFnZXMpXG4gICAgICAgICAgICAgICAgVmlzaWJpbGl0eUhlbHBlci5zZXRWaXNpYmlsaXR5KHBhZ2UuY29udGFpbmVyLCBwYWdlID09PSBuZXdQYWdlKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy50b2dnbGVCdXR0b24uc2V0VmFsdWUobmV3UGFnZS5sYWJlbCk7XG4gICAgICAgIH1cblxuICAgICAgICBwcm90ZWN0ZWQgb25IaWRkZW4oKSB7XG4gICAgICAgICAgICB0aGlzLmltYWdlLmRlc3Ryb3koKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGV4cG9ydCBuYW1lc3BhY2UgUmlkZVN0eWxlclNob3djYXNlUHJvZHVjdE1vZGFsIHtcbiAgICAgICAgZXhwb3J0IGludGVyZmFjZSBQYWdlIHtcbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogVGhlIGNvbnRhaW5lciB0byBzaG93IHdoZW4gdGhlIHBhZ2UgaXMgYWN0aXZhdGVkXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGNvbnRhaW5lcjpIVE1MRWxlbWVudDtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBUaGUgbGFiZWwgdG8gc2hvdyBmb3IgdGhlIGNvbnRhaW5lciBpbiB0aGUgdG9nZ2xlIGJ1dHRvblxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBsYWJlbDpzdHJpbmc7XG4gICAgICAgIH1cbiAgICB9XG59IiwibmFtZXNwYWNlIFJpZGVTdHlsZXJTaG93Y2FzZSB7XHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIFByb2R1Y3RFbGVtZW50PFQ+IGV4dGVuZHMgTm9kZSB7XHJcbiAgICAgICAgcHJvZHVjdD86IFQ7XHJcbiAgICB9XHJcbiAgICBleHBvcnQgYWJzdHJhY3QgY2xhc3MgUmlkZVN0eWxlclNob3djYXNlUHJvZHVjdFNlbGVjdG9yPERhdGFUeXBlLEZpbHRlclR5cGUgZXh0ZW5kcyByaWRlc3R5bGVyLlJlcXVlc3RzLkFjdGlvblJlcXVlc3RQYWdlZE1vZGVsPiBleHRlbmRzIFJpZGVTdHlsZXJTaG93Y2FzZVBhZ2luYXRpb25Db21wb25lbnQge1xyXG4gICAgICAgIHByb3RlY3RlZCBjdXJyZW50RmlsdGVyczogRmlsdGVyVHlwZTtcclxuICAgICAgICBwcm90ZWN0ZWQgcmVhZG9ubHkgZGVmYXVsdEZpbHRlcnM6IEZpbHRlclR5cGU7XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCByZWFkb25seSByZXN1bHRzUGVyTG9hZCA9IDUwO1xyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgY291bnQ6bnVtYmVyID0gLTE7XHJcbiAgICAgICAgcHJvdGVjdGVkIGluZGV4Om51bWJlciA9IDA7XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBfbG9hZE1vcmUoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaXNMb2FkaW5nID0gdHJ1ZTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGxldCBjb3VudFByb21pc2U6UmlkZVN0eWxlclByb21pc2U8bnVtYmVyLHJpZGVzdHlsZXIuUmlkZVN0eWxlckFQSVJlc3BvbnNlPjtcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLmNvdW50ID4gLTEpIHtcclxuICAgICAgICAgICAgICAgIGNvdW50UHJvbWlzZSA9IFByb21pc2VIZWxwZXIucmVzb2x2ZWQodGhpcy5jb3VudCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjb3VudFByb21pc2UgPSB0aGlzLmNvdW50UmVzdWx0cyh0aGlzLmN1cnJlbnRGaWx0ZXJzKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY29uc3QgcmVzdWx0c1BlckxvYWQgPSB0aGlzLnJlc3VsdHNQZXJMb2FkO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIFByb21pc2VIZWxwZXIudGhlbihjb3VudFByb21pc2UsIHByb2R1Y3RDb3VudCA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNvdW50ID0gcHJvZHVjdENvdW50O1xyXG5cclxuICAgICAgICAgICAgICAgIGxldCBmaWx0ZXJzOkZpbHRlclR5cGUgPSBPYmplY3RIZWxwZXIuYXNzaWduKHtcclxuICAgICAgICAgICAgICAgICAgICBTdGFydDogdGhpcy5pbmRleCxcclxuICAgICAgICAgICAgICAgICAgICBDb3VudDogcmVzdWx0c1BlckxvYWRcclxuICAgICAgICAgICAgICAgIH0sIHRoaXMuY3VycmVudEZpbHRlcnMpIGFzIEZpbHRlclR5cGU7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmdldFJlc3VsdHMoZmlsdGVycykuZG9uZShwcm9kdWN0cyA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbmRleCArPSByZXN1bHRzUGVyTG9hZDtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmhhc01vcmVSZXN1bHRzID0gdGhpcy5pbmRleCA8IHRoaXMuY291bnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jcmVhdGVPcHRpb25zKHByb2R1Y3RzKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KS5hbHdheXMoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5pc0xvYWRpbmcgPSBmYWxzZX0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIGFic3RyYWN0IGNvdW50UmVzdWx0cyhmaWx0ZXJzOiBGaWx0ZXJUeXBlKSA6IFJpZGVTdHlsZXJQcm9taXNlPG51bWJlcixyaWRlc3R5bGVyLlJpZGVTdHlsZXJBUElSZXNwb25zZT47XHJcbiAgICAgICAgcHJvdGVjdGVkIGFic3RyYWN0IGdldFJlc3VsdHMoZmlsdGVyczogRmlsdGVyVHlwZSkgOiBSaWRlU3R5bGVyUHJvbWlzZTxEYXRhVHlwZVtdLHJpZGVzdHlsZXIuUmlkZVN0eWxlckFQSVJlc3BvbnNlPjtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogU2V0IGZpbHRlcnMgYW5kIHJlbG9hZFxyXG4gICAgICAgICAqIEBwYXJhbSBuZXdGaWx0ZXJzIFRoZSBuZXcgZmlsdGVyc1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBzZXRGaWx0ZXJzKG5ld0ZpbHRlcnM6IEZpbHRlclR5cGUpIHtcclxuICAgICAgICAgICAgdGhpcy5jbGVhck9wdGlvbnMoKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFJlc2V0IG91ciBjb3VudFxyXG4gICAgICAgICAgICB0aGlzLmNvdW50ID0gLTE7XHJcblxyXG4gICAgICAgICAgICAvLyBSZXNldCBvdXIgaW5kZXhcclxuICAgICAgICAgICAgdGhpcy5pbmRleCA9IDA7XHJcblxyXG4gICAgICAgICAgICAvLyBTZXQgb3VyIGZpbHRlcnNcclxuICAgICAgICAgICAgdGhpcy5jdXJyZW50RmlsdGVycyA9IE9iamVjdEhlbHBlci5hc3NpZ24oe30sIHRoaXMuY3VycmVudEZpbHRlcnMsIG5ld0ZpbHRlcnMpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gTG9hZCBmaXJzdCByZXN1bHQgc2V0XHJcbiAgICAgICAgICAgIHRoaXMubG9hZE1vcmUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFVwZGF0ZSBmaWx0ZXJzIGFuZCByZWxvYWRcclxuICAgICAgICAgKiBAcGFyYW0gZmlsdGVyVXBkYXRlcyBUaGUgZmlsdGVyIHByb3BlcnRpZXMgdG8gdXBkYXRlXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIHVwZGF0ZUZpbHRlcnMoZmlsdGVyVXBkYXRlczogRmlsdGVyVHlwZSkge1xyXG4gICAgICAgICAgICB0aGlzLnNldEZpbHRlcnMoT2JqZWN0SGVscGVyLmFzc2lnbih7fSwgdGhpcy5jdXJyZW50RmlsdGVycywgZmlsdGVyVXBkYXRlcykpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogUmV0dXJucyBmYWxzZSBpZiB0aGUgcHJvZHVjdCBzaG91bGQgbm90IGJlIGRpc3BsYXllZCBpbiB0aGUgbGlzdFxyXG4gICAgICAgICAqIEBwYXJhbSBwcm9kdWN0IFRoZSBwcm9kdWN0XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHJvdGVjdGVkIGFic3RyYWN0IHByb2R1Y3RGaWx0ZXIocHJvZHVjdDogRGF0YVR5cGUpOmJvb2xlYW47XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogUmV0dXJucyBhIFVSTCBmb3IgdGhlIHByb2R1Y3Qgb3IgZmFsc2UtaXNoIGlmIHRoZXJlIGlzIG5vdCBvbmVcclxuICAgICAgICAgKiBAcGFyYW0gcHJvZHVjdCBUaGUgcHJvZHVjdFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHByb3RlY3RlZCBhYnN0cmFjdCBwcm9kdWN0SW1hZ2VTb3VyY2UocHJvZHVjdDogRGF0YVR5cGUpOnN0cmluZztcclxuICAgICAgICBwcm90ZWN0ZWQgYWJzdHJhY3QgcHJvZHVjdEltYWdlTGFiZWxzKHByb2R1Y3Q6IERhdGFUeXBlKTp7XHJcbiAgICAgICAgICAgIHByaW1hcnk6IHN0cmluZztcclxuICAgICAgICAgICAgc2Vjb25kYXJ5Pzogc3RyaW5nO1xyXG4gICAgICAgICAgICB0ZXJ0aWFyeT86IHN0cmluZztcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBwcml2YXRlIGNyZWF0ZU9wdGlvbnMocHJvZHVjdHM6IERhdGFUeXBlW10pIHtcclxuICAgICAgICAgICAgbGV0IGZyYWdtZW50ID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xyXG5cclxuICAgICAgICAgICAgZm9yIChsZXQgcHJvZHVjdCBvZiBwcm9kdWN0cykge1xyXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLnByb2R1Y3RGaWx0ZXIocHJvZHVjdCkpIGNvbnRpbnVlO1xyXG5cclxuICAgICAgICAgICAgICAgIGxldCBvcHRpb24gPSBIVE1MSGVscGVyLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcclxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdyaWRlc3R5bGVyLXNob3djYXNlLXBhZ2luYXRpb24tb3B0aW9uJyxcclxuICAgICAgICAgICAgICAgICAgICBhcHBlbmRUbzogZnJhZ21lbnRcclxuICAgICAgICAgICAgICAgIH0pIGFzIFByb2R1Y3RFbGVtZW50PERhdGFUeXBlPjtcclxuXHJcbiAgICAgICAgICAgICAgICBvcHRpb24ucHJvZHVjdCA9IHByb2R1Y3Q7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gSW1hZ2VcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgaW1hZ2VTb3VyY2UgPSB0aGlzLnByb2R1Y3RJbWFnZVNvdXJjZShwcm9kdWN0KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGltYWdlU291cmNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCgnaW1nJywge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAncmlkZXN0eWxlci1zaG93Y2FzZS1wYWdpbmF0aW9uLW9wdGlvbi1kaXNwbGF5JyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFwcGVuZFRvOiBvcHRpb24sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9wZXJ0aWVzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3JjOiBpbWFnZVNvdXJjZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgbGV0IHByb2R1Y3RJbWFnZUxhYmVscyA9IHRoaXMucHJvZHVjdEltYWdlTGFiZWxzKHByb2R1Y3QpO1xyXG5cclxuICAgICAgICAgICAgICAgIEhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCgnZGl2Jywge1xyXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ3JpZGVzdHlsZXItc2hvd2Nhc2UtcGFnaW5hdGlvbi1vcHRpb24tbGFiZWwnLFxyXG4gICAgICAgICAgICAgICAgICAgIHRleHQ6IHByb2R1Y3RJbWFnZUxhYmVscy5wcmltYXJ5LFxyXG4gICAgICAgICAgICAgICAgICAgIGFwcGVuZFRvOiBvcHRpb25cclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChwcm9kdWN0SW1hZ2VMYWJlbHMuc2Vjb25kYXJ5KVxyXG4gICAgICAgICAgICAgICAgICAgIEhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCgnZGl2Jywge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdyaWRlc3R5bGVyLXNob3djYXNlLXBhZ2luYXRpb24tb3B0aW9uLWxhYmVsLXNlY29uZGFyeScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IHByb2R1Y3RJbWFnZUxhYmVscy5zZWNvbmRhcnksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFwcGVuZFRvOiBvcHRpb25cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAocHJvZHVjdEltYWdlTGFiZWxzLnRlcnRpYXJ5KVxyXG4gICAgICAgICAgICAgICAgICAgIEhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCgnZGl2Jywge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdyaWRlc3R5bGVyLXNob3djYXNlLXBhZ2luYXRpb24tb3B0aW9uLWxhYmVsLXRlcnRpYXJ5JyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogcHJvZHVjdEltYWdlTGFiZWxzLnRlcnRpYXJ5LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhcHBlbmRUbzogb3B0aW9uXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMuYWRkT3B0aW9uRWxlbWVudHMoZnJhZ21lbnQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIG9uT3B0aW9uQ2xpY2sob3B0aW9uRWxlbWVudDpIVE1MRWxlbWVudCkge1xyXG4gICAgICAgICAgICBsZXQgcHJvZHVjdCA9IChvcHRpb25FbGVtZW50IGFzIFByb2R1Y3RFbGVtZW50PERhdGFUeXBlPikucHJvZHVjdDtcclxuXHJcbiAgICAgICAgICAgIGlmIChwcm9kdWN0KSB7XHJcbiAgICAgICAgICAgICAgICBzdXBlci5vbk9wdGlvbkNsaWNrKG9wdGlvbkVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vblByb2R1Y3RDbGljayhwcm9kdWN0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHByb2R1Y3RTZWxlY3RlZENhbGxiYWNrOiAocHJvZHVjdDpEYXRhVHlwZSk9PnZvaWQ7XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBvblByb2R1Y3RDbGljayhwcm9kdWN0OkRhdGFUeXBlKSB7XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgdGhpcy5wcm9kdWN0U2VsZWN0ZWRDYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wcm9kdWN0U2VsZWN0ZWRDYWxsYmFjayhwcm9kdWN0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufSIsInZhciBSaWRlU3R5bGVyU2hvd2Nhc2U7XG4oZnVuY3Rpb24gKFJpZGVTdHlsZXJTaG93Y2FzZSkge1xuICAgIGNsYXNzIFJpZGVTdHlsZXJTaG93Y2FzZVByb2R1Y3RTZWxlY3RvciBleHRlbmRzIFJpZGVTdHlsZXJTaG93Y2FzZS5SaWRlU3R5bGVyU2hvd2Nhc2VQYWdpbmF0aW9uQ29tcG9uZW50IHtcbiAgICAgICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgICAgICAgICAgdGhpcy5yZXN1bHRzUGVyTG9hZCA9IDUwO1xuICAgICAgICAgICAgdGhpcy5jb3VudCA9IC0xO1xuICAgICAgICAgICAgdGhpcy5pbmRleCA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgX2xvYWRNb3JlKCkge1xuICAgICAgICAgICAgdGhpcy5pc0xvYWRpbmcgPSB0cnVlO1xuICAgICAgICAgICAgbGV0IGNvdW50UHJvbWlzZTtcbiAgICAgICAgICAgIGlmICh0aGlzLmNvdW50ID4gLTEpIHtcbiAgICAgICAgICAgICAgICBjb3VudFByb21pc2UgPSBSaWRlU3R5bGVyU2hvd2Nhc2UuUHJvbWlzZUhlbHBlci5yZXNvbHZlZCh0aGlzLmNvdW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvdW50UHJvbWlzZSA9IHRoaXMuY291bnRSZXN1bHRzKHRoaXMuY3VycmVudEZpbHRlcnMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcmVzdWx0c1BlckxvYWQgPSB0aGlzLnJlc3VsdHNQZXJMb2FkO1xuICAgICAgICAgICAgcmV0dXJuIFJpZGVTdHlsZXJTaG93Y2FzZS5Qcm9taXNlSGVscGVyLnRoZW4oY291bnRQcm9taXNlLCBwcm9kdWN0Q291bnQgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuY291bnQgPSBwcm9kdWN0Q291bnQ7XG4gICAgICAgICAgICAgICAgbGV0IGZpbHRlcnMgPSBSaWRlU3R5bGVyU2hvd2Nhc2UuT2JqZWN0SGVscGVyLmFzc2lnbih7XG4gICAgICAgICAgICAgICAgICAgIFN0YXJ0OiB0aGlzLmluZGV4LFxuICAgICAgICAgICAgICAgICAgICBDb3VudDogcmVzdWx0c1BlckxvYWRcbiAgICAgICAgICAgICAgICB9LCB0aGlzLmN1cnJlbnRGaWx0ZXJzKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRSZXN1bHRzKGZpbHRlcnMpLmRvbmUocHJvZHVjdHMgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmluZGV4ICs9IHJlc3VsdHNQZXJMb2FkO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmhhc01vcmVSZXN1bHRzID0gdGhpcy5pbmRleCA8IHRoaXMuY291bnQ7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY3JlYXRlT3B0aW9ucyhwcm9kdWN0cyk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KS5hbHdheXMoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuaXNMb2FkaW5nID0gZmFsc2U7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogU2V0IGZpbHRlcnMgYW5kIHJlbG9hZFxuICAgICAgICAgKiBAcGFyYW0gbmV3RmlsdGVycyBUaGUgbmV3IGZpbHRlcnNcbiAgICAgICAgICovXG4gICAgICAgIHNldEZpbHRlcnMobmV3RmlsdGVycykge1xuICAgICAgICAgICAgdGhpcy5jbGVhck9wdGlvbnMoKTtcbiAgICAgICAgICAgIC8vIFJlc2V0IG91ciBjb3VudFxuICAgICAgICAgICAgdGhpcy5jb3VudCA9IC0xO1xuICAgICAgICAgICAgLy8gUmVzZXQgb3VyIGluZGV4XG4gICAgICAgICAgICB0aGlzLmluZGV4ID0gMDtcbiAgICAgICAgICAgIC8vIFNldCBvdXIgZmlsdGVyc1xuICAgICAgICAgICAgdGhpcy5jdXJyZW50RmlsdGVycyA9IFJpZGVTdHlsZXJTaG93Y2FzZS5PYmplY3RIZWxwZXIuYXNzaWduKHt9LCB0aGlzLmN1cnJlbnRGaWx0ZXJzLCBuZXdGaWx0ZXJzKTtcbiAgICAgICAgICAgIC8vIExvYWQgZmlyc3QgcmVzdWx0IHNldFxuICAgICAgICAgICAgdGhpcy5sb2FkTW9yZSgpO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBVcGRhdGUgZmlsdGVycyBhbmQgcmVsb2FkXG4gICAgICAgICAqIEBwYXJhbSBmaWx0ZXJVcGRhdGVzIFRoZSBmaWx0ZXIgcHJvcGVydGllcyB0byB1cGRhdGVcbiAgICAgICAgICovXG4gICAgICAgIHVwZGF0ZUZpbHRlcnMoZmlsdGVyVXBkYXRlcykge1xuICAgICAgICAgICAgdGhpcy5zZXRGaWx0ZXJzKFJpZGVTdHlsZXJTaG93Y2FzZS5PYmplY3RIZWxwZXIuYXNzaWduKHt9LCB0aGlzLmN1cnJlbnRGaWx0ZXJzLCBmaWx0ZXJVcGRhdGVzKSk7XG4gICAgICAgIH1cbiAgICAgICAgY3JlYXRlT3B0aW9ucyhwcm9kdWN0cykge1xuICAgICAgICAgICAgbGV0IGZyYWdtZW50ID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuICAgICAgICAgICAgZm9yIChsZXQgcHJvZHVjdCBvZiBwcm9kdWN0cykge1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy5wcm9kdWN0RmlsdGVyKHByb2R1Y3QpKVxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICBsZXQgb3B0aW9uID0gUmlkZVN0eWxlclNob3djYXNlLkhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCgnZGl2Jywge1xuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdyaWRlc3R5bGVyLXNob3djYXNlLXBhZ2luYXRpb24tb3B0aW9uJyxcbiAgICAgICAgICAgICAgICAgICAgYXBwZW5kVG86IGZyYWdtZW50XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgb3B0aW9uLnByb2R1Y3QgPSBwcm9kdWN0O1xuICAgICAgICAgICAgICAgIC8vIEltYWdlXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBsZXQgaW1hZ2VTb3VyY2UgPSB0aGlzLnByb2R1Y3RJbWFnZVNvdXJjZShwcm9kdWN0KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGltYWdlU291cmNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBSaWRlU3R5bGVyU2hvd2Nhc2UuSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KCdpbWcnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAncmlkZXN0eWxlci1zaG93Y2FzZS1wYWdpbmF0aW9uLW9wdGlvbi1kaXNwbGF5JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcHBlbmRUbzogb3B0aW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3JjOiBpbWFnZVNvdXJjZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGxldCBwcm9kdWN0SW1hZ2VMYWJlbHMgPSB0aGlzLnByb2R1Y3RJbWFnZUxhYmVscyhwcm9kdWN0KTtcbiAgICAgICAgICAgICAgICBSaWRlU3R5bGVyU2hvd2Nhc2UuSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ3JpZGVzdHlsZXItc2hvd2Nhc2UtcGFnaW5hdGlvbi1vcHRpb24tbGFiZWwnLFxuICAgICAgICAgICAgICAgICAgICB0ZXh0OiBwcm9kdWN0SW1hZ2VMYWJlbHMucHJpbWFyeSxcbiAgICAgICAgICAgICAgICAgICAgYXBwZW5kVG86IG9wdGlvblxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlmIChwcm9kdWN0SW1hZ2VMYWJlbHMuc2Vjb25kYXJ5KVxuICAgICAgICAgICAgICAgICAgICBSaWRlU3R5bGVyU2hvd2Nhc2UuSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdyaWRlc3R5bGVyLXNob3djYXNlLXBhZ2luYXRpb24tb3B0aW9uLWxhYmVsLXNlY29uZGFyeScsXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiBwcm9kdWN0SW1hZ2VMYWJlbHMuc2Vjb25kYXJ5LFxuICAgICAgICAgICAgICAgICAgICAgICAgYXBwZW5kVG86IG9wdGlvblxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAocHJvZHVjdEltYWdlTGFiZWxzLnRlcnRpYXJ5KVxuICAgICAgICAgICAgICAgICAgICBSaWRlU3R5bGVyU2hvd2Nhc2UuSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdyaWRlc3R5bGVyLXNob3djYXNlLXBhZ2luYXRpb24tb3B0aW9uLWxhYmVsLXRlcnRpYXJ5JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IHByb2R1Y3RJbWFnZUxhYmVscy50ZXJ0aWFyeSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGFwcGVuZFRvOiBvcHRpb25cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmFkZE9wdGlvbkVsZW1lbnRzKGZyYWdtZW50KTtcbiAgICAgICAgfVxuICAgICAgICBvbk9wdGlvbkNsaWNrKG9wdGlvbkVsZW1lbnQpIHtcbiAgICAgICAgICAgIGxldCBwcm9kdWN0ID0gb3B0aW9uRWxlbWVudC5wcm9kdWN0O1xuICAgICAgICAgICAgaWYgKHByb2R1Y3QpIHtcbiAgICAgICAgICAgICAgICBzdXBlci5vbk9wdGlvbkNsaWNrKG9wdGlvbkVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIHRoaXMub25Qcm9kdWN0Q2xpY2socHJvZHVjdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgb25Qcm9kdWN0Q2xpY2socHJvZHVjdCkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiB0aGlzLnByb2R1Y3RTZWxlY3RlZENhbGxiYWNrID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcm9kdWN0U2VsZWN0ZWRDYWxsYmFjayhwcm9kdWN0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBSaWRlU3R5bGVyU2hvd2Nhc2UuUmlkZVN0eWxlclNob3djYXNlUHJvZHVjdFNlbGVjdG9yID0gUmlkZVN0eWxlclNob3djYXNlUHJvZHVjdFNlbGVjdG9yO1xufSkoUmlkZVN0eWxlclNob3djYXNlIHx8IChSaWRlU3R5bGVyU2hvd2Nhc2UgPSB7fSkpO1xuIiwibmFtZXNwYWNlIFJpZGVTdHlsZXJTaG93Y2FzZSB7XG4gICAgY29uc3QgY2xhc3NOYW1lID0gJ3JpZGVzdHlsZXItc2hvd2Nhc2UtcXItZGlzcGxheSc7XG5cbiAgICBleHBvcnQgY2xhc3MgUmlkZVN0eWxlclNob3djYXNlUVJDb2RlQ29tcG9uZW50IGltcGxlbWVudHMgSUNvbXBvbmVudCB7XG4gICAgICAgIHByaXZhdGUgcXJDb2RlRWxlbWVudDpIVE1MQW5jaG9yRWxlbWVudDtcbiAgICAgICAgcHJpdmF0ZSBxckNvZGU6UVJDb2RlO1xuXG4gICAgICAgIHB1YmxpYyBjb21wb25lbnQ6SFRNTEVsZW1lbnQ7XG5cbiAgICAgICAgY29uc3RydWN0b3IobGluaz86c3RyaW5nKSB7XG4gICAgICAgICAgICB0aGlzLmNvbXBvbmVudCA9IEhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCgnZGl2Jywge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogY2xhc3NOYW1lXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdGhpcy5xckNvZGVFbGVtZW50ID0gSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KCdhJywge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogY2xhc3NOYW1lICsgJy1pbWFnZScsXG4gICAgICAgICAgICAgICAgYXBwZW5kVG86IHRoaXMuY29tcG9uZW50LFxuICAgICAgICAgICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0OiAnX2JsYW5rJ1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB0aGlzLnFyQ29kZSA9IG5ldyBRUkNvZGUodGhpcy5xckNvZGVFbGVtZW50KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKGxpbmspIHRoaXMuZGlzcGxheVVSTChsaW5rKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHB1YmxpYyBkaXNwbGF5VVJMKHVybDpzdHJpbmcpIHtcbiAgICAgICAgICAgIHRoaXMucXJDb2RlRWxlbWVudC5ocmVmID0gdXJsO1xuICAgICAgICAgICAgdGhpcy5xckNvZGUubWFrZUNvZGUodXJsKTtcbiAgICAgICAgfVxuICAgIH1cbn0iLCJuYW1lc3BhY2UgUmlkZVN0eWxlclNob3djYXNlLnNoYXJlIHtcbiAgICBjb25zdCBidXR0b25DbGFzcyA9ICdyaWRlc3R5bGVyLXNob3djYXNlLXNoYXJlLWJ1dHRvbidcblxuICAgIGV4cG9ydCBhYnN0cmFjdCBjbGFzcyBTaGFyZUJ1dHRvbiBpbXBsZW1lbnRzIElDb21wb25lbnQge1xuICAgICAgICBwdWJsaWMgcmVhZG9ubHkgY29tcG9uZW50OkhUTUxCdXR0b25FbGVtZW50O1xuICAgICAgICBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBjdXJyZW50IFVSTCB0byBzaGFyZVxuICAgICAgICAgKi9cbiAgICAgICAgcHJvdGVjdGVkIGN1cnJlbnRVUkw6c3RyaW5nO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgdGFncyB0byBhdHRhY2ggdG8gdGhlIG1lc3NhZ2VcbiAgICAgICAgICovXG4gICAgICAgIHByb3RlY3RlZCB0YWdzOnN0cmluZ1tdO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgdGV4dCB0byBzaGFyZSB3aXRoIHRoZSBVUkxcbiAgICAgICAgICovXG4gICAgICAgIHByb3RlY3RlZCBtZXNzYWdlOnN0cmluZztcblxuICAgICAgICBjb25zdHJ1Y3RvcihzZXR0aW5nczpTaGFyZUJ1dHRvbi5TZXR0aW5ncykge1xuICAgICAgICAgICAgdGhpcy5jb21wb25lbnQgPSBIVE1MSGVscGVyLmNyZWF0ZUJ1dHRvbih7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBidXR0b25DbGFzc1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGlmIChzZXR0aW5ncy5jbGFzc05hbWUpIHRoaXMuY29tcG9uZW50LmNsYXNzTGlzdC5hZGQoc2V0dGluZ3MuY2xhc3NOYW1lKTtcbiAgICAgICAgICAgIGlmIChzZXR0aW5ncy50aXRsZSkgdGhpcy5jb21wb25lbnQudGl0bGUgPSBzZXR0aW5ncy50aXRsZTtcblxuICAgICAgICAgICAgdGhpcy5jb21wb25lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLm9uQ2xpY2soKSk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogVXBkYXRlIHRoZSBVUkwgZm9yIHRoaXMgc2hhcmUgYnV0dG9uIHRvIHNoYXJlXG4gICAgICAgICAqIEBwYXJhbSB1cmwgVGhlIFVSTCB0byBzaGFyZVxuICAgICAgICAgKi9cbiAgICAgICAgcHVibGljIHNldFVSTCh1cmw6c3RyaW5nKSB7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRVUkwgPSB1cmw7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogQXR0YWNoIHRhZ3MgdG8gdGhlIG1lc3NhZ2UgYmVpbmcgc2hhcmVkXG4gICAgICAgICAqIEBwYXJhbSB0YWdzIFRoZSB0YWdzIHRvIGF0dGFjaCB0byB0aGUgbWVzc2FnZVxuICAgICAgICAgKi9cbiAgICAgICAgcHVibGljIHNldFRhZ3ModGFnczpzdHJpbmdbXSkge1xuICAgICAgICAgICAgdGhpcy50YWdzID0gdGFncztcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTZXQgYSBtZXNzYWdlIHRvIHNoYXJlIHdpdGggdGhlIFVSTFxuICAgICAgICAgKiBAcGFyYW0gbWVzc2FnZSBUaGUgbWVzc2FnZSB0byBzaGFyZSBhbG9uZyB3aXRoIHRoZSBVUkxcbiAgICAgICAgICovXG4gICAgICAgIHB1YmxpYyBzZXRNZXNzYWdlKG1lc3NhZ2U6c3RyaW5nKSB7XG4gICAgICAgICAgICB0aGlzLm1lc3NhZ2UgPSBtZXNzYWdlO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENhbGxlZCBldmVyeSB0aW1lIHRoZSBzaGFyZSBidXR0b24gaXMgY2xpY2tlZFxuICAgICAgICAgKiBAdmlydHVhbFxuICAgICAgICAgKi9cbiAgICAgICAgcHJvdGVjdGVkIG9uQ2xpY2soKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuY3VycmVudFVSTCkgcmV0dXJuO1xuXG4gICAgICAgICAgICB0aGlzLnNoYXJlKCk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogU2hhcmUgdGhlIGN1cnJlbnQgVVJMXG4gICAgICAgICAqIEB2aXJ0dWFsXG4gICAgICAgICAqL1xuICAgICAgICBwdWJsaWMgc2hhcmUoKSB7fVxuXG4gICAgICAgIHByb3RlY3RlZCBvcGVuTmV3V2luZG93KHVybDpzdHJpbmcsIHNldHRpbmdzPzp7XG4gICAgICAgICAgICB3aWR0aD86IG51bWJlcixcbiAgICAgICAgICAgIGhlaWdodD86IG51bWJlcixcbiAgICAgICAgICAgIGVuYWJsZVNjcm9sbGJhcnM/OiBib29sZWFuLFxuICAgICAgICAgICAgZW5hYmxlUmVzaXplYWJsZT86IGJvb2xlYW4sXG4gICAgICAgICAgICBlbmFibGVUb29sYmFyPzogYm9vbGVhbixcbiAgICAgICAgICAgIGVuYWJsZUxvY2F0aW9uPzogYm9vbGVhbixcbiAgICAgICAgICAgIHRhcmdldD86IHN0cmluZ1xuICAgICAgICB9KSB7XG4gICAgICAgICAgICBzZXR0aW5ncyA9IHNldHRpbmdzIHx8IHt9O1xuXG4gICAgICAgICAgICBjb25zdCBkZWZhdWx0SGVpZ2h0ID0gNDIwLFxuICAgICAgICAgICAgICAgICAgZGVmYXVsdFdpZHRoID0gNTUwO1xuXG4gICAgICAgICAgICBjb25zdCB3aWR0aCA9IHNldHRpbmdzLndpZHRoIHx8IGRlZmF1bHRXaWR0aCxcbiAgICAgICAgICAgICAgICAgIGhlaWdodCA9IHNldHRpbmdzLmhlaWdodCB8fCBkZWZhdWx0SGVpZ2h0O1xuXG4gICAgICAgICAgICBjb25zdCBzY3JlZW5IZWlnaHQgPSBzY3JlZW4uaGVpZ2h0LFxuICAgICAgICAgICAgICAgICAgc2NyZWVuV2lkdGggPSBzY3JlZW4ud2lkdGg7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IHRvcCA9IHNjcmVlbkhlaWdodCA+IGhlaWdodCA/IE1hdGgucm91bmQoKHNjcmVlbkhlaWdodCAvIDIpIC0gKGhlaWdodCAvIDIpKSA6IDAsXG4gICAgICAgICAgICAgICAgICBsZWZ0ID0gTWF0aC5yb3VuZCgoc2NyZWVuV2lkdGggLyAyKSAtICh3aWR0aCAvIDIpKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgdGFyZ2V0ID0gc2V0dGluZ3MudGFyZ2V0IHx8ICdzaGFyZSc7XG5cbiAgICAgICAgICAgIGNvbnN0IHdpbmRvd1NldHRpbmdzOnN0cmluZ1tdID0gW107XG4gICAgICAgICAgICBjb25zdCBhZGRTZXR0aW5nID0gKG5hbWU6c3RyaW5nLCB2YWx1ZTpzdHJpbmcpID0+IHdpbmRvd1NldHRpbmdzLnB1c2gobmFtZSArICc9JyArIHZhbHVlKTtcbiAgICAgICAgICAgIGNvbnN0IGFkZEJvb2xlYW5TZXR0aW5nID0gKG5hbWU6c3RyaW5nLCBlbmFibGVkOmJvb2xlYW4sIGVuYWJsZWRCeURlZmF1bHQ6Ym9vbGVhbikgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgZW5hYmxlZCAhPT0gJ2Jvb2xlYW4nKSBlbmFibGVkID0gZW5hYmxlZEJ5RGVmYXVsdDtcblxuICAgICAgICAgICAgICAgIGFkZFNldHRpbmcobmFtZSwgZW5hYmxlZCA/ICd5ZXMnIDogJ25vJyk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBhZGRCb29sZWFuU2V0dGluZygnc2Nyb2xsYmFycycsIHNldHRpbmdzLmVuYWJsZVNjcm9sbGJhcnMsIHRydWUpO1xuICAgICAgICAgICAgYWRkQm9vbGVhblNldHRpbmcoJ3Jlc2l6YWJsZScsIHNldHRpbmdzLmVuYWJsZVJlc2l6ZWFibGUsIHRydWUpO1xuICAgICAgICAgICAgYWRkQm9vbGVhblNldHRpbmcoJ3Rvb2xiYXInLCBzZXR0aW5ncy5lbmFibGVUb29sYmFyLCBmYWxzZSk7XG4gICAgICAgICAgICBhZGRCb29sZWFuU2V0dGluZygnbG9jYXRpb24nLCBzZXR0aW5ncy5lbmFibGVMb2NhdGlvbiwgdHJ1ZSk7XG5cbiAgICAgICAgICAgIGFkZFNldHRpbmcoJ3dpZHRoJywgd2lkdGgudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICBhZGRTZXR0aW5nKCdoZWlnaHQnLCBoZWlnaHQudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICBhZGRTZXR0aW5nKCd0b3AnLCB0b3AudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICBhZGRTZXR0aW5nKCdsZWZ0JywgbGVmdC50b1N0cmluZygpKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgd2luZG93Lm9wZW4odXJsLCB0YXJnZXQsIHRhcmdldCAhPT0gJ19ibGFuaycgPyB3aW5kb3dTZXR0aW5ncy5qb2luKCcsJykgOiAnJyk7XG4gICAgICAgIH1cblxuICAgICAgICBwcm90ZWN0ZWQgZ2V0U2hhcmVSZWRpcmVjdFVSTCgpOnN0cmluZyB7XG4gICAgICAgICAgICBsZXQgYXBwVVJMID0gJ2h0dHBzOi8vYXBwLnJpZGVzdHlsZXIubmV0JztcblxuICAgICAgICAgICAgaWYgKGFwaS5lbnZpcm9ubWVudCA9PT0gYXBpLkVudmlyb25tZW50LkFscGhhKSBhcHBVUkwgPSAnaHR0cDovL2FwcC1hbHBoYS5yaWRlc3R5bGVyLm5ldCc7XG4gICAgICAgICAgICBlbHNlIGlmIChhcGkuZW52aXJvbm1lbnQgPT09IGFwaS5FbnZpcm9ubWVudC5CZXRhKSBhcHBVUkwgPSAnaHR0cDovL2FwcC1iZXRhLnJpZGVzdHlsZXIubmV0JztcblxuICAgICAgICAgICAgcmV0dXJuIGFwcFVSTCArICcvc2hhcmVkLmh0bWwnO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZXhwb3J0IG5hbWVzcGFjZSBTaGFyZUJ1dHRvbiB7XG4gICAgICAgIGV4cG9ydCBpbnRlcmZhY2UgU2V0dGluZ3Mge1xuICAgICAgICAgICAgY2xhc3NOYW1lPzogc3RyaW5nO1xuICAgICAgICAgICAgdGl0bGU/OiBzdHJpbmc7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCB0d2l0dGVySW50ZW50VVJMID0gJyc7XG4gICAgZXhwb3J0IGNsYXNzIFR3aXR0ZXJTaGFyZUJ1dHRvbiBleHRlbmRzIFNoYXJlQnV0dG9uIHtcbiAgICAgICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgICAgICBzdXBlcih7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBidXR0b25DbGFzcyArICctdHdpdHRlcicsXG4gICAgICAgICAgICAgICAgdGl0bGU6ICdUd2l0dGVyJ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogU2hhcmUgdGhlIGN1cnJlbnQgVVJMIHZpYSBUd2l0dGVyXG4gICAgICAgICAqL1xuICAgICAgICBwdWJsaWMgc2hhcmUoKSB7XG4gICAgICAgICAgICBsZXQgdXJsID0gJ2h0dHBzOi8vdHdpdHRlci5jb20vaW50ZW50L3R3ZWV0Pyc7XG4gICAgICAgICAgICBsZXQgdHdpdHRlckludGVudFBhcmFtZXRlcnMgPSBbXG4gICAgICAgICAgICAgICAgJ3VybD0nICsgZW5jb2RlVVJJQ29tcG9uZW50KHRoaXMuY3VycmVudFVSTClcbiAgICAgICAgICAgIF07XG5cbiAgICAgICAgICAgIGlmICh0aGlzLm1lc3NhZ2UpIFxuICAgICAgICAgICAgICAgIHR3aXR0ZXJJbnRlbnRQYXJhbWV0ZXJzLnB1c2goJ3RleHQ9JyArIGVuY29kZVVSSUNvbXBvbmVudCh0aGlzLm1lc3NhZ2UpKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKHRoaXMudGFncyAmJiB0aGlzLnRhZ3MubGVuZ3RoKVxuICAgICAgICAgICAgICAgIHR3aXR0ZXJJbnRlbnRQYXJhbWV0ZXJzLnB1c2goJ2hhc2h0YWdzPScgKyBBcnJheUhlbHBlci5tYXAodGhpcy50YWdzLCB0YWcgPT4gZW5jb2RlVVJJQ29tcG9uZW50KHRhZykpLmpvaW4oJywnKSk7XG5cbiAgICAgICAgICAgIHVybCArPSB0d2l0dGVySW50ZW50UGFyYW1ldGVycy5qb2luKCcmJyk7XG5cbiAgICAgICAgICAgIHRoaXMub3Blbk5ld1dpbmRvdyh1cmwpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZXhwb3J0IGNsYXNzIEZhY2Vib29rU2hhcmVCdXR0b24gZXh0ZW5kcyBTaGFyZUJ1dHRvbiB7XG4gICAgICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICAgICAgc3VwZXIoe1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogYnV0dG9uQ2xhc3MgKyAnLWZhY2Vib29rJyxcbiAgICAgICAgICAgICAgICB0aXRsZTogJ0ZhY2Vib29rJ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTaGFyZSB0aGUgY3VycmVudCBVUkwgdmlhIEZhY2Vib29rXG4gICAgICAgICAqL1xuICAgICAgICBwdWJsaWMgc2hhcmUoKSB7XG4gICAgICAgICAgICBsZXQgdXJsID0gJ2h0dHBzOi8vd3d3LmZhY2Vib29rLmNvbS9kaWFsb2cvc2hhcmU/JztcbiAgICAgICAgICAgIGxldCBmYWNlYm9va0RpYWxvZ1BhcmFtZXRlcnMgPSBbXG4gICAgICAgICAgICAgICAgJ2FwcF9pZD0xNTc2MzgwNDEyNTgyODQ1JyxcbiAgICAgICAgICAgICAgICAnZGlzcGxheT1wb3B1cCcsXG4gICAgICAgICAgICAgICAgJ2hyZWY9JyArIGVuY29kZVVSSUNvbXBvbmVudCh0aGlzLmN1cnJlbnRVUkwpLFxuICAgICAgICAgICAgICAgICdyZWRpcmVjdF91cmk9JyArIGVuY29kZVVSSUNvbXBvbmVudCh0aGlzLmdldFNoYXJlUmVkaXJlY3RVUkwoKSlcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIEZhY2Vib29rIG9ubHkgbGV0cyB5b3Ugc3BlY2lmeSBvbmUgaGFzaHRhZywgc28gd2UgdXNlIHRoZSBmaXJzdFxuICAgICAgICAgICAgaWYgKHRoaXMudGFncyAmJiB0aGlzLnRhZ3MubGVuZ3RoKVxuICAgICAgICAgICAgICAgIGZhY2Vib29rRGlhbG9nUGFyYW1ldGVycy5wdXNoKCdoYXNodGFnPScgKyBlbmNvZGVVUklDb21wb25lbnQoJyMnICsgdGhpcy50YWdzWzBdKSk7XG5cbiAgICAgICAgICAgIHVybCArPSBmYWNlYm9va0RpYWxvZ1BhcmFtZXRlcnMuam9pbignJicpO1xuXG4gICAgICAgICAgICB0aGlzLm9wZW5OZXdXaW5kb3codXJsKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGV4cG9ydCBjbGFzcyBOZXdXaW5kb3dTaGFyZUJ1dHRvbiBleHRlbmRzIFNoYXJlQnV0dG9uIHtcbiAgICAgICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgICAgICBzdXBlcih7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBidXR0b25DbGFzcyArICctbGluaydcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvKipcbiAgICAgICAgICogU2hhcmUgdGhlIGN1cnJlbnQgVVJMIGJ5IG9wZW5pbmcgaXQgaW4gYSBuZXcgd2luZG93XG4gICAgICAgICAqL1xuICAgICAgICBwdWJsaWMgc2hhcmUoKSB7XG4gICAgICAgICAgICB0aGlzLm9wZW5OZXdXaW5kb3codGhpcy5jdXJyZW50VVJMLCB7XG4gICAgICAgICAgICAgICAgdGFyZ2V0OiAnX2JsYW5rJ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBleHBvcnQgY2xhc3MgUVJTaGFyZUJ1dHRvbiBleHRlbmRzIFNoYXJlQnV0dG9uIHtcbiAgICAgICAgcHJpdmF0ZSBwb3BvdmVyOlJpZGVTdHlsZXJTaG93Y2FzZVBvcG92ZXI7XG4gICAgICAgIHByaXZhdGUgcXJDb2RlOlJpZGVTdHlsZXJTaG93Y2FzZVFSQ29kZUNvbXBvbmVudDtcblxuICAgICAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgICAgIHN1cGVyKHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IGJ1dHRvbkNsYXNzICsgJy1xci1jb2RlJ1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHRoaXMucG9wb3ZlciA9IG5ldyBSaWRlU3R5bGVyU2hvd2Nhc2VQb3BvdmVyKCk7XG4gICAgICAgICAgICB0aGlzLmNvbXBvbmVudC5hcHBlbmRDaGlsZCh0aGlzLnBvcG92ZXIuY29tcG9uZW50KTtcblxuICAgICAgICAgICAgdGhpcy5xckNvZGUgPSBuZXcgUmlkZVN0eWxlclNob3djYXNlUVJDb2RlQ29tcG9uZW50KCk7XG4gICAgICAgICAgICB0aGlzLnBvcG92ZXIuY29tcG9uZW50LmFwcGVuZENoaWxkKHRoaXMucXJDb2RlLmNvbXBvbmVudCk7XG4gICAgICAgIH1cblxuICAgICAgICBwdWJsaWMgc2V0VVJMKHVybDpzdHJpbmcpIHtcbiAgICAgICAgICAgIHN1cGVyLnNldFVSTCh1cmwpO1xuXG4gICAgICAgICAgICB0aGlzLnFyQ29kZS5kaXNwbGF5VVJMKHVybCk7XG4gICAgICAgIH1cblxuICAgICAgICBwdWJsaWMgb25DbGljaygpIHtcbiAgICAgICAgICAgIHRoaXMucG9wb3Zlci50b2dnbGUoKTtcbiAgICAgICAgfVxuICAgIH1cbn0iLCJuYW1lc3BhY2UgUmlkZVN0eWxlclNob3djYXNlIHtcclxuICAgIGNvbnN0IHNoYXJlTW9kYWxDbGFzcyA9ICdyaWRlc3R5bGVyLXNob3djYXNlLXNoYXJlJztcclxuICAgIGV4cG9ydCBjbGFzcyBSaWRlU3R5bGVyU2hvd2Nhc2VTaGFyZU1vZGFsIGV4dGVuZHMgUmlkZVN0eWxlclNob3djYXNlTW9kYWwge1xyXG4gICAgICAgIHByaXZhdGUgcmVhZG9ubHkgdmVoaWNsZVJlbmRlckluc3RydWN0aW9uczpyaWRlc3R5bGVyLlJlcXVlc3RzLlZlaGljbGVSZW5kZXJJbnN0cnVjdGlvbnM7XHJcbiAgICAgICAgcHJpdmF0ZSBzaGFyZUJ1dHRvbnM6c2hhcmUuU2hhcmVCdXR0b25bXTtcclxuXHJcbiAgICAgICAgY29uc3RydWN0b3Ioc2hvd2Nhc2VJbnN0YW5jZTogUmlkZVN0eWxlclNob3djYXNlSW5zdGFuY2UsIHZlaGljbGVSZW5kZXJJbnN0cnVjdGlvbnM6cmlkZXN0eWxlci5SZXF1ZXN0cy5WZWhpY2xlUmVuZGVySW5zdHJ1Y3Rpb25zKSB7XHJcbiAgICAgICAgICAgIHN1cGVyKHNob3djYXNlSW5zdGFuY2UsIHtcclxuICAgICAgICAgICAgICAgIHJlbW92ZU9uSGlkZGVuOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgZnVsbDogdHJ1ZVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIC8vIENvcHkgdGhlIHJlbmRlciBpbnN0cnVjdGlvbnNcclxuICAgICAgICAgICAgdGhpcy52ZWhpY2xlUmVuZGVySW5zdHJ1Y3Rpb25zID0gT2JqZWN0LmFzc2lnbih7fSwgdmVoaWNsZVJlbmRlckluc3RydWN0aW9ucyk7XHJcbiAgICAgICAgICAgIHRoaXMub25JbnN0cnVjdGlvbnNDaGFuZ2VkKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIHZlaGljbGVWaWV3cG9ydDogUmlkZVN0eWxlclZpZXdwb3J0O1xyXG4gICAgICAgIFxyXG4gICAgICAgIHByaXZhdGUgcm90YXRlRWxlbWVudDogSFRNTEVsZW1lbnQ7XHJcblxyXG4gICAgICAgIHByaXZhdGUgaW1hZ2VUeXBlOiByaWRlc3R5bGVyLkRhdGFPYmplY3RzLlZlaGljbGVSZXNvdXJjZVR5cGUgPSByaWRlc3R5bGVyLkRhdGFPYmplY3RzLlZlaGljbGVSZXNvdXJjZVR5cGUuQW5nbGU7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEJ1aWxkIHRoZSBET00gc3RydWN0dXJlXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHJvdGVjdGVkIGJ1aWxkTW9kYWwoKSB7XHJcbiAgICAgICAgICAgIHN1cGVyLmJ1aWxkTW9kYWwoKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuY29tcG9uZW50LmNsYXNzTGlzdC5hZGQoc2hhcmVNb2RhbENsYXNzKTtcclxuXHJcbiAgICAgICAgICAgIGxldCBiYWNrZ3JvdW5kID0gbmV3IFJpZGVTdHlsZXJTaG93Y2FzZUJhY2tncm91bmQodGhpcy5zaG93Y2FzZSk7XHJcbiAgICAgICAgICAgIHRoaXMuY29tcG9uZW50LmFwcGVuZENoaWxkKGJhY2tncm91bmQuY29tcG9uZW50KTsgICAgICAgICAgICBcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIEhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCgnaDEnLCB7XHJcbiAgICAgICAgICAgICAgICBhcHBlbmRUbzogdGhpcy5jb21wb25lbnQsXHJcbiAgICAgICAgICAgICAgICB0ZXh0OiBzdHJpbmdzLmdldFN0cmluZygnc2hhcmUtbXktdmVoaWNsZScpXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gSW5zdHJ1Y3Rpb25zXHJcbiAgICAgICAgICAgIEhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCgncCcsIHtcclxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ3JpZGVzdHlsZXItc2hvd2Nhc2Utc2hhcmUtaW5zdHJ1Y3Rpb25zJyxcclxuICAgICAgICAgICAgICAgIHRleHQ6IHN0cmluZ3MuZ2V0U3RyaW5nKCdzaGFyZS1pbnN0cnVjdGlvbnMnKSxcclxuICAgICAgICAgICAgICAgIGFwcGVuZFRvOiB0aGlzLmNvbXBvbmVudFxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlU2hhcmVCdXR0b25zKCk7XHJcblxyXG4gICAgICAgICAgICAvLyBSb3RhdGUgVUlcclxuICAgICAgICAgICAgaWYgKHRoaXMuY2FuU3dpdGNoQW5nbGUoKSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yb3RhdGVFbGVtZW50ID0gSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAncmlkZXN0eWxlci1zaG93Y2FzZS1yb3RhdGUtdmVoaWNsZScsXHJcbiAgICAgICAgICAgICAgICAgICAgYXBwZW5kVG86IHRoaXMuY29tcG9uZW50XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgdGhpcy5yb3RhdGVFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5zd2l0Y2hBbmdsZSgpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBjcmVhdGVTaGFyZUJ1dHRvbnMoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2hhcmVCdXR0b25zID0gW1xyXG4gICAgICAgICAgICAgICAgbmV3IHNoYXJlLkZhY2Vib29rU2hhcmVCdXR0b24oKSxcclxuICAgICAgICAgICAgICAgIG5ldyBzaGFyZS5Ud2l0dGVyU2hhcmVCdXR0b24oKSxcclxuICAgICAgICAgICAgICAgIG5ldyBzaGFyZS5RUlNoYXJlQnV0dG9uKCksXHJcbiAgICAgICAgICAgICAgICBuZXcgc2hhcmUuTmV3V2luZG93U2hhcmVCdXR0b24oKVxyXG4gICAgICAgICAgICBdO1xyXG5cclxuICAgICAgICAgICAgY29uc3Qgc2hhcmVCdXR0b25Db250YWluZXIgPSBIVE1MSGVscGVyLmNyZWF0ZUVsZW1lbnQoe1xyXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBzaGFyZU1vZGFsQ2xhc3MgKyAnLWJ1dHRvbnMnLFxyXG4gICAgICAgICAgICAgICAgYXBwZW5kVG86IHRoaXMuY29tcG9uZW50XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgZm9yIChjb25zdCBzaGFyZUJ1dHRvbiBvZiB0aGlzLnNoYXJlQnV0dG9ucykgXHJcbiAgICAgICAgICAgICAgICBzaGFyZUJ1dHRvbkNvbnRhaW5lci5hcHBlbmRDaGlsZChzaGFyZUJ1dHRvbi5jb21wb25lbnQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBwcm90ZWN0ZWQgb25TaG93KCkge1xyXG4gICAgICAgICAgICBzdXBlci5vblNob3coKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHRoaXMuc2V0dXBWaWV3cG9ydCgpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5ldmVudHMub24oJ3Jlc2l6ZWQnLCB0aGlzLnJlc2l6ZWRDYWxsYmFjayk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgb25IaWRkZW4oKSB7XHJcbiAgICAgICAgICAgIHN1cGVyLm9uSGlkZGVuKCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB0aGlzLmV2ZW50cy5vZmYoJ3Jlc2l6ZWQnLCB0aGlzLnJlc2l6ZWRDYWxsYmFjayk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIHJlc2l6ZWRDYWxsYmFjayA9ICgpID0+IHRoaXMudXBkYXRlVmlld3BvcnQoKTtcclxuICAgICAgICBwcml2YXRlIHVwZGF0ZVZpZXdwb3J0KCkgeyB0aGlzLnZlaGljbGVWaWV3cG9ydC5VcGRhdGUodGhpcy52ZWhpY2xlUmVuZGVySW5zdHJ1Y3Rpb25zKTsgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGdldFNoYXJlVVJMKCk6c3RyaW5nIHtcclxuICAgICAgICAgICAgbGV0IGFwcFVSTCA9ICdodHRwczovL2FwcC5yaWRlc3R5bGVyLm5ldCc7XHJcblxyXG4gICAgICAgICAgICBpZiAoYXBpLmVudmlyb25tZW50ID09PSBhcGkuRW52aXJvbm1lbnQuQWxwaGEpIGFwcFVSTCA9ICdodHRwOi8vYXBwLWFscGhhLnJpZGVzdHlsZXIubmV0JztcclxuICAgICAgICAgICAgZWxzZSBpZiAoYXBpLmVudmlyb25tZW50ID09PSBhcGkuRW52aXJvbm1lbnQuQmV0YSkgYXBwVVJMID0gJ2h0dHA6Ly9hcHAtYmV0YS5yaWRlc3R5bGVyLm5ldCc7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBzaGFyZVBhdGggPSAnL3NoYXJlLmNzaHRtbD8nO1xyXG5cclxuICAgICAgICAgICAgY29uc3Qgc2hhcmVQYXJhbXMgPSByaWRlc3R5bGVyLnV0aWxzLnRvUGFyYW1TdHJpbmcoXHJcbiAgICAgICAgICAgICAgICBPYmplY3RIZWxwZXIuYXNzaWduKFxyXG4gICAgICAgICAgICAgICAgICAgIHJpZGVzdHlsZXIuYXV0aC5hdXRoZW50aWNhdGVEYXRhKG51bGwpLFxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudmVoaWNsZVJlbmRlckluc3RydWN0aW9uc1xyXG4gICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGFwcFVSTCArIHNoYXJlUGF0aCArIHNoYXJlUGFyYW1zO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBwcml2YXRlIHNldHVwVmlld3BvcnQoKSB7XHJcbiAgICAgICAgICAgIGxldCB2aWV3cG9ydEVsZW1lbnQgPSBIVE1MSGVscGVyLmNyZWF0ZUVsZW1lbnRXaXRoQ2xhc3MoJ2RpdicsICdyaWRlc3R5bGVyLXNob3djYXNlLXZpZXdwb3J0Jyk7XHJcbiAgICAgICAgICAgIHRoaXMuY29tcG9uZW50LmFwcGVuZENoaWxkKHZpZXdwb3J0RWxlbWVudCk7XHJcblxyXG4gICAgICAgICAgICB2aWV3cG9ydEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLnN3aXRjaEFuZ2xlKCkpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgdGhpcy52ZWhpY2xlVmlld3BvcnQgPSBuZXcgUmlkZVN0eWxlclZpZXdwb3J0KHZpZXdwb3J0RWxlbWVudCk7XHJcblxyXG4gICAgICAgICAgICBsZXQgdmlld3BvcnRVcGRhdGVkID0gdGhpcy52ZWhpY2xlVmlld3BvcnQuVXBkYXRlKHRoaXMudmVoaWNsZVJlbmRlckluc3RydWN0aW9ucyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZiAodGhpcy5yb3RhdGVFbGVtZW50KSB2aWV3cG9ydFVwZGF0ZWQuZG9uZSgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJvdGF0ZUVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnaW4nKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBjYW5Td2l0Y2hBbmdsZSgpOmJvb2xlYW4ge1xyXG4gICAgICAgICAgICBsZXQge1xyXG4gICAgICAgICAgICAgICAgY3VycmVudFZlaGljbGVEZXNjcmlwdGlvbk1vZGVsXHJcbiAgICAgICAgICAgIH0gPSB0aGlzLnN0YXRlLmdldERhdGEoKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBjdXJyZW50VmVoaWNsZURlc2NyaXB0aW9uTW9kZWwuSGFzQW5nbGVkSW1hZ2UgJiYgY3VycmVudFZlaGljbGVEZXNjcmlwdGlvbk1vZGVsLkhhc1NpZGVJbWFnZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgb25JbnN0cnVjdGlvbnNDaGFuZ2VkKCkge1xyXG4gICAgICAgICAgICBjb25zdCBzaGFyZVVSTCA9IHRoaXMuZ2V0U2hhcmVVUkwoKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuc2V0RW5hYmxlZChmYWxzZSk7XHJcblxyXG4gICAgICAgICAgICBhcGkucmVxdWVzdChcImxpbmsvY3JlYXRlXCIsIHtcclxuICAgICAgICAgICAgICAgIFVSTDogdGhpcy5nZXRTaGFyZVVSTCgpXHJcbiAgICAgICAgICAgIH0pLmRvbmUocmVzcG9uc2UgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVVUkwocmVzcG9uc2UuU2hvcnRVUkwpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRFbmFibGVkKHRydWUpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgc2V0RW5hYmxlZChlbmFibGVkOmJvb2xlYW4pIHtcclxuICAgICAgICAgICAgZm9yIChjb25zdCBzaGFyZUJ1dHRvbiBvZiB0aGlzLnNoYXJlQnV0dG9ucykge1xyXG4gICAgICAgICAgICAgICAgc2hhcmVCdXR0b24uY29tcG9uZW50LmRpc2FibGVkID0gIWVuYWJsZWQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgdXBkYXRlVVJMKHNoYXJlVVJMOnN0cmluZykge1xyXG4gICAgICAgICAgICBjb25zdCBzaGFyZVRhZ3M6c3RyaW5nW10gPSBbJ3ZlaGljbGUnXTtcclxuICAgICAgICAgICAgY29uc3Qgc2hhcmVNZXNzYWdlID0gc3RyaW5ncy5nZXRTdHJpbmcoJ2NoZWNrLW91dC1teS12ZWhpY2xlJyk7XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy52ZWhpY2xlUmVuZGVySW5zdHJ1Y3Rpb25zLldoZWVsRml0bWVudCkgc2hhcmVUYWdzLnB1c2goJ3doZWVscycpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gVXBkYXRlIHRoZSBzaGFyZSBidXR0b25zXHJcbiAgICAgICAgICAgIGZvciAoY29uc3Qgc2hhcmVCdXR0b24gb2YgdGhpcy5zaGFyZUJ1dHRvbnMpIHtcclxuICAgICAgICAgICAgICAgIHNoYXJlQnV0dG9uLnNldFVSTChzaGFyZVVSTCk7XHJcbiAgICAgICAgICAgICAgICBzaGFyZUJ1dHRvbi5zZXRUYWdzKHNoYXJlVGFncyk7XHJcbiAgICAgICAgICAgICAgICBzaGFyZUJ1dHRvbi5zZXRNZXNzYWdlKHNoYXJlTWVzc2FnZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgc3dpdGNoQW5nbGUoKSB7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5jYW5Td2l0Y2hBbmdsZSgpIHx8IHRoaXMuc3RhdGUuZ2V0RGF0YSgpLmN1cnJlbnRXaGVlbC5IYXNTaWRlSW1hZ2UgPT09IGZhbHNlKSByZXR1cm47XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5pbWFnZVR5cGUgPT09IHJpZGVzdHlsZXIuRGF0YU9iamVjdHMuVmVoaWNsZVJlc291cmNlVHlwZS5BbmdsZSlcclxuICAgICAgICAgICAgICAgIHRoaXMuaW1hZ2VUeXBlID0gcmlkZXN0eWxlci5EYXRhT2JqZWN0cy5WZWhpY2xlUmVzb3VyY2VUeXBlLlNpZGU7XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIHRoaXMuaW1hZ2VUeXBlID0gcmlkZXN0eWxlci5EYXRhT2JqZWN0cy5WZWhpY2xlUmVzb3VyY2VUeXBlLkFuZ2xlO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgdGhpcy52ZWhpY2xlUmVuZGVySW5zdHJ1Y3Rpb25zLlR5cGUgPSB0aGlzLmltYWdlVHlwZTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHRoaXMudmVoaWNsZVZpZXdwb3J0LlVwZGF0ZSh7XHJcbiAgICAgICAgICAgICAgICBUeXBlOiB0aGlzLmltYWdlVHlwZVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdGhpcy5vbkluc3RydWN0aW9uc0NoYW5nZWQoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iLCJuYW1lc3BhY2UgUmlkZVN0eWxlclNob3djYXNlIHtcbiAgICBjb25zdCBjbGFzc05hbWUgPSAncmlkZXN0eWxlci1zaG93Y2FzZS1zdXNwZW5zaW9uLXNlbGVjdG9yJztcbiAgICBjb25zdCBlbGVtZW50Q2xhc3NOYW1lID0gJ3JpZGVzdHlsZXItc2hvd2Nhc2Utc3VzcGVuc2lvbi1zZWxlY3Rvci1lbGVtZW50JztcblxuICAgIGNvbnN0IGRlZmF1bHRTdXNwZW5zaW9uUmFuZ2UgPSB7XG4gICAgICAgIE1pbjogLTQsXG4gICAgICAgIE1heDogMFxuICAgIH1cblxuICAgIGV4cG9ydCBjbGFzcyBSaWRlU3R5bGVyU2hvd2Nhc2VTdXNwZW5zaW9uU2VsZWN0b3IgZXh0ZW5kcyBDb21wb25lbnRCYXNlIHtcbiAgICAgICAgLy8gcHJpdmF0ZSBmcm9udDpTdXNwZW5zaW9uVUlFbGVtZW50O1xuICAgICAgICAvLyBwcml2YXRlIHJlYXI6U3VzcGVuc2lvblVJRWxlbWVudDtcbiAgICAgICAgcHJpdmF0ZSBmcm9udEFuZFJlYXI6U3VzcGVuc2lvblVJRWxlbWVudDtcblxuICAgICAgICBwcm90ZWN0ZWQgaW5pdGlhbGl6ZUNvbXBvbmVudCgpIHtcbiAgICAgICAgICAgIHRoaXMuY29tcG9uZW50ID0gSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBjbGFzc05hbWVcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBsZXQgdmVoaWNsZURlc2NyaXB0aW9uID0gdGhpcy5zdGF0ZS5nZXREYXRhKCkuY3VycmVudFZlaGljbGVEZXNjcmlwdGlvbk1vZGVsO1xuXG4gICAgICAgICAgICBsZXQgc3VzcGVuc2lvbk9wdGlvbnM6U3VzcGVuc2lvbk9wdGlvbnMgPSB7XG4gICAgICAgICAgICAgICAgbWluOiBkZWZhdWx0U3VzcGVuc2lvblJhbmdlLk1pbixcbiAgICAgICAgICAgICAgICBtYXg6IGRlZmF1bHRTdXNwZW5zaW9uUmFuZ2UuTWF4LFxuICAgICAgICAgICAgICAgIHN0YXJ0OiAwLFxuICAgICAgICAgICAgICAgIHN0ZXA6IDEsXG4gICAgICAgICAgICAgICAgZGVjaW1hbFBsYWNlczogMSxcbiAgICAgICAgICAgICAgICB1bml0QWJicmV2aWF0aW9uOiAn4oCzJ1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLy8gUmV0cmlldmUgc3VzcGVuc2lvbiBmcm9tIEFQSSBzZXR0aW5nc1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGxldCBzdXNwZW5zaW9uUmFuZ2VzID0gdGhpcy5zaG93Y2FzZS5zZXR0aW5nc0Zyb21BUEkuU3VzcGVuc2lvblJhbmdlcztcbiAgICAgICAgICAgICAgICBsZXQge1N0eWxlVHlwZSxEcml2ZVR5cGV9ID0gdmVoaWNsZURlc2NyaXB0aW9uO1xuICAgICAgICAgICAgICAgIGxldCBzdXNwZW5zaW9uUmFuZ2VLZXkgPSBTdHlsZVR5cGUgKyBEcml2ZVR5cGU7XG5cbiAgICAgICAgICAgICAgICBpZiAoc3VzcGVuc2lvblJhbmdlS2V5IGluIHN1c3BlbnNpb25SYW5nZXMgPT09IGZhbHNlKSBzdXNwZW5zaW9uUmFuZ2VLZXkgPSAnRGVmYXVsdCc7XG4gICAgICAgICAgICAgICAgbGV0IHN1c3BlbnNpb25SYW5nZSA9IHN1c3BlbnNpb25SYW5nZXNbc3VzcGVuc2lvblJhbmdlS2V5XSB8fCBkZWZhdWx0U3VzcGVuc2lvblJhbmdlO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHN1c3BlbnNpb25PcHRpb25zLm1pbiA9IHN1c3BlbnNpb25SYW5nZS5NaW47XG4gICAgICAgICAgICAgICAgc3VzcGVuc2lvbk9wdGlvbnMubWF4ID0gc3VzcGVuc2lvblJhbmdlLk1heDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5mcm9udEFuZFJlYXIgPSBuZXcgTm9VSVN1c3BlbnNpb25FbGVtZW50KHRoaXMuc2hvd2Nhc2UsIE9iamVjdEhlbHBlci5hc3NpZ24oe1xuICAgICAgICAgICAgICAgIGxhYmVsOiBzdHJpbmdzLmdldFN0cmluZygnc3VzcGVuc2lvbicpXG4gICAgICAgICAgICB9LCBzdXNwZW5zaW9uT3B0aW9ucykpO1xuXG4gICAgICAgICAgICB0aGlzLmZyb250QW5kUmVhci5zdXNwZW5zaW9uQ2hhbmdlZENhbGxiYWNrID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdGhpcy5zdXNwZW5zaW9uQ2hhbmdlQ2FsbGJhY2sgPT09ICdmdW5jdGlvbicpXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3VzcGVuc2lvbkNoYW5nZUNhbGxiYWNrKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFN1c3BlbnNpb246IHRoaXMuZnJvbnRBbmRSZWFyLnZhbHVlXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgdGhpcy5jb21wb25lbnQuYXBwZW5kQ2hpbGQodGhpcy5mcm9udEFuZFJlYXIuY29tcG9uZW50KTtcblxuICAgICAgICAgICAgLy8gbGV0IGZyb250T3B0aW9uczpTdXNwZW5zaW9uVUlFbGVtZW50T3B0aW9ucyA9IE9iamVjdEhlbHBlci5hc3NpZ24oe1xuICAgICAgICAgICAgLy8gICAgIGxhYmVsOiBzdHJpbmdzLmdldFN0cmluZygnZnJvbnQnKVxuICAgICAgICAgICAgLy8gfSwgc3VzcGVuc2lvbk9wdGlvbnMpO1xuXG4gICAgICAgICAgICAvLyB0aGlzLmZyb250ID0gbmV3IE5vVUlTdXNwZW5zaW9uRWxlbWVudCh0aGlzLnNob3djYXNlLCBmcm9udE9wdGlvbnMpO1xuXG4gICAgICAgICAgICAvLyBsZXQgcmVhck9wdGlvbnM6U3VzcGVuc2lvblVJRWxlbWVudE9wdGlvbnMgPSBPYmplY3RIZWxwZXIuYXNzaWduKHtcbiAgICAgICAgICAgIC8vICAgICBsYWJlbDogc3RyaW5ncy5nZXRTdHJpbmcoJ3JlYXInKVxuICAgICAgICAgICAgLy8gfSwgc3VzcGVuc2lvbk9wdGlvbnMpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyB0aGlzLnJlYXIgPSBuZXcgTm9VSVN1c3BlbnNpb25FbGVtZW50KHRoaXMuc2hvd2Nhc2UsIHJlYXJPcHRpb25zKTtcblxuICAgICAgICAgICAgLy8gdGhpcy5jb21wb25lbnQuYXBwZW5kQ2hpbGQodGhpcy5mcm9udC5jb21wb25lbnQpO1xuICAgICAgICAgICAgLy8gdGhpcy5jb21wb25lbnQuYXBwZW5kQ2hpbGQodGhpcy5yZWFyLmNvbXBvbmVudCk7XG5cbiAgICAgICAgICAgIC8vIHRoaXMuZnJvbnQuc3VzcGVuc2lvbkNoYW5nZWRDYWxsYmFjayA9IHRoaXMucmVhci5zdXNwZW5zaW9uQ2hhbmdlZENhbGxiYWNrID0gKCkgPT4ge1xuICAgICAgICAgICAgLy8gICAgIGlmICh0eXBlb2YgdGhpcy5zdXNwZW5zaW9uQ2hhbmdlQ2FsbGJhY2sgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIC8vICAgICAgICAgdGhpcy5zdXNwZW5zaW9uQ2hhbmdlQ2FsbGJhY2soe1xuICAgICAgICAgICAgLy8gICAgICAgICAgICAgU3VzcGVuc2lvbkZyb250OiB0aGlzLmZyb250LnZhbHVlLFxuICAgICAgICAgICAgLy8gICAgICAgICAgICAgU3VzcGVuc2lvblJlYXI6IHRoaXMucmVhci52YWx1ZVxuICAgICAgICAgICAgLy8gICAgICAgICB9KTtcbiAgICAgICAgICAgIC8vICAgICB9XG4gICAgICAgICAgICAvLyB9O1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBwdWJsaWMgc3VzcGVuc2lvbkNoYW5nZUNhbGxiYWNrOiAocmVuZGVyUmVxdWVzdENoYW5nZTpyaWRlc3R5bGVyLlJlcXVlc3RzLlZlaGljbGVSZW5kZXJJbnN0cnVjdGlvbnMpID0+IHZvaWQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQSBnZW5lcmFsIGludGVyZmFjZSBmb3IgVUkgY29tcG9uZW50cyB0aGF0IG1vZGlmeSBzdXNwZW5zaW9uXG4gICAgICovXG4gICAgYWJzdHJhY3QgY2xhc3MgU3VzcGVuc2lvblVJRWxlbWVudCBleHRlbmRzIENvbXBvbmVudEJhc2Uge1xuICAgICAgICBwcm90ZWN0ZWQgb3B0aW9uczpTdXNwZW5zaW9uVUlFbGVtZW50T3B0aW9ucztcbiAgICAgICAgXG4gICAgICAgIHB1YmxpYyB2YWx1ZTpudW1iZXI7XG5cbiAgICAgICAgY29uc3RydWN0b3Ioc2hvd2Nhc2VJbnN0YW5jZTpSaWRlU3R5bGVyU2hvd2Nhc2VJbnN0YW5jZSwgb3B0aW9uczpTdXNwZW5zaW9uVUlFbGVtZW50T3B0aW9ucykge1xuICAgICAgICAgICAgc3VwZXIoc2hvd2Nhc2VJbnN0YW5jZSk7XG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgICAgICAgICAgdGhpcy52YWx1ZSA9IG9wdGlvbnMuc3RhcnQ7XG4gICAgICAgIH1cblxuICAgICAgICBwcm90ZWN0ZWQgb25TdXNwZW5zaW9uQ2hhbmdlZChuZXdWYWx1ZTpudW1iZXIpIHtcbiAgICAgICAgICAgIHRoaXMudmFsdWUgPSBuZXdWYWx1ZTtcblxuICAgICAgICAgICAgaWYgKHR5cGVvZiB0aGlzLnN1c3BlbnNpb25DaGFuZ2VkQ2FsbGJhY2sgPT09ICdmdW5jdGlvbicpIFxuICAgICAgICAgICAgICAgIHRoaXMuc3VzcGVuc2lvbkNoYW5nZWRDYWxsYmFjayhuZXdWYWx1ZSk7XG4gICAgICAgIH1cblxuICAgICAgICBwdWJsaWMgc3VzcGVuc2lvbkNoYW5nZWRDYWxsYmFjazogKG5ld1N1c3BlbnNpb246bnVtYmVyKSA9PiB2b2lkO1xuICAgIH1cblxuICAgIGludGVyZmFjZSBTdXNwZW5zaW9uT3B0aW9ucyB7XG4gICAgICAgIG1pbjogbnVtYmVyO1xuICAgICAgICBtYXg6IG51bWJlcjtcbiAgICAgICAgc3RhcnQ6IG51bWJlcjtcbiAgICAgICAgc3RlcDogbnVtYmVyO1xuICAgICAgICBkZWNpbWFsUGxhY2VzOiBudW1iZXI7XG4gICAgICAgIHVuaXRBYmJyZXZpYXRpb246IHN0cmluZztcbiAgICB9XG5cbiAgICBpbnRlcmZhY2UgU3VzcGVuc2lvblVJRWxlbWVudE9wdGlvbnMgZXh0ZW5kcyBTdXNwZW5zaW9uT3B0aW9ucyB7XG4gICAgICAgIGxhYmVsOiBzdHJpbmc7XG4gICAgfVxuXG4gICAgY2xhc3MgTm9VSVN1c3BlbnNpb25FbGVtZW50IGV4dGVuZHMgU3VzcGVuc2lvblVJRWxlbWVudCB7XG4gICAgICAgIHByaXZhdGUgcmVhZG9ubHkgc2xpZGVyRWxlbWVudDpub1VpU2xpZGVyLkluc3RhbmNlO1xuICAgICAgICBwcml2YXRlIHJlYWRvbmx5IHNsaWRlcjpub1VpU2xpZGVyLm5vVWlTbGlkZXI7XG5cbiAgICAgICAgY29uc3RydWN0b3Ioc2hvd2Nhc2VJbnN0YW5jZTpSaWRlU3R5bGVyU2hvd2Nhc2VJbnN0YW5jZSwgb3B0aW9uczpTdXNwZW5zaW9uVUlFbGVtZW50T3B0aW9ucykge1xuICAgICAgICAgICAgc3VwZXIgKHNob3djYXNlSW5zdGFuY2UsIG9wdGlvbnMpO1xuXG4gICAgICAgICAgICB0aGlzLmNvbXBvbmVudCA9IEhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCgnZGl2Jywge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogZWxlbWVudENsYXNzTmFtZSxcbiAgICAgICAgICAgICAgICBhcHBlbmQ6IEhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCgnZGl2Jywge1xuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IGVsZW1lbnRDbGFzc05hbWUgKyAnLWxhYmVsJyxcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogb3B0aW9ucy5sYWJlbFxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgbGV0IHNsaWRlckVsZW1lbnQ6SFRNTEVsZW1lbnQgPSBIVE1MSGVscGVyLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IGVsZW1lbnRDbGFzc05hbWUgKyAnLXNsaWRlcicsXG4gICAgICAgICAgICAgICAgYXBwZW5kVG86IHRoaXMuY29tcG9uZW50XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgbm9VaVNsaWRlci5jcmVhdGUoc2xpZGVyRWxlbWVudCwge1xuICAgICAgICAgICAgICAgIHN0YXJ0OiBvcHRpb25zLnN0YXJ0LFxuICAgICAgICAgICAgICAgIHJhbmdlOiB7XG4gICAgICAgICAgICAgICAgICAgIG1pbjogb3B0aW9ucy5taW4sXG4gICAgICAgICAgICAgICAgICAgIG1heDogb3B0aW9ucy5tYXhcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHN0ZXA6IG9wdGlvbnMuc3RlcCxcbiAgICAgICAgICAgICAgICBwaXBzOiB7XG4gICAgICAgICAgICAgICAgICAgIG1vZGU6ICdzdGVwcycsXG4gICAgICAgICAgICAgICAgICAgIGZvcm1hdDogKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBwb3N0Zml4OnN0cmluZyA9IG9wdGlvbnMudW5pdEFiYnJldmlhdGlvbjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBkZWNpbWFsUGxhY2VzOm51bWJlciA9IG9wdGlvbnMuZGVjaW1hbFBsYWNlcztcblxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0bzogKHZhbHVlOm51bWJlcikgPT4gdmFsdWUudG9GaXhlZChkZWNpbWFsUGxhY2VzKSArIHBvc3RmaXgsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZnJvbTogKHZhbHVlOnN0cmluZykgPT4gcGFyc2VGbG9hdCh2YWx1ZS5yZXBsYWNlKG5ldyBSZWdFeHAoU3RyaW5nSGVscGVyLmVzY2FwZVJlZ0V4cChwb3N0Zml4KSArICckJyksIFwiXCIpKVxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgfSkoKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB0aGlzLnNsaWRlckVsZW1lbnQgPSAoc2xpZGVyRWxlbWVudCBhcyBub1VpU2xpZGVyLkluc3RhbmNlKTtcbiAgICAgICAgICAgIHRoaXMuc2xpZGVyID0gdGhpcy5zbGlkZXJFbGVtZW50Lm5vVWlTbGlkZXI7XG5cbiAgICAgICAgICAgIHRoaXMuc2xpZGVyLm9uKCd1cGRhdGUnLCAoZm9ybWF0dGVkVmFsdWVzLCBoYW5kbGUsIHZhbHVlcykgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMub25TdXNwZW5zaW9uQ2hhbmdlZCh2YWx1ZXNbMF0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG59IiwibmFtZXNwYWNlIFJpZGVTdHlsZXJTaG93Y2FzZSB7XG4gICAgY29uc3QgYmFyQ2xhc3MgPSAncmlkZXN0eWxlci1zaG93Y2FzZS10YWItYmFyJztcbiAgICBjb25zdCB0YWJDbGFzcyA9IGJhckNsYXNzICsgJy10YWInO1xuICAgIGNvbnN0IHRhYkJhY2tncm91bmRDbGFzcyA9IHRhYkNsYXNzICsgJy1iYWNrZ3JvdW5kJztcbiAgICBjb25zdCBhY3RpdmVUYWJDbGFzcyA9IHRhYkNsYXNzICsgJy1hY3RpdmUnO1xuICAgIGNvbnN0IG1vZGVDbGFzcyA9IGJhckNsYXNzICsgJy0nO1xuXG4gICAgZXhwb3J0IGNsYXNzIFJpZGVTdHlsZXJTaG93Y2FzZVRhYkJhciBleHRlbmRzIENvbXBvbmVudEJhc2Uge1xuICAgICAgICBwcm90ZWN0ZWQgaW5pdGlhbGl6ZUNvbXBvbmVudCgpIHtcbiAgICAgICAgICAgIHRoaXMuY29tcG9uZW50ID0gSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBiYXJDbGFzc1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMuc2V0TW9kZSgndmVydGljYWwnKTtcblxuICAgICAgICAgICAgdGhpcy5jb21wb25lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGUgPT4gdGhpcy5vbkNsaWNrKGUpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHByaXZhdGUgbW9kZTogUmlkZVN0eWxlclNob3djYXNlVGFiQmFyLk1vZGU7XG5cbiAgICAgICAgcHVibGljIHRhYlN3aXRjaGVkQ2FsbGJhY2s6IFJpZGVTdHlsZXJTaG93Y2FzZVRhYkJhci5UYWJTd2l0Y2hlZENhbGxiYWNrO1xuICAgICAgICBwdWJsaWMgdGFiczpSaWRlU3R5bGVyU2hvd2Nhc2VUYWJCYXIuVGFiW107XG4gICAgICAgIHB1YmxpYyBjdXJyZW50VGFiOlJpZGVTdHlsZXJTaG93Y2FzZVRhYkJhci5UYWI7XG5cbiAgICAgICAgcHVibGljIHNldE1vZGUobW9kZTogUmlkZVN0eWxlclNob3djYXNlVGFiQmFyLk1vZGUpIHtcbiAgICAgICAgICAgIC8vIERvIG5vdGhpbmcgaWYgdGhlIG1vZGVzIGFyZSB0aGUgc2FtZVxuICAgICAgICAgICAgaWYgKHRoaXMubW9kZSA9PT0gbW9kZSkgcmV0dXJuO1xuXG4gICAgICAgICAgICBjb25zdCB0b2dnbGUgPSAoY2xhc3NOYW1lOnN0cmluZywgZm9yY2U6Ym9vbGVhbikgPT4gdGhpcy5jb21wb25lbnQuY2xhc3NMaXN0LnRvZ2dsZShjbGFzc05hbWUsIGZvcmNlKTtcblxuICAgICAgICAgICAgLy8gUmVtb3ZlIHRoZSBjdXJyZW50IG1vZGUgY2xhc3NcbiAgICAgICAgICAgIGlmICh0eXBlb2YgdGhpcy5tb2RlID09PSAnc3RyaW5nJykgdG9nZ2xlKG1vZGVDbGFzcyArIHRoaXMubW9kZSwgZmFsc2UpO1xuXG4gICAgICAgICAgICAvLyBTZXQgdGhlIG5ldyBtb2RlXG4gICAgICAgICAgICB0aGlzLm1vZGUgPSBtb2RlO1xuXG4gICAgICAgICAgICAvLyBBZGQgdGhlIGN1cnJlbnQgbW9kZSBjbGFzc1xuICAgICAgICAgICAgdG9nZ2xlKG1vZGVDbGFzcyArIG1vZGUsIHRydWUpO1xuXG4gICAgICAgICAgICAvLyBVcGRhdGUgdGhlIHRhYnMnIG1vZGVcbiAgICAgICAgICAgIHRoaXMudXBkYXRlVGFiRGlzcGxheSgpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBwcml2YXRlIHVwZGF0ZVRhYkRpc3BsYXkoKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMudGFicykgcmV0dXJuO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCB0YWJQZXJjZW50ID0gKDEwMC90aGlzLnRhYnMubGVuZ3RoKSArICclJztcbiAgICAgICAgICAgIGNvbnN0IG1vZGUgPSB0aGlzLm1vZGU7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHRhYiBvZiB0aGlzLnRhYnMpIHtcbiAgICAgICAgICAgICAgICBpZiAobW9kZSA9PT0gJ3ZlcnRpY2FsJykge1xuICAgICAgICAgICAgICAgICAgICB0YWIuZWxlbWVudC5zdHlsZS5oZWlnaHQgPSB0YWJQZXJjZW50O1xuICAgICAgICAgICAgICAgICAgICB0YWIuZWxlbWVudC5zdHlsZS53aWR0aCA9ICcnO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRhYi5lbGVtZW50LnN0eWxlLmhlaWdodCA9ICcnO1xuICAgICAgICAgICAgICAgICAgICB0YWIuZWxlbWVudC5zdHlsZS53aWR0aCA9IHRhYlBlcmNlbnQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHRhYi51cGRhdGVCYWNrZ3JvdW5kUG9seWdvbihtb2RlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHB1YmxpYyBzZXRUYWJzKHRhYnM6UmlkZVN0eWxlclNob3djYXNlVGFiQmFyLlRhYkNyZWF0ZU9wdGlvbnNbXSk7XG4gICAgICAgIHB1YmxpYyBzZXRUYWJzKHRhYnM6UmlkZVN0eWxlclNob3djYXNlVGFiQmFyLlRhYltdKTtcbiAgICAgICAgcHVibGljIHNldFRhYnModGFic09yVGFiQ3JlYXRlT3B0aW9uczpSaWRlU3R5bGVyU2hvd2Nhc2VUYWJCYXIuVGFiW118UmlkZVN0eWxlclNob3djYXNlVGFiQmFyLlRhYkNyZWF0ZU9wdGlvbnNbXSkge1xuICAgICAgICAgICAgbGV0IHRhYnM6UmlkZVN0eWxlclNob3djYXNlVGFiQmFyLlRhYltdO1xuXG4gICAgICAgICAgICBpZiAodGFic09yVGFiQ3JlYXRlT3B0aW9ucy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICB0YWJzID0gW107XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRhYnNPclRhYkNyZWF0ZU9wdGlvbnNbMF0gaW5zdGFuY2VvZiBSaWRlU3R5bGVyU2hvd2Nhc2VUYWJCYXIuVGFiKSB7XG4gICAgICAgICAgICAgICAgdGFicyA9IHRhYnNPclRhYkNyZWF0ZU9wdGlvbnMgYXMgUmlkZVN0eWxlclNob3djYXNlVGFiQmFyLlRhYltdO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0YWJzID0gbmV3IEFycmF5KHRhYnNPclRhYkNyZWF0ZU9wdGlvbnMubGVuZ3RoKTtcblxuICAgICAgICAgICAgICAgIGZvciAodmFyIGluZGV4ID0gMDsgaW5kZXggPCB0YWJzT3JUYWJDcmVhdGVPcHRpb25zLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgICAgICAgICAgICAgICBsZXQgY3JlYXRlT3B0aW9ucyA9IHRhYnNPclRhYkNyZWF0ZU9wdGlvbnNbaW5kZXhdIGFzIFJpZGVTdHlsZXJTaG93Y2FzZVRhYkJhci5UYWJDcmVhdGVPcHRpb25zO1xuICAgICAgICAgICAgICAgICAgICB0YWJzW2luZGV4XSA9IG5ldyBSaWRlU3R5bGVyU2hvd2Nhc2VUYWJCYXIuVGFiKGNyZWF0ZU9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy50YWJzID0gQXJyYXlIZWxwZXIuY29weSh0YWJzKTtcblxuICAgICAgICAgICAgSFRNTEhlbHBlci5lbXB0eSh0aGlzLmNvbXBvbmVudCk7XG5cbiAgICAgICAgICAgIGxldCB0YWJQZXJjZW50ID0gKDEwMC90YWJzLmxlbmd0aCkgKyAnJSc7XG5cbiAgICAgICAgICAgIGZvciAobGV0IHRhYiBvZiB0YWJzKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb21wb25lbnQuYXBwZW5kQ2hpbGQodGFiLmVsZW1lbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVRhYkRpc3BsYXkoKTtcblxuICAgICAgICAgICAgdGhpcy5jdXJyZW50VGFiID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgdGhpcy5zZXRBY3RpdmVUYWIodGFic1swXSk7XG4gICAgICAgIH1cblxuICAgICAgICBwdWJsaWMgY2xlYXJBY3RpdmVUYWIoKSB7XG4gICAgICAgICAgICB0aGlzLnNldEFjdGl2ZVRhYih1bmRlZmluZWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgcHVibGljIHNldEFjdGl2ZVRhYihuZXdUYWI6UmlkZVN0eWxlclNob3djYXNlVGFiQmFyLlRhYikge1xuICAgICAgICAgICAgbGV0IG9sZFRhYiA9IHRoaXMuY3VycmVudFRhYjtcblxuICAgICAgICAgICAgaWYgKG9sZFRhYiA9PT0gbmV3VGFiKSByZXR1cm47XG5cbiAgICAgICAgICAgIHRoaXMuY3VycmVudFRhYiA9IG5ld1RhYjtcblxuICAgICAgICAgICAgLy8gU3dpdGNoIHRoZSBhY3RpdmUgY2xhc3NcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBpZiAob2xkVGFiKVxuICAgICAgICAgICAgICAgICAgICBvbGRUYWIuZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKGFjdGl2ZVRhYkNsYXNzKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBpZiAobmV3VGFiKVxuICAgICAgICAgICAgICAgICAgICBuZXdUYWIuZWxlbWVudC5jbGFzc0xpc3QuYWRkKGFjdGl2ZVRhYkNsYXNzKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gU2VuZCBvZmYgdGhlIGNhbGxiYWNrXG4gICAgICAgICAgICBpZiAobmV3VGFiICYmIHR5cGVvZiB0aGlzLnRhYlN3aXRjaGVkQ2FsbGJhY2sgPT09ICdmdW5jdGlvbicpXG4gICAgICAgICAgICAgICAgdGhpcy50YWJTd2l0Y2hlZENhbGxiYWNrKHtcbiAgICAgICAgICAgICAgICAgICAgb2xkVGFiOiBvbGRUYWIsXG4gICAgICAgICAgICAgICAgICAgIG5ld1RhYjogbmV3VGFiXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBwcml2YXRlIG9uQ2xpY2soZTpNb3VzZUV2ZW50KSB7XG4gICAgICAgICAgICBsZXQgY2xpY2tUYXJnZXQ6SFRNTEVsZW1lbnQgPSBlLnRhcmdldCBhcyBIVE1MRWxlbWVudDtcbiAgICAgICAgICAgIGxldCBjdXJyZW50RWxlbWVudDpIVE1MRWxlbWVudCA9IGNsaWNrVGFyZ2V0O1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBHbyB1cCB0aHJvdWdoIHRoZSBwYXJlbnQgZWxlbWVudHMgdW50aWwgd2UgcmVhY2ggdGhlIHRhYiBiYXJcbiAgICAgICAgICAgIHdoaWxlIChjdXJyZW50RWxlbWVudCAhPT0gdGhpcy5jb21wb25lbnQpIHtcbiAgICAgICAgICAgICAgICAvLyBJZiB0aGUgY3VycmVudCBlbGVtZW50IGlzIGEgdGFiXG4gICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRFbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyh0YWJDbGFzcykpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vblRhYkNsaWNrKHRoaXMudGFiRm9yRWxlbWVudChjdXJyZW50RWxlbWVudCkpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgY3VycmVudEVsZW1lbnQgPSBjdXJyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcHJpdmF0ZSBvblRhYkNsaWNrKHRhYjpSaWRlU3R5bGVyU2hvd2Nhc2VUYWJCYXIuVGFiKSB7XG4gICAgICAgICAgICBpZiAoIXRhYikgcmV0dXJuO1xuXG4gICAgICAgICAgICB0aGlzLnNldEFjdGl2ZVRhYih0YWIpO1xuICAgICAgICB9XG5cbiAgICAgICAgcHVibGljIHRhYkZvckxhYmVsKGxhYmVsOnN0cmluZyk6UmlkZVN0eWxlclNob3djYXNlVGFiQmFyLlRhYiB7XG4gICAgICAgICAgICBmb3IgKGxldCB0YWIgb2YgdGhpcy50YWJzKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRhYi5sYWJlbCA9PT0gbGFiZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRhYjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH1cblxuICAgICAgICBwdWJsaWMgdGFiRm9yRWxlbWVudChlbGVtZW50OkhUTUxFbGVtZW50KTpSaWRlU3R5bGVyU2hvd2Nhc2VUYWJCYXIuVGFiIHtcbiAgICAgICAgICAgIGZvciAobGV0IHRhYiBvZiB0aGlzLnRhYnMpIHtcbiAgICAgICAgICAgICAgICBpZiAodGFiLmVsZW1lbnQgPT09IGVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRhYjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBleHBvcnQgbmFtZXNwYWNlIFJpZGVTdHlsZXJTaG93Y2FzZVRhYkJhciB7XG4gICAgICAgIGV4cG9ydCB0eXBlIE1vZGUgPSAnaG9yaXpvbnRhbCcgfCAndmVydGljYWwnO1xuXG4gICAgICAgIGV4cG9ydCBpbnRlcmZhY2UgVGFiU3dpdGNoZWRFdmVudCB7XG4gICAgICAgICAgICBuZXdUYWI6VGFiO1xuICAgICAgICAgICAgb2xkVGFiOlRhYjtcbiAgICAgICAgfVxuXG4gICAgICAgIGV4cG9ydCBpbnRlcmZhY2UgVGFiU3dpdGNoZWRDYWxsYmFjayB7XG4gICAgICAgICAgICAodGhpczpSaWRlU3R5bGVyU2hvd2Nhc2VUYWJCYXIsIGV2ZW50OlRhYlN3aXRjaGVkRXZlbnQpOnZvaWQ7XG4gICAgICAgIH1cblxuICAgICAgICBleHBvcnQgaW50ZXJmYWNlIFRhYkNyZWF0ZU9wdGlvbnMge1xuICAgICAgICAgICAgaWNvbjpzdHJpbmc7XG4gICAgICAgICAgICBsYWJlbDpzdHJpbmc7XG4gICAgICAgICAgICBrZXk6c3RyaW5nO1xuICAgICAgICB9XG5cbiAgICAgICAgZXhwb3J0IGNsYXNzIFRhYiB7XG4gICAgICAgICAgICBwdWJsaWMgcmVhZG9ubHkgaWNvbkNsYXNzOnN0cmluZztcbiAgICAgICAgICAgIHB1YmxpYyByZWFkb25seSBsYWJlbDpzdHJpbmc7XG4gICAgICAgICAgICBwdWJsaWMgcmVhZG9ubHkgZWxlbWVudDpIVE1MRWxlbWVudDtcbiAgICAgICAgICAgIHB1YmxpYyByZWFkb25seSBrZXk6c3RyaW5nO1xuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICBwcml2YXRlIGJhY2tncm91bmRNb2RlOlJpZGVTdHlsZXJTaG93Y2FzZVRhYkJhci5Nb2RlO1xuICAgICAgICAgICAgcHJpdmF0ZSByZWFkb25seSBiYWNrZ3JvdW5kUG9seWdvbjpTVkdQb2x5Z29uRWxlbWVudDtcblxuICAgICAgICAgICAgY29uc3RydWN0b3IoY3JlYXRlT3B0aW9uczpUYWJDcmVhdGVPcHRpb25zKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5sYWJlbCA9IGNyZWF0ZU9wdGlvbnMubGFiZWw7XG4gICAgICAgICAgICAgICAgdGhpcy5pY29uQ2xhc3MgPSBjcmVhdGVPcHRpb25zLmljb247XG4gICAgICAgICAgICAgICAgdGhpcy5rZXkgPSBjcmVhdGVPcHRpb25zLmtleTtcblxuICAgICAgICAgICAgICAgIHRoaXMuYmFja2dyb3VuZE1vZGUgPSAnaG9yaXpvbnRhbCc7XG5cbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQgPSBIVE1MSGVscGVyLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiB0YWJDbGFzc1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgSFRNTEhlbHBlci5jcmVhdGVJY29uKHtcbiAgICAgICAgICAgICAgICAgICAgaWNvbjogY3JlYXRlT3B0aW9ucy5pY29uLFxuICAgICAgICAgICAgICAgICAgICBhcHBlbmRUbzogdGhpcy5lbGVtZW50LFxuICAgICAgICAgICAgICAgICAgICB3cmFwOiBIVE1MSGVscGVyLmNyZWF0ZUVsZW1lbnRXaXRoQ2xhc3MoJ2RpdicsIHRhYkNsYXNzICsgJy1pY29uJylcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIGNvbnN0IGJhY2tncm91bmQgPSBIVE1MSGVscGVyLmNyZWF0ZUVsZW1lbnQoe1xuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IHRhYkJhY2tncm91bmRDbGFzcyxcbiAgICAgICAgICAgICAgICAgICAgYXBwZW5kVG86IHRoaXMuZWxlbWVudFxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgaWYgKFN0eWxlSGVscGVyLnN2Z1N1cHBvcnRlZCkge1xuICAgICAgICAgICAgICAgICAgICBIVE1MSGVscGVyLmNyZWF0ZVNWR0VsZW1lbnQoJ3N2ZycsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogJzEwMCUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogJzEwMCUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXNlcnZlQXNwZWN0UmF0aW86ICdub25lJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aWV3Qm94OiAnMCAwIDEwMCAxMDAnXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgYXBwZW5kOiAodGhpcy5iYWNrZ3JvdW5kUG9seWdvbiA9IEhUTUxIZWxwZXIuY3JlYXRlU1ZHRWxlbWVudCgncG9seWdvbicsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGw6ICdibGFjaydcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSksXG4gICAgICAgICAgICAgICAgICAgICAgICBhcHBlbmRUbzogYmFja2dyb3VuZFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLmNsYXNzTGlzdC5hZGQodGFiQmFja2dyb3VuZENsYXNzICsgJy1ub3N2ZycpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC50aXRsZSA9IGNyZWF0ZU9wdGlvbnMubGFiZWw7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHB1YmxpYyB1cGRhdGVCYWNrZ3JvdW5kUG9seWdvbihtb2RlOiBSaWRlU3R5bGVyU2hvd2Nhc2VUYWJCYXIuTW9kZSkge1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy5iYWNrZ3JvdW5kUG9seWdvbikgcmV0dXJuO1xuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogVGhlIGhlaWdodCBpbiBwZXJjZW50YWdlIG9mIHRoZSB0cmlhbmdsZSBzaXplXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgY29uc3QgdHJpYW5nbGVIZWlnaHQgPSBtb2RlID09PSAndmVydGljYWwnID8gMzAgOiAxNTtcbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBUaGUgd2lkdGggaW4gcGVyY2VudGFnZSBvZiB0aGUgdHJpYW5nbGUgc2l6ZVxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIGNvbnN0IHRyaWFuZ2xlV2lkdGggPSBtb2RlID09PSAndmVydGljYWwnID8gMTUgOiAzMDtcblxuICAgICAgICAgICAgICAgIHRoaXMuYmFja2dyb3VuZFBvbHlnb24uc2V0QXR0cmlidXRlKCdwb2ludHMnLCBtb2RlID09PSAndmVydGljYWwnID8gXG4gICAgICAgICAgICAgICAgICAgIGAwLDAgMTAwLDAgMTAwLCR7NTAtdHJpYW5nbGVIZWlnaHQvMn0gJHsxMDAtdHJpYW5nbGVXaWR0aH0sNTAgMTAwLCR7NTArdHJpYW5nbGVIZWlnaHQvMn0gMTAwLDEwMCAwLDEwMGAgOlxuICAgICAgICAgICAgICAgICAgICBgMCwwICR7NTAtdHJpYW5nbGVIZWlnaHQvMn0sMCA1MCwke3RyaWFuZ2xlSGVpZ2h0fSAkezUwK3RyaWFuZ2xlSGVpZ2h0LzJ9LDAgMTAwLDAgMTAwLDEwMCwgMCwxMDBgXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn0iLCJuYW1lc3BhY2UgUmlkZVN0eWxlclNob3djYXNlIHtcbiAgICBpbXBvcnQgQ29sdW1uID0gUmlkZVN0eWxlclNob3djYXNlVGFibGUuQ29sdW1uO1xuICAgIGltcG9ydCBPcHRpb25zID0gUmlkZVN0eWxlclNob3djYXNlVGFibGUuT3B0aW9ucztcblxuICAgIGNvbnN0IHRhYmxlQ2xhc3MgPSAncmlkZXN0eWxlci1zaG93Y2FzZS10YWJsZSc7XG4gICAgY29uc3QgaGVhZENsYXNzID0gdGFibGVDbGFzcyArICctaGVhZCc7XG4gICAgY29uc3QgYm9keUNsYXNzID0gdGFibGVDbGFzcyArICctYm9keSc7XG4gICAgY29uc3QgYm9keUxvYWRpbmdDbGFzcyA9IGJvZHlDbGFzcyArICctbG9hZGluZyc7XG4gICAgY29uc3QgY29udGFpbmVyQ2xhc3MgPSB0YWJsZUNsYXNzICsgJy1jb250YWluZXInO1xuXG4gICAgZXhwb3J0IGNsYXNzIFJpZGVTdHlsZXJTaG93Y2FzZVRhYmxlPFJvd1R5cGU+IGV4dGVuZHMgQ29tcG9uZW50QmFzZSB7XG4gICAgICAgIHByb3RlY3RlZCByZWFkb25seSBvcHRpb25zOk9wdGlvbnM8Um93VHlwZT47XG4gICAgICAgIHByb3RlY3RlZCByZWFkb25seSBjb2x1bW5zOkNvbHVtbjxSb3dUeXBlPltdO1xuXG4gICAgICAgIHByb3RlY3RlZCB0Ym9keTpIVE1MVGFibGVTZWN0aW9uRWxlbWVudDtcblxuICAgICAgICBwdWJsaWMgc3RhdGljIGVtcHR5Q2VsbFN0cmluZzpzdHJpbmcgPSAnLSc7XG5cbiAgICAgICAgY29uc3RydWN0b3Ioc2hvd2Nhc2VJbnN0YW5jZTpSaWRlU3R5bGVyU2hvd2Nhc2VJbnN0YW5jZSwgb3B0aW9uczpPcHRpb25zPFJvd1R5cGU+KSB7XG4gICAgICAgICAgICBvcHRpb25zID0gT2JqZWN0SGVscGVyLmFzc2lnbih7XG5cbiAgICAgICAgICAgIH0sIG9wdGlvbnMpIFxuXG4gICAgICAgICAgICBzdXBlcihzaG93Y2FzZUluc3RhbmNlKTtcblxuICAgICAgICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICAgICAgICAgIHRoaXMuY29sdW1ucyA9IG9wdGlvbnMuY29sdW1ucztcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgbGV0IHRhYmxlID0gSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KCd0YWJsZScsIHtcbiAgICAgICAgICAgICAgICBhcHBlbmRUbzogdGhpcy5jb21wb25lbnQsXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiB0YWJsZUNsYXNzXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgbGV0IHRoZWFkID0gSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KCd0aGVhZCcsIHtcbiAgICAgICAgICAgICAgICBhcHBlbmRUbzogdGFibGUsXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBoZWFkQ2xhc3NcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB0aGlzLnRib2R5ID0gSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KCd0Ym9keScsIHtcbiAgICAgICAgICAgICAgICBhcHBlbmRUbzogdGFibGUsXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBib2R5Q2xhc3NcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB0aGlzLmdlbmVyYXRlSGVhZGVycyh0aGVhZCk7XG5cbiAgICAgICAgICAgIHRoaXMuY29tcG9uZW50ID0gdGFibGU7XG5cbiAgICAgICAgICAgIGlmIChvcHRpb25zLnJvd3MpIHRoaXMuYXBwZW5kUm93cyhvcHRpb25zLnJvd3MpO1xuICAgICAgICAgICAgZWxzZSBpZiAob3B0aW9ucy5zdGFydExvYWRpbmcpIHRoaXMuc2V0TG9hZGluZyh0cnVlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHByb3RlY3RlZCBnZW5lcmF0ZUhlYWRlckNlbGwoY29sdW1uOkNvbHVtbjxSb3dUeXBlPik6SFRNTFRhYmxlSGVhZGVyQ2VsbEVsZW1lbnQge1xuICAgICAgICAgICAgbGV0IGhlYWRlciA9IGNvbHVtbi5oZWFkZXI7XG5cbiAgICAgICAgICAgIGlmICh0eXBlb2YgaGVhZGVyID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgbGV0IGdlbmVyYXRlZEhlYWRlciA9IGhlYWRlcihjb2x1bW4pO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHR5cGVvZiBnZW5lcmF0ZWRIZWFkZXIgPT09ICdzdHJpbmcnID8gSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KCd0aCcsIHtcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogZ2VuZXJhdGVkSGVhZGVyXG4gICAgICAgICAgICAgICAgfSkgOiBnZW5lcmF0ZWRIZWFkZXI7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGxldCB0aCA9IEhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCgndGgnLCB7XG4gICAgICAgICAgICAgICAgdGV4dDogaGVhZGVyXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgcmV0dXJuIHRoO1xuICAgICAgICB9XG5cbiAgICAgICAgcHJvdGVjdGVkIGdlbmVyYXRlSGVhZGVycyh0aGVhZDpIVE1MVGFibGVTZWN0aW9uRWxlbWVudCkge1xuICAgICAgICAgICAgbGV0IGhlYWRlclJvdyA9IEhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCgndHInKTtcblxuICAgICAgICAgICAgZm9yIChsZXQgY29sdW1uIG9mIHRoaXMuY29sdW1ucykge1xuICAgICAgICAgICAgICAgIGhlYWRlclJvdy5hcHBlbmRDaGlsZCh0aGlzLmdlbmVyYXRlSGVhZGVyQ2VsbChjb2x1bW4pKTsgICAgXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoZWFkLmFwcGVuZENoaWxkKGhlYWRlclJvdyk7XG4gICAgICAgIH1cblxuICAgICAgICBwcm90ZWN0ZWQgZ2VuZXJhdGVSb3dDZWxsKHJvdzpSb3dUeXBlLCBjb2x1bW46Q29sdW1uPFJvd1R5cGU+KTpIVE1MVGFibGVDZWxsRWxlbWVudCB7XG4gICAgICAgICAgICBsZXQgY2VsbCA9IGNvbHVtbi5jZWxsO1xuXG4gICAgICAgICAgICBpZiAodHlwZW9mIGNlbGwgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICBsZXQgZ2VuZXJhdGVkQ2VsbCA9IChjZWxsIGFzIFJpZGVTdHlsZXJTaG93Y2FzZVRhYmxlLkNlbGxHZW5lcmF0b3I8Um93VHlwZT4pKHJvdywgY29sdW1uKTtcblxuICAgICAgICAgICAgICAgIHJldHVybiB0eXBlb2YgZ2VuZXJhdGVkQ2VsbCA9PT0gJ3N0cmluZycgPyBIVE1MSGVscGVyLmNyZWF0ZUVsZW1lbnQoJ3RkJywge1xuICAgICAgICAgICAgICAgICAgICB0ZXh0OiBnZW5lcmF0ZWRDZWxsXG4gICAgICAgICAgICAgICAgfSkgOiBnZW5lcmF0ZWRDZWxsO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBsZXQgdGQgPSBIVE1MSGVscGVyLmNyZWF0ZUVsZW1lbnQoJ3RkJywge1xuICAgICAgICAgICAgICAgIHRleHQ6IHJvd1tjZWxsIGFzIGtleW9mIFJvd1R5cGVdLnRvU3RyaW5nKClcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICByZXR1cm4gdGQ7XG4gICAgICAgIH1cblxuICAgICAgICBwcm90ZWN0ZWQgZ2VuZXJhdGVSb3cocm93OlJvd1R5cGUpOkhUTUxUYWJsZVJvd0VsZW1lbnQge1xuICAgICAgICAgICAgbGV0IHRyID0gSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KCd0cicpO1xuXG4gICAgICAgICAgICBmb3IgKGxldCBjb2x1bW4gb2YgdGhpcy5jb2x1bW5zKSB7XG4gICAgICAgICAgICAgICAgdHIuYXBwZW5kQ2hpbGQodGhpcy5nZW5lcmF0ZVJvd0NlbGwocm93LCBjb2x1bW4pKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHRyO1xuICAgICAgICB9XG5cbiAgICAgICAgcHVibGljIGFwcGVuZFJvd3Mocm93czpSb3dUeXBlW10pIHtcbiAgICAgICAgICAgIHRoaXMuc2V0TG9hZGluZyhmYWxzZSk7XG5cbiAgICAgICAgICAgIGxldCByb3dzRnJhZ21lbnQgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XG5cbiAgICAgICAgICAgIGZvciAobGV0IHJvdyBvZiByb3dzKSB7XG4gICAgICAgICAgICAgICAgcm93c0ZyYWdtZW50LmFwcGVuZENoaWxkKHRoaXMuZ2VuZXJhdGVSb3cocm93KSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMudGJvZHkuYXBwZW5kQ2hpbGQocm93c0ZyYWdtZW50KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHByb3RlY3RlZCBzZXRMb2FkaW5nKGxvYWRpbmc6Ym9vbGVhbikge1xuICAgICAgICAgICAgdGhpcy50Ym9keS5jbGFzc0xpc3QudG9nZ2xlKGJvZHlMb2FkaW5nQ2xhc3MsIGxvYWRpbmcpO1xuICAgICAgICB9XG5cbiAgICAgICAgcHVibGljIHN0YXRpYyBmb3JtYXRDZWxsPFQ+KG9iamVjdDogVCwga2V5OmtleW9mIFQsIHBvc3RmaXg/OnN0cmluZyk6SFRNTFRhYmxlQ2VsbEVsZW1lbnQge1xuICAgICAgICAgICAgbGV0IHN0cmluZzpzdHJpbmcgPSBvYmplY3Rba2V5XS50b1N0cmluZygpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICByZXR1cm4gSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KCd0ZCcsIHtcbiAgICAgICAgICAgICAgICB0ZXh0OiBzdHJpbmcgPyAocG9zdGZpeCA/IHN0cmluZyArIHBvc3RmaXggOiBzdHJpbmcpIDogUmlkZVN0eWxlclNob3djYXNlVGFibGUuZW1wdHlDZWxsU3RyaW5nXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGV4cG9ydCBuYW1lc3BhY2UgUmlkZVN0eWxlclNob3djYXNlVGFibGUge1xuICAgICAgICBleHBvcnQgaW50ZXJmYWNlIEhlYWRlckdlbmVyYXRvcjxSb3dUeXBlPiB7XG4gICAgICAgICAgICAoY29sdW1uOkNvbHVtbjxSb3dUeXBlPik6SFRNTFRhYmxlSGVhZGVyQ2VsbEVsZW1lbnR8c3RyaW5nO1xuICAgICAgICB9XG5cbiAgICAgICAgZXhwb3J0IGludGVyZmFjZSBDZWxsR2VuZXJhdG9yPFJvd1R5cGU+IHtcbiAgICAgICAgICAgIChyb3c6Um93VHlwZSwgY29sdW1uOkNvbHVtbjxSb3dUeXBlPik6SFRNTFRhYmxlQ2VsbEVsZW1lbnR8c3RyaW5nO1xuICAgICAgICB9XG5cbiAgICAgICAgZXhwb3J0IGludGVyZmFjZSBDb2x1bW48Um93VHlwZT4ge1xuICAgICAgICAgICAgaGVhZGVyOiBzdHJpbmd8SGVhZGVyR2VuZXJhdG9yPFJvd1R5cGU+O1xuICAgICAgICAgICAgY2VsbDoga2V5b2YgUm93VHlwZXxDZWxsR2VuZXJhdG9yPFJvd1R5cGU+O1xuICAgICAgICB9XG5cbiAgICAgICAgZXhwb3J0IGludGVyZmFjZSBPcHRpb25zPFJvd1R5cGU+IHtcbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogQ29sdW1uIHNldHRpbmdzXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGNvbHVtbnM6IENvbHVtbjxSb3dUeXBlPltdO1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIFJvd3MgdG8gaW5pdGlhbGl6ZSB0aGUgdGFibGUgd2l0aFxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICByb3dzPzogUm93VHlwZVtdO1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIElmIHRydWUsIHN0YXJ0IHRoZSB0YWJsZSBpbiB0aGUgbG9hZGluZyBzdGF0ZVxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBzdGFydExvYWRpbmc/OiBib29sZWFuO1xuICAgICAgICB9XG4gICAgfVxufSIsIm5hbWVzcGFjZSBSaWRlU3R5bGVyU2hvd2Nhc2Uge1xuICAgIGltcG9ydCBUaXJlRmlsdGVyTW9kZWwgPSByaWRlc3R5bGVyLlJlcXVlc3RzLlRpcmVGaWx0ZXJNb2RlbDtcbiAgICBpbXBvcnQgVGlyZU1vZGVsRGVzY3JpcHRpb25Nb2RlbCA9IHJpZGVzdHlsZXIuRGVzY3JpcHRpb25zLlRpcmVNb2RlbERlc2NyaXB0aW9uTW9kZWw7XG5cbiAgICBleHBvcnQgY2xhc3MgUmlkZVN0eWxlclNob3djYXNlVGlyZVNlbGVjdG9yIGV4dGVuZHMgUmlkZVN0eWxlclNob3djYXNlUHJvZHVjdFNlbGVjdG9yPFRpcmVNb2RlbERlc2NyaXB0aW9uTW9kZWwsIFRpcmVGaWx0ZXJNb2RlbD4ge1xuICAgICAgICBwcml2YXRlIHJlYWRvbmx5IHZlaGljbGVUaXJlT3B0aW9uSUQ6c3RyaW5nO1xuICAgICAgICBwcml2YXRlIHJlYWRvbmx5IHN1cHBvcnRlZFZlaGljbGVJbWFnZXJ5OiB7XG4gICAgICAgICAgICBhbmdsZWQ6IGJvb2xlYW47XG4gICAgICAgICAgICBzaWRlOiBib29sZWFuO1xuICAgICAgICB9O1xuXG4gICAgICAgIHByb3RlY3RlZCByZWFkb25seSBkZWZhdWx0RmlsdGVyczogVGlyZUZpbHRlck1vZGVsO1xuICAgICAgICBwcm90ZWN0ZWQgY3VycmVudEZpbHRlcnM6IFRpcmVGaWx0ZXJNb2RlbDtcblxuICAgICAgICBjb25zdHJ1Y3RvcihzaG93Y2FzZUluc3RhbmNlOlJpZGVTdHlsZXJTaG93Y2FzZUluc3RhbmNlKSB7XG4gICAgICAgICAgICBzdXBlcihzaG93Y2FzZUluc3RhbmNlKTtcblxuICAgICAgICAgICAgbGV0IHN0YXRlRGF0YSA9IHNob3djYXNlSW5zdGFuY2Uuc3RhdGUuZ2V0RGF0YSgpO1xuXG4gICAgICAgICAgICB0aGlzLnN1cHBvcnRlZFZlaGljbGVJbWFnZXJ5ID0ge1xuICAgICAgICAgICAgICAgIGFuZ2xlZDogc3RhdGVEYXRhLnZlaGljbGVIYXNBbmdsZWRJbWFnZSxcbiAgICAgICAgICAgICAgICBzaWRlOiBzdGF0ZURhdGEudmVoaWNsZUhhc1NpZGVJbWFnZVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgdGhpcy52ZWhpY2xlVGlyZU9wdGlvbklEID0gc3RhdGVEYXRhLmN1cnJlbnRWZWhpY2xlVGlyZU9wdGlvbklEO1xuICAgICAgICAgICAgdGhpcy5kZWZhdWx0RmlsdGVycyA9IHtcbiAgICAgICAgICAgICAgICBWZWhpY2xlVGlyZU9wdGlvbjogdGhpcy52ZWhpY2xlVGlyZU9wdGlvbklELFxuICAgICAgICAgICAgICAgIEhhc0NhdGFsb2dJbWFnZTogdHJ1ZVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMuY3VycmVudEZpbHRlcnMgPSBPYmplY3RIZWxwZXIuYXNzaWduKHt9LCB0aGlzLmRlZmF1bHRGaWx0ZXJzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHByb3RlY3RlZCBjb3VudFJlc3VsdHMoZmlsdGVyczogVGlyZUZpbHRlck1vZGVsKTogcmlkZXN0eWxlci5SaWRlU3R5bGVyUHJvbWlzZTxudW1iZXIsIHJpZGVzdHlsZXIuUmlkZVN0eWxlckFQSVJlc3BvbnNlPiB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZUhlbHBlci50aGVuKGFwaS5yZXF1ZXN0KFwidGlyZS9jb3VudG1vZGVsc1wiLCBmaWx0ZXJzKSwgcmVzcG9uc2UgPT4gcmVzcG9uc2UuQ291bnQpO1xuICAgICAgICB9XG4gICAgICAgIHByb3RlY3RlZCBnZXRSZXN1bHRzKGZpbHRlcnM6IFRpcmVGaWx0ZXJNb2RlbCk6IHJpZGVzdHlsZXIuUmlkZVN0eWxlclByb21pc2U8VGlyZU1vZGVsRGVzY3JpcHRpb25Nb2RlbFtdLCByaWRlc3R5bGVyLlJpZGVTdHlsZXJBUElSZXNwb25zZT4ge1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2VIZWxwZXIudGhlbihhcGkucmVxdWVzdChcInRpcmUvZ2V0bW9kZWxkZXNjcmlwdGlvbnNcIiwgZmlsdGVycyksIHJlc3BvbnNlID0+IHJlc3BvbnNlLk1vZGVscyk7XG4gICAgICAgIH1cbiAgICAgICAgcHJvdGVjdGVkIHByb2R1Y3RGaWx0ZXIocHJvZHVjdDogVGlyZU1vZGVsRGVzY3JpcHRpb25Nb2RlbCk6IGJvb2xlYW4ge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcHJvdGVjdGVkIHByb2R1Y3RJbWFnZVNvdXJjZShwcm9kdWN0OiBUaXJlTW9kZWxEZXNjcmlwdGlvbk1vZGVsKTogc3RyaW5nIHtcbiAgICAgICAgICAgIHJldHVybiByaWRlc3R5bGVyLnRpcmUuaW1hZ2Uoe1xuICAgICAgICAgICAgICAgIFRpcmVGaXRtZW50UmVzb3VyY2VUeXBlOiByaWRlc3R5bGVyLkRhdGFPYmplY3RzLlRpcmVGaXRtZW50UmVzb3VyY2VUeXBlLkNhdGFsb2csXG4gICAgICAgICAgICAgICAgVGlyZU1vZGVsOiBwcm9kdWN0LlRpcmVNb2RlbElELFxuICAgICAgICAgICAgICAgIFdpZHRoOiAxMDAsXG4gICAgICAgICAgICAgICAgSGVpZ2h0OiAxMDAsXG4gICAgICAgICAgICAgICAgUG9zaXRpb25YOiByaWRlc3R5bGVyLlJlcXVlc3RzLkltYWdlUG9zaXRpb24uQ2VudGVyLFxuICAgICAgICAgICAgICAgIFBvc2l0aW9uWTogcmlkZXN0eWxlci5SZXF1ZXN0cy5JbWFnZVBvc2l0aW9uLkNlbnRlcixcbiAgICAgICAgICAgICAgICBJbmNsdWRlU2hhZG93OiB0cnVlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBwcm90ZWN0ZWQgcHJvZHVjdEltYWdlTGFiZWxzKHByb2R1Y3Q6IFRpcmVNb2RlbERlc2NyaXB0aW9uTW9kZWwpOiB7IHByaW1hcnk6IHN0cmluZzsgc2Vjb25kYXJ5Pzogc3RyaW5nOyB0ZXJ0aWFyeT86IHN0cmluZzsgfSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHByaW1hcnk6IHByb2R1Y3QuVGlyZUJyYW5kTmFtZSxcbiAgICAgICAgICAgICAgICBzZWNvbmRhcnk6IHByb2R1Y3QuVGlyZU1vZGVsTmFtZSxcbiAgICAgICAgICAgICAgICB0ZXJ0aWFyeTogcHJvZHVjdC5BdHRyaWJ1dGVzICYmIHByb2R1Y3QuQXR0cmlidXRlcy5sZW5ndGggP1xuICAgICAgICAgICAgICAgICAgICBwcm9kdWN0LkF0dHJpYnV0ZXMuam9pbignLCAnKSA6ICcnXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICB9XG59IiwibmFtZXNwYWNlIFJpZGVTdHlsZXJTaG93Y2FzZSB7XG4gICAgaW1wb3J0IE9wdGlvbiA9IFJpZGVTdHlsZXJTaG93Y2FzZVRvZ2dsZUJ1dHRvbi5PcHRpb247XG4gICAgaW1wb3J0IE9wdGlvbkVsZW1lbnQgPSBSaWRlU3R5bGVyU2hvd2Nhc2VUb2dnbGVCdXR0b24uT3B0aW9uRWxlbWVudDtcbiAgICBpbXBvcnQgT3B0aW9uQ2hhbmdlZENhbGxiYWNrID0gUmlkZVN0eWxlclNob3djYXNlVG9nZ2xlQnV0dG9uLk9wdGlvbkNoYW5nZWRDYWxsYmFjaztcblxuICAgIGNvbnN0IHRvZ2dsZUJ1dHRvbkNsYXNzID0gJ3JpZGVzdHlsZXItc2hvd2Nhc2UtdG9nZ2xlLWJ1dHRvbic7XG4gICAgY29uc3Qgb3B0aW9uQ2xhc3MgPSB0b2dnbGVCdXR0b25DbGFzcyArICctb3B0aW9uJztcbiAgICBjb25zdCBvcHRpb25BY3RpdmVDbGFzcyA9IG9wdGlvbkNsYXNzICsgJy1hY3RpdmUnO1xuICAgIGV4cG9ydCBjbGFzcyBSaWRlU3R5bGVyU2hvd2Nhc2VUb2dnbGVCdXR0b24gZXh0ZW5kcyBDb21wb25lbnRCYXNlIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBjdXJyZW50IHZhbHVlIG9mIHRoZSB0b2dnbGUgYnV0dG9uXG4gICAgICAgICAqL1xuICAgICAgICBwdWJsaWMgdmFsdWU6c3RyaW5nO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBdHRhY2ggYSBjaGFuZ2UgZnVuY3Rpb24gdG8gY2FsbCB3aGVuIHRoZSB2YWx1ZSBpcyBjaGFuZ2VkXG4gICAgICAgICAqL1xuICAgICAgICBwdWJsaWMgb25DaGFuZ2VkOk9wdGlvbkNoYW5nZWRDYWxsYmFjaztcblxuICAgICAgICAvKipcbiAgICAgICAgICogQ3JlYXRlIHRoZSBET00gZm9yIHRoZSB0b2dnbGUgYnV0dG9uXG4gICAgICAgICAqIFxuICAgICAgICAgKiBAb3ZlcnJpZGVcbiAgICAgICAgICovXG4gICAgICAgIHByb3RlY3RlZCBpbml0aWFsaXplQ29tcG9uZW50KCkge1xuICAgICAgICAgICAgdGhpcy5jb21wb25lbnQgPSBIVE1MSGVscGVyLmNyZWF0ZUVsZW1lbnQoe1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogdG9nZ2xlQnV0dG9uQ2xhc3NcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB0aGlzLmNvbXBvbmVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNsaWNrRXZlbnQgPT4gdGhpcy5vbkNsaWNrZWQoY2xpY2tFdmVudCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENhbGxlZCB3aGVuIHRoZSB0b2dnbGUgYnV0dG9uIGlzIGNsaWNrZWQgb25cbiAgICAgICAgICovXG4gICAgICAgIHByaXZhdGUgb25DbGlja2VkKGNsaWNrRXZlbnQ6TW91c2VFdmVudCkge1xuICAgICAgICAgICAgY29uc3QgdGFyZ2V0OkhUTUxFbGVtZW50ID0gY2xpY2tFdmVudC50YXJnZXQgYXMgSFRNTEVsZW1lbnQ7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmICghdGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhvcHRpb25DbGFzcykpIHJldHVybjsgLy8gVGhlIGNsaWNrIHdhcyBub3Qgb24gYW4gb3B0aW9uXG4gICAgICAgICAgICBpZiAodGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhvcHRpb25BY3RpdmVDbGFzcykpIHJldHVybjsgLy8gVGhlIGNsaWNrIHdhcyBvbiBhbiBhY3RpdmUgb3B0aW9uXG5cbiAgICAgICAgICAgIHRoaXMuc2VsZWN0T3B0aW9uRWxlbWVudCh0YXJnZXQgYXMgT3B0aW9uRWxlbWVudCk7XG4gICAgICAgIH1cblxuICAgICAgICBwcml2YXRlIHNlbGVjdE9wdGlvbkVsZW1lbnQob3B0aW9uRWxlbWVudDpPcHRpb25FbGVtZW50LCB0cmlnZ2VyQ2hhbmdlOmJvb2xlYW4gPSB0cnVlKSB7XG4gICAgICAgICAgICBjb25zdCBuZXdWYWx1ZTpzdHJpbmcgPSBvcHRpb25FbGVtZW50LnZhbHVlO1xuXG4gICAgICAgICAgICBpZiAodGhpcy52YWx1ZSA9PT0gbmV3VmFsdWUpIHJldHVybjtcblxuICAgICAgICAgICAgdGhpcy52YWx1ZSA9IG5ld1ZhbHVlO1xuXG4gICAgICAgICAgICBmb3IgKGxldCBjaGlsZEluZGV4ID0gMDsgY2hpbGRJbmRleCA8IHRoaXMuY29tcG9uZW50LmNoaWxkcmVuLmxlbmd0aDsgY2hpbGRJbmRleCsrKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY2hpbGRPcHRpb25FbGVtZW50Ok9wdGlvbkVsZW1lbnQgPSB0aGlzLmNvbXBvbmVudC5jaGlsZHJlbltjaGlsZEluZGV4XSBhcyBPcHRpb25FbGVtZW50O1xuICAgICAgICAgICAgICAgIGNoaWxkT3B0aW9uRWxlbWVudC5jbGFzc0xpc3QudG9nZ2xlKG9wdGlvbkFjdGl2ZUNsYXNzLCBjaGlsZE9wdGlvbkVsZW1lbnQgPT09IG9wdGlvbkVsZW1lbnQpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAodHlwZW9mIHRoaXMub25DaGFuZ2VkID09PSAnZnVuY3Rpb24nICYmIHRyaWdnZXJDaGFuZ2UpIHRoaXMub25DaGFuZ2VkKG5ld1ZhbHVlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHB1YmxpYyBzZXRWYWx1ZSh2YWx1ZTpzdHJpbmcpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnZhbHVlID09PSB2YWx1ZSkgcmV0dXJuO1xuXG4gICAgICAgICAgICBmb3IgKGxldCBjaGlsZEluZGV4ID0gMDsgY2hpbGRJbmRleCA8IHRoaXMuY29tcG9uZW50LmNoaWxkcmVuLmxlbmd0aDsgY2hpbGRJbmRleCsrKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY2hpbGRPcHRpb25FbGVtZW50Ok9wdGlvbkVsZW1lbnQgPSB0aGlzLmNvbXBvbmVudC5jaGlsZHJlbltjaGlsZEluZGV4XSBhcyBPcHRpb25FbGVtZW50O1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGlmIChjaGlsZE9wdGlvbkVsZW1lbnQudmFsdWUgPT09IHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0T3B0aW9uRWxlbWVudChjaGlsZE9wdGlvbkVsZW1lbnQpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcHVibGljIHNldE9wdGlvbnMob3B0aW9uczpPcHRpb25bXSkge1xuICAgICAgICAgICAgSFRNTEhlbHBlci5lbXB0eSh0aGlzLmNvbXBvbmVudCk7XG4gICAgICAgICAgICB0aGlzLnZhbHVlID0gdW5kZWZpbmVkO1xuXG4gICAgICAgICAgICBmb3IgKGNvbnN0IG9wdGlvbiBvZiBvcHRpb25zKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hZGRPcHRpb24ob3B0aW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHB1YmxpYyBhZGRPcHRpb24ob3B0aW9uOk9wdGlvbikge1xuICAgICAgICAgICAgY29uc3Qgb3B0aW9uRWxlbWVudDpPcHRpb25FbGVtZW50ID0gT2JqZWN0SGVscGVyLmFzc2lnbihIVE1MSGVscGVyLmNyZWF0ZUVsZW1lbnQoJ3NwYW4nLCB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBvcHRpb25DbGFzcyxcbiAgICAgICAgICAgICAgICB0ZXh0OiBvcHRpb24ubGFiZWwsXG4gICAgICAgICAgICAgICAgYXBwZW5kVG86IHRoaXMuY29tcG9uZW50XG4gICAgICAgICAgICB9KSwge1xuICAgICAgICAgICAgICAgIHZhbHVlOiBvcHRpb24udmFsdWVcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBpZiAodGhpcy52YWx1ZSA9PT0gdW5kZWZpbmVkKSB0aGlzLnNlbGVjdE9wdGlvbkVsZW1lbnQob3B0aW9uRWxlbWVudCwgZmFsc2UpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZXhwb3J0IG5hbWVzcGFjZSBSaWRlU3R5bGVyU2hvd2Nhc2VUb2dnbGVCdXR0b24ge1xuICAgICAgICBleHBvcnQgaW50ZXJmYWNlIE9wdGlvbkVsZW1lbnQgZXh0ZW5kcyBIVE1MRWxlbWVudCB7XG4gICAgICAgICAgICB2YWx1ZTogc3RyaW5nO1xuICAgICAgICB9XG5cbiAgICAgICAgZXhwb3J0IGludGVyZmFjZSBPcHRpb25DaGFuZ2VkQ2FsbGJhY2sge1xuICAgICAgICAgICAgKHZhbHVlOnN0cmluZyk6dm9pZDtcbiAgICAgICAgfVxuXG4gICAgICAgIGV4cG9ydCBpbnRlcmZhY2UgT3B0aW9uIHtcbiAgICAgICAgICAgIGxhYmVsOnN0cmluZztcbiAgICAgICAgICAgIHZhbHVlOnN0cmluZztcbiAgICAgICAgfVxuICAgIH1cbn0iLCJuYW1lc3BhY2UgUmlkZVN0eWxlclNob3djYXNlIHtcclxuICAgIGV4cG9ydCBjbGFzcyBSaWRlU3R5bGVyU2hvd2Nhc2VWZWhpY2xlU2VsZWN0aW9uIGV4dGVuZHMgTWFpbkNvbXBvbmVudEJhc2Uge1xyXG4gICAgICAgIHByaXZhdGUgY2hvb3NlVmVoaWNsZUJ1dHRvbjpIVE1MQnV0dG9uRWxlbWVudDtcclxuICAgICAgICBwcml2YXRlIGNvbnRlbnRDb250YWluZXI6SFRNTEVsZW1lbnQ7XHJcbiAgICAgICAgcHJpdmF0ZSB3aGVlbENvbnRhaW5lcjpIVE1MRWxlbWVudDtcclxuICAgICAgICBwcml2YXRlIG1vZGFsOlJpZGVTdHlsZXJWZWhpY2xlU2VsZWN0aW9uTW9kYWw7XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBpbml0aWFsaXplTWFpbkNvbXBvbmVudCgpIHtcclxuICAgICAgICAgICAgdGhpcy5tb2RhbCA9IG5ldyBSaWRlU3R5bGVyVmVoaWNsZVNlbGVjdGlvbk1vZGFsKHtcclxuICAgICAgICAgICAgICAgIGNvbnRhaW5lcjogKCkgPT4gdGhpcy5jb21wb25lbnQucGFyZW50RWxlbWVudCxcclxuICAgICAgICAgICAgICAgIGNhbGxiYWNrOiAoc2VsZWN0aW9uKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNlbGVjdGlvbi5GaW5hbFNlbGVjdGlvbk1hZGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vblZlaGljbGVTZWxlY3RlZChzZWxlY3Rpb24uVmVoaWNsZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIEltYWdlU2V0dGluZ3M6IG9wdGlvbnMgPT4gdGhpcy5nZW5lcmF0ZVZlaGljbGVQcmV2aWV3U2V0dGluZ3MoKSxcclxuICAgICAgICAgICAgICAgIEluY2x1ZGVPRVRpcmVPcHRpb246IHRydWVcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBhcGkuYWZ0ZXJBdXRoZW50aWNhdGVkKCgpID0+IHRoaXMub25BdXRoZW50aWNhdGVkKCkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIGJ1aWxkQ29tcG9uZW50KGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpOiB2b2lkIHtcclxuXHJcbiAgICAgICAgICAgIC8vVVJMIENIRUNLIExPR0lDXHJcblxyXG4gICAgICAgICAgICBjb250YWluZXIuY2xhc3NMaXN0LmFkZCgncmlkZXN0eWxlci1zaG93Y2FzZS12ZWhpY2xlLXNlbGVjdGlvbicpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5jb250ZW50Q29udGFpbmVyID0gSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XHJcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdyaWRlc3R5bGVyLXNob3djYXNlLWNvbnRlbnQgcmlkZXN0eWxlci1zaG93Y2FzZS12ZWhpY2xlLXNlbGVjdGlvbi1jb250ZW50JyxcclxuICAgICAgICAgICAgICAgIGFwcGVuZFRvOiBjb250YWluZXJcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB0aGlzLmJ1aWxkQ29weSgpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5jaG9vc2VWZWhpY2xlQnV0dG9uID0gSFRNTEhlbHBlci5jcmVhdGVCdXR0b24oe1xyXG4gICAgICAgICAgICAgICAgdGV4dDogc3RyaW5ncy5nZXRTdHJpbmcoJ3NlbGVjdC15b3VyLXZlaGljbGUnKSxcclxuICAgICAgICAgICAgICAgIGFwcGVuZFRvOiB0aGlzLmNvbnRlbnRDb250YWluZXIsXHJcbiAgICAgICAgICAgICAgICBkaXNhYmxlZDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIGxhcmdlOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgaWQ6ICdyaWRlc3R5bGVyLXNob3djYXNlLXNlbGVjdC15b3VyLXZlaGljbGUnLFxyXG4gICAgICAgICAgICAgICAgd3JhcDogSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50V2l0aElEKCdkaXYnLCAncmlkZXN0eWxlci1zaG93Y2FzZS1zZWxlY3QteW91ci12ZWhpY2xlLXdyYXBwZXInKVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuY2hvb3NlVmVoaWNsZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMubW9kYWwuU2hvdygpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgYnVpbGRDb3B5KCkge1xyXG4gICAgICAgICAgICBmdW5jdGlvbiBlbWJvbGRlbkZpcnN0V29yZCAoc3RyaW5nOnN0cmluZykgOiBbSFRNTEVsZW1lbnQsIFRleHRdIHtcclxuICAgICAgICAgICAgICAgIHZhciBmaXJzdFdvcmQgPSBTdHJpbmdIZWxwZXIuZ2V0Rmlyc3RXb3JkKHN0cmluZyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgcmVtYWluaW5nU3RyaW5nID0gc3RyaW5nLnN1YnN0cihmaXJzdFdvcmQubGVuZ3RoKTtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gW1xyXG4gICAgICAgICAgICAgICAgICAgIEhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudFdpdGhUZXh0KCdzdHJvbmcnLCBmaXJzdFdvcmQpLFxyXG4gICAgICAgICAgICAgICAgICAgIEhUTUxIZWxwZXIuY3JlYXRlVGV4dEVsZW1lbnQocmVtYWluaW5nU3RyaW5nKVxyXG4gICAgICAgICAgICAgICAgXTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgbGV0IHZpc3VhbGl6ZVN0cmluZyA9IEhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCgnaDEnLCB7XHJcbiAgICAgICAgICAgICAgICBhcHBlbmQ6IGVtYm9sZGVuRmlyc3RXb3JkKHN0cmluZ3MuZ2V0U3RyaW5nKFwidmVoaWNsZS1zZWxlY3QtdmlzdWFsaXplLWludHJvXCIpKSxcclxuICAgICAgICAgICAgICAgIGFwcGVuZFRvOiB0aGlzLmNvbnRlbnRDb250YWluZXJcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGxldCBzaGFyZVN0cmluZyA9IEhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCgnaDEnLCB7XHJcbiAgICAgICAgICAgICAgICBhcHBlbmQ6IGVtYm9sZGVuRmlyc3RXb3JkKHN0cmluZ3MuZ2V0U3RyaW5nKFwidmVoaWNsZS1zZWxlY3Qtc2hhcmUtaW50cm9cIikpLFxyXG4gICAgICAgICAgICAgICAgYXBwZW5kVG86IHRoaXMuY29udGVudENvbnRhaW5lclxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgb25BdXRoZW50aWNhdGVkKCkge1xyXG4gICAgICAgICAgICB0aGlzLmNob29zZVZlaGljbGVCdXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIGFwaS5yZXF1ZXN0KFwid2hlZWwvZ2V0bW9kZWxzXCIsIHtcclxuICAgICAgICAgICAgICAgIENvdW50OiAzLFxyXG4gICAgICAgICAgICAgICAgSGFzQ2F0YWxvZ0ltYWdlOiB0cnVlXHJcbiAgICAgICAgICAgIH0pLmRvbmUocmVzcG9uc2UgPT4gdGhpcy5zaG93V2hlZWxzKHJlc3BvbnNlLk1vZGVscykpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBvblZlaGljbGVTZWxlY3RlZChzZWxlY3Rpb246UmlkZVN0eWxlclZlaGljbGVTZWxlY3Rpb25Nb2RhbC5TZWxlY3RlZFZlaGljbGVEYXRhKSB7XHJcbiAgICAgICAgICAgIC8vIFRoZSB1c2VyIGhhcyBzZWxlY3RlZCBhIHZlaGljbGUgdXNpbmcgdGhlIHZlaGljbGUgc2VsZWN0aW9uIG1vZGFsLlxyXG4gICAgICAgICAgICAvLyBOb3cgd2UgbmVlZCB0byBvYnRhaW4gYSBPRSB0aXJlIG9wdGlvbiBmb3IgdGhlbS5cclxuICAgICAgICAgICAgdGhpcy5ldmVudHMudHJpZ2dlcihcInZlaGljbGUtc2VsZWN0ZWRcIiwgc2VsZWN0aW9uKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFNob3cgdGhlIHBhc3NlZCBpbiB3aGVlbCBtb2RlbHMgaW4gdGhlIHdoZWVsIHNob3djYXNlIHNlY3Rpb24gb2YgdGhlIHZlaGljbGUgc2VsZWN0aW9uIHNjcmVlblxyXG4gICAgICAgICAqIEBwYXJhbSBtb2RlbHMgVGhlIHdoZWVsIG1vZGVscyB0byBzaG93XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHJpdmF0ZSBzaG93V2hlZWxzKG1vZGVsczpyaWRlc3R5bGVyLkRhdGFPYmplY3RzLldoZWVsTW9kZWxEYXRhT2JqZWN0W10pIHtcclxuICAgICAgICAgICAgbGV0IHdoZWVsQ29udGFpbmVyOkhUTUxFbGVtZW50O1xyXG5cclxuICAgICAgICAgICAgaWYgKCF0aGlzLndoZWVsQ29udGFpbmVyKSB7XHJcbiAgICAgICAgICAgICAgICB3aGVlbENvbnRhaW5lciA9IHRoaXMud2hlZWxDb250YWluZXIgPSBIVE1MSGVscGVyLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcclxuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdyaWRlc3R5bGVyLXNob3djYXNlLXZlaGljbGUtc2VsZWN0aW9uLXdoZWVsLXNob3djYXNlJyxcclxuICAgICAgICAgICAgICAgICAgICBhcHBlbmRUbzogdGhpcy5jb21wb25lbnRcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgd2hlZWxDb250YWluZXIgPSB0aGlzLndoZWVsQ29udGFpbmVyO1xyXG5cclxuICAgICAgICAgICAgICAgIEhUTUxIZWxwZXIuZW1wdHkod2hlZWxDb250YWluZXIpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBsZXQgbW9kZWxJbWFnZXM6SFRNTEltYWdlRWxlbWVudFtdID0gW107XHJcbiAgICAgICAgICAgIGxldCBvbk1vZGVsSW1hZ2VMb2FkID0gZnVuY3Rpb24gKHRoaXM6SFRNTEltYWdlRWxlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgbW9kZWxJbWFnZSBvZiBtb2RlbEltYWdlcylcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIW1vZGVsSW1hZ2UuY29tcGxldGUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgd2hlZWxDb250YWluZXIuc3R5bGUub3BhY2l0eSA9ICcxJztcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIGZvciAobGV0IG1vZGVsIG9mIG1vZGVscykge1xyXG4gICAgICAgICAgICAgICAgbGV0IG1vZGVsSW1hZ2VTb3VyY2UgPSByaWRlc3R5bGVyLndoZWVsLmltYWdlKHtcclxuICAgICAgICAgICAgICAgICAgICBXaGVlbE1vZGVsOiBtb2RlbC5XaGVlbE1vZGVsSUQsXHJcbiAgICAgICAgICAgICAgICAgICAgV2lkdGg6IDQwMCxcclxuICAgICAgICAgICAgICAgICAgICBIZWlnaHQ6IDQwMCxcclxuICAgICAgICAgICAgICAgICAgICBQb3NpdGlvblg6IHJpZGVzdHlsZXIuUmVxdWVzdHMuSW1hZ2VQb3NpdGlvbi5DZW50ZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgUG9zaXRpb25ZOiByaWRlc3R5bGVyLlJlcXVlc3RzLkltYWdlUG9zaXRpb24uQ2VudGVyLFxyXG4gICAgICAgICAgICAgICAgICAgIFdoZWVsRml0bWVudFJlc291cmNlVHlwZTogcmlkZXN0eWxlci5EYXRhT2JqZWN0cy5XaGVlbEZpdG1lbnRSZXNvdXJjZVR5cGUuQ2F0YWxvZyxcclxuICAgICAgICAgICAgICAgICAgICBJbmNsdWRlU2hhZG93OiB0cnVlXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgbGV0IG1vZGVsSW1hZ2UgPSBIVE1MSGVscGVyLmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBtb2RlbEltYWdlLmNsYXNzTmFtZSA9ICdyaWRlc3R5bGVyLXNob3djYXNlLXZlaGljbGUtc2VsZWN0aW9uLXdoZWVsLXNob3djYXNlLWltYWdlJztcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgbW9kZWxJbWFnZS5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgb25Nb2RlbEltYWdlTG9hZCk7XHJcbiAgICAgICAgICAgICAgICBtb2RlbEltYWdlcy5wdXNoKCApO1xyXG5cclxuICAgICAgICAgICAgICAgIG1vZGVsSW1hZ2Uuc3JjID0gbW9kZWxJbWFnZVNvdXJjZTtcclxuICAgICAgICAgICAgICAgIHdoZWVsQ29udGFpbmVyLmFwcGVuZENoaWxkKG1vZGVsSW1hZ2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGdlbmVyYXRlVmVoaWNsZVByZXZpZXdTZXR0aW5ncygpOnJpZGVzdHlsZXIuUmVxdWVzdHMuSW1hZ2VSZW5kZXJSZXF1ZXN0IHtcclxuICAgICAgICAgICAgbGV0IHNjYWxlID0gTWF0aC5tYXgod2luZG93LmRldmljZVBpeGVsUmF0aW8gfHwgMCwgMSk7XHJcbiAgICAgICAgICAgIGxldCBjb250YWluZXIgPSB0aGlzLmNvbXBvbmVudDtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnN0IHdpZHRoVG9IZWlnaHQgPSAuNTtcclxuICAgICAgICAgICAgY29uc3QgbWF4UmVxdWVzdFJlc29sdXRpb24gPSAxOTIwO1xyXG5cclxuICAgICAgICAgICAgLy8gV2lkdGggaXMgODAlIG9mIHRoZSBjb250YWluZXIgd2lkdGhcclxuICAgICAgICAgICAgbGV0IHdpZHRoID0gY29udGFpbmVyLmNsaWVudFdpZHRoICogLjgwO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gV2lkdGggaXMgNTAwIGlmIG5vdCBmb3VuZFxyXG4gICAgICAgICAgICBpZiAoIXdpZHRoKSB3aWR0aCA9IDUwMDtcclxuXHJcbiAgICAgICAgICAgIC8vIEFwcGx5IG91ciBzY2FsZVxyXG4gICAgICAgICAgICB3aWR0aCAqPSBzY2FsZTtcclxuXHJcbiAgICAgICAgICAgIC8vIExpbWl0IHdpZHRoIHRvIG1heCByZXF1ZXN0IHJlc29sdXRpb25cclxuICAgICAgICAgICAgaWYgKHdpZHRoID4gbWF4UmVxdWVzdFJlc29sdXRpb24pIHdpZHRoID0gbWF4UmVxdWVzdFJlc29sdXRpb247XHJcblxyXG4gICAgICAgICAgICAvLyBEZXRlcm1pbmUgaGVpZ2h0XHJcbiAgICAgICAgICAgIGxldCBoZWlnaHQgPSB3aWR0aCAqIHdpZHRoVG9IZWlnaHQ7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgV2lkdGg6IH5+d2lkdGgsXHJcbiAgICAgICAgICAgICAgICBIZWlnaHQ6IH5+aGVpZ2h0XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59IiwibmFtZXNwYWNlIFJpZGVTdHlsZXJTaG93Y2FzZSB7XHJcbiAgICBpbXBvcnQgVGFiID0gUmlkZVN0eWxlclNob3djYXNlVGFiQmFyLlRhYjtcclxuXHJcbiAgICBjb25zdCBjdXN0b21pemF0aW9uc0NsYXNzID0gJ3JpZGVzdHlsZXItc2hvd2Nhc2UtY3VzdG9taXphdGlvbnMnO1xyXG4gICAgY29uc3QgbG9hZGluZ0NsYXNzID0gY3VzdG9taXphdGlvbnNDbGFzcyArICctbG9hZGluZyc7XHJcblxyXG4gICAgdHlwZSBjdXN0b21pemF0aW9uQ29tcG9uZW50S2V5cyA9ICdwYWludCcgfCAnd2hlZWxzJyB8ICd0aXJlcycgfCAnc3VzcGVuc2lvbic7XHJcblxyXG4gICAgZXhwb3J0IGNsYXNzIFJpZGVTdHlsZXJTaG93Y2FzZVZlaGljbGVWaXN1YWxpemF0aW9uIGV4dGVuZHMgTWFpbkNvbXBvbmVudEJhc2Uge1xyXG4gICAgICAgIHByaXZhdGUgdmlld3BvcnQ6UmlkZVN0eWxlclZpZXdwb3J0O1xyXG4gICAgICAgIHByaXZhdGUgdGFiQmFyOlJpZGVTdHlsZXJTaG93Y2FzZVRhYkJhcjtcclxuICAgICAgICBwcml2YXRlIGNoYW5nZVdoZWVsU2l6ZTpSaWRlU3R5bGVyU2hvd2Nhc2VDaGFuZ2VXaGVlbFNpemU7XHJcblxyXG4gICAgICAgIHByaXZhdGUgdGl0bGVFbGVtZW50OkhUTUxFbGVtZW50O1xyXG4gICAgICAgIHByaXZhdGUgcm90YXRlRWxlbWVudDpIVE1MRWxlbWVudDtcclxuICAgICAgICBwcml2YXRlIGZpbHRlckJ1dHRvbjpIVE1MQnV0dG9uRWxlbWVudDtcclxuICAgICAgICBwcml2YXRlIHNoYXJlQnV0dG9uOkhUTUxCdXR0b25FbGVtZW50O1xyXG5cclxuICAgICAgICBwcml2YXRlIHZlaGljbGVEZXRhaWxzOlZlaGljbGVEZXRhaWxzO1xyXG5cclxuICAgICAgICBwcml2YXRlIHRhYnM6IHtcclxuICAgICAgICAgICAgW2tleSBpbiBjdXN0b21pemF0aW9uQ29tcG9uZW50S2V5c106IFRhYjtcclxuICAgICAgICB9O1xyXG4gICAgICAgIFxyXG4gICAgICAgIHByaXZhdGUgY3VzdG9taXphdGlvbkNvbXBvbmVudE9yZGVyOmN1c3RvbWl6YXRpb25Db21wb25lbnRLZXlzW10gPSBbJ3BhaW50JywgJ3doZWVscycsICd0aXJlcycsICdzdXNwZW5zaW9uJ107XHJcbiAgICAgICAgXHJcbiAgICAgICAgcHJpdmF0ZSBjdXN0b21pemF0aW9uQ29tcG9uZW50Q29udGFpbmVyOkhUTUxFbGVtZW50O1xyXG4gICAgICAgIHByaXZhdGUgY3VzdG9taXphdGlvbkNvbXBvbmVudHM6e1xyXG4gICAgICAgICAgICBwYWludDogUmlkZVN0eWxlclNob3djYXNlUGFpbnRTZWxlY3RvcjtcclxuICAgICAgICAgICAgd2hlZWxzOiBSaWRlU3R5bGVyU2hvd2Nhc2VXaGVlbFNlbGVjdG9yO1xyXG4gICAgICAgICAgICB0aXJlczogUmlkZVN0eWxlclNob3djYXNlVGlyZVNlbGVjdG9yO1xyXG4gICAgICAgICAgICBzdXNwZW5zaW9uOiBSaWRlU3R5bGVyU2hvd2Nhc2VTdXNwZW5zaW9uU2VsZWN0b3I7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgcHJpdmF0ZSBjdXN0b21pemF0aW9uQ29tcG9uZW50U2V0dGluZ3M6IHtcclxuICAgICAgICAgICAgW2tleSBpbiBjdXN0b21pemF0aW9uQ29tcG9uZW50S2V5c106IEN1c3RvbWl6YXRpb25Db21wb25lbnRTZXR0aW5ncztcclxuICAgICAgICB9ID0ge1xyXG4gICAgICAgICAgICBwYWludDoge1xyXG4gICAgICAgICAgICAgICAgdGl0bGU6IHN0cmluZ3MuZ2V0U3RyaW5nKCdzZWxlY3QtcGFpbnQnKSxcclxuICAgICAgICAgICAgICAgIHNob3dGaWx0ZXJCdXR0b246IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgZW5hYmxlZDogdHJ1ZVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB3aGVlbHM6IHtcclxuICAgICAgICAgICAgICAgIHRpdGxlOiBzdHJpbmdzLmdldFN0cmluZygnc2VsZWN0LXdoZWVscycpLFxyXG4gICAgICAgICAgICAgICAgc2hvd0ZpbHRlckJ1dHRvbjogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIGVuYWJsZWQ6IHRydWVcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgdGlyZXM6IHtcclxuICAgICAgICAgICAgICAgIHRpdGxlOiBzdHJpbmdzLmdldFN0cmluZygnc2VsZWN0LXRpcmVzJyksXHJcbiAgICAgICAgICAgICAgICBzaG93RmlsdGVyQnV0dG9uOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgZW5hYmxlZDogdHJ1ZVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBzdXNwZW5zaW9uOiB7XHJcbiAgICAgICAgICAgICAgICB0aXRsZTogc3RyaW5ncy5nZXRTdHJpbmcoJ2FkanVzdC1zdXNwZW5zaW9uJyksXHJcbiAgICAgICAgICAgICAgICBzaG93RmlsdGVyQnV0dG9uOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIGVuYWJsZWQ6IHRydWVcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBjb21wb25lbnRzOklDb21wb25lbnRbXTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBUaGUgSUQgb2YgdGhlIGN1cnJlbnRseSBkaXNwbGF5ZWQgdmVoaWNsZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHByaXZhdGUgdmVoaWNsZUNvbmZpZ3VyYXRpb25JRDpzdHJpbmc7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFRoZSBkZXNjcmlwdGlvbiBvZiB0aGUgY3VycmVudGx5IGRpc3BsYXllZCB2ZWhpY2xlXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHJpdmF0ZSB2ZWhpY2xlRGVzY3JpcHRpb246c3RyaW5nO1xyXG5cclxuICAgICAgICBwcml2YXRlIHZlaGljbGVTdXNwZW5zaW9uOnN0cmluZztcclxuXHJcbiAgICAgICAgcHJpdmF0ZSBpbWFnZVR5cGU6cmlkZXN0eWxlci5EYXRhT2JqZWN0cy5WZWhpY2xlUmVzb3VyY2VUeXBlO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBUaGUgSUQgb2YgdGhlIGN1cnJlbnRseSBkaXNwbGF5ZWQgT0UgdGlyZSBvcHRpb24gZm9yIHRoZSB2ZWhpY2xlXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHJpdmF0ZSB2ZWhpY2xlVGlyZU9wdGlvbklEOnN0cmluZztcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQSBkZXNjcmlwdGlvbiBvZiB0aGUgY3VycmVudGx5IHNlbGVjdGVkIE9FIHRpcmUgb3B0aW9uXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHJpdmF0ZSB2ZWhpY2xlVGlyZU9wdGlvbkRlc2NyaXB0aW9uOnN0cmluZztcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVGhlIGN1cnJlbnRseSBzZWxlY3RlZCBPRSB0aXJlIG9wdGlvblxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHByaXZhdGUgdmVoaWNsZVRpcmVPcHRpb246cmlkZXN0eWxlci5EZXNjcmlwdGlvbnMuVmVoaWNsZVRpcmVPcHRpb25EZXNjcmlwdGlvbk1vZGVsO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBUaGUgZGVzY3JpcHRpb24gbW9kZWwgb2YgdGhlIGN1cnJlbnRseSBkaXNwbGF5ZWQgdmVoaWNsZSxcclxuICAgICAgICAgKiBsb2FkZWQgZnJvbSB0aGUgQVBJXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHJpdmF0ZSB2ZWhpY2xlRGVzY3JpcHRpb25Nb2RlbDogcmlkZXN0eWxlci5EZXNjcmlwdGlvbnMuVmVoaWNsZURlc2NyaXB0aW9uTW9kZWw7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFRoZSByZW5kZXIgaW5zdHJ1Y3Rpb25zIGZvciB0aGUgY3VycmVudGx5IGRpc3BsYXllZCB2ZWhpY2xlXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHJpdmF0ZSBjdXJyZW50UmVuZGVySW5zdHJ1Y3Rpb25zOiByaWRlc3R5bGVyLlJlcXVlc3RzLlZlaGljbGVSZW5kZXJJbnN0cnVjdGlvbnM7XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBidWlsZENvbXBvbmVudChjb250YWluZXI6IEhUTUxFbGVtZW50KSB7XHJcbiAgICAgICAgICAgIC8vIFdhaXQgZm9yIGluaXRpYWxpemF0aW9uIGJlZm9yZSBjcmVhdGluZyB0aGUgdmlld3BvcnQgYmVjYXVzZSBpdCBkZXRlY3RzXHJcbiAgICAgICAgICAgIC8vIHRoZSBvZmZzZXQgcG9zaXRpb25pbmcgb2YgdGhlIHZpZXdwb3J0IGVsZW1lbnQgd2hlbiBjcmVhdGVkIGFuZCBvdXIgQ1NTXHJcbiAgICAgICAgICAgIC8vIGlzbid0IGd1YXJhbnRlZWQgdG8gYmUgbG9hZGVkIHVudGlsIHRoZSBpbml0aWFsaXplZCBldmVudFxyXG4gICAgICAgICAgICB0aGlzLmV2ZW50cy5vbignaW5pdGlhbGl6ZWQnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldHVwVmlld3BvcnQoY29udGFpbmVyKTtcclxuICAgICAgICAgICAgICAgIC8vIFNldHVwIGluaXRpYWwgdGFiIGxheW91dFxyXG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVUYWJMYXlvdXQoKTtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLmV2ZW50cy5vbigndmVoaWNsZS1zZWxlY3RlZCcsICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy52ZWhpY2xlRGlmZmVyZW50RnJvbVN0YXRlKCkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudmlld3BvcnQuUmVzZXQoKTtcclxuICAgICAgICAgICAgICAgIH0pXHJcblxyXG4gICAgICAgICAgICAgICAgLy8gSGlkZSB0aGUgc2hhcmUgYnV0dG9uIGlmIHNoYXJpbmcgaXMgZGlzYWJsZWRcclxuICAgICAgICAgICAgICAgIGlmICghdGhpcy5zaG93Y2FzZS5zZXR0aW5nc0Zyb21BUEkuRW5hYmxlU2hhcmluZylcclxuICAgICAgICAgICAgICAgICAgICBzaGFyZUJ1dHRvbi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBsZXQgY291bnRUaXJlQnJhbmRzID0gYXBpLnJlcXVlc3QoXCJ0aXJlL2NvdW50YnJhbmRzXCIsIHRoaXMuc2hvd2Nhc2UuZmlsdGVycy50aXJlRmlsdGVycy5nZXRGaWx0ZXJzKCkpO1xyXG4gICAgICAgICAgICAgICAgbGV0IGNvdW50V2hlZWxCcmFuZHMgPSBhcGkucmVxdWVzdChcIndoZWVsL2NvdW50YnJhbmRzXCIsIHRoaXMuc2hvd2Nhc2UuZmlsdGVycy53aGVlbEZpbHRlcnMuZ2V0RmlsdGVycygpKTtcclxuXHJcbiAgICAgICAgICAgICAgICBQcm9taXNlSGVscGVyLmFsbChbY291bnRUaXJlQnJhbmRzLCBjb3VudFdoZWVsQnJhbmRzXSkuZG9uZShyZXN1bHRzID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgdGlyZUJyYW5kQ291bnQgPSByZXN1bHRzWzBdLkNvdW50O1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCB3aGVlbEJyYW5kQ291bnQgPSByZXN1bHRzWzFdLkNvdW50O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoIXRpcmVCcmFuZENvdW50KSB0aGlzLmN1c3RvbWl6YXRpb25Db21wb25lbnRTZXR0aW5ncy50aXJlcy5lbmFibGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF3aGVlbEJyYW5kQ291bnQpIHRoaXMuY3VzdG9taXphdGlvbkNvbXBvbmVudFNldHRpbmdzLndoZWVscy5lbmFibGVkID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlVGFicygpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5zZXR1cFRhYnMoKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuY2hhbmdlV2hlZWxTaXplID0gbmV3IFJpZGVTdHlsZXJTaG93Y2FzZUNoYW5nZVdoZWVsU2l6ZSh0aGlzLnNob3djYXNlKTtcclxuICAgICAgICAgICAgdGhpcy5jaGFuZ2VXaGVlbFNpemUub3B0aW9uU2VsZWN0ZWRDYWxsYmFjayA9IG5ld09wdGlvbiA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLmV4dGVuZERhdGEoe1xyXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRXaGVlbEZpdG1lbnQ6IG5ld09wdGlvblxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVZpZXdwb3J0KHtcclxuICAgICAgICAgICAgICAgICAgICBXaGVlbEZpdG1lbnQ6IG5ld09wdGlvbi5XaGVlbEZpdG1lbnRJRFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMuY29tcG9uZW50cyA9IFtcclxuICAgICAgICAgICAgICAgIHRoaXMudmVoaWNsZURldGFpbHMgPSBuZXcgVmVoaWNsZURldGFpbHModGhpcy5zaG93Y2FzZSksXHJcbiAgICAgICAgICAgICAgICBuZXcgV2hlZWxEZXRhaWxzKHRoaXMuc2hvd2Nhc2UpLFxyXG4gICAgICAgICAgICAgICAgbmV3IFRpcmVEZXRhaWxzKHRoaXMuc2hvd2Nhc2UpLFxyXG4gICAgICAgICAgICAgICAgdGhpcy50YWJCYXIsXHJcbiAgICAgICAgICAgICAgICB0aGlzLmNoYW5nZVdoZWVsU2l6ZVxyXG4gICAgICAgICAgICBdO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5jdXN0b21pemF0aW9uQ29tcG9uZW50Q29udGFpbmVyID0gSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XHJcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IGN1c3RvbWl6YXRpb25zQ2xhc3MsXHJcbiAgICAgICAgICAgICAgICBhcHBlbmRUbzogdGhpcy5jb21wb25lbnRcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAvLyBBcHBlbmQgYW55IHN1YiBjb21wb25lbnRzXHJcbiAgICAgICAgICAgIGZvciAobGV0IGNvbXBvbmVudCBvZiB0aGlzLmNvbXBvbmVudHMpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY29tcG9uZW50LmFwcGVuZENoaWxkKGNvbXBvbmVudC5jb21wb25lbnQpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLnJvdGF0ZUVsZW1lbnQgPSBIVE1MSGVscGVyLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcclxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ3JpZGVzdHlsZXItc2hvd2Nhc2Utcm90YXRlLXZlaGljbGUnLFxyXG4gICAgICAgICAgICAgICAgYXBwZW5kVG86IHRoaXMuY29tcG9uZW50XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5yb3RhdGVFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zd2l0Y2hBbmdsZSgpO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIEhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCh7XHJcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdyaWRlc3R5bGVyLXNob3djYXNlLWN1c3RvbWl6YXRpb24tY29tcG9uZW50LXRpdGxlLWNvbnRhaW5lcicsXHJcbiAgICAgICAgICAgICAgICBhcHBlbmRUbzogdGhpcy5jb21wb25lbnQsXHJcbiAgICAgICAgICAgICAgICBhcHBlbmQ6IFtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnRpdGxlRWxlbWVudCA9IEhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ3JpZGVzdHlsZXItc2hvd2Nhc2UtY3VzdG9taXphdGlvbi1jb21wb25lbnQtdGl0bGUnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhcHBlbmRUbzogdGhpcy5jb21wb25lbnRcclxuICAgICAgICAgICAgICAgICAgICB9KSxcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmZpbHRlckJ1dHRvbiA9IEhUTUxIZWxwZXIuY3JlYXRlQnV0dG9uKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogc3RyaW5ncy5nZXRTdHJpbmcoJ2ZpbHRlci1yZXN1bHRzJyksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNraW5ueTogdHJ1ZVxyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICBdXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgdGhpcy5maWx0ZXJCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNob3dGaWx0ZXJzKCk7XHJcbiAgICAgICAgICAgIH0pXHJcblxyXG4gICAgICAgICAgICBsZXQgc2hhcmVCdXR0b24gPSBIVE1MSGVscGVyLmNyZWF0ZUJ1dHRvbih7XHJcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdyaWRlc3R5bGVyLXNoYXJlLW15LXZlaGljbGUtYnV0dG9uJyxcclxuICAgICAgICAgICAgICAgIHRleHQ6IHN0cmluZ3MuZ2V0U3RyaW5nKCdzaGFyZS1teS12ZWhpY2xlJyksXHJcbiAgICAgICAgICAgICAgICBhcHBlbmRUbzogdGhpcy5jb21wb25lbnQsXHJcbiAgICAgICAgICAgICAgICBzdHlsZToge1xyXG4gICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6ICcxJ1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGRpc2FibGVkOiB0cnVlXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgc2hhcmVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBuZXcgUmlkZVN0eWxlclNob3djYXNlU2hhcmVNb2RhbCh0aGlzLnNob3djYXNlLCB0aGlzLmN1cnJlbnRSZW5kZXJJbnN0cnVjdGlvbnMpLnNob3coKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnN0YXRlLmFmdGVyRGF0YUNoYW5nZShzdGF0ZURhdGEgPT4ge1xyXG4gICAgICAgICAgICAgICAgc2hhcmVCdXR0b24uZGlzYWJsZWQgPSBzdGF0ZURhdGEuY3VycmVudFdoZWVsID8gZmFsc2UgOiB0cnVlO1xyXG4gICAgICAgICAgICB9KVxyXG5cclxuICAgICAgICAgICAgLy8gU3RhcnQgbGlzdGVuaW5nIGZvciByZXNpemUgZXZlbnRzXHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRzLm9uKCdyZXNpemVkJywgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNWaXNpYmxlKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVZpZXdwb3J0KCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgLy8gU3RhcnQgbGlzdGVuaW5nIGZvciBicmVha3BvaW50IGNoYW5nZXNcclxuICAgICAgICAgICAgdGhpcy5ldmVudHMub24oJ2JyZWFrcG9pbnQtY2hhbmdlZCcsIG5ld0JyZWFrcG9pbnQgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVUYWJMYXlvdXQoKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnZlaGljbGVEZXRhaWxzLnBhaW50U3dhdGNoQ2xpY2tDYWxsYmFjayA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0QWN0aXZlQ3VzdG9taXphdGlvbkNvbXBvbmVudCh0aGlzLmN1c3RvbWl6YXRpb25Db21wb25lbnRzLnBhaW50KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBzZXR1cFZpZXdwb3J0KGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpIHtcclxuICAgICAgICAgICAgbGV0IHZpZXdwb3J0RWxlbWVudCA9IEhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCgnZGl2Jywge1xyXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAncmlkZXN0eWxlci1zaG93Y2FzZS12aWV3cG9ydCcsXHJcbiAgICAgICAgICAgICAgICBhcHBlbmRUbzogY29udGFpbmVyXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgdmlld3BvcnRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zd2l0Y2hBbmdsZSgpO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMudmlld3BvcnQgPSBuZXcgUmlkZVN0eWxlclZpZXdwb3J0KHZpZXdwb3J0RWxlbWVudCk7XHJcblxyXG4gICAgICAgICAgICAvL0xpc3RlbnMgZm9yIG5ldyBjYXIgc2VsZWN0aW9uIGFuZCBoaWRlcyB2ZWhpY2xlIGJldHdlZW4gdXBkYXRlc1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSB1cGRhdGVUYWJzKCkge1xyXG4gICAgICAgICAgICBsZXQgdGFiczpUYWJbXSA9IFtdO1xyXG5cclxuICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgb2YgdGhpcy5jdXN0b21pemF0aW9uQ29tcG9uZW50T3JkZXIpIHtcclxuICAgICAgICAgICAgICAgIC8vIFNraXAgZGlzYWJsZWQgY29tcG9uZW50c1xyXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLmN1c3RvbWl6YXRpb25Db21wb25lbnRTZXR0aW5nc1trZXldLmVuYWJsZWQpIGNvbnRpbnVlO1xyXG5cclxuICAgICAgICAgICAgICAgIHRhYnMucHVzaCh0aGlzLnRhYnNba2V5XSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMudGFiQmFyLnNldFRhYnModGFicyk7XHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlVGFiTGF5b3V0KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIHVwZGF0ZVRhYkxheW91dCgpIHtcclxuICAgICAgICAgICAgY29uc3QgY3VycmVudEJyZWFrcG9pbnQgPSB0aGlzLnNob3djYXNlLnN0eWxlLmdldEN1cnJlbnRCcmVha3BvaW50KCk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBob3Jpem9udGFsOmJvb2xlYW4gPSBjdXJyZW50QnJlYWtwb2ludCAmJiBjdXJyZW50QnJlYWtwb2ludFswXSA9PT0gJ3Bob25lLXBvcnRyYWl0JztcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHRoaXMudGFiQmFyLnNldE1vZGUoaG9yaXpvbnRhbCA/ICdob3Jpem9udGFsJyA6ICd2ZXJ0aWNhbCcpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBzZXR1cFRhYnMoKSB7XHJcbiAgICAgICAgICAgIHRoaXMudGFiQmFyICA9IG5ldyBSaWRlU3R5bGVyU2hvd2Nhc2VUYWJCYXIodGhpcy5zaG93Y2FzZSk7XHJcblxyXG4gICAgICAgICAgICAvLyBEZWZpbmUgb3VyIHRhYnNcclxuICAgICAgICAgICAgdGhpcy50YWJzID0ge1xyXG4gICAgICAgICAgICAgICAgcGFpbnQ6IG5ldyBSaWRlU3R5bGVyU2hvd2Nhc2VUYWJCYXIuVGFiKHtcclxuICAgICAgICAgICAgICAgICAgICBpY29uOiAncGFpbnQnLFxyXG4gICAgICAgICAgICAgICAgICAgIGtleTogJ3BhaW50JyxcclxuICAgICAgICAgICAgICAgICAgICBsYWJlbDogc3RyaW5ncy5nZXRTdHJpbmcoJ3BhaW50JylcclxuICAgICAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICAgICAgd2hlZWxzOiBuZXcgUmlkZVN0eWxlclNob3djYXNlVGFiQmFyLlRhYih7XHJcbiAgICAgICAgICAgICAgICAgICAgaWNvbjogJ3doZWVsJyxcclxuICAgICAgICAgICAgICAgICAgICBrZXk6ICd3aGVlbHMnLFxyXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsOiBzdHJpbmdzLmdldFN0cmluZygnd2hlZWxzJylcclxuICAgICAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICAgICAgdGlyZXM6IG5ldyBSaWRlU3R5bGVyU2hvd2Nhc2VUYWJCYXIuVGFiKHtcclxuICAgICAgICAgICAgICAgICAgICBpY29uOiAndGlyZScsXHJcbiAgICAgICAgICAgICAgICAgICAga2V5OiAndGlyZXMnLFxyXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsOiBzdHJpbmdzLmdldFN0cmluZygndGlyZXMnKVxyXG4gICAgICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICAgICAgICBzdXNwZW5zaW9uOiBuZXcgUmlkZVN0eWxlclNob3djYXNlVGFiQmFyLlRhYih7XHJcbiAgICAgICAgICAgICAgICAgICAgaWNvbjogJ3N1c3BlbnNpb24nLFxyXG4gICAgICAgICAgICAgICAgICAgIGtleTogJ3N1c3BlbnNpb24nLFxyXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsOiBzdHJpbmdzLmdldFN0cmluZygnc3VzcGVuc2lvbicpXHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgLy8gU3dpdGNoIHRoZSBib3R0b20gdmlldywgdGhlIGN1c3RvbWl6YXRpb24gY29tcG9uZW50IHdoZW4gYSB0YWIgaXMgY2xpY2tlZCBvblxyXG4gICAgICAgICAgICB0aGlzLnRhYkJhci50YWJTd2l0Y2hlZENhbGxiYWNrID0gZSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBuZXdUYWIgPSBlLm5ld1RhYjtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGtleSA9IG5ld1RhYi5rZXk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmN1c3RvbWl6YXRpb25Db21wb25lbnRzICYmIGtleSBpbiB0aGlzLmN1c3RvbWl6YXRpb25Db21wb25lbnRzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRBY3RpdmVDdXN0b21pemF0aW9uQ29tcG9uZW50KHRoaXMuY3VzdG9taXphdGlvbkNvbXBvbmVudHNba2V5XSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIHZlaGljbGVEaWZmZXJlbnRGcm9tU3RhdGUoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgICAgIGxldCBzdGF0ZURhdGEgPSB0aGlzLnN0YXRlLmdldERhdGEoKTtcclxuICAgICAgICAgICAgaWYgKCFzdGF0ZURhdGEuY3VycmVudFZlaGljbGVDb25maWd1cmF0aW9uSUQgfHwgIXN0YXRlRGF0YS5jdXJyZW50VmVoaWNsZVRpcmVPcHRpb25JRCkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignVHJ5aW5nIHRvIHNob3cgdGhlIHZpc3VhbGl6ZSBzY3JlZW4gd2l0aG91dCBhIHZlaGljbGUgY29uZmlndXJhdGlvbiBvciB0aXJlIG9wdGlvbi4nKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgbGV0IHZlaGljbGVDaGFuZ2VkID0gIUdVSURIZWxwZXIuYXJlRXF1YWwoc3RhdGVEYXRhLmN1cnJlbnRWZWhpY2xlQ29uZmlndXJhdGlvbklELCB0aGlzLnZlaGljbGVDb25maWd1cmF0aW9uSUQpO1xyXG4gICAgICAgICAgICBsZXQgdGlyZU9wdGlvbkNoYW5nZWQgPSAhR1VJREhlbHBlci5hcmVFcXVhbChzdGF0ZURhdGEuY3VycmVudFZlaGljbGVUaXJlT3B0aW9uSUQsIHRoaXMudmVoaWNsZVRpcmVPcHRpb25JRCk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdmVoaWNsZUNoYW5nZWQgfHwgdGlyZU9wdGlvbkNoYW5nZWQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgb25EaXNwbGF5KCkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy52ZWhpY2xlRGlmZmVyZW50RnJvbVN0YXRlKCkpIHtcclxuICAgICAgICAgICAgICAgIGxldCBzdGF0ZURhdGEgPSB0aGlzLnN0YXRlLmdldERhdGEoKTtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLnZlaGljbGVDb25maWd1cmF0aW9uSUQgPSBzdGF0ZURhdGEuY3VycmVudFZlaGljbGVDb25maWd1cmF0aW9uSURcclxuICAgICAgICAgICAgICAgIHRoaXMudmVoaWNsZURlc2NyaXB0aW9uID0gc3RhdGVEYXRhLmN1cnJlbnRWZWhpY2xlRGVzY3JpcHRpb247ICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgdGhpcy52ZWhpY2xlVGlyZU9wdGlvbklEID0gc3RhdGVEYXRhLmN1cnJlbnRWZWhpY2xlVGlyZU9wdGlvbklEO1xyXG4gICAgICAgICAgICAgICAgdGhpcy52ZWhpY2xlVGlyZU9wdGlvbkRlc2NyaXB0aW9uID0gc3RhdGVEYXRhLmN1cnJlbnRWZWhpY2xlVGlyZU9wdGlvbkRlc2NyaXB0aW9uO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICB0aGlzLnRhYkJhci5jbGVhckFjdGl2ZVRhYigpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vblZlaGljbGVDaGFuZ2VkKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgb25WZWhpY2xlQ2hhbmdlZCgpIHtcclxuICAgICAgICAgICAgSFRNTEhlbHBlci5lbXB0eSh0aGlzLmN1c3RvbWl6YXRpb25Db21wb25lbnRDb250YWluZXIpO1xyXG5cclxuICAgICAgICAgICAgLy8gU2V0IHRoZSBjdXN0b21pemF0aW9uIGNvbnRhaW5lciBhcyBsb2FkaW5nIHdoaWxlIHdlJ3JlIGxvYWRpbmcgYWRkaXRpb25hbCBpbmZvcm1hdGlvblxyXG4gICAgICAgICAgICAvLyBhYm91dCB0aGUgdmVoaWNsZVxyXG4gICAgICAgICAgICB0aGlzLmN1c3RvbWl6YXRpb25Db21wb25lbnRDb250YWluZXIuY2xhc3NMaXN0LmFkZChsb2FkaW5nQ2xhc3MpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgdGhpcy51cGRhdGVUYWJzKCk7XHJcblxyXG4gICAgICAgICAgICAvLyBEZXNlbGVjdCBhbnkgYWN0aXZlIHRhYlxyXG4gICAgICAgICAgICB0aGlzLnRhYkJhci5jbGVhckFjdGl2ZVRhYigpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5yb3RhdGVFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2luJyk7XHJcblxyXG4gICAgICAgICAgICAvLyBMb2FkIHRoZSB2ZWhpY2xlJ3MgZGVzY3JpcHRpb24gbW9kZWxcclxuICAgICAgICAgICAgbGV0IGdldFZlaGljbGVEZXNjcmlwdGlvbiA9IGFwaS5yZXF1ZXN0KFwidmVoaWNsZS9nZXRkZXNjcmlwdGlvbnNcIiwge1xyXG4gICAgICAgICAgICAgICAgQ291bnQ6IDEsXHJcbiAgICAgICAgICAgICAgICBWZWhpY2xlQ29uZmlndXJhdGlvbjogdGhpcy52ZWhpY2xlQ29uZmlndXJhdGlvbklEXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgbGV0IGdldFZlaGljbGVUaXJlT3B0aW9uID0gYXBpLnJlcXVlc3QoJ3ZlaGljbGUvZ2V0dGlyZW9wdGlvbmRldGFpbHMnLCB7XHJcbiAgICAgICAgICAgICAgICBWZWhpY2xlQ29uZmlndXJhdGlvbjogdGhpcy52ZWhpY2xlQ29uZmlndXJhdGlvbklEXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgUHJvbWlzZUhlbHBlci5hbGwoW2dldFZlaGljbGVEZXNjcmlwdGlvbiwgZ2V0VmVoaWNsZVRpcmVPcHRpb25dKS5kb25lKHJlc3BvbnNlcyA9PiB7XHJcbiAgICAgICAgICAgICAgICBsZXQgdmVoaWNsZURlc2NyaXB0aW9uID0gdGhpcy52ZWhpY2xlRGVzY3JpcHRpb25Nb2RlbCA9IHJlc3BvbnNlc1swXS5EZXNjcmlwdGlvbnNbMF07XHJcbiAgICAgICAgICAgICAgICBsZXQgdmVoaWNsZVRpcmVPcHRpb246cmlkZXN0eWxlci5EZXNjcmlwdGlvbnMuVmVoaWNsZVRpcmVPcHRpb25EZXNjcmlwdGlvbk1vZGVsO1xyXG4gICAgICAgICAgICAgICAgbGV0IHNlbGVjdGVkVGlyZU9wdGlvbklEOkd1aWQgPSBHVUlESGVscGVyLnBhcnNlKHRoaXMudmVoaWNsZVRpcmVPcHRpb25JRCk7XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgdGlyZU9wdGlvbiBvZiByZXNwb25zZXNbMV0uRGV0YWlscykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChHVUlESGVscGVyLmFyZUVxdWFsKHRpcmVPcHRpb24uVGlyZU9wdGlvbklELCBzZWxlY3RlZFRpcmVPcHRpb25JRCkpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2ZWhpY2xlVGlyZU9wdGlvbiA9IHRpcmVPcHRpb247XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLnZlaGljbGVUaXJlT3B0aW9uID0gdmVoaWNsZVRpcmVPcHRpb247XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5leHRlbmREYXRhKHtcclxuICAgICAgICAgICAgICAgICAgICB2ZWhpY2xlSGFzQW5nbGVkSW1hZ2U6IHZlaGljbGVEZXNjcmlwdGlvbi5IYXNBbmdsZWRJbWFnZSxcclxuICAgICAgICAgICAgICAgICAgICB2ZWhpY2xlSGFzU2lkZUltYWdlOiB2ZWhpY2xlRGVzY3JpcHRpb24uSGFzU2lkZUltYWdlLFxyXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRUaXJlT3B0aW9uOiB2ZWhpY2xlVGlyZU9wdGlvbixcclxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50VmVoaWNsZURlc2NyaXB0aW9uTW9kZWw6IHZlaGljbGVEZXNjcmlwdGlvbixcclxuXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHRoaXMuaW5pdGlhbGl6ZUZvck5ld1ZlaGljbGUoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGluaXRpYWxpemVGb3JOZXdWZWhpY2xlKCkge1xyXG4gICAgICAgICAgICB0aGlzLmV2ZW50cy50cmlnZ2VyKFwidmVoaWNsZS1kZXNjcmlwdGlvbi1sb2FkZWRcIiwgdGhpcy52ZWhpY2xlRGVzY3JpcHRpb25Nb2RlbCk7XHJcbiAgICAgICAgICAgIHRoaXMuY3VycmVudFJlbmRlckluc3RydWN0aW9ucyA9IHt9O1xyXG4gICAgICAgICAgICB0aGlzLnRhYkJhci5zZXRBY3RpdmVUYWIodGhpcy50YWJzLnBhaW50KTtcclxuICAgICAgICAgICAgdGhpcy52aWV3cG9ydC5SZXNldCgpO1xyXG5cclxuICAgICAgICAgICAgLy8gQ3JlYXRlIHRoZSBjb21wb25lbnRzIHRoYXQgd2lsbCBiZSBzd2l0Y2hlZCB3aXRoIHRoZSB0YWJzXHJcbiAgICAgICAgICAgIHRoaXMuY3VzdG9taXphdGlvbkNvbXBvbmVudHMgPSB7XHJcbiAgICAgICAgICAgICAgICBwYWludDogbmV3IFJpZGVTdHlsZXJTaG93Y2FzZVBhaW50U2VsZWN0b3IodGhpcy5zaG93Y2FzZSksXHJcbiAgICAgICAgICAgICAgICB3aGVlbHM6IG5ldyBSaWRlU3R5bGVyU2hvd2Nhc2VXaGVlbFNlbGVjdG9yKHRoaXMuc2hvd2Nhc2UpLFxyXG4gICAgICAgICAgICAgICAgdGlyZXM6IG5ldyBSaWRlU3R5bGVyU2hvd2Nhc2VUaXJlU2VsZWN0b3IodGhpcy5zaG93Y2FzZSksXHJcbiAgICAgICAgICAgICAgICBzdXNwZW5zaW9uOiBuZXcgUmlkZVN0eWxlclNob3djYXNlU3VzcGVuc2lvblNlbGVjdG9yKHRoaXMuc2hvd2Nhc2UpXHJcbiAgICAgICAgICAgIH07XHJcblxyXG5cclxuICAgICAgICAgICAgdGhpcy5jdXN0b21pemF0aW9uQ29tcG9uZW50cy53aGVlbHMuc2V0RmlsdGVycyh0aGlzLnNob3djYXNlLmZpbHRlcnMud2hlZWxGaWx0ZXJzLmdldEZpbHRlcnMoKSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnNob3djYXNlLmZpbHRlcnMud2hlZWxGaWx0ZXJzLm9uRmlsdGVyc0NoYW5nZWQgPSBmaWx0ZXJzID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY3VzdG9taXphdGlvbkNvbXBvbmVudHMud2hlZWxzLnNldEZpbHRlcnMoZmlsdGVycyk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB0aGlzLnNob3djYXNlLmZpbHRlcnMudGlyZUZpbHRlcnMub25GaWx0ZXJzQ2hhbmdlZCA9IGZpbHRlcnMgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jdXN0b21pemF0aW9uQ29tcG9uZW50cy50aXJlcy5zZXRGaWx0ZXJzKGZpbHRlcnMpO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgdGhpcy5jdXN0b21pemF0aW9uQ29tcG9uZW50cy5wYWludC5vblBhaW50U2NoZW1lU2VsZWN0ZWQgPSBwYWludFNjaGVtZSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmN1c3RvbWl6YXRpb25Db21wb25lbnRzLnBhaW50LnNldE9wdGlvbklzTG9hZGluZyh0cnVlKTtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVZpZXdwb3J0KHtcclxuICAgICAgICAgICAgICAgICAgICBQYWludENvbG9yOiBwYWludFNjaGVtZS5Db2xvcnNbMF0uSGV4XHJcbiAgICAgICAgICAgICAgICB9KS5hbHdheXMoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY3VzdG9taXphdGlvbkNvbXBvbmVudHMucGFpbnQuc2V0T3B0aW9uSXNMb2FkaW5nKGZhbHNlKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgdGhpcy5jdXN0b21pemF0aW9uQ29tcG9uZW50cy53aGVlbHMucHJvZHVjdFNlbGVjdGVkQ2FsbGJhY2sgPSBtb2RlbCA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmN1c3RvbWl6YXRpb25Db21wb25lbnRzLndoZWVscy5zZXRPcHRpb25Jc0xvYWRpbmcodHJ1ZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgY2FuUmVuZGVyT25DdXJyZW50QW5nbGUgPVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaW1hZ2VUeXBlID09PSByaWRlc3R5bGVyLkRhdGFPYmplY3RzLlZlaGljbGVSZXNvdXJjZVR5cGUuQW5nbGUgJiYgbW9kZWwuSGFzQW5nbGVJbWFnZSB8fFxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaW1hZ2VUeXBlID09PSByaWRlc3R5bGVyLkRhdGFPYmplY3RzLlZlaGljbGVSZXNvdXJjZVR5cGUuU2lkZSAmJiBtb2RlbC5IYXNTaWRlSW1hZ2U7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWNhblJlbmRlck9uQ3VycmVudEFuZ2xlKSB0aGlzLnN3aXRjaEFuZ2xlKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgYXBpLnJlcXVlc3QoJ3doZWVsL2dldGZpdG1lbnRkZXNjcmlwdGlvbnMnLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgVmVoaWNsZUNvbmZpZ3VyYXRpb246IHRoaXMudmVoaWNsZUNvbmZpZ3VyYXRpb25JRCxcclxuICAgICAgICAgICAgICAgICAgICBXaGVlbE1vZGVsOiBtb2RlbC5XaGVlbE1vZGVsSUQsXHJcbiAgICAgICAgICAgICAgICAgICAgSW5jbHVkZVByaWNpbmc6IHRydWVcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgLmRvbmUocmVzcG9uc2UgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgZml0bWVudHM6cmlkZXN0eWxlci5EZXNjcmlwdGlvbnMuV2hlZWxGaXRtZW50RGVzY3JpcHRpb25Nb2RlbFtdID0gcmVzcG9uc2UuRml0bWVudHM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBiZXN0Rml0bWVudDpyaWRlc3R5bGVyLkRlc2NyaXB0aW9ucy5XaGVlbEZpdG1lbnREZXNjcmlwdGlvbk1vZGVsID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgdGFyZ2V0RGlhbWV0ZXIgPSB0aGlzLnZlaGljbGVUaXJlT3B0aW9uLkZyb250Lkluc2lkZURpYW1ldGVyO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgbW9kZWwuV2hlZWxGaXRtZW50cyA9IGZpdG1lbnRzO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgZml0bWVudHMuc29ydChmdW5jdGlvbiAoYSxiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhRGlmZiA9IE1hdGguYWJzKGEuRGlhbWV0ZXJNaW4gLSB0YXJnZXREaWFtZXRlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBiRGlmZiA9IE1hdGguYWJzKGIuRGlhbWV0ZXJNaW4gLSB0YXJnZXREaWFtZXRlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhRGlmZiAtIGJEaWZmO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJlc3RGaXRtZW50ID0gZml0bWVudHNbMF07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLmV4dGVuZERhdGEoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFdoZWVsOiBtb2RlbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRXaGVlbEZpdG1lbnQ6IGJlc3RGaXRtZW50XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGFuZ2VXaGVlbFNpemUuc2V0Rml0bWVudE9wdGlvbnMoZml0bWVudHMsIGJlc3RGaXRtZW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGFuZ2VXaGVlbFNpemUuY29tcG9uZW50LnN0eWxlLmRpc3BsYXkgPSAnJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVWaWV3cG9ydCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBXaGVlbEZpdG1lbnQ6IGJlc3RGaXRtZW50LldoZWVsRml0bWVudElEXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pLmFsd2F5cygoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmN1c3RvbWl6YXRpb25Db21wb25lbnRzLndoZWVscy5zZXRPcHRpb25Jc0xvYWRpbmcoZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgIC5mYWlsKCgpID0+IHRoaXMuY3VzdG9taXphdGlvbkNvbXBvbmVudHMud2hlZWxzLnNldE9wdGlvbklzTG9hZGluZyhmYWxzZSkpO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgdGhpcy5jdXN0b21pemF0aW9uQ29tcG9uZW50cy50aXJlcy5wcm9kdWN0U2VsZWN0ZWRDYWxsYmFjayA9IG1vZGVsID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUuZXh0ZW5kRGF0YSh7XHJcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudFRpcmU6IG1vZGVsXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuY3VzdG9taXphdGlvbkNvbXBvbmVudHMuc3VzcGVuc2lvbi5zdXNwZW5zaW9uQ2hhbmdlQ2FsbGJhY2sgPSByZW5kZXJVcGRhdGUgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVWaWV3cG9ydChyZW5kZXJVcGRhdGUpO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgdGhpcy5zZXRBY3RpdmVDdXN0b21pemF0aW9uQ29tcG9uZW50KHRoaXMuY3VzdG9taXphdGlvbkNvbXBvbmVudHMud2hlZWxzKTtcclxuXHJcbiAgICAgICAgICAgIGZvciAobGV0IGN1c3RvbWl6YXRpb25Db21wb25lbnQgb2YgT2JqZWN0SGVscGVyLmdldFZhbHVlczxJQ29tcG9uZW50Pih0aGlzLmN1c3RvbWl6YXRpb25Db21wb25lbnRzKSkge1xyXG4gICAgICAgICAgICAgICAgY3VzdG9taXphdGlvbkNvbXBvbmVudC5jb21wb25lbnQuY2xhc3NMaXN0LmFkZCgncmlkZXN0eWxlci1zaG93Y2FzZS1jdXN0b21pemF0aW9uLWNvbXBvbmVudCcpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jdXN0b21pemF0aW9uQ29tcG9uZW50Q29udGFpbmVyLmFwcGVuZENoaWxkKGN1c3RvbWl6YXRpb25Db21wb25lbnQuY29tcG9uZW50KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5pbWFnZVR5cGUgPSByaWRlc3R5bGVyLkRhdGFPYmplY3RzLlZlaGljbGVSZXNvdXJjZVR5cGUuQW5nbGU7XHJcblxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKCF0aGlzLnZlaGljbGVEZXNjcmlwdGlvbk1vZGVsLkhhc0FuZ2xlZEltYWdlKSB0aGlzLmltYWdlVHlwZSA9IHJpZGVzdHlsZXIuRGF0YU9iamVjdHMuVmVoaWNsZVJlc291cmNlVHlwZS5TaWRlO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5yb3RhdGVFbGVtZW50LnN0eWxlLmRpc3BsYXkgPSB0aGlzLmNhblN3aXRjaEFuZ2xlKCkgPyAnJyA6ICdub25lJztcclxuXHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlVmlld3BvcnQoeyBcclxuICAgICAgICAgICAgICAgIFZlaGljbGVDb25maWd1cmF0aW9uOiB0aGlzLnZlaGljbGVDb25maWd1cmF0aW9uSUQsXHJcbiAgICAgICAgICAgICAgICBWZWhpY2xlVGlyZU9wdGlvbjogdGhpcy52ZWhpY2xlVGlyZU9wdGlvbklELFxyXG4gICAgICAgICAgICAgICAgUG9zaXRpb25YOiByaWRlc3R5bGVyLlJlcXVlc3RzLkltYWdlUG9zaXRpb24uQ2VudGVyLFxyXG4gICAgICAgICAgICAgICAgUG9zaXRpb25ZOiByaWRlc3R5bGVyLlJlcXVlc3RzLkltYWdlUG9zaXRpb24uRmFyLFxyXG4gICAgICAgICAgICAgICAgVHlwZTogdGhpcy5pbWFnZVR5cGVcclxuICAgICAgICAgICAgfSkuZG9uZSgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJvdGF0ZUVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnaW4nKTtcclxuICAgICAgICAgICAgfSlcclxuXHJcbiAgICAgICAgICAgIHRoaXMuY3VzdG9taXphdGlvbkNvbXBvbmVudENvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKGxvYWRpbmdDbGFzcyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGFjdGl2ZUN1c3RvbWl6YXRpb25Db21wb25lbnQ6SUNvbXBvbmVudDtcclxuICAgICAgICBwcml2YXRlIHNldEFjdGl2ZUN1c3RvbWl6YXRpb25Db21wb25lbnQoY3VzdG9taXphdGlvbkNvbXBvbmVudDpJQ29tcG9uZW50KSB7XHJcbiAgICAgICAgICAgIGxldCBzdGF0ZURhdGEgPSB0aGlzLnN0YXRlLmdldERhdGEoKTtcclxuICAgICAgICAgICAgbGV0IGNvbXBvbmVudEtleTpzdHJpbmcgPSB0aGlzLmdldENvbXBvbmVudEtleShjdXN0b21pemF0aW9uQ29tcG9uZW50KTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGxldCBzZXR0aW5nczpDdXN0b21pemF0aW9uQ29tcG9uZW50U2V0dGluZ3MgPSB0aGlzLmN1c3RvbWl6YXRpb25Db21wb25lbnRTZXR0aW5nc1tjb21wb25lbnRLZXldO1xyXG4gICAgICAgICAgICBsZXQgdGFiOlJpZGVTdHlsZXJTaG93Y2FzZVRhYkJhci5UYWIgPSB0aGlzLnRhYnNbY29tcG9uZW50S2V5XTtcclxuXHJcbiAgICAgICAgICAgIGlmICh0YWIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudGFiQmFyLnNldEFjdGl2ZVRhYih0YWIpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5hY3RpdmVDdXN0b21pemF0aW9uQ29tcG9uZW50KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFjdGl2ZUN1c3RvbWl6YXRpb25Db21wb25lbnQuY29tcG9uZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2luJyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGN1c3RvbWl6YXRpb25Db21wb25lbnQuY29tcG9uZW50LmNsYXNzTGlzdC5hZGQoJ2luJyk7XHJcbiAgICAgICAgICAgIHRoaXMuYWN0aXZlQ3VzdG9taXphdGlvbkNvbXBvbmVudCA9IGN1c3RvbWl6YXRpb25Db21wb25lbnQ7XHJcblxyXG4gICAgICAgICAgICBpZiAodHlwZW9mIChjdXN0b21pemF0aW9uQ29tcG9uZW50IGFzIFJpZGVTdHlsZXJTaG93Y2FzZVBhZ2luYXRpb25Db21wb25lbnQpLnVwZGF0ZSA9PT0gJ2Z1bmN0aW9uJylcclxuICAgICAgICAgICAgICAgIChjdXN0b21pemF0aW9uQ29tcG9uZW50IGFzIFJpZGVTdHlsZXJTaG93Y2FzZVBhZ2luYXRpb25Db21wb25lbnQpLnVwZGF0ZSgpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5jaGFuZ2VXaGVlbFNpemUuY29tcG9uZW50LnN0eWxlLmRpc3BsYXkgPSBcclxuICAgICAgICAgICAgICAgIGN1c3RvbWl6YXRpb25Db21wb25lbnQgaW5zdGFuY2VvZiBSaWRlU3R5bGVyU2hvd2Nhc2VXaGVlbFNlbGVjdG9yICYmIHN0YXRlRGF0YS5jdXJyZW50V2hlZWwgPyBcclxuICAgICAgICAgICAgICAgICcnIDogJ25vbmUnO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5maWx0ZXJCdXR0b24uc3R5bGUuZGlzcGxheSA9IHNldHRpbmdzLnNob3dGaWx0ZXJCdXR0b24gPyAnJyA6ICdub25lJztcclxuXHJcbiAgICAgICAgICAgIEhUTUxIZWxwZXIuc2V0VGV4dCh0aGlzLnRpdGxlRWxlbWVudCwgc2V0dGluZ3MudGl0bGUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBnZXRDb21wb25lbnRLZXkoY3VzdG9taXphdGlvbkNvbXBvbmVudDpJQ29tcG9uZW50KTpzdHJpbmcge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBrZXkgaW4gdGhpcy5jdXN0b21pemF0aW9uQ29tcG9uZW50cykge1xyXG4gICAgICAgICAgICAgICAgbGV0IGNvbXBvbmVudCA9IHRoaXMuY3VzdG9taXphdGlvbkNvbXBvbmVudHNba2V5XTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoY29tcG9uZW50ID09PSBjdXN0b21pemF0aW9uQ29tcG9uZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGtleTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSB1cGRhdGVWaWV3cG9ydChpbnN0cnVjdGlvbnM/OnJpZGVzdHlsZXIuUmVxdWVzdHMuVmVoaWNsZVJlbmRlckluc3RydWN0aW9ucykge1xyXG4gICAgICAgICAgICBPYmplY3QuYXNzaWduKHRoaXMuY3VycmVudFJlbmRlckluc3RydWN0aW9ucywgaW5zdHJ1Y3Rpb25zKTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMudmlld3BvcnQuVXBkYXRlKGluc3RydWN0aW9ucyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGNhblN3aXRjaEFuZ2xlKCk6Ym9vbGVhbiB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnZlaGljbGVEZXNjcmlwdGlvbk1vZGVsLkhhc0FuZ2xlZEltYWdlICYmIHRoaXMudmVoaWNsZURlc2NyaXB0aW9uTW9kZWwuSGFzU2lkZUltYWdlIDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgc2hvd0ZpbHRlcnMoKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGFjdGl2ZUN1c3RvbWl6YXRpb25Db21wb25lbnQgPSB0aGlzLmFjdGl2ZUN1c3RvbWl6YXRpb25Db21wb25lbnQ7XHJcbiAgICAgICAgICAgIGxldCBmaWx0ZXJNb2RhbDpSaWRlU3R5bGVyU2hvd2Nhc2VGaWx0ZXJNb2RhbDxhbnksIGFueT47XHJcblxyXG4gICAgICAgICAgICBpZiAoYWN0aXZlQ3VzdG9taXphdGlvbkNvbXBvbmVudCA9PT0gdGhpcy5jdXN0b21pemF0aW9uQ29tcG9uZW50cy50aXJlcykge1xyXG4gICAgICAgICAgICAgICAgZmlsdGVyTW9kYWwgPSBuZXcgUmlkZVN0eWxlclNob3djYXNlRmlsdGVyTW9kYWwodGhpcy5zaG93Y2FzZSwge1xyXG4gICAgICAgICAgICAgICAgICAgIGZpbHRlclByb3ZpZGVyOiB0aGlzLnNob3djYXNlLmZpbHRlcnMudGlyZUZpbHRlcnMsXHJcbiAgICAgICAgICAgICAgICAgICAgc2hvd0NvdW50VGV4dEZvcm1hdDogc3RyaW5ncy5nZXRTdHJpbmcoJ3Nob3ctY291bnQtZm9ybWF0LXRpcmVzJylcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGFjdGl2ZUN1c3RvbWl6YXRpb25Db21wb25lbnQgPT09IHRoaXMuY3VzdG9taXphdGlvbkNvbXBvbmVudHMud2hlZWxzKSB7XHJcbiAgICAgICAgICAgICAgICBmaWx0ZXJNb2RhbCA9IG5ldyBSaWRlU3R5bGVyU2hvd2Nhc2VGaWx0ZXJNb2RhbCh0aGlzLnNob3djYXNlLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgZmlsdGVyUHJvdmlkZXI6IHRoaXMuc2hvd2Nhc2UuZmlsdGVycy53aGVlbEZpbHRlcnMsXHJcbiAgICAgICAgICAgICAgICAgICAgc2hvd0NvdW50VGV4dEZvcm1hdDogc3RyaW5ncy5nZXRTdHJpbmcoJ3Nob3ctY291bnQtZm9ybWF0LXdoZWVscycpXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKGZpbHRlck1vZGFsKSB7XHJcbiAgICAgICAgICAgICAgICBmaWx0ZXJNb2RhbC5zaG93KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgc3dpdGNoQW5nbGUoKSB7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5jYW5Td2l0Y2hBbmdsZSgpIHx8IHRoaXMuc3RhdGUuZ2V0RGF0YSgpLmN1cnJlbnRXaGVlbC5IYXNTaWRlSW1hZ2UgPT09IGZhbHNlKSByZXR1cm47XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5pbWFnZVR5cGUgPT09IHJpZGVzdHlsZXIuRGF0YU9iamVjdHMuVmVoaWNsZVJlc291cmNlVHlwZS5BbmdsZSkge1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuaW1hZ2VUeXBlID0gcmlkZXN0eWxlci5EYXRhT2JqZWN0cy5WZWhpY2xlUmVzb3VyY2VUeXBlLlNpZGU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgdGhpcy5pbWFnZVR5cGUgPSByaWRlc3R5bGVyLkRhdGFPYmplY3RzLlZlaGljbGVSZXNvdXJjZVR5cGUuQW5nbGU7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVZpZXdwb3J0KHtcclxuICAgICAgICAgICAgICAgIFR5cGU6IHRoaXMuaW1hZ2VUeXBlXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcblxyXG4gICAgaW50ZXJmYWNlIEN1c3RvbWl6YXRpb25Db21wb25lbnRTZXR0aW5ncyB7XHJcbiAgICAgICAgdGl0bGU6c3RyaW5nO1xyXG4gICAgICAgIHNob3dGaWx0ZXJCdXR0b246IGJvb2xlYW47XHJcbiAgICAgICAgZW5hYmxlZDogYm9vbGVhbjtcclxuICAgIH1cclxufSIsInZhciBSaWRlU3R5bGVyU2hvd2Nhc2U7XG4oZnVuY3Rpb24gKFJpZGVTdHlsZXJTaG93Y2FzZSkge1xuICAgIGNvbnN0IGN1c3RvbWl6YXRpb25zQ2xhc3MgPSAncmlkZXN0eWxlci1zaG93Y2FzZS1jdXN0b21pemF0aW9ucyc7XG4gICAgY29uc3QgbG9hZGluZ0NsYXNzID0gY3VzdG9taXphdGlvbnNDbGFzcyArICctbG9hZGluZyc7XG4gICAgY2xhc3MgUmlkZVN0eWxlclNob3djYXNlVmVoaWNsZVZpc3VhbGl6YXRpb24gZXh0ZW5kcyBSaWRlU3R5bGVyU2hvd2Nhc2UuTWFpbkNvbXBvbmVudEJhc2Uge1xuICAgICAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgICAgICB0aGlzLmN1c3RvbWl6YXRpb25Db21wb25lbnRPcmRlciA9IFsncGFpbnQnLCAnd2hlZWxzJywgJ3RpcmVzJywgJ3N1c3BlbnNpb24nXTtcbiAgICAgICAgICAgIHRoaXMuY3VzdG9taXphdGlvbkNvbXBvbmVudFNldHRpbmdzID0ge1xuICAgICAgICAgICAgICAgIHBhaW50OiB7XG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiBSaWRlU3R5bGVyU2hvd2Nhc2Uuc3RyaW5ncy5nZXRTdHJpbmcoJ3NlbGVjdC1wYWludCcpLFxuICAgICAgICAgICAgICAgICAgICBzaG93RmlsdGVyQnV0dG9uOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgZW5hYmxlZDogdHJ1ZVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgd2hlZWxzOiB7XG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiBSaWRlU3R5bGVyU2hvd2Nhc2Uuc3RyaW5ncy5nZXRTdHJpbmcoJ3NlbGVjdC13aGVlbHMnKSxcbiAgICAgICAgICAgICAgICAgICAgc2hvd0ZpbHRlckJ1dHRvbjogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgZW5hYmxlZDogdHJ1ZVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgdGlyZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IFJpZGVTdHlsZXJTaG93Y2FzZS5zdHJpbmdzLmdldFN0cmluZygnc2VsZWN0LXRpcmVzJyksXG4gICAgICAgICAgICAgICAgICAgIHNob3dGaWx0ZXJCdXR0b246IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGVuYWJsZWQ6IHRydWVcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHN1c3BlbnNpb246IHtcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IFJpZGVTdHlsZXJTaG93Y2FzZS5zdHJpbmdzLmdldFN0cmluZygnYWRqdXN0LXN1c3BlbnNpb24nKSxcbiAgICAgICAgICAgICAgICAgICAgc2hvd0ZpbHRlckJ1dHRvbjogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGVuYWJsZWQ6IHRydWVcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGJ1aWxkQ29tcG9uZW50KGNvbnRhaW5lcikge1xuICAgICAgICAgICAgLy8gV2FpdCBmb3IgaW5pdGlhbGl6YXRpb24gYmVmb3JlIGNyZWF0aW5nIHRoZSB2aWV3cG9ydCBiZWNhdXNlIGl0IGRldGVjdHNcbiAgICAgICAgICAgIC8vIHRoZSBvZmZzZXQgcG9zaXRpb25pbmcgb2YgdGhlIHZpZXdwb3J0IGVsZW1lbnQgd2hlbiBjcmVhdGVkIGFuZCBvdXIgQ1NTXG4gICAgICAgICAgICAvLyBpc24ndCBndWFyYW50ZWVkIHRvIGJlIGxvYWRlZCB1bnRpbCB0aGUgaW5pdGlhbGl6ZWQgZXZlbnRcbiAgICAgICAgICAgIHRoaXMuZXZlbnRzLm9uKCdpbml0aWFsaXplZCcsICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldHVwVmlld3BvcnQoY29udGFpbmVyKTtcbiAgICAgICAgICAgICAgICAvLyBTZXR1cCBpbml0aWFsIHRhYiBsYXlvdXRcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVRhYkxheW91dCgpO1xuICAgICAgICAgICAgICAgIHRoaXMuZXZlbnRzLm9uKCd2ZWhpY2xlLXNlbGVjdGVkJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy52ZWhpY2xlRGlmZmVyZW50RnJvbVN0YXRlKCkpXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnZpZXdwb3J0LlJlc2V0KCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgLy8gSGlkZSB0aGUgc2hhcmUgYnV0dG9uIGlmIHNoYXJpbmcgaXMgZGlzYWJsZWRcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuc2hvd2Nhc2Uuc2V0dGluZ3NGcm9tQVBJLkVuYWJsZVNoYXJpbmcpXG4gICAgICAgICAgICAgICAgICAgIHNoYXJlQnV0dG9uLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgbGV0IGNvdW50VGlyZUJyYW5kcyA9IFJpZGVTdHlsZXJTaG93Y2FzZS5hcGkucmVxdWVzdChcInRpcmUvY291bnRicmFuZHNcIiwgdGhpcy5zaG93Y2FzZS5maWx0ZXJzLnRpcmVGaWx0ZXJzLmdldEZpbHRlcnMoKSk7XG4gICAgICAgICAgICAgICAgbGV0IGNvdW50V2hlZWxCcmFuZHMgPSBSaWRlU3R5bGVyU2hvd2Nhc2UuYXBpLnJlcXVlc3QoXCJ3aGVlbC9jb3VudGJyYW5kc1wiLCB0aGlzLnNob3djYXNlLmZpbHRlcnMud2hlZWxGaWx0ZXJzLmdldEZpbHRlcnMoKSk7XG4gICAgICAgICAgICAgICAgUmlkZVN0eWxlclNob3djYXNlLlByb21pc2VIZWxwZXIuYWxsKFtjb3VudFRpcmVCcmFuZHMsIGNvdW50V2hlZWxCcmFuZHNdKS5kb25lKHJlc3VsdHMgPT4ge1xuICAgICAgICAgICAgICAgICAgICBsZXQgdGlyZUJyYW5kQ291bnQgPSByZXN1bHRzWzBdLkNvdW50O1xuICAgICAgICAgICAgICAgICAgICBsZXQgd2hlZWxCcmFuZENvdW50ID0gcmVzdWx0c1sxXS5Db3VudDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0aXJlQnJhbmRDb3VudClcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3VzdG9taXphdGlvbkNvbXBvbmVudFNldHRpbmdzLnRpcmVzLmVuYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF3aGVlbEJyYW5kQ291bnQpXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmN1c3RvbWl6YXRpb25Db21wb25lbnRTZXR0aW5ncy53aGVlbHMuZW5hYmxlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVRhYnMoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5zZXR1cFRhYnMoKTtcbiAgICAgICAgICAgIHRoaXMuY2hhbmdlV2hlZWxTaXplID0gbmV3IFJpZGVTdHlsZXJTaG93Y2FzZS5SaWRlU3R5bGVyU2hvd2Nhc2VDaGFuZ2VXaGVlbFNpemUodGhpcy5zaG93Y2FzZSk7XG4gICAgICAgICAgICB0aGlzLmNoYW5nZVdoZWVsU2l6ZS5vcHRpb25TZWxlY3RlZENhbGxiYWNrID0gbmV3T3B0aW9uID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLmV4dGVuZERhdGEoe1xuICAgICAgICAgICAgICAgICAgICBjdXJyZW50V2hlZWxGaXRtZW50OiBuZXdPcHRpb25cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVZpZXdwb3J0KHtcbiAgICAgICAgICAgICAgICAgICAgV2hlZWxGaXRtZW50OiBuZXdPcHRpb24uV2hlZWxGaXRtZW50SURcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLmNvbXBvbmVudHMgPSBbXG4gICAgICAgICAgICAgICAgdGhpcy52ZWhpY2xlRGV0YWlscyA9IG5ldyBSaWRlU3R5bGVyU2hvd2Nhc2UuVmVoaWNsZURldGFpbHModGhpcy5zaG93Y2FzZSksXG4gICAgICAgICAgICAgICAgbmV3IFJpZGVTdHlsZXJTaG93Y2FzZS5XaGVlbERldGFpbHModGhpcy5zaG93Y2FzZSksXG4gICAgICAgICAgICAgICAgbmV3IFJpZGVTdHlsZXJTaG93Y2FzZS5UaXJlRGV0YWlscyh0aGlzLnNob3djYXNlKSxcbiAgICAgICAgICAgICAgICB0aGlzLnRhYkJhcixcbiAgICAgICAgICAgICAgICB0aGlzLmNoYW5nZVdoZWVsU2l6ZVxuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIHRoaXMuY3VzdG9taXphdGlvbkNvbXBvbmVudENvbnRhaW5lciA9IFJpZGVTdHlsZXJTaG93Y2FzZS5IVE1MSGVscGVyLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IGN1c3RvbWl6YXRpb25zQ2xhc3MsXG4gICAgICAgICAgICAgICAgYXBwZW5kVG86IHRoaXMuY29tcG9uZW50XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8vIEFwcGVuZCBhbnkgc3ViIGNvbXBvbmVudHNcbiAgICAgICAgICAgIGZvciAobGV0IGNvbXBvbmVudCBvZiB0aGlzLmNvbXBvbmVudHMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbXBvbmVudC5hcHBlbmRDaGlsZChjb21wb25lbnQuY29tcG9uZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucm90YXRlRWxlbWVudCA9IFJpZGVTdHlsZXJTaG93Y2FzZS5IVE1MSGVscGVyLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdyaWRlc3R5bGVyLXNob3djYXNlLXJvdGF0ZS12ZWhpY2xlJyxcbiAgICAgICAgICAgICAgICBhcHBlbmRUbzogdGhpcy5jb21wb25lbnRcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5yb3RhdGVFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuc3dpdGNoQW5nbGUoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgUmlkZVN0eWxlclNob3djYXNlLkhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCh7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAncmlkZXN0eWxlci1zaG93Y2FzZS1jdXN0b21pemF0aW9uLWNvbXBvbmVudC10aXRsZS1jb250YWluZXInLFxuICAgICAgICAgICAgICAgIGFwcGVuZFRvOiB0aGlzLmNvbXBvbmVudCxcbiAgICAgICAgICAgICAgICBhcHBlbmQ6IFtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50aXRsZUVsZW1lbnQgPSBSaWRlU3R5bGVyU2hvd2Nhc2UuSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ3JpZGVzdHlsZXItc2hvd2Nhc2UtY3VzdG9taXphdGlvbi1jb21wb25lbnQtdGl0bGUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgYXBwZW5kVG86IHRoaXMuY29tcG9uZW50XG4gICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICAgICB0aGlzLmZpbHRlckJ1dHRvbiA9IFJpZGVTdHlsZXJTaG93Y2FzZS5IVE1MSGVscGVyLmNyZWF0ZUJ1dHRvbih7XG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiBSaWRlU3R5bGVyU2hvd2Nhc2Uuc3RyaW5ncy5nZXRTdHJpbmcoJ2ZpbHRlci1yZXN1bHRzJyksXG4gICAgICAgICAgICAgICAgICAgICAgICBza2lubnk6IHRydWVcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuZmlsdGVyQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuc2hvd0ZpbHRlcnMoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgbGV0IHNoYXJlQnV0dG9uID0gUmlkZVN0eWxlclNob3djYXNlLkhUTUxIZWxwZXIuY3JlYXRlQnV0dG9uKHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdyaWRlc3R5bGVyLXNoYXJlLW15LXZlaGljbGUtYnV0dG9uJyxcbiAgICAgICAgICAgICAgICB0ZXh0OiBSaWRlU3R5bGVyU2hvd2Nhc2Uuc3RyaW5ncy5nZXRTdHJpbmcoJ3NoYXJlLW15LXZlaGljbGUnKSxcbiAgICAgICAgICAgICAgICBhcHBlbmRUbzogdGhpcy5jb21wb25lbnQsXG4gICAgICAgICAgICAgICAgc3R5bGU6IHtcbiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogJzEnXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBkaXNhYmxlZDogdHJ1ZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBzaGFyZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgICAgICBuZXcgUmlkZVN0eWxlclNob3djYXNlLlJpZGVTdHlsZXJTaG93Y2FzZVNoYXJlTW9kYWwodGhpcy5zaG93Y2FzZSwgdGhpcy5jdXJyZW50UmVuZGVySW5zdHJ1Y3Rpb25zKS5zaG93KCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuc3RhdGUuYWZ0ZXJEYXRhQ2hhbmdlKHN0YXRlRGF0YSA9PiB7XG4gICAgICAgICAgICAgICAgc2hhcmVCdXR0b24uZGlzYWJsZWQgPSBzdGF0ZURhdGEuY3VycmVudFdoZWVsID8gZmFsc2UgOiB0cnVlO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAvLyBTdGFydCBsaXN0ZW5pbmcgZm9yIHJlc2l6ZSBldmVudHNcbiAgICAgICAgICAgIHRoaXMuZXZlbnRzLm9uKCdyZXNpemVkJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzVmlzaWJsZSgpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlVmlld3BvcnQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8vIFN0YXJ0IGxpc3RlbmluZyBmb3IgYnJlYWtwb2ludCBjaGFuZ2VzXG4gICAgICAgICAgICB0aGlzLmV2ZW50cy5vbignYnJlYWtwb2ludC1jaGFuZ2VkJywgbmV3QnJlYWtwb2ludCA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVUYWJMYXlvdXQoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy52ZWhpY2xlRGV0YWlscy5wYWludFN3YXRjaENsaWNrQ2FsbGJhY2sgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRBY3RpdmVDdXN0b21pemF0aW9uQ29tcG9uZW50KHRoaXMuY3VzdG9taXphdGlvbkNvbXBvbmVudHMucGFpbnQpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBzZXR1cFZpZXdwb3J0KGNvbnRhaW5lcikge1xuICAgICAgICAgICAgbGV0IHZpZXdwb3J0RWxlbWVudCA9IFJpZGVTdHlsZXJTaG93Y2FzZS5IVE1MSGVscGVyLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdyaWRlc3R5bGVyLXNob3djYXNlLXZpZXdwb3J0JyxcbiAgICAgICAgICAgICAgICBhcHBlbmRUbzogY29udGFpbmVyXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHZpZXdwb3J0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnN3aXRjaEFuZ2xlKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMudmlld3BvcnQgPSBuZXcgUmlkZVN0eWxlclZpZXdwb3J0KHZpZXdwb3J0RWxlbWVudCk7XG4gICAgICAgICAgICAvL0xpc3RlbnMgZm9yIG5ldyBjYXIgc2VsZWN0aW9uIGFuZCBoaWRlcyB2ZWhpY2xlIGJldHdlZW4gdXBkYXRlc1xuICAgICAgICB9XG4gICAgICAgIHVwZGF0ZVRhYnMoKSB7XG4gICAgICAgICAgICBsZXQgdGFicyA9IFtdO1xuICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgb2YgdGhpcy5jdXN0b21pemF0aW9uQ29tcG9uZW50T3JkZXIpIHtcbiAgICAgICAgICAgICAgICAvLyBTa2lwIGRpc2FibGVkIGNvbXBvbmVudHNcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuY3VzdG9taXphdGlvbkNvbXBvbmVudFNldHRpbmdzW2tleV0uZW5hYmxlZClcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgdGFicy5wdXNoKHRoaXMudGFic1trZXldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMudGFiQmFyLnNldFRhYnModGFicyk7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVRhYkxheW91dCgpO1xuICAgICAgICB9XG4gICAgICAgIHVwZGF0ZVRhYkxheW91dCgpIHtcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRCcmVha3BvaW50ID0gdGhpcy5zaG93Y2FzZS5zdHlsZS5nZXRDdXJyZW50QnJlYWtwb2ludCgpO1xuICAgICAgICAgICAgY29uc3QgaG9yaXpvbnRhbCA9IGN1cnJlbnRCcmVha3BvaW50ICYmIGN1cnJlbnRCcmVha3BvaW50WzBdID09PSAncGhvbmUtcG9ydHJhaXQnO1xuICAgICAgICAgICAgdGhpcy50YWJCYXIuc2V0TW9kZShob3Jpem9udGFsID8gJ2hvcml6b250YWwnIDogJ3ZlcnRpY2FsJyk7XG4gICAgICAgIH1cbiAgICAgICAgc2V0dXBUYWJzKCkge1xuICAgICAgICAgICAgdGhpcy50YWJCYXIgPSBuZXcgUmlkZVN0eWxlclNob3djYXNlLlJpZGVTdHlsZXJTaG93Y2FzZVRhYkJhcih0aGlzLnNob3djYXNlKTtcbiAgICAgICAgICAgIC8vIERlZmluZSBvdXIgdGFic1xuICAgICAgICAgICAgdGhpcy50YWJzID0ge1xuICAgICAgICAgICAgICAgIHBhaW50OiBuZXcgUmlkZVN0eWxlclNob3djYXNlLlJpZGVTdHlsZXJTaG93Y2FzZVRhYkJhci5UYWIoe1xuICAgICAgICAgICAgICAgICAgICBpY29uOiAncGFpbnQnLFxuICAgICAgICAgICAgICAgICAgICBrZXk6ICdwYWludCcsXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsOiBSaWRlU3R5bGVyU2hvd2Nhc2Uuc3RyaW5ncy5nZXRTdHJpbmcoJ3BhaW50JylcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICB3aGVlbHM6IG5ldyBSaWRlU3R5bGVyU2hvd2Nhc2UuUmlkZVN0eWxlclNob3djYXNlVGFiQmFyLlRhYih7XG4gICAgICAgICAgICAgICAgICAgIGljb246ICd3aGVlbCcsXG4gICAgICAgICAgICAgICAgICAgIGtleTogJ3doZWVscycsXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsOiBSaWRlU3R5bGVyU2hvd2Nhc2Uuc3RyaW5ncy5nZXRTdHJpbmcoJ3doZWVscycpXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgdGlyZXM6IG5ldyBSaWRlU3R5bGVyU2hvd2Nhc2UuUmlkZVN0eWxlclNob3djYXNlVGFiQmFyLlRhYih7XG4gICAgICAgICAgICAgICAgICAgIGljb246ICd0aXJlJyxcbiAgICAgICAgICAgICAgICAgICAga2V5OiAndGlyZXMnLFxuICAgICAgICAgICAgICAgICAgICBsYWJlbDogUmlkZVN0eWxlclNob3djYXNlLnN0cmluZ3MuZ2V0U3RyaW5nKCd0aXJlcycpXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgc3VzcGVuc2lvbjogbmV3IFJpZGVTdHlsZXJTaG93Y2FzZS5SaWRlU3R5bGVyU2hvd2Nhc2VUYWJCYXIuVGFiKHtcbiAgICAgICAgICAgICAgICAgICAgaWNvbjogJ3N1c3BlbnNpb24nLFxuICAgICAgICAgICAgICAgICAgICBrZXk6ICdzdXNwZW5zaW9uJyxcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw6IFJpZGVTdHlsZXJTaG93Y2FzZS5zdHJpbmdzLmdldFN0cmluZygnc3VzcGVuc2lvbicpXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICAvLyBTd2l0Y2ggdGhlIGJvdHRvbSB2aWV3LCB0aGUgY3VzdG9taXphdGlvbiBjb21wb25lbnQgd2hlbiBhIHRhYiBpcyBjbGlja2VkIG9uXG4gICAgICAgICAgICB0aGlzLnRhYkJhci50YWJTd2l0Y2hlZENhbGxiYWNrID0gZSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgbmV3VGFiID0gZS5uZXdUYWI7XG4gICAgICAgICAgICAgICAgY29uc3Qga2V5ID0gbmV3VGFiLmtleTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5jdXN0b21pemF0aW9uQ29tcG9uZW50cyAmJiBrZXkgaW4gdGhpcy5jdXN0b21pemF0aW9uQ29tcG9uZW50cykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldEFjdGl2ZUN1c3RvbWl6YXRpb25Db21wb25lbnQodGhpcy5jdXN0b21pemF0aW9uQ29tcG9uZW50c1trZXldKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIHZlaGljbGVEaWZmZXJlbnRGcm9tU3RhdGUoKSB7XG4gICAgICAgICAgICBsZXQgc3RhdGVEYXRhID0gdGhpcy5zdGF0ZS5nZXREYXRhKCk7XG4gICAgICAgICAgICBpZiAoIXN0YXRlRGF0YS5jdXJyZW50VmVoaWNsZUNvbmZpZ3VyYXRpb25JRCB8fCAhc3RhdGVEYXRhLmN1cnJlbnRWZWhpY2xlVGlyZU9wdGlvbklEKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignVHJ5aW5nIHRvIHNob3cgdGhlIHZpc3VhbGl6ZSBzY3JlZW4gd2l0aG91dCBhIHZlaGljbGUgY29uZmlndXJhdGlvbiBvciB0aXJlIG9wdGlvbi4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCB2ZWhpY2xlQ2hhbmdlZCA9ICFSaWRlU3R5bGVyU2hvd2Nhc2UuR1VJREhlbHBlci5hcmVFcXVhbChzdGF0ZURhdGEuY3VycmVudFZlaGljbGVDb25maWd1cmF0aW9uSUQsIHRoaXMudmVoaWNsZUNvbmZpZ3VyYXRpb25JRCk7XG4gICAgICAgICAgICBsZXQgdGlyZU9wdGlvbkNoYW5nZWQgPSAhUmlkZVN0eWxlclNob3djYXNlLkdVSURIZWxwZXIuYXJlRXF1YWwoc3RhdGVEYXRhLmN1cnJlbnRWZWhpY2xlVGlyZU9wdGlvbklELCB0aGlzLnZlaGljbGVUaXJlT3B0aW9uSUQpO1xuICAgICAgICAgICAgcmV0dXJuIHZlaGljbGVDaGFuZ2VkIHx8IHRpcmVPcHRpb25DaGFuZ2VkO1xuICAgICAgICB9XG4gICAgICAgIG9uRGlzcGxheSgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnZlaGljbGVEaWZmZXJlbnRGcm9tU3RhdGUoKSkge1xuICAgICAgICAgICAgICAgIGxldCBzdGF0ZURhdGEgPSB0aGlzLnN0YXRlLmdldERhdGEoKTtcbiAgICAgICAgICAgICAgICB0aGlzLnZlaGljbGVDb25maWd1cmF0aW9uSUQgPSBzdGF0ZURhdGEuY3VycmVudFZlaGljbGVDb25maWd1cmF0aW9uSUQ7XG4gICAgICAgICAgICAgICAgdGhpcy52ZWhpY2xlRGVzY3JpcHRpb24gPSBzdGF0ZURhdGEuY3VycmVudFZlaGljbGVEZXNjcmlwdGlvbjtcbiAgICAgICAgICAgICAgICB0aGlzLnZlaGljbGVUaXJlT3B0aW9uSUQgPSBzdGF0ZURhdGEuY3VycmVudFZlaGljbGVUaXJlT3B0aW9uSUQ7XG4gICAgICAgICAgICAgICAgdGhpcy52ZWhpY2xlVGlyZU9wdGlvbkRlc2NyaXB0aW9uID0gc3RhdGVEYXRhLmN1cnJlbnRWZWhpY2xlVGlyZU9wdGlvbkRlc2NyaXB0aW9uO1xuICAgICAgICAgICAgICAgIHRoaXMudGFiQmFyLmNsZWFyQWN0aXZlVGFiKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5vblZlaGljbGVDaGFuZ2VkKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgb25WZWhpY2xlQ2hhbmdlZCgpIHtcbiAgICAgICAgICAgIFJpZGVTdHlsZXJTaG93Y2FzZS5IVE1MSGVscGVyLmVtcHR5KHRoaXMuY3VzdG9taXphdGlvbkNvbXBvbmVudENvbnRhaW5lcik7XG4gICAgICAgICAgICAvLyBTZXQgdGhlIGN1c3RvbWl6YXRpb24gY29udGFpbmVyIGFzIGxvYWRpbmcgd2hpbGUgd2UncmUgbG9hZGluZyBhZGRpdGlvbmFsIGluZm9ybWF0aW9uXG4gICAgICAgICAgICAvLyBhYm91dCB0aGUgdmVoaWNsZVxuICAgICAgICAgICAgdGhpcy5jdXN0b21pemF0aW9uQ29tcG9uZW50Q29udGFpbmVyLmNsYXNzTGlzdC5hZGQobG9hZGluZ0NsYXNzKTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlVGFicygpO1xuICAgICAgICAgICAgLy8gRGVzZWxlY3QgYW55IGFjdGl2ZSB0YWJcbiAgICAgICAgICAgIHRoaXMudGFiQmFyLmNsZWFyQWN0aXZlVGFiKCk7XG4gICAgICAgICAgICB0aGlzLnJvdGF0ZUVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnaW4nKTtcbiAgICAgICAgICAgIC8vIExvYWQgdGhlIHZlaGljbGUncyBkZXNjcmlwdGlvbiBtb2RlbFxuICAgICAgICAgICAgbGV0IGdldFZlaGljbGVEZXNjcmlwdGlvbiA9IFJpZGVTdHlsZXJTaG93Y2FzZS5hcGkucmVxdWVzdChcInZlaGljbGUvZ2V0ZGVzY3JpcHRpb25zXCIsIHtcbiAgICAgICAgICAgICAgICBDb3VudDogMSxcbiAgICAgICAgICAgICAgICBWZWhpY2xlQ29uZmlndXJhdGlvbjogdGhpcy52ZWhpY2xlQ29uZmlndXJhdGlvbklEXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGxldCBnZXRWZWhpY2xlVGlyZU9wdGlvbiA9IFJpZGVTdHlsZXJTaG93Y2FzZS5hcGkucmVxdWVzdCgndmVoaWNsZS9nZXR0aXJlb3B0aW9uZGV0YWlscycsIHtcbiAgICAgICAgICAgICAgICBWZWhpY2xlQ29uZmlndXJhdGlvbjogdGhpcy52ZWhpY2xlQ29uZmlndXJhdGlvbklEXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIFJpZGVTdHlsZXJTaG93Y2FzZS5Qcm9taXNlSGVscGVyLmFsbChbZ2V0VmVoaWNsZURlc2NyaXB0aW9uLCBnZXRWZWhpY2xlVGlyZU9wdGlvbl0pLmRvbmUocmVzcG9uc2VzID0+IHtcbiAgICAgICAgICAgICAgICBsZXQgdmVoaWNsZURlc2NyaXB0aW9uID0gdGhpcy52ZWhpY2xlRGVzY3JpcHRpb25Nb2RlbCA9IHJlc3BvbnNlc1swXS5EZXNjcmlwdGlvbnNbMF07XG4gICAgICAgICAgICAgICAgbGV0IHZlaGljbGVUaXJlT3B0aW9uO1xuICAgICAgICAgICAgICAgIGxldCBzZWxlY3RlZFRpcmVPcHRpb25JRCA9IFJpZGVTdHlsZXJTaG93Y2FzZS5HVUlESGVscGVyLnBhcnNlKHRoaXMudmVoaWNsZVRpcmVPcHRpb25JRCk7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgdGlyZU9wdGlvbiBvZiByZXNwb25zZXNbMV0uRGV0YWlscykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoUmlkZVN0eWxlclNob3djYXNlLkdVSURIZWxwZXIuYXJlRXF1YWwodGlyZU9wdGlvbi5UaXJlT3B0aW9uSUQsIHNlbGVjdGVkVGlyZU9wdGlvbklEKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmVoaWNsZVRpcmVPcHRpb24gPSB0aXJlT3B0aW9uO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy52ZWhpY2xlVGlyZU9wdGlvbiA9IHZlaGljbGVUaXJlT3B0aW9uO1xuICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUuZXh0ZW5kRGF0YSh7XG4gICAgICAgICAgICAgICAgICAgIHZlaGljbGVIYXNBbmdsZWRJbWFnZTogdmVoaWNsZURlc2NyaXB0aW9uLkhhc0FuZ2xlZEltYWdlLFxuICAgICAgICAgICAgICAgICAgICB2ZWhpY2xlSGFzU2lkZUltYWdlOiB2ZWhpY2xlRGVzY3JpcHRpb24uSGFzU2lkZUltYWdlLFxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50VGlyZU9wdGlvbjogdmVoaWNsZVRpcmVPcHRpb24sXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRWZWhpY2xlRGVzY3JpcHRpb25Nb2RlbDogdmVoaWNsZURlc2NyaXB0aW9uLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRoaXMuaW5pdGlhbGl6ZUZvck5ld1ZlaGljbGUoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGluaXRpYWxpemVGb3JOZXdWZWhpY2xlKCkge1xuICAgICAgICAgICAgdGhpcy5ldmVudHMudHJpZ2dlcihcInZlaGljbGUtZGVzY3JpcHRpb24tbG9hZGVkXCIsIHRoaXMudmVoaWNsZURlc2NyaXB0aW9uTW9kZWwpO1xuICAgICAgICAgICAgdGhpcy5jdXJyZW50UmVuZGVySW5zdHJ1Y3Rpb25zID0ge307XG4gICAgICAgICAgICB0aGlzLnRhYkJhci5zZXRBY3RpdmVUYWIodGhpcy50YWJzLnBhaW50KTtcbiAgICAgICAgICAgIHRoaXMudmlld3BvcnQuUmVzZXQoKTtcbiAgICAgICAgICAgIC8vIENyZWF0ZSB0aGUgY29tcG9uZW50cyB0aGF0IHdpbGwgYmUgc3dpdGNoZWQgd2l0aCB0aGUgdGFic1xuICAgICAgICAgICAgdGhpcy5jdXN0b21pemF0aW9uQ29tcG9uZW50cyA9IHtcbiAgICAgICAgICAgICAgICBwYWludDogbmV3IFJpZGVTdHlsZXJTaG93Y2FzZS5SaWRlU3R5bGVyU2hvd2Nhc2VQYWludFNlbGVjdG9yKHRoaXMuc2hvd2Nhc2UpLFxuICAgICAgICAgICAgICAgIHdoZWVsczogbmV3IFJpZGVTdHlsZXJTaG93Y2FzZS5SaWRlU3R5bGVyU2hvd2Nhc2VXaGVlbFNlbGVjdG9yKHRoaXMuc2hvd2Nhc2UpLFxuICAgICAgICAgICAgICAgIHRpcmVzOiBuZXcgUmlkZVN0eWxlclNob3djYXNlLlJpZGVTdHlsZXJTaG93Y2FzZVRpcmVTZWxlY3Rvcih0aGlzLnNob3djYXNlKSxcbiAgICAgICAgICAgICAgICBzdXNwZW5zaW9uOiBuZXcgUmlkZVN0eWxlclNob3djYXNlLlJpZGVTdHlsZXJTaG93Y2FzZVN1c3BlbnNpb25TZWxlY3Rvcih0aGlzLnNob3djYXNlKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMuY3VzdG9taXphdGlvbkNvbXBvbmVudHMud2hlZWxzLnNldEZpbHRlcnModGhpcy5zaG93Y2FzZS5maWx0ZXJzLndoZWVsRmlsdGVycy5nZXRGaWx0ZXJzKCkpO1xuICAgICAgICAgICAgdGhpcy5zaG93Y2FzZS5maWx0ZXJzLndoZWVsRmlsdGVycy5vbkZpbHRlcnNDaGFuZ2VkID0gZmlsdGVycyA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5jdXN0b21pemF0aW9uQ29tcG9uZW50cy53aGVlbHMuc2V0RmlsdGVycyhmaWx0ZXJzKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLnNob3djYXNlLmZpbHRlcnMudGlyZUZpbHRlcnMub25GaWx0ZXJzQ2hhbmdlZCA9IGZpbHRlcnMgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuY3VzdG9taXphdGlvbkNvbXBvbmVudHMudGlyZXMuc2V0RmlsdGVycyhmaWx0ZXJzKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLmN1c3RvbWl6YXRpb25Db21wb25lbnRzLnBhaW50Lm9uUGFpbnRTY2hlbWVTZWxlY3RlZCA9IHBhaW50U2NoZW1lID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmN1c3RvbWl6YXRpb25Db21wb25lbnRzLnBhaW50LnNldE9wdGlvbklzTG9hZGluZyh0cnVlKTtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVZpZXdwb3J0KHtcbiAgICAgICAgICAgICAgICAgICAgUGFpbnRDb2xvcjogcGFpbnRTY2hlbWUuQ29sb3JzWzBdLkhleFxuICAgICAgICAgICAgICAgIH0pLmFsd2F5cygoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY3VzdG9taXphdGlvbkNvbXBvbmVudHMucGFpbnQuc2V0T3B0aW9uSXNMb2FkaW5nKGZhbHNlKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLmN1c3RvbWl6YXRpb25Db21wb25lbnRzLndoZWVscy5wcm9kdWN0U2VsZWN0ZWRDYWxsYmFjayA9IG1vZGVsID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmN1c3RvbWl6YXRpb25Db21wb25lbnRzLndoZWVscy5zZXRPcHRpb25Jc0xvYWRpbmcodHJ1ZSk7XG4gICAgICAgICAgICAgICAgY29uc3QgY2FuUmVuZGVyT25DdXJyZW50QW5nbGUgPSB0aGlzLmltYWdlVHlwZSA9PT0gMiAvKiBBbmdsZSAqLyAmJiBtb2RlbC5IYXNBbmdsZUltYWdlIHx8XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaW1hZ2VUeXBlID09PSAxIC8qIFNpZGUgKi8gJiYgbW9kZWwuSGFzU2lkZUltYWdlO1xuICAgICAgICAgICAgICAgIGlmICghY2FuUmVuZGVyT25DdXJyZW50QW5nbGUpXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3dpdGNoQW5nbGUoKTtcbiAgICAgICAgICAgICAgICBSaWRlU3R5bGVyU2hvd2Nhc2UuYXBpLnJlcXVlc3QoJ3doZWVsL2dldGZpdG1lbnRkZXNjcmlwdGlvbnMnLCB7XG4gICAgICAgICAgICAgICAgICAgIFZlaGljbGVDb25maWd1cmF0aW9uOiB0aGlzLnZlaGljbGVDb25maWd1cmF0aW9uSUQsXG4gICAgICAgICAgICAgICAgICAgIFdoZWVsTW9kZWw6IG1vZGVsLldoZWVsTW9kZWxJRCxcbiAgICAgICAgICAgICAgICAgICAgSW5jbHVkZVByaWNpbmc6IHRydWVcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAuZG9uZShyZXNwb25zZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBmaXRtZW50cyA9IHJlc3BvbnNlLkZpdG1lbnRzO1xuICAgICAgICAgICAgICAgICAgICBsZXQgYmVzdEZpdG1lbnQgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICAgIGxldCB0YXJnZXREaWFtZXRlciA9IHRoaXMudmVoaWNsZVRpcmVPcHRpb24uRnJvbnQuSW5zaWRlRGlhbWV0ZXI7XG4gICAgICAgICAgICAgICAgICAgIG1vZGVsLldoZWVsRml0bWVudHMgPSBmaXRtZW50cztcbiAgICAgICAgICAgICAgICAgICAgZml0bWVudHMuc29ydChmdW5jdGlvbiAoYSwgYikge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYURpZmYgPSBNYXRoLmFicyhhLkRpYW1ldGVyTWluIC0gdGFyZ2V0RGlhbWV0ZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYkRpZmYgPSBNYXRoLmFicyhiLkRpYW1ldGVyTWluIC0gdGFyZ2V0RGlhbWV0ZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFEaWZmIC0gYkRpZmY7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBiZXN0Rml0bWVudCA9IGZpdG1lbnRzWzBdO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLmV4dGVuZERhdGEoe1xuICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFdoZWVsOiBtb2RlbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRXaGVlbEZpdG1lbnQ6IGJlc3RGaXRtZW50XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNoYW5nZVdoZWVsU2l6ZS5zZXRGaXRtZW50T3B0aW9ucyhmaXRtZW50cywgYmVzdEZpdG1lbnQpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNoYW5nZVdoZWVsU2l6ZS5jb21wb25lbnQuc3R5bGUuZGlzcGxheSA9ICcnO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVZpZXdwb3J0KHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFdoZWVsRml0bWVudDogYmVzdEZpdG1lbnQuV2hlZWxGaXRtZW50SURcbiAgICAgICAgICAgICAgICAgICAgfSkuYWx3YXlzKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3VzdG9taXphdGlvbkNvbXBvbmVudHMud2hlZWxzLnNldE9wdGlvbklzTG9hZGluZyhmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIC5mYWlsKCgpID0+IHRoaXMuY3VzdG9taXphdGlvbkNvbXBvbmVudHMud2hlZWxzLnNldE9wdGlvbklzTG9hZGluZyhmYWxzZSkpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMuY3VzdG9taXphdGlvbkNvbXBvbmVudHMudGlyZXMucHJvZHVjdFNlbGVjdGVkQ2FsbGJhY2sgPSBtb2RlbCA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5leHRlbmREYXRhKHtcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudFRpcmU6IG1vZGVsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5jdXN0b21pemF0aW9uQ29tcG9uZW50cy5zdXNwZW5zaW9uLnN1c3BlbnNpb25DaGFuZ2VDYWxsYmFjayA9IHJlbmRlclVwZGF0ZSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVWaWV3cG9ydChyZW5kZXJVcGRhdGUpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMuc2V0QWN0aXZlQ3VzdG9taXphdGlvbkNvbXBvbmVudCh0aGlzLmN1c3RvbWl6YXRpb25Db21wb25lbnRzLndoZWVscyk7XG4gICAgICAgICAgICBmb3IgKGxldCBjdXN0b21pemF0aW9uQ29tcG9uZW50IG9mIFJpZGVTdHlsZXJTaG93Y2FzZS5PYmplY3RIZWxwZXIuZ2V0VmFsdWVzKHRoaXMuY3VzdG9taXphdGlvbkNvbXBvbmVudHMpKSB7XG4gICAgICAgICAgICAgICAgY3VzdG9taXphdGlvbkNvbXBvbmVudC5jb21wb25lbnQuY2xhc3NMaXN0LmFkZCgncmlkZXN0eWxlci1zaG93Y2FzZS1jdXN0b21pemF0aW9uLWNvbXBvbmVudCcpO1xuICAgICAgICAgICAgICAgIHRoaXMuY3VzdG9taXphdGlvbkNvbXBvbmVudENvbnRhaW5lci5hcHBlbmRDaGlsZChjdXN0b21pemF0aW9uQ29tcG9uZW50LmNvbXBvbmVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmltYWdlVHlwZSA9IDIgLyogQW5nbGUgKi87XG4gICAgICAgICAgICBpZiAoIXRoaXMudmVoaWNsZURlc2NyaXB0aW9uTW9kZWwuSGFzQW5nbGVkSW1hZ2UpXG4gICAgICAgICAgICAgICAgdGhpcy5pbWFnZVR5cGUgPSAxIC8qIFNpZGUgKi87XG4gICAgICAgICAgICB0aGlzLnJvdGF0ZUVsZW1lbnQuc3R5bGUuZGlzcGxheSA9IHRoaXMuY2FuU3dpdGNoQW5nbGUoKSA/ICcnIDogJ25vbmUnO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVWaWV3cG9ydCh7XG4gICAgICAgICAgICAgICAgVmVoaWNsZUNvbmZpZ3VyYXRpb246IHRoaXMudmVoaWNsZUNvbmZpZ3VyYXRpb25JRCxcbiAgICAgICAgICAgICAgICBWZWhpY2xlVGlyZU9wdGlvbjogdGhpcy52ZWhpY2xlVGlyZU9wdGlvbklELFxuICAgICAgICAgICAgICAgIFBvc2l0aW9uWDogMSAvKiBDZW50ZXIgKi8sXG4gICAgICAgICAgICAgICAgUG9zaXRpb25ZOiAyIC8qIEZhciAqLyxcbiAgICAgICAgICAgICAgICBUeXBlOiB0aGlzLmltYWdlVHlwZVxuICAgICAgICAgICAgfSkuZG9uZSgoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5yb3RhdGVFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2luJyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuY3VzdG9taXphdGlvbkNvbXBvbmVudENvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKGxvYWRpbmdDbGFzcyk7XG4gICAgICAgIH1cbiAgICAgICAgc2V0QWN0aXZlQ3VzdG9taXphdGlvbkNvbXBvbmVudChjdXN0b21pemF0aW9uQ29tcG9uZW50KSB7XG4gICAgICAgICAgICBsZXQgc3RhdGVEYXRhID0gdGhpcy5zdGF0ZS5nZXREYXRhKCk7XG4gICAgICAgICAgICBsZXQgY29tcG9uZW50S2V5ID0gdGhpcy5nZXRDb21wb25lbnRLZXkoY3VzdG9taXphdGlvbkNvbXBvbmVudCk7XG4gICAgICAgICAgICBsZXQgc2V0dGluZ3MgPSB0aGlzLmN1c3RvbWl6YXRpb25Db21wb25lbnRTZXR0aW5nc1tjb21wb25lbnRLZXldO1xuICAgICAgICAgICAgbGV0IHRhYiA9IHRoaXMudGFic1tjb21wb25lbnRLZXldO1xuICAgICAgICAgICAgaWYgKHRhYikge1xuICAgICAgICAgICAgICAgIHRoaXMudGFiQmFyLnNldEFjdGl2ZVRhYih0YWIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuYWN0aXZlQ3VzdG9taXphdGlvbkNvbXBvbmVudCkge1xuICAgICAgICAgICAgICAgIHRoaXMuYWN0aXZlQ3VzdG9taXphdGlvbkNvbXBvbmVudC5jb21wb25lbnQuY2xhc3NMaXN0LnJlbW92ZSgnaW4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGN1c3RvbWl6YXRpb25Db21wb25lbnQuY29tcG9uZW50LmNsYXNzTGlzdC5hZGQoJ2luJyk7XG4gICAgICAgICAgICB0aGlzLmFjdGl2ZUN1c3RvbWl6YXRpb25Db21wb25lbnQgPSBjdXN0b21pemF0aW9uQ29tcG9uZW50O1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBjdXN0b21pemF0aW9uQ29tcG9uZW50LnVwZGF0ZSA9PT0gJ2Z1bmN0aW9uJylcbiAgICAgICAgICAgICAgICBjdXN0b21pemF0aW9uQ29tcG9uZW50LnVwZGF0ZSgpO1xuICAgICAgICAgICAgdGhpcy5jaGFuZ2VXaGVlbFNpemUuY29tcG9uZW50LnN0eWxlLmRpc3BsYXkgPVxuICAgICAgICAgICAgICAgIGN1c3RvbWl6YXRpb25Db21wb25lbnQgaW5zdGFuY2VvZiBSaWRlU3R5bGVyU2hvd2Nhc2UuUmlkZVN0eWxlclNob3djYXNlV2hlZWxTZWxlY3RvciAmJiBzdGF0ZURhdGEuY3VycmVudFdoZWVsID9cbiAgICAgICAgICAgICAgICAgICAgJycgOiAnbm9uZSc7XG4gICAgICAgICAgICB0aGlzLmZpbHRlckJ1dHRvbi5zdHlsZS5kaXNwbGF5ID0gc2V0dGluZ3Muc2hvd0ZpbHRlckJ1dHRvbiA/ICcnIDogJ25vbmUnO1xuICAgICAgICAgICAgUmlkZVN0eWxlclNob3djYXNlLkhUTUxIZWxwZXIuc2V0VGV4dCh0aGlzLnRpdGxlRWxlbWVudCwgc2V0dGluZ3MudGl0bGUpO1xuICAgICAgICB9XG4gICAgICAgIGdldENvbXBvbmVudEtleShjdXN0b21pemF0aW9uQ29tcG9uZW50KSB7XG4gICAgICAgICAgICBmb3IgKGxldCBrZXkgaW4gdGhpcy5jdXN0b21pemF0aW9uQ29tcG9uZW50cykge1xuICAgICAgICAgICAgICAgIGxldCBjb21wb25lbnQgPSB0aGlzLmN1c3RvbWl6YXRpb25Db21wb25lbnRzW2tleV07XG4gICAgICAgICAgICAgICAgaWYgKGNvbXBvbmVudCA9PT0gY3VzdG9taXphdGlvbkNvbXBvbmVudCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4ga2V5O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB1cGRhdGVWaWV3cG9ydChpbnN0cnVjdGlvbnMpIHtcbiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24odGhpcy5jdXJyZW50UmVuZGVySW5zdHJ1Y3Rpb25zLCBpbnN0cnVjdGlvbnMpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudmlld3BvcnQuVXBkYXRlKGluc3RydWN0aW9ucyk7XG4gICAgICAgIH1cbiAgICAgICAgY2FuU3dpdGNoQW5nbGUoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy52ZWhpY2xlRGVzY3JpcHRpb25Nb2RlbC5IYXNBbmdsZWRJbWFnZSAmJiB0aGlzLnZlaGljbGVEZXNjcmlwdGlvbk1vZGVsLkhhc1NpZGVJbWFnZTtcbiAgICAgICAgfVxuICAgICAgICBzaG93RmlsdGVycygpIHtcbiAgICAgICAgICAgIGNvbnN0IGFjdGl2ZUN1c3RvbWl6YXRpb25Db21wb25lbnQgPSB0aGlzLmFjdGl2ZUN1c3RvbWl6YXRpb25Db21wb25lbnQ7XG4gICAgICAgICAgICBsZXQgZmlsdGVyTW9kYWw7XG4gICAgICAgICAgICBpZiAoYWN0aXZlQ3VzdG9taXphdGlvbkNvbXBvbmVudCA9PT0gdGhpcy5jdXN0b21pemF0aW9uQ29tcG9uZW50cy50aXJlcykge1xuICAgICAgICAgICAgICAgIGZpbHRlck1vZGFsID0gbmV3IFJpZGVTdHlsZXJTaG93Y2FzZS5SaWRlU3R5bGVyU2hvd2Nhc2VGaWx0ZXJNb2RhbCh0aGlzLnNob3djYXNlLCB7XG4gICAgICAgICAgICAgICAgICAgIGZpbHRlclByb3ZpZGVyOiB0aGlzLnNob3djYXNlLmZpbHRlcnMudGlyZUZpbHRlcnMsXG4gICAgICAgICAgICAgICAgICAgIHNob3dDb3VudFRleHRGb3JtYXQ6IFJpZGVTdHlsZXJTaG93Y2FzZS5zdHJpbmdzLmdldFN0cmluZygnc2hvdy1jb3VudC1mb3JtYXQtdGlyZXMnKVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoYWN0aXZlQ3VzdG9taXphdGlvbkNvbXBvbmVudCA9PT0gdGhpcy5jdXN0b21pemF0aW9uQ29tcG9uZW50cy53aGVlbHMpIHtcbiAgICAgICAgICAgICAgICBmaWx0ZXJNb2RhbCA9IG5ldyBSaWRlU3R5bGVyU2hvd2Nhc2UuUmlkZVN0eWxlclNob3djYXNlRmlsdGVyTW9kYWwodGhpcy5zaG93Y2FzZSwge1xuICAgICAgICAgICAgICAgICAgICBmaWx0ZXJQcm92aWRlcjogdGhpcy5zaG93Y2FzZS5maWx0ZXJzLndoZWVsRmlsdGVycyxcbiAgICAgICAgICAgICAgICAgICAgc2hvd0NvdW50VGV4dEZvcm1hdDogUmlkZVN0eWxlclNob3djYXNlLnN0cmluZ3MuZ2V0U3RyaW5nKCdzaG93LWNvdW50LWZvcm1hdC13aGVlbHMnKVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGZpbHRlck1vZGFsKSB7XG4gICAgICAgICAgICAgICAgZmlsdGVyTW9kYWwuc2hvdygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHN3aXRjaEFuZ2xlKCkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmNhblN3aXRjaEFuZ2xlKCkgfHwgdGhpcy5zdGF0ZS5nZXREYXRhKCkuY3VycmVudFdoZWVsLkhhc1NpZGVJbWFnZSA9PT0gZmFsc2UpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgaWYgKHRoaXMuaW1hZ2VUeXBlID09PSAyIC8qIEFuZ2xlICovKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pbWFnZVR5cGUgPSAxIC8qIFNpZGUgKi87XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgdGhpcy5pbWFnZVR5cGUgPSAyIC8qIEFuZ2xlICovO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVWaWV3cG9ydCh7XG4gICAgICAgICAgICAgICAgVHlwZTogdGhpcy5pbWFnZVR5cGVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIFJpZGVTdHlsZXJTaG93Y2FzZS5SaWRlU3R5bGVyU2hvd2Nhc2VWZWhpY2xlVmlzdWFsaXphdGlvbiA9IFJpZGVTdHlsZXJTaG93Y2FzZVZlaGljbGVWaXN1YWxpemF0aW9uO1xufSkoUmlkZVN0eWxlclNob3djYXNlIHx8IChSaWRlU3R5bGVyU2hvd2Nhc2UgPSB7fSkpO1xuIixudWxsLCJuYW1lc3BhY2UgUmlkZVN0eWxlclNob3djYXNlIHtcclxuICAgIGltcG9ydCBXaGVlbE1vZGVsRGVzY3JpcHRpb25Nb2RlbCA9IHJpZGVzdHlsZXIuRGVzY3JpcHRpb25zLldoZWVsTW9kZWxEZXNjcmlwdGlvbk1vZGVsXHJcbiAgICBpbXBvcnQgV2hlZWxGaXRtZW50RGVzY3JpcHRpb25Nb2RlbCA9IHJpZGVzdHlsZXIuRGVzY3JpcHRpb25zLldoZWVsRml0bWVudERlc2NyaXB0aW9uTW9kZWw7XHJcbiAgICBpbXBvcnQgV2hlZWxQcmljaW5nRGF0YU9iamVjdCA9IHJpZGVzdHlsZXIuRGF0YU9iamVjdHMuV2hlZWxQcmljaW5nRGF0YU9iamVjdDtcclxuICAgIGV4cG9ydCBjbGFzcyBSaWRlU3R5bGVyU2hvd2Nhc2VXaGVlbE1vZGFsIGV4dGVuZHMgUmlkZVN0eWxlclNob3djYXNlUHJvZHVjdE1vZGFsIHtcclxuICAgICAgICBwcm90ZWN0ZWQgaW1hZ2U6UmVzaXplYWJsZVJlc291cmNlSW1hZ2U8XCJ3aGVlbC9pbWFnZVwiPjtcclxuXHJcbiAgICAgICAgcHJpdmF0ZSBzcGVjc1RhYmxlOiBSaWRlU3R5bGVyU2hvd2Nhc2VUYWJsZTxXaGVlbEZpdG1lbnREZXNjcmlwdGlvbk1vZGVsPjtcclxuICAgICAgICBwcml2YXRlIHN1bW1hcnlUYWJsZTpSaWRlU3R5bGVyU2hvd2Nhc2VUYWJsZTxTdW1tYXJ5VGFibGVSb3c+O1xyXG5cclxuICAgICAgICBjb25zdHJ1Y3RvcihzaG93Y2FzZUluc3RhbmNlOlJpZGVTdHlsZXJTaG93Y2FzZUluc3RhbmNlLCB3aGVlbE1vZGVsOldoZWVsTW9kZWxEZXNjcmlwdGlvbk1vZGVsKSB7XHJcbiAgICAgICAgICAgIHN1cGVyKHNob3djYXNlSW5zdGFuY2UpO1xyXG5cclxuICAgICAgICAgICAgLy8gSW1hZ2VcclxuICAgICAgICAgICAgdGhpcy5pbWFnZS51cGRhdGUoe1xyXG4gICAgICAgICAgICAgICAgV2hlZWxGaXRtZW50UmVzb3VyY2VUeXBlOiByaWRlc3R5bGVyLkRhdGFPYmplY3RzLldoZWVsRml0bWVudFJlc291cmNlVHlwZS5DYXRhbG9nLFxyXG4gICAgICAgICAgICAgICAgV2hlZWxNb2RlbDogd2hlZWxNb2RlbC5XaGVlbE1vZGVsSURcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAvLyBCcmFuZFxyXG4gICAgICAgICAgICBIVE1MSGVscGVyLnNldFRleHQodGhpcy5icmFuZFRpdGxlRWxlbWVudCwgd2hlZWxNb2RlbC5XaGVlbEJyYW5kTmFtZSk7XHJcblxyXG4gICAgICAgICAgICAvLyBNb2RlbCBOYW1lXHJcbiAgICAgICAgICAgIEhUTUxIZWxwZXIuc2V0VGV4dCh0aGlzLnRpdGxlRWxlbWVudCwgd2hlZWxNb2RlbC5XaGVlbE1vZGVsTmFtZSk7XHJcblxyXG4gICAgICAgICAgICAvLyBGaW5pc2hcclxuICAgICAgICAgICAgSFRNTEhlbHBlci5zZXRUZXh0KHRoaXMuc3VidGl0bGVFbGVtZW50LCB3aGVlbE1vZGVsLldoZWVsTW9kZWxGaW5pc2hEZXNjcmlwdGlvbik7XHJcblxyXG4gICAgICAgICAgICAvLyBTdW1tYXJ5IFRhYmxlXHJcbiAgICAgICAgICAgIHRoaXMuc3VtbWFyeVRhYmxlID0gbmV3IFJpZGVTdHlsZXJTaG93Y2FzZVRhYmxlPFN1bW1hcnlUYWJsZVJvdz4odGhpcy5zaG93Y2FzZSwge1xyXG4gICAgICAgICAgICAgICAgY29sdW1uczogW1xyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyOiBzdHJpbmdzLmdldFN0cmluZygnc2l6ZScpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjZWxsOiAnc2l6ZSdcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyOiBzdHJpbmdzLmdldFN0cmluZygncHJpY2UnKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2VsbDogJ3ByaWNlJ1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIF0sXHJcbiAgICAgICAgICAgICAgICBzdGFydExvYWRpbmc6IHRydWVcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB0aGlzLnN1bW1hcnlFbGVtZW50LmFwcGVuZENoaWxkKHRoaXMuc3VtbWFyeVRhYmxlLmNvbXBvbmVudCk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmJ1aWxkU3BlY3NQYWdlKCk7XHJcblxyXG4gICAgICAgICAgICBhcGkucmVxdWVzdCgnd2hlZWwvZ2V0Zml0bWVudGRlc2NyaXB0aW9ucycsIHtcclxuICAgICAgICAgICAgICAgIFdoZWVsTW9kZWw6IHdoZWVsTW9kZWwuV2hlZWxNb2RlbElELFxyXG4gICAgICAgICAgICAgICAgSW5jbHVkZVByb21vdGlvbnM6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBJbmNsdWRlUHJpY2luZzogdHJ1ZVxyXG4gICAgICAgICAgICB9KS5kb25lKHJlc3BvbnNlID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc3VtbWFyeVRhYmxlLmFwcGVuZFJvd3ModGhpcy5idWlsZFN1bW1hcnlUYWJsZShyZXNwb25zZS5GaXRtZW50cykpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zcGVjc1RhYmxlLmFwcGVuZFJvd3MocmVzcG9uc2UuRml0bWVudHMpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgYnVpbGRTdW1tYXJ5VGFibGUoZml0bWVudHM6IFdoZWVsRml0bWVudERlc2NyaXB0aW9uTW9kZWxbXSk6U3VtbWFyeVRhYmxlUm93W10ge1xyXG4gICAgICAgICAgICBjb25zdCBhbGxTaXplUHJpY2VDb21iaW5hdGlvbnM6e2RpYW1ldGVyOiBudW1iZXIsIHdpZHRoOiBudW1iZXIsIHByaWNlOm51bWJlcn1bXSA9IFtdO1xyXG5cclxuICAgICAgICAgICAgLy8gR2V0IGEgbGlzdCBvZiBlYWNoIGZpdG1lbnQgc2l6ZS9wcmljZSBjb21iaW5hdGlvblxyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGZpdG1lbnQgb2YgZml0bWVudHMpIHtcclxuICAgICAgICAgICAgICAgIGxldCBmaXRtZW50UHJpY2UgPSBSaWRlU3R5bGVyU2hvd2Nhc2VXaGVlbE1vZGFsLmdldEZpdG1lbnRSZXRhaWxQcmljZURhdGFPYmplY3QoZml0bWVudCk7XHJcbiAgICAgICAgICAgICAgICBsZXQgZml0bWVudFByaWNlQW1vdW50ID0gZml0bWVudFByaWNlID8gZml0bWVudFByaWNlLldoZWVsUHJpY2luZ0Ftb3VudCA6IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgYWxsU2l6ZVByaWNlQ29tYmluYXRpb25zLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgIGRpYW1ldGVyOiBmaXRtZW50LkRpYW1ldGVyTWluLFxyXG4gICAgICAgICAgICAgICAgICAgIHdpZHRoOiBmaXRtZW50LldpZHRoTWluLFxyXG4gICAgICAgICAgICAgICAgICAgIHByaWNlOiBmaXRtZW50UHJpY2VBbW91bnRcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBhbGxTaXplUHJpY2VDb21iaW5hdGlvbnMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgZGlhbWV0ZXI6IGZpdG1lbnQuRGlhbWV0ZXJNaW4sXHJcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IGZpdG1lbnQuV2lkdGhNYXgsXHJcbiAgICAgICAgICAgICAgICAgICAgcHJpY2U6IGZpdG1lbnRQcmljZUFtb3VudFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGFsbFNpemVQcmljZUNvbWJpbmF0aW9ucy5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICBkaWFtZXRlcjogZml0bWVudC5EaWFtZXRlck1heCxcclxuICAgICAgICAgICAgICAgICAgICB3aWR0aDogZml0bWVudC5XaWR0aE1pbixcclxuICAgICAgICAgICAgICAgICAgICBwcmljZTogZml0bWVudFByaWNlQW1vdW50XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgYWxsU2l6ZVByaWNlQ29tYmluYXRpb25zLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgIGRpYW1ldGVyOiBmaXRtZW50LkRpYW1ldGVyTWF4LFxyXG4gICAgICAgICAgICAgICAgICAgIHdpZHRoOiBmaXRtZW50LldpZHRoTWF4LFxyXG4gICAgICAgICAgICAgICAgICAgIHByaWNlOiBmaXRtZW50UHJpY2VBbW91bnRcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb25zdCBzaXplUHJpY2VSYW5nZXM6e1xyXG4gICAgICAgICAgICAgICAgW3NpemU6c3RyaW5nXTpQcmljZVJhbmdlXHJcbiAgICAgICAgICAgIH0gPSB7fTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIEdlbmVyYXRlIHByaWNlIHJhbmdlcyBmb3IgZWFjaCB1bmlxdWUgc2l6ZSBkZXNjcmlwdGlvbiBjcmVhdGVkIGFib3ZlXHJcbiAgICAgICAgICAgIGZvciAoY29uc3Qgc2l6ZVByaWNlQ29tYm8gb2YgYWxsU2l6ZVByaWNlQ29tYmluYXRpb25zKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB7ZGlhbWV0ZXIsIHByaWNlLCB3aWR0aH0gPSBzaXplUHJpY2VDb21ibztcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNpemU6c3RyaW5nID0gZGlhbWV0ZXIgKyAn4oCzIHggJyArIHdpZHRoO1xyXG5cclxuICAgICAgICAgICAgICAgIGxldCBwcmljZVJhbmdlOlByaWNlUmFuZ2U7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHNpemUgaW4gc2l6ZVByaWNlUmFuZ2VzID09PSBmYWxzZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHByaWNlUmFuZ2UgPSBzaXplUHJpY2VSYW5nZXNbc2l6ZV0gPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1pbjogSW5maW5pdHksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1heDogLUluZmluaXR5XHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcHJpY2VSYW5nZSA9IHNpemVQcmljZVJhbmdlc1tzaXplXTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAocHJpY2UpIHtcclxuICAgICAgICAgICAgICAgICAgICBOdW1iZXJIZWxwZXIuZXh0ZW5kUmFuZ2UocHJpY2UsIHByaWNlUmFuZ2UpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBUcmFuc2xhdGUgc2l6ZVByaWNlUmFuZ2VzIGludG8gU3VtbWFyeVRhYmxlUm93c1xyXG4gICAgICAgICAgICBsZXQgc3VtbWFyeVRhYmxlUm93czpTdW1tYXJ5VGFibGVSb3dbXSA9IFtdO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgcHJpY2VJc1Vuc3BlY2lmaWVkID0gKHByaWNlOm51bWJlcikgPT4ge1xyXG4gICAgICAgICAgICAgICAgLy8gUHJpY2UgbXVzdCBiZSBhIG51bWJlciwgYW5kIG5vdCArLSBpbmZpbml0eVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHR5cGVvZiBwcmljZSAhPT0gJ251bWJlcicgfHwgaXNOYU4ocHJpY2UpIHx8IHByaWNlID09PSBJbmZpbml0eSB8fCBwcmljZSA9PT0gLUluZmluaXR5O1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgZm9yIChjb25zdCBzaXplIGluIHNpemVQcmljZVJhbmdlcykge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFzaXplUHJpY2VSYW5nZXMuaGFzT3duUHJvcGVydHkoc2l6ZSkpIGNvbnRpbnVlO1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IHByaWNlUmFuZ2UgPSBzaXplUHJpY2VSYW5nZXNbc2l6ZV07XHJcblxyXG4gICAgICAgICAgICAgICAgbGV0IHByaWNlU3RyaW5nOnN0cmluZztcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAocHJpY2VJc1Vuc3BlY2lmaWVkKHByaWNlUmFuZ2UubWluKSB8fCBwcmljZUlzVW5zcGVjaWZpZWQocHJpY2VSYW5nZS5tYXgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcHJpY2VTdHJpbmcgPSBzdHJpbmdzLmdldFN0cmluZygnY2FsbCcpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocHJpY2VSYW5nZS5taW4gPT09IHByaWNlUmFuZ2UubWF4KSBwcmljZVN0cmluZyA9IHN0cmluZ3MuZm9ybWF0KCkuY3VycmVuY3kocHJpY2VSYW5nZS5taW4sICckJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBwcmljZVN0cmluZyA9IHN0cmluZ3MuZm9ybWF0KCkuY3VycmVuY3kocHJpY2VSYW5nZS5taW4sICckJykgKyAnIC0gJyArIHN0cmluZ3MuZm9ybWF0KCkuY3VycmVuY3kocHJpY2VSYW5nZS5tYXgsICckJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgc3VtbWFyeVRhYmxlUm93cy5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICBzaXplOiBzaXplLFxyXG4gICAgICAgICAgICAgICAgICAgIHByaWNlOiBwcmljZVN0cmluZ1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBzdW1tYXJ5VGFibGVSb3dzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBidWlsZFNwZWNzUGFnZSgpIHtcclxuICAgICAgICAgICAgdGhpcy5zcGVjc1RhYmxlID0gbmV3IFJpZGVTdHlsZXJTaG93Y2FzZVRhYmxlPFdoZWVsRml0bWVudERlc2NyaXB0aW9uTW9kZWw+KHRoaXMuc2hvd2Nhc2UsIHtcclxuICAgICAgICAgICAgICAgIGNvbHVtbnM6IFtcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcjogc3RyaW5ncy5nZXRTdHJpbmcoJ3NpemUnKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2VsbDogUmlkZVN0eWxlclNob3djYXNlV2hlZWxNb2RhbC5nZXRGaXRtZW50U2l6ZURlc2NyaXB0aW9uXHJcbiAgICAgICAgICAgICAgICAgICAgfSwgXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXI6IHN0cmluZ3MuZ2V0U3RyaW5nKCdvZmZzZXQnKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2VsbDogZml0bWVudCA9PiBSaWRlU3R5bGVyU2hvd2Nhc2VUYWJsZS5mb3JtYXRDZWxsKGZpdG1lbnQsICdPZmZzZXRNaW4nLCAnbW0nKVxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXI6IHN0cmluZ3MuZ2V0U3RyaW5nKCdib2x0LXBhdHRlcm4nKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2VsbDogJ0JvbHRQYXR0ZXJuRGVzY3JpcHRpb24nXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcjogc3RyaW5ncy5nZXRTdHJpbmcoJ2NlbnRlcmJvcmUnKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2VsbDogZml0bWVudCA9PiBSaWRlU3R5bGVyU2hvd2Nhc2VUYWJsZS5mb3JtYXRDZWxsKGZpdG1lbnQsICdDZW50ZXJib3JlTU0nLCAnbW0nKVxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXI6ICdQcmljZScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNlbGw6IFJpZGVTdHlsZXJTaG93Y2FzZVdoZWVsTW9kYWwuZ2V0Rml0bWVudFByaWNlXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcjogc3RyaW5ncy5nZXRTdHJpbmcoJ2l0ZW0tbnVtYmVyJyksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNlbGw6IFJpZGVTdHlsZXJTaG93Y2FzZVdoZWVsTW9kYWwuZ2V0Rml0bWVudEl0ZW1OdW1iZXJcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBdXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgY29uc3Qgc3BlY3NDb250YWluZXIgPSBIVE1MSGVscGVyLmNyZWF0ZUVsZW1lbnQoe1xyXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnc2Nyb2xsYWJsZScsXHJcbiAgICAgICAgICAgICAgICBhcHBlbmQ6IHRoaXMuc3BlY3NUYWJsZS5jb21wb25lbnRcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmFkZFBhZ2Uoe1xyXG4gICAgICAgICAgICAgICAgY29udGFpbmVyOiBzcGVjc0NvbnRhaW5lcixcclxuICAgICAgICAgICAgICAgIGxhYmVsOiBzdHJpbmdzLmdldFN0cmluZygnc3BlY2lmaWNhdGlvbnMnKVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBjcmVhdGVJbWFnZSgpOlJlc2l6ZWFibGVSZXNvdXJjZUltYWdlPFwid2hlZWwvaW1hZ2VcIj4ge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFJlc2l6ZWFibGVSZXNvdXJjZUltYWdlPFwid2hlZWwvaW1hZ2VcIj4odGhpcy5pbWFnZUNvbnRhaW5lciwge1xyXG4gICAgICAgICAgICAgICAgYWN0aW9uOiBcIndoZWVsL2ltYWdlXCIsXHJcbiAgICAgICAgICAgICAgICBiYXNlSW5zdHJ1Y3Rpb25zOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgUG9zaXRpb25YOiByaWRlc3R5bGVyLlJlcXVlc3RzLkltYWdlUG9zaXRpb24uQ2VudGVyLFxyXG4gICAgICAgICAgICAgICAgICAgIFBvc2l0aW9uWTogcmlkZXN0eWxlci5SZXF1ZXN0cy5JbWFnZVBvc2l0aW9uLk5lYXIsXHJcbiAgICAgICAgICAgICAgICAgICAgSW5jbHVkZVNoYWRvdzogdHJ1ZVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIGdldEZpdG1lbnRSZXRhaWxQcmljZURhdGFPYmplY3QoZml0bWVudDogV2hlZWxGaXRtZW50RGVzY3JpcHRpb25Nb2RlbCk6V2hlZWxQcmljaW5nRGF0YU9iamVjdCB7XHJcbiAgICAgICAgICAgIHJldHVybiBmaXRtZW50LlByaWNpbmcgJiYgZml0bWVudC5QcmljaW5nWydSZXRhaWwnXSB8fCB1bmRlZmluZWQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBnZXRGaXRtZW50U2l6ZURlc2NyaXB0aW9uKGZpdG1lbnQ6V2hlZWxGaXRtZW50RGVzY3JpcHRpb25Nb2RlbCk6c3RyaW5nIHtcclxuICAgICAgICAgICAgbGV0IHtEaWFtZXRlck1pbiwgV2lkdGhNaW59ID0gZml0bWVudDtcclxuXHJcbiAgICAgICAgICAgIGlmICghRGlhbWV0ZXJNaW4gfHwgIVdpZHRoTWluKSByZXR1cm4gUmlkZVN0eWxlclNob3djYXNlVGFibGUuZW1wdHlDZWxsU3RyaW5nO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGAke0RpYW1ldGVyTWlufeKAsyB4ICR7V2lkdGhNaW59YDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIGdldEZpdG1lbnRQcmljZShmaXRtZW50OiBXaGVlbEZpdG1lbnREZXNjcmlwdGlvbk1vZGVsKTpzdHJpbmcge1xyXG4gICAgICAgICAgICBjb25zdCBub1ByaWNlU3RyaW5nID0gc3RyaW5ncy5nZXRTdHJpbmcoJ2NhbGwnKTtcclxuICAgICAgICAgICAgbGV0IHJldGFpbFByaWNlRGF0YU9iamVjdDpXaGVlbFByaWNpbmdEYXRhT2JqZWN0ID0gUmlkZVN0eWxlclNob3djYXNlV2hlZWxNb2RhbC5nZXRGaXRtZW50UmV0YWlsUHJpY2VEYXRhT2JqZWN0KGZpdG1lbnQpO1xyXG4gICAgXHJcbiAgICAgICAgICAgIGlmICghcmV0YWlsUHJpY2VEYXRhT2JqZWN0KSByZXR1cm4gbm9QcmljZVN0cmluZztcclxuICAgIFxyXG4gICAgICAgICAgICBsZXQgcHJpY2U6bnVtYmVyID0gcmV0YWlsUHJpY2VEYXRhT2JqZWN0LldoZWVsUHJpY2luZ0Ftb3VudDtcclxuICAgIFxyXG4gICAgICAgICAgICByZXR1cm4gcHJpY2UgPyBzdHJpbmdzLmZvcm1hdCgpLmN1cnJlbmN5KHByaWNlLCAnJCcpIDogbm9QcmljZVN0cmluZztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIGdldEZpdG1lbnRJdGVtTnVtYmVyKGZpdG1lbnQ6IFdoZWVsRml0bWVudERlc2NyaXB0aW9uTW9kZWwpOnN0cmluZyB7XHJcbiAgICAgICAgICAgIGxldCByZXRhaWxQcmljZURhdGFPYmplY3Q6V2hlZWxQcmljaW5nRGF0YU9iamVjdCA9IFJpZGVTdHlsZXJTaG93Y2FzZVdoZWVsTW9kYWwuZ2V0Rml0bWVudFJldGFpbFByaWNlRGF0YU9iamVjdChmaXRtZW50KTtcclxuXHJcbiAgICAgICAgICAgIGxldCBpdGVtTnVtYmVyOnN0cmluZztcclxuXHJcbiAgICAgICAgICAgIC8vIEl0ZW0gbnVtYmVyIGlzIHRoZSByZXRhaWwgcHJpY2luZyBpdGVtIG51bWJlciBieSBkZWZhdWx0XHJcbiAgICAgICAgICAgIGlmIChyZXRhaWxQcmljZURhdGFPYmplY3QpIGl0ZW1OdW1iZXIgPSByZXRhaWxQcmljZURhdGFPYmplY3QuV2hlZWxQcmljaW5nSXRlbU51bWJlcjtcclxuICAgICAgICAgICAgLy8gSWYgdGhlcmUncyBubyByZXRhaWwgcHJpY2luZywgb3IgdGhlIHJldGFpbCBwcmljZSBkb2Vzbid0IGhhdmUgYSBpdGVtIG51bWJlciB1c2UgdGhlIGZpdG1lbnQncyBwYXJ0IG51bWJlclxyXG4gICAgICAgICAgICBpZiAoIWl0ZW1OdW1iZXIpIGl0ZW1OdW1iZXIgPSBmaXRtZW50LlBhcnROdW1iZXI7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gaXRlbU51bWJlciB8fCBSaWRlU3R5bGVyU2hvd2Nhc2VUYWJsZS5lbXB0eUNlbGxTdHJpbmc7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGludGVyZmFjZSBQcmljZVJhbmdlIHtcclxuICAgICAgICBtaW46IG51bWJlcixcclxuICAgICAgICBtYXg6IG51bWJlclxyXG4gICAgfVxyXG5cclxuICAgIGludGVyZmFjZSBTdW1tYXJ5VGFibGVSb3cge1xyXG4gICAgICAgIHNpemU6IHN0cmluZztcclxuICAgICAgICBwcmljZTogc3RyaW5nO1xyXG4gICAgfVxyXG59IiwibmFtZXNwYWNlIFJpZGVTdHlsZXJTaG93Y2FzZSB7XHJcbiAgICBpbXBvcnQgV2hlZWxGaWx0ZXJNb2RlbCA9IHJpZGVzdHlsZXIuUmVxdWVzdHMuV2hlZWxGaWx0ZXJNb2RlbDtcclxuICAgIGltcG9ydCBXaGVlbE1vZGVsRGVzY3JpcHRpb25Nb2RlbCA9IHJpZGVzdHlsZXIuRGVzY3JpcHRpb25zLldoZWVsTW9kZWxEZXNjcmlwdGlvbk1vZGVsO1xyXG4gICAgaW1wb3J0IFdoZWVsTW9kZWxSZXF1ZXN0ID0gcmlkZXN0eWxlci5SZXF1ZXN0cy5XaGVlbE1vZGVsRGVzY3JpcHRpb25SZXF1ZXN0TW9kZWw7XHJcblxyXG4gICAgY29uc3Qgb3B0aW9uQ2xhc3MgPSAncmlkZXN0eWxlci1zaG93Y2FzZS1wYWdpbmF0aW9uLW9wdGlvbic7XHJcbiAgICBjb25zdCBub1Jlc3VsdHNDbGFzcyA9IG9wdGlvbkNsYXNzICsgJy1uby1yZXN1bHRzJ1xyXG5cclxuICAgIGV4cG9ydCBjbGFzcyBSaWRlU3R5bGVyU2hvd2Nhc2VXaGVlbFNlbGVjdG9yIGV4dGVuZHMgUmlkZVN0eWxlclNob3djYXNlUHJvZHVjdFNlbGVjdG9yPFdoZWVsTW9kZWxEZXNjcmlwdGlvbk1vZGVsLCBXaGVlbEZpbHRlck1vZGVsPiB7XHJcbiAgICAgICAgcHJpdmF0ZSByZWFkb25seSB2ZWhpY2xlQ29uZmlndXJhdGlvbklEOnN0cmluZztcclxuICAgICAgICBwcml2YXRlIHJlYWRvbmx5IHN1cHBvcnRlZFZlaGljbGVJbWFnZXJ5OiB7XHJcbiAgICAgICAgICAgIGFuZ2xlZDogYm9vbGVhbjtcclxuICAgICAgICAgICAgc2lkZTogYm9vbGVhbjtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgcmVhZG9ubHkgZGVmYXVsdEZpbHRlcnM6IFdoZWVsRmlsdGVyTW9kZWw7XHJcbiAgICAgICAgcHJvdGVjdGVkIGN1cnJlbnRGaWx0ZXJzOiBXaGVlbEZpbHRlck1vZGVsO1xyXG5cclxuICAgICAgICBjb25zdHJ1Y3RvcihzaG93Y2FzZUluc3RhbmNlOlJpZGVTdHlsZXJTaG93Y2FzZUluc3RhbmNlKSB7XHJcbiAgICAgICAgICAgIHN1cGVyKHNob3djYXNlSW5zdGFuY2UpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIHNob3dOb1Jlc3VsdHMoKSB7XHJcbiAgICAgICAgICAgIHRoaXMubm9SZXN1bHRzRWxlbWVudCA9IEhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCgnZGl2Jywge1xyXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBvcHRpb25DbGFzcyArICcgJyArIG5vUmVzdWx0c0NsYXNzLFxyXG4gICAgICAgICAgICAgICAgdGV4dDogc3RyaW5ncy5nZXRTdHJpbmcoJ25vLXdoZWVsLXJlc3VsdHMnKSArICcgJyxcclxuICAgICAgICAgICAgICAgIGFwcGVuZFRvOiB0aGlzLm9wdGlvbkNvbnRhaW5lclxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIEhUTUxIZWxwZXIuY3JlYXRlQnV0dG9uKHtcclxuICAgICAgICAgICAgICAgIGFwcGVuZFRvOiB0aGlzLm5vUmVzdWx0c0VsZW1lbnQsXHJcbiAgICAgICAgICAgICAgICB0ZXh0OiBzdHJpbmdzLmdldFN0cmluZygnY2hhbmdlLXZlaGljbGUnKSxcclxuICAgICAgICAgICAgICAgIGxpbms6IHRydWVcclxuICAgICAgICAgICAgfSkuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLmNoYW5nZVN0YXRlKFN0YXRlcy5DaG9vc2VWZWhpY2xlKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgY291bnRSZXN1bHRzKGZpbHRlcnM6IFdoZWVsRmlsdGVyTW9kZWwpOiByaWRlc3R5bGVyLlJpZGVTdHlsZXJQcm9taXNlPG51bWJlciwgcmlkZXN0eWxlci5SaWRlU3R5bGVyQVBJUmVzcG9uc2U+IHtcclxuICAgICAgICAgICAgcmV0dXJuIFByb21pc2VIZWxwZXIudGhlbihhcGkucmVxdWVzdChcIndoZWVsL2NvdW50bW9kZWxzXCIsIGZpbHRlcnMpLCByZXNwb25zZSA9PiByZXNwb25zZS5Db3VudCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHByb3RlY3RlZCBnZXRSZXN1bHRzKGZpbHRlcnM6IFdoZWVsRmlsdGVyTW9kZWwpOiByaWRlc3R5bGVyLlJpZGVTdHlsZXJQcm9taXNlPFdoZWVsTW9kZWxEZXNjcmlwdGlvbk1vZGVsW10sIHJpZGVzdHlsZXIuUmlkZVN0eWxlckFQSVJlc3BvbnNlPiB7XHJcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlSGVscGVyLnRoZW4oYXBpLnJlcXVlc3QoXCJ3aGVlbC9nZXRtb2RlbGRlc2NyaXB0aW9uc1wiLCBPYmplY3RIZWxwZXIuYXNzaWduPFdoZWVsTW9kZWxSZXF1ZXN0Pih7XHJcbiAgICAgICAgICAgICAgICBJbmNsdWRlTWV0YUtleXM6IFtcclxuICAgICAgICAgICAgICAgICAgICAnRGVzY3JpcHRpb24nLFxyXG4gICAgICAgICAgICAgICAgICAgICdIaWdobGlnaHRzJ1xyXG4gICAgICAgICAgICAgICAgXSxcclxuICAgICAgICAgICAgICAgIEhhc0ZpdG1lbnRzOiB0cnVlXHJcbiAgICAgICAgICAgIH0sIGZpbHRlcnMpKSwgcmVzcG9uc2UgPT4gcmVzcG9uc2UuTW9kZWxzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHJvdGVjdGVkIHByb2R1Y3RGaWx0ZXIocHJvZHVjdDogV2hlZWxNb2RlbERlc2NyaXB0aW9uTW9kZWwpOiBib29sZWFuIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHByb3RlY3RlZCBwcm9kdWN0SW1hZ2VTb3VyY2UocHJvZHVjdDogV2hlZWxNb2RlbERlc2NyaXB0aW9uTW9kZWwpOiBzdHJpbmcge1xyXG4gICAgICAgICAgICByZXR1cm4gcmlkZXN0eWxlci53aGVlbC5pbWFnZSh7XHJcbiAgICAgICAgICAgICAgICBXaGVlbEZpdG1lbnRSZXNvdXJjZVR5cGU6IHJpZGVzdHlsZXIuRGF0YU9iamVjdHMuV2hlZWxGaXRtZW50UmVzb3VyY2VUeXBlLkNhdGFsb2csXHJcbiAgICAgICAgICAgICAgICBXaGVlbE1vZGVsOiBwcm9kdWN0LldoZWVsTW9kZWxJRCxcclxuICAgICAgICAgICAgICAgIFdpZHRoOiAxMDAsXHJcbiAgICAgICAgICAgICAgICBIZWlnaHQ6IDEwMCxcclxuICAgICAgICAgICAgICAgIFBvc2l0aW9uWDogcmlkZXN0eWxlci5SZXF1ZXN0cy5JbWFnZVBvc2l0aW9uLkNlbnRlcixcclxuICAgICAgICAgICAgICAgIFBvc2l0aW9uWTogcmlkZXN0eWxlci5SZXF1ZXN0cy5JbWFnZVBvc2l0aW9uLkNlbnRlcixcclxuICAgICAgICAgICAgICAgIEluY2x1ZGVTaGFkb3c6IHRydWVcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHByb3RlY3RlZCBwcm9kdWN0SW1hZ2VMYWJlbHMocHJvZHVjdDogV2hlZWxNb2RlbERlc2NyaXB0aW9uTW9kZWwpOiB7IHByaW1hcnk6IHN0cmluZzsgc2Vjb25kYXJ5Pzogc3RyaW5nOyB0ZXJ0aWFyeT86IHN0cmluZzsgfSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBwcmltYXJ5OiBwcm9kdWN0LldoZWVsQnJhbmROYW1lLFxyXG4gICAgICAgICAgICAgICAgc2Vjb25kYXJ5OiBwcm9kdWN0LldoZWVsTW9kZWxOYW1lLFxyXG4gICAgICAgICAgICAgICAgdGVydGlhcnk6IHByb2R1Y3QuV2hlZWxNb2RlbEZpbmlzaERlc2NyaXB0aW9uXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59IiwibmFtZXNwYWNlIFJpZGVTdHlsZXJTaG93Y2FzZSB7XG4gICAgY29uc3QgY2xhc3NOYW1lID0gJ3JpZGVzdHlsZXItc2hvd2Nhc2UtdGlyZS1kZXRhaWxzJ1xuXG4gICAgZXhwb3J0IGNsYXNzIFRpcmVEZXRhaWxzIGV4dGVuZHMgQ29tcG9uZW50QmFzZSB7XG4gICAgICAgIHByaXZhdGUgdGlyZU5hbWVFbGVtZW50OkhUTUxFbGVtZW50O1xuICAgICAgICBwcml2YXRlIHRpcmVEZXNjcmlwdGlvbkVsZW1lbnQ6SFRNTEVsZW1lbnQ7XG5cbiAgICAgICAgcHJvdGVjdGVkIGluaXRpYWxpemVDb21wb25lbnQoKSB7XG4gICAgICAgICAgICB0aGlzLmNvbXBvbmVudCA9IEhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudFdpdGhDbGFzcygnZGl2JywgY2xhc3NOYW1lICsgXCIgcmlkZXN0eWxlci1zaG93Y2FzZS1kZXRhaWxzXCIpO1xuXG4gICAgICAgICAgICBIVE1MSGVscGVyLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IGNsYXNzTmFtZSArICctdGl0bGUnICsgXCIgcmlkZXN0eWxlci1zaG93Y2FzZS1kZXRhaWxzLXRpdGxlXCIsXG4gICAgICAgICAgICAgICAgdGV4dDogc3RyaW5ncy5nZXRTdHJpbmcoJ3RpcmUtZGV0YWlscycpLFxuICAgICAgICAgICAgICAgIGFwcGVuZFRvOiB0aGlzLmNvbXBvbmVudFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHRoaXMudGlyZU5hbWVFbGVtZW50ID0gSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBjbGFzc05hbWUgKyAnLW5hbWUnLFxuICAgICAgICAgICAgICAgIGFwcGVuZFRvOiB0aGlzLmNvbXBvbmVudFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHRoaXMudGlyZURlc2NyaXB0aW9uRWxlbWVudCA9IEhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCgnZGl2Jywge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogY2xhc3NOYW1lICsgJy1kZXNjcmlwdGlvbiByaWRlc3R5bGVyLXNob3djYXNlLWRldGFpbHMtc2Vjb25kYXJ5JyxcbiAgICAgICAgICAgICAgICBhcHBlbmRUbzogdGhpcy5jb21wb25lbnRcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB0aGlzLnN0YXRlLmFmdGVyRGF0YUNoYW5nZShkYXRhID0+IHRoaXMub25EYXRhQ2hhbmdlKGRhdGEpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHByaXZhdGUgb25EYXRhQ2hhbmdlKGRhdGE6c3RhdGUuU3RhdGVEYXRhKSB7XG4gICAgICAgICAgICBjb25zdCBjdXJyZW50VGlyZSA9IGRhdGEuY3VycmVudFRpcmU7XG5cbiAgICAgICAgICAgIHRoaXMuY29tcG9uZW50LnN0eWxlLmRpc3BsYXkgPSBjdXJyZW50VGlyZSA/ICcnIDogJ25vbmUnO1xuXG4gICAgICAgICAgICBpZiAoY3VycmVudFRpcmUpIHtcbiAgICAgICAgICAgICAgICBIVE1MSGVscGVyLnNldFRleHQodGhpcy50aXJlTmFtZUVsZW1lbnQsIGN1cnJlbnRUaXJlLlRpcmVCcmFuZE5hbWUgKyAnICcgKyBjdXJyZW50VGlyZS5UaXJlTW9kZWxOYW1lKTtcbiAgICAgICAgICAgICAgICBIVE1MSGVscGVyLnNldFRleHQodGhpcy50aXJlRGVzY3JpcHRpb25FbGVtZW50LCBjdXJyZW50VGlyZS5BdHRyaWJ1dGVzICYmIGN1cnJlbnRUaXJlLkF0dHJpYnV0ZXMubGVuZ3RoID9cbiAgICAgICAgICAgICAgICAgICAgY3VycmVudFRpcmUuQXR0cmlidXRlcy5qb2luKCcsICcpIDogJycpXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59IiwibmFtZXNwYWNlIFJpZGVTdHlsZXJTaG93Y2FzZSB7XHJcbiAgICBjb25zdCBjbGFzc05hbWUgPSAncmlkZXN0eWxlci1zaG93Y2FzZS12ZWhpY2xlLWRldGFpbHMnXHJcbiAgICBjb25zdCBmaXJzdFBhaW50Q29sb3IgPSAnIzk5OSc7XHJcblxyXG4gICAgZXhwb3J0IGNsYXNzIFZlaGljbGVEZXRhaWxzIGV4dGVuZHMgQ29tcG9uZW50QmFzZSB7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFRoZSB2ZWhpY2xlIGRlc2NyaXB0aW9uXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHJpdmF0ZSB2ZWhpY2xlRGVzY3JpcHRpb25FbGVtZW50OkhUTUxFbGVtZW50O1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFRoZSBwYWludCBzd2F0Y2ggbmV4dCB0byB0aGUgdmVoaWNsZSBkZXNjcmlwdGlvblxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHByaXZhdGUgdmVoaWNsZVBhaW50U3dhdGNoRWxlbWVudDpIVE1MRWxlbWVudDtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBUaGUgdGlyZSBzaXplXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHJpdmF0ZSB0aXJlU2l6ZUVsZW1lbnQ6SFRNTEVsZW1lbnQ7XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBpbml0aWFsaXplQ29tcG9uZW50KCkge1xyXG4gICAgICAgICAgICB0aGlzLmNvbXBvbmVudCA9IEhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudFdpdGhDbGFzcygnZGl2JywgY2xhc3NOYW1lICsgXCIgcmlkZXN0eWxlci1zaG93Y2FzZS1kZXRhaWxzXCIpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gVGl0bGVcclxuICAgICAgICAgICAgSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XHJcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IGNsYXNzTmFtZSArICctdGl0bGUnICsgXCIgcmlkZXN0eWxlci1zaG93Y2FzZS1kZXRhaWxzLXRpdGxlXCIsXHJcbiAgICAgICAgICAgICAgICB0ZXh0OiBzdHJpbmdzLmdldFN0cmluZygndmVoaWNsZS1kZXRhaWxzJyksXHJcbiAgICAgICAgICAgICAgICBhcHBlbmRUbzogdGhpcy5jb21wb25lbnRcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAvLyBWZWhpY2xlIERlc2NyaXB0aW9uL1BhaW50IFN3YXRjaCBDb250YWluZXJcclxuICAgICAgICAgICAgSFRNTEhlbHBlci5jcmVhdGVFbGVtZW50KCdkaXYnLCB7XHJcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IGNsYXNzTmFtZSArICctdmVoaWNsZScsXHJcbiAgICAgICAgICAgICAgICBhcHBlbmQ6IFtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAvLyBQYWludCBTd2F0Y2hcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnZlaGljbGVQYWludFN3YXRjaEVsZW1lbnQgPSBIVE1MSGVscGVyLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBjbGFzc05hbWUgKyAnLXZlaGljbGUtc3dhdGNoIHJpZGVzdHlsZXItc2hvd2Nhc2UtcGFpbnQtc3dhdGNoJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogZmlyc3RQYWludENvbG9yXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KSxcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gVmVoaWNsZSBEZXNjcmlwdGlvblxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudmVoaWNsZURlc2NyaXB0aW9uRWxlbWVudCA9IEhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCgnZGl2Jywge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IGNsYXNzTmFtZSArICctdmVoaWNsZS1kZXRhaWxzJ1xyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcblxyXG4gICAgICAgICAgICAgICAgXSxcclxuICAgICAgICAgICAgICAgIGFwcGVuZFRvOiB0aGlzLmNvbXBvbmVudFxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIC8vIFRpcmUgU2l6ZVxyXG4gICAgICAgICAgICB0aGlzLnRpcmVTaXplRWxlbWVudCA9IEhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCgnZGl2Jywge1xyXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBjbGFzc05hbWUgKyAnLXRpcmUtc2l6ZSByaWRlc3R5bGVyLXNob3djYXNlLWRldGFpbHMtc2Vjb25kYXJ5JyxcclxuICAgICAgICAgICAgICAgIGFwcGVuZFRvOiB0aGlzLmNvbXBvbmVudFxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIC8vIENoYW5nZSBWZWhpY2xlIEJ1dHRvblxyXG4gICAgICAgICAgICBIVE1MSGVscGVyLmNyZWF0ZUJ1dHRvbih7XHJcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IGNsYXNzTmFtZSArICctY2hhbmdlLXZlaGljbGUnLFxyXG4gICAgICAgICAgICAgICAgYXBwZW5kVG86IHRoaXMuY29tcG9uZW50LFxyXG4gICAgICAgICAgICAgICAgdGV4dDogc3RyaW5ncy5nZXRTdHJpbmcoJ2NoYW5nZS12ZWhpY2xlJyksXHJcbiAgICAgICAgICAgICAgICBsaW5rOiB0cnVlXHJcbiAgICAgICAgICAgIH0pLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5jaGFuZ2VTdGF0ZShTdGF0ZXMuQ2hvb3NlVmVoaWNsZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgLy8gTGlzdGVuIGZvciBkYXRhIGNoYW5nZXNcclxuICAgICAgICAgICAgdGhpcy5zdGF0ZS5hZnRlckRhdGFDaGFuZ2UoZGF0YSA9PiB0aGlzLm9uRGF0YUNoYW5nZShkYXRhKSk7XHJcblxyXG4gICAgICAgICAgICAvLyBTd2l0Y2ggdG8gcGFpbnQgd2hlbiBjbGlja2luZyBvbiB0aGUgcGFpbnQgc3dhdGNoXHJcbiAgICAgICAgICAgIHRoaXMudmVoaWNsZVBhaW50U3dhdGNoRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdGhpcy5wYWludFN3YXRjaENsaWNrQ2FsbGJhY2sgPT09ICdmdW5jdGlvbicpIFxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFpbnRTd2F0Y2hDbGlja0NhbGxiYWNrKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQSBjYWxsIGJhY2sgZm9yIHdoZW4gdGhlIHBhaW50IHN3YXRjaCB3YXMgY2xpY2tlZCBvblxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBwYWludFN3YXRjaENsaWNrQ2FsbGJhY2s6KCkgPT4gdm9pZDtcclxuXHJcbiAgICAgICAgcHJpdmF0ZSBvbkRhdGFDaGFuZ2UoZGF0YTpzdGF0ZS5TdGF0ZURhdGEpIHtcclxuICAgICAgICAgICAgY29uc3QgdmVoaWNsZURlc2NyaXB0aW9uID0gZGF0YS5jdXJyZW50VmVoaWNsZURlc2NyaXB0aW9uO1xyXG4gICAgICAgICAgICBjb25zdCBzaG9ydFZlaGljbGVEZXNjcmlwdGlvbiAgPSB2ZWhpY2xlRGVzY3JpcHRpb24ubGVuZ3RoID4gNDAgPyB2ZWhpY2xlRGVzY3JpcHRpb24uc3Vic3RyaW5nKDAsIDM4KSArICcuLi4nIDogdmVoaWNsZURlc2NyaXB0aW9uO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgdGhpcy52ZWhpY2xlUGFpbnRTd2F0Y2hFbGVtZW50LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IGRhdGEuY3VycmVudFBhaW50U2NoZW1lID8gZGF0YS5jdXJyZW50UGFpbnRTY2hlbWUuQ29sb3JzWzBdLkhleCA6IGZpcnN0UGFpbnRDb2xvcjtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIEhUTUxIZWxwZXIuc2V0VGV4dCh0aGlzLnZlaGljbGVEZXNjcmlwdGlvbkVsZW1lbnQsIHNob3J0VmVoaWNsZURlc2NyaXB0aW9uKTtcclxuICAgICAgICAgICAgSFRNTEhlbHBlci5zZXRUZXh0KHRoaXMudGlyZVNpemVFbGVtZW50LCBkYXRhLmN1cnJlbnRWZWhpY2xlVGlyZU9wdGlvbkRlc2NyaXB0aW9uKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iLCJuYW1lc3BhY2UgUmlkZVN0eWxlclNob3djYXNlIHtcbiAgICBjb25zdCBjbGFzc05hbWUgPSAncmlkZXN0eWxlci1zaG93Y2FzZS13aGVlbC1kZXRhaWxzJ1xuXG4gICAgZXhwb3J0IGNsYXNzIFdoZWVsRGV0YWlscyBleHRlbmRzIENvbXBvbmVudEJhc2Uge1xuICAgICAgICBwcml2YXRlIHdoZWVsTmFtZUVsZW1lbnQ6SFRNTEVsZW1lbnQ7XG4gICAgICAgIHByaXZhdGUgd2hlZWxEZXNjcmlwdGlvbkVsZW1lbnQ6SFRNTEVsZW1lbnQ7XG5cbiAgICAgICAgcHJvdGVjdGVkIGluaXRpYWxpemVDb21wb25lbnQoKSB7XG4gICAgICAgICAgICB0aGlzLmNvbXBvbmVudCA9IEhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudFdpdGhDbGFzcygnZGl2JywgY2xhc3NOYW1lICsgXCIgcmlkZXN0eWxlci1zaG93Y2FzZS1kZXRhaWxzXCIpO1xuXG4gICAgICAgICAgICBIVE1MSGVscGVyLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IGNsYXNzTmFtZSArICctdGl0bGUnICsgXCIgcmlkZXN0eWxlci1zaG93Y2FzZS1kZXRhaWxzLXRpdGxlXCIsXG4gICAgICAgICAgICAgICAgdGV4dDogc3RyaW5ncy5nZXRTdHJpbmcoJ3doZWVsLWRldGFpbHMnKSxcbiAgICAgICAgICAgICAgICBhcHBlbmRUbzogdGhpcy5jb21wb25lbnRcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB0aGlzLndoZWVsTmFtZUVsZW1lbnQgPSBIVE1MSGVscGVyLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6IGNsYXNzTmFtZSArICctbmFtZScsXG4gICAgICAgICAgICAgICAgYXBwZW5kVG86IHRoaXMuY29tcG9uZW50XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdGhpcy53aGVlbERlc2NyaXB0aW9uRWxlbWVudCA9IEhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCgnZGl2Jywge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogY2xhc3NOYW1lICsgJy1kZXNjcmlwdGlvbiByaWRlc3R5bGVyLXNob3djYXNlLWRldGFpbHMtc2Vjb25kYXJ5JyxcbiAgICAgICAgICAgICAgICBhcHBlbmRUbzogdGhpcy5jb21wb25lbnRcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBIVE1MSGVscGVyLmNyZWF0ZUJ1dHRvbih7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBjbGFzc05hbWUgKyAnLWZlYXR1cmVzLXNwZWNzJyxcbiAgICAgICAgICAgICAgICBhcHBlbmRUbzogdGhpcy5jb21wb25lbnQsXG4gICAgICAgICAgICAgICAgdGV4dDogc3RyaW5ncy5nZXRTdHJpbmcoJ3doZWVsLWZlYXR1cmVzLXNwZWNzJyksXG4gICAgICAgICAgICAgICAgbGluazogdHJ1ZVxuICAgICAgICAgICAgfSkuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5zaG93V2hlZWxNb2RhbCgpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHRoaXMuc3RhdGUuYWZ0ZXJEYXRhQ2hhbmdlKGRhdGEgPT4gdGhpcy5vbkRhdGFDaGFuZ2UoZGF0YSkpO1xuICAgICAgICB9XG5cbiAgICAgICAgcHJvdGVjdGVkIHNob3dXaGVlbE1vZGFsKCkge1xuICAgICAgICAgICAgY29uc3Qgc3RhdGVEYXRhID0gdGhpcy5zdGF0ZS5nZXREYXRhKCk7XG5cbiAgICAgICAgICAgIG5ldyBSaWRlU3R5bGVyU2hvd2Nhc2VXaGVlbE1vZGFsKHRoaXMuc2hvd2Nhc2UsIHN0YXRlRGF0YS5jdXJyZW50V2hlZWwpLnNob3coKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHByb3RlY3RlZCBvbkRhdGFDaGFuZ2UoZGF0YTpzdGF0ZS5TdGF0ZURhdGEpIHtcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRXaGVlbCA9IGRhdGEuY3VycmVudFdoZWVsO1xuICAgICAgICAgICAgY29uc3QgY3VycmVudFdoZWVsRml0bWVudCA9IGRhdGEuY3VycmVudFdoZWVsRml0bWVudDtcblxuICAgICAgICAgICAgdGhpcy5jb21wb25lbnQuc3R5bGUuZGlzcGxheSA9IGN1cnJlbnRXaGVlbCA/ICcnIDogJ25vbmUnO1xuXG4gICAgICAgICAgICBpZiAoY3VycmVudFdoZWVsKSB7XG4gICAgICAgICAgICAgICAgSFRNTEhlbHBlci5zZXRUZXh0KHRoaXMud2hlZWxOYW1lRWxlbWVudCwgY3VycmVudFdoZWVsLldoZWVsQnJhbmROYW1lICsgJyAnICsgY3VycmVudFdoZWVsLldoZWVsTW9kZWxOYW1lKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBpZiAoY3VycmVudFdoZWVsRml0bWVudCkge1xuICAgICAgICAgICAgICAgICAgICBsZXQgZGlhbWV0ZXI6c3RyaW5nID0gY3VycmVudFdoZWVsRml0bWVudC5EaWFtZXRlck1pbi50b1N0cmluZygpICsgJ+KAsyc7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRXaGVlbEZpdG1lbnQuRGlhbWV0ZXJNaW4gIT09IGN1cnJlbnRXaGVlbEZpdG1lbnQuRGlhbWV0ZXJNYXgpXG4gICAgICAgICAgICAgICAgICAgICAgICBkaWFtZXRlciA9ICcoJyArIGN1cnJlbnRXaGVlbEZpdG1lbnQuRGlhbWV0ZXJNaW4gKyAnLScgKyBjdXJyZW50V2hlZWxGaXRtZW50LkRpYW1ldGVyTWF4ICsgJynigLMnO1xuXG4gICAgICAgICAgICAgICAgICAgIEhUTUxIZWxwZXIuc2V0VGV4dCh0aGlzLndoZWVsRGVzY3JpcHRpb25FbGVtZW50LCBkaWFtZXRlciArICcgJyArIGN1cnJlbnRXaGVlbC5XaGVlbE1vZGVsRmluaXNoRGVzY3JpcHRpb24pO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIEhUTUxIZWxwZXIuc2V0VGV4dCh0aGlzLndoZWVsRGVzY3JpcHRpb25FbGVtZW50LCBjdXJyZW50V2hlZWwuV2hlZWxNb2RlbEZpbmlzaERlc2NyaXB0aW9uKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59IiwibmFtZXNwYWNlIFJpZGVTdHlsZXJTaG93Y2FzZSB7XG4gICAgaW1wb3J0IEZpbHRlclByb3ZpZGVyID0gZmlsdGVycy5GaWx0ZXJQcm92aWRlcjtcblxuICAgIGNvbnN0IGZpbHRlck1vZGFsQ2xhc3MgPSAncmlkZXN0eWxlci1zaG93Y2FzZS1maWx0ZXItbW9kYWwnO1xuICAgIGNvbnN0IGZpbHRlck1vZGFsTWVudVRpdGxlQ2xhc3MgPSBmaWx0ZXJNb2RhbENsYXNzICsgJy1tZW51LXRpdGxlJztcblxuICAgIGNvbnN0IGNvdW50Rm9ybWF0VG9rZW4gPSAne2NvdW50fSc7XG5cbiAgICBleHBvcnQgY2xhc3MgUmlkZVN0eWxlclNob3djYXNlRmlsdGVyTW9kYWw8RmlsdGVyVHlwZSBleHRlbmRzIG9iamVjdCwgRmlsdGVyUHJvdmlkZXJUeXBlIGV4dGVuZHMgRmlsdGVyUHJvdmlkZXI8RmlsdGVyVHlwZT4+IGV4dGVuZHMgUmlkZVN0eWxlclNob3djYXNlTW9kYWwge1xuICAgICAgICBwcml2YXRlIHJlYWRvbmx5IGZpbHRlclByb3ZpZGVyOiBGaWx0ZXJQcm92aWRlclR5cGU7XG4gICAgICAgIHByaXZhdGUgbWVudXM6IFJpZGVTdHlsZXJTaG93Y2FzZU9wdGlvbk1lbnVbXTtcbiAgICAgICAgcHJpdmF0ZSByZWFkb25seSBzaG93Q291bnRUZXh0Rm9ybWF0OnN0cmluZztcblxuICAgICAgICBwcml2YXRlIHNob3dCdXR0b246SFRNTEJ1dHRvbkVsZW1lbnQ7XG5cbiAgICAgICAgY29uc3RydWN0b3Ioc2hvd2Nhc2VJbnN0YW5jZTpSaWRlU3R5bGVyU2hvd2Nhc2VJbnN0YW5jZSwgb3B0aW9uczogUmlkZVN0eWxlclNob3djYXNlRmlsdGVyTW9kYWwuT3B0aW9uczxGaWx0ZXJQcm92aWRlclR5cGU+KSB7XG4gICAgICAgICAgICBzdXBlcihzaG93Y2FzZUluc3RhbmNlLCB7XG4gICAgICAgICAgICAgICAgcmVtb3ZlT25IaWRkZW46IHRydWVcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB0aGlzLmZpbHRlclByb3ZpZGVyID0gb3B0aW9ucy5maWx0ZXJQcm92aWRlcjtcbiAgICAgICAgICAgIHRoaXMuc2hvd0NvdW50VGV4dEZvcm1hdCA9IG9wdGlvbnMuc2hvd0NvdW50VGV4dEZvcm1hdDtcblxuICAgICAgICAgICAgdGhpcy5jb21wb25lbnQuY2xhc3NMaXN0LmFkZChmaWx0ZXJNb2RhbENsYXNzKTtcblxuICAgICAgICAgICAgdGhpcy5idWlsZFNob3dCdXR0b24oKTtcblxuICAgICAgICAgICAgdGhpcy5idWlsZEZpbHRlck1lbnVzKCkuZG9uZSgoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVDb3VudCgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMuY29tcG9uZW50LmFwcGVuZENoaWxkKHRoaXMuc2hvd0J1dHRvbik7XG4gICAgICAgIH1cblxuICAgICAgICBwcml2YXRlIGJ1aWxkRmlsdGVyTWVudXMoKTpSaWRlU3R5bGVyUHJvbWlzZSB7XG4gICAgICAgICAgICBjb25zdCBtZW51c0NvbnRhaW5lciA9IEhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCh7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBmaWx0ZXJNb2RhbENsYXNzICsgJy1tZW51cycsXG4gICAgICAgICAgICAgICAgYXBwZW5kVG86IHRoaXMuY29tcG9uZW50XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgY29uc3QgZmlsdGVyUHJvdmlkZXIgPSB0aGlzLmZpbHRlclByb3ZpZGVyO1xuICAgICAgICAgICAgY29uc3QgbWVudUxvYWRlZFByb21pc2VzID0gW107XG5cbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRGaWx0ZXJzID0gZmlsdGVyUHJvdmlkZXIuZ2V0RmlsdGVycygpO1xuXG4gICAgICAgICAgICB0aGlzLm1lbnVzID0gW107XG5cbiAgICAgICAgICAgIGZvciAoY29uc3QgZmlsdGVyT3B0aW9uIG9mIGZpbHRlclByb3ZpZGVyLmZpbHRlck9wdGlvbnMpIHtcbiAgICAgICAgICAgICAgICAvLyBEb24ndCBzaG93IG5vbi12aXNpYmxlIGZpbHRlciBvcHRpb25zIG9yIGZpbHRlciBvcHRpb25zIHdpdGhvdXQgbGFiZWxzXG4gICAgICAgICAgICAgICAgaWYgKCEoZmlsdGVyT3B0aW9uLnZpc2libGUgIT09IGZhbHNlICYmIGZpbHRlck9wdGlvbi5sYWJlbCkpIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGxldCBtZW51OlJpZGVTdHlsZXJTaG93Y2FzZU9wdGlvbk1lbnUgPSBuZXcgUmlkZVN0eWxlclNob3djYXNlT3B0aW9uTWVudShmaWx0ZXJPcHRpb24ua2V5KTtcblxuICAgICAgICAgICAgICAgIGNvbnN0IG1lbnVDb250YWluZXIgPSBIVE1MSGVscGVyLmNyZWF0ZUVsZW1lbnQoe1xuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6IGZpbHRlck1vZGFsQ2xhc3MgKyAnLW1lbnUtY29udGFpbmVyJyxcbiAgICAgICAgICAgICAgICAgICAgYXBwZW5kVG86IG1lbnVzQ29udGFpbmVyLFxuICAgICAgICAgICAgICAgICAgICBhcHBlbmQ6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgIEhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiBmaWx0ZXJNb2RhbE1lbnVUaXRsZUNsYXNzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IGZpbHRlck9wdGlvbi5sYWJlbFxuICAgICAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgICAgICBtZW51LmNvbXBvbmVudFxuICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBsZXQgbWVudUxvYWRlZFByb21pc2UgPSBmaWx0ZXJQcm92aWRlci5yZXRyaWV2ZU9wdGlvbnMoZmlsdGVyT3B0aW9uKVxuICAgICAgICAgICAgICAgICAgICAuZG9uZShvcHRpb25zID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMudW5zaGlmdCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6IGZpbHRlck9wdGlvbi51bnNlbGVjdGVkT3B0aW9uTGFiZWwgfHwgc3RyaW5ncy5nZXRTdHJpbmcoJ2FsbCcpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBtZW51LnNldE9wdGlvbnMob3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgZmlsdGVyT3B0aW9uLmdldFZhbHVlRnJvbUZpbHRlcnMgPT09ICdmdW5jdGlvbicpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVudS5zZXRWYWx1ZShmaWx0ZXJPcHRpb24uZ2V0VmFsdWVGcm9tRmlsdGVycyhjdXJyZW50RmlsdGVycykpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZW51LnNldFZhbHVlKHVuZGVmaW5lZCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgbWVudS5vbkNoYW5nZSA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVDb3VudCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBtZW51TG9hZGVkUHJvbWlzZXMucHVzaChtZW51TG9hZGVkUHJvbWlzZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5tZW51cy5wdXNoKG1lbnUpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZUhlbHBlci5hbGwobWVudUxvYWRlZFByb21pc2VzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHByaXZhdGUgYnVpbGRTaG93QnV0dG9uKCk6dm9pZCB7XG4gICAgICAgICAgICB0aGlzLnNob3dCdXR0b24gPSBIVE1MSGVscGVyLmNyZWF0ZUJ1dHRvbih7XG4gICAgICAgICAgICAgICAgbGFyZ2U6IHRydWUsXG4gICAgICAgICAgICAgICAgZGlzYWJsZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgdGV4dDogc3RyaW5ncy5nZXRTdHJpbmcoJ2xvYWRpbmctZWxsaXBzaXMnKVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHRoaXMuc2hvd0J1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmZpbHRlclByb3ZpZGVyLnNldEZpbHRlcnModGhpcy5nZXRWYWx1ZXMoKSk7XG4gICAgICAgICAgICAgICAgdGhpcy5oaWRlKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHByaXZhdGUgZ2V0VmFsdWVzKCk6ZmlsdGVycy5GaWx0ZXJWYWx1ZVtdIHtcbiAgICAgICAgICAgIGxldCB2YWx1ZXM6IGZpbHRlcnMuRmlsdGVyVmFsdWVbXSA9IFtdO1xuXG4gICAgICAgICAgICBmb3IgKGNvbnN0IG1lbnUgb2YgdGhpcy5tZW51cykge1xuICAgICAgICAgICAgICAgIHZhbHVlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAga2V5OiBtZW51Lm5hbWUsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBtZW51LnZhbHVlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiB2YWx1ZXM7XG4gICAgICAgIH1cblxuICAgICAgICBwcml2YXRlIGdldEZpbHRlcnMoKTpGaWx0ZXJUeXBlIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmZpbHRlclByb3ZpZGVyLnByZXZpZXdGaWx0ZXJzKHRoaXMuZ2V0VmFsdWVzKCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgcHJpdmF0ZSB1cGRhdGVDb3VudCgpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0Q291bnRUZXh0KGZhbHNlKTtcblxuICAgICAgICAgICAgdGhpcy5maWx0ZXJQcm92aWRlci5nZXRDb3VudCh0aGlzLmdldEZpbHRlcnMoKSkuZG9uZShjb3VudCA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRDb3VudFRleHQoY291bnQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogU2V0IHRoZSBjb3VudCB0ZXh0IHRvIGEgbG9hZGluZyBzdGF0ZVxuICAgICAgICAgKiBAcGFyYW0gY291bnQgXG4gICAgICAgICAqL1xuICAgICAgICBwcml2YXRlIHNldENvdW50VGV4dChjb3VudDpmYWxzZSk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTZXRzIHRoZSBjb3VudCB0ZXh0XG4gICAgICAgICAqIEBwYXJhbSBjb3VudCBUaGUgY291bnQgdG8gc2V0XG4gICAgICAgICAqL1xuICAgICAgICBwcml2YXRlIHNldENvdW50VGV4dChjb3VudDpudW1iZXIpO1xuICAgICAgICBwcml2YXRlIHNldENvdW50VGV4dChjb3VudDpudW1iZXJ8ZmFsc2UpIHtcbiAgICAgICAgICAgIGlmIChjb3VudCA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICBIVE1MSGVscGVyLnNldFRleHQodGhpcy5zaG93QnV0dG9uLCBzdHJpbmdzLmdldFN0cmluZygnbG9hZGluZy1lbGxpcHNpcycpKTtcbiAgICAgICAgICAgICAgICB0aGlzLnNob3dCdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBIVE1MSGVscGVyLnNldFRleHQodGhpcy5zaG93QnV0dG9uLCB0aGlzLnNob3dDb3VudFRleHRGb3JtYXQucmVwbGFjZShjb3VudEZvcm1hdFRva2VuLCBjb3VudC50b1N0cmluZygpKSk7XG4gICAgICAgICAgICAgICAgdGhpcy5zaG93QnV0dG9uLmRpc2FibGVkID0gY291bnQgPT09IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBleHBvcnQgbmFtZXNwYWNlIFJpZGVTdHlsZXJTaG93Y2FzZUZpbHRlck1vZGFsIHtcbiAgICAgICAgZXhwb3J0IGludGVyZmFjZSBPcHRpb25zPEZpbHRlclByb3ZpZGVyVHlwZT4ge1xuICAgICAgICAgICAgZmlsdGVyUHJvdmlkZXI6IEZpbHRlclByb3ZpZGVyVHlwZTtcbiAgICAgICAgICAgIHNob3dDb3VudFRleHRGb3JtYXQ6IHN0cmluZztcbiAgICAgICAgfVxuICAgIH1cbn0iLCJuYW1lc3BhY2UgUmlkZVN0eWxlclNob3djYXNlLkFycmF5SGVscGVyIHtcbiAgICBleHBvcnQgZnVuY3Rpb24gY29weTxBcnJheVR5cGUgZXh0ZW5kcyBBcnJheTxhbnk+PihhcnJheTpBcnJheVR5cGUpOkFycmF5VHlwZSB7XG4gICAgICAgIGxldCBjb3B5ID0gbmV3IEFycmF5KGFycmF5Lmxlbmd0aCkgYXMgQXJyYXlUeXBlO1xuXG4gICAgICAgIGZvciAodmFyIGluZGV4ID0gMDsgaW5kZXggPCBhcnJheS5sZW5ndGg7IGluZGV4KyspXG4gICAgICAgICAgICBjb3B5W2luZGV4XSA9IGFycmF5W2luZGV4XTtcblxuICAgICAgICByZXR1cm4gY29weTtcbiAgICB9XG5cbiAgICBleHBvcnQgZnVuY3Rpb24gcmVtb3ZlPFQ+KGFycmF5OlRbXSwgaXRlbU1hdGNoOlQpOiBUW107XG4gICAgZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZTxUPihhcnJheTpUW10sIGl0ZW1NYXRjaDooVCk9PmJvb2xlYW4pOiBUW107XG4gICAgZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZTxUPihhcnJheTpUW10sIGl0ZW1NYXRjaDpUfCgoVCk9PmJvb2xlYW4pKTogVFtdIHtcbiAgICAgICAgbGV0IG5ld0FycmF5OlRbXSA9IG5ldyBBcnJheShhcnJheS5sZW5ndGgpO1xuXG4gICAgICAgIGxldCBuZXdBcnJheUluZGV4ID0gLTE7XG5cbiAgICAgICAgZm9yIChsZXQgYXJyYXlJbmRleCA9IDA7IGFycmF5SW5kZXggPCBhcnJheS5sZW5ndGg7IGFycmF5SW5kZXgrKykge1xuICAgICAgICAgICAgbGV0IGl0ZW06VCA9IGFycmF5W2FycmF5SW5kZXhdO1xuXG4gICAgICAgICAgICBpZiAodHlwZW9mIGl0ZW1NYXRjaCA9PT0gJ2Z1bmN0aW9uJyAmJiBpdGVtTWF0Y2goaXRlbSkgfHwgaXRlbSA9PT0gaXRlbU1hdGNoKSB7XG4gICAgICAgICAgICAgICAgLy8gU2tpcCBpdGVtcyB0aGF0IG1hdGNoIHRoZSBpdGVtTWF0Y2ggZnVuY3Rpb24gb3IgdmFsdWVcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbmV3QXJyYXlbKytuZXdBcnJheUluZGV4XSA9IGl0ZW07XG4gICAgICAgIH1cblxuICAgICAgICAvLyBTaG9ydGVuIGFycmF5IHRvIGV4Y2x1ZGUgbGVuZ3RoIGZyb20gcmVtb3ZlZCBpdGVtc1xuICAgICAgICBuZXdBcnJheS5sZW5ndGggPSBuZXdBcnJheUluZGV4ICsgMTtcblxuICAgICAgICByZXR1cm4gbmV3QXJyYXk7XG4gICAgfVxuXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGZpbHRlcjxUPihhcnJheTpUW10sIGl0ZW1NYXRjaDooVCk9PmJvb2xlYW4pOiBUW10ge1xuICAgICAgICByZXR1cm4gcmVtb3ZlKGFycmF5LCBpdGVtID0+ICFpdGVtTWF0Y2goaXRlbSkpO1xuICAgIH1cblxuICAgIGV4cG9ydCBmdW5jdGlvbiBtYXA8VCwgVT4oYXJyYXk6VFtdLCBtYXBGdW5jdGlvbjogKHZhbHVlOiBULCBpbmRleDogbnVtYmVyLCBhcnJheTogVFtdKSA9PiBVLCB0aGlzQXJnPzogYW55KTogVVtdIHtcbiAgICAgICAgaWYgKHR5cGVvZiBBcnJheS5wcm90b3R5cGUubWFwID09PSAnZnVuY3Rpb24nKSByZXR1cm4gYXJyYXkubWFwKG1hcEZ1bmN0aW9uLCB0aGlzQXJnKTtcblxuICAgICAgICBsZXQgcmVzdWx0OlVbXSA9IG5ldyBBcnJheShhcnJheS5sZW5ndGgpO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYXJyYXkubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGxldCBlbGVtZW50ID0gYXJyYXlbaV07XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmICh0eXBlb2YgdGhpc0FyZyA9PT0gJ3VuZGVmaW5lZCcpIHJlc3VsdFtpXSA9IG1hcEZ1bmN0aW9uKGFycmF5W2ldLCBpLCBhcnJheSk7XG4gICAgICAgICAgICBlbHNlIHJlc3VsdFtpXSA9IG1hcEZ1bmN0aW9uLmNhbGwodGhpc0FyZywgYXJyYXlbaV0sIGksIGFycmF5KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgZXhwb3J0IGZ1bmN0aW9uIHJlZHVjZTxUPihhcnJheTpUW10sIHJlZHVjZXI6IChwcmV2aW91c1ZhbHVlOiBULCBjdXJyZW50VmFsdWU6IFQsIGN1cnJlbnRJbmRleDogbnVtYmVyLCBhcnJheTogVFtdKSA9PiBULCBpbml0aWFsVmFsdWU/OiBUKTogVDtcbiAgICBleHBvcnQgZnVuY3Rpb24gcmVkdWNlPFQsIFUgPSBUPihhcnJheTpUW10sIHJlZHVjZXI6IChwcmV2aW91c1ZhbHVlOiBVLCBjdXJyZW50VmFsdWU6IFQsIGN1cnJlbnRJbmRleDogbnVtYmVyLCBhcnJheTogVFtdKSA9PiBVLCBpbml0aWFsVmFsdWU6IFUpOiBVO1xuICAgIGV4cG9ydCBmdW5jdGlvbiByZWR1Y2U8VD4oYXJyYXk6VFtdLCByZWR1Y2VyOiAocHJldmlvdXNWYWx1ZTogVCwgY3VycmVudFZhbHVlOiBULCBjdXJyZW50SW5kZXg6IG51bWJlciwgYXJyYXk6IFRbXSkgPT4gVCwgaW5pdGlhbFZhbHVlOiBUKTogVCB7XG4gICAgICAgIGlmICh0eXBlb2YgQXJyYXkucHJvdG90eXBlLnJlZHVjZSA9PT0gJ2Z1bmN0aW9uJykgcmV0dXJuIGFycmF5LnJlZHVjZShyZWR1Y2VyLCBpbml0aWFsVmFsdWUpO1xuXG4gICAgICAgIGxldCBhY2N1bXVsYXRvcjpUID0gaW5pdGlhbFZhbHVlO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYXJyYXkubGVuZ3RoOyBpKyspXG4gICAgICAgICAgICBhY2N1bXVsYXRvciA9IGFjY3VtdWxhdG9yICE9PSB1bmRlZmluZWQgP1xuICAgICAgICAgICAgICAgIHJlZHVjZXIuY2FsbCh1bmRlZmluZWQsIGFjY3VtdWxhdG9yLCBhcnJheVtpXSwgaSwgYXJyYXkpIDpcbiAgICAgICAgICAgICAgICBhcnJheVtpXTtcblxuICAgICAgICByZXR1cm4gYWNjdW11bGF0b3I7XG4gICAgfVxufSIsIm5hbWVzcGFjZSBSaWRlU3R5bGVyU2hvd2Nhc2UuQm94SGVscGVyIHtcbiAgICAvKipcbiAgICAgKiBCb3VuZCBhIGJveCB0byBhIG1pbmltdW0gYW5kL29yIG1heGltdW0gYm91bmRpbmcgYm94XG4gICAgICogQHBhcmFtIGJveCBUaGUgYm94IHRvIGJvdW5kXG4gICAgICogQHBhcmFtIGJvdW5kc01pbiBUaGUgbWluaW11bSBib3VuZGluZyBib3hcbiAgICAgKiBAcGFyYW0gYm91bmRzTWF4IFRoZSBtYXhpbXVtIGJvdW5kaW5nIGJveFxuICAgICAqL1xuICAgIGV4cG9ydCBmdW5jdGlvbiBib3VuZChib3g6Qm94LCBib3VuZHNNaW4/OkJveHxudW1iZXIsIGJvdW5kc01heD86Qm94fG51bWJlcik6Qm94IHtcbiAgICAgICAgaWYgKHR5cGVvZiBib3VuZHNNaW4gPT09ICdudW1iZXInKSBib3VuZHNNaW4gPSB7XG4gICAgICAgICAgICB3aWR0aDogYm91bmRzTWluLFxuICAgICAgICAgICAgaGVpZ2h0OiBib3VuZHNNaW5cbiAgICAgICAgfTtcblxuICAgICAgICBpZiAodHlwZW9mIGJvdW5kc01heCA9PT0gJ251bWJlcicpIGJvdW5kc01heCA9IHtcbiAgICAgICAgICAgIHdpZHRoOiBib3VuZHNNYXgsXG4gICAgICAgICAgICBoZWlnaHQ6IGJvdW5kc01heFxuICAgICAgICB9O1xuXG4gICAgICAgIC8vIEdldCB0aGUgc2NhbGUgY2hhbmdlIHRvIHNjYWxlIGJveCBkb3duIHRvIG1heGltdW0gYm91bmRzXG4gICAgICAgIGxldCBzY2FsZVRvTWF4Om51bWJlciA9IGJvdW5kc01heCA/IE1hdGgubWluKGJvdW5kc01heC53aWR0aC9ib3gud2lkdGgsIGJvdW5kc01heC5oZWlnaHQvYm94LmhlaWdodCkgOiAxO1xuICAgICAgICAvLyBHZXQgdGhlIHNjYWxlIGNoYW5nZSB0byBzY2FsZSBib3ggdXAgdG8gbWluaW11bSBib3VuZHNcbiAgICAgICAgbGV0IHNjYWxlVG9NaW46bnVtYmVyID0gYm91bmRzTWluID8gTWF0aC5tYXgoYm91bmRzTWluLndpZHRoL2JveC53aWR0aCwgYm91bmRzTWluLmhlaWdodC9ib3guaGVpZ2h0KSA6IDE7XG5cbiAgICAgICAgbGV0IHNjYWxhcjpudW1iZXI7XG5cbiAgICAgICAgaWYgKHNjYWxlVG9NYXggPCAxKSBzY2FsYXIgPSBzY2FsZVRvTWF4O1xuICAgICAgICBlbHNlIGlmIChzY2FsZVRvTWluID4gMSkgc2NhbGFyID0gc2NhbGVUb01pbjtcbiAgICAgICAgZWxzZSByZXR1cm4gYm94O1xuXG4gICAgICAgIHJldHVybiBzY2FsZShib3gsIHNjYWxhcik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2NhbGUgYSBib3ggYnkgYSBzY2FsYXJcbiAgICAgKiBAcGFyYW0gYm94IFRoZSBib3hcbiAgICAgKiBAcGFyYW0gc2NhbGFyIFRoZSBudW1iZXIgdG8gc2NhbGUgdGhlIGJveCBieVxuICAgICAqL1xuICAgIGV4cG9ydCBmdW5jdGlvbiBzY2FsZShib3g6Qm94LCBzY2FsYXI6bnVtYmVyfEJveCk6Qm94IHtcbiAgICAgICAgaWYgKHR5cGVvZiBzY2FsYXIgPT09ICdudW1iZXInKSBzY2FsYXIgPSB7XG4gICAgICAgICAgICB3aWR0aDogc2NhbGFyLFxuICAgICAgICAgICAgaGVpZ2h0OiBzY2FsYXJcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgd2lkdGg6IGJveC53aWR0aCAqIHNjYWxhci53aWR0aCxcbiAgICAgICAgICAgIGhlaWdodDogYm94LmhlaWdodCAqIHNjYWxhci5oZWlnaHRcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBib3gsIHdpdGhvdXQgZGVjaW1hbHNcbiAgICAgKiBAcGFyYW0gYm94IFRoZSBib3hcbiAgICAgKi9cbiAgICBleHBvcnQgZnVuY3Rpb24gZmxvb3IoYm94OkJveCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgd2lkdGg6IH5+Ym94LndpZHRoLFxuICAgICAgICAgICAgaGVpZ2h0OiB+fmJveC5oZWlnaHRcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGV4cG9ydCBpbnRlcmZhY2UgQm94IHtcbiAgICAgICAgd2lkdGg6IG51bWJlcjtcbiAgICAgICAgaGVpZ2h0OiBudW1iZXI7XG4gICAgfVxufSIsIm5hbWVzcGFjZSBSaWRlU3R5bGVyU2hvd2Nhc2V7XG4gICAgZXhwb3J0IHR5cGUgR3VpZCA9IG51bWJlcltdO1xuICAgIGV4cG9ydCBuYW1lc3BhY2UgR1VJREhlbHBlciB7XG4gICAgICAgIC8vIE1hcHMgZm9yIG51bWJlciA8LT4gaGV4IHN0cmluZyBjb252ZXJzaW9uXG4gICAgICAgIGxldCBieXRlVG9IZXg6c3RyaW5nW10gPSBbXTtcbiAgICAgICAgbGV0IGhleFRvQnl0ZTp7W2hleDpzdHJpbmddOm51bWJlcn0gPSB7fTtcbiAgICAgICAgXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMjU2OyBpKyspIHtcbiAgICAgICAgICAgIGJ5dGVUb0hleFtpXSA9IChpICsgMHgxMDApLnRvU3RyaW5nKDE2KS5zdWJzdHIoMSk7XG4gICAgICAgICAgICBoZXhUb0J5dGVbYnl0ZVRvSGV4W2ldXSA9IGk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogUGFyc2UgYSBHdWlkIGludG8gYSBjb21tb24gZm9ybWF0XG4gICAgICAgICAqIEBwYXJhbSBpZCBUaGUgSUQgdG8gcGFyc2VcbiAgICAgICAgICogQHBhcmFtIGJ1ZmZlciBBbiBleGlzdGluZyBHdWlkL2FycmF5IHRvIHdyaXRlIHRvXG4gICAgICAgICAqIEBwYXJhbSBvZmZzZXQgVGhlIG9mZnNldCB0byBiZWdpbiB3cml0aW5nIGF0XG4gICAgICAgICAqL1xuICAgICAgICBleHBvcnQgZnVuY3Rpb24gcGFyc2UoaWQ6c3RyaW5nLCBidWZmZXI/Okd1aWQsIG9mZnNldD86bnVtYmVyKTpHdWlkIHtcbiAgICAgICAgICAgIGNvbnN0IGkgPSAoYnVmZmVyICYmIG9mZnNldCkgfHwgMDtcbiAgICAgICAgICAgIGxldCBqID0gMDtcbiAgICAgICAgICBcbiAgICAgICAgICAgIGJ1ZmZlciA9IGJ1ZmZlciB8fCBbXTtcblxuICAgICAgICAgICAgaWQudG9Mb3dlckNhc2UoKS5yZXBsYWNlKC9bMC05YS1mXXsyfS9nLCBmdW5jdGlvbihvY3QpIHtcbiAgICAgICAgICAgICAgICBpZiAoaiA8IDE2KSAvLyBEb24ndCBvdmVyZmxvdyFcbiAgICAgICAgICAgICAgICAgICAgYnVmZmVyW2kgKyBqKytdID0gaGV4VG9CeXRlW29jdF07XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gJyc7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFplcm8gb3V0IHJlbWFpbmluZyBieXRlcyBpZiBzdHJpbmcgd2FzIHNob3J0XG4gICAgICAgICAgICB3aGlsZSAoaiA8IDE2KSBidWZmZXJbaSArIGorK10gPSAwO1xuICAgICAgICAgIFxuICAgICAgICAgICAgcmV0dXJuIGJ1ZmZlcjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDb252ZXJ0IGEgcGFyc2VkIEd1aWQgYmFjayBpbnRvIGEgc3RyaW5nXG4gICAgICAgICAqIEBwYXJhbSBpZCBBIHBhcnNlZCBHdWlkIHRvIHVucGFyc2VcbiAgICAgICAgICogQHBhcmFtIG9mZnNldCBTdGFydGluZyBpbmRleCBpbiB0aGUgaWQgdG8gYmVnaW4gcmVhZGluZyBmcm9tXG4gICAgICAgICAqL1xuICAgICAgICBleHBvcnQgZnVuY3Rpb24gdW5wYXJzZShpZDpHdWlkLCBvZmZzZXQ/Om51bWJlcik6c3RyaW5nIHtcbiAgICAgICAgICAgIGxldCBpID0gb2Zmc2V0IHx8IDA7XG4gICAgICAgICAgICBjb25zdCBidGggPSBieXRlVG9IZXg7XG5cbiAgICAgICAgICAgIHJldHVybiAgYnRoW2lkW2krK11dICsgYnRoW2lkW2krK11dICtcbiAgICAgICAgICAgICAgICAgICAgYnRoW2lkW2krK11dICsgYnRoW2lkW2krK11dICsgJy0nICtcbiAgICAgICAgICAgICAgICAgICAgYnRoW2lkW2krK11dICsgYnRoW2lkW2krK11dICsgJy0nICtcbiAgICAgICAgICAgICAgICAgICAgYnRoW2lkW2krK11dICsgYnRoW2lkW2krK11dICsgJy0nICtcbiAgICAgICAgICAgICAgICAgICAgYnRoW2lkW2krK11dICsgYnRoW2lkW2krK11dICsgJy0nICtcbiAgICAgICAgICAgICAgICAgICAgYnRoW2lkW2krK11dICsgYnRoW2lkW2krK11dICtcbiAgICAgICAgICAgICAgICAgICAgYnRoW2lkW2krK11dICsgYnRoW2lkW2krK11dICtcbiAgICAgICAgICAgICAgICAgICAgYnRoW2lkW2krK11dICsgYnRoW2lkW2krK11dO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENvbXBhcmUgdHdvIEd1aWRzIHRvIGRldGVybWluZSBpZiB0aGV5IGFyZSBlcXVhbFxuICAgICAgICAgKiBAcGFyYW0gaWRBIFRoZSBmaXJzdCBJRCB0byBwYXJzZSAoaWYgbmVlZGVkKSBhbmQgdGhlbiBjb21wYXJlXG4gICAgICAgICAqIEBwYXJhbSBpZEIgVGhlIHNlY29uZCBJRCB0byBwYXJzZSAoaWYgbmVlZGVkKSBhbmQgdGhlbiBjb21wYXJlXG4gICAgICAgICAqL1xuICAgICAgICBleHBvcnQgZnVuY3Rpb24gYXJlRXF1YWwoaWRBOnN0cmluZ3xHdWlkLCBpZEI6c3RyaW5nfEd1aWQpOmJvb2xlYW4ge1xuICAgICAgICAgICAgLy8gSGFuZGxlIHVuZGVmaW5lZC91bnNwZWNpZmllZCBwYXJhbWV0ZXJzXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgaWYgKCFpZEEpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFpZEIpIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICghaWRCKSByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGxldCBndWlkQTpHdWlkO1xuICAgICAgICAgICAgbGV0IGd1aWRCOkd1aWQ7XG5cbiAgICAgICAgICAgIGlmICh0eXBlb2YgaWRBID09PSAnc3RyaW5nJykgZ3VpZEEgPSBwYXJzZShpZEEpO1xuICAgICAgICAgICAgZWxzZSBndWlkQSA9IGlkQTtcblxuICAgICAgICAgICAgaWYgKHR5cGVvZiBpZEIgPT09ICdzdHJpbmcnKSBndWlkQiA9IHBhcnNlKGlkQik7XG4gICAgICAgICAgICBlbHNlIGd1aWRCID0gaWRCO1xuXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGd1aWRBLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgbGV0IGJ5dGVBOm51bWJlciA9IGd1aWRBW2ldO1xuICAgICAgICAgICAgICAgIGxldCBieXRlQjpudW1iZXIgPSBndWlkQltpXVxuXG4gICAgICAgICAgICAgICAgaWYgKGJ5dGVBICE9PSBieXRlQikgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbn0iLCJuYW1lc3BhY2UgUmlkZVN0eWxlclNob3djYXNlLkhUTUxIZWxwZXIge1xuICAgIGV4cG9ydCBpbnRlcmZhY2UgRWxlbWVudExpc3Q8VCBleHRlbmRzIEVsZW1lbnQgPSBIVE1MRWxlbWVudD4ge1xuICAgICAgICBsZW5ndGg6IG51bWJlcjtcbiAgICAgICAgW2luZGV4OiBudW1iZXJdOiBUO1xuICAgIH1cblxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIG5ldyBzZXQgb2YgZWxlbWVudHMgbWF0Y2hlZCBmcm9tIHRoZSBvcmlnaW5hbCBzZXRcbiAgICAgKiBAcGFyYW0gZWxlbWVudHMgVGhlIGVsZW1lbnRzIHRvIG1hdGNoXG4gICAgICogQHBhcmFtIG1hdGNoIFRoZSBtYXRjaGluZyBmdW5jdGlvblxuICAgICAqL1xuICAgIGV4cG9ydCBmdW5jdGlvbiBlbGVtZW50c01hdGNoaW5nPFQgZXh0ZW5kcyBFbGVtZW50PihlbGVtZW50czpFbGVtZW50TGlzdDxUPiwgbWF0Y2g6IChlbGVtZW50OkVsZW1lbnQpPT5ib29sZWFuKTogVFtdIHtcbiAgICAgICAgbGV0IG1hdGNoaW5nRWxlbWVudHM6IFRbXSA9IG5ldyBBcnJheShlbGVtZW50cy5sZW5ndGgpO1xuXG4gICAgICAgIGxldCBtYXRjaGluZ0VsZW1lbnRzSW5kZXggPSAwO1xuICAgICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgZWxlbWVudHMubGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICAgICAgICBsZXQgY2hpbGQgPSBlbGVtZW50c1tpbmRleF0gYXMgVDtcblxuICAgICAgICAgICAgaWYgKG1hdGNoKGNoaWxkKSkge1xuICAgICAgICAgICAgICAgIG1hdGNoaW5nRWxlbWVudHNbbWF0Y2hpbmdFbGVtZW50c0luZGV4KytdID0gY2hpbGQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBtYXRjaGluZ0VsZW1lbnRzLmxlbmd0aCA9IG1hdGNoaW5nRWxlbWVudHNJbmRleDtcbiAgICAgICAgcmV0dXJuIG1hdGNoaW5nRWxlbWVudHM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgZmlyc3QgZWxlbWVudCBpbiB0aGUgc2V0IHRvIG1hdGNoIHRoZSBmdW5jdGlvblxuICAgICAqIEBwYXJhbSBlbGVtZW50cyBUaGUgc2V0IG9mIGVsZW1lbnRzIHRvIHNlYXJjaCBpblxuICAgICAqIEBwYXJhbSBtYXRjaCBUaGUgbWF0Y2hpbmcgZnVuY3Rpb25cbiAgICAgKi9cbiAgICBleHBvcnQgZnVuY3Rpb24gZmlyc3RFbGVtZW50TWF0Y2hpbmc8VCBleHRlbmRzIEVsZW1lbnQ+KGVsZW1lbnRzOkVsZW1lbnRMaXN0PFQ+LCBtYXRjaDogKGVsZW1lbnQ6RWxlbWVudCk9PmJvb2xlYW4pOiBUIHtcbiAgICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IGVsZW1lbnRzLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgICAgICAgbGV0IGNoaWxkID0gZWxlbWVudHNbaW5kZXhdO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAobWF0Y2goY2hpbGQpKSByZXR1cm4gY2hpbGQgYXMgVDtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIFxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIGxhc3QgZWxlbWVudCBpbiB0aGUgc2V0IHRvIG1hdGNoIHRoZSBmdW5jdGlvblxuICAgICAqIEBwYXJhbSBlbGVtZW50cyBUaGUgc2V0IG9mIGVsZW1lbnRzIHRvIHNlYXJjaCBpblxuICAgICAqIEBwYXJhbSBtYXRjaCBUaGUgbWF0Y2hpbmcgZnVuY3Rpb25cbiAgICAgKi9cbiAgICBleHBvcnQgZnVuY3Rpb24gbGFzdEVsZW1lbnRNYXRjaGluZzxUIGV4dGVuZHMgRWxlbWVudD4oZWxlbWVudHM6RWxlbWVudExpc3Q8VD4sIG1hdGNoOiAoZWxlbWVudDpFbGVtZW50KT0+Ym9vbGVhbik6IFQge1xuICAgICAgICBmb3IgKGxldCBpbmRleCA9IGVsZW1lbnRzLmxlbmd0aCAtIDE7IGluZGV4ID49IDA7IGluZGV4LS0pIHtcbiAgICAgICAgICAgIGxldCBjaGlsZCA9IGVsZW1lbnRzW2luZGV4XTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKG1hdGNoKGNoaWxkKSkgcmV0dXJuIGNoaWxkIGFzIFQ7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGV4cG9ydCBmdW5jdGlvbiBjaGlsZHJlbk1hdGNoaW5nPFQgZXh0ZW5kcyBFbGVtZW50PihlbGVtZW50OkVsZW1lbnQsIG1hdGNoOiAoZWxlbWVudDpFbGVtZW50KT0+Ym9vbGVhbik6IFRbXSB7XG4gICAgICAgIHJldHVybiBlbGVtZW50c01hdGNoaW5nKGVsZW1lbnQuY2hpbGRyZW4sIG1hdGNoKSBhcyBUW107XG4gICAgfVxuICAgIFxuICAgIC8qKlxuICAgICAqIFNlYXJjaCBhbiBlbGVtZW50IGZvciB0aGUgZmlyc3QgY2hpbGQgbWF0Y2hpbmcgdGhlIG1hdGNoIGZ1bmN0aW9uXG4gICAgICogQHBhcmFtIGVsZW1lbnQgVGhlIGVsZW1lbnQgdG8gc2VhcmNoIGNoaWxkcmVuIG9mXG4gICAgICogQHBhcmFtIG1hdGNoIFRoZSBtYXRjaCBmdW5jdGlvblxuICAgICAqL1xuICAgIGV4cG9ydCBmdW5jdGlvbiBmaXJzdENoaWxkTWF0Y2hpbmc8VCBleHRlbmRzIEVsZW1lbnQ+KGVsZW1lbnQ6RWxlbWVudCwgbWF0Y2g6IChlbGVtZW50OkVsZW1lbnQpPT5ib29sZWFuKTpUIHtcbiAgICAgICAgcmV0dXJuIGZpcnN0RWxlbWVudE1hdGNoaW5nKGVsZW1lbnQuY2hpbGRyZW4sIG1hdGNoKSBhcyBUO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYW4gYXJyYXkgb2YgZWxlbWVudCdzIGNoaWxkcmVuIG1hdGNoaW5nIHRoZSBwYXNzZWQgaW4gc2V0IG9mIFxuICAgICAqIEBwYXJhbSBlbGVtZW50IFRoZSBlbGVtZW50IHRvIHNlYXJjaCB0aGUgY2hpbGRyZW4gb2ZcbiAgICAgKiBAcGFyYW0gY2xhc3NlcyBUaGUgc2V0IG9mIGNsYXNzZXMgdG8gbWF0Y2ggY2hpbGRyZW4gd2l0aFxuICAgICAqL1xuICAgIGV4cG9ydCBmdW5jdGlvbiBjaGlsZHJlbldpdGhDbGFzc2VzPFQgZXh0ZW5kcyBFbGVtZW50PihlbGVtZW50OkVsZW1lbnQsIC4uLmNsYXNzZXM6c3RyaW5nW10pOlRbXSB7XG4gICAgICAgIGNsYXNzZXMgPSBTdHlsZUhlbHBlci5mbGF0dGVuQ2xhc3NMaXN0KGNsYXNzZXMpO1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIGNoaWxkcmVuTWF0Y2hpbmcoZWxlbWVudCwgY2hpbGQgPT4gU3R5bGVIZWxwZXIuaGFzQ2xhc3NlcyhjaGlsZCBhcyBIVE1MRWxlbWVudCwgY2xhc3NlcykpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgY2hpbGRyZW4gZnJvbSB0aGUgZWxlbWVudCBtYXRjaGluZyBhIGNsYXNzIG9yIHNldCBvZiBjbGFzc2VzXG4gICAgICogQHBhcmFtIGVsZW1lbnQgVGhlIGVsZW1lbnQgdG8gc2VhcmNoIHRoZSBjaGlsZHJlblxuICAgICAqIEBwYXJhbSBjbGFzc2VzIFRoZSBjbGFzc2VzIHRvIG1hdGNoIGNoaWxkcmVuIHRvIHJlbW92ZVxuICAgICAqL1xuICAgIGV4cG9ydCBmdW5jdGlvbiByZW1vdmVDaGlsZHJlbldpdGhDbGFzc2VzKGVsZW1lbnQ6SFRNTEVsZW1lbnQsIC4uLmNsYXNzZXM6c3RyaW5nW10pIHtcbiAgICAgICAgZm9yIChsZXQgY2hpbGQgb2YgY2hpbGRyZW5XaXRoQ2xhc3NlcyhlbGVtZW50LCAuLi5jbGFzc2VzKSkge1xuICAgICAgICAgICAgZWxlbWVudC5yZW1vdmVDaGlsZChjaGlsZCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZWFyY2ggYW4gZWxlbWVudCBmb3IgdGhlIGZpcnN0IGNoaWxkIHdpdGggdGhlIHNwZWNpZmllZCB0YWdcbiAgICAgKiBAcGFyYW0gZWxlbWVudCBUaGUgZWxlbWVudCB0byBzZWFyY2ggY2hpbGRyZW4gb2ZcbiAgICAgKiBAcGFyYW0gdGFnTmFtZSBUaGUgdGFnIHRvIGxvb2sgZm9yXG4gICAgICovXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGZpcnN0Q2hpbGRXaXRoVGFnPFQgZXh0ZW5kcyBIVE1MRWxlbWVudD4oZWxlbWVudDpIVE1MRWxlbWVudCwgdGFnTmFtZTpzdHJpbmcpOlQge1xuICAgICAgICB0YWdOYW1lID0gdGFnTmFtZS50b1VwcGVyQ2FzZSgpO1xuXG4gICAgICAgIHJldHVybiBmaXJzdENoaWxkTWF0Y2hpbmcoZWxlbWVudCwgY2hpbGQgPT4gY2hpbGQudGFnTmFtZSA9PT0gdGFnTmFtZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2VhcmNoIGFuIGVsZW1lbnQgZm9yIHRoZSBmaXJzdCBjaGlsZCB3aXRoIHRoZSBzcGVjaWZpZWQgY2xhc3MoZXMpIGluIGl0cyBjbGFzcyBsaXN0XG4gICAgICogQHBhcmFtIGVsZW1lbnQgVGhlIGVsZW1lbnQgdG8gc2VhcmNoIGNoaWxkcmVuIG9mXG4gICAgICogQHBhcmFtIGNsYXNzZXMgVGhlIGNsYXNzZXMgdG8gbG9vayBmb3JcbiAgICAgKi9cbiAgICBleHBvcnQgZnVuY3Rpb24gZmlyc3RDaGlsZFdpdGhDbGFzczxUIGV4dGVuZHMgRWxlbWVudD4oZWxlbWVudDogRWxlbWVudCwgLi4uY2xhc3Nlczogc3RyaW5nW10pOlQge1xuICAgICAgICByZXR1cm4gZmlyc3RDaGlsZE1hdGNoaW5nKGVsZW1lbnQsIGNoaWxkID0+IFN0eWxlSGVscGVyLmhhc0NsYXNzZXMoY2hpbGQgYXMgSFRNTEVsZW1lbnQsIGNsYXNzZXMpKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEZXRlY3RzIGlmIGFuIGVsZW1lbnQgaGFzIGEgY2hpbGQgd2l0aCB0aGUgc3BlY2lmaWVkIGNsYXNzKGVzKVxuICAgICAqIEBwYXJhbSBlbGVtZW50IFRoZSBlbGVtZW50IHRvIHNlYXJjaCB0aGUgY2hpbGRyZW4gb2ZcbiAgICAgKiBAcGFyYW0gY2xhc3NlcyBUaGUgY2xhc3MoZXMpIHRvIGxvb2sgZm9yXG4gICAgICovXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGhhc0NoaWxkV2l0aENsYXNzKGVsZW1lbnQ6IEhUTUxFbGVtZW50LCAuLi5jbGFzc2VzOiBzdHJpbmdbXSk6Ym9vbGVhbiB7XG4gICAgICAgIHJldHVybiAhIWZpcnN0Q2hpbGRXaXRoQ2xhc3MoZWxlbWVudCwgLi4uY2xhc3Nlcyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRGV0ZWN0cyBpZiBhbiBlbGVtZW50IGhhcyBhIHNpYmxpbmcgd2l0aCB0aGUgc3BlY2lmaWVkIGNsYXNzKGVzKVxuICAgICAqIEBwYXJhbSBlbGVtZW50IFRoZSBlbGVtZW50IHRvIHNlYXJjaCB0aGUgc2libGluZ3Mgb2ZcbiAgICAgKiBAcGFyYW0gY2xhc3NlcyBUaGUgY2xhc3MoZXMpIHRvIGxvb2sgZm9yXG4gICAgICovXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGhhc1NpYmxpbmdXaXRoQ2xhc3MoZWxlbWVudDpFbGVtZW50LCAuLi5jbGFzc2VzOnN0cmluZ1tdKTpib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIGhhc0NoaWxkV2l0aENsYXNzKGVsZW1lbnQucGFyZW50RWxlbWVudCwgLi4uY2xhc3Nlcyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgbGFzdCBzaWJsaW5nIG9mIGFuIGVsZW1lbnQgbWF0Y2hpbmcgYSBzcGVjaWZpZWQgY2xhc3MgKG9yIHNwZWNpZmllZCBjbGFzc2VzKVxuICAgICAqIEBwYXJhbSBlbGVtZW50IFRoZSBlbGVtZW50IHRvIHNlYXJjaCBzaWJsaW5nc1xuICAgICAqIEBwYXJhbSBjbGFzc2VzIFRoZSBjbGFzc2VzIHRvIGxvb2sgZm9yXG4gICAgICovXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGxhc3RTaWJsaW5nV2l0aENsYXNzPFQgZXh0ZW5kcyBFbGVtZW50PihlbGVtZW50OkVsZW1lbnQsIC4uLmNsYXNzZXM6c3RyaW5nW10pOlQge1xuICAgICAgICByZXR1cm4gbGFzdEVsZW1lbnRNYXRjaGluZyhlbGVtZW50LnBhcmVudEVsZW1lbnQuY2hpbGRyZW4sIHNpYmxpbmcgPT4gc2libGluZyAhPT0gZWxlbWVudCAmJiBTdHlsZUhlbHBlci5oYXNDbGFzc2VzKHNpYmxpbmcgYXMgSFRNTEVsZW1lbnQsIGNsYXNzZXMpKSBhcyBUO1xuICAgIH1cblxuICAgIGV4cG9ydCBpbnRlcmZhY2UgY3JlYXRlRWxlbWVudE9wdGlvbnM8RWxlbWVudFR5cGUgZXh0ZW5kcyBFbGVtZW50PiB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTcGVjaWZpZXMgYSBjbGFzcyB0byBhZGQgdG8gdGhlIGVsZW1lbnRcbiAgICAgICAgICovXG4gICAgICAgIGNsYXNzTmFtZT86c3RyaW5nO1xuICAgICAgICAvKipcbiAgICAgICAgICogU3BlY2lmaWVzIGFuIElEIHRvIGFkZCB0byB0aGUgZWxlbWVudFxuICAgICAgICAgKi9cbiAgICAgICAgaWQ/OiBzdHJpbmc7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTcGVjaWZpZXMgYW4gZWxlbWVudCB0byBhcHBlbmQgdGhlIGNyZWF0ZWQgZWxlbWVudCB0b1xuICAgICAgICAgKi9cbiAgICAgICAgYXBwZW5kVG8/Ok5vZGU7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTcGVjaWZpZXMgdGV4dCB0byBhZGQgdG8gdGhlIGVsZW1lbnRcbiAgICAgICAgICovXG4gICAgICAgIHRleHQ/OnN0cmluZztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNwZWNpZmllcyBhbiBlbGVtZW50IG9yIGVsZW1lbnRzIHRvIGFwcGVuZCB0byB0aGUgY3JlYXRlZCBlbGVtZW50XG4gICAgICAgICAqL1xuICAgICAgICBhcHBlbmQ/OiBOb2RlfE5vZGVbXTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNwZWNpZmllcyBhdHRyaWJ1dGVzIHRvIGFkZCB0byB0aGUgY3JlYXRlZCBlbGVtZW50XG4gICAgICAgICAqL1xuICAgICAgICBhdHRyaWJ1dGVzPzoge1xuICAgICAgICAgICAgW2tleTpzdHJpbmddOiBzdHJpbmc7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNwZWNpZmllcyBzdHlsZXMgdG8gc2V0IG9uIHRoZSBjcmVhdGVkIGVsZW1lbnRcbiAgICAgICAgICovXG4gICAgICAgIHN0eWxlPzoge1xuICAgICAgICAgICAgW3AgaW4ga2V5b2YgQ1NTU3R5bGVEZWNsYXJhdGlvbl0/OiBDU1NTdHlsZURlY2xhcmF0aW9uW3BdO1xuICAgICAgICB9O1xuICAgICAgICAvKipcbiAgICAgICAgICogU3BlY2lmaWVzIHByb3BlcnRpZXMgdG8gc2V0IG9uIHRoZSBjcmVhdGVkIGVsZW1lbnRcbiAgICAgICAgICovXG4gICAgICAgIHByb3BlcnRpZXM/OiB7XG4gICAgICAgICAgICBba2V5IGluIGtleW9mIEVsZW1lbnRUeXBlXT86RWxlbWVudFR5cGVba2V5XTtcbiAgICAgICAgfTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNwZWNpZmllcyBhIEhUTUwgZWxlbWVudCB0byB3cmFwIHRoZSBjcmVhdGVkIGVsZW1lbnQgaW4uIFdoZW4gdXNlZCBpbiBjb21iaW5hdGlvbiB3aXRoXG4gICAgICAgICAqIGFwcGVuZFRvLCB0aGUgd3JhcHBlciB3aWxsIGJlIGFwcGVuZGVkIHRvIHRoZSBlbGVtZW50LlxuICAgICAgICAgKi9cbiAgICAgICAgd3JhcD86IEhUTUxFbGVtZW50O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGFwcGx5T3B0aW9ucyhlbGVtZW50OkVsZW1lbnQsIG9wdGlvbnM6IGNyZWF0ZUVsZW1lbnRPcHRpb25zPEVsZW1lbnQ+KSB7XG4gICAgICAgIGxldCBodG1sRWxlbWVudCA9IGVsZW1lbnQgYXMgSFRNTEVsZW1lbnQ7XG5cbiAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zICE9PSAnb2JqZWN0JykgcmV0dXJuO1xuICAgICAgICBcbiAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zLmNsYXNzTmFtZSA9PT0gJ3N0cmluZycpIGVsZW1lbnQuY2xhc3NOYW1lID0gb3B0aW9ucy5jbGFzc05hbWU7XG4gICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5pZCA9PT0gJ3N0cmluZycpIGVsZW1lbnQuaWQgPSBvcHRpb25zLmlkO1xuICAgICAgICBpZiAob3B0aW9ucy53cmFwKSBvcHRpb25zLndyYXAuYXBwZW5kQ2hpbGQoZWxlbWVudCk7XG4gICAgICAgIGlmIChvcHRpb25zLmFwcGVuZFRvKSBvcHRpb25zLmFwcGVuZFRvLmFwcGVuZENoaWxkKG9wdGlvbnMud3JhcCB8fCBlbGVtZW50KTtcbiAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zLnRleHQgPT09ICdzdHJpbmcnKSBlbGVtZW50LmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKG9wdGlvbnMudGV4dCkpO1xuICAgICAgICBpZiAob3B0aW9ucy5hcHBlbmQpIHtcbiAgICAgICAgICAgIGlmIChvcHRpb25zLmFwcGVuZCBpbnN0YW5jZW9mIEFycmF5KSB7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgY2hpbGRFbGVtZW50IG9mIG9wdGlvbnMuYXBwZW5kKSB7XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuYXBwZW5kQ2hpbGQoY2hpbGRFbGVtZW50KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGVsZW1lbnQuYXBwZW5kQ2hpbGQob3B0aW9ucy5hcHBlbmQpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlNcbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0aW9ucy5hdHRyaWJ1dGVzKSB7XG4gICAgICAgICAgICBmb3IgKGxldCBrZXkgaW4gb3B0aW9ucy5hdHRyaWJ1dGVzKSB7XG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuYXR0cmlidXRlcy5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKGtleSwgb3B0aW9ucy5hdHRyaWJ1dGVzW2tleV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0aW9ucy5zdHlsZSAmJiB0eXBlb2YgaHRtbEVsZW1lbnQuc3R5bGUgPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICBmb3IgKGxldCBrZXkgaW4gb3B0aW9ucy5zdHlsZSkge1xuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLnN0eWxlLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgICAgICAgICAgICAgaHRtbEVsZW1lbnQuc3R5bGVba2V5XSA9IG9wdGlvbnMuc3R5bGVba2V5XTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9wdGlvbnMucHJvcGVydGllcykge1xuICAgICAgICAgICAgZm9yIChsZXQga2V5IGluIG9wdGlvbnMucHJvcGVydGllcykge1xuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLnByb3BlcnRpZXMuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICAgICAgICAgICAgICBlbGVtZW50W2tleV0gPSBvcHRpb25zLnByb3BlcnRpZXNba2V5XTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBESVZcbiAgICAgKiBAcGFyYW0gb3B0aW9ucyBBZGRpdGlvbmFsIG9wZXJhdGlvbnMgdG8gcGVyZm9ybSBvbiB0aGUgZWxlbWVudFxuICAgICAqL1xuICAgIGV4cG9ydCBmdW5jdGlvbiBjcmVhdGVFbGVtZW50KG9wdGlvbnM/OmNyZWF0ZUVsZW1lbnRPcHRpb25zPEhUTUxEaXZFbGVtZW50Pik6IEhUTUxEaXZFbGVtZW50O1xuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhbiBlbGVtZW50XG4gICAgICogQHBhcmFtIHRhZ05hbWUgVGhlIHRhZyBvZiB0aGUgZWxlbWVudCB0byBjcmVhdGVcbiAgICAgKiBAcGFyYW0gb3B0aW9ucyBBZGRpdGlvbmFsIG9wZXJhdGlvbnMgdG8gcGVyZm9ybSBvbiB0aGUgZWxlbWVudFxuICAgICAqL1xuICAgIGV4cG9ydCBmdW5jdGlvbiBjcmVhdGVFbGVtZW50PEsgZXh0ZW5kcyBrZXlvZiBIVE1MRWxlbWVudFRhZ05hbWVNYXA+KHRhZ05hbWU6IEssIG9wdGlvbnM/OmNyZWF0ZUVsZW1lbnRPcHRpb25zPEhUTUxFbGVtZW50VGFnTmFtZU1hcFtLXT4pOiBIVE1MRWxlbWVudFRhZ05hbWVNYXBbS107XG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGFuIGVsZW1lbnRcbiAgICAgKiBAcGFyYW0gdGFnTmFtZSBUaGUgdGFnIG9mIHRoZSBlbGVtZW50IHRvIGNyZWF0ZVxuICAgICAqIEBwYXJhbSBvcHRpb25zIEFkZGl0aW9uYWwgb3BlcmF0aW9ucyB0byBwZXJmb3JtIG9uIHRoZSBlbGVtZW50XG4gICAgICovXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUVsZW1lbnQodGFnTmFtZTogc3RyaW5nLCBvcHRpb25zPzpjcmVhdGVFbGVtZW50T3B0aW9uczxIVE1MRWxlbWVudD4pOiBIVE1MRWxlbWVudDtcbiAgICBleHBvcnQgZnVuY3Rpb24gY3JlYXRlRWxlbWVudCh0YWdOYW1lT3JEaXZPcHRpb25zOnN0cmluZ3xjcmVhdGVFbGVtZW50T3B0aW9uczxIVE1MRGl2RWxlbWVudD4sIG9wdGlvbnM/OmNyZWF0ZUVsZW1lbnRPcHRpb25zPEhUTUxFbGVtZW50Pik6IEhUTUxFbGVtZW50IHtcbiAgICAgICAgbGV0IHRhZ05hbWU6c3RyaW5nO1xuICAgICAgICBcbiAgICAgICAgaWYgKHR5cGVvZiB0YWdOYW1lT3JEaXZPcHRpb25zID09PSAnc3RyaW5nJykgdGFnTmFtZSA9IHRhZ05hbWVPckRpdk9wdGlvbnM7XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGFnTmFtZSA9ICdkaXYnO1xuICAgICAgICAgICAgb3B0aW9ucyA9IHRhZ05hbWVPckRpdk9wdGlvbnM7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodGFnTmFtZSk7XG5cbiAgICAgICAgYXBwbHlPcHRpb25zKGVsZW1lbnQsIG9wdGlvbnMpO1xuXG4gICAgICAgIHJldHVybiBlbGVtZW50O1xuICAgIH1cblxuICAgIGV4cG9ydCBmdW5jdGlvbiBjcmVhdGVFbGVtZW50V2l0aFRleHQ8SyBleHRlbmRzIGtleW9mIEhUTUxFbGVtZW50VGFnTmFtZU1hcD4odGFnTmFtZTogSywgdGV4dDpzdHJpbmcpOiBIVE1MRWxlbWVudFRhZ05hbWVNYXBbS107XG4gICAgZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUVsZW1lbnRXaXRoVGV4dCh0YWdOYW1lOiBzdHJpbmcsIHRleHQ6c3RyaW5nKTogSFRNTEVsZW1lbnQ7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBlbGVtZW50IHdpdGggdGhlIHNwZWNpZmllZCB0ZXh0XG4gICAgICogQHBhcmFtIHRhZ05hbWUgVGhlIHRhZyBvZiB0aGUgZWxlbWVudCB0byBjcmVhdGVcbiAgICAgKiBAcGFyYW0gdGV4dCBUaGUgdGV4dCB0byBhZGQgdG8gdGhlIGNyZWF0ZWQgZWxlbWVudFxuICAgICAqL1xuICAgIGV4cG9ydCBmdW5jdGlvbiBjcmVhdGVFbGVtZW50V2l0aFRleHQodGFnTmFtZTpzdHJpbmcsIHRleHQ6c3RyaW5nKTogSFRNTEVsZW1lbnQge1xuICAgICAgICByZXR1cm4gY3JlYXRlRWxlbWVudCh0YWdOYW1lLCB7dGV4dDogdGV4dH0pO1xuICAgIH1cbiAgICBcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGVsZW1lbnQgd2l0aCB0aGUgc3BlY2lmaWVkIGNsYXNzXG4gICAgICogQHBhcmFtIHRhZ05hbWUgVGhlIHRhZyBvZiB0aGUgZWxlbWVudCB0byBjcmVhdGVcbiAgICAgKiBAcGFyYW0gY2xhc3NOYW1lIFRoZSBjbGFzcyB0byBhZGQgdG8gdGhlIGVsZW1lbnRcbiAgICAgKi9cbiAgICBleHBvcnQgZnVuY3Rpb24gY3JlYXRlRWxlbWVudFdpdGhDbGFzczxLIGV4dGVuZHMga2V5b2YgSFRNTEVsZW1lbnRUYWdOYW1lTWFwPih0YWdOYW1lOiBLLCBjbGFzc05hbWU6c3RyaW5nKTogSFRNTEVsZW1lbnRUYWdOYW1lTWFwW0tdO1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gZWxlbWVudCB3aXRoIHRoZSBzcGVjaWZpZWQgY2xhc3NcbiAgICAgKiBAcGFyYW0gdGFnTmFtZSBUaGUgdGFnIG9mIHRoZSBlbGVtZW50IHRvIGNyZWF0ZVxuICAgICAqIEBwYXJhbSBjbGFzc05hbWUgVGhlIGNsYXNzIHRvIGFkZCB0byB0aGUgZWxlbWVudFxuICAgICAqL1xuICAgIGV4cG9ydCBmdW5jdGlvbiBjcmVhdGVFbGVtZW50V2l0aENsYXNzKHRhZ05hbWU6IHN0cmluZywgY2xhc3NOYW1lOnN0cmluZyk6IEhUTUxFbGVtZW50O1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBESVYgZWxlbWVudCB3aXRoIHRoZSBzcGVjaWZpZWQgY2xhc3NcbiAgICAgKiBAcGFyYW0gY2xhc3NOYW1lIFRoZSBjbGFzcyB0byBhZGQgdG8gdGhlIGVsZW1lbnRcbiAgICAgKi9cbiAgICBleHBvcnQgZnVuY3Rpb24gY3JlYXRlRWxlbWVudFdpdGhDbGFzcyhjbGFzc05hbWU6c3RyaW5nKTpIVE1MRGl2RWxlbWVudDtcbiAgICBleHBvcnQgZnVuY3Rpb24gY3JlYXRlRWxlbWVudFdpdGhDbGFzcyh0YWdOYW1lT3JDbGFzc05hbWU6c3RyaW5nLCBjbGFzc05hbWU/OnN0cmluZyk6IEhUTUxFbGVtZW50IHtcbiAgICAgICAgbGV0IHRhZ05hbWUgPSB0YWdOYW1lT3JDbGFzc05hbWU7XG5cbiAgICAgICAgaWYgKHR5cGVvZiBjbGFzc05hbWUgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICB0YWdOYW1lID0gJ2Rpdic7XG4gICAgICAgICAgICBjbGFzc05hbWUgPSB0YWdOYW1lT3JDbGFzc05hbWU7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gY3JlYXRlRWxlbWVudCh0YWdOYW1lLCB7Y2xhc3NOYW1lOiBjbGFzc05hbWV9KTtcbiAgICB9XG5cbiAgICBleHBvcnQgZnVuY3Rpb24gY3JlYXRlRWxlbWVudFdpdGhJRDxLIGV4dGVuZHMga2V5b2YgSFRNTEVsZW1lbnRUYWdOYW1lTWFwPih0YWdOYW1lOiBLLCBpZDpzdHJpbmcpOiBIVE1MRWxlbWVudFRhZ05hbWVNYXBbS107XG4gICAgZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUVsZW1lbnRXaXRoSUQodGFnTmFtZTogc3RyaW5nLCBpZDpzdHJpbmcpOiBIVE1MRWxlbWVudDtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGVsZW1lbnQgd2l0aCB0aGUgc3BlY2lmaWVkIGlkXG4gICAgICogQHBhcmFtIHRhZ05hbWUgVGhlIHRhZyBvZiB0aGUgZWxlbWVudCB0byBjcmVhdGVcbiAgICAgKiBAcGFyYW0gaWQgVGhlIGlkIHRvIGFkZCB0byB0aGUgZWxlbWVudFxuICAgICAqL1xuICAgIGV4cG9ydCBmdW5jdGlvbiBjcmVhdGVFbGVtZW50V2l0aElEKHRhZ05hbWU6c3RyaW5nLCBpZDpzdHJpbmcpOiBIVE1MRWxlbWVudCB7XG4gICAgICAgIHJldHVybiBjcmVhdGVFbGVtZW50KHRhZ05hbWUsIHtpZDogaWR9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBuZXcgdGV4dCBlbGVtZW50XG4gICAgICogQHBhcmFtIHRleHQgVGhlIHRleHQgdG8gY3JlYXRlIHRoZSB0ZXh0IGVsZW1lbnQgd2l0aFxuICAgICAqL1xuICAgIGV4cG9ydCBmdW5jdGlvbiBjcmVhdGVUZXh0RWxlbWVudCh0ZXh0OnN0cmluZyk6IFRleHQge1xuICAgICAgICByZXR1cm4gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUodGV4dCk7XG4gICAgfVxuXG4gICAgZXhwb3J0IGludGVyZmFjZSBjcmVhdGVCdXR0b25PcHRpb25zIGV4dGVuZHMgY3JlYXRlRWxlbWVudE9wdGlvbnM8SFRNTEJ1dHRvbkVsZW1lbnQ+IHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIElmIHRydWUsIGRpc2FibGUgdGhlIGNyZWF0ZWQgYnV0dG9uXG4gICAgICAgICAqL1xuICAgICAgICBkaXNhYmxlZD86Ym9vbGVhbjtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIElmIHRydWUsIGNyZWF0ZSBhIGxhcmdlIGJ1dHRvblxuICAgICAgICAgKi9cbiAgICAgICAgbGFyZ2U/OmJvb2xlYW47XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJZiB0cnVlLCBjcmVhdGUgYSBsaW5rIGJ1dHRvblxuICAgICAgICAgKi9cbiAgICAgICAgbGluaz86IGJvb2xlYW47XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJZiB0cnVlLCBjcmVhdGUgYSBza2lubnkgYnV0dG9uXG4gICAgICAgICAqL1xuICAgICAgICBza2lubnk/OiBib29sZWFuO1xuICAgIH1cbiAgICBleHBvcnQgZnVuY3Rpb24gY3JlYXRlQnV0dG9uKG9wdGlvbnM6Y3JlYXRlQnV0dG9uT3B0aW9ucykge1xuICAgICAgICB2YXIgZWxlbWVudCA9IGNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicsIG9wdGlvbnMpO1xuXG4gICAgICAgIGNvbnN0IGJ1dHRvbkNsYXNzTmFtZSA9ICdyaWRlc3R5bGVyLXNob3djYXNlLWJ1dHRvbic7XG4gICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZChidXR0b25DbGFzc05hbWUpO1xuXG4gICAgICAgIGlmIChvcHRpb25zLmxhcmdlKSBlbGVtZW50LmNsYXNzTGlzdC5hZGQoYnV0dG9uQ2xhc3NOYW1lICsgJy1sYXJnZScpO1xuICAgICAgICBpZiAob3B0aW9ucy5kaXNhYmxlZCkgZWxlbWVudC5kaXNhYmxlZCA9IHRydWU7XG4gICAgICAgIGlmIChvcHRpb25zLmxpbmspIGVsZW1lbnQuY2xhc3NMaXN0LmFkZChidXR0b25DbGFzc05hbWUgKyAnLWxpbmsnKVxuICAgICAgICBpZiAob3B0aW9ucy5za2lubnkpIGVsZW1lbnQuY2xhc3NMaXN0LmFkZChidXR0b25DbGFzc05hbWUgKyAnLXNraW5ueScpO1xuXG4gICAgICAgIHJldHVybiBlbGVtZW50O1xuICAgIH1cblxuICAgIGNvbnN0IGljb25DbGFzc1ByZWZpeCA9ICdyaWRlc3R5bGVyLXNob3djYXNlLWljb24gcmlkZXN0eWxlci1zaG93Y2FzZS1pY29uLSc7XG4gICAgZXhwb3J0IGludGVyZmFjZSBjcmVhdGVJY29uT3B0aW9ucyBleHRlbmRzIGNyZWF0ZUVsZW1lbnRPcHRpb25zPEhUTUxFbGVtZW50PiB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgY2xhc3Mgb2YgdGhlIGljb24gdG8gY3JlYXRlXG4gICAgICAgICAqL1xuICAgICAgICBpY29uOiBzdHJpbmc7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhbiBpY29uXG4gICAgICogQHBhcmFtIGljb24gVGhlIGNsYXNzIG9mIHRoZSBpY29uIHRvIGNyZWF0ZVxuICAgICAqL1xuICAgIGV4cG9ydCBmdW5jdGlvbiBjcmVhdGVJY29uKGljb246c3RyaW5nKSA6IEhUTUxFbGVtZW50O1xuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhbiBpY29uXG4gICAgICogQHBhcmFtIG9wdGlvbnMgT3B0aW9ucyB0byBjcmVhdGUgdGhlIGljb24gd2l0aFxuICAgICAqL1xuICAgIGV4cG9ydCBmdW5jdGlvbiBjcmVhdGVJY29uKG9wdGlvbnM6Y3JlYXRlSWNvbk9wdGlvbnMpIDogSFRNTEVsZW1lbnQ7XG4gICAgZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUljb24oaWNvbk9yT3B0aW9uczogc3RyaW5nfGNyZWF0ZUljb25PcHRpb25zKSA6IEhUTUxFbGVtZW50IHtcbiAgICAgICAgbGV0IG9wdGlvbnM6Y3JlYXRlSWNvbk9wdGlvbnM7XG5cbiAgICAgICAgLy8gU2V0dXAgb3B0aW9uc1xuICAgICAgICBpZiAodHlwZW9mIGljb25Pck9wdGlvbnMgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICBvcHRpb25zID0ge1xuICAgICAgICAgICAgICAgIGljb246IGljb25Pck9wdGlvbnNcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBvcHRpb25zID0gaWNvbk9yT3B0aW9ucztcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gQnVpbGQgaWNvbiBjbGFzc05hbWVcbiAgICAgICAge1xuICAgICAgICAgICAgbGV0IGljb25DbGFzcyA9IG9wdGlvbnMuaWNvbjtcblxuICAgICAgICAgICAgaWYgKCFpY29uQ2xhc3Muc3RhcnRzV2l0aChpY29uQ2xhc3NQcmVmaXgpKVxuICAgICAgICAgICAgICAgIGljb25DbGFzcyA9IGljb25DbGFzc1ByZWZpeCArIGljb25DbGFzcztcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zLmNsYXNzTmFtZSA9PT0gJ3N0cmluZycpXG4gICAgICAgICAgICAgICAgaWNvbkNsYXNzID0gb3B0aW9ucy5jbGFzc05hbWUgKyAnICcgKyBpY29uQ2xhc3M7XG5cbiAgICAgICAgICAgIG9wdGlvbnMuY2xhc3NOYW1lID0gaWNvbkNsYXNzO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gY3JlYXRlRWxlbWVudCgnaScsIG9wdGlvbnMpO1xuICAgIH1cblxuICAgIGV4cG9ydCBmdW5jdGlvbiBjcmVhdGVTVkdFbGVtZW50PEsgZXh0ZW5kcyBrZXlvZiBFbGVtZW50VGFnTmFtZU1hcD4odGFnTmFtZTpLLCBvcHRpb25zOmNyZWF0ZUVsZW1lbnRPcHRpb25zPEVsZW1lbnRUYWdOYW1lTWFwW0tdPikgOiBFbGVtZW50VGFnTmFtZU1hcFtLXTtcbiAgICBleHBvcnQgZnVuY3Rpb24gY3JlYXRlU1ZHRWxlbWVudCh0YWdOYW1lOnN0cmluZywgb3B0aW9uczpjcmVhdGVFbGVtZW50T3B0aW9uczxTVkdFbGVtZW50PikgOiBTVkdFbGVtZW50O1xuICAgIGV4cG9ydCBmdW5jdGlvbiBjcmVhdGVTVkdFbGVtZW50KHRhZ05hbWU6c3RyaW5nLCBvcHRpb25zOmNyZWF0ZUVsZW1lbnRPcHRpb25zPFNWR0VsZW1lbnQ+KSA6IFNWR0VsZW1lbnQge1xuICAgICAgICBsZXQgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLCB0YWdOYW1lKTtcblxuICAgICAgICBhcHBseU9wdGlvbnMoZWxlbWVudCwgb3B0aW9ucyk7XG5cbiAgICAgICAgcmV0dXJuIGVsZW1lbnQ7XG4gICAgfVxuXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZURlc2NyaXB0aW9uTGlzdCh2YWx1ZXM/OntsYWJlbDogc3RyaW5nLCBkZXNjcmlwdGlvbjogc3RyaW5nfVtdKTpIVE1MRExpc3RFbGVtZW50IHtcbiAgICAgICAgbGV0IGRlc2NyaXB0aW9uTGlzdCA9IEhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCgnZGwnLCB7XG4gICAgICAgICAgICBjbGFzc05hbWU6ICdyaWRlc3R5bGVyLXNob3djYXNlLWRlc2NyaXB0aW9uLWxpc3QnLFxuICAgICAgICAgICAgYXBwZW5kVG86IHRoaXMuc3VtbWFyeUVsZW1lbnRcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKHZhbHVlcykgYXBwZW5kRGVzY3JpcHRpb25MaXN0VmFsdWVzKGRlc2NyaXB0aW9uTGlzdCwgdmFsdWVzKTtcblxuICAgICAgICByZXR1cm4gZGVzY3JpcHRpb25MaXN0O1xuICAgIH1cblxuICAgIGV4cG9ydCBmdW5jdGlvbiBhcHBlbmREZXNjcmlwdGlvbkxpc3RWYWx1ZXMoZGVzY3JpcHRpb25MaXN0OkhUTUxETGlzdEVsZW1lbnQsIHZhbHVlcz86e2xhYmVsOiBzdHJpbmcsIGRlc2NyaXB0aW9uOiBzdHJpbmd9W10pIHtcbiAgICAgICAgZm9yIChjb25zdCB2YWx1ZSBvZiB2YWx1ZXMpIHtcbiAgICAgICAgICAgIEhUTUxIZWxwZXIuY3JlYXRlRWxlbWVudCgnZHQnLCB7XG4gICAgICAgICAgICAgICAgdGV4dDogdmFsdWUubGFiZWwsXG4gICAgICAgICAgICAgICAgYXBwZW5kVG86IGRlc2NyaXB0aW9uTGlzdFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBIVE1MSGVscGVyLmNyZWF0ZUVsZW1lbnQoJ2RkJywge1xuICAgICAgICAgICAgICAgIHRleHQ6IHZhbHVlLmRlc2NyaXB0aW9uLFxuICAgICAgICAgICAgICAgIGFwcGVuZFRvOiBkZXNjcmlwdGlvbkxpc3RcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IFxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgYWxsIGNoaWxkcmVuIGZyb20gYW4gZWxlbWVudFxuICAgICAqIEBwYXJhbSBlbGVtZW50IFRoZSBlbGVtZW50IHRvIGVtcHR5XG4gICAgICovXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGVtcHR5KGVsZW1lbnQ6SFRNTEVsZW1lbnQpIHtcbiAgICAgICAgbGV0IGNoaWxkOk5vZGU7XG4gICAgICAgIFxuICAgICAgICB3aGlsZSAoY2hpbGQgPSBlbGVtZW50Lmxhc3RDaGlsZClcbiAgICAgICAgICAgIGVsZW1lbnQucmVtb3ZlQ2hpbGQoY2hpbGQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEJpbmRzIGFuIGV2ZW50IGxpc3RlbmVyIHRoYXQgaXMgZXhlY3V0ZWQgb25jZSBhbmQgdGhlbiByZW1vdmVkIGZyb20gdGhlIGVsZW1lbnRcbiAgICAgKiBAcGFyYW0gZWxlbWVudCBUaGUgZWxlbWVudCB0byBiaW5kIGEgbGlzdGVuZXIgdG9cbiAgICAgKiBAcGFyYW0gdHlwZSBUaGUgdHlwZSBvZiBldmVudCB0byBsaXN0ZW4gdG9cbiAgICAgKiBAcGFyYW0gbGlzdGVuZXIgVGhlIGV2ZW50IGxpc3RlbmVyIHRvIGNhbGwgd2hlbiB0aGUgZXZlbnQgaXMgdHJpZ2dlcmVkXG4gICAgICogQHBhcmFtIHVzZUNhcHR1cmUgSWYgdHJ1ZSwgcnVuIHRoZSBsaXN0ZW5lciBpbiB0aGUgY2FwdHVyZSBwaGFzZSBvZiB0aGUgZXZlbnRcbiAgICAgKi9cbiAgICBleHBvcnQgZnVuY3Rpb24gb25jZTxLIGV4dGVuZHMga2V5b2YgSFRNTEVsZW1lbnRFdmVudE1hcD4oZWxlbWVudDpIVE1MRWxlbWVudCwgdHlwZTogSywgbGlzdGVuZXI6ICh0aGlzOiBIVE1MRWxlbWVudCwgZXY6IEhUTUxFbGVtZW50RXZlbnRNYXBbS10pID0+IGFueSwgdXNlQ2FwdHVyZT86IGJvb2xlYW4pOiB2b2lkO1xuICAgIC8qKlxuICAgICAqIEJpbmRzIGFuIGV2ZW50IGxpc3RlbmVyIHRoYXQgaXMgZXhlY3V0ZWQgb25jZSBhbmQgdGhlbiByZW1vdmVkIGZyb20gdGhlIGVsZW1lbnRcbiAgICAgKiBAcGFyYW0gZWxlbWVudCBUaGUgZWxlbWVudCB0byBiaW5kIGEgbGlzdGVuZXIgdG9cbiAgICAgKiBAcGFyYW0gdHlwZSBUaGUgdHlwZSBvZiBldmVudCB0byBsaXN0ZW4gdG9cbiAgICAgKiBAcGFyYW0gbGlzdGVuZXIgVGhlIGV2ZW50IGxpc3RlbmVyIHRvIGNhbGwgd2hlbiB0aGUgZXZlbnQgaXMgdHJpZ2dlcmVkXG4gICAgICogQHBhcmFtIHVzZUNhcHR1cmUgSWYgdHJ1ZSwgcnVuIHRoZSBsaXN0ZW5lciBpbiB0aGUgY2FwdHVyZSBwaGFzZSBvZiB0aGUgZXZlbnRcbiAgICAgKi9cbiAgICBleHBvcnQgZnVuY3Rpb24gb25jZShlbGVtZW50OkhUTUxFbGVtZW50LCB0eXBlOiBzdHJpbmcsIGxpc3RlbmVyOiBFdmVudExpc3RlbmVyT3JFdmVudExpc3RlbmVyT2JqZWN0LCB1c2VDYXB0dXJlPzogYm9vbGVhbik6IHZvaWQ7XG4gICAgZXhwb3J0IGZ1bmN0aW9uIG9uY2UoZWxlbWVudDpIVE1MRWxlbWVudCwgdHlwZTogc3RyaW5nLCBsaXN0ZW5lcjogRXZlbnRMaXN0ZW5lck9yRXZlbnRMaXN0ZW5lck9iamVjdCwgdXNlQ2FwdHVyZT86IGJvb2xlYW4pOiB2b2lkIHtcbiAgICAgICAgbGV0IG9uY2VMaXN0ZW5lcjpFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gKGV2dCkge1xuICAgICAgICAgICAgZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKHR5cGUsIG9uY2VMaXN0ZW5lciwgdXNlQ2FwdHVyZSk7XG5cbiAgICAgICAgICAgIGlmICh0eXBlb2YgbGlzdGVuZXIgPT09ICdvYmplY3QnKSBsaXN0ZW5lciA9IGxpc3RlbmVyLmhhbmRsZUV2ZW50O1xuXG4gICAgICAgICAgICByZXR1cm4gbGlzdGVuZXIuY2FsbCh0aGlzLCBldnQpO1xuICAgICAgICB9O1xuXG4gICAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcih0eXBlLCBvbmNlTGlzdGVuZXIsIHVzZUNhcHR1cmUpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIGRvY3VtZW50IHRoYXQgdGhlIGVsZW1lbnQgaXMgYSBwYXJ0IG9mIChpZiB0aGVyZSBpcyBvbmUpXG4gICAgICogQHBhcmFtIGVsZW1lbnQgVGhlIGVsZW1lbnRcbiAgICAgKi9cbiAgICBleHBvcnQgZnVuY3Rpb24gZ2V0RG9jdW1lbnQoZWxlbWVudDpIVE1MRWxlbWVudCk6RG9jdW1lbnQge1xuICAgICAgICByZXR1cm4gZWxlbWVudC5vd25lckRvY3VtZW50O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIHdpbmRvdyB0aGF0IHRoZSBlbGVtZW50IGlzIGEgcGFydCBvZiAoaWYgdGhlcmUgaXMgb25lKVxuICAgICAqIEBwYXJhbSBlbGVtZW50IFRoZSBlbGVtZW50XG4gICAgICovXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGdldFdpbmRvdyhlbGVtZW50OkhUTUxFbGVtZW50KTpXaW5kb3cge1xuICAgICAgICByZXR1cm4gZ2V0RG9jdW1lbnQoZWxlbWVudCkuZGVmYXVsdFZpZXc7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgY29udGVudCBvZiBhbiBlbGVtZW50IHRvIGEgc3RyaW5nXG4gICAgICogQHBhcmFtIGVsZW1lbnQgVGhlIGVsZW1lbnRcbiAgICAgKiBAcGFyYW0gdGV4dCBUaGUgdGV4dFxuICAgICAqIEByZXR1cm5zIFRoZSBlbGVtZW50IHRoYXQgd2FzIHBhc3NlZCBpblxuICAgICAqL1xuICAgIGV4cG9ydCBmdW5jdGlvbiBzZXRUZXh0KGVsZW1lbnQ6SFRNTEVsZW1lbnQsIHRleHQ6c3RyaW5nKTpIVE1MRWxlbWVudCB7XG4gICAgICAgIGVtcHR5KGVsZW1lbnQpO1xuICAgICAgICBlbGVtZW50LmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHRleHQpKTtcbiAgICAgICAgcmV0dXJuIGVsZW1lbnQ7XG4gICAgfVxufSIsIm5hbWVzcGFjZSBSaWRlU3R5bGVyU2hvd2Nhc2UuTnVtYmVySGVscGVyIHtcbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBudW1iZXIgYm91bmRlZCB0byBhIHJhbmdlXG4gICAgICogQHBhcmFtIG51bWJlciBUaGUgbnVtYmVyIHRvIGJvdW5kXG4gICAgICogQHBhcmFtIG1pbiBUaGUgbWluaW11bSBhbGxvd2FibGUgbnVtYmVyXG4gICAgICogQHBhcmFtIG1heCBUaGUgbWF4aW11bSBhbGxvd2FibGUgbnVtYmVyXG4gICAgICovXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGJvdW5kKG51bWJlcjpudW1iZXIsIG1pbjpudW1iZXIsIG1heDpudW1iZXIpOm51bWJlciB7XG4gICAgICAgIHJldHVybiBudW1iZXIgPCBtaW4gPyBtaW4gOiAobnVtYmVyID4gbWF4ID8gbWF4IDogbnVtYmVyKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBFeHRlbmQgYSBudW1iZXIgcmFuZ2Ugd2l0aCBhIG51bWJlclxuICAgICAqIEBwYXJhbSBudW1iZXIgVGhlIG51bWJlciB0byBleHRlbmQgdGhlIHJhbmdlIHdpdGhcbiAgICAgKiBAcGFyYW0gcmFuZ2UgVGhlIHJhbmdlIHRvIGV4dGVuZFxuICAgICAqIFxuICAgICAqIEByZXR1cm5zIFRoZSByYW5nZSBvYmplY3QgdGhhdCB3YXMgcGFzc2VkIGluIGV4dGVuZGVkIGJ5IHRoZSBudW1iZXJcbiAgICAgKi9cbiAgICBleHBvcnQgZnVuY3Rpb24gZXh0ZW5kUmFuZ2UobnVtYmVyOm51bWJlciwgcmFuZ2U6UmFuZ2UpOlJhbmdlIHtcbiAgICAgICAgaWYgKCFyYW5nZSkgcmFuZ2UgPSB7XG4gICAgICAgICAgICBtaW46IEluZmluaXR5LFxuICAgICAgICAgICAgbWF4OiAtSW5maW5pdHlcbiAgICAgICAgfTtcblxuICAgICAgICBpZiAobnVtYmVyIDwgcmFuZ2UubWluKSByYW5nZS5taW4gPSBudW1iZXI7XG4gICAgICAgIGlmIChudW1iZXIgPiByYW5nZS5tYXgpIHJhbmdlLm1heCA9IG51bWJlcjtcblxuICAgICAgICByZXR1cm4gcmFuZ2U7XG4gICAgfVxuXG4gICAgZXhwb3J0IGludGVyZmFjZSBSYW5nZSB7XG4gICAgICAgIG1pbjogbnVtYmVyO1xuICAgICAgICBtYXg6IG51bWJlcjtcbiAgICB9XG59IiwibmFtZXNwYWNlIFJpZGVTdHlsZXJTaG93Y2FzZSB7XG4gICAgZXhwb3J0IG5hbWVzcGFjZSBPYmplY3RIZWxwZXIge1xuICAgICAgICAvKipcbiAgICAgICAgICogQ29weSBhbGwgZW51bWVyYWJsZSBvd24gcHJvcGVydGllcyBmcm9tIG9uZSBvciBtb3JlIHNvdXJjZSBvYmplY3RzIHRvIGEgdGFyZ2V0IG9iamVjdFxuICAgICAgICAgKiBAcGFyYW0gdGFyZ2V0IFRoZSB0YXJnZXQgb2JqZWN0XG4gICAgICAgICAqIEBwYXJhbSBhc3NpZ25PYmplY3RzIFRoZSBzb3VyY2Ugb2JqZWN0KHMpXG4gICAgICAgICAqL1xuICAgICAgICBleHBvcnQgZnVuY3Rpb24gYXNzaWduPFQxLFQyPih0YXJnZXQ6VDEsIC4uLmFzc2lnbk9iamVjdHM6VDJbXSkgOiBUMSAmIFQyO1xuICAgICAgICBleHBvcnQgZnVuY3Rpb24gYXNzaWduPFQ+KHRhcmdldDpULCAuLi5hc3NpZ25PYmplY3RzOlRbXSk6IFQ7XG4gICAgICAgIGV4cG9ydCBmdW5jdGlvbiBhc3NpZ24odGFyZ2V0Om9iamVjdCwgLi4uYXNzaWduT2JqZWN0czpvYmplY3RbXSk6b2JqZWN0O1xuICAgICAgICBleHBvcnQgZnVuY3Rpb24gYXNzaWduKHRhcmdldDpvYmplY3QsIC4uLmFzc2lnbk9iamVjdHM6b2JqZWN0W10pOm9iamVjdCB7XG4gICAgICAgICAgICBpZiAodGFyZ2V0ID09IG51bGwpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY29udmVydCB1bmRlZmluZWQgb3IgbnVsbCB0byBvYmplY3RcIik7XG5cbiAgICAgICAgICAgIGxldCB0bzpvYmplY3QgPSBPYmplY3QodGFyZ2V0KTtcblxuICAgICAgICAgICAgZm9yIChsZXQgc291cmNlIG9mIGFzc2lnbk9iamVjdHMpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXNvdXJjZSkgY29udGludWU7XG5cbiAgICAgICAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gc291cmNlKSBcbiAgICAgICAgICAgICAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpXG4gICAgICAgICAgICAgICAgICAgICAgICB0b1trZXldID0gc291cmNlW2tleV07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiB0bztcbiAgICAgICAgfVxuXG4gICAgICAgIGV4cG9ydCBmdW5jdGlvbiBjb3B5PFQ+KHRhcmdldDpUKTpUIHtcbiAgICAgICAgICAgIHJldHVybiBhc3NpZ24oe30sIHRhcmdldCk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogUmV0dXJucyBhbGwgb2YgdGhlIGtleXMgZm9yIG93biBwcm9wZXJ0aWVzIG9uIGFuIG9iamVjdFxuICAgICAgICAgKiBAcGFyYW0gdGFyZ2V0IFRoZSBvYmplY3RcbiAgICAgICAgICovXG4gICAgICAgIGV4cG9ydCBmdW5jdGlvbiBnZXRLZXlzKHRhcmdldDpvYmplY3QpOnN0cmluZ1tdIHtcbiAgICAgICAgICAgIGxldCBrZXlzOnN0cmluZ1tdID0gW107XG5cbiAgICAgICAgICAgIGZvciAodmFyIGtleSBpbiB0YXJnZXQpXG4gICAgICAgICAgICAgICAgaWYgKHRhcmdldC5oYXNPd25Qcm9wZXJ0eShrZXkpKVxuICAgICAgICAgICAgICAgICAgICBrZXlzLnB1c2goa2V5KTtcblxuICAgICAgICAgICAgcmV0dXJuIGtleXM7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogUmV0dXJucyBhbGwgb2YgdGhlIHZhbHVlcyBmb3Igb3duIHByb3BlcnRpZXMgb24gYW4gb2JqZWN0XG4gICAgICAgICAqIEBwYXJhbSB0YXJnZXQgVGhlIG9iamVjdFxuICAgICAgICAgKi9cbiAgICAgICAgZXhwb3J0IGZ1bmN0aW9uIGdldFZhbHVlczxUPih0YXJnZXQ6e1xuICAgICAgICAgICAgW2s6c3RyaW5nXTpUO1xuICAgICAgICB9KTpUW10ge1xuICAgICAgICAgICAgbGV0IHZhbHVlczpUW10gPSBbXTtcblxuICAgICAgICAgICAgZm9yIChsZXQga2V5IGluIHRhcmdldClcbiAgICAgICAgICAgICAgICBpZiAodGFyZ2V0Lmhhc093blByb3BlcnR5KGtleSkpXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlcy5wdXNoKHRhcmdldFtrZXldKTtcblxuICAgICAgICAgICAgcmV0dXJuIHZhbHVlcztcbiAgICAgICAgfVxuICAgIH1cbn0iLCJuYW1lc3BhY2UgUmlkZVN0eWxlclNob3djYXNlLlByb21pc2VIZWxwZXIge1xyXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGFsbDxUPihwcm9taXNlczogKFQgfCBSaWRlU3R5bGVyUHJvbWlzZTxUPilbXSk6IFJpZGVTdHlsZXJQcm9taXNlPFRbXT47XHJcbiAgICBleHBvcnQgZnVuY3Rpb24gYWxsPFQxLCBUMiwgVDMsIFQ0Pihwcm9taXNlczogW1QxIHwgUmlkZVN0eWxlclByb21pc2U8VDE+LCBUMiB8IFJpZGVTdHlsZXJQcm9taXNlPFQyPiwgVDMgfCBSaWRlU3R5bGVyUHJvbWlzZTxUMz4sIFQ0IHwgUmlkZVN0eWxlclByb21pc2U8VDQ+XSk6IFJpZGVTdHlsZXJQcm9taXNlPFtUMSwgVDIsIFQzLCBUNF0+O1xyXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGFsbDxUMSwgVDIsIFQzPihwcm9taXNlczogW1QxIHwgUmlkZVN0eWxlclByb21pc2U8VDE+LCBUMiB8IFJpZGVTdHlsZXJQcm9taXNlPFQyPiwgVDMgfCBSaWRlU3R5bGVyUHJvbWlzZTxUMz5dKTogUmlkZVN0eWxlclByb21pc2U8W1QxLCBUMiwgVDNdPjtcclxuICAgIGV4cG9ydCBmdW5jdGlvbiBhbGw8VDEsIFQyPihwcm9taXNlczogW1QxIHwgUmlkZVN0eWxlclByb21pc2U8VDE+LCBUMiB8IFJpZGVTdHlsZXJQcm9taXNlPFQyPl0pOiBSaWRlU3R5bGVyUHJvbWlzZTxbVDEsIFQyXT47XHJcbiAgICBleHBvcnQgZnVuY3Rpb24gYWxsKHByb21pc2VzOiAob2JqZWN0IHwgUmlkZVN0eWxlclByb21pc2UpW10pOiBSaWRlU3R5bGVyUHJvbWlzZSB7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0cyA9IFtdO1xyXG4gICAgICAgIGNvbnN0IG1lcmdlZCA9IEFycmF5SGVscGVyLnJlZHVjZShwcm9taXNlcywgZnVuY3Rpb24gKGFjY3VtdWxhdG9yLCBjdXJyZW50UHJvbWlzZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhlbih0aGVuKGFjY3VtdWxhdG9yIGFzIFJpZGVTdHlsZXJQcm9taXNlLCBcclxuICAgICAgICAgICAgICAgICgpID0+IGN1cnJlbnRQcm9taXNlKSwgXHJcbiAgICAgICAgICAgICAgICByID0+IHJlc3VsdHMucHVzaChyKSk7XHJcbiAgICAgICAgfSwgcmVzb2x2ZWQobnVsbCkpO1xyXG5cclxuICAgICAgICBQcm9taXNlLmFsbFxyXG5cclxuICAgICAgICByZXR1cm4gdGhlbihtZXJnZWQgYXMgUmlkZVN0eWxlclByb21pc2UsICgpID0+IHJlc3VsdHMpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgKiBBdHRhY2hlcyBjYWxsYmFja3MgZm9yIHRoZSByZXNvbHV0aW9uIGFuZC9vciByZWplY3Rpb24gb2YgdGhlIFByb21pc2UuXHJcbiAgICAqIEBwYXJhbSBvbmZ1bGZpbGxlZCBUaGUgY2FsbGJhY2sgdG8gZXhlY3V0ZSB3aGVuIHRoZSBQcm9taXNlIGlzIHJlc29sdmVkLlxyXG4gICAgKiBAcGFyYW0gb25yZWplY3RlZCBUaGUgY2FsbGJhY2sgdG8gZXhlY3V0ZSB3aGVuIHRoZSBQcm9taXNlIGlzIHJlamVjdGVkLlxyXG4gICAgKiBAcmV0dXJucyBBIFByb21pc2UgZm9yIHRoZSBjb21wbGV0aW9uIG9mIHdoaWNoIGV2ZXIgY2FsbGJhY2sgaXMgZXhlY3V0ZWQuXHJcbiAgICAqL1xyXG4gICAgZXhwb3J0IGZ1bmN0aW9uIHRoZW48VF9JbiwgRV9Jbj1UX0luLCBUX091dD1UX0luLCBFX091dD1FX0luPihwcm9taXNlOlJpZGVTdHlsZXJQcm9taXNlPFRfSW4sIEVfSW4+LCBvbmZ1bGZpbGxlZD86ICgodmFsdWU6IFRfSW4pID0+IFRfT3V0IHwgUmlkZVN0eWxlclByb21pc2U8VF9PdXQsIEVfT3V0PikgfCB1bmRlZmluZWQgfCBudWxsLCBvbnJlamVjdGVkPzogKChyZWFzb246IEVfSW4pID0+IFRfT3V0IHwgUHJvbWlzZUxpa2U8VF9PdXQ+KSB8IHVuZGVmaW5lZCB8IG51bGwpOiBSaWRlU3R5bGVyUHJvbWlzZTxUX091dCwgRV9PdXQ+IHtcclxuICAgICAgICBjb25zdCByZXR1cm5Qcm9taXNlID0gcmlkZXN0eWxlci5wcm9taXNlPGFueT4oKTtcclxuXHJcbiAgICAgICAgcHJvbWlzZS5kb25lKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBvbmZ1bGZpbGxlZCA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBvbmZ1bGZpbGxlZFJlc3VsdCA9IG9uZnVsZmlsbGVkKHJlc3VsdCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpc1Byb21pc2Uob25mdWxmaWxsZWRSZXN1bHQpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJlc29sdmUgdGhlIHByb21pc2Ugd2hlbiB0aGUgcmV0dXJuZWQgcHJvbWlzZSBpcyByZXNvbHZlZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbmZ1bGZpbGxlZFJlc3VsdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmRvbmUocmVzdWx0ID0+IHJldHVyblByb21pc2UucmVzb2x2ZShyZXN1bHQpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZhaWwocmVzdWx0ID0+IHJldHVyblByb21pc2UucmVqZWN0KHJlc3VsdCkpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBSZXNvbHZlIHRoZSBwcm9taXNlIHdpdGggdGhlIHJldHVybmVkIHZhbHVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVyblByb21pc2UucmVzb2x2ZShvbmZ1bGZpbGxlZFJlc3VsdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuUHJvbWlzZS5yZXNvbHZlKHJlc3VsdCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcHJvbWlzZS5mYWlsKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBvbnJlamVjdGVkID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IG9ucmVqZWN0ZWRSZXN1bHQgPSBvbnJlamVjdGVkKHJlc3VsdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzUHJvbWlzZShvbnJlamVjdGVkUmVzdWx0KSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBSZXNvbHZlIHRoZSBwcm9taXNlIHdoZW4gdGhlIHJldHVybmVkIHByb21pc2UgaXMgcmVzb2x2ZWRcclxuICAgICAgICAgICAgICAgICAgICAgICAgb25yZWplY3RlZFJlc3VsdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmRvbmUocmVzdWx0ID0+IHJldHVyblByb21pc2UucmVzb2x2ZShyZXN1bHQpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZhaWwocmVzdWx0ID0+IHJldHVyblByb21pc2UucmVqZWN0KHJlc3VsdCkpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgeyByZXR1cm5Qcm9taXNlLnJlc29sdmUob25yZWplY3RlZFJlc3VsdCk7IH1cclxuXHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm5Qcm9taXNlLnJlamVjdChyZXN1bHQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuXHJcbiAgICAgICAgcmV0dXJuIHJldHVyblByb21pc2U7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIGEgbmV3IHJlc29sdmVkIHByb21pc2Ugd2l0aCBhbiBvcHRpb25hbCB2YWx1ZVxyXG4gICAgICogQHBhcmFtIHZhbHVlIE9wdGlvbmFsbHksIGEgdmFsdWUgdG8gcmVzb2x2ZSB0aGUgcHJvbWlzZSB3aXRoXHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBmdW5jdGlvbiByZXNvbHZlZDxUPih2YWx1ZT86VCk6IFJpZGVTdHlsZXJQcm9taXNlPFQsIG5ldmVyPiB7XHJcbiAgICAgICAgY29uc3QgcHJvbWlzZSA9IHJpZGVzdHlsZXIucHJvbWlzZTxULCBuZXZlcj4oKTtcclxuICAgICAgICAgICAgICBwcm9taXNlLnJlc29sdmUodmFsdWUpO1xyXG5cclxuICAgICAgICByZXR1cm4gcHJvbWlzZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFRlc3RzIGFuIG9iamVjdCBmb3IgYSBSaWRlc3R5bGVyUHJvbWlzZS1saWtlIGludGVyZmFjZSwgdGVzdGluZyBmb3JcclxuICAgICAqIGRvbmUsIGZhaWwgYW5kIGFsd2F5cyBmdW5jdGlvbnMuXHJcbiAgICAgKiBAcGFyYW0gbyBUaGUgb2JqZWN0IHRvIHRlc3RcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGlzUHJvbWlzZShvOiBhbnkpOiBvIGlzIFJpZGVTdHlsZXJQcm9taXNlIHtcclxuICAgICAgICByZXR1cm4gdHlwZW9mIG8gPT09ICdvYmplY3QnICYmXHJcbiAgICAgICAgICAgICAgIHR5cGVvZiBvLmRvbmUgPT09ICdmdW5jdGlvbicgJiYgXHJcbiAgICAgICAgICAgICAgIHR5cGVvZiBvLmZhaWwgPT09ICdmdW5jdGlvbicgJiZcclxuICAgICAgICAgICAgICAgdHlwZW9mIG8uYWx3YXlzID09PSAnZnVuY3Rpb24nO1xyXG4gICAgfVxyXG59IiwibmFtZXNwYWNlIFJpZGVTdHlsZXJTaG93Y2FzZS5TY3JvbGxIZWxwZXIge1xuICAgIGxldCBzY3JvbGxFdmVudDond2hlZWwnfCdtb3VzZXdoZWVsJ3wnTW96TW91c2VQaXhlbFNjcm9sbCc7XG4gICAgY29uc3QgbW91c2V3aGVlbEV2ZW50U2NhbGUgPSAtMS80MDtcblxuICAgIHtcbiAgICAgICAgY29uc3QgdGVzdEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblxuICAgICAgICBzY3JvbGxFdmVudCA9ICdvbndoZWVsJyBpbiB0ZXN0RWxlbWVudCA/ICd3aGVlbCcgOiAgICAgICAgICAgICAgICAgLy8gTW9kZXJuIGJyb3dlcnMgc3VwcG9ydCBcIndoZWVsXCJcbiAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5vbm1vdXNld2hlZWwgIT09IHVuZGVmaW5lZCA/ICdtb3VzZXdoZWVsJyA6IC8vIFdlYmtpdCBhbmQgSUUgc3VwcG9ydCBhdCBsZWFzdCBcIm1vdXNld2hlZWxcIlxuICAgICAgICAgICAgICAgICAgICAgICdNb3pNb3VzZVBpeGVsU2Nyb2xsJzsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gb2xkZXIgRmlyZWZveFxuICAgIH1cblxuICAgIGV4cG9ydCBmdW5jdGlvbiBhdHRhY2hXaGVlbExpc3RlbmVyKGVsZW1lbnQ6SFRNTEVsZW1lbnQsIGxpc3RlbmVyOihldmVudDpOb3JtYWxpemVkV2hlZWxFdmVudCkgPT4gYW55KSB7XG4gICAgICAgIGlmIChzY3JvbGxFdmVudCA9PT0gJ3doZWVsJykge1xuICAgICAgICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCd3aGVlbCcsIChldmVudDpXaGVlbEV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3Qgbm9ybWFsaXplZEV2ZW50Ok5vcm1hbGl6ZWRXaGVlbEV2ZW50ID0gT2JqZWN0SGVscGVyLmFzc2lnbihldmVudCwge1xuICAgICAgICAgICAgICAgICAgICBvcmlnaW5hbEV2ZW50OiBldmVudFxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIGxpc3RlbmVyKG5vcm1hbGl6ZWRFdmVudCk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKHNjcm9sbEV2ZW50LCAoZXZlbnQ6V2hlZWxFdmVudCkgPT4ge1xuICAgICAgICAgICAgaWYgKCFldmVudCkgZXZlbnQgPSB3aW5kb3cuZXZlbnQgYXMgV2hlZWxFdmVudDtcblxuICAgICAgICAgICAgY29uc3Qgbm9ybWFsaXplZEV2ZW50Ok5vcm1hbGl6ZWRXaGVlbEV2ZW50ID0ge1xuICAgICAgICAgICAgICAgIG9yaWdpbmFsRXZlbnQ6IGV2ZW50LFxuICAgICAgICAgICAgICAgIHRhcmdldDogZXZlbnQudGFyZ2V0IHx8IGV2ZW50LnNyY0VsZW1lbnQsXG4gICAgICAgICAgICAgICAgdHlwZTogJ3doZWVsJyxcbiAgICAgICAgICAgICAgICBkZWx0YU1vZGU6IGV2ZW50LnR5cGUgPT09ICdNb3pNb3VzZVBpeGVsU2Nyb2xsJyA/IDAgOiAxLFxuICAgICAgICAgICAgICAgIGRlbHRhWDogMCxcbiAgICAgICAgICAgICAgICBkZWx0YVk6IDAsXG4gICAgICAgICAgICAgICAgZGVsdGFaOiAwLFxuXG4gICAgICAgICAgICAgICAgcHJldmVudERlZmF1bHQ6ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBldmVudC5wcmV2ZW50RGVmYXVsdCA9PT0gJ2Z1bmN0aW9uJykgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBldmVudC5yZXR1cm5WYWx1ZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgaWYgKHNjcm9sbEV2ZW50ID09PSAnbW91c2V3aGVlbCcpIHtcbiAgICAgICAgICAgICAgICBub3JtYWxpemVkRXZlbnQuZGVsdGFZID0gbW91c2V3aGVlbEV2ZW50U2NhbGUgKiBldmVudC53aGVlbERlbHRhO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGlmIChldmVudC53aGVlbERlbHRhWClcbiAgICAgICAgICAgICAgICAgICAgbm9ybWFsaXplZEV2ZW50LmRlbHRhWCA9IG1vdXNld2hlZWxFdmVudFNjYWxlICogZXZlbnQud2hlZWxEZWx0YVg7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIG5vcm1hbGl6ZWRFdmVudC5kZWx0YVkgPSBldmVudC5kZXRhaWw7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBsaXN0ZW5lcihub3JtYWxpemVkRXZlbnQpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBleHBvcnQgaW50ZXJmYWNlIE5vcm1hbGl6ZWRXaGVlbEV2ZW50IHtcbiAgICAgICAgb3JpZ2luYWxFdmVudDogV2hlZWxFdmVudDtcbiAgICAgICAgdGFyZ2V0OiBFdmVudFRhcmdldDtcbiAgICAgICAgdHlwZTogc3RyaW5nO1xuICAgICAgICBkZWx0YU1vZGU6IG51bWJlcjtcbiAgICAgICAgZGVsdGFYOiBudW1iZXI7XG4gICAgICAgIGRlbHRhWTogbnVtYmVyO1xuICAgICAgICBkZWx0YVo6IG51bWJlcjtcbiAgICAgICAgcHJldmVudERlZmF1bHQoKTogdm9pZDtcbiAgICB9XG59IiwibmFtZXNwYWNlIFJpZGVTdHlsZXJTaG93Y2FzZS5TdHJpbmdIZWxwZXIge1xuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIGZpcnN0IHdvcmQgb2YgdGhlIHNwZWNpZmllZCBzdHJpbmdcbiAgICAgKiBAcGFyYW0gc3RyaW5nIFRoZSBzdHJpbmcgdG8gZ2V0IHRoZSBmaXJzdCB3b3JkIG9mXG4gICAgICovXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGdldEZpcnN0V29yZChzdHJpbmc6c3RyaW5nKTpzdHJpbmcge1xuICAgICAgICBpZiAodHlwZW9mIHN0cmluZyAhPT0gJ3N0cmluZycpIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIHJldHVybiBzdHJpbmcudHJpbSgpLnN1YnN0cigwLCBzdHJpbmcuaW5kZXhPZignICcpKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhlIHNlcXVlbmNlIG9mIGVsZW1lbnRzIG9mIHNlYXJjaFN0cmluZyBjb252ZXJ0ZWQgdG8gYSBTdHJpbmcgaXMgdGhlXG4gICAgICogc2FtZSBhcyB0aGUgY29ycmVzcG9uZGluZyBlbGVtZW50cyBvZiB0aGlzIG9iamVjdCAoY29udmVydGVkIHRvIGEgU3RyaW5nKSBzdGFydGluZyBhdFxuICAgICAqIGVuZFBvc2l0aW9uIOKAkyBsZW5ndGgodGhpcykuIE90aGVyd2lzZSByZXR1cm5zIGZhbHNlLlxuICAgICAqL1xuICAgIGV4cG9ydCBmdW5jdGlvbiBlbmRzV2l0aChzdHJpbmc6c3RyaW5nLCBlbmRpbmc6c3RyaW5nLCBpbmRleD86bnVtYmVyKSB7XG4gICAgICAgIGlmICghKGluZGV4IDwgdGhpcy5sZW5ndGgpKSBpbmRleCA9IHRoaXMubGVuZ3RoO1xuICAgICAgICBlbHNlIGluZGV4IHw9IDA7XG4gICAgICAgIFxuICAgICAgICBsZXQgZW5kaW5nTGVuZ3RoID0gZW5kaW5nLmxlbmd0aDtcbiAgICAgICAgcmV0dXJuIHN0cmluZy5zdWJzdHIoaW5kZXggLSBlbmRpbmdMZW5ndGgsIGVuZGluZ0xlbmd0aCkgPT09IGVuZGluZztcbiAgICB9XG5cbiAgICBleHBvcnQgZnVuY3Rpb24gZXNjYXBlUmVnRXhwKHN0cmluZzpzdHJpbmcpOnN0cmluZyB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBVc2VkIHRvIG1hdGNoIGBSZWdFeHBgXG4gICAgICAgICAqIFtzeW50YXggY2hhcmFjdGVyc10oaHR0cDovL2VjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNy4wLyNzZWMtcGF0dGVybnMpLlxuICAgICAgICAgKi9cbiAgICAgICAgY29uc3QgcmVSZWdFeHBDaGFyID0gL1tcXFxcXiQuKis/KClbXFxde318XS9nO1xuICAgICAgICBjb25zdCByZUhhc1JlZ0V4cENoYXIgPSBSZWdFeHAocmVSZWdFeHBDaGFyLnNvdXJjZSk7XG5cbiAgICAgICAgcmV0dXJuIChzdHJpbmcgJiYgcmVIYXNSZWdFeHBDaGFyLnRlc3Qoc3RyaW5nKSlcbiAgICAgICAgICAgID8gc3RyaW5nLnJlcGxhY2UocmVSZWdFeHBDaGFyLCAnXFxcXCQmJylcbiAgICAgICAgICAgIDogc3RyaW5nO1xuICAgIH1cbn0iLCJuYW1lc3BhY2UgUmlkZVN0eWxlclNob3djYXNlLlN0eWxlSGVscGVyIHtcbiAgICAvKipcbiAgICAgKiBJZiB0cnVlLCB0aGUgd2luZG93LmdldENvbXB1dGVkU3R5bGUgaXMgYXZhaWxhYmxlXG4gICAgICovXG4gICAgbGV0IGhhc0dldENvbXB1dGVkU3R5bGUgPSAnZ2V0Q29tcHV0ZWRTdHlsZScgaW4gd2luZG93O1xuXG4gICAgLyoqXG4gICAgICogSWYgdHJ1ZSwgSFRNTEVsZW1lbnQuY3VycmVudFN0eWxlIGlzIGF2YWlsYWJsZVxuICAgICAqL1xuICAgIGxldCBoYXNDdXJyZW50U3R5bGVTdXBwb3J0ID0gZmFsc2U7XG5cbiAgICAvLyBUZXN0IGZvciBzdXBwb3J0IG9uIGVsZW1lbnQgcHJvcGVydGllc1xuICAgIChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGxldCB0ZXN0RWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXG4gICAgICAgIGhhc0N1cnJlbnRTdHlsZVN1cHBvcnQgPSAnY3VycmVudFN0eWxlJyBpbiB0ZXN0RWxlbWVudDtcblxuICAgICAgICB0cmFuc2l0aW9uRW5kRXZlbnQgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgLy8gVHJhbnNpdGlvbiBldmVudCBtYXBwaW5nXG4gICAgICAgICAgICB2YXIgdHJhbnNpdGlvbnMgPSB7XG4gICAgICAgICAgICAgICAgJ3RyYW5zaXRpb24nICAgICAgIDogJ3RyYW5zaXRpb25lbmQnLFxuICAgICAgICAgICAgICAgICdXZWJraXRUcmFuc2l0aW9uJyA6ICd3ZWJraXRUcmFuc2l0aW9uRW5kJyxcbiAgICAgICAgICAgICAgICAnTW96VHJhbnNpdGlvbicgICAgOiAndHJhbnNpdGlvbmVuZCcsXG4gICAgICAgICAgICAgICAgJ09UcmFuc2l0aW9uJyAgICAgIDogJ29UcmFuc2l0aW9uRW5kJ1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgZm9yICh2YXIgayBpbiB0cmFuc2l0aW9ucylcbiAgICAgICAgICAgICAgICBpZiAoayBpbiB0ZXN0RWxlbWVudC5zdHlsZSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRyYW5zaXRpb25zW2tdO1xuXG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9KSgpO1xuXG4gICAgICAgIHRyYW5zaXRpb25zU3VwcG9ydGVkID0gISF0cmFuc2l0aW9uRW5kRXZlbnQ7XG4gICAgfSkoKTtcblxuICAgIC8qKlxuICAgICAqIFRoZSBuYW1lIG9mIHRoZSB0cmFuc2l0aW9uIGVuZCBldmVudCBmb3IgdGhpcyBicm93c2VyXG4gICAgICovXG4gICAgZXhwb3J0IGxldCB0cmFuc2l0aW9uRW5kRXZlbnQ6c3RyaW5nO1xuXG4gICAgLyoqXG4gICAgICogSWYgZmFsc2UsIHRyYW5zaXRpb25zIGFyZSBub3Qgc3VwcG9ydGVkIGJ5IHRoZSBicm93c2VyXG4gICAgICovXG4gICAgZXhwb3J0IGxldCB0cmFuc2l0aW9uc1N1cHBvcnRlZDpib29sZWFuO1xuXG4gICAgLyoqXG4gICAgICogSWYgZmFsc2UsIHRoaXMgaXMgbm90IGEgdG91Y2ggZGV2aWNlXG4gICAgICovXG4gICAgZXhwb3J0IGxldCBpc1RvdWNoRGV2aWNlOmJvb2xlYW4gPSAnb250b3VjaHN0YXJ0JyBpbiB3aW5kb3cgfHwgbmF2aWdhdG9yLm1heFRvdWNoUG9pbnRzID4gMDtcblxuICAgIC8qKlxuICAgICAqIElmIGZhbHNlLCBTVkdzIGFyZSBub3Qgc3VwcG9ydGVkIGJ5IHRoZSBicm93c2VyXG4gICAgICovXG4gICAgZXhwb3J0IGxldCBzdmdTdXBwb3J0ZWQ6Ym9vbGVhbiA9ICEhZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TICYmICEhZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKCdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycsICdzdmcnKS5jcmVhdGVTVkdSZWN0O1xuXG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBjdXJyZW50IGNvbXB1dGVkIHN0eWxlIG9mIGFuIGVsZW1lbnRcbiAgICAgKiBAcGFyYW0gZWxlbWVudCBUaGUgZWxlbWVudFxuICAgICAqL1xuICAgIGV4cG9ydCBmdW5jdGlvbiBnZXRDb21wdXRlZFN0eWxlKGVsZW1lbnQ6SFRNTEVsZW1lbnQpOkNTU1N0eWxlRGVjbGFyYXRpb24ge1xuICAgICAgICBpZiAoaGFzR2V0Q29tcHV0ZWRTdHlsZSkgcmV0dXJuIHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGVsZW1lbnQpO1xuICAgICAgICBpZiAoaGFzQ3VycmVudFN0eWxlU3VwcG9ydCAmJiBlbGVtZW50WydjdXJyZW50U3R5bGUnXSAhPT0gbnVsbCkgcmV0dXJuIGVsZW1lbnRbJ2N1cnJlbnRTdHlsZSddO1xuXG4gICAgICAgIHRocm93IFwiVW5hYmxlIHRvIGdldCBjb21wdXRlZCBzdHlsZVwiO1xuICAgIH1cblxuICAgIGxldCBvZmZzZXRQb3NpdGlvbmluZ3MgPSBbJ2Fic29sdXRlJywgJ3JlbGF0aXZlJywgJ2ZpeGVkJ107XG4gICAgLyoqXG4gICAgICogRGV0ZWN0cyB3aGV0aGVyIG9yIG5vdCBhYnNvbHV0ZS9yZWxhdGl2ZS9maXhlZCBwb3NpdGlvbmluZyBpcyBlbmFibGVkIG9uIGFuIGVsZW1lbnRcbiAgICAgKiBAcGFyYW0gZWxlbWVudCBUaGUgZWxlbWVudFxuICAgICAqL1xuICAgIGV4cG9ydCBmdW5jdGlvbiBpc09mZnNldFBvc2l0aW9uZWQoZWxlbWVudDpIVE1MRWxlbWVudCk6Ym9vbGVhbiB7XG4gICAgICAgIHZhciBwb3NpdGlvbiA9IGVsZW1lbnQuc3R5bGUucG9zaXRpb247XG5cbiAgICAgICAgaWYgKCFwb3NpdGlvbilcbiAgICAgICAgICAgIHBvc2l0aW9uID0gZ2V0Q29tcHV0ZWRTdHlsZShlbGVtZW50KS5wb3NpdGlvbjtcblxuICAgICAgICAvLyBJZiB3ZSBzdGlsbCBkb24ndCBoYXZlIGEgcG9zaXRpb24gYXQgdGhpcyBwb2ludCBpdCdzIG5vdCBvZmZzZXQgcG9zaXRpb25lZFxuICAgICAgICBpZiAoIXBvc2l0aW9uKSByZXR1cm4gZmFsc2U7XG5cbiAgICAgICAgLy8gVGhlIGVsZW1lbnQgaXMgb2Zmc2V0IHBvc2l0aW9uZWQgaWYgaXRzIG9uZSBvZiB0aGUgYWJvdmUgbGlzdFxuICAgICAgICBwb3NpdGlvbiA9IHBvc2l0aW9uLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIGZvciAobGV0IHBvc2l0aW9uaW5nIG9mIG9mZnNldFBvc2l0aW9uaW5ncylcbiAgICAgICAgICAgIGlmIChwb3NpdGlvbiA9PT0gcG9zaXRpb25pbmcpIHJldHVybiB0cnVlO1xuXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBleHBvcnQgZnVuY3Rpb24gZmxhdHRlbkNsYXNzTGlzdCguLi5jbGFzc2VzOihzdHJpbmd8c3RyaW5nW10pW10pOnN0cmluZ1tdIHtcbiAgICAgICAgcmV0dXJuIEFycmF5SGVscGVyLnJlZHVjZTxzdHJpbmd8c3RyaW5nW10sIHN0cmluZ1tdPihjbGFzc2VzLCAoY2xhc3NMaXN0LCBjbGFzc05hbWUpID0+IHtcbiAgICAgICAgICAgIGxldCBzdWJjbGFzc0xpc3Q6c3RyaW5nW107XG5cbiAgICAgICAgICAgIGlmICh0eXBlb2YgY2xhc3NOYW1lID09PSAnc3RyaW5nJykgc3ViY2xhc3NMaXN0ID0gW2NsYXNzTmFtZV07XG4gICAgICAgICAgICBlbHNlIHN1YmNsYXNzTGlzdCA9IGNsYXNzTmFtZTtcblxuICAgICAgICAgICAgZm9yIChsZXQgYyBvZiBzdWJjbGFzc0xpc3QpIHtcbiAgICAgICAgICAgICAgICBjbGFzc0xpc3QgPSBjbGFzc0xpc3QuY29uY2F0KGMuc3BsaXQoL1xccysvKSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBjbGFzc0xpc3Q7XG4gICAgICAgICB9LCBbXSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2F1c2VzIHRoZSBicm93c2VyIHRvIHJlY2FsY3VsYXRlIHRoZSBzdHlsZXMgb2YgdGhlIHNwZWNpZmllZCBlbGVtZW50XG4gICAgICogQHBhcmFtIGVsZW1lbnQgVGhlIGVsZW1lbnRcbiAgICAgKi9cbiAgICBleHBvcnQgZnVuY3Rpb24gdHJpZ2dlclJlZmxvdyhlbGVtZW50OkhUTUxFbGVtZW50KSB7XG4gICAgICAgIGVsZW1lbnQub2Zmc2V0SGVpZ2h0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNraXAgYSB0cmFuc2l0aW9uIG9uIGFuIGVsZW1lbnQgcHJlZm9ybWVkIGJ5IGEgY2FsbGJhY2sgZnVuY3Rpb25cbiAgICAgKiBAcGFyYW0gZWxlbWVudCBUaGUgZWxlbWVudFxuICAgICAqIEBwYXJhbSBjYWxsYmFjayBBIGZ1bmN0aW9uIHRvIHJ1biBjYXVzaW5nIGEgdHJhbnNpdGlvbiB0byBiZSBmaXJlZCBvbiB0aGUgZWxlbWVudFxuICAgICAqL1xuICAgIGV4cG9ydCBmdW5jdGlvbiBza2lwVHJhbnNpdGlvbihlbGVtZW50OkhUTUxFbGVtZW50LCBjYWxsYmFjazpGdW5jdGlvbik6dm9pZCB7XG4gICAgICAgIGlmICghdHJhbnNpdGlvbnNTdXBwb3J0ZWQpIHJldHVybiBjYWxsYmFjaygpO1xuXG4gICAgICAgIGxldCBvbGRUcmFuc2l0aW9uID0gZWxlbWVudC5zdHlsZS50cmFuc2l0aW9uO1xuXG4gICAgICAgIGVsZW1lbnQuc3R5bGUudHJhbnNpdGlvbiA9ICdub25lJztcbiAgICAgICAgY2FsbGJhY2suY2FsbCh0aGlzKTtcbiAgICAgICAgdHJpZ2dlclJlZmxvdyhlbGVtZW50KTtcblxuICAgICAgICBlbGVtZW50LnN0eWxlLnRyYW5zaXRpb24gPSBvbGRUcmFuc2l0aW9uO1xuICAgIH1cblxuICAgIGV4cG9ydCBmdW5jdGlvbiBvbk5leHRUcmFuc2l0aW9uRW5kKGVsZW1lbnQ6SFRNTEVsZW1lbnQsIGxpc3RlbmVyOkV2ZW50TGlzdGVuZXJPckV2ZW50TGlzdGVuZXJPYmplY3QpIHtcbiAgICAgICAgcmV0dXJuIEhUTUxIZWxwZXIub25jZShlbGVtZW50LCB0cmFuc2l0aW9uRW5kRXZlbnQsIGxpc3RlbmVyKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVjayBpZiBhbiBlbGVtZW50IGhhcyBhbGwgb2YgdGhlIHN1cHBsaWVkIGNsYXNzZXNcbiAgICAgKiBAcGFyYW0gZWxlbWVudCBUaGUgZWxlbWVudFxuICAgICAqIEBwYXJhbSBjbGFzc2VzIFRoZSBjbGFzc2VzIHRvIGNoZWNrXG4gICAgICovXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGhhc0NsYXNzZXMoZWxlbWVudDpIVE1MRWxlbWVudCwgY2xhc3Nlczogc3RyaW5nW10pOmJvb2xlYW47XG4gICAgLyoqXG4gICAgICogQ2hlY2sgaWYgYW4gZWxlbWVudCBoYXMgYWxsIG9mIHRoZSBzdXBwbGllZCBjbGFzc2VzXG4gICAgICogQHBhcmFtIGVsZW1lbnQgVGhlIGVsZW1lbnRcbiAgICAgKiBAcGFyYW0gY2xhc3NlcyBUaGUgY2xhc3NlcyB0byBjaGVja1xuICAgICAqL1xuICAgIGV4cG9ydCBmdW5jdGlvbiBoYXNDbGFzc2VzKGVsZW1lbnQ6SFRNTEVsZW1lbnQsIC4uLmNsYXNzZXM6IHN0cmluZ1tdKTpib29sZWFuO1xuICAgIGV4cG9ydCBmdW5jdGlvbiBoYXNDbGFzc2VzKGVsZW1lbnQ6SFRNTEVsZW1lbnQsIGNsYXNzQXJyYXk6IHN0cmluZ1tdfHN0cmluZywgLi4uY2xhc3NMaXN0OnN0cmluZ1tdKTpib29sZWFuIHtcbiAgICAgICAgbGV0IGNsYXNzZXM6IHN0cmluZ1tdO1xuXG4gICAgICAgIGlmICh0eXBlb2YgY2xhc3NBcnJheSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIGNsYXNzZXMgPSBjbGFzc0xpc3QgfHwgW107XG4gICAgICAgICAgICBjbGFzc2VzLnB1c2goY2xhc3NBcnJheSk7XG4gICAgICAgIH0gZWxzZSBjbGFzc2VzID0gY2xhc3NBcnJheTtcblxuICAgICAgICBmb3IgKGxldCBjbGFzc05hbWUgb2YgY2xhc3Nlcykge1xuICAgICAgICAgICAgaWYgKCFlbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyhjbGFzc05hbWUpKVxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIGV4cG9ydCBmdW5jdGlvbiBwYXJzZVBpeGVscyhwaXhlbHM6c3RyaW5nKTpudW1iZXIge1xuICAgICAgICBpZiAoIVN0cmluZ0hlbHBlci5lbmRzV2l0aChwaXhlbHMsICdweCcpKSByZXR1cm4gdW5kZWZpbmVkO1xuXG4gICAgICAgIHJldHVybiBwYXJzZUludChwaXhlbHMpO1xuICAgIH1cblxuICAgIGV4cG9ydCBmdW5jdGlvbiBjYWxjdWxhdGVQYWRkaW5nKGVsZW1lbnQ6SFRNTEVsZW1lbnQpIHtcbiAgICAgICAgbGV0IHtcbiAgICAgICAgICAgIHBhZGRpbmdCb3R0b20sXG4gICAgICAgICAgICBwYWRkaW5nVG9wLFxuICAgICAgICAgICAgcGFkZGluZ0xlZnQsXG4gICAgICAgICAgICBwYWRkaW5nUmlnaHRcbiAgICAgICAgfSA9IGdldENvbXB1dGVkU3R5bGUoZWxlbWVudCk7XG5cbiAgICAgICAgbGV0IHdpZHRoID0gcGFyc2VQaXhlbHMocGFkZGluZ0xlZnQpICsgcGFyc2VQaXhlbHMocGFkZGluZ1JpZ2h0KTtcbiAgICAgICAgbGV0IGhlaWdodCA9IHBhcnNlUGl4ZWxzKHBhZGRpbmdUb3ApICsgcGFyc2VQaXhlbHMocGFkZGluZ0JvdHRvbSk7XG5cbiAgICAgICAgaWYgKGlzTmFOKHdpZHRoKSkgd2lkdGggPSAwO1xuICAgICAgICBpZiAoaXNOYU4oaGVpZ2h0KSkgaGVpZ2h0ID0gMDtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgd2lkdGg6IHdpZHRoLFxuICAgICAgICAgICAgaGVpZ2h0OiBoZWlnaHRcbiAgICAgICAgfTtcbiAgICB9XG59XG4iLCJuYW1lc3BhY2UgUmlkZVN0eWxlclNob3djYXNlLlZpc2liaWxpdHlIZWxwZXIge1xuICAgIGNvbnN0IGRlZmF1bHRUcmFuc2l0aW9uSW5DbGFzcyA9ICdpbidcblxuICAgIGV4cG9ydCBmdW5jdGlvbiBzaG93KGVsZW1lbnQ6SFRNTEVsZW1lbnQsIHRyYW5zaXRpb25DbGFzczpzdHJpbmcgPSBkZWZhdWx0VHJhbnNpdGlvbkluQ2xhc3MpOlJpZGVTdHlsZXJQcm9taXNlIHtcbiAgICAgICAgc2V0VmlzaWJpbGl0eShlbGVtZW50LCB0cnVlKTtcblxuICAgICAgICBTdHlsZUhlbHBlci50cmlnZ2VyUmVmbG93KGVsZW1lbnQpO1xuXG4gICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0cmFuc2l0aW9uQ2xhc3MpO1xuXG4gICAgICAgIGxldCBwcm9taXNlID0gcmlkZXN0eWxlci5wcm9taXNlKCk7XG5cbiAgICAgICAgaWYgKCFTdHlsZUhlbHBlci50cmFuc2l0aW9uc1N1cHBvcnRlZCkgcHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICAgIGVsc2UgU3R5bGVIZWxwZXIub25OZXh0VHJhbnNpdGlvbkVuZChlbGVtZW50LCAoKSA9PiBwcm9taXNlLnJlc29sdmUoKSk7XG5cbiAgICAgICAgcmV0dXJuIHByb21pc2U7XG4gICAgfVxuXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGhpZGUoZWxlbWVudDpIVE1MRWxlbWVudCwgdHJhbnNpdGlvbkNsYXNzOnN0cmluZyA9IGRlZmF1bHRUcmFuc2l0aW9uSW5DbGFzcyk6UmlkZVN0eWxlclByb21pc2Uge1xuICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodHJhbnNpdGlvbkNsYXNzKTtcblxuICAgICAgICBsZXQgcHJvbWlzZSA9IHJpZGVzdHlsZXIucHJvbWlzZSgpO1xuXG4gICAgICAgIHByb21pc2UuZG9uZSgoKSA9PiBzZXRWaXNpYmlsaXR5KGVsZW1lbnQsIGZhbHNlKSk7XG5cbiAgICAgICAgaWYgKCFTdHlsZUhlbHBlci50cmFuc2l0aW9uc1N1cHBvcnRlZCkgcHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICAgIGVsc2UgU3R5bGVIZWxwZXIub25OZXh0VHJhbnNpdGlvbkVuZChlbGVtZW50LCAoKSA9PiBwcm9taXNlLnJlc29sdmUoKSk7XG5cbiAgICAgICAgcmV0dXJuIHByb21pc2U7XG4gICAgfVxuXG4gICAgZXhwb3J0IGZ1bmN0aW9uIHNldFZpc2liaWxpdHkoZWxlbWVudDpIVE1MRWxlbWVudCwgdmlzaWJsZTogYm9vbGVhbikge1xuICAgICAgICBpZiAoIXZpc2libGUpIHtcbiAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUudmlzaWJpbGl0eSA9ICdoaWRkZW4nO1xuICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5wb2ludGVyRXZlbnRzID0gJ25vbmUnO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZWxlbWVudC5zdHlsZS52aXNpYmlsaXR5ID0gJyc7XG4gICAgICAgICAgICBlbGVtZW50LnN0eWxlLnBvaW50ZXJFdmVudHMgPSAnJztcbiAgICAgICAgfVxuICAgIH1cbn0iLCJuYW1lc3BhY2UgUmlkZVN0eWxlclNob3djYXNlLnN0cmluZ3Mge1xyXG4gICAgcmVnaXN0ZXJMYW5ndWFnZShMYW5ndWFnZUtleXMuRW4sIHtcclxuICAgICAgICBcInZlaGljbGUtc2VsZWN0LXZpc3VhbGl6ZS1pbnRyb1wiOiBcIlZpc3VhbGl6ZSB3aGVlbHMsIHRpcmVzIGFuZCBzdXNwZW5zaW9uIG1vZGlmaWNhdGlvbnMgb24geW91ciB2ZWhpY2xlLlwiLFxyXG4gICAgICAgIFwidmVoaWNsZS1zZWxlY3Qtc2hhcmUtaW50cm9cIjogICAgIFwiU2hhcmUgd2l0aCB5b3VyIGZyaWVuZHMsIG9yIHNhdmUgZm9yIGluc3BpcmF0aW9uLlwiLFxyXG4gICAgICAgIFwic2VsZWN0LXlvdXItdmVoaWNsZVwiOiAgICAgICAgICAgIFwiU2VsZWN0IFlvdXIgVmVoaWNsZVwiLFxyXG4gICAgICAgIFwicGFpbnRcIjogICAgICAgICAgICAgICAgICAgICAgICAgIFwiUGFpbnRcIixcclxuICAgICAgICBcInN1c3BlbnNpb25cIjogICAgICAgICAgICAgICAgICAgICBcIlN1c3BlbnNpb25cIixcclxuICAgICAgICBcIndoZWVsc1wiOiAgICAgICAgICAgICAgICAgICAgICAgICBcIldoZWVsc1wiLFxyXG4gICAgICAgIFwidGlyZXNcIjogICAgICAgICAgICAgICAgICAgICAgICAgIFwiVGlyZXNcIixcclxuICAgICAgICBcImZyb250XCI6ICAgICAgICAgICAgICAgICAgICAgICAgICBcIkZyb250XCIsXHJcbiAgICAgICAgXCJyZWFyXCI6ICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJSZWFyXCIsXHJcbiAgICAgICAgXCJ2ZWhpY2xlLWRldGFpbHNcIjogICAgICAgICAgICAgICAgXCJWZWhpY2xlIERldGFpbHNcIixcclxuICAgICAgICBcImNoYW5nZS12ZWhpY2xlXCI6ICAgICAgICAgICAgICAgICBcIkNoYW5nZSBWZWhpY2xlXCIsXHJcbiAgICAgICAgXCJ3aGVlbC1kZXRhaWxzXCI6ICAgICAgICAgICAgICAgICAgXCJXaGVlbCBEZXRhaWxzXCIsXHJcbiAgICAgICAgXCJ0aXJlLWRldGFpbHNcIjogICAgICAgICAgICAgICAgICAgXCJUaXJlIERldGFpbHNcIixcclxuICAgICAgICBcInNlbGVjdC1wYWludFwiOiAgICAgICAgICAgICAgICAgICBcIlNlbGVjdCBQYWludFwiLFxyXG4gICAgICAgIFwic2VsZWN0LXdoZWVsc1wiOiAgICAgICAgICAgICAgICAgIFwiU2VsZWN0IFdoZWVsc1wiLFxyXG4gICAgICAgIFwic2VsZWN0LXRpcmVzXCI6ICAgICAgICAgICAgICAgICAgIFwiU2VsZWN0IFRpcmVzXCIsXHJcbiAgICAgICAgXCJhZGp1c3Qtc3VzcGVuc2lvblwiOiAgICAgICAgICAgICAgXCJBZGp1c3QgU3VzcGVuc2lvblwiLFxyXG4gICAgICAgIFwiY2hhbmdlLXdoZWVsLXNpemVcIjogICAgICAgICAgICAgIFwiV2hlZWwgU2l6ZVwiLFxyXG4gICAgICAgIFwibm8tcmVzdWx0c1wiOiAgICAgICAgICAgICAgICAgICAgIFwiTm8gUmVzdWx0cyBGb3VuZFwiLFxyXG4gICAgICAgIFwibm8td2hlZWwtcmVzdWx0c1wiOiAgICAgICAgICAgICAgIFwiTm8gd2hlZWxzIGZvdW5kIGZvciB0aGlzIHZlaGljbGUuXCIsXHJcbiAgICAgICAgXCJ3aGVlbC1mZWF0dXJlcy1zcGVjc1wiOiAgICAgICAgICAgXCJGZWF0dXJlcyAmIFNwZWNzLlwiLFxyXG4gICAgICAgIFwic2hhcmUtbXktdmVoaWNsZVwiOiAgICAgICAgICAgICAgIFwiU2hhcmUgTXkgVmVoaWNsZVwiLFxyXG4gICAgICAgIFwic2hhcmUtaW5zdHJ1Y3Rpb25zXCI6ICAgICAgICAgICAgIFwiVXNlIHRoZSBidXR0b25zIHRvIHNoYXJlIG9yIHNhdmUgeW91ciB2ZWhpY2xlIGNvbmZpZ3VyYXRpb24uXCIsXHJcbiAgICAgICAgXCJuby1kZXNjcmlwdGlvbi13aGVlbFwiOiAgICAgICAgICAgXCJXZSBkb24ndCBoYXZlIGEgZGVzY3JpcHRpb24gZm9yIHRoaXMgd2hlZWwgeWV0XCIsXHJcbiAgICAgICAgJ3Nob3ctc3BlY3MnOiAgICAgICAgICAgICAgICAgICAgIFwiU2hvdyBTcGVjc1wiLFxyXG4gICAgICAgICdjYWxsJzogICAgICAgICAgICAgICAgICAgICAgICAgICBcIkNhbGxcIixcclxuICAgICAgICAnc2l6ZSc6ICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJTaXplXCIsXHJcbiAgICAgICAgJ29mZnNldCc6ICAgICAgICAgICAgICAgICAgICAgICAgIFwiT2Zmc2V0XCIsXHJcbiAgICAgICAgJ2JvbHQtcGF0dGVybic6ICAgICAgICAgICAgICAgICAgIFwiQm9sdCBQYXR0ZXJuXCIsXHJcbiAgICAgICAgJ2NlbnRlcmJvcmUnOiAgICAgICAgICAgICAgICAgICAgIFwiQ2VudGVyYm9yZVwiLFxyXG4gICAgICAgICdwcmljZSc6ICAgICAgICAgICAgICAgICAgICAgICAgICBcIlByaWNlXCIsXHJcbiAgICAgICAgJ2l0ZW0tbnVtYmVyJzogICAgICAgICAgICAgICAgICAgIFwiSXRlbSAjXCIsXHJcbiAgICAgICAgJ2JyYW5kcyc6ICAgICAgICAgICAgICAgICAgICAgICAgIFwiQnJhbmRzXCIsXHJcbiAgICAgICAgJ2ZpbmlzaGVzJzogICAgICAgICAgICAgICAgICAgICAgIFwiRmluaXNoZXNcIixcclxuICAgICAgICAnc2l6ZXMnOiAgICAgICAgICAgICAgICAgICAgICAgICAgXCJTaXplc1wiLFxyXG4gICAgICAgICdhbGwnOiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIkFsbFwiLFxyXG4gICAgICAgICdhbGwtYnJhbmRzJzogICAgICAgICAgICAgICAgICAgICBcIkFsbCBCcmFuZHNcIixcclxuICAgICAgICAnYWxsLWZpbmlzaGVzJzogICAgICAgICAgICAgICAgICAgXCJBbGwgRmluaXNoZXNcIixcclxuICAgICAgICAnYWxsLXNpemVzJzogICAgICAgICAgICAgICAgICAgICAgXCJBbGwgU2l6ZXNcIixcclxuICAgICAgICAnZmlsdGVyLXJlc3VsdHMnOiAgICAgICAgICAgICAgICAgXCJGaWx0ZXIgUmVzdWx0c1wiLFxyXG4gICAgICAgICdsb2FkaW5nLWVsbGlwc2lzJzogICAgICAgICAgICAgICBcIkxvYWRpbmcuLi5cIixcclxuICAgICAgICAnc2hvdy1jb3VudC1mb3JtYXQtdGlyZXMnOiAgICAgICAgXCJTaG93IHtjb3VudH0gVGlyZXNcIixcclxuICAgICAgICAnc2hvdy1jb3VudC1mb3JtYXQtd2hlZWxzJzogICAgICAgXCJTaG93IHtjb3VudH0gV2hlZWxzXCIsXHJcbiAgICAgICAgJ3NwZWNpZmljYXRpb25zJzogICAgICAgICAgICAgICAgIFwiU3BlY2lmaWNhdGlvbnNcIixcclxuICAgICAgICAnc3BlZWQtcmF0aW5nJzogICAgICAgICAgICAgICAgICAgXCJTcGVlZCBSYXRpbmdcIixcclxuICAgICAgICAnYW55LXNwZWVkLXJhdGluZ3MnOiAgICAgICAgICAgICAgXCJBbnkgU3BlZWQgUmF0aW5nc1wiLFxyXG4gICAgICAgICdmZWF0dXJlcyc6ICAgICAgICAgICAgICAgICAgICAgICBcIkZlYXR1cmVzXCIsXHJcbiAgICAgICAgJ2FueS1mZWF0dXJlcyc6ICAgICAgICAgICAgICAgICAgIFwiQW55IEZlYXR1cmVzXCIsXHJcbiAgICAgICAgJ2ZpbmlzaCc6ICAgICAgICAgICAgICAgICAgICAgICAgIFwiRmluaXNoXCIsXHJcbiAgICAgICAgJ3N1bW1hcnknOiAgICAgICAgICAgICAgICAgICAgICAgIFwiU3VtbWFyeVwiLFxyXG4gICAgICAgICdjaGVjay1vdXQtbXktdmVoaWNsZSc6ICAgICAgICAgICBcIkNoZWNrIG91dCBteSB2ZWhpY2xlIVwiXHJcbiAgICB9KTtcclxufSJdfQ==
